<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Implementation Notes for GNU CLISP.</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@sf.net" /><meta name="generator" content="DocBook XSL Stylesheets V2004-10-26_05:19_snapshot" /><meta name="keywords" content="Lisp, Common Lisp, CLISP" /></head><body><div class="book" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="impnotes-top"></a>Implementation Notes for <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</h1></div><div><h2 class="subtitle">These notes document <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version 2.33.</h2></div><div><div class="author"><h3 class="author"><span class="honorific">Dr</span>. <span class="firstname">Bruno</span> <span class="surname">Haible</span></h3></div></div><div><div class="author"><h3 class="author"><span class="honorific">Dr</span>. <span class="firstname">Sam</span> <span class="surname">Steingold</span></h3></div></div><div><p class="copyright">Copyright © 1992-2004 Bruno Haible</p></div><div><p class="copyright">Copyright © 1998-2004 Sam Steingold</p></div><div><div class="legalnotice"><a id="legalese"></a><p>These notes are dually licensed under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a> and <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
   This means that you can redistribute this document under
   either of these two licenses, at your choice.</p><p><b>These notes are covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>. </b>Permission is granted to copy, distribute and/or modify this
    document under the terms of the GNU Free Documentation License
    (<a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>), either version 1.2 of the License, or (at your option) any
    later version published by the <a href="http://www.fsf.org" target="_top">Free Software Foundation (FSF)</a>;
    with no Invariant Sections,
    with no Front-Cover Text, and
    with no Back-Cover Texts.
    A copy of the license is included in <a href="#gfdl" title="Appendix&#xA0;A.&#xA0;GNU Free Documentation License">Appendix A, <i>GNU Free Documentation License</i></a>.
  </p><p><b>These notes are covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. </b>This document documents free software; you can redistribute it
    and/or modify it under the terms of the GNU General Public License
    (<a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>), either version 2 of the License, or (at your option) any
    later version published by the <a href="http://www.fsf.org" target="_top">Free Software Foundation (FSF)</a>.
    A copy of the license is included in <a href="#gpl" title="Appendix&#xA0;B.&#xA0;GNU General Public License">Appendix B, <i>GNU General Public License</i></a>.
  </p></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#overview">Overview</a></span></dt><dt><span class="preface"><a href="#conventions">Conventions</a></span></dt><dt><span class="part"><a href="#clhs-chapters">I. Chapters or the Common Lisp HyperSpec</a></span></dt><dd><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.4. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.5. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro <tt class="function">EXT:FCASE</tt></a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function <tt class="function">EXT:XOR</tt></a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
  [CLHS-6]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#package-case">11.4.1. Package Case-Sensitivity</a></span></dt><dt><span class="section"><a href="#make-pack">11.4.2. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#defpack">11.4.3. Macro <tt class="function">DEFPACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.4. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></dd><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.5. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.12. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.13. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.14. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  <tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt>
    and
  <tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt>
   </a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#print-object">22.5.2. Generic Function <tt class="function">PRINT-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.5.3. Macro <tt class="function">PRINT-UNREADABLE-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.4. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.5.5. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.6. Miscellaneous Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></dd><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt><dt><span class="section"><a href="#argv">25.2.14. Function <tt class="function">EXT:ARGV</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></dd><dt><span class="part"><a href="#extensions">II. Extensions</a></span></dt><dd><dl><dt><span class="chapter"><a href="#ext-standard">29. Standard Widely Portable Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt></dl></dd><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt><dd><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <tt class="classname">EXT:FILL-STREAM</tt>.</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ext-p-indep">30. Platform Independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#cradle-grave">30.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></dd><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-platform">31. Platform Specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization.</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization.</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.8. Modules included in the source distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">31.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.2. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.3. The choice of the <span><strong class="command">C</strong></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></dd><dt><span class="section"><a href="#app-dev">31.7. Application delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#shell">31.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">31.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">31.9. Operating System Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">31.10. Other</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-modules">32. Extensions Implemented as Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access.</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.11. Transaction Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.12. Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#regexp">32.5. <span><strong class="command">CLISP</strong></span> <strong class="package">“<span class="quote">REGEXP</span>”</strong> module</a></span></dt><dd><dl><dt><span class="section"><a href="#re-example">32.5.1. Example</a></span></dt></dl></dd><dt><span class="section"><a href="#pcre">32.6. Perl Compatible Regular Expressions.</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.7. Internationalization of User Programs</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">32.7.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#i18n-locale">32.7.2. Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#syscalls">32.8. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.9. Oracle Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#ora-functionality">32.9.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.9.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.9.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.9.4. Building the Oracle Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#fastcgi">32.10. The FastCGI Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#fcgi-overview">32.10.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.10.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.10.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.10.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock">32.11. Raw Socket Access.</a></span></dt><dt><span class="section"><a href="#zlib">32.12. ZLIB Interface</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#internals">III. Internals of the <span><strong class="command">CLISP</strong></span> Implementation</a></span></dt><dd><dl><dt><span class="chapter"><a href="#gc">33. Overview of <span><strong class="command">CLISP</strong></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">33.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">33.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">33.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">33.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">33.6. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">34. Extending <span><strong class="command">CLISP</strong></span>.</a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">34.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">34.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">34.3. Recompilation.</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">35. The <span><strong class="command">CLISP</strong></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">35.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">35.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">35.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">35.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">35.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">35.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">35.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">35.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">35.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">35.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">35.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">35.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">35.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">35.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">35.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">35.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">35.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">35.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">35.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">35.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">35.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">35.5.17. Shortcut instructions</a></span></dt></dl></dd><dt><span class="section"><a href="#bytecode-design">35.6. Bytecode Design</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-when-add-q">35.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">35.6.2. Why JMPTAIL?</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="appendix"><a href="#gfdl">A. GNU Free Documentation License</a></span></dt><dd><dl><dt><span class="section"><a href="#gfdl-0">A.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">A.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">A.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">A.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">A.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">A.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">A.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">A.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">A.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">A.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">A.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">A.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gpl">B. GNU General Public License</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gpl-1">B.1. Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">B.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">B.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">B.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">B.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">B.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">B.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">B.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">B.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">B.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">B.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">B.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">B.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">B.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">B.2.13. Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">B.3. How to Apply These Terms to Your New Programs
    </a></span></dt></dl></dd><dt><span class="index"><a href="#idx">Index</a></span></dt><dt><span class="bibliography"><a href="#references">References</a></span></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>5.1. <a href="#values-limits-table">Function call limits</a></dt><dt>12.1. <a href="#bool-op-table">Boolean Operations</a></dt><dt>12.2. <a href="#fixnum-lim-table">Fixnum limits</a></dt><dt>13.1. <a href="#standard-char-table">Standard characters</a></dt><dt>13.2. <a href="#semi-standard-char-table">Semi-standard characters</a></dt><dt>13.3. <a href="#extra-named-chars-table">Additional Named Characters</a></dt><dt>13.4. <a href="#ctrl-char-table">Additional syntax for characters with code from
   <span class="keycode">#x00</span> to <span class="keycode">#x1F</span>:</a></dt><dt>13.5. <a href="#char-code-limit-table">Number of characters</a></dt><dt>13.6. <a href="#dos-win32-chars-table">Platform dependent characters: <strong>Win32</strong> platforms.</a></dt><dt>13.7. <a href="#unix-chars-table">Platform dependent characters: <strong>UNIX</strong> platforms.</a></dt><dt>13.8. <a href="#char-bits-table">Character bit constants (obsolete)</a></dt><dt>15.1. <a href="#array-limit-table">Array limits</a></dt><dt>19.1. <a href="#min-filename-syntax-table">The minimum filename syntax that may be used portably</a></dt><dt>23.1. <a href="#unreadable-objects-table">Unreadable objects</a></dt><dt>25.1. <a href="#debugger-main-deb-step">Commands common to the main loop, the debugger and the stepper</a></dt><dt>25.2. <a href="#debugger-deb-step">Commands common to the debugger and the stepper</a></dt><dt>25.3. <a href="#debugger-deb-step-1">Commands common to the debugger and the stepper</a></dt><dt>25.4. <a href="#debugger-eval-apply">Commands specific to <tt class="function">EVAL</tt>/<tt class="function">APPLY</tt></a></dt><dt>25.5. <a href="#debugger-deb">Commands specific to the debugger</a></dt><dt>25.6. <a href="#debugger-step">Commands specific to the stepper</a></dt><dt>25.7. <a href="#internal-time-units-table">Time granularity</a></dt><dt>29.1. <a href="#mop-inherit-struct">Direct Superclass Relationships
  Among The Specified Metaobject Classes</a></dt><dt>29.2. <a href="#class-mo-initargs">Initialization arguments and
   accessors for class metaobjects</a></dt><dt>29.3. <a href="#slotd-mo-initargs">Initialization arguments and
  accessors for slot definition metaobjects</a></dt><dt>29.4. <a href="#gf-mo-initargs">Initialization arguments and accessors
  for generic function metaobjects</a></dt><dt>29.5. <a href="#mop-meth-initargs">Initialization arguments and
  accessors for method metaobjects</a></dt><dt>29.6. <a href="#mop-sa-instance-stuct-table">The correspondence between slot access function and
  underlying slot access generic function</a></dt><dt>33.1. <a href="#mem-models-comb-typecodes">Memory models with <strong><tt class="option">TYPECODES</tt></strong></a></dt><dt>33.2. <a href="#mem-models-comb-heapcodes">Memory models with <strong><tt class="option">HEAPCODES</tt></strong></a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>29.1. <a href="#ex-fill-stream">Example of <tt class="classname">EXT:FILL-STREAM</tt> usage</a></dt><dt>31.1. <a href="#dffi-simple">Simple declarations and access</a></dt><dt>31.2. <a href="#dffi-extern-var">external <span><strong class="command">C</strong></span> variable and some accesses</a></dt><dt>31.3. <a href="#dffi-extern-func1">Calling an external function</a></dt><dt>31.4. <a href="#dffi-extern-func2">Another example for calling an external function</a></dt><dt>31.5. <a href="#ex-call-in">Calling Lisp from <span><strong class="command">C</strong></span></a></dt><dt>31.6. <a href="#ex-call-in-dll">Calling Lisp from <span><strong class="command">C</strong></span> dynamically</a></dt><dt>31.7. <a href="#dffi-gethostname">Variable size arguments:
  calling <tt class="function">gethostname</tt> from <span><strong class="command">CLISP</strong></span></a></dt><dt>31.8. <a href="#dffi-dll-var">Accessing variables in shared libraries.</a></dt><dt>31.9. <a href="#ex-dffi-validity">Controling validity of ressources.</a></dt><dt>31.10. <a href="#affi-ex-1-predefined">Using a predefined library function file</a></dt><dt>31.11. <a href="#affi-ex-2-flibcall">Using flibcall</a></dt><dt>31.12. <a href="#affi-ex-3-dynamic">Be fully dynamic, defining library bases ourselves</a></dt><dt>31.13. <a href="#affi-ex-4-sample">Some sample function definitions</a></dt><dt>32.1. <a href="#ex-re-match"><tt class="function">REGEXP:MATCH</tt></a></dt><dt>32.2. <a href="#ex-re-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a></dt><dt>32.3. <a href="#re-example-lisp">shell-count.lisp</a></dt><dt>32.4. <a href="#re-example-perl">shell-count.perl</a></dt></dl></div><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="overview"></a>Overview</h2></div></div></div><p>These notes discuss the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implementation of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> by
</p><div class="blockquote"><blockquote class="blockquote"><div class="address"><p><br />
 <span class="honorific">Dr</span> <span class="firstname">Bruno</span> <span class="surname">Haible</span><br />
 <span class="street">Louisenstraße 103</span><br />
 <span class="city">Bad Homburg</span><br />
 <span class="postcode">D-61348</span> <span class="country">Germany</span><br />
 <span class="otheraddr"><a href="http://www.haible.de/bruno/" target="_top">http://www.haible.de/bruno/</a></span><br />
</p></div></blockquote></div><p>
 and
</p><div class="blockquote"><blockquote class="blockquote"><div class="address"><p><br />
 <span class="honorific">Dr</span> <span class="firstname">Michael</span> <span class="surname">Stoll</span><br />
 <span class="street">Westerwaldweg 22</span><br />
 <span class="city">Remagen-Oberwinter</span><br />
 <span class="postcode">D-53424</span> <span class="country">Germany</span><br />
 <span class="otheraddr"><a href="http://www.math.uni-duesseldorf.de/~stoll/" target="_top">http://www.math.uni-duesseldorf.de/~stoll/</a></span><br />
</p></div></blockquote></div><p>
The current maintainers are
</p><div class="blockquote"><blockquote class="blockquote"><div class="address"><p><br />
  <span class="honorific">Dr</span> <span class="firstname">Bruno</span> <span class="surname">Haible</span><br />
</p></div></blockquote></div><p>
and
</p><div class="blockquote"><blockquote class="blockquote"><div class="address"><p><br />
  <span class="honorific">Dr</span> <span class="firstname">Sam</span> <span class="surname">Steingold</span><br />
  <span class="otheraddr"><a href="http://www.podval.org/~sds/" target="_top">http://www.podval.org/~sds/</a></span><br />
</p></div></blockquote></div><p>
</p><p>This implementation is mostly conforming to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 available on-line as the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] (but the printed ANSI document
 remains the authoritative source of information).  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] supersedes
 the earlier specifications [<span class="citation"><a href="#CLtL1">CLtL1</a></span>] and [<span class="citation"><a href="#CLtL2">CLtL2</a></span>].</p><p>The <a href="#clhs-chapters" title="Part&#xA0;I.&#xA0;Chapters or the Common Lisp HyperSpec">first part</a> of these notes
 is indexed in parallel to the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] and documents how <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 implements the standard [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p><p>The <a href="#extensions" title="Part&#xA0;II.&#xA0;Extensions">second part</a> documents the
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, i.e., the functionality that goes beyond the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirements.  It includes widely portable common extensions,
 e.g., the [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>], as well as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific extensions.</p><p>The <a href="#internals" title="Part&#xA0;III.&#xA0;Internals of the CLISP Implementation">third part</a> is intended mostly
 for developers as it documents the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internals, e.g., <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion,
 adding new built-ins, and the bytecodes generated by the compiler
 (i.e., what is printed by <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a>).</p></div><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conventions"></a>Conventions</h2></div></div></div><p>The following is the mark-up notations used in this document:
 </p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Object Kind</th><th align="center">Example</th></tr></thead><tbody><tr><td align="center">Function</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a></td></tr><tr><td align="center">Variable</td><td align="center"><a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a></td></tr><tr><td align="center">Formal Argument</td><td align="center"><em class="replaceable"><tt>x</tt></em></td></tr><tr><td align="center">Keyword</td><td align="center"><tt class="constant">:EOF</tt></td></tr><tr><td align="center">Number</td><td align="center"><tt class="literal">0</tt></td></tr><tr><td align="center">Character</td><td align="center"><span class="keysym">#\Newline</span></td></tr><tr><td align="center">Class, type</td><td align="center"><tt class="classname">REGEXP:MATCH</tt></td></tr><tr><td align="center">Format instruction</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><tt class="literal">~A</tt></a></td></tr><tr><td align="center"><a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> keyword</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a></td></tr><tr><td align="center">Declaration</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html" target="_top"><tt class="literal">FTYPE</tt></a></td></tr><tr><td align="center">Package</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a></td></tr><tr><td align="center">Code (you are likely to type it)</td><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a> 1 2)</tt></td></tr><tr><td align="center">Data (<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is likely to print it)</td><td align="center"><tt class="data">#(1 2 3)</tt></td></tr><tr><td align="center">Code sample</td><td align="center"><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defun cycle-length (n <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (len 1) (top 0))
  (cond ((= n 1) (values len top))
        ((evenp n) (cycle-length (ash n -1) (1+ len) (max top n)))
        (t (let ((next (1+ (* 3 n))))
             (cycle-length next (1+ len) (max top next))))))
    </pre></td></tr></table></td></tr><tr><td align="center">Bytecode instruction</td><td align="center"><tt class="byte">(STOREV <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td></tr><tr><td align="center">first mention of an entity</td><td align="center"><strong class="first"><em class="firstterm">firstterm</em></strong></td></tr></tbody></table></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="clhs-chapters"></a>Chapters or the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>]</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.4. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.5. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro <tt class="function">EXT:FCASE</tt></a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function <tt class="function">EXT:XOR</tt></a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
  [CLHS-6]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#package-case">11.4.1. Package Case-Sensitivity</a></span></dt><dt><span class="section"><a href="#make-pack">11.4.2. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#defpack">11.4.3. Macro <tt class="function">DEFPACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.4. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></dd><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.5. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.12. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.13. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.14. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  <tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt>
    and
  <tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt>
   </a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#print-object">22.5.2. Generic Function <tt class="function">PRINT-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.5.3. Macro <tt class="function">PRINT-UNREADABLE-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.4. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.5.5. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.6. Miscellaneous Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></dd><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt><dt><span class="section"><a href="#argv">25.2.14. Function <tt class="function">EXT:ARGV</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="intro"></a>Chapter 1. Introduction
  <a href="http://www.lisp.org/HyperSpec/Body/chap-1.html" target="_top">[CLHS-1]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="spec-symb"></a>1.1. Special Symbols
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html" target="_top">[CLHS-1.4.1.3]</a></h2></div></div></div><p>The <strong class="first"><em class="firstterm">final delimiter
  <a id="fin-delim" class="indexterm"></a></em></strong>
 of an interactive stream:
 </p><div class="variablelist"><dl><dt><a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a></dt><dd>type <span><strong class="keycap">Control</strong></span>-<span class="keysym">D</span>
     at the beginning of a line</dd><dt><a href="http://winehq.com/" target="_top"><strong>Win32</strong></a></dt><dd>type <span><strong class="keycap">Control</strong></span>-<span class="keysym">Z</span>,
     followed by <span><strong class="keycap">Return</strong></span></dd></dl></div><p>
 This final delimiter is never actually seen by programs; no need to
 test for <span class="keysym">#\^D</span> or <span class="keysym">#\^Z</span> - use
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a> to check for end of stream.
 Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><tt class="function">CLEAR-INPUT</tt></a> on the stream removes the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> state,
 thus making it available for further input.</p><p>A newline character can be entered by the user by pressing the
 <span><strong class="keycap">Newline</strong></span> key or, on the numeric keypad, the
 <span><strong class="keycap">Enter</strong></span> key.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="error-terms"></a>1.2. Error Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html" target="_top">[CLHS-1.4.2]</a></h2></div></div></div><p>Safety settings are ignored; therefore where the standard uses the
 phrase “<span class="quote">should signal an error</span>”, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cl-symb"></a>1.3. Symbols in the Package <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-9.html" target="_top">[CLHS-1.9]</a></h2></div></div></div><p>All 978 symbols in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> package specified by the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] are implemented.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="syntax"></a>Chapter 2. Syntax
   <a href="http://www.lisp.org/HyperSpec/Body/chap-2.html" target="_top">[CLHS-2]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.4. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.5. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="reader-alg"></a>2.1. Reader Algorithm
   <a href="http://www.lisp.org/HyperSpec/Body/sec_2-2.html" target="_top">[CLHS-2.2]</a></h2></div></div></div><p>The requirement of step 4 that a
 “<span class="quote"><a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#reader_macro_function" target="_top">reader
  macro function</a> may return zero values or one value</span>”
  <strong>is</strong> enforced.  You can use the function <a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><tt class="function">VALUES</tt></a> to control the
  number of values returned.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tokens"></a>2.2. Symbols as Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html" target="_top">[CLHS-2.3.4]</a></h2></div></div></div><p>A <strong class="first"><em class="firstterm">reserved token
  <a id="res-token" class="indexterm"></a></em></strong>,
 i.e., a <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#token" target="_top">token</a> that has
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#potential_number" target="_top">potential number</a>
 syntax but cannot be interpreted as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>, is interpreted as
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> when being read.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="valid-patterns"></a>2.3. Valid Patterns for Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html" target="_top">[CLHS-2.3.5]</a></h2></div></div></div><p>When a token with package markers is read, then no checking is
 done whether the package part and the symbol-name part do not have
 number syntax. (What's the purpose of this check?) So we consider
 tokens like <span class="token">USER::</span> or <span class="token">:1</span> or
 <span class="token">LISP::4711</span> or <span class="token">21:3</span> as symbols.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="backquote"></a>2.4. Backquote
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html" target="_top">[CLHS-2.4.6]</a></h2></div></div></div><p>The backquote read macro also works when nested. Example:
</p><div class="informalexample"><a id="bq-nested"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> ``(,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',a) ,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> `(list #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',a) #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> (list 'list (list 'function (list 'lambda nil (list 'quote a)))
                     (list 'function (list 'lambda nil (list 'quote b)))))
</pre></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sharpsign"></a>2.5. Sharpsign
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html" target="_top">[CLHS-2.4.8]</a></h2></div></div></div><p>Reader macros are also defined for the following:
</p><div class="variablelist"><a id="extra-read-macro-table"></a><p class="title"><b>Additional reader macros</b></p><dl><dt>#,</dt><dd>load-time evaluation, kept despite the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue
    <a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a>
 </dd><dt>#Y</dt><dd>function objects and file <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>s
 </dd><dt>#""</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a></dd></dl></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="eval"></a>Chapter 3. Evaluation and Compilation
   <a href="http://www.lisp.org/HyperSpec/Body/chap-3.html" target="_top">[CLHS-3]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></div><p>All the functions built by <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a> and the like are
 atoms.  There are built-in functions written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, compiled
 functions (both of type <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><tt class="classname">COMPILED-FUNCTION</tt></a>) and interpreted
 functions (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="evaluation"></a>3.1. Evaluation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1.html" target="_top">[CLHS-3.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-environ"></a>3.1.1. Introduction to Environments
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1.html" target="_top">[CLHS-3.1.1]</a></h3></div></div></div><p><a id="the-env"></a><b>Macro <a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a>. </b>As in Scheme, the macro <tt class="code">(<a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a>)</tt>
 returns the current <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.  This works only in interpreted code and
 is not compilable!</p><p><a id="eval-env"></a><b>Function <tt class="code">(EXT:EVAL-ENV
 <em class="replaceable"><tt>form</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt>. </b>evaluates a form in a given <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>, just as if the
 form had been a part of the program that the <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em> came from.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dyn-var"></a>3.1.2. Dynamic Variables
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-2.html" target="_top">[CLHS-3.1.2.1.1.2]</a></h3></div></div></div><p>“<span class="quote">Undefined variables</span>”, i.e. <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1.html" target="_top">variable</a>s which are
 referenced outside any lexical binding for a variable of the same name
 and which are not declared <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a>, are treated like <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-2.html" target="_top">dynamic variable</a>s
 in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>.  The compiler <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> when it
 encounters an undefined variable.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="compilation"></a>3.2. Compilation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2.html" target="_top">[CLHS-3.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-terms"></a>3.2.1. Compiler Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-1.html" target="_top">[CLHS-3.2.1]</a></h3></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> compiles to platform-independent <a href="impnotes.html#bytecode" class="olink">bytecode</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-macros"></a>3.2.2. Compiler Macros
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-2-1.html" target="_top">[CLHS-3.2.2.1]</a></h3></div></div></div><p>Compiler macros are expanded in the compiled code only, and
ignored by the interpreter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="similarity"></a>3.2.3. Definition of Similarity
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-2-2.html" target="_top">[CLHS-3.2.4.2.2]</a></h3></div></div></div><p>Hash tables are <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-1.html" target="_top">externalizable object</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="declarations"></a>3.3. Declarations
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-3.html" target="_top">[CLHS-3.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></div><p>The declarations <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_type.html" target="_top"><tt class="literal">TYPE</tt></a> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>variable</tt></em> ...)</tt>,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html" target="_top"><tt class="literal">FTYPE</tt></a> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>function</tt></em> ...)</tt>,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><tt class="literal">OPTIMIZE</tt></a> (<em class="replaceable"><tt>quality</tt></em>
        <em class="replaceable"><tt>value</tt></em>) ...)</tt>
   are ignored by the interpreter and the compiler.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-decl"></a>3.3.1. Additional declarations</h3></div></div></div><p>The declaration <a href="#compile-decl" title="3.3.1.&#xA0;Additional declarations"><tt class="code">(COMPILE)</tt></a> has the effect that the current
 form is compiled prior to execution.  Examples:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><tt class="function">DECLARE</tt></a> (compile)) <em class="replaceable"><tt>form</tt></em>)
</pre></td></tr></table><p>
executes a compiled version of form.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> ((x 0))
  (<a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">FLET</tt></a> ((inc () (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><tt class="function">DECLARE</tt></a> (compile)) (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><tt class="function">INCF</tt></a> x))
         (dec () (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><tt class="function">DECF</tt></a> x)))
    (<a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><tt class="function">VALUES</tt></a> #'inc #'dec)))
</pre></td></tr></table><p>
 returns two functions.  The first is compiled and increments <em class="replaceable"><tt>x</tt></em>, the
 second is interpreted (slower) and decrements the same <em class="replaceable"><tt>x</tt></em>.</p><p>The type assertion <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><tt class="function">THE</tt></a> <em class="replaceable"><tt>value-type</tt></em> <em class="replaceable"><tt>form</tt></em>)</tt>
 enforces a type check in interpreted code.
 No type check is done in compiled code.  See also the <a href="#ethe"><tt class="function">EXT:ETHE</tt></a> macro.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lalist"></a>3.4. Lambda Lists
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4.html" target="_top">[CLHS-3.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="boa-lalist"></a>3.4.1. Boa Lambda Lists
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html" target="_top">[CLHS-3.4.6]</a></h3></div></div></div><p>The initial value of an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;AUX</tt></a> variable in a boa <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is
 the value of the corresponding slot's initial form.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="eval-comp"></a>3.5. The Evaluation and Compilation Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_evalu_n_dictionary.html" target="_top">[CLHS-3.8]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="spec-decl"></a>3.5.1. Declaration <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html" target="_top"><tt class="function">PROCLAIM</tt></a> '(<a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a> <em class="replaceable"><tt>variable</tt></em>))</tt> declarations
 cannot be undone.  The same holds for <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFPARAMETER</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> declarations.</p><p>It is an error if a <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> variable is bound at the moment
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> is executed, but <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> does not check
 this.</p><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s may not be bound dynamically or lexically.</p><p><a id="spe-var-p"></a><b>Function <a href="#spe-var-p"><tt class="function">EXT:SPECIAL-VARIABLE-P</tt></a>. </b>You can use the function <tt class="code">(<a href="#spe-var-p"><tt class="function">EXT:SPECIAL-VARIABLE-P</tt></a> <em class="replaceable"><tt>symbol</tt></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt> to check whether the symbol is a
 special variable.  <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or omitted means use the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> means use current <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.
 You can also obtain the current <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> using the macro
 <a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a> (interpreted code only).
 This function will always return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for global special
 variables and <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s.
 </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function will not work in compiled code as you
 might expect: when called with <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>, it will be called at
 <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#execution_time" target="_top">execution time</a> and check for globally special variables, but when <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>
 is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, it will be called at <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> and the value will be used
 as a constant in the code.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="constantp"></a>3.5.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a> fully complies with [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
Additionally, some non-trivial forms are identified as constants, e.g.,
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> 1 2 3))</tt> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-when"></a>3.5.3. Macro <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> also accepts the situations <tt class="code">(NOT EVAL)</tt>
 and <tt class="code">(NOT COMPILE)</tt>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The situations <tt class="constant">EVAL</tt>,
 <tt class="constant">LOAD</tt> and <tt class="constant">COMPILE</tt> are
 deprecated by the spec, and they are <strong>not</strong> equivalent to the new
 standard situations <tt class="constant">:EXECUTE</tt>,
 <tt class="constant">:LOAD-TOPLEVEL</tt>
 and <tt class="constant">:COMPILE-TOPLEVEL</tt> in that they ignore the
 top-level versus non-top-level distinction.</p></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="types-classes"></a>Chapter 4. Types and Classes
   <a href="http://www.lisp.org/HyperSpec/Body/chap-4.html" target="_top">[CLHS-4]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="types"></a>4.1. Types
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2.html" target="_top">[CLHS-4.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="type-spec"></a>4.1.1. Type Specifiers
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2-3.html" target="_top">[CLHS-4.2.3]</a></h3></div></div></div><p>The general form of the <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> type specifier is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <em class="replaceable"><tt>type-of-real-part</tt></em>
 <em class="replaceable"><tt>type-of-imaginary-part</tt></em>)</tt>.  The type
 specifier <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <em class="replaceable"><tt>type</tt></em>)</tt> is
 equivalent to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <em class="replaceable"><tt>type</tt></em>
 <em class="replaceable"><tt>type</tt></em>)</tt>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_deftype.html" target="_top"><tt class="function">DEFTYPE</tt></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are subject to destructuring (nested <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s
 are allowed, as in <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a>) and may contain a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;WHOLE</tt></a> marker,
 but not an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> marker.</p><p><b>Function <tt class="code">(<tt class="function">EXT:TYPE-EXPAND</tt>
   <em class="replaceable"><tt>typespec</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
   <em class="replaceable"><tt>once-p</tt></em>)</tt>. </b>If <em class="replaceable"><tt>typespec</tt></em> is a user-defined type,
 this will expand it recursively until it is no longer a user-defined
 type (unless <em class="replaceable"><tt>once-p</tt></em> is supplied and
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>).  Two values are returned - the expansion and an indicator
 (<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>) of whether the original
 <em class="replaceable"><tt>typespec</tt></em> was a user-defined type.
</p><div class="itemizedlist"><p class="title"><b>The possible results of <a href="http://www.lisp.org/HyperSpec/Body/fun_type-of.html" target="_top"><tt class="function">TYPE-OF</tt></a></b></p><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><tt class="classname">KEYWORD</tt></a></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> 0
  #.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-POSITIVE-FIXNUM</tt></a>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
  #.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-NEGATIVE-FIXNUM</tt></a> (0))</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
  (#.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-POSITIVE-FIXNUM</tt></a>))</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> *
  (#.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-NEGATIVE-FIXNUM</tt></a>))</tt></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><tt class="classname">BASE-CHAR</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/typ_standard-char.html" target="_top"><tt class="classname">STANDARD-CHAR</tt></a></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> <em class="replaceable"><tt>element-type</tt></em>
  <em class="replaceable"><tt>dimensions</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html" target="_top"><tt class="classname">SIMPLE-ARRAY</tt></a>
  <em class="replaceable"><tt>element-type</tt></em> <em class="replaceable"><tt>dimensions</tt></em>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_base-string.html" target="_top"><tt class="classname">BASE-STRING</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-base-string.html" target="_top"><tt class="classname">SIMPLE-BASE-STRING</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><tt class="classname">BIT-VECTOR</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><tt class="classname">SIMPLE-BIT-VECTOR</tt></a>
  <em class="replaceable"><tt>size</tt></em>)</tt></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><tt class="classname">COMPILED-FUNCTION</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><tt class="classname">CONCATENATED-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><tt class="classname">ECHO-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><tt class="classname">RANDOM-STATE</tt></a>, <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a></li><li><tt class="classname">SPECIAL-OPERATOR</tt>,
  <tt class="classname">LOAD-TIME-EVAL</tt>, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>, <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>,
  <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>, <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>,
  <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a></li><li><a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>, <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a>, <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a>,
   <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a>, <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a>, <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><tt class="classname">EXT:WEAK-AND-MAPPING</tt></a>,
   <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><tt class="classname">EXT:WEAK-OR-MAPPINGINTER</tt></a>, <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><tt class="classname">EXT:WEAK-ALIST</tt></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><tt class="classname">READ-LABEL</tt></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><tt class="classname">FRAME-POINTER</tt></a>,
   <tt class="classname">SYSTEM-INTERNAL</tt></li><li><tt class="classname">ADDRESS</tt> (should not
  occur)</li><li>any other <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (structure types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
  classes)</li><li>a class object (<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes without a
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a>)</li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="classes"></a>4.2. Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3.html" target="_top">[CLHS-4.3]</a></h2></div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> symbols are <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed from the package <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> uses (as in <a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a>) <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> and <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>s the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] standard exported symbols (the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, e.g.,
 those described in <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Section 29.1, “Meta-Object Protocol”</a>, are <strong>not</strong> <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>ed).
 Since <a href="#make-pack" title="11.4.2.&#xA0;Function MAKE-PACKAGE">the default <tt class="constant">:USE</tt> argument</a>
 to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>, the standard <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> symbols are normally
 visible in all user-defined packages.
 If you do not want them (for example, if you want to use the
 <a href="ftp://cvs2.cons.org/pub/lisp/clisp/packages/pcl.sept92f.clisp.tar.gz" target="_top">PCL</a>
 implementation of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> instead of the native one), do the following:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "CL-NO-CLOS" (:use "CL"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><tt class="function">DO-EXTERNAL-SYMBOLS</tt></a> (<em class="replaceable"><tt>symbol</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_shadow.html" target="_top"><tt class="function">SHADOW</tt></a> <em class="replaceable"><tt>symbol</tt></em> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><tt class="function">DO-SYMBOLS</tt></a> (<em class="replaceable"><tt>symbol</tt></em> "CL-NO-CLOS")
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a> <em class="replaceable"><tt>symbol</tt></em> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "CL-NO-CLOS")
(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> "pcl") ; or whatever
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "MY-USER" (:use "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "MY-USER")
;; your code which uses PCL goes here
</pre></td></tr></table><p>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clos-diff"></a>4.3. Deviations from [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</h2></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> supports the option <tt class="constant">:METACLASS</tt> <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a>.
 This option is necessary in order to define a subclass of a
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a>-defined structure type using <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> instead of
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a>.</p><p>When <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is called with arguments, the rule that
 the ordered set of applicable methods must be the same as for the
 original arguments is enforced by the implementation only in
 interpreted code.</p><p><strong class="first"><em class="firstterm"><a href="#gen-flet"><tt class="function">CLOS:GENERIC-FLET</tt></a><a id="gen-flet" class="indexterm"></a></em></strong> and
 <strong class="first"><em class="firstterm"><a href="#gen-labels"><tt class="function">CLOS:GENERIC-LABELS</tt></a><a id="gen-labels" class="indexterm"></a></em></strong>
 are implemented as macros, not as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>).
 They are not imported into the packages <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> and <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> because
 of the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a> is only called on objects of type
 <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>.
 It is not called on other objects, like <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es
 and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s, due to the performance concerns.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="metaclasses"></a>4.4. Standard Metaclasses
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html" target="_top">[CLHS-4.3.1.1]</a></h2></div></div></div><p>Among those classes listed in <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html#classtypecorrespondence" target="_top">Figure
 4-8</a>, only the following are instances of <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>:

</p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><tt class="classname">SEQUENCE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><tt class="classname">BIT-VECTOR</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>
 </li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><tt class="classname">RANDOM-STATE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><tt class="classname">CONCATENATED-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><tt class="classname">ECHO-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a>
 </li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="def-class"></a>4.5. Defining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html" target="_top">[CLHS-4.3.2]</a></h2></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> supports the <tt class="constant">:METACLASS</tt> option.  Possible values are
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> (the default) and <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> (which creates
 structure classes, like <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a> does).</p><p>It is <strong>not</strong> required that the superclasses of a class are
 defined before the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form for the class is evaluated.
 Use [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] generic functions <a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a> to check whether the
 class has been finalized and thus its instances can be created,
 and <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> to force class finalization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="redef-class"></a>4.6. Redefining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html" target="_top">[CLHS-4.3.6]</a></h2></div></div></div><p>Trivial changes, e.g., those that can occur when doubly loading
 the same code, do not require updating the instances.
 These are the changes that do not modify the set of local slots
 accessible in instances, e.g., changes to slot options <tt class="constant">:INITFORM</tt>,
 <tt class="constant">:DOCUMENTATION</tt>, and changes to class options
 <tt class="constant">:DEFAULT-INITARGS</tt>, <tt class="constant">:DOCUMENTATION</tt>.</p><p>The instances are updated when they are first accessed, <strong>not</strong> at
 the time when the class is redefined or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html" target="_top"><tt class="function">MAKE-INSTANCES-OBSOLETE</tt></a> is
 called.  When the class has been redefined several times since the
 instance was last accessed, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> is
 still called just once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="type-class-dict"></a>4.7. The Types and Classes Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html" target="_top">[CLHS-4.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-char-ansi"></a>4.7.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#character_designator" target="_top">character
  designator</a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], although <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> provides an
  obvious venue to <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> a <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.
  When <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>s <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s to
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s via <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a>.
  When <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s cannot be
  <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>d to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="data"></a>Chapter 5. Data and Control Flow
   <a href="http://www.lisp.org/HyperSpec/Body/chap-5.html" target="_top">[CLHS-5]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro <tt class="function">EXT:FCASE</tt></a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function <tt class="function">EXT:XOR</tt></a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="flow-dict"></a>5.1. The Data and Control Flow Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html" target="_top">[CLHS-5.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro <tt class="function">EXT:FCASE</tt></a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function <tt class="function">EXT:XOR</tt></a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></div><p><a id="fle"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html" target="_top"><tt class="function">FUNCTION-LAMBDA-EXPRESSION</tt></a>. </b>The <em class="replaceable"><tt>name</tt></em> of a <a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a> is a <span class="emphasis"><em>string</em></span>
(the name of the underlying <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function), not a lisp <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a>.
</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html" target="_top"><tt class="function">DESTRUCTURING-BIND</tt></a>. </b>This macro does not perform full error checking.</p><p><b>Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG2</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_and.html" target="_top"><tt class="function">AND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><tt class="function">PSETQ</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">UNLESS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_cond.html" target="_top"><tt class="function">COND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><tt class="function">MULTIPLE-VALUE-BIND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html" target="_top"><tt class="function">MULTIPLE-VALUE-SETQ</tt></a>. </b>These macros are implemented as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>)
 and, as such, are rather efficient.</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a>. </b>The initial value is <strong>not</strong> evaluated at compile time,
 just like with <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFPARAMETER</tt></a>.
 Use <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> if you need the value at compile time.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcase"></a>5.1.1. Macro <tt class="function">EXT:FCASE</tt></h3></div></div></div><p>This macro allows specifying the test for <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, e.g.,
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</pre></td></tr></table><p>
is the same as
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</pre></td></tr></table><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="xor"></a>5.1.2. Function <tt class="function">EXT:XOR</tt></h3></div></div></div><p>This function checks that exactly one of its arguments is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
 and, if this is the case, returns its value and index in the argument
 list as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>, otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eq"></a>5.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> compares <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s as <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> does.
 No unnecessary copies are made of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s.
 Nevertheless, one should use <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> as it is more portable across <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>
 implementations.</p><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> ((x y)) (<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> x x))</tt> always
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, regardless of <em class="replaceable"><tt>y</tt></em>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> x x)</tt> might not be
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for a <a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a> <em class="replaceable"><tt>x</tt></em>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sym-fun"></a>5.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> <em class="replaceable"><tt>symbol</tt></em>) <em class="replaceable"><tt>object</tt></em>)</tt>
 requires <em class="replaceable"><tt>object</tt></em> to be either a function, a <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> return
 value, or a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>.  The <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> is thereby immediately
 converted to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="setf"></a>5.1.5. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a></h3></div></div></div><p>Additional <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s:
</p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> #'<em class="replaceable"><tt>symbol</tt></em> ...)
     <em class="replaceable"><tt>object</tt></em>)</tt> and
    <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> '<em class="replaceable"><tt>symbol</tt></em> ...) <em class="replaceable"><tt>object</tt></em>)</tt>
    are equivalent to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<em class="replaceable"><tt>symbol</tt></em> ...) <em class="replaceable"><tt>object</tt></em>)</tt>.
 </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> <em class="replaceable"><tt>form</tt></em> ... <em class="replaceable"><tt>place</tt></em>)
     <em class="replaceable"><tt>object</tt></em>)</tt></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a> <em class="replaceable"><tt>declaration</tt></em> ...
     <em class="replaceable"><tt>form</tt></em> ... <em class="replaceable"><tt>place</tt></em>) <em class="replaceable"><tt>object</tt></em>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a> <em class="replaceable"><tt>condition</tt></em>
     <em class="replaceable"><tt>place<sub>1</sub></tt></em>
     <em class="replaceable"><tt>place<sub>2</sub></tt></em>)
     <em class="replaceable"><tt>object</tt></em>)</tt></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a> ...)
     ...)</tt> calls <a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">SET-DISPATCH-MACRO-CHARACTER</tt></a>.
 </dd><dt><a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>:</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) <em class="replaceable"><tt>digits</tt></em>)</tt> sets the
    default mantissa length of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s to <em class="replaceable"><tt>digits</tt></em> bits.
 </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a></dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> <em class="replaceable"><tt>list</tt></em>) <em class="replaceable"><tt>form</tt></em>)</tt>
    is equivalent to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <em class="replaceable"><tt>list</tt></em>
     (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a> <em class="replaceable"><tt>form</tt></em>)))</tt>
 </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> markers in <a href="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html" target="_top"><tt class="function">DEFSETF</tt></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are supported, but the
 corresponding keywords must appear literally in the program text.</p><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a> <em class="replaceable"><tt>form</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt>,
 <tt class="code">(EXT:GET-SETF-METHOD <em class="replaceable"><tt>form</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt>, and
 <tt class="code">(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <em class="replaceable"><tt>form</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
  <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt> receive as optional argument <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em> the environment
  necessary for macro expansions. In <a href="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html" target="_top"><tt class="function">DEFINE-SETF-EXPANDER</tt></a>
  and <tt class="function">EXT:DEFINE-SETF-METHOD</tt> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s, one can
  specify <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> and a variable, which will be bound to the
  environment.  This environment should be passed to all calls of
  <a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a>, <tt class="function">EXT:GET-SETF-METHOD</tt> and
 <tt class="function">EXT:GET-SETF-METHOD-MULTIPLE-VALUE</tt>.  If this is
 done, even local macros will be interpreted as places correctly.</p><p>Attempts to modify read-only data will <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</p><p>See also the <a href="#letf"><tt class="function">EXT:LETF</tt></a> and <a href="#letf"><tt class="function">EXT:LETF*</tt></a> macros.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="func"></a>5.1.6. Special Operator <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> <em class="replaceable"><tt>symbol</tt></em>)</tt> returns the local function
 definition established by <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">FLET</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">LABELS</tt></a>, if it exists, otherwise
 the global function definition.</p><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html" target="_top"><tt class="function">SPECIAL-OPERATOR-P</tt></a> <em class="replaceable"><tt>symbol</tt></em>)</tt> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.  If it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, then <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a>
  <em class="replaceable"><tt>symbol</tt></em>)</tt> returns the (useless) special operator handler.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="def-sym-mac"></a>5.1.7. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a></h3></div></div></div><p>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> establishes <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s with
 global scope (as opposed to <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s defined with
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><tt class="function">SYMBOL-MACROLET</tt></a>, which have local scope):
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> <em class="replaceable"><tt>symbol</tt></em>
 <em class="replaceable"><tt>expansion</tt></em>)</tt>.</p><p>The function
 <strong class="first"><em class="firstterm"><a href="#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a><a id="symbol-mex" class="indexterm"></a></em></strong>
 tests for a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>: If <em class="replaceable"><tt>symbol</tt></em> is defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>,
 <tt class="code">(<a href="#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a> <em class="replaceable"><tt>symbol</tt></em>)</tt> returns two
 values, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> and the expansion; otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_boundp.html" target="_top"><tt class="function">BOUNDP</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 returns the value of the expansion.  Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_set.html" target="_top"><tt class="function">SET</tt></a> on a symbol defined
 as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> calls <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> on the expansion.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html" target="_top"><tt class="function">MAKUNBOUND</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 removes the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> definition.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="lambda"></a>5.1.8. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a></h3></div></div></div><p><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html" target="_top"><tt class="constant">LAMBDA-LIST-KEYWORDS</tt></a>. </b><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;AUX</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;WHOLE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a>)</tt></p><div class="table"><a id="values-limits-table"></a><p class="title"><b>Table 5.1. Function call limits</b></p><table summary="Function call limits" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html" target="_top"><tt class="constant">CALL-ARGUMENTS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html" target="_top"><tt class="constant">MULTIPLE-VALUES-LIMIT</tt></a></td><td align="center">2<sup>7</sup>=128</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html" target="_top"><tt class="constant">LAMBDA-PARAMETERS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defun"></a>5.1.9. Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> are allowed in non-toplevel positions. As
 an example, consider the old ([<span class="citation"><a href="#CLtL1">CLtL1</a></span>]) definition of <a href="http://www.lisp.org/HyperSpec/Body/fun_gensym.html" target="_top"><tt class="function">GENSYM</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&amp;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</pre></td></tr></table><p><a id="suppress-check-redef"></a><b>Variable <a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a>. </b>When <strong class="first"><em class="firstterm"><a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a></em></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> issues a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <strong>not</strong> a good idea to set this variable to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
</p><p><a id="defun-accept-spelalist"></a><b>Variable <a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a>. </b>When <strong class="first"><em class="firstterm"><a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a></em></strong> is
non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> accepts <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a>s, converting type-parameter
associations to type declarations:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(defun f ((x list) (y integer)) ...)</pre></td></tr></table><p>
is equivalent to
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(defun f (x y) (declare (type list x) (type integer y)) ...)</pre></td></tr></table><p>
This extension is disabled by <a href="clisp.html#opt-ansi" class="olink"><tt class="option">-ansi</tt></a> and by setting <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>,
but can be re-enabled by setting <a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a> explicitly.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="iteration"></a>Chapter 6. Iteration
  <a href="http://www.lisp.org/HyperSpec/Body/chap-6.html" target="_top">[CLHS-6]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="loop"></a>6.1. The LOOP Facility
  <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1.html" target="_top">[CLHS-6.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loop-inter-var-finally"></a>6.1.1. Iteration variables in the loop epilogue</h3></div></div></div><p>The standard is unambiguous in that the iteration variables do
 still exist in the <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1-7-2.html" target="_top"><tt class="literal">FINALLY</tt></a> clause, but <strong>not</strong> as to what values
 these variables might have.
 Therefore the code which relies on the values of such variables, e.g.,
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(loop for x on y finally (return x))</pre></td></tr></table><p>
 is inherently non-portable across <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations,
 and should be avoided.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loop-ansi"></a>6.1.2. Backward Compatibility</h3></div></div></div><p>There have been some tightening in the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a> syntax between
 [<span class="citation"><a href="#CLtL2">CLtL2</a></span>] and [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], e.g., the following form is legal in the
 former but not the latter:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (loop initially for i from 1 to 5 do (print i) finally return i)
</pre></td></tr></table><p>
When <strong class="first"><em class="firstterm"><a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><tt class="varname">CUSTOM:*LOOP-ANSI*</tt></a></em></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, such forms are still
accepted in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> but elicit a warning at macro-expansion time.
When <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><tt class="varname">CUSTOM:*LOOP-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="objects"></a>Chapter 7. Objects
   <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top">[CLHS-7]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="std-meth-combo"></a>7.1. Standard Method Combination
  <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top">[CLHS-7.6.6.2]</a></h2></div></div></div><p>Generic function
 <strong class="first"><em class="firstterm"><a href="#no-prim"><tt class="function">CLOS:NO-PRIMARY-METHOD</tt></a><a id="no-prim" class="indexterm"></a></em></strong>
 (similar to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><tt class="function">NO-APPLICABLE-METHOD</tt></a>) is called when there is an
 applicable method but no applicable <span class="emphasis"><em>primary</em></span>
 method.</p><p>The default methods for <a href="#no-prim"><tt class="function">CLOS:NO-PRIMARY-METHOD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><tt class="function">NO-APPLICABLE-METHOD</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><tt class="function">NO-NEXT-METHOD</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
 <strong class="first"><em class="firstterm"><a href="#meth-call-err"><tt class="classname">CLOS:METHOD-CALL-ERROR</tt></a>
  <a id="meth-call-err" class="indexterm"></a></em></strong>.
 You can find out more information about the error using functions
 <tt class="function">CLOS:METHOD-CALL-ERROR-GENERIC-FUNCTION</tt>,
 <tt class="function">CLOS:METHOD-CALL-ERROR-ARGUMENT-LIST</tt>, and
 (only for <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><tt class="function">NO-NEXT-METHOD</tt></a>)
 <tt class="function">CLOS:METHOD-CALL-ERROR-METHOD</tt>.
 Moreover, when the generic function has only one <span class="emphasis"><em>dispatching
 argument</em></span>, (i.e., such an argument that not all the
 corresponding parameter specializers are <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>), an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
 <strong class="first"><em class="firstterm"><a href="#meth-call-type-err"><tt class="classname">CLOS:METHOD-CALL-TYPE-ERROR</tt></a>
  <a id="meth-call-type-err" class="indexterm"></a></em></strong>
  is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed, additinally making <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><tt class="function">TYPE-ERROR-DATUM</tt></a> and
  <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><tt class="function">TYPE-ERROR-EXPECTED-TYPE</tt></a> available.</p></div>
<!--<section id="obj-dict"><title>The Objects Dictionary <ulink url="&clhs;/Body/sec_7-7.html">[CLHS-7.7]</ulink></title> </section>-->
</div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="structures"></a>Chapter 8. Structures
   <a href="http://www.lisp.org/HyperSpec/Body/chap-8.html" target="_top">[CLHS-8]</a></h2></div></div></div><p>The <tt class="constant">:PRINT-FUNCTION</tt> option should contain a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> (object stream depth) (declare (ignore depth)) ...)</tt>
 This <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> names a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> whose task is to output the
 external representation of the <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a> <em class="replaceable"><tt>object</tt></em> onto the
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <em class="replaceable"><tt>stream</tt></em>. This may be done by outputting text onto the
 stream using <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html" target="_top"><tt class="function">WRITE-STRING</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> and the like.
 The following rules must be obeyed:</p><div class="itemizedlist"><ul type="disc"><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a> must be
  respected.</li><li>The treatment of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is up to you.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html" target="_top"><tt class="varname">*PRINT-CIRCLE*</tt></a> need not be
  respected.  This is managed by the system.  (But the print-circle
  mechanism handles only those objects that are direct or indirect
  components of the structure.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LEVEL*</tt></a> is respected by
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><tt class="literal">~A</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><tt class="literal">~S</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><tt class="literal">~W</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><tt class="literal">~D</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><tt class="literal">~B</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><tt class="literal">~O</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><tt class="literal">~X</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> with not-numerical arguments.
  Therefore the print-level mechanism works automatically if only these
  functions are used for outputting objects and if they are not called
  on objects with nesting level &gt; 1. (The print-level mechanism does
  not recognize how many parentheses you have output. It only counts how
  many times it was called recursively.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LENGTH*</tt></a> must be respected,
  especially if you are outputting an arbitrary number of components.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> must be
  respected. Remember that the values of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LEVEL*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LENGTH*</tt></a> are ignored if
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true.  The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is
  respected by <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><tt class="function">PRINT-UNREADABLE-OBJECT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><tt class="literal">~A</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><tt class="literal">~S</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><tt class="literal">~W</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><tt class="literal">~D</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><tt class="literal">~B</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><tt class="literal">~O</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><tt class="literal">~X</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> with not-numerical arguments.  Therefore
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> will be respected automatically if only these
  functions are used for printing objects.</li><li>You need not worry about the values of
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-BASE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-RADIX*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><tt class="varname">*PRINT-CASE*</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-gensymst.html" target="_top"><tt class="varname">*PRINT-GENSYM*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a>, <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>,
  <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a>, <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a>.</li></ul></div><p><a id="defstruct-inherit"></a><b>Option <tt class="constant">:INHERIT</tt>. </b>The <tt class="constant">:INHERIT</tt> option is exactly like <tt class="constant">:INCLUDE</tt> except that it
 does not create new accessors for the inherited slots (this is a
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension).</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conditions"></a>Chapter 9. Conditions
   <a href="http://www.lisp.org/HyperSpec/Body/chap-9.html" target="_top">[CLHS-9]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></div><p>When an error occurred, you are in a break loop. You can evaluate
 forms as usual. The <span><strong class="command">help</strong></span> command (or help key if
 there is one) lists the available <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging
 commands</a>.</p><p><a id="muffle-cerrors"></a><b>Macro <a href="#muffle-cerrors"><tt class="function">EXT:MUFFLE-CERRORS</tt></a>. </b>The macro <tt class="code">(<a href="#muffle-cerrors"><tt class="function">EXT:MUFFLE-CERRORS</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)</tt>
 executes the <em class="replaceable"><tt>form</tt></em>s; when a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> occurs, no message is printed,
 instead, the <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><tt class="function">CONTINUE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><tt class="classname">RESTART</tt></a> is invoked.</p><p><a id="appease-cerrors"></a><b>Macro <a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a>. </b>The macro <tt class="code">(<a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)</tt>
 executes the <em class="replaceable"><tt>form</tt></em>s; <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>s are reported as <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a>s
 and the <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><tt class="function">CONTINUE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><tt class="classname">RESTART</tt></a> is invoked.</p><p><a id="exit-on-error"></a><b>Macro <a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a>. </b>The macro <tt class="code">(<a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)</tt>
 executes the <em class="replaceable"><tt>form</tt></em>s; when a non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> or
 a <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span> interrupt occurs, the
 error message is printed and <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> terminates with an error
 status.</p><p><a id="with-restarts"></a><b>Macro <a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a>. </b>The macro <a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a>, except that the
 forms are specified after the restart clauses instead of before them,
 and the restarts created are not implicitly associated with any <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a>.
 <tt class="code">(<a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a> ({<em class="replaceable"><tt>restart-clause</tt></em>}*) {<em class="replaceable"><tt>form</tt></em>}*)</tt> is
 therefore equivalent to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)
 {<em class="replaceable"><tt>restart-clause</tt></em>}*)</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-nl"></a>9.1. Embedded Newlines in Condition Reports
   <a href="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html" target="_top">[CLHS-9.1.3.1.3]</a></h2></div></div></div><p>The error message prefix for the first line is “<span class="quote">*** - </span>”.
 All subsequent lines are indented by 6 characters.
 Long lines are broken on white spaces.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-dict"></a>9.2. The Conditions Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html" target="_top">[CLHS-9.2]</a></h2></div></div></div><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a>. </b>In <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> <em class="replaceable"><tt>form</tt></em> {<em class="replaceable"><tt>restart-clause</tt></em>}*)</tt>,
  the argument list can also be specified after the keyword/value pairs
  instead of before them, i.e., each <em class="replaceable"><tt>restart-clause</tt></em> can be either
  <tt class="code">(<tt class="varname">restart-name</tt> <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a>
   {<em class="replaceable"><tt>keyword-value-pair</tt></em>}* {<em class="replaceable"><tt>form</tt></em>}*)</tt>
  or <tt class="code">(<em class="replaceable"><tt>restart-name</tt></em>
   {<em class="replaceable"><tt>keyword-value-pair</tt></em>}* <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)</tt>.
</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><tt class="function">COMPUTE-RESTARTS</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><tt class="function">COMPUTE-RESTARTS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_find-restart.html" target="_top"><tt class="function">FIND-RESTART</tt></a> behave as specified in
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: If the optional <em class="replaceable"><tt>condition</tt></em>
 argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, only restarts associated with that condition and
 restarts associated with no condition at all are considered.
 Therefore the effect of associating a restart to a condition is not to
 activate it, but to hide it from other conditions.
 This makes the syntax-dependent implicit association performed by
 <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> nearly obsolete.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="symbols"></a>Chapter 10. Symbols
   <a href="http://www.lisp.org/HyperSpec/Body/chap-10.html" target="_top">[CLHS-10]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="packages"></a>Chapter 11. Packages
   <a href="http://www.lisp.org/HyperSpec/Body/chap-11.html" target="_top">[CLHS-11]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#package-case">11.4.1. Package Case-Sensitivity</a></span></dt><dt><span class="section"><a href="#make-pack">11.4.2. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#defpack">11.4.3. Macro <tt class="function">DEFPACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.4. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></div><div class="variablelist"><p class="title"><b>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] packages present in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL</span>”</strong>
    and <strong class="package">“<span class="quote">LISP</span>”</strong></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL-USER</span>”</strong>
    and <strong class="package">“<span class="quote">USER</span>”</strong></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a></dt><dd>with no nicknames
 </dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-lock"></a>11.1. Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package
  for Conforming Programs - package locking
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">[CLHS-11.1.2.1.2]</a></h2></div></div></div><p><b>Function <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a>. </b><a id="pack-lock-f" class="indexterm"></a>
 Packages can be “<span class="quote">locked</span>”.
When a package is locked, attempts to change its symbol table or
redefine functions which its symbols name result in a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
(continuing overrides locking for this operation).
When <a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> (<strong>not</strong> a good idea!), the <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
is not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed for redefine operations.
Function <tt class="code">(<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a> <em class="replaceable"><tt>package</tt></em>)</tt>
returns the generalized boolean indicating whether the <em class="replaceable"><tt>package</tt></em> is locked.
A package (or a list thereof) can be locked using <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 (<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a> <em class="replaceable"><tt>package-or-list</tt></em>) <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt>.
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> locks its system packages (specified in the variable
<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>).</p><p><b>Macro <a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a>. </b>If you want to evaluate some forms with certain packages unlocked,
 you can use
 <strong class="first"><em class="firstterm"><a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a>
  <a id="without-pack-lock" class="indexterm"></a></em></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a> <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>)
  (defun restart () ...))
</pre></td></tr></table><p>
or
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>) (trace read-line))
</pre></td></tr></table><p>
<tt class="code">(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> () ...)</tt>
temporarily unlocks all packages in <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>.</p><p><b>Discussion - see also
  <a href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;selm=3C3E7F57.7F80395%40pacbell.net" target="_top">the USENET posting</a> by
  <span class="author"><span class="firstname">Steven M.</span> <span class="surname">Haflich</span></span>. </b>This should prevent you from accidentally hosing yourself with
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a> instance ...)
</pre></td></tr></table><p>
and allow enforcing modularity.
Note that you will also get the <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> when you try to
assign (with <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><tt class="function">PSETQ</tt></a>, etc.) a value to an internal special
variable living in a locked package and not accessible in your current
<a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>, but only in the interpreted code and during compilation.
There is no check for package locks in compiled code because of the
performance considerations.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clupack"></a>11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top">[CLHS-11.1.2.2]</a></h2></div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package uses the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> and <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a> packages.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="imppack"></a>11.3. Implementation-Defined Packages
   <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html" target="_top">[CLHS-11.1.2.4]</a></h2></div></div></div><p>The following additional packages exist:</p><div class="variablelist"><p class="title"><b>Implementation-Defined Packages</b></p><dl><dt><a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s all <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>-specific symbols, including some
    <a href="#clos-diff" title="4.3.&#xA0;Deviations from ANSI CL standard">additional symbols</a>.
 </dd><dt><a id="sys-pac"></a><a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a></dt><dd>has the nicknames <strong class="package">“<span class="quote">SYS</span>”</strong>
    and <strong class="package">“<span class="quote">COMPILER</span>”</strong>, and has no
    <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed symbols.  It defines many system internals.
 </dd><dt><a id="ext-pac"></a><a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a></dt><dd>
    is the umbrella package for all extensions: it imports and <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>s
    all the external symbols in all <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, so a simple
    <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> "EXT")</tt> is enough to
    make all the extensions available in the current package.
    This package uses packages (in addition to <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>):
    <a href="#dir-key" title="32.3.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>, <a href="#syscalls" title="32.8.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a>, <a href="#socket" title="31.5.&#xA0;Socket Streams"><strong class="package">“<span class="quote">SOCKET</span>”</strong></a>, <a href="#gstream" title="30.6.&#xA0;Generic streams"><strong class="package">“<span class="quote">GSTREAM</span>”</strong></a>, <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a>,
    <a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP"><strong class="package">“<span class="quote">I18N</span>”</strong></a>, <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>.</dd><dt><a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></dt><dd>defines and <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s some character sets, for use with
    <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> and as <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> argument.
 </dd><dt><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a></dt><dd>implements the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility">foreign function
     interface</a>.  Some platforms only.
 </dd><dt><a href="#screen" title="31.1.&#xA0;Random Screen Access"><strong class="package">“<span class="quote">SCREEN</span>”</strong></a></dt><dd>defines an API for <a href="#screen" title="31.1.&#xA0;Random Screen Access">random screen
     access</a>.  Some platforms only.
 </dd></dl></div><p>All pre-existing packages except <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> belong to the
 implementation, in the sense that the programs that do not follow
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">Section 11.1.2.1.2</a>
 ("Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package for Conforming Programs")
 cause undefined behavior.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-dict"></a>11.4. The Packages Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html" target="_top">[CLHS-11.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#package-case">11.4.1. Package Case-Sensitivity</a></span></dt><dt><span class="section"><a href="#make-pack">11.4.2. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#defpack">11.4.3. Macro <tt class="function">DEFPACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.4. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="package-case"></a>11.4.1. Package Case-Sensitivity</h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> accepts a keyword argument <a href="#package-case" title="11.4.1.&#xA0;Package Case-Sensitivity"><tt class="constant">:CASE-SENSITIVE</tt></a>.
 Similarly, <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> accepts an option <a href="#package-case" title="11.4.1.&#xA0;Package Case-Sensitivity"><tt class="constant">:CASE-SENSITIVE</tt></a>.
 When its value is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the package will be <strong class="first"><em class="firstterm">case
 sensitive</em></strong>, i.e., the reader will not case-convert symbol
 names before looking them up or creating them in this package.
 The package names are still subject to
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_streadtablest.html" target="_top"><tt class="varname">*READTABLE*</tt></a>)</tt>, though.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-pack"></a>11.4.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a></h3></div></div></div><p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a>, the default value of the <tt class="constant">:USE</tt> argument is
 <tt class="data">(<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defpack"></a>11.4.3. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a></h3></div></div></div><p>When the package being defined already exists, it is modified to
 conform with the new definition, except for the <a href="#package-case" title="11.4.1.&#xA0;Package Case-Sensitivity"><tt class="constant">:CASE-SENSITIVE</tt></a>
 option which is immutable.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="re-export"></a>11.4.4. Function <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a></h3></div></div></div><p>The function <tt class="code">(<a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a> <em class="replaceable"><tt>FROM-PACK</tt></em>
  <em class="replaceable"><tt>TO-PACK</tt></em>)</tt> re-<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s all external
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s from <em class="replaceable"><tt>FROM-PACK</tt></em> also from
 <em class="replaceable"><tt>TO-PACK</tt></em>, provided it already uses
 <em class="replaceable"><tt>FROM-PACK</tt></em>; and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> otherwise.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="numbers"></a>Chapter 12. Numbers
   <a href="http://www.lisp.org/HyperSpec/Body/chap-12.html" target="_top">[CLHS-12]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-types"></a>12.1. Numeric Types</h2></div></div></div><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#exhaustive_partition" target="_top">“<span class="quote">exhaustive
 partition</span>”</a>)</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><tt class="classname">BIGNUM</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-concepts"></a>12.2. Number Concepts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1.html" target="_top">[CLHS-12.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-type"></a>12.2.1. Byte Operations on Integers
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html" target="_top">[CLHS-12.1.1.3.2]</a></h3></div></div></div><p>Byte specifiers are objects of built-in type <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a>,
 not <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-subst"></a>12.2.2. Rule of Float Substitutability
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html" target="_top">[CLHS-12.1.3.3]</a></h3></div></div></div><p>When a mathematical function may return an exact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>) or
 inexact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>) result, it always returns the exact result.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-comp"></a>12.2.3. Floating-point Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html" target="_top">[CLHS-12.1.4]</a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#flocont">12.2.3.1. Rule of Float Precision Contagion
   [CLHS-12.1.4.4]</a></span></dt><dt><span class="section"><a href="#floratcont">12.2.3.2. Rule of Float and Rational Contagion
   [CLHS-12.1.4.1]</a></span></dt></dl></div><p>There are four floating point types: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>:
</p><div class="informaltable"><a id="floating-types-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">type</th><th align="center">sign</th><th align="center">mantissa</th><th align="center">exponent</th><th align="center">comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">16+1 bits</td><td align="center">8 bits</td><td align="center">immediate</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">23+1 bits</td><td align="center">8 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">52+1 bits</td><td align="center">11 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">&gt;=64 bits</td><td align="center">32 bits</td><td align="center">variable
 length</td></tr></tbody></table></div><p>The single and double float formats are those of the <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>
 “<span class="quote">Standard for Binary Floating-Point Arithmetic</span>”,
 except that <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not support features like
 <tt class="literal">±0</tt>, <tt class="literal">±inf</tt>,
 <tt class="literal">NaN</tt>, gradual underflow, etc.
 <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> does not make use of these features, so, to reduce portability
 problems, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> by design returns the same floating point results on
 all platforms (<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has a floating-point emulation built in for
 platforms that do not support <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>).  Note that
 </p><div class="itemizedlist"><ul type="disc"><li>When you got a <tt class="literal">NaN</tt>
    in your program, your program is broken, so you will spend time
    determining where the <tt class="literal">NaN</tt> came from.
    It is better to <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> in this case.</li><li>When you got unnormalized floats in your program,
    your results will have a greatly reduced accuracy anyway.
    Since <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has the means to cope with this - <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s of
    <a href="#lfd">variable precision</a> - it does not
    need unnormalized floats.</li></ul></div><p>
 This is why <a href="impnotes.html#features" class="olink"><tt class="varname">*FEATURES*</tt></a> does not contain the
 <tt class="constant">:IEEE-FLOATING-POINT</tt> keyword.</p><p><a id="lfd"></a><b>Arbitrary Precision Floats. </b><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s have variable mantissa length, which is a
 multiple of 16 (or 32, depending on the word size of the processor).
 The default length used when <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s are <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> is given by the
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <tt class="code">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>.  It can be set by <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) <em class="replaceable"><tt>n</tt></em>)</tt>,
 where <em class="replaceable"><tt>n</tt></em> is a positive <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.  E.g., <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)
 3322)</tt> sets the default precision of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s to about
 1000 decimal digits.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="flocont"></a>12.2.3.1. Rule of Float Precision Contagion
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">[CLHS-12.1.4.4]</a></h4></div></div></div><p>The floating point contagion is controlled by the variable
 <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a>.  When it is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, contagion is done as per the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>.</p><div class="variablelist"><dl><dt>Rationale:</dt><dd>See it pragmatically: save what you can and let
  others worry about the rest.</dd><dt>Brief:</dt><dd><a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> knows the number's precision, not accuracy, so
  preserving the precision can be accomplished reliably, while anything
  relating to the accuracy is just a speculation - only the user
  (programmer) knows what it is in each case.
 </dd><dt>Detailed:</dt><dd>A computer float is an approximation of a real number.
  One can think of it as a random variable with the mean equal to
  itself and standard deviation equal to half the last significant digit.
  E.g., <tt class="literal">1.5</tt> is actually <tt class="literal">1.5±0.05</tt>.
  Consider adding <tt class="literal">1.5</tt> and <tt class="literal">1.75</tt>.
  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requires that <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> 1.5 1.75)</tt>
  return <tt class="literal">3.25</tt>, while traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> would return
  <tt class="literal">3.3</tt>.  The implied random variables are:
  <tt class="literal">3.25±0.005</tt> and <tt class="literal">3.3±0.05</tt>.
  Note that the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> way <strong>does</strong>
  lie about the mean: the mean <strong>is</strong> <tt class="literal">3.25</tt> and
  nothing else, while the standard way
  <strong>could</strong> be lying about the deviation
  (accuracy): if the implied accuracy of <tt class="literal">1.5 (0.05)</tt>
  is its actual accuracy, then the accuracy of the result cannot be
  smaller that that.  Therefore, since <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> has no way of knowing the
  actual accuracy, [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] (and all the other standard engineering
  programming languages, like <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, FORTRAN etc) decides that
  keeping the accuracy correct is the business of the programmer, while
  the language should preserve what it can - the precision.
  </dd><dt>Experience:</dt><dd> Rounding errors accumulate, and if a computation
  is conducted with insufficient precision, an outright incorrect
  result can be returned.
  (E.g., <tt class="literal">E(x<sup>2</sup>) -
  E(x)<sup>2</sup></tt> can be negative!)
  The user should not mix floats of different precision (that's what
  <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is for), but one should not be penalized for this too
  harshly.</dd></dl></div><p>When <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> method is used,
 namely the result of an arithmetic operation whose arguments are of
 different float types is rounded to the float format of the shortest
 (least precise) of the arguments: <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>
 → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a> (in contrast to <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">12.1.4.4 Rule of Float Precision
 Contagion</a>!)</p><div class="variablelist"><dl><dt>Rationale:</dt><dd> See it mathematically.  Add intervals:
  <tt class="literal">{1.0 ± 1e-8} + {1.0 ± 1e-16} = {2.0 ±
  1e-8}</tt>.  So, if we add <tt class="literal">1.0s0</tt> and
  <tt class="literal">1.0d0</tt>, we should get <tt class="literal">2.0s0</tt>.
  </dd><dt>Brief:</dt><dd>Do not suggest accuracy of a result by giving it a
  precision that is greater than its accuracy.
  </dd><dt>Example:</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_-.html" target="_top"><tt class="function">-</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> 1.7 <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>)</tt>
  should not return <tt class="literal">1.700000726342836417234L0</tt>, it
  should return <tt class="literal">1.7f0</tt> (or
  <tt class="literal">1.700001f0</tt> if there were rounding errors).
  </dd><dt>Experience:</dt><dd>If in a computation using thousands of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s,
  a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> (like <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>) happens to be used, the long precision
  should not propagate throughout all the intermediate values.
  Otherwise, the long result would look precise, but its accuracy is
  only that of a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>; furthermore much computation time
  would be lost by calculating with <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s when only
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s would be needed.
  </dd></dl></div><p><a id="warn-fpc"></a><b>Variable <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a>. </b>If the variable <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> is emitted for
 every coercion involving different floating-point types.
 As explained above, float precision contagion is not a good idea,
 this is why <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> initially.
 You can avoid the contagion by doing all your computations with the
 same floating-point type (and using <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><tt class="function">FLOAT</tt></a> to convert all constants,
 e.g., <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>, to your preferred type).
 Set it to <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> to have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> on float
 precision contagion.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="floratcont"></a>12.2.3.2. Rule of Float and Rational Contagion
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-1.html" target="_top">[CLHS-12.1.4.1]</a></h4></div></div></div><p>The contagion between floating point and rational numbers is controlled
 by the variable <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a>.  When it is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, contagion is done as per
 the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>.</p><p>When <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> method is used,
 namely if the result is mathematically an exact rational number, this
 rational number is returned (in contrast to <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-1.html" target="_top">12.1.4.1 Rule of Float and Rational
 Contagion</a>!)</p><p><a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a> has an effect only in those few cases when the mathematical
 result is exact although one of the arguments is a floating-point number,
 such as <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_st.html" target="_top"><tt class="function">*</tt></a> 0 1.618)</tt>, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_sl.html" target="_top"><tt class="function">/</tt></a> 0 1.618)</tt>,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_asincm_acoscm_atan.html" target="_top"><tt class="function">ATAN</tt></a> 0 1.0)</tt>, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a> 2.0 0)</tt>,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><tt class="function">PHASE</tt></a> 2.718)</tt>.</p><p><a id="warn-fprc"></a><b>Variable <a href="#warn-fprc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*</tt></a>. </b>If the variable <a href="#warn-fprc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> is emitted for
 every avoidable coercion from a rational number to a floating-point number.
 <a href="#warn-fprc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*</tt></a> is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> initially. Set it to <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> to have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> on avoidable coercions to a floating-point number
 when a rational number result would be possible.</p><p><a id="phasecont"></a><b>Variable <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a>. </b>A similar variable, <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a>, controls the return
 value of <a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><tt class="function">PHASE</tt></a> when the argument is an exact nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>.
 Namely, if <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, it returns a floating-point zero;
 if <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, it returns an exact zero.  Example:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><tt class="function">PHASE</tt></a> 2/3)</tt></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-comp"></a>12.2.4. Complex Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html" target="_top">[CLHS-12.1.5]</a></h3></div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types. For example, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><tt class="function">SQRT</tt></a> -9.0)</tt> evaluates to
 the number <tt class="data">#C(0 3.0)</tt>,
 which has a real part of exactly <tt class="literal">0</tt>,
 not only <tt class="data">0.0</tt>
 (which would mean “<span class="quote">approximately 0</span>”).</p><p>The type specifier for this is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>)</tt>, and <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <tt class="varname">type-of-real-part</tt>
 <tt class="varname">type-of-imaginary-part</tt>)</tt> in general.</p><p>The type specifier <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a>
 <em class="replaceable"><tt>type</tt></em>)</tt> is equivalent to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>type</tt></em>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-rational"></a>12.2.5. Rule of
   Canonical Representation for Complex Rationals
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html" target="_top">[CLHS-12.1.5.3]</a></h3></div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types.  If the imaginary part is <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> to <tt class="literal">0</tt>,
 the number is automatically converted to a real number.</p><p>This has the advantage that
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> ((x (<a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><tt class="function">SQRT</tt></a> -9.0))) (* x x))</tt> - instead of
 evaluating to <tt class="data">#C(-9.0 0.0)</tt>, with <em class="replaceable"><tt>x</tt></em>
 = <tt class="data">#C(0.0 3.0)</tt> - evaluates to
 <tt class="data">#C(-9.0 0)</tt> =
 <tt class="data">-9.0</tt>,
 with <em class="replaceable"><tt>x</tt></em> = <tt class="data">#C(0 3.0)</tt>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-dict"></a>12.3. The Numbers Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html" target="_top">[CLHS-12.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></div><p><a id="ucpt"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><tt class="function">UPGRADED-COMPLEX-PART-TYPE</tt></a>. </b>When the argument is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><tt class="function">UPGRADED-COMPLEX-PART-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>, otherwise it
 returns its argument (even though a <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> number in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can
 always have <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><tt class="function">REALPART</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><tt class="function">IMAGPART</tt></a> of any type) because it allows
 the most precise type inference.</p><p><a id="default-float-format"></a><b>Variable <a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>. </b>When rational numbers are to be converted to floats (due to
 <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><tt class="function">FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><tt class="function">SQRT</tt></a> or a transcendental function), the result
 type is given by the variable <a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>.</p><p><a id="no-underflow"></a><b>Macro <a href="#no-underflow"><tt class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a>. </b>The macro <tt class="code">(<a href="#no-underflow"><tt class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a> {<em class="replaceable"><tt>form</tt></em>}*)</tt> executes the
 <em class="replaceable"><tt>form</tt></em>s, with errors of type <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><tt class="classname">FLOATING-POINT-UNDERFLOW</tt></a> inhibited.
 Floating point operations will silently return zero instead of
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ing an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><tt class="classname">FLOATING-POINT-UNDERFLOW</tt></a>.
</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="int-func-ext"></a>12.3.1. Additional Integer Functions</h3></div></div></div><p><a id="factorial"></a><b>Function <tt class="function">EXT:!</tt> </b><tt class="code">(<tt class="function">EXT:!</tt> <em class="replaceable"><tt>n</tt></em>)</tt> returns the
 factorial of <em class="replaceable"><tt>n</tt></em>, <em class="replaceable"><tt>n</tt></em> being a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.</p><p><a id="exquo"></a><b>Function <tt class="function">EXT:EXQUO</tt>. </b><tt class="code">(<tt class="function">EXT:EXQUO</tt> <em class="replaceable"><tt>x</tt></em> <em class="replaceable"><tt>y</tt></em>)</tt> returns
 the integer quotient <tt class="varname">x/y</tt> of two integers
 <em class="replaceable"><tt>x</tt></em>,<em class="replaceable"><tt>y</tt></em>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> when the quotient is not
 integer.  (This is more efficient than <a href="http://www.lisp.org/HyperSpec/Body/fun_sl.html" target="_top"><tt class="function">/</tt></a>.)</p><p><a id="xgcd"></a><b>Function <tt class="function">EXT:XGCD</tt>. </b><tt class="code">(<tt class="function">EXT:XGCD</tt> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>)</tt>
 returns the values <em class="replaceable"><tt>l</tt></em>, <em class="replaceable"><tt>k<sub>1</sub></tt></em>, ..., <em class="replaceable"><tt>k<sub>n</sub></tt></em>, where <em class="replaceable"><tt>l</tt></em> is the
 greatest common divisor of the integers <em class="replaceable"><tt>x<sub>1</sub></tt></em>, ..., <em class="replaceable"><tt>x<sub>n</sub></tt></em>, and
 <em class="replaceable"><tt>k<sub>1</sub></tt></em>, ..., <em class="replaceable"><tt>k<sub>n</sub></tt></em> are the integer coefficients such that
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 <em class="replaceable"><tt>l</tt></em> = (<a href="http://www.lisp.org/HyperSpec/Body/fun_gcd.html" target="_top"><tt class="function">GCD</tt></a> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>)
   = (+ (* <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>x<sub>1</sub></tt></em>) ... (* <em class="replaceable"><tt>k<sub>n</sub></tt></em> <em class="replaceable"><tt>x<sub>n</sub></tt></em>))
</pre></td></tr></table><p><a id="mod-expt"></a><b>Function <tt class="function">EXT:MOD-EXPT</tt>. </b><tt class="code">(<tt class="function">EXT:MOD-EXPT</tt> <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>l</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt>
 is equivalent to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_modcm_rem.html" target="_top"><tt class="function">MOD</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a> <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>l</tt></em>) <em class="replaceable"><tt>m</tt></em>)</tt>
 except it is more efficient for very large arguments.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-notes"></a>12.3.2. Floating Point</h3></div></div></div><p><a id="expt"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a>. </b><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a> <em class="replaceable"><tt>base</tt></em> <em class="replaceable"><tt>exponent</tt></em>)</tt>
 is not very precise if <em class="replaceable"><tt>exponent</tt></em> has a large
 absolute value.</p><p><a id="log"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><tt class="function">LOG</tt></a>. </b><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><tt class="function">LOG</tt></a> <em class="replaceable"><tt>number</tt></em> <em class="replaceable"><tt>base</tt></em>)</tt> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if
 <tt class="literal"><em class="replaceable"><tt>base</tt></em> = 1</tt>.</p><p><a id="pi"></a><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>. </b>The value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> with the precision given
  by <tt class="code">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>.  When this precision is changed, the value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is
  automatically recomputed.  Therefore <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is <strong>not</strong> a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-decode"></a>12.3.3. Float Decoding
  <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top">[CLHS]</a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-RADIX</tt></a> always returns <tt class="data">2</tt>.</p><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> <em class="replaceable"><tt>number</tt></em> <em class="replaceable"><tt>digits</tt></em>)</tt> coerces
   <em class="replaceable"><tt>number</tt></em> (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> number) to a floating point number with at
   least <em class="replaceable"><tt>digits</tt></em> mantissa digits.  The following always evaluates to
   <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&gt;=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> <em class="replaceable"><tt>number</tt></em> <em class="replaceable"><tt>digits</tt></em>)) <em class="replaceable"><tt>digits</tt></em>)
 </pre></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bool-ops"></a>12.3.4. Boolean Operations
  <a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top">[CLHS]</a></h3></div></div></div><div class="table"><a id="bool-op-table"></a><p class="title"><b>Table 12.1. Boolean Operations</b></p><table summary="Boolean Operations" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">constant</th><th align="left">value</th></tr></thead><tbody><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-CLR</tt></a></td><td align="left">0</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-SET</tt></a></td><td align="left">15</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-1</tt></a></td><td align="left">10</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-2</tt></a></td><td align="left">12</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-C1</tt></a></td><td align="left">5</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-C2</tt></a></td><td align="left">3</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-AND</tt></a></td><td align="left">8</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-IOR</tt></a></td><td align="left">14</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-XOR</tt></a></td><td align="left">6</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-EQV</tt></a></td><td align="left">9</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-NAND</tt></a></td><td align="left">7</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-NOR</tt></a></td><td align="left">1</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ANDC1</tt></a></td><td align="left">4</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ANDC2</tt></a></td><td align="left">2</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ORC1</tt></a></td><td align="left">13</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ORC2</tt></a></td><td align="left">11</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-lim"></a>12.3.5. Fixnum Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top">[CLHS]</a></h3></div></div></div><div class="table"><a id="fixnum-lim-table"></a><p class="title"><b>Table 12.2. Fixnum limits</b></p><table summary="Fixnum limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">16-bit CPU</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-POSITIVE-FIXNUM</tt></a></td><td colspan="2" align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-NEGATIVE-FIXNUM</tt></a></td><td colspan="2" align="center">-2<sup>24</sup> = -16777216</td><td align="center">-2<sup>32</sup> = -4294967296</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-lim"></a>12.3.6. Float Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top">[CLHS]</a></h3></div></div></div><p>Together with <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>, the other <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> constants
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-NEGATIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-POSITIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-POSITIVE-NORMALIZED-LONG-FLOAT</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><tt class="constant">LONG-FLOAT-EPSILON</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><tt class="constant">LONG-FLOAT-NEGATIVE-EPSILON</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">MOST-NEGATIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">MOST-POSITIVE-LONG-FLOAT</tt></a> are recomputed
  whenever <tt class="code">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>ed.  They are <strong>not</strong> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-invalid-op"></a>12.3.7. Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_id-operation.html" target="_top"><tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></h3></div></div></div><p>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-inexact"></a>12.3.8. Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_oint-inexact.html" target="_top"><tt class="classname">FLOATING-POINT-INEXACT</tt></a></h3></div></div></div><p>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="characters"></a>Chapter 13. Characters
   <a href="http://www.lisp.org/HyperSpec/Body/chap-13.html" target="_top">[CLHS-13]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></dd><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.5. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.12. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.13. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.14. Obsolete Constants</a></span></dt></dl></div><p>The characters are ordered according to a superset of the
 <a href="#charset-ASCII">ASCII character set</a>.</p>
<!--#ifdef UNICODE--><div class="variablelist"><dl><dt>Platform dependent: only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built
  <strong>with</strong> the compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> 3.2
 character set (ISO 10646, also known as UCS-4).
</dd></dl></div>
<!--#endif-->
<!--#if defined(ISOLATIN_CHS) && !defined(UNICODE)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> (except <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a>),
   <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only, and only in
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the ISO Latin-1 (ISO
 8859-1) character set:
</p><div class="informaltable"><a id="latin-1-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">
   </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#x90</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">
   </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#xA0</td><td align="center"> </td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">¤</td><td align="center">¥</td><td align="center">¦</td><td align="center">§</td><td align="center">¨</td><td align="center">©</td><td align="center">ª</td><td align="center">«</td><td align="center">¬</td><td align="center">­</td><td align="center">®</td><td align="center">¯</td></tr><tr><td align="center">#xB0</td><td align="center">°</td><td align="center">±</td><td align="center">²</td><td align="center">³</td><td align="center">´</td><td align="center">µ</td><td align="center">¶</td><td align="center">·</td><td align="center">¸</td><td align="center">¹</td><td align="center">º</td><td align="center">»</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Æ</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#xD0</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">×</td><td align="center">Ø</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">ß</td></tr><tr><td align="center">#xE0</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">æ</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td><td align="center">ì</td><td align="center">í</td><td align="center">î</td><td align="center">ï</td></tr><tr><td align="center">#xF0</td><td align="center">ð</td><td align="center">ñ</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td><td align="center">ö</td><td align="center">÷</td><td align="center">ø</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ü</td><td align="center">ý</td><td align="center">þ</td><td align="center">ÿ</td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<!--#if defined(NEXTSTEP_CHS) && !defined(UNICODE)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a> platforms only, and
 only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a> character set:
</p><div class="informaltable"><a id="next-charset-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#x90</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">µ</td><td align="center">×</td><td align="center">÷</td></tr><tr><td align="center">#xA0</td><td align="center">©</td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">⁄</td><td align="center">¥</td><td align="center">ƒ</td><td align="center">§</td><td align="center">¤</td><td align="center">’</td><td align="center">“</td><td align="center">«</td><td align="center">‹</td><td align="center">›</td><td align="center">ﬁ</td><td align="center">ﬂ</td></tr><tr><td align="center">#xB0</td><td align="center">®</td><td align="center">–</td><td align="center">†</td><td align="center">‡</td><td align="center">·</td><td align="center">¦</td><td align="center">¶</td><td align="center">•</td><td align="center">‚</td><td align="center">„</td><td align="center">”</td><td align="center">»</td><td align="center">…</td><td align="center">‰</td><td align="center">¬</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">¹</td><td align="center">ˋ</td><td align="center">´</td><td align="center">^</td><td align="center">˜</td><td align="center">¯</td><td align="center">˘</td><td align="center">˙</td><td align="center">¨</td><td align="center">²</td><td align="center">˚</td><td align="center">¸</td><td align="center">³</td><td align="center">˝</td><td align="center">˛</td><td align="center">ˇ</td></tr><tr><td align="center">#xD0</td><td align="center">—</td><td align="center">±</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td></tr><tr><td align="center">#xE0</td><td align="center">ì</td><td align="center">Æ</td><td align="center">í</td><td align="center">ª</td><td align="center">î</td><td align="center">ï</td><td align="center">ð</td><td align="center">ñ</td><td align="center">Ł</td><td align="center">Ø</td><td align="center">Œ</td><td align="center">º</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td></tr><tr><td align="center">#xF0</td><td align="center">ö</td><td align="center">æ</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ı</td><td align="center">ü</td><td align="center">ý</td><td align="center">ł</td><td align="center">ø</td><td align="center">œ</td><td align="center">ß</td><td align="center">þ</td><td align="center">ÿ</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<div class="table"><a id="standard-char-table"></a><p class="title"><b>Table 13.1. Standard characters</b></p><table summary="Standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keycode">#x20</span></td></tr><tr><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keycode">#x0A</span></td></tr></tbody></table></div><div class="table"><a id="semi-standard-char-table"></a><p class="title"><b>Table 13.2. Semi-standard characters</b></p><table summary="Semi-standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keycode">#x08</span></td></tr><tr><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keycode">#x09</span></td></tr><tr><td align="center"><span class="keysym">#\Linefeed</span></td><td align="center"><span class="keycode">#x0A</span></td></tr><tr><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keycode">#x0C</span></td></tr><tr><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keycode">#x0D</span></td></tr></tbody></table></div><p><span class="keysym">#\Newline</span> is the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a>.</p><div class="table"><a id="extra-named-chars-table"></a><p class="title"><b>Table 13.3. Additional Named Characters</b></p><table summary="Additional Named Characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keycode">#x07</span></td></tr><tr><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keycode">#x1B</span></td></tr></tbody></table></div><div class="table"><a id="ctrl-char-table"></a><p class="title"><b>Table 13.4. Additional syntax for characters with code from
   <span class="keycode">#x00</span> to <span class="keycode">#x1F</span>:</b></p><table summary="Additional syntax for characters with code from&#10;   #x00 to #x1F:" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\^@</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\^A</span> … <span class="keysym">#\^Z</span></td><td align="center"><span class="keycode">#x01</span> …
                   <span class="keycode">#x1A</span></td></tr><tr><td align="center"><span class="keysym">#\^[</span></td><td align="center"><span class="keycode">#x1B</span></td></tr><tr><td align="center"><span class="keysym">#\^\</span></td><td align="center"><span class="keycode">#x1C</span></td></tr><tr><td align="center"><span class="keysym">#\^]</span></td><td align="center"><span class="keycode">#x1D</span></td></tr><tr><td align="center"><span class="keysym">#\^^</span></td><td align="center"><span class="keycode">#x1E</span></td></tr><tr><td align="center"><span class="keysym">#\^_</span></td><td align="center"><span class="keycode">#x1F</span></td></tr></tbody></table></div><p>See also <a href="#chario" title="23.1.&#xA0;characters">Section 23.1, “characters”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-script"></a>13.1. Character Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html" target="_top">[CLHS-13.1.2.1]</a></h2></div></div></div><p>The only defined character script is the type <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>
 itself.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-attrib"></a>13.2. Character Attributes
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html" target="_top">[CLHS-13.1.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></div><p>Characters have no implementation-defined or [<span class="citation"><a href="#CLtL1">CLtL1</a></span>] font and bit
 attributes.  All characters are simple characters.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="input-char"></a>13.2.1. Input Characters</h3></div></div></div><p>For backward compatibility, there is a class <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>
 representing either a character with font and bits, or a keystroke.
 The following functions work with objects of types <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>
 and <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
 Note that <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> on objects of type
 <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.</p><div class="variablelist"><dl><dt><tt class="constant">EXT:CHAR-FONT-LIMIT</tt> = 16</dt><dd>The system uses only font 0.
  </dd><dt><tt class="constant">EXT:CHAR-BITS-LIMIT</tt> = 16</dt><dd><p>Character bits:
    </p><div class="informaltable"><a id="bit-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:CONTROL</tt></td><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-CONTROL-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:META</tt></td><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-META-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:SUPER</tt></td><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-SUPER-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:HYPER</tt></td><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-HYPER-BIT</tt></a></td></tr></tbody></table></div></dd><dt><tt class="code">(<tt class="function">EXT:CHAR-FONT</tt>
  <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns the font of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
  </dd><dt><tt class="code">(<tt class="function">EXT:CHAR-BITS</tt>
  <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns the bits of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
  </dd><dt><tt class="code">(<tt class="function">EXT:MAKE-CHAR</tt>
     <em class="replaceable"><tt>char</tt></em> [<em class="replaceable"><tt>bits</tt></em>
            [<em class="replaceable"><tt>font</tt></em>]])</tt></dt><dd>returns a new <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if such a
 character cannot be created.</dd><dt><tt class="code">(<tt class="function">EXT:CHAR-BIT</tt>
  <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd>returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the named bit is set in <em class="replaceable"><tt>object</tt></em>,
  else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:SET-CHAR-BIT</tt>
  <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>new-value</tt></em>)</tt></dt><dd>returns a new <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> with the named bit set or
   unset, depending on the <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a> <em class="replaceable"><tt>new-value</tt></em>.
 </dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> is <strong>not</strong> a subtype of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p></div>
<!--#ifdef KEYBOARD--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd>The system itself uses this <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> type only to
 mention special keys and <span><strong class="keycap">Control</strong></span>/<span><strong class="keycap">Alternate</strong></span>/<span><strong class="keycap">Shift</strong></span> key status on return from
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> <a href="impnotes.html#terminal" class="olink"><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a>)</tt>.</dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-char"></a>13.3. Graphic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html" target="_top">[CLHS-13.1.4.1]</a></h2></div></div></div><p>The graphic characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard, excluding the ranges
 <span class="keycode">U0000</span> … <span class="keycode">U001F</span> and
 <span class="keycode">U007F</span> … <span class="keycode">U009F</span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="alpha-char"></a>13.4. Alphabetic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html" target="_top">[CLHS-13.1.4.2]</a></h2></div></div></div><p>The alphabetic characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined as letters by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-ext"></a>13.5. Case of Implementation-Defined Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html" target="_top">[CLHS-13.1.4.3.4]</a></h2></div></div></div><p>The characters with case are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters <em class="replaceable"><tt>c</tt></em>, for
 which the upper case mapping <em class="replaceable"><tt>uc</tt></em> and the lower case mapping <em class="replaceable"><tt>lc</tt></em>
 have the following properties:
</p><div class="itemizedlist"><ul type="disc"><li><em class="replaceable"><tt>uc</tt></em> and <em class="replaceable"><tt>lc</tt></em> are different</li><li><em class="replaceable"><tt>c</tt></em> is one of <em class="replaceable"><tt>uc</tt></em> and <em class="replaceable"><tt>lc</tt></em></li><li>the upper case mapping of <em class="replaceable"><tt>uc</tt></em> and of <em class="replaceable"><tt>lc</tt></em>
   is <em class="replaceable"><tt>uc</tt></em></li><li>the lower case mapping of <em class="replaceable"><tt>uc</tt></em> and of <em class="replaceable"><tt>lc</tt></em>
   is <em class="replaceable"><tt>lc</tt></em></li></ul></div><p>The titlecase property of <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters has no equivalent in
 <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-char"></a>13.6. Numeric Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html" target="_top">[CLHS-13.1.4.4]</a></h2></div></div></div><p>The numeric characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined as digits by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-ord"></a>13.7. Ordering of Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html" target="_top">[CLHS-13.1.6]</a></h2></div></div></div><p>The characters are ordered according to their <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clhs-newline"></a>13.8. Treatment of Newline during Input and Output
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html" target="_top">[CLHS-13.1.8]</a></h2></div></div></div><p>Newlines are written according to the stream's <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>, see the
 function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-external-format.html" target="_top"><tt class="function">STREAM-EXTERNAL-FORMAT</tt></a> and the description of <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>s,
 in particular, <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a>s.
 The default behavior is as follows:</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY != 0))--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd>When writing to a file, <span class="keysym">#\Newline</span> is converted to
 <span class="keycode">CR</span>/<span class="keycode">LF</span>. (This is the usual convention on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>.)
 For example, <span class="keysym">#\Return</span>+<span class="keysym">#\Newline</span> is written as <span class="keycode">CR</span>/<span class="keycode">CR</span>/<span class="keycode">LF</span>.
</dd></dl></div>
<!--#endif-->
<p>When reading from a file, <span class="keycode">CR</span>/<span class="keycode">LF</span> is converted to <span class="keysym">#\Newline</span>
 (the usual convention on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>), and <span class="keycode">CR</span> not followed by <span class="keycode">LF</span> is
 converted to <span class="keysym">#\Newline</span> as well (the usual conversion on MacOS, also used
 by some programs on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>).
 If you do not want this, i.e., if you really want to distinguish
 <span class="keycode">LF</span>, <span class="keycode">CR</span> and <span class="keycode">CR</span>/<span class="keycode">LF</span>, you have to resort to
 binary input (function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>).</p><p><b>Justification. </b><a href="http://www.unicode.org/reports/tr13/tr13-9.html" target="_top">Unicode
  Newline Guidelines</a> say: “<span class="quote">Even if you know which
  characters represents NLF on your particular platform, on input and in
  interpretation, treat CR, LF, CRLF, and NEL the same. Only on output do
  you need to distinguish between them.</span>”</p><p><b>Rationale. </b>In <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, <span class="keysym">#\Newline</span> is identical to <span class="keysym">#\Linefeed</span>
 (which is specifically permitted by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] in section
 <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-7.html" target="_top">Character
  Names</a>).
 Consider a file containing exactly this string:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_concatenate.html" target="_top"><tt class="function">CONCATENATE</tt></a> 'string "foo" (string <span class="keysym">#\Linefeed</span>)
  "bar" (string <span class="keysym">#\Return</span>) (string <span class="keysym">#\Linefeed</span>))</tt>
 Suppose we open it with <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a> "foo" <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <tt class="constant">:DOS</tt>)</tt>.
 What should <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> return?
 Right now, it returns <tt class="data">"foo"</tt>
 (the second <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> returns <tt class="data">"bar"</tt>
 and reaches <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>).
 If our i/o were "faithful", <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> would have returned the string
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_concatenate.html" target="_top"><tt class="function">CONCATENATE</tt></a> 'string "foo" (string <span class="keysym">#\Linefeed</span>) "bar")</tt>, i.e.,
  a string with an embedded <span class="keysym">#\Newline</span> between <tt class="data">"foo"</tt> and <tt class="data">"bar"</tt>
  (because a single <span class="keysym">#\Linefeed</span> is not a <span class="keysym">#\Newline</span> in the specified <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a>, it
  will not make <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> return, but it <strong>is</strong> a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <span class="keysym">#\Newline</span>!)
  Even though the specification for <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> does not explicitly
  forbids newlines inside the returned string, such behavior would be
  quite surprising, to say the least.  Moreover, this line (with an
  embedded <span class="keysym">#\Newline</span>) would be written as two lines (when writing to a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> of <tt class="constant">:DOS</tt>), because the embedded <span class="keysym">#\Newline</span>
  would be written as <span class="keycode">CR</span>+<span class="keycode">LF</span>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-int"></a>13.9. Character Encodings
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html" target="_top">[CLHS-13.1.9]</a></h2></div></div></div><p>The integer returned by <a href="http://www.lisp.org/HyperSpec/Body/fun_char-int.html" target="_top"><tt class="function">CHAR-INT</tt></a> is the same as the character's
 code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="script-ext"></a>13.10. Documentation
   of Implementation-Defined Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html" target="_top">[CLHS-13.1.10]</a></h2></div></div></div><p>See <a href="#encoding" title="30.5.&#xA0;Encodings">Section 30.5, “Encodings”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-dict"></a>13.11. The Characters Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html" target="_top">[CLHS-13.2]</a></h2></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><tt class="function">CHAR-CODE</tt></a> takes values from <tt class="literal">0</tt> (inclusive) to
 <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a> (exclusive), i.e., the implementation
 supports exactly <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a> characters.</p><div class="table"><a id="char-code-limit-table"></a><p class="title"><b>Table 13.5. Number of characters</b></p><table summary="Number of characters" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">binaries built</th><th align="center"><strong>without</strong> <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> support</th><th align="center"><strong>with</strong> <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> support</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a></td><td align="center">2<sup>8</sup> = 256</td><td align="center">17 * 2<sup>16</sup> = 1114112</td></tr></tbody></table></div><p>The types <tt class="classname">EXT:STRING-CHAR</tt> and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><tt class="classname">BASE-CHAR</tt></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><p>The graphic characters have been described
 <a href="#graph-char" title="13.3.&#xA0;Graphic Characters&#10;   [CLHS-13.1.4.1]">above</a>.</p><p>The standard characters are <span class="keysym">#\Newline</span> and the graphic characters with
 a code between 32 and 126 (inclusive).</p><p>The alphabetic characters are these characters:
</p><div class="literallayout"><p>             ABCDEFGHIJKLMNOPQRSTUVWXYZ<br />
             abcdefghijklmnopqrstuvwxyz<br />
</p></div><p>
and the international alphabetic characters from the character set:
</p><div class="literallayout"><p>             ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜßáíóúñÑªºãõØøÀÃÕ etc.<br />
</p></div><p>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-EQUAL</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-EQUAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-LESSP</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-GREATERP</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-GREATERP</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-LESSP</tt></a> ignore bits and
 font attributes of their arguments.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-width"></a>13.12. Functions on characters</h2></div></div></div><p><b>Function <tt class="code">(<a href="#char-width" title="13.12.&#xA0;Functions on characters"><tt class="function">EXT:CHAR-WIDTH</tt></a> <em class="replaceable"><tt>char</tt></em>)</tt>. </b>returns the number of screen columns occupied by <em class="replaceable"><tt>char</tt></em>.
 This is 0 for non-spacing characters
  (such as control characters and many combining characters),
 2 for double-width East Asian characters,
 and 1 for all other characters.
 See also function <a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-platform-dep"></a>13.13. Platform-Dependent Characters</h2></div></div></div><p>The characters that are not graphic chars and the space character
 have names:</p>
<!--#ifdef WIN32_CHARNAMES--><div class="table"><a id="dos-win32-chars-table"></a><p class="title"><b>Table 13.6. Platform dependent characters: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms.</b></p><table summary="Platform dependent characters: Win32 platforms." border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x00)</tt></td><td align="center"><span class="keysym">#\Null</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x07)</tt></td><td align="center"><span class="keysym">#\Bell</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x08)</tt></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Rubout</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x09)</tt></td><td align="center"><span class="keysym">#\Tab</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0A)</tt></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0B)</tt></td><td align="center"><span class="keysym">#\Code11</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0C)</tt></td><td align="center"><span class="keysym">#\Page</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0D)</tt></td><td align="center"><span class="keysym">#\Return</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1A)</tt></td><td align="center"><span class="keysym">#\Code26</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1B)</tt></td><td align="center"><span class="keysym">#\Escape</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x20)</tt></td><td align="center"><span class="keysym">#\Space</span></td><td class="auto-generated"> </td></tr></tbody></table></div>
<!--#endif-->
<!--#ifdef UNIX_CHARNAMES--><div class="table"><a id="unix-chars-table"></a><p class="title"><b>Table 13.7. Platform dependent characters: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms.</b></p><table summary="Platform dependent characters: UNIX platforms." border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x00)</tt></td><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keysym">#\Nul</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x01)</tt></td><td align="center"><span class="keysym">#\Soh</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x02)</tt></td><td align="center"><span class="keysym">#\Stx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x03)</tt></td><td align="center"><span class="keysym">#\Etx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x04)</tt></td><td align="center"><span class="keysym">#\Eot</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x05)</tt></td><td align="center"><span class="keysym">#\Enq</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x06)</tt></td><td align="center"><span class="keysym">#\Ack</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x07)</tt></td><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keysym">#\Bel</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x08)</tt></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Bs</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x09)</tt></td><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keysym">#\Ht</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0A)</tt></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Nl</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0B)</tt></td><td align="center"><span class="keysym">#\Vt</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0C)</tt></td><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keysym">#\Np</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0D)</tt></td><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keysym">#\Cr</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0E)</tt></td><td align="center"><span class="keysym">#\So</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0F)</tt></td><td align="center"><span class="keysym">#\Si</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x10)</tt></td><td align="center"><span class="keysym">#\Dle</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x11)</tt></td><td align="center"><span class="keysym">#\Dc1</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x12)</tt></td><td align="center"><span class="keysym">#\Dc2</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x13)</tt></td><td align="center"><span class="keysym">#\Dc3</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x14)</tt></td><td align="center"><span class="keysym">#\Dc4</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x15)</tt></td><td align="center"><span class="keysym">#\Nak</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x16)</tt></td><td align="center"><span class="keysym">#\Syn</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x17)</tt></td><td align="center"><span class="keysym">#\Etb</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x18)</tt></td><td align="center"><span class="keysym">#\Can</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x19)</tt></td><td align="center"><span class="keysym">#\Em</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1A)</tt></td><td align="center"><span class="keysym">#\Sub</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1B)</tt></td><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keysym">#\Esc</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1C)</tt></td><td align="center"><span class="keysym">#\Fs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1D)</tt></td><td align="center"><span class="keysym">#\Gs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1E)</tt></td><td align="center"><span class="keysym">#\Rs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1F)</tt></td><td align="center"><span class="keysym">#\Us</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x20)</tt></td><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keysym">#\Sp</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x7F)</tt></td><td align="center"><span class="keysym">#\Rubout</span></td><td align="center"><span class="keysym">#\Delete</span></td><td align="center"><span class="keysym">#\Del</span></td></tr></tbody></table></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-bits"></a>13.14. Obsolete Constants</h2></div></div></div><div class="table"><a id="char-bits-table"></a><p class="title"><b>Table 13.8. Character bit constants (obsolete)</b></p><table summary="Character bit constants (obsolete)" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">constant</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-CONTROL-BIT</tt></a></td><td align="center">1</td></tr><tr><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-META-BIT</tt></a></td><td align="center">2</td></tr><tr><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-SUPER-BIT</tt></a></td><td align="center">4</td></tr><tr><td align="center"><a href="#char-bits" title="13.14.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-HYPER-BIT</tt></a></td><td align="center">8</td></tr></tbody></table></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conses"></a>Chapter 14. Conses
   <a href="http://www.lisp.org/HyperSpec/Body/chap-14.html" target="_top">[CLHS-14]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cons-dict"></a>14.1. The Conses Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html" target="_top">[CLHS-14.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="map-func"></a>14.1.1. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAN</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPLIST</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCON</tt></a>, ...</h3></div></div></div><p><a id="mapcap"></a><b>Function <a href="#mapcap"><tt class="function">EXT:MAPCAP</tt></a>. </b>The function <a href="#mapcap"><tt class="function">EXT:MAPCAP</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAN</tt></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a>:
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting"><tt class="code">(<a href="#mapcap"><tt class="function">EXT:MAPCAP</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>)</tt> ≡
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>))</tt></pre></td></tr></table><p>
(Actually a bit more efficient that this would have been.)</p><p><a id="maplap"></a><b>Function <a href="#mapcap"><tt class="function">EXT:MAPLAP</tt></a>. </b>The function <a href="#mapcap"><tt class="function">EXT:MAPLAP</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCON</tt></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a>:
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting"><tt class="code">(<a href="#mapcap"><tt class="function">EXT:MAPLAP</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>)</tt> ≡
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPLIST</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>))</tt></pre></td></tr></table><p>
 (Actually a bit more efficient that this would have been.)</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="arrays"></a>Chapter 15. Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/chap-15.html" target="_top">[CLHS-15]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a> can return specialized arrays for the
 <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a>s
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 2)</tt>,
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 4)</tt>,
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt>,
 and, of course, the required specializations <a href="http://www.lisp.org/HyperSpec/Body/typ_nil.html" target="_top"><tt class="classname">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><tt class="classname">BIT</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-elts"></a>15.1. Array Elements
   <a href="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html" target="_top">[CLHS-15.1.1]</a></h2></div></div></div><div class="table"><a id="array-limit-table"></a><p class="title"><b>Table 15.1. Array limits</b></p><table summary="Array limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">16-bit CPU</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-rank-limit.html" target="_top"><tt class="constant">ARRAY-RANK-LIMIT</tt></a></td><td colspan="3" align="center">2<sup>12</sup> = 4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html" target="_top"><tt class="constant">ARRAY-DIMENSION-LIMIT</tt></a></td><td colspan="2" align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html" target="_top"><tt class="constant">ARRAY-TOTAL-SIZE-LIMIT</tt></a></td><td colspan="2" align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-dict"></a>15.2. The Arrays Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html" target="_top">[CLHS-15.2]</a></h2></div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a> for displaced arrays. </b>An array to which another array is displaced should not be shrunk
 (using <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a>) in such a way that the other array points into
 void space.  This is not checked at the time <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a> is
 called!</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="strings"></a>Chapter 16. Strings
   <a href="http://www.lisp.org/HyperSpec/Body/chap-16.html" target="_top">[CLHS-16]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></div><p>String comparison is based on the function <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR&lt;=</tt></a>.  Therefore
 diphthongs do not obey the usual national rules.  Example:
 <tt class="literal">o</tt> &lt; <tt class="literal">oe</tt> &lt;
 <tt class="literal">z</tt> &lt; <tt class="literal">ö</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="string-dict"></a>16.1. The Strings Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html" target="_top">[CLHS-16.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-width"></a>16.1.1. Functions on strings</h3></div></div></div><p><b>Function <a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a>. </b><tt class="code">(<a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>start</tt></em>
   <em class="replaceable"><tt>end</tt></em>)</tt> returns the number of screen columns occupied by
  <em class="replaceable"><tt>string</tt></em>.  This is computed as the sum of all <a href="#char-width" title="13.12.&#xA0;Functions on characters"><tt class="function">EXT:CHAR-WIDTH</tt></a>s of all
  of the <em class="replaceable"><tt>string</tt></em>'s characters.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="sequences"></a>Chapter 17. Sequences
   <a href="http://www.lisp.org/HyperSpec/Body/chap-17.html" target="_top">[CLHS-17]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="seq-dict"></a>17.1. The Sequences Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html" target="_top">[CLHS-17.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="seq-macro-ext"></a>17.1.1. Additional Macros</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#doseq">17.1.1.1. Macro <tt class="function">EXT:DOSEQ</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="doseq"></a>17.1.1.1. Macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a></h4></div></div></div><p>For iteration through a sequence, a macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><tt class="function">DOLIST</tt></a>, may be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_map.html" target="_top"><tt class="function">MAP</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a> (<em class="replaceable"><tt>variable</tt></em> <em class="replaceable"><tt>seqform</tt></em> [<em class="replaceable"><tt>resultform</tt></em>])
  {<em class="replaceable"><tt>declaration</tt></em>}*
  {<em class="replaceable"><tt>tag</tt></em>|<em class="replaceable"><tt>form</tt></em>}*)
</pre></td></tr></table><p><a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="nreverse-nreconc"></a>17.1.2. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a></h3></div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> is always <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the argument.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> swaps pairs of elements.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> swaps the first and the last
 element and reverses the list chaining between them.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the first argument unless it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case the result is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the second argument.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rem-del"></a>17.1.3. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE-IF</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE-IF-NOT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><tt class="function">REMOVE-DUPLICATES</tt></a> return
 their argument unchanged, if no element has to be removed.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE-IF</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE-IF-NOT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><tt class="function">DELETE-DUPLICATES</tt></a>
 destructively modify their argument: If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>,
 the <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> parts are modified.  If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> with
 fill pointer, the fill pointer is lowered and the remaining elements are
 compacted below the new fill pointer.</p><p><a id="count-ansi"></a><b>Variable <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a>. </b>Contrary to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue 283 <a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a>,
 negative <tt class="constant">:COUNT</tt> keyword arguments are not allowed unless you set
 <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> value, in which case “<span class="quote">using a
 negative integer value is functionally equivalent to using a value of
 zero</span>”, as per the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sorting"></a>17.1.4. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> accept two additional keyword arguments
 <tt class="constant">:START</tt> and <tt class="constant">:END</tt>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> <em class="replaceable"><tt>sequence</tt></em> <em class="replaceable"><tt>predicate</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:KEY</tt> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> <em class="replaceable"><tt>sequence</tt></em> <em class="replaceable"><tt>predicate</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:KEY</tt> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)
</pre></td></tr></table><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> are identical.
 They implement the mergesort algorithm.
 Worst case complexity: <tt class="varname">O(n*log(n))</tt> comparisons,
 where <em class="replaceable"><tt>n</tt></em> is the <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> of the subsequence bounded
 by the <tt class="constant">:START</tt> and <tt class="constant">:END</tt> arguments.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="hash"></a>Chapter 18. Hash Tables
   <a href="http://www.lisp.org/HyperSpec/Body/chap-18.html" target="_top">[CLHS-18]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="hash-dict"></a>18.1. The Hash Tables Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html" target="_top">[CLHS-18.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-hash"></a>18.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> accepts two additional keyword arguments
 <tt class="constant">:INITIAL-CONTENTS</tt> and <tt class="constant">:WEAK</tt>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :test :initial-contents :size
                 :rehash-size :rehash-threshold
                 :warn-if-needs-rehash-after-gc :weak)
</pre></td></tr></table><p>The <tt class="constant">:TEST</tt> argument can be, other than one of the symbols <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><tt class="function">EQUALP</tt></a>, one of the symbols <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a> and
 <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a>.  Both of these tests use <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> as the comparison
 function; they differ in their performance characteristics.
 </p><div class="variablelist"><dl><dt><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a></dt><dd>This uses the fastest possible hash function.
     Its drawback is that its hash codes become invalid at every <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
     (except if all keys are <a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>s),
     thus requiring a reorganization of the hash table at the first
     access after each <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion. Especially when generational <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is used,
     which leads to frequent small <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ions, large hash table with this test
     can lead to scalability problems.</dd><dt><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a></dt><dd>This uses a slower hash function that has the
     property that its hash codes for instances of the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>,
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STANDARD-STABLEHASH</tt></a> (subclass of <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>) and
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STRUCTURE-STABLEHASH</tt></a> (subclass of <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>) are
     stable across GCs.
     This test can thus avoid the scalability problems if all keys,
     other than <a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>s, are <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STANDARD-STABLEHASH</tt></a> or
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STRUCTURE-STABLEHASH</tt></a> instances.</dd></dl></div><p>
 One can recommend to use <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a> for short-lived hash tables.
 For hash tables with a long lifespan which can be big or accessed
 frequently, it is recommended to use <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a>, and to modify the
 objects that are used as its keys to become instances of
 <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STANDARD-STABLEHASH</tt></a> or <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="classname">EXT:STRUCTURE-STABLEHASH</tt></a>.
</p><p>When the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> or the function <tt class="literal">#'eq</tt> is
used as a <tt class="constant">:TEST</tt> argument, the value of the variable
<tt class="varname">EXT:*EQ-HASHFUNCTION*</tt> is used instead. This value must
be one of <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a>, <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a>.</p><p>Similarly, the <tt class="constant">:TEST</tt> argument can also be one
 of the symbols <tt class="constant">EXT:FASTHASH-EQL</tt>,
 <tt class="constant">EXT:STABLEHASH-EQL</tt>,
 <tt class="constant">EXT:FASTHASH-EQUAL</tt>,
 <tt class="constant">EXT:STABLEHASH-EQUAL</tt>.
 The same remarks apply as for <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a> and <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a>.
 When the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> or the function <tt class="literal">#'eql</tt> is used as a
 <tt class="constant">:TEST</tt> argument, the value of the variable
 <tt class="varname">EXT:*EQL-HASHFUNCTION*</tt> is used instead; this value must
 be one of <tt class="constant">EXT:FASTHASH-EQL</tt>,
 <tt class="constant">EXT:STABLEHASH-EQL</tt>.
 Similarly, when the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a> or the function <tt class="literal">#'equal</tt>
 is used as a <tt class="constant">:TEST</tt> argument, the value of the variable
 <tt class="varname">EXT:*EQUAL-HASHFUNCTION*</tt> is used instead; this value
 must be one of <tt class="constant">EXT:FASTHASH-EQUAL</tt>,
 <tt class="constant">EXT:STABLEHASH-EQUAL</tt>.</p><p>The <tt class="constant">:WARN-IF-NEEDS-REHASH-AFTER-GC</tt> argument,
if true, causes a warning to be signalled when an object is stored into
the table which will force table reorganizations at the first access
of the table after each GC. This keyword argument can be used to check
whether <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a> should be preferred over
<a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a> for a particular table.</p><p>The <tt class="constant">:INITIAL-CONTENTS</tt> argument is an
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> that is used to initialize the new hash table.</p><p>The <tt class="constant">:REHASH-THRESHOLD</tt> argument is ignored.</p><p>The <tt class="constant">:WEAK</tt> can take the following values:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (default)</td></tr><tr><td><tt class="constant">:KEY</tt></td></tr><tr><td><tt class="constant">:VALUE</tt></td></tr><tr><td><tt class="constant">:EITHER</tt></td></tr><tr><td><tt class="constant">:BOTH</tt></td></tr></table><p>
and specifies whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> is <span class="emphasis"><em>weak</em></span>:
if the key, value, either or both are not accessible for the <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
purposes, i.e., if they are only accessible via weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s
and <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>s, it is <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed and removed from the weak
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>.</p><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able predicate <tt class="function">EXT:HASH-TABLE-WEAK-P</tt>
checks whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> is weak.</p><p>Note that the only test that makes sense for weak hash tables are
<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> and its variants <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:FASTHASH-EQ</tt></a> and <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><tt class="constant">EXT:STABLEHASH-EQ</tt></a>.</p><p>Just like all other <a href="#weak" title="30.7.&#xA0;Weak Objects">weak objects</a>, weak
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s cannot be printed readably.</p><p>See also <a href="impnotes.html#weak-ht" class="olink">Section 30.7.9, “Weak Hash Tables”</a>.</p><p>While <tt class="constant">:WARN-IF-NEEDS-REHASH-AFTER-GC</tt> can help
 checking the efficiency of a particular hash table, the variable
<strong class="first"><em class="firstterm"><a href="#hashtable-gc-rehash-warn"><tt class="varname">CUSTOM:*WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*</tt></a>
 <a id="hashtable-gc-rehash-warn" class="indexterm"></a></em></strong>
 achieves the same effect for all hash tables in the system at once:
 when <a href="#hashtable-gc-rehash-warn"><tt class="varname">CUSTOM:*WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*</tt></a> is true and a hash
 table needs to be rehashed after a <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion, a warning is issued that
 shows the inefficient hash table.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defhash"></a>18.1.2. Macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></h3></div></div></div><p>You can define a new hash table test using the macro
 <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a>: <tt class="code">(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> test-name <em class="replaceable"><tt>test-function</tt></em> <em class="replaceable"><tt>hash-function</tt></em>)</tt>, after
 which <em class="replaceable"><tt>test-name</tt></em> can be passed as the
 <tt class="constant">:TEST</tt> argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a>.  E.g.: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting"> (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> string <a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><tt class="function">STRING=</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a>)
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> :test 'string)</pre></td></tr></table><p>
(which is not too useful because it is equivalent to an <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> but less efficient).</p><p>The fundamental requirement is that the <em class="replaceable"><tt>test-function</tt></em> and <em class="replaceable"><tt>hash-function</tt></em> are
 consistent: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>test-function</tt></em> <em class="replaceable"><tt>x</tt></em> <em class="replaceable"><tt>y</tt></em>) ⇒
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>hash-function</tt></em> <em class="replaceable"><tt>x</tt></em>) (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>hash-function</tt></em> <em class="replaceable"><tt>y</tt></em>))
 </pre></td></tr></table><p>
 This means that the following definition: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a>) ; <strong>BAD!</strong>
 </pre></td></tr></table><p>
 is <strong>not</strong> correct because <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> 1 1d0)</tt> is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> but <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> 1) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> 1d0))</tt>
 is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.  The correct way is, e.g.: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> (x) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> x '<a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>))))
 </pre></td></tr></table><p>
 (note that <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> <em class="replaceable"><tt>x</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>)</tt> does <strong>not</strong>
 cons up <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> objects while <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> <em class="replaceable"><tt>x</tt></em>
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>)</tt> does).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ht-test"></a>18.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a> returns either one of the four standard
 symbols <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><tt class="function">EQUALP</tt></a>, or, for <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s
 created with a user-defined <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a> (see macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a>),
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> cell <tt class="data">(<em class="replaceable"><tt>test-function</tt></em> . <em class="replaceable"><tt>hash-function</tt></em>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dohash"></a>18.1.4. Macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a></h3></div></div></div><p>For iteration through a <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, a macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><tt class="function">DOLIST</tt></a>, can be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_maphash.html" target="_top"><tt class="function">MAPHASH</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a> (<em class="replaceable"><tt>key-var</tt></em> <em class="replaceable"><tt>value-var</tt></em> <em class="replaceable"><tt>hash-table-form</tt></em> [<em class="replaceable"><tt>resultform</tt></em>])
  {<em class="replaceable"><tt>declaration</tt></em>}*
  {<em class="replaceable"><tt>tag</tt></em>|<em class="replaceable"><tt>form</tt></em>}*)
</pre></td></tr></table><p><a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="filenames"></a>Chapter 19. Filenames
   <a href="http://www.lisp.org/HyperSpec/Body/chap-19.html" target="_top">[CLHS-19]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a></span></dt></dl></dd></dl></div><p>For most operations, pathnames denoting files and pathnames
 denoting directories cannot be used interchangeably.</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>For example, <tt class="filename">#P"foo/bar"</tt> denotes
 the file <tt class="filename">#P"bar"</tt> in the directory <tt class="filename">#P"foo"</tt>,
 while <tt class="filename">#P"foo/bar/"</tt> denotes the subdirectory
 <tt class="filename">#P"bar"</tt> of the directory <tt class="filename">#P"foo"</tt>.
</dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32--><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>  platforms only.</dt><dd>For example, <tt class="filename">#P"foo\\bar"</tt>
 denotes the file <tt class="filename">#P"bar"</tt> in the directory <tt class="filename">#P"foo"</tt>,
 while <tt class="filename">#P"foo\\bar\\"</tt> denotes the subdirectory
 <tt class="filename">#P"bar"</tt> of the directory <tt class="filename">#P"foo"</tt>.
</dd>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32) || defined(UNIX_CYGWIN32)--><dt><a id="device-prefix"></a>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> and
  <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> platforms only.</dt><dd>User variable <strong class="first"><em class="firstterm"><a href="#device-prefix"><tt class="varname">CUSTOM:*DEVICE-PREFIX*</tt></a></em></strong>
  controls translation between <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> pathnames
  (e.g., <tt class="filename">#P"/cygdrive/c/gnu/clisp/"</tt>) and native
  <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> pathnames (e.g., <tt class="filename">#P"C:\\gnu\\clisp\\"</tt>)
  When it is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, no translations occur and the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> port
  will not understand the native paths and the native <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> port will
  not understand the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> paths.
  When its value is a string, it is used by <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> to
  translate into the appropriate platform-specific representation,
  so that on <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a>,
  <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> "c:/gnu/clisp/")</tt>
  returns <tt class="filename">#P"/cygdrive/c/gnu/clisp/"</tt>,
  while on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
  <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> "/cygdrive/c/gnu/clisp/")</tt>
  returns <tt class="filename">#P"C:/gnu/clisp/"</tt>.
  The initial value is <tt class="literal">"cygdrive"</tt>, you should edit
  <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> to change it.</dd>
<!--#endif-->
</dl></div><p>This is especially important for the
 <a href="#dir" title="20.1.1.&#xA0;Function DIRECTORY">directory-handling functions</a>.</p><div class="table"><a id="min-filename-syntax-table"></a><p class="title"><b>Table 19.1. The minimum filename syntax that may be used portably</b></p><table summary="The minimum filename syntax that may be used portably" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">pathname</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><tt class="filename">"xxx"</tt></td><td align="center">for a file with name <em class="replaceable"><tt>xxx</tt></em></td></tr><tr><td align="center"><tt class="filename">"xxx.yy"</tt></td><td align="center">for a file with name <em class="replaceable"><tt>xxx</tt></em> and type
   <em class="replaceable"><tt>yy</tt></em></td></tr><tr><td align="center"><tt class="filename">".yy"</tt></td><td align="center">for a pathname with type <em class="replaceable"><tt>yy</tt></em> and no
    name or with name <em class="replaceable"><tt>.yy</tt></em> and no type,
    depending on the value of <a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a>.</td></tr></tbody></table></div><p>Hereby <em class="replaceable"><tt>xxx</tt></em> denotes 1 to 8 characters,
 and <em class="replaceable"><tt>yy</tt></em> denotes 1 to 3 characters, each of
 which being either an alphanumeric character or the underscore
 <span class="keysym">#\_</span>.  Other properties of pathname syntax vary between
 operating systems.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-components"></a>19.1. Pathname Components
   <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html" target="_top">[CLHS-19.2.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></div><p>When a pathname is to be fully specified (no wildcards), that
 means that no <tt class="constant">:WILD</tt>, <tt class="constant">:WILD-INFERIORS</tt> is allowed, no wildcard
 characters are allowed in the strings, and <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> may not
 be allowed either.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-dir-canon"></a>19.1.1. Directory canonicalization.</h3></div></div></div><p>As permitted by the <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> specification, the <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>
 directory component is canonicalized when the pathname is constructed:
 </p><div class="orderedlist"><ol type="1"><li><tt class="filename">""</tt> and
    <tt class="filename">"."</tt> are removed</li><li><tt class="filename">".."</tt>,
    <tt class="filename">"*"</tt>, and <tt class="filename">"**"</tt> are converted
    to <tt class="constant">:UP</tt>, <tt class="constant">:WILD</tt> and <tt class="constant">:WILD-INFERIORS</tt>,
    respectively</li><li>patterns <tt class="filename">foo/../</tt> are
    collapsed</li></ol></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-platform-specific"></a>19.1.2. Platform-specific issues.</h3></div></div></div>
<!--#ifdef PATHNAME_UNIX--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><em class="replaceable"><tt>host</tt></em></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><em class="replaceable"><tt>device</tt></em></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><tt class="code"><em class="replaceable"><tt>directory</tt></em> = (<em class="replaceable"><tt>startpoint</tt></em>
   . <em class="replaceable"><tt>subdirs</tt></em>)</tt></dt><dd><div class="informaltable"><a id="unix-dir-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><em class="replaceable"><tt>startpoint</tt></em></td><td align="center"><tt class="constant">:RELATIVE</tt> | <tt class="constant">:ABSOLUTE</tt></td></tr><tr><td align="center"><em class="replaceable"><tt>subdirs</tt></em></td><td align="center"><tt class="data">()</tt> | <tt class="data">(<em class="replaceable"><tt>subdir</tt></em>
   . <em class="replaceable"><tt>subdirs</tt></em>)</tt></td></tr><tr><td align="center"><em class="replaceable"><tt>subdir</tt></em></td><td align="center"><tt class="constant">:WILD-INFERIORS</tt></td><td align="center"><tt class="filename">**</tt> or
  <tt class="filename">...</tt>, all subdirectories </td></tr><tr><td align="center"><em class="replaceable"><tt>subdir</tt></em></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
   may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><em class="replaceable"><tt>name</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><em class="replaceable"><tt>type</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><em class="replaceable"><tt>version</tt></em></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (may also be specified as <tt class="constant">:WILD</tt> or
   <tt class="constant">:NEWEST</tt>)</dd></dl></div><p>A <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="unix-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center">
  <tt class="filename">"server:sub1.typ/sub2.typ/name.typ"</tt></td></tr><tr><td align="center">using defaults:</td><td align="center">
  <tt class="filename">       "sub1.typ/sub2.typ/name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center">
  <tt class="filename">                         "name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center">
  <tt class="filename">       "sub1.typ/**/sub3.typ/x*.lisp"</tt></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div></dd></dl></div>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><em class="replaceable"><tt>host</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>, wildcard characters may
   occur but do not act as wildcards</dd><dt><em class="replaceable"><tt>device</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <tt class="constant">:WILD</tt> or <tt class="filename">A</tt>|...|<tt class="filename">Z</tt>
 </dd><dt><tt class="code"><em class="replaceable"><tt>directory</tt></em> = (<em class="replaceable"><tt>startpoint</tt></em>
   . <em class="replaceable"><tt>subdirs</tt></em>)</tt></dt><dd><div class="informaltable"><a id="win32-dir-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><em class="replaceable"><tt>startpoint</tt></em></td><td align="center"><tt class="constant">:RELATIVE</tt> | <tt class="constant">:ABSOLUTE</tt></td></tr><tr><td align="center"><em class="replaceable"><tt>subdirs</tt></em></td><td align="center"><tt class="data">()</tt> | <tt class="data">(<em class="replaceable"><tt>subdir</tt></em>
   . <em class="replaceable"><tt>subdirs</tt></em>)</tt></td></tr><tr><td align="center"><em class="replaceable"><tt>subdir</tt></em></td><td align="center"><tt class="constant">:WILD-INFERIORS</tt></td><td align="center"><tt class="filename">**</tt> or
  <tt class="filename">...</tt>, all subdirectories </td></tr><tr><td align="center"><em class="replaceable"><tt>subdir</tt></em></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
   may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><em class="replaceable"><tt>name</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><em class="replaceable"><tt>type</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><em class="replaceable"><tt>version</tt></em></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (may also be specified as <tt class="constant">:WILD</tt> or
   <tt class="constant">:NEWEST</tt>)</dd></dl></div><p>If <em class="replaceable"><tt>host</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <em class="replaceable"><tt>device</tt></em> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>A <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="win32-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center"><tt class="filename">"A:\sub1.typ\sub2.typ\name.typ"</tt></td></tr><tr><td align="center">using defaults:</td><td align="center"><tt class="filename">  "\sub1.typ\sub2.typ\name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">                     "name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">"*:\sub1.typ\**\sub3.typ\x*.lisp"</tt></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div><p>Instead of <tt class="filename">"\"</tt> one may use <tt class="filename">"/"</tt>, as usual for DOS
 calls.</p><p>If <em class="replaceable"><tt>host</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the <em class="replaceable"><tt>directory</tt></em>'s <em class="replaceable"><tt>startpoint</tt></em>
 is not <tt class="constant">:ABSOLUTE</tt>, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a>
 <em class="replaceable"><tt>pathname</tt></em>))</tt> will not be the same as <em class="replaceable"><tt>pathname</tt></em>.</p></dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
    platforms only.</dt><dd>The wildcard characters: <tt class="filename">"*"</tt> matches any
 sequence of characters, <tt class="filename">"?"</tt> matches any one character.
 </dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT--><p><a id="name-type-split"></a><b>Name/type namestring split. </b></p><div class="variablelist"><dl><dt>Platform dependent:  <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><p>A filename is split into name and type according to the
 following rule: </p><div class="itemizedlist"><ul type="disc"><li>if there is no <tt class="filename">"."</tt> in the filename, then the
   <em class="replaceable"><tt>name</tt></em> is everything, <em class="replaceable"><tt>type</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>;</li><li>if there is a <tt class="filename">"."</tt>, then <em class="replaceable"><tt>name</tt></em> is the part
   before and <em class="replaceable"><tt>type</tt></em> the part after the last dot.</li><li><p>if the only <tt class="filename">"."</tt> is the first character, then
   the behavior depends on the value of the user variable
    <strong class="first"><em class="firstterm"><a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a></em></strong>
   which can be either
   </p><div class="variablelist"><dl><dt><tt class="constant">:TYPE</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt>name</tt></em>, everything after the <tt class="filename">"."</tt>
     is the <em class="replaceable"><tt>type</tt></em>; or</dd><dt><tt class="constant">:NAME</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt>type</tt></em>, everything is the
     <em class="replaceable"><tt>name</tt></em></dd></dl></div><p>
   </p></li></ul></div><p>Due to this name/type splitting rule, there are pathnames that
 cannot result from <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a>.
 To get a pathname whose type contains a dot or whose name contains a
 dot and whose type is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> must be used.  Example:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> <tt class="constant">:NAME</tt> "foo.bar")</tt>.
 </p></dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="unspecific"></a>19.2. :UNSPECIFIC as a Component Value
 <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-2-2-3.html" target="_top">[CLHS-19.2.2.2.3]</a></h2></div></div></div><p>The symbol <tt class="constant">:UNSPECIFIC</tt> is not permitted as a
 pathname component for any slot of any pathname.
 It is also illegal to pass it as an argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a>.</p><p>The only use for <tt class="constant">:UNSPECIFIC</tt> is that it is
 returned by <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-_name-version.html" target="_top"><tt class="function">PATHNAME-DEVICE</tt></a> for <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>s, as required by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_19-3-2-1.html" target="_top">[CLHS-19.3.2.1] Unspecific
  Components of a Logical Pathname</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-external-notation"></a>19.3. External notation.</h2></div></div></div><p>External notation of pathnames (cf. <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a>), of course without spaces, [,],{,}:</p><div class="variablelist">
<!--#ifdef PATHNAME_UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><div class="informaltable"><a id="unix-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ <tt class="filename">"/"</tt> ]</td><td align="center"><tt class="filename">"/"</tt> denotes absolute pathnames</td></tr><tr><td align="center">{ <em class="replaceable"><tt>name</tt></em> <tt class="filename">"/"</tt> }</td><td align="center">each one a subdirectory</td></tr><tr><td align="center">[ <em class="replaceable"><tt>name</tt></em> [<tt class="filename">"."</tt> <em class="replaceable"><tt>type</tt></em>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
 (consisting of printing <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters, except <tt class="filename">"/"</tt>).</p></dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32--><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="informaltable"><a id="win32-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ [<em class="replaceable"><tt>drivespec</tt></em>] : ]</td><td align="center">a letter <tt class="filename">"*"</tt>|<tt class="filename">a</tt>|...|<tt class="filename">z</tt>|<tt class="filename">A</tt>|...|<tt class="filename">Z</tt></td></tr><tr><td align="center">{ <em class="replaceable"><tt>name</tt></em> [. <em class="replaceable"><tt>type</tt></em>] \ }</td><td align="center">each one a subdirectory, <tt class="filename">"\"</tt> may be
     replaced by <tt class="filename">"/"</tt></td></tr><tr><td align="center">[ <em class="replaceable"><tt>name</tt></em> [. <em class="replaceable"><tt>type</tt></em>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
 (consisting of printing <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters, except <tt class="filename">"/"</tt>,
 <tt class="filename">"\"</tt>, <tt class="filename">":"</tt>).</p></dd>
<!--#endif-->
</dl></div>
<!--#if !defined(USER_HOMEDIR)--><div class="variablelist"><dl><dt>Platform dependent: unknown platforms only.</dt><dd>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_user-homedir-pathname.html" target="_top"><tt class="function">USER-HOMEDIR-PATHNAME</tt></a> is not implemented.
</dd></dl></div>
<!--#endif-->
</div>
<!--#ifdef LOGICAL_PATHNAMES--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="log-path"></a>19.4. Logical Pathnames
  <a href="http://www.lisp.org/HyperSpec/Body/sec_19-3.html" target="_top">[CLHS-19.3]</a></h2></div></div></div><p>No notes.</p></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="filename-dict"></a>19.5. The Filenames Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html" target="_top">[CLHS-19.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a></span></dt></dl></div><p><a id="path-des"></a><b>Pathname Designators. </b>When <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> is also treated as a
  <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pathname_designator" target="_top">pathname
   designator</a>, namely its <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><tt class="function">SYMBOL-NAME</tt></a> is converted to the
  operating system's preferred pathname case.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a> always returns a physical pathname.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a> does not interpret missing components as
  wild.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="translate-pathname"></a>19.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a> accepts three additional keyword arguments:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a> <em class="replaceable"><tt>source</tt></em>
 <em class="replaceable"><tt>from-wildname</tt></em>
 <em class="replaceable"><tt>to-wildname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:ALL</tt>
 <tt class="constant">:MERGE</tt> <tt class="constant">:ABSOLUTE</tt>)</tt></p><p>If <tt class="constant">:ALL</tt> is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a list of all resulting
 pathnames, corresponding to all matches of <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a>
  <em class="replaceable"><tt>source</tt></em> <em class="replaceable"><tt>from-wildname</tt></em>)</tt>, is
 returned.</p><p>If <tt class="constant">:MERGE</tt> is specified and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, unspecified pieces of
 <em class="replaceable"><tt>to-pathname</tt></em> are not replaced by
 corresponding pieces of <em class="replaceable"><tt>source</tt></em>.</p><p>If <tt class="constant">:ABSOLUTE</tt> is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the returned
 pathnames are converted to absolute by merging in the current process'
 directory, therefore rendering pathnames suitable for the OS and
 external programs.  So, to pass a pathname to an external program, you
 do <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a> <em class="replaceable"><tt>pathname</tt></em>
 #p"" #p"" <tt class="constant">:ABSOLUTE</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>))</tt> or <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a>
 (<a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a> <em class="replaceable"><tt>pathname</tt></em>))</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="translate-logpath"></a>19.5.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html" target="_top"><tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html" target="_top"><tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a> accepts an additional keyword
 argument <tt class="constant">:ABSOLUTE</tt>, similar to
 <a href="impnotes.html#translate-pathname" class="olink">Section 19.5.1, “Function TRANSLATE-PATHNAME”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="parsename"></a>19.5.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
   <em class="replaceable"><tt>host</tt></em> <em class="replaceable"><tt>defaults</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>start</tt></em> <em class="replaceable"><tt>end</tt></em>
   <em class="replaceable"><tt>junk-allowed</tt></em>)</tt>
 returns a logical pathname only if <em class="replaceable"><tt>host</tt></em> is a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#logical_host" target="_top">logical host</a>
 or <em class="replaceable"><tt>host</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <em class="replaceable"><tt>defaults</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>.
 To construct a logical pathname from a string, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><tt class="function">LOGICAL-PATHNAME</tt></a> can be used.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior of recognizing logical pathnames when
 the <em class="replaceable"><tt>string</tt></em> begins with some alphanumeric characters followed by a
 colon (<span class="keysym">#\:</span>) can be very confusing
 (cf. <tt class="filename">"c:/autoexec.bat"</tt>,
 <tt class="filename">"home:.clisprc"</tt> and
 <tt class="filename">"prep:/pub/gnu"</tt>)
 and therefore is disabled by default. To enable the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior,
 you should set <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
 Note that this also disables treating <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s as <a href="#path-des">pathname designator</a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathmerge"></a>19.5.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> <em class="replaceable"><tt>pathname</tt></em>
   [<em class="replaceable"><tt>default-pathname</tt></em>])</tt> returns a
   logical pathname only if
 <em class="replaceable"><tt>default-pathname</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>.
 To construct a logical pathname from a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><tt class="function">LOGICAL-PATHNAME</tt></a> can be used.</p><p>When both <em class="replaceable"><tt>pathname</tt></em> and <em class="replaceable"><tt>default-pathname</tt></em>
 are relative pathnames, the behavior depends on <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>: when it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, then <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> retains its traditional behavior:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt>
 evaluates to <tt class="filename">#P"x/"</tt></p><p><b>Rationale. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> is used to specify default components for
 pathnames, so there is some analogy between
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b)</tt> and
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b)</tt>.  Obviously, putting in the
 same default a second time should do the same as putting it in once:
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b b)</tt> is the same as <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b)</tt>, so
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b) b)</tt>
 should be the same as <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b)</tt>.
</p><p>(This question actually does matter because in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> there is no
 distinction between “<span class="quote">pathnames with defaults merged-in</span>” and
 “<span class="quote">pathnames with defaults not yet applied</span>”.)</p><p>Now, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")
  #P"y/")</tt> and <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt> are
 <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a> in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> (when <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>), but not in
 implementations that strictly follow the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] spec.  In fact, the
 above twice-default = once-default rule holds for all pathnames in
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p>Conversely, when <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the normal [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 behavior is exhibited: <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt>
 evaluates to <tt class="filename">#P"y/x/"</tt>.</p><p><b>Rationale. </b>“<span class="quote">merge</span>” is <span class="emphasis"><em>merge</em></span> and
 not <span class="emphasis"><em>or</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="load-lpt"></a>19.5.5. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></h3></div></div></div><p>When the <em class="replaceable"><tt>host</tt></em> argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a>
is not a defined logical host yet, we proceed as follows:
</p><div class="orderedlist"><ol type="1"><li>If both <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s
  <tt class="envar">LOGICAL_HOST_<em class="replaceable"><tt>host</tt></em>_FROM</tt> and
  <tt class="envar">LOGICAL_HOST_<em class="replaceable"><tt>host</tt></em>_TO</tt> exist, then their values
  define the map of the <em class="replaceable"><tt>host</tt></em>.</li><li>If the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>
  <tt class="envar">LOGICAL_HOST_<em class="replaceable"><tt>host</tt></em></tt> exists, its value is read from,
  and the result is passed to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a>)</tt>.</li><li>Variable <a href="impnotes.html#load-lpt" class="olink"><tt class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</tt></a> is consulted.
  Its value should be a list of files and/or directories,
  which are searched for in the <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>, just like for <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>.
  When the element is a file, it is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> from,
  <a href="http://www.franz.com/support/documentation/6.0/doc/pathnames.htm#load-logical-pathname-translations-2" target="_top">Allegro CL-style</a>,
  odd objects being host names and even object being their
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a>.
  When the element is a directory, a file, named <tt class="filename"><em class="replaceable"><tt>host</tt></em></tt>
  or <tt class="filename"><em class="replaceable"><tt>host</tt></em>.host</tt>, in that directory, is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a>
  from once, <a href="http://cvs2.cons.org/ftp-area/cmucl/doc/cmu-user/extensions.html#logical-pathnames" target="_top">CMUCL-style</a>,
  the object read being the <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a> of the
  <em class="replaceable"><tt>host</tt></em>.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="absolute-pathname"></a>19.5.6. Function <a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a></h3></div></div></div><p><tt class="code">(<a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><tt class="function">EXT:ABSOLUTE-PATHNAME</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt> converts the <em class="replaceable"><tt>pathname</tt></em>
 to a physical pathname, then - if its directory component is not
 absolute - converts it to an absolute pathname, by merging in the
 current process' directory. This is like <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><tt class="function">TRUENAME</tt></a>, except that it
 does not verify that a file named by the <em class="replaceable"><tt>pathname</tt></em> exists, not even that
 its directory exists. It does no filesystem accesses, except to
 determine the current directory. This function is useful when you want
 to save a pathname over time, or pass a pathname to an external
 program.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="files"></a>Chapter 20. Files
   <a href="http://www.lisp.org/HyperSpec/Body/chap-20.html" target="_top">[CLHS-20]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="file-dict"></a>20.1. The Files Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html" target="_top">[CLHS-20.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></div><p><a id="probe-file"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a> cannot be used to check whether a directory exists.
 Use functions <a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> for this.</p><p><a id="file-author"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><tt class="function">FILE-AUTHOR</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><tt class="function">FILE-AUTHOR</tt></a> always returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, because the operating systems
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is ported to do not store a file's author in the file system.
 Some operating systems, such as <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, have the notion of a file's
 owner, and some other <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations return the user name of the
 file owner.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not do this, because
 <span class="emphasis"><em>owner</em></span> and <span class="emphasis"><em>author</em></span> are not the
 same; in particular, authorship is preserved by copying, while
 ownership is not.</p><p><a id="probe-dir"></a><b>Function <a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a>. </b><tt class="code">(<a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt> tests whether <em class="replaceable"><tt>pathname</tt></em> exists
 and is a directory.
 It will, unlike <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><tt class="function">TRUENAME</tt></a>, not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
 if the parent directory of <em class="replaceable"><tt>pathname</tt></em> does not exist.</p><p><a id="del-file"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><tt class="function">DELETE-FILE</tt></a>. </b><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><tt class="function">DELETE-FILE</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt> deletes the pathname
 <em class="replaceable"><tt>pathname</tt></em>, not its <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><tt class="function">TRUENAME</tt></a>, and returns the absolute pathname it
 actually removed or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <em class="replaceable"><tt>pathname</tt></em> did not exist.
 When <em class="replaceable"><tt>pathname</tt></em> points to a file which is currently open in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>,
 an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dir"></a>20.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  :FULL :CIRCLE <tt class="constant">:IF-DOES-NOT-EXIST</tt>)</tt> can run in two modes:
</p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><tt>pathname</tt></em> contains no name or type component, a
  list of all matching directories is produced.
  E.g., <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "/etc/*/")</tt> lists
  all subdirectories in the directory
  <tt class="filename">#P"/etc/"</tt>.</li><li>Otherwise a list of all matching files is returned.
  E.g., <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "/etc/*")</tt> lists all
  regular files in the directory <tt class="filename">#P"/etc/"</tt>.
  If the <tt class="constant">:FULL</tt> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
  additional information is returned: for each matching file you get a
  list of at least four elements <tt class="data">(<em class="replaceable"><tt>file-pathname</tt></em>
  <em class="replaceable"><tt>file-truename</tt></em>
  <em class="replaceable"><tt>file-write-date-as-decoded-time</tt></em>
  <em class="replaceable"><tt>file-length</tt></em>)</tt>.</li></ul></div><p>

If you want <span class="emphasis"><em>all</em></span> the files <span class="emphasis"><em>and</em></span>
subdirectories in the current directory, you should use
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "*/") (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "*"))</tt>.
If you want all the files and subdirectories in all the subdirectories
under the current directory
(similar to the <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/ls.html" target="_top"><span><strong class="command">ls</strong></span></a> <tt class="option">-R</tt> <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> command),
use <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "**/") (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "**/*"))</tt>.


<!--#ifdef UNIX-->
</p><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>If the <tt class="constant">:CIRCLE</tt> argument is
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the function avoids endless loops that may result from
 symbolic links.</dd></dl></div><p>

<!--#endif-->


The argument <tt class="constant">:IF-DOES-NOT-EXIST</tt> controls the treatment of links
pointing to non-existent files and can take the following values:
</p><div class="variablelist"><dl><dt><tt class="constant">:DISCARD</tt> (default)</dt><dd>discard the bad directory entries
</dd><dt><tt class="constant">:ERROR</tt></dt><dd>an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led on bad directory entries
   (this corresponds to the default behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> in <a href="http://www.cons.org/cmucl/" target="_top"><span><strong class="command">CMU CL</strong></span></a>)
</dd><dt><tt class="constant">:KEEP</tt></dt><dd>keep bad directory entries in the returned list
   (this roughly corresponds to the <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a>
    ... <tt class="constant">:TRUNAMEP</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)</tt> call in <a href="http://www.cons.org/cmucl/" target="_top"><span><strong class="command">CMU CL</strong></span></a>)
</dd><dt><tt class="constant">:IGNORE</tt></dt><dd>Similar to <tt class="constant">:DISCARD</tt>, but also
   do not signal an error when a directory is unaccessible (contrary to
   the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] specification).</dd></dl></div><p>

</p><p><b>Function <tt class="function">EXT:DIR</tt>. </b><tt class="code">(<tt class="function">EXT:DIR</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <em class="replaceable"><tt>pathname</tt></em>)</tt> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a>, but displays the pathnames
 instead of returning them. <tt class="code">(EXT:DIR)</tt>
 shows the contents of the current directory.</p><p><a id="cd"></a><b>Function <a href="#cd"><tt class="function">EXT:CD</tt></a>. </b><tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt> sets it, <tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a>)</tt> returns it.
</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a> [<em class="replaceable"><tt>pathname</tt></em>])</tt>
   manages the current directory.</dd>
<!--#else--><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a> [<em class="replaceable"><tt>pathname</tt></em>])</tt>
   manages the current device and the current directory.
   </dd>
<!--#endif-->
</dl></div><p><b>Function <tt class="function">EXT:DEFAULT-DIRECTORY</tt>. </b><tt class="code">(<tt class="function">EXT:DEFAULT-DIRECTORY</tt>)</tt> is
 equivalent to <tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a>)</tt>.
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:DEFAULT-DIRECTORY</tt>)
 <em class="replaceable"><tt>pathname</tt></em>)</tt> is equivalent to <tt class="code">(<a href="#cd"><tt class="function">EXT:CD</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt>,
 except for the return value.</p><p><b>Function <tt class="function">EXT:MAKE-DIR</tt>. </b><tt class="code">(<tt class="function">EXT:MAKE-DIR</tt>
 <em class="replaceable"><tt>directory-pathname</tt></em>)</tt>
 creates a new subdirectory.</p><p><b>Function <tt class="function">EXT:DELETE-DIR</tt>. </b><tt class="code">(<tt class="function">EXT:DELETE-DIR</tt>
 <em class="replaceable"><tt>directory-pathname</tt></em>)</tt> removes an
 (empty) subdirectory.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="streams"></a>Chapter 21. Streams
   <a href="http://www.lisp.org/HyperSpec/Body/chap-21.html" target="_top">[CLHS-21]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  <tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt>
    and
  <tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt>
   </a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="streams-interactive"></a>21.1. Interactive Streams
 <a href="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html" target="_top">[CLHS-21.1.1.1.3]</a></h2></div></div></div><p>Interactive streams are those whose next input might depend on a
 prompt one might output.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="terminal"></a>21.2. Terminal interaction.</h2></div></div></div>
<!--#ifdef GNU_READLINE--><div class="variablelist"><a id="readline"></a><p class="title"><b><a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a></b></p><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only,
   and only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <strong>without</strong> compile-time flag <strong><tt class="option">NO_READLINE</tt></strong>
   (and when <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> is installed on your machine already).</dt><dd><p>Input through <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> uses the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a>
  library.  Arrow keys can be used to move within the input history.
  The <span class="keysym">#\Tab</span> key completes the <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> name or
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a> that is being typed.
  See <a href="http://cnswww.cns.cwru.edu/~chet/readline/rluserman.html" target="_top">readline user manual</a> for general details and
  <a href="clisp.html#clisp" class="olink">clisp(1)</a> for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific
  extensions.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library is <strong>not</strong> used if standard
    input and standard output do not both refer to the same terminal.
    In some exotic cases, e.g., when running under <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> in
    an <span><strong class="command">rxvt</strong></span> window under <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a>, this may be
    determined incorrectly.</p></div></dd></dl></div>
<!--#endif-->
<!--#if defined(KEYBOARD)--><div class="variablelist"><p class="title"><b>Macro <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a></b></p><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> is not the only stream that
 communicates directly with the user: During execution of the body of a
 <tt class="code">(<a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> . <em class="replaceable"><tt>body</tt></em>)</tt> form,
 <strong class="first"><em class="firstterm"><a href="impnotes.html#terminal" class="olink"><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a></em></strong> is the <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that reads the
 keystrokes from the keyboard.
 It returns every keystroke in detail as an <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> with the
 following bits:
</p><div class="variablelist">
<!--#ifdef WIN32--><dl><dt><tt class="constant">:hyper</tt></dt><dd><span class="emphasis"><em>(Platform dependent:
   <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span>
   if a non-standard key.  These keys are:

<!--#ifdef WIN32-->
   <span class="emphasis"><em>[<a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>]:</em></span>
   Function keys, cursor keypads, numeric keypad.

<!--#endif-->

   </dd>
<!--#endif--><dt>slot <em class="replaceable"><tt>key</tt></em></dt><dd><p>the key name, for non-standard keys:
      </p><div class="variablelist">
<!--#if defined(UNIX) || defined(WIN32)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
         platforms only.</dt><dd><div class="informaltable"><a id="unix-kbd-keys"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><span class="keycode">F1</span>..<span class="keycode">F12</span></td><td align="center"><tt class="constant">:F1</tt>..<tt class="constant">:F12</tt>
         </td></tr><tr><td align="center"><span class="keycode">Insert</span></td><td align="center"><tt class="constant">:Insert</tt></td></tr><tr><td align="center"><span class="keycode">Delete</span></td><td align="center"><tt class="constant">:Delete</tt></td></tr><tr><td align="center"><span class="keycode">Home</span></td><td align="center"><tt class="constant">:Home</tt></td></tr><tr><td align="center"><span class="keycode">End</span></td><td align="center"><tt class="constant">:End</tt></td></tr><tr><td align="center"><span class="keycode">Center</span></td><td align="center"><tt class="constant">:Center</tt></td></tr><tr><td align="center"><span class="keycode">PgUp</span></td><td align="center"><tt class="constant">:PgUp</tt></td></tr><tr><td align="center"><span class="keycode">PgDn</span></td><td align="center"><tt class="constant">:PgDn</tt></td></tr><tr><td align="center">Arrow keys</td><td align="center"><tt class="constant">:Left</tt><tt class="constant">:Right</tt>
         <tt class="constant">:Up</tt><tt class="constant">:Down</tt></td></tr></tbody></table></div></dd>
<!--#endif-->
</dl></div></dd><dt>slot <em class="replaceable"><tt>char</tt></em></dt><dd>the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> code for standard keys
    </dd>
<!--#ifdef WIN32--><dt><tt class="constant">:super</tt></dt><dd><span class="emphasis"><em>(Platform dependent:
     <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span>
  if pressed together with <span><strong class="keycap">Shift</strong></span> key(s) and if the keystroke would
  have been an other without <span><strong class="keycap">Shift</strong></span>.</dd>
<!--#endif--><dt><tt class="constant">:control</tt></dt><dd>if pressed together with the <span><strong class="keycap">Control</strong></span> key.
   </dd>
<!--#ifdef WIN32--><dt><tt class="constant">:meta</tt></dt><dd><span class="emphasis"><em>(Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
    platforms only.)</em></span> if pressed together with the <span><strong class="keycap">Alternate</strong></span> key.
  </dd>
<!--#endif-->
</dl></div><p>
 This keyboard input is not echoed on the screen.  During execution of a
 <tt class="code">(<a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> . <em class="replaceable"><tt>body</tt></em>)</tt> form, no input from
 <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> or any synonymous stream should be requested.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Since <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> is <strong>not</strong> a subtype of
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> on <a href="impnotes.html#terminal" class="olink"><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a> is illegal.</p></div></dd></dl></div>
<!--#endif-->
<p>See also <a href="#screen" title="31.1.&#xA0;Random Screen Access">Section 31.1, “Random Screen Access”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="stream-dict"></a>21.3. The Streams Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html" target="_top">[CLHS-21.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  <tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt>
    and
  <tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt>
   </a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-eltype"></a>21.3.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bin-stdio">21.3.1.1. Binary input from <tt class="varname">*STANDARD-INPUT*</tt></a></span></dt></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able. The <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s created by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>, <a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-INPUT-STREAM</tt></a>
  <a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a>, <a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>, <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a>, <a href="#so-connect"><tt class="function">SOCKET:SOCKET-CONNECT</tt></a>
  can be modified, if the old and the new <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>s are either
</p><div class="itemizedlist"><ul type="disc"><li>both equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or
      <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>; or</li><li>both equivalent to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt> or
      <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt>, with the same <em class="replaceable"><tt>n</tt></em>.</li></ul></div><p>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> and <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt> are <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>s, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bin-stdio"></a>21.3.1.1. Binary input from <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a></h4></div></div></div><p>Note that you cannot change <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> for some
 built-in streams, such as <a href="#terminal" title="21.2.&#xA0;Terminal interaction.">terminal streams</a>,
 which is normally the value of <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>.
 Since <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a> normally is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a> pointing
 to <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>, you cannot use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> in the it.</p><p>Since <a href="http://hoohoo.ncsa.uiuc.edu/cgi/" target="_top">CGI</a>
 (Common Gateway Interface) provides the form data for
 <span><strong class="command">METHOD="POST"</strong></span> on the stdin,
 and the server will <strong>not</strong> send you an <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> on the end of the data,
 you will need to use
 <tt class="code">(<a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> <tt class="envar">"CONTENT_LENGTH"</tt>)</tt>
 to determine how much data you should read from stdin.
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will detect that stdin is not a terminal and create a regular
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a> which can be passed to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((buf (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><tt class="function">PARSE-INTEGER</tt></a> (<a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> "CONTENT_LENGTH"))
                       :element-type '<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>)))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a> (in (<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> <tt class="constant">:INPUT</tt> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> '<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>))
    (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a> buf in))
  buf)
</pre></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-stream"></a>21.3.2. Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a></h3></div></div></div><p>Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> creates a Lisp stream out of an OS file
 handle: <tt class="code">(<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> <em class="replaceable"><tt>object</tt></em> <tt class="constant">:DIRECTION</tt>
  <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></p><p><em class="replaceable"><tt>object</tt></em> designates an OS handle (a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>),
 and should be one of the following:
 </p><div class="variablelist"><dl><dt>number</dt><dd>denotes the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a> of this value
  </dd><dt><tt class="constant">:INPUT</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard input
  </dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard output
  </dd><dt><tt class="constant">:ERROR</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard error
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a></dt><dd>denotes the handle of this stream, which should be
    a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a> or a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>
  </dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="make-stream-warn-buffering"></a>Beware of buffering!</h3><p>When there are several Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s backed by the same OS
  file handle, the behavior may be highly confusing when some of the
  Lisp streams are <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>.  Use <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FORCE-OUTPUT</tt></a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s,
  and <a href="#bulk-io" title="21.3.5.&#xA0;Bulk Input and Output">bulk input</a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s.</p></div><p>The handle is duplicated (with <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html" target="_top"><tt class="function">dup/dup2</tt></a>), so it is safe to <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> returned by <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-input"></a>21.3.3. Binary input, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>,
  <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> &amp; <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-FLOAT</tt></a></h3></div></div></div><p>The function <tt class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> <em class="replaceable"><tt>stream</tt></em>
    <em class="replaceable"><tt>element-type</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><em class="replaceable"><tt>ENDIANNESS</tt></em></a> <em class="replaceable"><tt>eof-error-p</tt></em> <em class="replaceable"><tt>eof-value</tt></em>)</tt>
 reads a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> from <em class="replaceable"><tt>stream</tt></em>.
 <em class="replaceable"><tt>stream</tt></em> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 <em class="replaceable"><tt>element-type</tt></em> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt>,
 where <em class="replaceable"><tt>n</tt></em> is a multiple of 8.</p><p><tt class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>element-type</tt></em>)</tt> is like
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt> if <em class="replaceable"><tt>stream</tt></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> were set to <em class="replaceable"><tt>element-type</tt></em>,
 except that <em class="replaceable"><tt>stream</tt></em>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> will increase by
 <sup><em class="replaceable"><tt>n</tt></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>, this
 function permits mixed character/binary input from a stream.</p><p>The function <tt class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-FLOAT</tt></a> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>element-type</tt></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><em class="replaceable"><tt>ENDIANNESS</tt></em></a> <em class="replaceable"><tt>eof-error-p</tt></em> <em class="replaceable"><tt>eof-value</tt></em>)</tt> reads a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation from
 <em class="replaceable"><tt>stream</tt></em>.  <em class="replaceable"><tt>stream</tt></em> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.  <em class="replaceable"><tt>element-type</tt></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>.</p><p><a id="endianness"></a><b>Endianness. </b><a href="#endianness"><em class="replaceable"><tt>ENDIANNESS</tt></em></a> can be <tt class="constant">:LITTLE</tt>
 or <tt class="constant">:BIG</tt>.  The default is
 <tt class="constant">:LITTLE</tt>, which corresponds to the <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>
 behavior in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-output"></a>21.3.4. Binary output, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a>,
  <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a> &amp; <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-FLOAT</tt></a></h3></div></div></div><p>The function <tt class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a> <em class="replaceable"><tt>integer</tt></em> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>element-type</tt></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><em class="replaceable"><tt>ENDIANNESS</tt></em></a>)</tt> writes a multi-byte integer to
 <em class="replaceable"><tt>stream</tt></em>.  <em class="replaceable"><tt>stream</tt></em> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.  <em class="replaceable"><tt>element-type</tt></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt>, where <em class="replaceable"><tt>n</tt></em> is a multiple of 8.</p><p><tt class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a> <em class="replaceable"><tt>integer</tt></em> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>element-type</tt></em>)</tt> is
 like <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a> <em class="replaceable"><tt>integer</tt></em> <em class="replaceable"><tt>stream</tt></em>)</tt> if <em class="replaceable"><tt>stream</tt></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> were set to <em class="replaceable"><tt>element-type</tt></em>, except that <em class="replaceable"><tt>stream</tt></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> will increase by
 <sup><em class="replaceable"><tt>n</tt></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>, this
  function permits mixed character/binary output to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.</p><p>The function <tt class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-FLOAT</tt></a> <em class="replaceable"><tt>float</tt></em>
  <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>element-type</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><em class="replaceable"><tt>ENDIANNESS</tt></em></a>)</tt> writes a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation to
 <em class="replaceable"><tt>stream</tt></em>.  <em class="replaceable"><tt>stream</tt></em> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.  <em class="replaceable"><tt>element-type</tt></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bulk-io"></a>21.3.5. Bulk Input and Output</h3></div></div></div><p><a id="read-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a>, the following two
 functions are provided:
</p><div class="variablelist"><dl><dt><a id="rd-by-seq"></a><a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> operations:</dt><dd><p><tt class="code">(<a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a> <em class="replaceable"><tt>sequence</tt></em>
   <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt> :NO-HANG :INTERACTIVE)</tt>
   fills the subsequence of <em class="replaceable"><tt>sequence</tt></em> specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt>
   with <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s consecutively read from <em class="replaceable"><tt>stream</tt></em>.  It returns the
   index of the first element of <em class="replaceable"><tt>sequence</tt></em> that was not updated (=
   <em class="replaceable"><tt>end</tt></em> or &lt; <em class="replaceable"><tt>end</tt></em> if the <em class="replaceable"><tt>stream</tt></em> reached its end).
   When <em class="replaceable"><tt>no-hang</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, it does not block: it treats input
   unavailability as <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>. When <em class="replaceable"><tt>no-hang</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <em class="replaceable"><tt>interactive</tt></em> is
   non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, it can block for reading the first byte but does not block
   for any further bytes.</p><p>This function is especially efficient if <em class="replaceable"><tt>sequence</tt></em> is a
   <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> and <em class="replaceable"><tt>stream</tt></em> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>
   with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 </p></dd><dt><a id="rd-ch-seq"></a><a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> operations:</dt><dd><p><tt class="code">(<a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a> <em class="replaceable"><tt>sequence</tt></em> <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt> fills the subsequence of <em class="replaceable"><tt>sequence</tt></em>
   specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with characters consecutively read
   from <em class="replaceable"><tt>stream</tt></em>.  It returns the index of the first element of
   <em class="replaceable"><tt>sequence</tt></em> that was not updated (= <em class="replaceable"><tt>end</tt></em> or &lt; <em class="replaceable"><tt>end</tt></em> if the
   <em class="replaceable"><tt>stream</tt></em> reached its end).</p><p>This function is especially efficient if <em class="replaceable"><tt>sequence</tt></em> is a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and <em class="replaceable"><tt>stream</tt></em> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a>.
 </p></dd></dl></div><p><a id="write-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>, the following two
functions are provided:
</p><div class="variablelist"><dl><dt><a id="wr-by-seq"></a><a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a> operations:</dt><dd><p><tt class="code">(<a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> <em class="replaceable"><tt>sequence</tt></em> <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  <tt class="constant">:START</tt> <tt class="constant">:END</tt> :NO-HANG)</tt> outputs the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s of the
  subsequence of <em class="replaceable"><tt>sequence</tt></em> specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to
  <em class="replaceable"><tt>stream</tt></em>.  When <tt class="constant">:NO-HANG</tt> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, does not
  block.  Returns two values: <em class="replaceable"><tt>sequence</tt></em> and the index of the first
  byte that was not output.</p><p>This function is especially efficient if <em class="replaceable"><tt>sequence</tt></em> is a
  <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> and <em class="replaceable"><tt>stream</tt></em> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.</p></dd><dt><a id="wr-ch-seq"></a><a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a>
  performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a> operations:</dt><dd><p><tt class="code">(<a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> <em class="replaceable"><tt>sequence</tt></em> <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt> outputs the characters of the subsequence of
  <em class="replaceable"><tt>sequence</tt></em> specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <em class="replaceable"><tt>stream</tt></em>.
  Returns the <em class="replaceable"><tt>sequence</tt></em> argument.</p><p>This function is especially efficient if <em class="replaceable"><tt>sequence</tt></em> is a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and <em class="replaceable"><tt>stream</tt></em> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p></dd></dl></div><p><a id="bulk-io-rationale"></a><b>Rationale. </b>The rationale for <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>, <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>, <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> and
 <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> is that some <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s support both character and binary
 i/o, and when you read into a <a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><tt class="classname">SEQUENCE</tt></a> that can hold both (e.g.,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>) you cannot determine which kind of
 input to use.  In such situation <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>, while <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>, <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>, <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> and
 <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> work just fine.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="non-block-io"></a>21.3.6. Non-Blocking Input and Output</h3></div></div></div><p>In addition to the standard functions <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a>, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</p><div class="variablelist"><dl><dt><a id="rcwhp"></a><tt class="code">(<a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p><a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> queries the stream's input status.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html" target="_top"><tt class="function">PEEK-CHAR</tt></a> with a
  <em class="replaceable"><tt>peek-type</tt></em> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> will return immediately.
  Otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.  (In the latter case the standard
  <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> function would return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.)</p><p>Note the difference with <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><tt class="function">NOT</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>
  <em class="replaceable"><tt>stream</tt></em>))</tt>: When the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> returns
  <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, whereas <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>Note also that <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> is not a good way to test for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>:
  If <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, this does not mean that the <em class="replaceable"><tt>stream</tt></em> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <em class="replaceable"><tt>stream</tt></em> is already at <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>, or will deliver
  more characters.</p></dd><dt><a id="rbla"></a><tt class="code">(<a href="#rbla"><tt class="function">EXT:READ-BYTE-LOOKAHEAD</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> result.
   Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is already known to be reached.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
   instead of waiting.</dd><dt><a id="rbwhp"></a><tt class="code">(<a href="#rbwhp"><tt class="function">EXT:READ-BYTE-WILL-HANG-P</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> will return immediately.
   Otherwise it returns true.</dd><dt><a id="rbnh"></a><tt class="code">(<a href="#rbnh"><tt class="function">EXT:READ-BYTE-NO-HANG</tt></a> <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
    <em class="replaceable"><tt>eof-error-p</tt></em> <em class="replaceable"><tt>eof-value</tt></em>)</tt></dt><dd>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or does <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> handling, like <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>,
   if that would return immediately.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
   instead of waiting.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-pos"></a>21.3.7. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> works on any <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>.</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY!= 0))--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd>When a <span class="keysym">#\Newline</span> is output to (respectively input from)
  a file stream, its file position is increased by 2 since <span class="keysym">#\Newline</span> is
  encoded as <span class="keycode">CR</span>/<span class="keycode">LF</span> in the file.
</dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open"></a>21.3.8. Function  <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a> cannot handle files of size ≥ 4 GB.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a> accepts an additional keyword <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>.</p><div class="variablelist"><p class="title"><b>The acceptable values for the arguments to the
   <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> functions</b></p><dl><dt><a id="eltype"></a><a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a></dt><dd><p>types equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or
    <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt>; if the stream is to be
    un<a href="#buffered"><tt class="constant">:BUFFERED</tt></a>, <em class="replaceable"><tt>n</tt></em> must be a multiple of 8.</p><p>If <em class="replaceable"><tt>n</tt></em> is not a multiple of 8, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <em class="replaceable"><tt>n</tt></em>-bit bytes) in the preamble.</p><p>This is done to ensure the input/output consistency:
    suppose you open a file with <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> of <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 3)</tt> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </p></dd><dt><a id="extfmt"></a><a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a></dt><dd><a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>s, (constant) <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s in the
   <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s (denoting <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>-based
   encodings), the symbol <tt class="constant">:DEFAULT</tt>, and the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> keywords
   <tt class="constant">:UNIX</tt>, <tt class="constant">:MAC</tt>, <tt class="constant">:DOS</tt>.  The default encoding is <a href="impnotes.html#def-file-enc" class="olink"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>.
    This argument determines how the lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> data is
   converted to/from the 8-bit bytes that the underlying OS uses.
  </dd><dt><a id="buffered"></a><a href="#buffered"><tt class="constant">:BUFFERED</tt></a></dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, or <tt class="constant">:DEFAULT</tt>.
    Have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  </p><div class="itemizedlist"><ul type="disc"><li>for functions that create <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s and
    <a href="#pipe" title="31.8.2.&#xA0;Pipes">pipes</a>, <tt class="constant">:DEFAULT</tt> is equivalent to
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; it you are transmitting a lot of data then using buffering
    will significantly speed up your i/o;</li><li>for functions that <a href="#open" title="21.3.8.&#xA0;Function  OPEN">open</a>
    files, <tt class="constant">:DEFAULT</tt> means that buffered file streams will be returned
    for regular files and (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>) block-devices, and unbuffered file
    streams for special files.</li></ul></div><p>
  Note that some files, notably those on the <tt class="filename">/proc</tt>
  filesystem (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> argument for them.  Actually, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> detects that
  the file is a <tt class="filename">/proc</tt> file, so that one is covered,
  but there are probably more strange beasts there!
</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="close"></a>21.3.9. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> ignores its <tt class="constant">:ABORT</tt> argument.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html" target="_top"><tt class="function">GET-OUTPUT-STREAM-STRING</tt></a> returns the same value after
 <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> as it would before it.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> on an already closed <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> does nothing and returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p><p>If you do not <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> your <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> explicitly, it will be
 closed at <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion time automatically.
 This is not recommended though because <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is not deterministic.
 Please use <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a> etc.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open-stream-p"></a>21.3.10. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="broadcast-stream"></a>21.3.11. Class <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html" target="_top"><tt class="function">INTERACTIVE-STREAM-P</tt></a> return false for
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-buffer"></a>21.3.12. Functions
  <strong class="first"><em class="firstterm"><tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt>
   <a id="stream-buffer-i" class="indexterm"></a></em></strong> and
  <strong class="first"><em class="firstterm"><tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt>
   <a id="stream-buffer-o" class="indexterm"></a></em></strong></h3></div></div></div><p><tt class="code">(EXT:MAKE-BUFFERED-OUTPUT-STREAM <em class="replaceable"><tt>function</tt></em>)</tt>
 returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.
 <em class="replaceable"><tt>function</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> expecting one argument, a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a> collects the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s in a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, until a
 newline character is written or <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FORCE-OUTPUT</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FINISH-OUTPUT</tt></a> is called.
 Then <em class="replaceable"><tt>function</tt></em> is called with a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a> as argument,
 that contains the characters collected so far.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">CLEAR-OUTPUT</tt></a> dicards the characters collected so far.</p><p><tt class="code">(EXT:MAKE-BUFFERED-INPUT-STREAM <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>mode</tt></em>)</tt>
 returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.
 <em class="replaceable"><tt>function</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of 0 arguments that returns
 either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (stands for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>) or up to three values
 <em class="replaceable"><tt>string</tt></em>, <em class="replaceable"><tt>start</tt></em>, <em class="replaceable"><tt>end</tt></em>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s of the current <em class="replaceable"><tt>string</tt></em> one
 after another, as delimited by <em class="replaceable"><tt>start</tt></em> and <em class="replaceable"><tt>end</tt></em>, which default to
 <tt class="literal">0</tt> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, respectively.
 When the <em class="replaceable"><tt>string</tt></em> is consumed, <em class="replaceable"><tt>function</tt></em> is called again.
 The <em class="replaceable"><tt>string</tt></em> returned by <em class="replaceable"><tt>function</tt></em> should not be changed,
 otherwise <em class="replaceable"><tt>function</tt></em> should copy the <em class="replaceable"><tt>string</tt></em> with <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><tt class="function">COPY-SEQ</tt></a>
 or <a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><tt class="function">SUBSEQ</tt></a> beforehand.
 <em class="replaceable"><tt>mode</tt></em> determines the behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>
 when the current <em class="replaceable"><tt>string</tt></em> buffer is empty:
 </p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>the stream acts like a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>,
     i.e. <em class="replaceable"><tt>function</tt></em> is called</dd><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>the stream acts like an interactive stream without
     <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>, i.e. one can assume that further characters will always
     arrive, without calling <em class="replaceable"><tt>function</tt></em></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a></dt><dd>this <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> tells, upon call, if further
     non-empty <em class="replaceable"><tt>string</tt></em>s are to be expected.</dd></dl></div><p>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><tt class="function">CLEAR-INPUT</tt></a> discards the rest of the current <em class="replaceable"><tt>string</tt></em>,
 so <em class="replaceable"><tt>function</tt></em> will be called upon the next <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> operation.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="printer"></a>Chapter 22. Printer
   <a href="http://www.lisp.org/HyperSpec/Body/chap-22.html" target="_top">[CLHS-22]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#print-object">22.5.2. Generic Function <tt class="function">PRINT-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.5.3. Macro <tt class="function">PRINT-UNREADABLE-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.4. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.5.5. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.6. Miscellaneous Issues</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="multi-rep"></a>22.1. Multiple Possible Textual Representations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html" target="_top">[CLHS-22.1.1.1]</a></h2></div></div></div><p><a id="pr-closure"></a><b>Variable <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>. </b>An additional variable <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> controls whether compiled and
 interpreted functions (closures) are output in detailed form.
 If <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, compiled closures are output in
 <span class="keysym">#Y</span> syntax which the reader understands.
 <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p><a id="pr-rpars"></a><b>Variable <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a>. </b>An additional variable <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> controls
 the output of the right (closing) parentheses.
 If <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, closing parentheses which do not fit onto
 the same line as the the corresponding opening parenthesis are output
 just below their corresponding opening parenthesis, in the same column.
 <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p><a id="pr-indent"></a><b>Variable <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a>. </b>An additional variable <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a> controls the indentation of
 lists that span more than one line.
 It specifies by how many characters items within the list will be
 indented relative to the beginning of the list.
 <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a> is initially set to <tt class="literal">1</tt>.</p><p><a id="ppr-first-newline"></a><b>Variable <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a>. </b>An additional variable <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> controls
 pretty-printing of multi-line objects.
 When <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 and the current line already has some characters on it,
 and the next object will be printed on several lines,
 and it does not start with a <span class="keysym">#\Newline</span>,
 then a <span class="keysym">#\Newline</span> is printed before the object.
 <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> has no effect if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
 <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-vector"></a>22.2. Printing Other Vectors
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html" target="_top">[CLHS-22.1.3.7]</a></h2></div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, other vectors are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>, the syntax <tt class="data">#(<em class="replaceable"><tt>x<sub>0</sub></tt></em>
 ... <em class="replaceable"><tt>x<sub>n-1</sub></tt></em>)</tt>
 is used.  Otherwise, the syntax <tt class="data">#A(<em class="replaceable"><tt>element-type</tt></em>
 <em class="replaceable"><tt>dimensions</tt></em> <em class="replaceable"><tt>contents</tt></em>)</tt> is used.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-array"></a>22.3. Printing Other Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html" target="_top">[CLHS-22.1.3.8]</a></h2></div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, other arrays are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>, the syntax <tt class="data">#<em class="replaceable"><tt>rank</tt></em>A <em class="replaceable"><tt>contents</tt></em></tt> is
 used.  Otherwise, the syntax <tt class="data">#A(<em class="replaceable"><tt>element-type</tt></em>
 <em class="replaceable"><tt>dimensions</tt></em> <em class="replaceable"><tt>contents</tt></em>)</tt> is used.</p><p>As explicitly permitted by this section, specialized <a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><tt class="classname">BIT</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>s are printed with the innermost lists generated
 by the printing algorithm are instead printed using <a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><tt class="classname">BIT-VECTOR</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> syntax, respectively.</p><p><a id="pr-empty-arr-ansi"></a><b>Variable <a href="#pr-empty-arr-ansi"><tt class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</tt></a>. </b>Empty <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>s, i.e., arrays with no elements and zero
 <a href="http://www.lisp.org/HyperSpec/Body/fun_array-total-size.html" target="_top"><tt class="function">ARRAY-TOTAL-SIZE</tt></a> (because one of its dimensions is zero) are printed
 with the readable syntax <tt class="data">#A(<em class="replaceable"><tt>element-type</tt></em>
 <em class="replaceable"><tt>dimensions</tt></em> <em class="replaceable"><tt>contents</tt></em>)</tt>, unless the variable
 <a href="#pr-empty-arr-ansi"><tt class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case the arrays are printed
 using the <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a>-prescribed syntax
 <tt class="data">#<em class="replaceable"><tt>rank</tt></em>A <em class="replaceable"><tt>contents</tt></em></tt>
 which often loses the dimension information.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clpp"></a>22.4. The Lisp Pretty Printer
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2.html" target="_top">[CLHS-22.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></div><p>The Lisp Pretty Printer implementation is <strong>not</strong> perfect yet.
 <a href="http://www.lisp.org/HyperSpec/Body/mac_pprint-logical-block.html" target="_top"><tt class="function">PPRINT-LOGICAL-BLOCK</tt></a> does not respect <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html" target="_top"><tt class="varname">*PRINT-LINES*</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pp-dispatch"></a>22.4.1. Pretty Print Dispatch Table
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2-1-4.html" target="_top">[CLHS-22.2.1.4]</a></h3></div></div></div><p>A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pprint_dispatch_table" target="_top">pprint
 dispatch table</a> is a <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a> of a symbol
 <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><tt class="varname">*PRINT-PPRINT-DISPATCH*</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> which maps types into priorities
 and print functions.
 Their use is strongly discouraged because of the performance issues:
 when <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><tt class="varname">*PRINT-PPRINT-DISPATCH*</tt></a> is non-trivial and <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a>
 is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, printing of every object requires a lookup in the table,
 which entails many calls to <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><tt class="function">TYPEP</tt></a> (which cannot be made fast
 enough).</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-dict"></a>22.5. The Printer Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html" target="_top">[CLHS-22.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#print-object">22.5.2. Generic Function <tt class="function">PRINT-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.5.3. Macro <tt class="function">PRINT-UNREADABLE-OBJECT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.4. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.5.5. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.6. Miscellaneous Issues</a></span></dt></dl></div><p><b>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><tt class="function">WRITE-TO-STRING</tt></a>. </b>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><tt class="function">WRITE-TO-STRING</tt></a> have an additional
 keyword argument <tt class="constant">:closure</tt> which is used to bind
 <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="format"></a>22.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a></h3></div></div></div><p>The additional <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instruction
 <strong class="first"><em class="firstterm">~!<a id="format-bang" class="indexterm"></a></em></strong>
 is similar to <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-5-4.html" target="_top"><tt class="literal">~/</tt></a>, but avoids putting a function name into a
 string, thus, even if the function is not interned in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a>
 package, you might not need to specify the package explicitly.
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <em class="replaceable"><tt>stream</tt></em> "~args!" <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>object</tt></em>)</tt> is
  equivalent to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>object</tt></em>
  <em class="replaceable"><tt>colon-modifier-p</tt></em>
  <em class="replaceable"><tt>atsign-modifier-p</tt></em>
  <em class="replaceable"><tt>args</tt></em>)</tt>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~:R</tt></a> can output only
 integers in the range <tt class="varname">|n| &lt;
 <em class="replaceable"><tt>10<sup>66</sup></tt></em></tt>.
 The output is in English, according to the American conventions, and
 these conventions are identical to the British conventions only in the
 range <tt class="varname">|n| &lt;
 <em class="replaceable"><tt>10<sup>9</sup></tt></em></tt>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-1-1.html" target="_top"><tt class="literal">~:@C</tt></a> does not output the character itself, only the
 instruction how to type the character.</p><p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, the value of
 <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><tt class="varname">*READ-DEFAULT-FLOAT-FORMAT*</tt></a> does not matter if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a>
 is true.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-6-1.html" target="_top"><tt class="literal">~T</tt></a> can determine the current column of any
 built-in stream.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-object"></a>22.5.2. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a> verifies the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement that its
return value is the same as its first argument. It issues a warning if one of
the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a> methods yields a wrong return value. To get rid of such a
warning, you need to fix the source code of the incriminated method.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-unreadable-object"></a>22.5.3. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><tt class="function">PRINT-UNREADABLE-OBJECT</tt></a></h3></div></div></div><p><a id="pr-unreadable-ansi"></a><b>Variable <a href="#pr-unreadable-ansi"><tt class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</tt></a>. </b>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><tt class="function">PRINT-UNREADABLE-OBJECT</tt></a>, when invoked without body forms,
 suppresses the trailing space if only the type is to be printed, and
 suppresses the leading space if only the identity is to be printed.  This
 behaviour can be turned off set setting the variable <a href="#pr-unreadable-ansi"><tt class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</tt></a>
 to a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> value: in this case, a trailing or leading space are output,
 as prescribed by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathprint"></a>22.5.4. Pathnames</h3></div></div></div><p>Pathnames are printed as follows: If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 only the namestring is printed; otherwise it is printed with the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><tt class="data">#P</tt></a> syntax, as per the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] Issue <a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a>.
 But, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, we are in trouble as <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><tt class="data">#P</tt></a> is
 ambiguous (which is verboten when <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true), while
 being mandated by the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
 Therefore, in this case, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s behavior is determined by the value
 of <a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a>: when it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, we print pathnames like this:
<tt class="computeroutput">#-CLISP <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><tt class="data">#P</tt></a>"..."
#+CLISP <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-13" target="_top"><tt class="data">#S</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a> ...)</tt>.
 Otherwise, when the variable <a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><tt class="data">#P</tt></a> notation is used as per <a href="http://www.lisp.org/HyperSpec/Body/sec_1-5-1-4-1.html" target="_top">1.5.1.4.1 Resolution of Apparent
 Conflicts in Exceptional Situations</a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>When both <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> and <a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> are
  non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the namestring will be parsed to a dissimilar object
  (with the current value of <a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a>), an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
  <a href="http://www.lisp.org/HyperSpec/Body/contyp_print-not-readable.html" target="_top"><tt class="classname">PRINT-NOT-READABLE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="spacecharprint"></a>22.5.5. Characters</h3></div></div></div><p>Characters are printed as specified in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], with one exception:
 The space character is printed as
 <tt class="computeroutput">#\Space</tt> when the variable <a href="#spacecharprint" title="22.5.5.&#xA0;Characters"><tt class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</tt></a>
 is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. When <a href="#spacecharprint" title="22.5.5.&#xA0;Characters"><tt class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, it is printed as
 <tt class="computeroutput">#\ </tt>; this is how <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-2.html" target="_top">22.1.3.2 Printing Characters</a>
 specifies it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-misc"></a>22.5.6. Miscellaneous Issues</h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><tt class="varname">*PRINT-CASE*</tt></a> controls the output not only of symbols, but also
 of characters and some <tt class="computeroutput">#&lt;...&gt;</tt>
 objects.</p><p>In the absence of
 <strong class="first"><em class="firstterm"><a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-1-3.html" target="_top"><tt class="function">SYS::WRITE-FLOAT-DECIMAL</tt></a>
  <a id="write-float-decimal" class="indexterm"></a></em></strong>,
 floating point numbers are output in radix 2.  This function is defined
 in <tt class="filename">"floatpri.lisp"</tt> and is not available if you run
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> without a <a href="impnotes.html#image" class="olink">memory image</a> (which you should never do anyway!)</p><p>If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><tt class="varname">*READ-DEFAULT-FLOAT-FORMAT*</tt></a>
 has no influence on the way floating point numbers are printed.</p><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> but set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>
 in <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>.  This makes screen output prettier.
 </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="reader"></a>Chapter 23. Reader
   <a href="http://www.lisp.org/HyperSpec/Body/chap-23.html" target="_top">[CLHS-23]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></div><p>This is the list of objects whose external representation cannot
  be meaningfully read in:
</p><div class="table"><a id="unreadable-objects-table"></a><p class="title"><b>Table 23.1. Unreadable objects</b></p><table summary="Unreadable objects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">format</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><tt class="literal">#&lt;<em class="replaceable"><tt>type</tt></em> ...&gt;</tt></td><td align="center">all <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>s lacking a keyword constructor</td></tr><tr><td align="center"><tt class="literal">#&lt;ARRAY <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>dimensions</tt></em>&gt;</tt></td><td align="center">all <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>s except <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SYSTEM-FUNCTION <em class="replaceable"><tt>name</tt></em>&gt;</tt></td><td align="center">built-in function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></td></tr><tr><td align="center"><tt class="literal">#&lt;ADD-ON-SYSTEM-FUNCTION
    <em class="replaceable"><tt>name</tt></em>&gt;</tt></td><td align="center">other function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SPECIAL-OPERATOR <em class="replaceable"><tt>name</tt></em>&gt;</tt></td><td align="center">special operator handler</td></tr><tr><td align="center"><tt class="literal">#&lt;COMPILED-CLOSURE <em class="replaceable"><tt>name</tt></em>&gt;</tt></td><td align="center">compiled function, if <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;CLOSURE <em class="replaceable"><tt>name</tt></em> ...&gt;</tt></td><td align="center">interpreted function</td></tr><tr><td align="center"><tt class="literal">#&lt;FRAME-POINTER #x...&gt;</tt></td><td align="center">pointer to a stack frame</td></tr><tr><td align="center"><tt class="literal">#&lt;DISABLED POINTER&gt;</tt></td><td align="center">frame pointer which has become invalid on exit from the
   corresponding <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;...STREAM...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;PACKAGE <em class="replaceable"><tt>name</tt></em>&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;HASH-TABLE #x...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;READTABLE #x...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SYMBOL-MACRO <em class="replaceable"><tt>form</tt></em>&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> handler</td></tr><tr><td align="center"><tt class="literal">#&lt;MACRO <em class="replaceable"><tt>function</tt></em>&gt;</tt></td><td align="center">macro expander (defined by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> and friends)</td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> #x...&gt;</tt></td><td align="center">foreign pointer <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span>
 </td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> #x...&gt;</tt></td><td align="center">foreign address <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a>
    <em class="replaceable"><tt>name</tt></em> #x...&gt;</tt></td><td align="center">foreign variable <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a>
    <em class="replaceable"><tt>name</tt></em> #x...&gt;</tt></td><td align="center">foreign function <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;UNBOUND&gt;</tt></td><td align="center">"value" of a symbol without value, "value" of an unsupplied
   optional or keyword argument</td></tr><tr><td align="center"><tt class="literal">#&lt;SPECIAL REFERENCE&gt;</tt></td><td align="center">environment marker for variables declared <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a>
 </td></tr><tr><td align="center"><tt class="literal">#&lt;DOT&gt;</tt></td><td align="center">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result for "."</td></tr><tr><td align="center"><tt class="literal">#&lt;END OF FILE&gt;</tt></td><td align="center">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result, when the end of file is reached
 </td></tr><tr><td align="center"><tt class="literal">#&lt;READ-LABEL ...&gt;</tt></td><td align="center">intermediate <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result for <tt class="literal">#n#</tt>
 </td></tr><tr><td align="center"><tt class="literal">#&lt;ADDRESS #x...&gt;</tt></td><td align="center">machine address, should not occur</td></tr><tr><td align="center"><tt class="literal">#&lt;SYSTEM-POINTER #x...&gt;</tt></td><td align="center">should not occur</td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="chario"></a>23.1. characters</h2></div></div></div><p><span class="keysym">#\Code</span> allows input of characters of arbitrary code:
 e.g., <span class="keysym">#\Code231</span> reads as the character
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> 231.)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="read-dispatch-ext"></a>23.2. Additional read dispatch macros</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><span class="keysym">#Y</span> is used to read compiled
  functions and to set the current <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>'s <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>.
  </li><li><p><tt class="filename">#""</tt> is used to read pathnames:
  <tt class="filename">#"test.lisp"</tt> is the value of <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a>
   "test.lisp")</tt></p><div class="variablelist">
<!--#if defined(WIN32)--><dl><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd>As in all strings, backslashes must be written twice
  here: <tt class="filename">#"A:\\programs\\test.lisp"</tt>
  </dd>
<!--#endif-->
</dl></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="rt-case"></a>23.3. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a></h2></div></div></div><p>When the value of <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a>
 <em class="replaceable"><tt>readtable</tt></em>)</tt> is
 <tt class="constant">:INVERT</tt>, it applies to the package name and the
 symbol name of a symbol separately (not to the entire token at once).
 An alternative to the use of <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a> is the use of the
 <a href="#package-case" title="11.4.1.&#xA0;Package Case-Sensitivity"><tt class="constant">:CASE-SENSITIVE</tt></a> option of <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a>.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="system"></a>Chapter 24. System Construction
   <a href="http://www.lisp.org/HyperSpec/Body/chap-24.html" target="_top">[CLHS-24]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="system-dict"></a>24.1. The System Construction Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html" target="_top">[CLHS-24.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></div><p>The compiler can be called not only by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a>, but also by the declaration
 <a href="#compile-decl" title="3.3.1.&#xA0;Additional declarations"><tt class="code">(COMPILE)</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compilefile"></a>24.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> <em class="replaceable"><tt>input-file</tt></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:OUTPUT-FILE</tt> :LISTING <tt class="constant">:WARNINGS</tt> <tt class="constant">:VERBOSE</tt> <tt class="constant">:PRINT</tt>
  <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a>)</tt> compiles a file to a platform-independent
 <a href="impnotes.html#bytecode" class="olink">bytecode</a>.</p><div class="variablelist"><a id="compile-file-arguments"></a><p class="title"><b>Options for <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a></b></p><dl><dt><em class="replaceable"><tt>input-file</tt></em></dt><dd>should be a <a href="#path-des">pathname designator</a>.
 </dd><dt><tt class="constant">:OUTPUT-FILE</tt></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</dd><dt><tt class="constant">:LISTING</tt></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:WARNINGS</tt></dt><dd>specifies whether warnings should also appear on the
   screen.</dd><dt><tt class="constant">:VERBOSE</tt></dt><dd>specifies whether error messages should also appear
   on the screen.</dd><dt><tt class="constant">:PRINT</tt></dt><dd>specifies whether an indication which forms are
   being compiled should appear on the screen.
</dd></dl></div><p>The variables <strong class="first"><em class="firstterm"><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><tt class="varname">CUSTOM:*COMPILE-WARNINGS*</tt></a></em></strong>,
 <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><tt class="varname">*COMPILE-VERBOSE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><tt class="varname">*COMPILE-PRINT*</tt></a> provide defaults for the
 <tt class="constant">:WARNINGS</tt>, <tt class="constant">:VERBOSE</tt>, <tt class="constant">:PRINT</tt> keyword arguments, respectively,
 and are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> to the values of the arguments, i.e.,
 these arguments are recursive.</p><p>For each input file (default file type: <tt class="filename">#P".lisp"</tt>)
 the following files are generated:
</p><div class="informaltable"><a id="compile-file-new-files-table"></a><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">File</th><th align="center">When</th><th align="center">Default file type</th><th align="center">Contents</th></tr></thead><tbody><tr><td align="center">output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".fas"</tt></td><td align="center">can be loaded using the <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> function</td></tr><tr><td align="center">auxiliary output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a></td><td align="center">used by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> when compiling a <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> form referring
    to the input file</td></tr><tr><td align="center">listing file</td><td align="center">only if <tt class="constant">:LISTING</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".lis"</tt></td><td align="center">disassembly of the output file</td></tr><tr><td align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".c"</tt></td><td align="center">foreign function interface; this file is deleted if it is
    empty</td></tr></tbody></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="c-file-overwrite"></a>Warning</h3><p>If you have two files in the same
directory - <tt class="filename">#P"foo.lisp"</tt> and <tt class="filename">#P"foo.c"</tt>, and you
compile the first file with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, the second file will be
<span class="emphasis"><em>clobbered</em></span> if you have any <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms in
the first one!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-file-path"></a>24.1.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file-pathname.html" target="_top"><tt class="function">COMPILE-FILE-PATHNAME</tt></a></h3></div></div></div><p>The default for the <tt class="constant">:OUTPUT-FILE</tt> argument is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, which means <tt class="filename">#P".fas"</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="require"></a>24.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> receives as the optional argument either
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>s: files to be <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>ed
 if the required module is not already present.</p><p>At compile time, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> <tt class="filename">#P"foo"</tt>)</tt>
forms are treated specially: <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a> is searched for
<tt class="filename">#P"foo.lisp"</tt> <span class="emphasis"><em>and</em></span> <tt class="filename">#P"foo.lib"</tt>.
If the latest such file is a <tt class="filename">#P".lisp"</tt>, it is compiled;
otherwise the <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a> is loaded.</p><p>The <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a> is a “<span class="quote">header</span>” file which contains the
constant, variable, inline and macro definitions necessary for
compilation of the files that <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> this file, but not the function
definitions and calls that are not necessary for that.
Thus it is <strong>not</strong> necessary to either enclose <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> forms in
<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> or to load the required files in the makefiles: if you have
two files, <tt class="filename">#P"foo.lisp"</tt> and <tt class="filename">#P"bar.lisp"</tt>, and the
latter requires the former, you can write in your <tt class="filename">#P"Makefile"</tt>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
all: foo.fas bar.fas

foo.fas: foo.lisp
	clisp -c foo

bar.fas: bar.lisp foo.fas
	clisp -c bar
</pre></td></tr></table><p>
instead of the more cumbersome (and slower, since <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a>s are
usually smaller and load faster that <tt class="filename">#P".fas"</tt>s):
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
bar.fas: bar.lisp foo.fas
        clisp -i foo -c bar
</pre></td></tr></table><p>
Thus, you do not need to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> <tt class="filename">#P"foo"</tt>)</tt> in order
to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> <tt class="filename">#P"bar.lisp"</tt>)</tt>.
If memory is tight, and if <tt class="filename">#P"foo.lisp"</tt> contains only a few inline
functions, macros, constants or variables, this is a space and time
saver.  If <tt class="filename">#P"foo.lisp"</tt> does a lot of initializations or side effects
when being loaded, this is important as well.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loadfile"></a>24.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> accepts four additional keyword arguments <tt class="constant">:ECHO</tt>,
 <tt class="constant">:COMPILING</tt>, <tt class="constant">:EXTRA-FILE-TYPES</tt>, and <tt class="constant">:OBSOLETE-ACTION</tt>.</p><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> <em class="replaceable"><tt>filename</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  ((<tt class="constant">:VERBOSE</tt> <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>)
  ((<tt class="constant">:PRINT</tt> <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>)
  ((<tt class="constant">:ECHO</tt> <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a>) <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a>) <tt class="constant">:IF-DOES-NOT-EXIST</tt>
  ((<tt class="constant">:COMPILING</tt> <a href="impnotes.html#loadfile" class="olink"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a>) <a href="impnotes.html#loadfile" class="olink"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a>) <tt class="constant">:EXTRA-FILE-TYPES</tt>
  ((<tt class="constant">:OBSOLETE-ACTION</tt> <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a>) <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a>))</tt></p><div class="variablelist"><dl><dt><tt class="constant">:VERBOSE</tt></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> to emit a short message that a file is
    being loaded.  The default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>, which is initially
    <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, but can be changed by the <tt class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></tt> option.
 </dd><dt><tt class="constant">:PRINT</tt></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> to print the value of each form.  The
    default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>, which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, but can be
    changed by the <tt class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></tt> option.</dd><dt><tt class="constant">:ECHO</tt></dt><dd>causes the input from the file to be echoed to
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-OUTPUT*</tt></a> (normally to the screen).  Should there be an
    error in the file, you can see at one glance where it is.  The
    default is <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a></em></strong>, which is initially
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:COMPILING</tt></dt><dd>causes each form read to be compiled on the fly.
    The compiled code is executed at once and - in contrast to
    <a href="impnotes.html#compilefile" class="olink"><tt class="function">COMPILE-FILE</tt></a> - not written to a file.
    The default is <strong class="first"><em class="firstterm"><a href="impnotes.html#loadfile" class="olink"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a></em></strong>, which is initially
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, but can be changed by the <tt class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></tt> option.
 </dd><dt><tt class="constant">:EXTRA-FILE-TYPES</tt></dt><dd><p>Specifies the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of additional file types
    considered for loading, in addition to <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*SOURCE-FILE-TYPES*</tt></a></em></strong>
    (which is initially <tt class="data">("lisp" "lsp" "cl")</tt>)
    and <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*COMPILED-FILE-TYPES*</tt></a></em></strong>
    (which is initially <tt class="data">("fas")</tt>).
   </p><p>When <em class="replaceable"><tt>filename</tt></em> does not spefify a unique file
    (e.g., <em class="replaceable"><tt>filename</tt></em> is <tt class="filename">#P"foo"</tt> and both <tt class="filename">#P"foo.lisp"</tt>
    and <tt class="filename">#P"foo.fas"</tt> are found in the
    <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>), then the <span class="emphasis"><em>newest</em></span> file is loaded.
 </p></dd><dt><tt class="constant">:OBSOLETE-ACTION</tt></dt><dd><p>Specifies the action to take when loading a
    <tt class="filename">#P".fas"</tt> with a different <a href="impnotes.html#bytecode" class="olink">bytecode</a> version from the one
    supported by this <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version.  The possible actions are
    </p><div class="variablelist"><dl><dt><tt class="constant">:DELETE</tt></dt><dd>delete the <tt class="filename">#P".fas"</tt>
     </dd><dt><tt class="constant">:ERROR</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
     </dd><dt><tt class="constant">:COMPILE</tt></dt><dd>recompile the source file
        (if <a href="#load-paths">present</a>)
     </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (default)</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a> and <a href="#load-paths">look
         for another matching file</a>
    </dd></dl></div><p>
    If no file can be loaded and <tt class="constant">:IF-DOES-NOT-EXIST</tt> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
    The default is <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a></em></strong>,
    which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></dd></dl></div><p>The variables <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>,
<a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a>, <a href="impnotes.html#loadfile" class="olink"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a>, and <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a> are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> when it
receives a corresponding keyword argument (<tt class="constant">:VERBOSE</tt>, <tt class="constant">:PRINT</tt>,
<tt class="constant">:OBSOLETE-ACTION</tt>, <tt class="constant">:COMPILING</tt>, and <tt class="constant">:ECHO</tt>), i.e., these arguments
are recursive, just like the arguments <tt class="constant">:WARNINGS</tt>, <tt class="constant">:VERBOSE</tt>, and
<tt class="constant">:PRINT</tt> for <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>.</p><p>When evaluation of a read form <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>, two restarts are
 available:</p><div class="variablelist"><dl><dt><tt class="literal">SKIP</tt></dt><dd>Skip this form and read the next one.
  </dd><dt><tt class="literal">STOP</tt></dt><dd>Stop loading the file.
</dd></dl></div><p><a id="load-paths"></a><b>Variable <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>. </b>The variable <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a> contains a list of directories where the
 files are looked for - in addition to the specified or current
 directory - by <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="features"></a>24.1.5. Variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a></h3></div></div></div><p>The variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> initially contains the following symbols
</p><div class="variablelist"><a id="features-table"></a><p class="title"><b>Default <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a></b></p><dl><dt><tt class="constant">:CLISP</tt></dt><dd>the name of this implementation
</dd><dt><tt class="constant">:ANSI-CL</tt></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#purports_to_conform" target="_top">purports to
    conform</a> to [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><tt class="constant">:COMMON-LISP</tt></dt><dd>required by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><tt class="constant">:INTERPRETER</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> is implemented</dd><dt><tt class="constant">:COMPILER</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> are implemented
</dd>
<!--#ifdef SOCKET_STREAMS--><dt><tt class="constant">:SOCKETS</tt></dt><dd>see <a href="#socket" title="31.5.&#xA0;Socket Streams">Section 31.5, “Socket Streams”</a>
</dd>
<!--#endif-->
<!--#ifdef GENERIC_STREAMS--><dt><tt class="constant">:GENERIC-STREAMS</tt></dt><dd>see <a href="#gstream" title="30.6.&#xA0;Generic streams">Section 30.6, “Generic streams”</a>
</dd>
<!--#endif-->
<!--#ifdef LOGICAL_PATHNAMES--><dt><tt class="constant">:LOGICAL-PATHNAMES</tt></dt><dd><a href="#log-path" title="19.4.&#xA0;Logical Pathnames&#10;  [CLHS-19.3]">Logical Pathnames</a>
   are implemented</dd>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI--><dt><tt class="constant">:FFI</tt></dt><dd>if a foreign function interface
   (see <a href="impnotes.html#dffi" class="olink">Section 31.3, “The Foreign Function Call Facility”</a>) is supported
   <span class="emphasis"><em>(Platform dependent: many <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
    platforms only)</em></span></dd>
<!--#endif-->
<!--#ifdef GNU_GETTEXT--><dt><tt class="constant">:GETTEXT</tt></dt><dd>if internationalization (see <a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP">Section 30.4, “Internationalization of <span><strong class="command">CLISP</strong></span>”</a>)
   using the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> package is supported
   <span class="emphasis"><em>(Platform dependent: most <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms
    only)</em></span></dd>
<!--#endif-->
<!--#ifdef UNICODE--><dt><tt class="constant">:UNICODE</tt></dt><dd>if <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> (ISO 10646) characters are supported
   (see <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a>)</dd>
<!--#endif-->
<dt><tt class="constant">:LOOP</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a> is implemented</dd><dt><tt class="constant">:CLOS</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> is implemented</dd><dt><tt class="constant">:WIN32</tt></dt><dd>if <em class="replaceable"><tt>hardware</tt></em> = PC (clone) and <em class="replaceable"><tt>operating system</tt></em> = Win32
  (Windows 95/98/NT/Me/2000/XP)</dd><dt><tt class="constant">:PC386</tt></dt><dd>if <em class="replaceable"><tt>hardware</tt></em> = PC (clone) with a 386/486/586/686/786 CPU
</dd><dt><tt class="constant">:UNIX</tt></dt><dd>if <em class="replaceable"><tt>operating system</tt></em> = <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> (in this case the <em class="replaceable"><tt>hardware</tt></em> is irrelevant!)
</dd><dt><tt class="constant">:CYGWIN</tt></dt><dd>if <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is using the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>
   compatibility layer on top of <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
   (in that case <tt class="constant">:UNIX</tt> is also present)
</dd></dl></div><p>Each <a href="#modules" title="31.2.&#xA0;External Modules">module</a> should add the appropriate keyword, e.g.,
 <a href="#syscalls" title="32.8.&#xA0;System Calls"><tt class="constant">:SYSCALLS</tt></a>,
 <a href="#dir-key" title="32.3.&#xA0;Directory Access"><tt class="constant">:DIR-KEY</tt></a>,
 <a href="#regexp" title="32.5.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><tt class="constant">:REGEXP</tt></a>,
 <a href="#pcre" title="32.6.&#xA0;Perl Compatible Regular Expressions."><tt class="constant">:PCRE</tt></a>, etc.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="environment"></a>Chapter 25. Environment
   <a href="http://www.lisp.org/HyperSpec/Body/chap-25.html" target="_top">[CLHS-25]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></dd><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt><dt><span class="section"><a href="#argv">25.2.14. Function <tt class="function">EXT:ARGV</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="debugger"></a>25.1. Debugging Utilities
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html" target="_top">[CLHS-25.1.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></div><p>The debugger may be invoked through the functions
 <a href="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html" target="_top"><tt class="function">INVOKE-DEBUGGER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><tt class="function">CERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a>.
 The stepper is invoked through the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>.
 Debugger and stepper execute subordinate <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> (called "break loops")
 which are similar to the main <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> except for the
 <a href="#prompt" title="30.9.&#xA0;The Prompt">prompt</a> and the set of available commands.
 Commands must be typed literally, in any case,
 without surrounding quotes or white space.
 Each command has a keyword abbreviation,
 indicated in the second column.</p><div class="table"><a id="debugger-main-deb-step"></a><p class="title"><b>Table 25.1. Commands common to the main loop, the debugger and the stepper</b></p><table summary="Commands common to the main loop, the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Help</strong></span></td><td align="center"><span><strong class="command">:h</strong></span></td><td align="center">prints a list of available commands</td></tr></tbody></table></div><div class="table"><a id="debugger-deb-step"></a><p class="title"><b>Table 25.2. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Abort</strong></span></td><td align="center"><span><strong class="command">:a</strong></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><strong class="command">Unwind</strong></span></td><td align="center"><span><strong class="command">:uw</strong></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><strong class="command">Quit</strong></span></td><td align="center"><span><strong class="command">:q</strong></span></td><td align="center">quit to the top <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr></tbody></table></div><p>The stack is organized into frames and other stack elements.
 Usually every invocation of an interpreted function and every
 evaluation of an interpreted form corresponds to one stack frame.
 Special forms such as <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a>
 produce special kinds of stack frames.</p><p><a id="cur-frame"></a>In a break loop there is a
 <strong class="first"><em class="firstterm"><a href="#cur-frame">current stack frame</a></em></strong>, which is initially the most recent
 stack frame but can be moved using the debugger
 commands <span><strong class="command">Up</strong></span> and <span><strong class="command">Down</strong></span>.</p><p>Evaluation of forms in a break loop occurs in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> of the
 <a href="#cur-frame">current stack frame</a> and <span class="emphasis"><em>at the same time</em></span> in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-2.html" target="_top">dynamic environment</a>
 of the debugger's caller.  This means that to inspect or modify a
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-1.html" target="_top">lexical variable</a> all you have to do is to move the <a href="#cur-frame">current stack frame</a> to be just
 below the frame that corresponds to the form or the function call that
 binds that variable.</p><p>There is a current <strong class="first"><em class="firstterm">stack mode</em></strong> which defines
 in how much detail the stack is shown by the stack-related debugger
 commands.</p><div class="table"><a id="debugger-deb-step-1"></a><p class="title"><b>Table 25.3. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Error</strong></span></td><td align="center"><span><strong class="command">:e</strong></span></td><td align="center">print the last error message.</td></tr><tr><td align="center"><span><strong class="command">Inspect</strong></span></td><td align="center"><span><strong class="command">:i</strong></span></td><td align="center">inspect the last error message.</td></tr><tr><td align="center"><span><strong class="command">Mode-1</strong></span></td><td align="center"><span><strong class="command">:m1</strong></span></td><td align="center">sets the current mode to 1: all the stack elements are considered.
    This mode works fine for debugging compiled functions.</td></tr><tr><td align="center"><span><strong class="command">Mode-2</strong></span></td><td align="center"><span><strong class="command">:m2</strong></span></td><td align="center">sets the current mode to 2: all the frames are considered.
     </td></tr><tr><td align="center"><span><strong class="command">Mode-3</strong></span></td><td align="center"><span><strong class="command">:m3</strong></span></td><td align="center">sets the current mode to 3: only lexical frames (frames that
    correspond to special forms that modify the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>) are
    considered.</td></tr><tr><td align="center"><span><strong class="command">Mode-4</strong></span></td><td align="center"><span><strong class="command">:m4</strong></span></td><td align="center">sets the current mode to 4 (the default): only <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> and
    <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are considered. Every evaluation of a form in the
    interpreter corresponds to an EVAL frame.</td></tr><tr><td align="center"><span><strong class="command">Mode-5</strong></span></td><td align="center"><span><strong class="command">:m5</strong></span></td><td align="center">sets the current mode to 5: only <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are
         considered. Every invocation of an interpreted function
         corresponds to one <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame.</td></tr><tr><td align="center"><span><strong class="command">Where</strong></span></td><td align="center"><span><strong class="command">:w</strong></span></td><td align="center">shows the <a href="#cur-frame">current stack frame</a>.</td></tr><tr><td align="center"><span><strong class="command">Up</strong></span></td><td align="center"><span><strong class="command">:u</strong></span></td><td align="center">goes up one frame, i.e., to the caller if in mode-5
    </td></tr><tr><td align="center"><span><strong class="command">Down</strong></span></td><td align="center"><span><strong class="command">:d</strong></span></td><td align="center">does down one frame, i.e., to the callee if in mode-5
    </td></tr><tr><td align="center"><span><strong class="command">Top</strong></span></td><td align="center"><span><strong class="command">:t</strong></span></td><td align="center">goes to top frame, i.e., to the top-level form if in mode-4
    </td></tr><tr><td align="center"><span><strong class="command">Bottom</strong></span></td><td align="center"><span><strong class="command">:b</strong></span></td><td align="center">goes to bottom (most recent) frame, i.e., most probably to the
         form or function that caused the debugger to be entered.
    </td></tr><tr><td align="center"><span><strong class="command">Backtrace</strong></span></td><td align="center"><span><strong class="command">:bt</strong></span></td><td align="center">lists the stack in current mode, bottom frame first, top frame
     last.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-1</strong></span></td><td align="center"><span><strong class="command">:bt1</strong></span></td><td align="center">lists the stack in mode 1.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-2</strong></span></td><td align="center"><span><strong class="command">:bt2</strong></span></td><td align="center">lists the stack in mode 2.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-3</strong></span></td><td align="center"><span><strong class="command">:bt3</strong></span></td><td align="center">lists the stack in mode 3.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-4</strong></span></td><td align="center"><span><strong class="command">:bt4</strong></span></td><td align="center">lists the stack in mode 4.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-5</strong></span></td><td align="center"><span><strong class="command">:bt5</strong></span></td><td align="center">lists the stack in mode 5.</td></tr><tr><td align="center"><span><strong class="command">Frame-limit</strong></span></td><td align="center"><span><strong class="command">:fl</strong></span></td><td align="center">set the frame-limit: this many frames will be printed in a
     backtrace at most.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-l</strong></span></td><td align="center"><span><strong class="command">:bl</strong></span></td><td align="center">limit of frames to print will be prompted for.</td></tr></tbody></table></div><p>If the <a href="#cur-frame">current stack frame</a> is an <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame, the
  following commands are available as well:</p><div class="table"><a id="debugger-eval-apply"></a><p class="title"><b>Table 25.4. Commands specific to <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a></b></p><table summary="Commands specific to EVAL/APPLY" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Break+</strong></span></td><td align="center"><span><strong class="command">:br+</strong></span></td><td align="center">sets a breakpoint in the current frame.  When the corresponding
     form or function will be left, the debugger will be entered again, with
     the variable <a href="#trace-val"><tt class="varname">EXT:*TRACE-VALUES*</tt></a> containing a list of its values.</td></tr><tr><td align="center"><span><strong class="command">Break-</strong></span></td><td align="center"><span><strong class="command">:br-</strong></span></td><td align="center">removes a breakpoint from the current frame.</td></tr><tr><td align="center"><span><strong class="command">Redo</strong></span></td><td align="center"><span><strong class="command">:rd</strong></span></td><td align="center">re-evaluates the corresponding form or function call. This
     command can be used to restart parts of a computation without
     aborting it entirely.</td></tr><tr><td align="center"><span><strong class="command">Return</strong></span></td><td align="center"><span><strong class="command">:rt</strong></span></td><td align="center">leaves the current frame.  You will be prompted for the return
     values.</td></tr></tbody></table></div><div class="table"><a id="debugger-deb"></a><p class="title"><b>Table 25.5. Commands specific to the debugger</b></p><table summary="Commands specific to the debugger" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Continue</strong></span></td><td align="center"><span><strong class="command">:c</strong></span></td><td align="center">continues evaluation of the program.</td></tr></tbody></table></div><div class="table"><a id="debugger-step"></a><p class="title"><b>Table 25.6. Commands specific to the stepper</b></p><table summary="Commands specific to the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Step</strong></span></td><td align="center"><span><strong class="command">:s</strong></span></td><td align="center">step into a form: evaluate this form in single step mode
   </td></tr><tr><td align="center"><span><strong class="command">Next</strong></span></td><td align="center"><span><strong class="command">:n</strong></span></td><td align="center">step over a form: evaluate this form at once
   </td></tr><tr><td align="center"><span><strong class="command">Over</strong></span></td><td align="center"><span><strong class="command">:o</strong></span></td><td align="center">step over this level: evaluate at once up to the next return
   </td></tr><tr><td align="center"><span><strong class="command">Continue</strong></span></td><td align="center"><span><strong class="command">:c</strong></span></td><td align="center">switch off single step mode, continue evaluation
   </td></tr></tbody></table></div><p>The stepper is usually used like this: If some form returns a
 strange value or results in an error, call <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>
 <em class="replaceable"><tt>form</tt></em>)</tt> and navigate using the
 commands <span><strong class="command">Step</strong></span> and <span><strong class="command">Next</strong></span> until you
 reach the form you regard as responsible.  If you are too fast (execute
 <span><strong class="command">Next</strong></span> once and get the error), there is no way back;
 you have to restart the entire stepper session.  If you are too slow
 (stepped into a function or a form which certainly is OK), a couple of
 <span><strong class="command">Next</strong></span> commands or one <span><strong class="command">Over</strong></span> command
 will help.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="user-commands"></a>25.1.1. User-customizable Commands</h3></div></div></div><p>You can set <strong class="first"><em class="firstterm"><a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><tt class="varname">CUSTOM:*USER-COMMANDS*</tt></a></em></strong> to a list of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>s, each returning a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>
 of <strong class="first"><em class="firstterm">bindings</em></strong>, i.e., either a
</p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a></dt><dd>the help string printer by <span><strong class="command">Help</strong></span>
  in addition to the standard <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> help</dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>
  <tt class="data">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> . <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>)</tt></dt><dd>the actual binding: when the user types the string,
  the function is called.
</dd></dl></div><p>
E.g.,
</p><div class="informalexample"><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (setq <a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><tt class="varname">CUSTOM:*USER-COMMANDS*</tt></a>
       (list (lambda () (list (format nil "~2%User-defined commands:")))
             (lambda ()
               (flet ((panic () (format t "don't panic, ~D~%" (random 42))))
                 (list (format nil "~%panic   :p    hit the panic button!")
                       (cons "panic" #'panic)
                       (cons ":p" #'panic))))
             (lambda ()
               (let ((curses #("ouch" "yuk" "bletch")))
                 (flet ((swear ()
                          (format t "~A!~%"
                                  (aref curses (random (length curses))))))
                   (list (format nil "~%swear   :e    curse")
                         (cons "swear" #'swear)
                         (cons ":e" #'swear)))))))
</pre></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="environment-dict"></a>25.2. The Environment Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html" target="_top">[CLHS-25.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt><dt><span class="section"><a href="#argv">25.2.14. Function <tt class="function">EXT:ARGV</tt></a></span></dt></dl></div>
<!--#ifdef HAVE_DISASSEMBLER--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="disassemble"></a>25.2.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a></h3></div></div></div><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a> can disassemble to machine code,
   provided that <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> is present.
   In that case the argument may be a
   <tt class="classname">EXT:SYSTEM-FUNCTION</tt>, a <a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a>, a
   special operator handler, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> denoting one of these, an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> (address), or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
</dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="uncompile"></a>25.2.2. Function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a></h3></div></div></div><p>The function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a> does the converse of
 <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a>: <tt class="code">(<a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a> <em class="replaceable"><tt>function</tt></em>)</tt> reverts a compiled
 <em class="replaceable"><tt>function</tt></em> (name), that has been entered or loaded in the same session
 and then compiled, back to its interpreted form.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="documentation"></a>25.2.3. Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></h3></div></div></div><p>No on-line documentation is available for the system functions
 (yet).</p><p><a id="browser"></a><b>Function <tt class="function">EXT:CLHS</tt>. </b>[<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] access is provided via <tt class="code">(<tt class="function">EXT:CLHS</tt>
  <em class="replaceable"><tt>symbol</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#browser"><tt class="constant">:BROWSER</tt></a>)</tt> function, which uses your web
  browser. <em class="replaceable"><tt>browser</tt></em> (defaults to <a href="#browser"><tt class="constant">CUSTOM:*BROWSER*</tt></a>)
  should be a valid keyword in the <a href="#browser"><tt class="constant">CUSTOM:*BROWSERS*</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="trace"></a>25.2.4. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a></h3></div></div></div><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> <em class="replaceable"><tt>function</tt></em> ...)</tt> makes the
 functions <em class="replaceable"><tt>function</tt></em>, ... traced.  <em class="replaceable"><tt>function</tt></em> should be either a symbol or
 a list <tt class="code">(<em class="replaceable"><tt>symbol</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
 <tt class="constant">:suppress-if</tt> <tt class="constant">:max-depth</tt>
 <tt class="constant">:step-if</tt>
 <tt class="constant">:pre</tt> <tt class="constant">:post</tt>
 <tt class="constant">:pre-break-if</tt> <tt class="constant">:post-break-if</tt>
 <tt class="constant">:pre-print</tt> <tt class="constant">:post-print</tt>
 <tt class="constant">:PRINT</tt>)</tt>, where</p><div class="variablelist"><dl><dt><tt class="constant">:suppress-if</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>no trace output as long as <em class="replaceable"><tt>form</tt></em> is true
  </dd><dt><tt class="constant">:max-depth</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>no trace output as long as <tt class="code">(&gt;
  *trace-level* <em class="replaceable"><tt>form</tt></em>)</tt>. This is useful for tracing functions that
  are use by the tracer itself, such as <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a>, or otherwise when
  tracing would lead to an infinite recursion.
  </dd><dt><tt class="constant">:step-if</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>invokes the stepper as soon as <em class="replaceable"><tt>form</tt></em> is true
  </dd><dt><tt class="constant">:pre</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>evaluates <em class="replaceable"><tt>form</tt></em> before calling the function
  </dd><dt><tt class="constant">:post</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>evaluates <em class="replaceable"><tt>form</tt></em> after return from the function
  </dd><dt><tt class="constant">:pre-break-if</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>goes into the break loop before calling the
   function if <em class="replaceable"><tt>form</tt></em> is true</dd><dt><tt class="constant">:post-break-if</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>goes into the break loop after return from the
   function if <em class="replaceable"><tt>form</tt></em> is true</dd><dt><tt class="constant">:pre-print</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>prints the values of <em class="replaceable"><tt>form</tt></em> before calling the
   function</dd><dt><tt class="constant">:post-print</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>prints the values of <em class="replaceable"><tt>form</tt></em> after return from the
   function</dd><dt><tt class="constant">:PRINT</tt> <em class="replaceable"><tt>form</tt></em></dt><dd>prints the values of <em class="replaceable"><tt>form</tt></em> both before calling
   and after return from the function</dd></dl></div><p>In all these forms you can access the following variables:
</p><div class="variablelist"><dl><dt><tt class="varname">EXT:*TRACE-FUNCTION*</tt></dt><dd>the function itself
  </dd><dt><tt class="varname">EXT:*TRACE-ARGS*</tt></dt><dd>the arguments to the function
  </dd><dt><tt class="varname">EXT:*TRACE-FORM*</tt></dt><dd>the function/macro call as form
  </dd><dt><a id="trace-val"></a><a href="#trace-val"><tt class="varname">EXT:*TRACE-VALUES*</tt></a></dt><dd>after return from the function: the list of return
  values from the function call</dd></dl></div><p>
and you can leave the function call with specified values by using
<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><tt class="function">RETURN</tt></a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">UNTRACE</tt></a> are also applicable to functions
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <em class="replaceable"><tt>symbol</tt></em>)</tt> and to macros, but not to
 locally defined functions and macros.</p><p><a id="trace-indent"></a><b>Variable <a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a>. </b>If you want the <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> level to be indicated by the indentation
in addition to the printed numbers, set <a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a> to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
Initially it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> since many nested traced calls will easily
exhaust the available line length.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="inspect"></a>25.2.5. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> takes a keyword argument
 <tt class="constant">:frontend</tt>, which specifies the way <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will
 interact with the user.</p><div class="variablelist"><p class="title"><b>Available <tt class="constant">:frontend</tt>s for
   <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><dl><dt><tt class="constant">:tty</tt></dt><dd>The interaction is conducted via the <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>
    stream.  Please use the <strong class="userinput"><tt>:h</tt></strong> command to get the
    list of all available commands.</dd><dt><tt class="constant">:http</tt></dt><dd><p>A window in your Web browser (specified by the
    <a href="#browser"><tt class="constant">:BROWSER</tt></a> keyword argument) is opened and it is controlled by
    <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> via a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>, using the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> protocol.
    You should be able to use all the standard browser features.</p><p>Since <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is not multitasking at this time, you will not
    be able to do anything else during an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> session.  Please click on
    the <strong class="userinput"><tt>quit</tt></strong> link to terminate the session.</p><p>Please be aware though, that once you terminate an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a>
    session, all links in all <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> windows in your browser will become
    obsolete and using them in a new <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> session will result in
    unpredictable behavior.</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="room"></a>25.2.6. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a> returns two values: the number of bytes
 currently occupied by Lisp objects, and the number of bytes that can be
 allocated before the next regular <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion occurs.</p><p>The function
 <strong class="first"><em class="firstterm"><a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection"><tt class="function">EXT:GC</tt></a>
  <a id="gc-func" class="indexterm"></a></em></strong>
 starts a global <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion and its return value has the same meaning as
 the second value of <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="time"></a>25.2.7. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a></h3></div></div></div><p>The timing data printed by the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a> includes:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td>the real time ("wall" time),</td></tr><tr><td>the run time (processor time for this process),</td></tr><tr><td>the number of bytes allocated, and</td></tr><tr><td>the number of <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ions performed, if any.</td></tr></table><p>The macro <strong class="first"><em class="firstterm"><a href="#time" title="25.2.7.&#xA0;Macro TIME"><tt class="function">EXT:TIMES</tt></a></em></strong> (mnemonic: "TIME and Space")
 is like the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a>: <tt class="code">(<a href="#time" title="25.2.7.&#xA0;Macro TIME"><tt class="function">EXT:TIMES</tt></a> <em class="replaceable"><tt>form</tt></em>)</tt> evaluates the
 <em class="replaceable"><tt>form</tt></em>, and, as a side effect, outputs detailed information about the
 memory allocations caused by this evaluation.  It also prints
 everything printed by <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ed"></a>25.2.8. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><tt class="function">ED</tt></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><tt class="function">ED</tt></a> calls the external editor specified by the value
 of <tt class="code">(<a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> "EDITOR")</tt>
 or, failing that, the value of the variable
 <strong class="first"><em class="firstterm"><a href="#ed" title="25.2.8.&#xA0;Function ED"><tt class="varname">CUSTOM:*EDITOR*</tt></a></em></strong> (see <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>).
 If the argument is a function name which was defined in the current
 session (not loaded from a file), the program text to be edited is a
 pretty-printed version (without comments) of the text which was used to
 define the function.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="clock"></a>25.2.9. Clock Time</h3></div></div></div>
<!--#if !(defined(UNIX) || defined(WIN32))--><div class="variablelist"><a id="default-tz"></a><p class="title"><b>Default Time Zone</b></p><dl><dt>Platform dependent: unknown platforms only.</dt><dd>The variable <strong class="first"><em class="firstterm"><a href="#default-tz"><tt class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</tt></a></em></strong>
   contains the default time zone used by <a href="http://www.lisp.org/HyperSpec/Body/fun_encode-universal-time.html" target="_top"><tt class="function">ENCODE-UNIVERSAL-TIME</tt></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-universal-time.html" target="_top"><tt class="function">DECODE-UNIVERSAL-TIME</tt></a>.  It is initially set to -1
   (which means 1 hour east of Greenwich, i.e., Mid European Time).
</dd></dl></div>
<!--#endif-->
<p>The <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#time_zone" target="_top">time
 zone</a> in a decoded time must not necessarily be an
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>, but (as <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> number)
 it should be a multiple of <tt class="data">1/3600</tt>.</p><div class="table"><a id="internal-time-units-table"></a><p class="title"><b>Table 25.7. Time granularity</b></p><table summary="Time granularity" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">platform</th><th align="center"><a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a></th><th align="center"><a href="http://winehq.com/" target="_top"><strong>Win32</strong></a></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_intern_s-per-second.html" target="_top"><tt class="constant">INTERNAL-TIME-UNITS-PER-SECOND</tt></a></td><td align="center">1,000,000</td><td align="center">10,000,000</td></tr></tbody></table></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-internal-run-time.html" target="_top"><tt class="function">GET-INTERNAL-RUN-TIME</tt></a> returns the amount of run time
 consumed by the current <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process since its startup.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="machine"></a>25.2.10. Machine</h3></div></div></div><div class="variablelist">
<!--#ifdef MACHINE_KNOWN--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platform only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a>
   should be defined in a site-specific <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
   The default implementations try to read the value of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>
   <tt class="envar">ORGANIZATION</tt>, and, failing that, call <a href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html" target="_top"><tt class="function">uname</tt></a>.
</dd><dt>Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platform only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a>
   should be defined in a site-specific <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
   The default implementations try to read the registry.
</dd>
<!--#else--><dt>Platform dependent: unknown platforms only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-type.html" target="_top"><tt class="function">MACHINE-TYPE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-version.html" target="_top"><tt class="function">MACHINE-VERSION</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><tt class="function">MACHINE-INSTANCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a> should be
   defined by every user in his user-specific <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
</dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="apropos"></a>25.2.11. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a></h3></div></div></div><p>The search performed by <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a> is
 case-insensitive.</p><p><b>Variable <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> print more information about the symbols it
 found by setting <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a> to a list containing some of
 <tt class="constant">:FUNCTION</tt>, <tt class="constant">:VARIABLE</tt>, <tt class="constant">:TYPE</tt>, and <tt class="constant">:CLASS</tt>
 or just set it to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> to get all of the values.</p><p><b>Variable <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a> be more flexible in
 their search by setting <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of one
 argument, a pattern (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>), returning a new <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of one
 argument, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> name (also a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>),
 which returns non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> when the symbol name matches the pattern
 for the purposes of <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a>.
 When <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_search.html" target="_top"><tt class="function">SEARCH</tt></a> is used.
 Some <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s come with functions which can be used for
 <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>, e.g., <a href="#re-matcher"><tt class="function">REGEXP:REGEXP-MATCHER</tt></a>,
 <tt class="function">WILDCARD:WILDCARD-MATCHER</tt>,
 <a href="#pcre-matcher"><tt class="function">PCRE:PCRE-MATCHER</tt></a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dribble"></a>25.2.12. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><tt class="function">DRIBBLE</tt></a></h3></div></div></div><p>If <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><tt class="function">DRIBBLE</tt></a> is called with an argument, and dribbling is already
 enabled, a warning is printed, and the new dribbling request is
 ignored.</p><p>Dribbling is implemented via a kind (but <strong>not</strong> <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a>) of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a>, named <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>.
 If you have a <em class="replaceable"><tt>source</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <em class="replaceable"><tt>x</tt></em> and you want all transactions
 (input and output) on <em class="replaceable"><tt>x</tt></em> to be copied to the <em class="replaceable"><tt>target</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <em class="replaceable"><tt>y</tt></em>,
 you can do
 <a id="dribble-example"></a></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a> *loggable* <em class="replaceable"><tt>x</tt></em>)
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <em class="replaceable"><tt>x</tt></em> (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-synonym-stream.html" target="_top"><tt class="function">MAKE-SYNONYM-STREAM</tt></a> '*loggable*))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> toggle-logging (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> s)
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><tt class="function">MULTIPLE-VALUE-BIND</tt></a> (so ta) (dribble-toggle *loggable* s)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_streamp.html" target="_top"><tt class="function">STREAMP</tt></a> so) (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> *loggable* so))
      ta))
  (toggle-logging <em class="replaceable"><tt>y</tt></em>)     ; start logging
  ...
  (toggle-logging)       ; finish logging
  ...
  (toggle-logging <em class="replaceable"><tt>y</tt></em>)     ; restart logging
  ...
  (toggle-logging)       ; finish logging
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> <em class="replaceable"><tt>y</tt></em>)
 </pre></td></tr></table><div class="variablelist"><dl><dt><a id="drist"></a><tt class="code">
    (<tt class="function">EXT:DRIBBLE-STREAM</tt> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>When <em class="replaceable"><tt>stream</tt></em> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns two values:
    the <em class="replaceable"><tt>source</tt></em> and the <em class="replaceable"><tt>target</tt></em> streams.  Otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
 </dd><dt><a id="drist-p"></a><tt class="code">
    (<tt class="function">EXT:DRIBBLE-STREAM-P</tt> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>When <em class="replaceable"><tt>stream</tt></em> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, otherwise
    returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="drist-so"></a><tt class="code">
    (<tt class="function">EXT:DRIBBLE-STREAM-SOURCE</tt> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>When <em class="replaceable"><tt>stream</tt></em> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns its
    <em class="replaceable"><tt>source</tt></em> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><tt class="classname">TYPE-ERROR</tt></a>.
 </dd><dt><a id="drist-ta"></a><tt class="code">
    (<tt class="function">EXT:DRIBBLE-STREAM-TARGET</tt> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>When <em class="replaceable"><tt>stream</tt></em> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns its
    <em class="replaceable"><tt>target</tt></em> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><tt class="classname">TYPE-ERROR</tt></a>.
 </dd><dt><a id="mk-drist"></a><tt class="code">
     (<tt class="function">EXT:MAKE-DRIBBLE-STREAM</tt>
     <em class="replaceable"><tt>source</tt></em> <em class="replaceable"><tt>target</tt></em>)</tt></dt><dd>Create a new <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>.
 </dd><dt><a id="dri-toggle"></a><tt class="code">
    (<tt class="function">EXT:DRIBBLE-TOGGLE</tt> <em class="replaceable"><tt>stream</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>pathname</tt></em>)</tt></dt><dd>When <em class="replaceable"><tt>stream</tt></em> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> and <em class="replaceable"><tt>pathname</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    writes a dribble termination note to the <em class="replaceable"><tt>stream</tt></em>'s <em class="replaceable"><tt>target</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and returns <em class="replaceable"><tt>stream</tt></em>'s <em class="replaceable"><tt>source</tt></em> and <em class="replaceable"><tt>target</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s;
    when <em class="replaceable"><tt>stream</tt></em> is not a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> and <em class="replaceable"><tt>pathname</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    creates a new <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, dribbling from <em class="replaceable"><tt>stream</tt></em> to <em class="replaceable"><tt>pathname</tt></em>,
    writes a dribble initialization note to <em class="replaceable"><tt>pathname</tt></em>,
    and return the <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> (the second value is the <em class="replaceable"><tt>target</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>);
    otherwise <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a> that no appropriate action may be taken.
    <em class="replaceable"><tt>pathname</tt></em> may be an open <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> or a <a href="#path-des">pathname designator</a>.
    See <a href="#dribble-example">above</a> for the sample usage.
    See also <tt class="filename">#P"src/dribble.lisp"</tt> in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
    source tree.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="version"></a>25.2.13. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a> returns
 the numeric version (like <tt class="literal">3.14</tt>), and
 the release date (like <tt class="literal">"1999-07-21"</tt>).
 When running on the same machine on which <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> was built, it appends
  the binary build and <a href="impnotes.html#image" class="olink">memory image</a> dump date in universal time
  (like <tt class="literal">3141592654</tt>).
 When running on a different machine, it appends the <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><tt class="function">MACHINE-INSTANCE</tt></a>
  of the machine on which it was built.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="argv"></a>25.2.14. Function <tt class="function">EXT:ARGV</tt></h3></div></div></div><p>This function will return a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> command line arguments passed to the runtime, including
 those already processed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Use <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a> instead of this function to get the arguments for your program.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="glossary"></a>Chapter 26. Glossary
   <a href="http://www.lisp.org/HyperSpec/Body/chap-26.html" target="_top">[CLHS-26]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="appendix"></a>Chapter 27. Appendix
   <a href="http://www.lisp.org/HyperSpec/Body/chap-a.html" target="_top">[CLHS-a]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="issues"></a>Chapter 28. X3J13 Issue Index
   <a href="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html" target="_top">[CLHS-ic]</a></h2></div></div></div><p>This is the list of ANSI CL issues and their current status in
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, i.e., whether <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> supports code that makes use of the
 functionality specified by the vote.</p><div class="variablelist"><a id="issues-list"></a><p class="title"><b>X3J13 Issues</b></p><dl><dt><a id="iss001"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss001.html" target="_top">&amp;ENVIRONMENT-BINDING-ORDER:FIRST</a></dt><dd>yes</dd><dt><a id="iss002"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss002.html" target="_top">ACCESS-ERROR-NAME</a></dt><dd>yes</dd><dt><a id="iss003"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss003.html" target="_top">ADJUST-ARRAY-DISPLACEMENT</a></dt><dd>yes</dd><dt><a id="iss004"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss004.html" target="_top">ADJUST-ARRAY-FILL-POINTER</a></dt><dd>yes</dd><dt><a id="iss005"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss005.html" target="_top">ADJUST-ARRAY-NOT-ADJUSTABLE:IMPLICIT-COPY</a></dt><dd>yes</dd><dt><a id="iss006"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss006.html" target="_top">ALLOCATE-INSTANCE:ADD</a></dt><dd>yes</dd><dt><a id="iss007"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss007.html" target="_top">ALLOW-LOCAL-INLINE:INLINE-NOTINLINE</a></dt><dd>yes</dd><dt><a id="iss008"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss008.html" target="_top">ALLOW-OTHER-KEYS-NIL:PERMIT</a></dt><dd>yes</dd><dt><a id="iss009"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss009.html" target="_top">AREF-1D</a></dt><dd>yes</dd><dt><a id="iss010"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss010.html" target="_top">ARGUMENT-MISMATCH-ERROR-AGAIN:CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss011"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss011.html" target="_top">ARGUMENT-MISMATCH-ERROR-MOON:FIX</a></dt><dd>yes</dd><dt><a id="iss012"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss012.html" target="_top">ARGUMENT-MISMATCH-ERROR:MORE-CLARIFICATIONS</a></dt><dd>yes, except for argument list checking in
     <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> in compiled code (items 11,12)
     </dd><dt><a id="iss013"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss013.html" target="_top">ARGUMENTS-UNDERSPECIFIED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss014"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss014.html" target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a></dt><dd>yes</dd><dt><a id="iss015"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss015.html" target="_top">ARRAY-TYPE-ELEMENT-TYPE-SEMANTICS:UNIFY-UPGRADING</a></dt><dd>yes</dd><dt><a id="iss016"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss016.html" target="_top">ASSERT-ERROR-TYPE:ERROR</a></dt><dd>yes</dd><dt><a id="iss017"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss017.html" target="_top">ASSOC-RASSOC-IF-KEY</a></dt><dd>yes</dd><dt><a id="iss018"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss018.html" target="_top">ASSOC-RASSOC-IF-KEY:YES</a></dt><dd>yes</dd><dt><a id="iss019"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss019.html" target="_top">BOA-AUX-INITIALIZATION:ERROR-ON-READ</a></dt><dd>yes</dd><dt><a id="iss020"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss020.html" target="_top">BREAK-ON-WARNINGS-OBSOLETE:REMOVE</a></dt><dd>yes</dd><dt><a id="iss021"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss021.html" target="_top">BROADCAST-STREAM-RETURN-VALUES:CLARIFY-MINIMALLY</a></dt><dd>yes</dd><dt><a id="iss022"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss022.html" target="_top">BUTLAST-NEGATIVE:SHOULD-SIGNAL</a></dt><dd>yes</dd><dt><a id="iss023"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss023.html" target="_top">CHANGE-CLASS-INITARGS:PERMIT</a></dt><dd>yes</dd><dt><a id="iss024"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss024.html" target="_top">CHAR-NAME-CASE:X3J13-MAR-91</a></dt><dd>yes</dd><dt><a id="iss025"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss025.html" target="_top">CHARACTER-LOOSE-ENDS:FIX</a></dt><dd>yes</dd><dt><a id="iss026"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss026.html" target="_top">CHARACTER-PROPOSAL:2</a></dt><dd>yes</dd><dt><a id="iss027"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss027.html" target="_top">CHARACTER-PROPOSAL:2-1-1</a></dt><dd>yes</dd><dt><a id="iss028"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss028.html" target="_top">CHARACTER-PROPOSAL:2-1-2</a></dt><dd>yes</dd><dt><a id="iss029"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss029.html" target="_top">CHARACTER-PROPOSAL:2-2-1</a></dt><dd>yes</dd><dt><a id="iss030"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss030.html" target="_top">CHARACTER-PROPOSAL:2-3-1</a></dt><dd>yes</dd><dt><a id="iss031"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss031.html" target="_top">CHARACTER-PROPOSAL:2-3-2</a></dt><dd>yes</dd><dt><a id="iss032"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss032.html" target="_top">CHARACTER-PROPOSAL:2-3-3</a></dt><dd>yes</dd><dt><a id="iss033"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss033.html" target="_top">CHARACTER-PROPOSAL:2-3-4</a></dt><dd>yes</dd><dt><a id="iss034"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss034.html" target="_top">CHARACTER-PROPOSAL:2-3-5</a></dt><dd>yes</dd><dt><a id="iss035"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss035.html" target="_top">CHARACTER-PROPOSAL:2-3-6</a></dt><dd>yes</dd><dt><a id="iss036"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss036.html" target="_top">CHARACTER-PROPOSAL:2-4-1</a></dt><dd>yes</dd><dt><a id="iss037"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss037.html" target="_top">CHARACTER-PROPOSAL:2-4-2</a></dt><dd>yes</dd><dt><a id="iss038"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss038.html" target="_top">CHARACTER-PROPOSAL:2-4-3</a></dt><dd>yes</dd><dt><a id="iss039"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss039.html" target="_top">CHARACTER-PROPOSAL:2-5-2</a></dt><dd>yes</dd><dt><a id="iss040"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss040.html" target="_top">CHARACTER-PROPOSAL:2-5-6</a></dt><dd>yes</dd><dt><a id="iss041"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss041.html" target="_top">CHARACTER-PROPOSAL:2-5-7</a></dt><dd>yes</dd><dt><a id="iss042"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss042.html" target="_top">CHARACTER-PROPOSAL:2-6-1</a></dt><dd>yes</dd><dt><a id="iss043"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss043.html" target="_top">CHARACTER-PROPOSAL:2-6-2</a></dt><dd>yes</dd><dt><a id="iss044"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss044.html" target="_top">CHARACTER-PROPOSAL:2-6-3</a></dt><dd>yes</dd><dt><a id="iss045"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss045.html" target="_top">CHARACTER-PROPOSAL:2-6-5</a></dt><dd>yes</dd><dt><a id="iss046"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss046.html" target="_top">CHARACTER-VS-CHAR:LESS-INCONSISTENT-SHORT</a></dt><dd>yes</dd><dt><a id="iss047"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss047.html" target="_top">CLASS-OBJECT-SPECIALIZER:AFFIRM</a></dt><dd>yes</dd><dt><a id="iss048"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss048.html" target="_top">CLOS-CONDITIONS-AGAIN:ALLOW-SUBSET</a></dt><dd>yes</dd><dt><a id="iss049"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss049.html" target="_top">CLOS-CONDITIONS:INTEGRATE</a></dt><dd>yes</dd><dt><a id="iss050"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss050.html" target="_top">CLOS-ERROR-CHECKING-ORDER:NO-APPLICABLE-METHOD-FIRST</a></dt><dd>yes</dd><dt><a id="iss051"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss051.html" target="_top">CLOS-MACRO-COMPILATION:MINIMAL</a></dt><dd>yes</dd><dt><a id="iss052"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss052.html" target="_top">CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</a></dt><dd>yes</dd><dt><a id="iss053"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss053.html" target="_top">CLOSED-STREAM-OPERATIONS:ALLOW-INQUIRY</a></dt><dd>yes</dd><dt><a id="iss054"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss054.html" target="_top">COERCING-SETF-NAME-TO-FUNCTION:ALL-FUNCTION-NAMES</a></dt><dd>yes</dd><dt><a id="iss055"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss055.html" target="_top">COLON-NUMBER</a></dt><dd>yes</dd><dt><a id="iss056"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss056.html" target="_top">COMMON-FEATURES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss057"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss057.html" target="_top">COMMON-TYPE:REMOVE</a></dt><dd>yes</dd><dt><a id="iss058"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss058.html" target="_top">COMPILE-ARGUMENT-PROBLEMS-AGAIN:FIX</a></dt><dd>yes</dd><dt><a id="iss059"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss059.html" target="_top">COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss060"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss060.html" target="_top">COMPILE-FILE-OUTPUT-FILE-DEFAULTS:INPUT-FILE</a></dt><dd>yes</dd><dt><a id="iss061"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss061.html" target="_top">COMPILE-FILE-PACKAGE</a></dt><dd>yes</dd><dt><a id="iss062"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss062.html" target="_top">COMPILE-FILE-PATHNAME-ARGUMENTS:MAKE-CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss063"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss063.html" target="_top">COMPILE-FILE-SYMBOL-HANDLING:NEW-REQUIRE-CONSISTENCY</a></dt><dd>yes</dd><dt><a id="iss064"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss064.html" target="_top">COMPILED-FUNCTION-REQUIREMENTS:TIGHTEN</a></dt><dd>yes</dd><dt><a id="iss065"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss065.html" target="_top">COMPILER-DIAGNOSTICS:USE-HANDLER</a></dt><dd>no</dd><dt><a id="iss066"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss066.html" target="_top">COMPILER-LET-CONFUSION:ELIMINATE</a></dt><dd>yes</dd><dt><a id="iss067"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss067.html" target="_top">COMPILER-VERBOSITY:LIKE-LOAD</a></dt><dd>yes</dd><dt><a id="iss068"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss068.html" target="_top">COMPILER-WARNING-STREAM</a></dt><dd>yes</dd><dt><a id="iss069"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss069.html" target="_top">COMPLEX-ATAN-BRANCH-CUT:TWEAK</a></dt><dd>yes</dd><dt><a id="iss070"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss070.html" target="_top">COMPLEX-ATANH-BOGUS-FORMULA:TWEAK-MORE</a></dt><dd>yes</dd><dt><a id="iss071"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss071.html" target="_top">COMPLEX-RATIONAL-RESULT:EXTEND</a></dt><dd>yes</dd><dt><a id="iss072"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss072.html" target="_top">COMPUTE-APPLICABLE-METHODS:GENERIC</a></dt><dd>yes</dd><dt><a id="iss073"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss073.html" target="_top">CONCATENATE-SEQUENCE:SIGNAL-ERROR</a></dt><dd>yes</dd><dt><a id="iss074"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss074.html" target="_top">CONDITION-ACCESSORS-SETFABLE:NO</a></dt><dd>yes</dd><dt><a id="iss075"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss075.html" target="_top">CONDITION-RESTARTS:BUGGY</a></dt><dd>yes</dd><dt><a id="iss076"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss076.html" target="_top">CONDITION-RESTARTS:PERMIT-ASSOCIATION</a></dt><dd>yes</dd><dt><a id="iss077"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss077.html" target="_top">CONDITION-SLOTS:HIDDEN</a></dt><dd>yes</dd><dt><a id="iss078"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss078.html" target="_top">CONS-TYPE-SPECIFIER:ADD</a></dt><dd>yes</dd><dt><a id="iss079"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss079.html" target="_top">CONSTANT-CIRCULAR-COMPILATION:YES</a></dt><dd>yes</dd><dt><a id="iss080"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss080.html" target="_top">CONSTANT-COLLAPSING:GENERALIZE</a></dt><dd>yes</dd><dt><a id="iss081"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss081.html" target="_top">CONSTANT-COMPILABLE-TYPES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss082"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss082.html" target="_top">CONSTANT-FUNCTION-COMPILATION:NO</a></dt><dd>no</dd><dt><a id="iss083"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss083.html" target="_top">CONSTANT-MODIFICATION:DISALLOW</a></dt><dd>yes</dd><dt><a id="iss084"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss084.html" target="_top">CONSTANTP-DEFINITION:INTENTIONAL</a></dt><dd>yes</dd><dt><a id="iss085"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss085.html" target="_top">CONSTANTP-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss086"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss086.html" target="_top">CONTAGION-ON-NUMERICAL-COMPARISONS:TRANSITIVE</a></dt><dd>yes</dd><dt><a id="iss087"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss087.html" target="_top">COPY-SYMBOL-COPY-PLIST:COPY-LIST</a></dt><dd>yes</dd><dt><a id="iss088"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss088.html" target="_top">COPY-SYMBOL-PRINT-NAME:EQUAL</a></dt><dd>yes</dd><dt><a id="iss089"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss089.html" target="_top">DATA-IO:ADD-SUPPORT</a></dt><dd>yes</dd><dt><a id="iss090"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss090.html" target="_top">DATA-TYPES-HIERARCHY-UNDERSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss091"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss091.html" target="_top">DEBUGGER-HOOK-VS-BREAK:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss092"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss092.html" target="_top">DECLARATION-SCOPE:NO-HOISTING</a></dt><dd>no</dd><dt><a id="iss093"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss093.html" target="_top">DECLARE-ARRAY-TYPE-ELEMENT-REFERENCES:RESTRICTIVE</a></dt><dd>yes</dd><dt><a id="iss094"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss094.html" target="_top">DECLARE-FUNCTION-AMBIGUITY:DELETE-FTYPE-ABBREVIATION</a></dt><dd>yes</dd><dt><a id="iss095"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss095.html" target="_top">DECLARE-MACROS:FLUSH</a></dt><dd>yes</dd><dt><a id="iss096"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss096.html" target="_top">DECLARE-TYPE-FREE:LEXICAL</a></dt><dd>yes</dd><dt><a id="iss097"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss097.html" target="_top">DECLS-AND-DOC</a></dt><dd>??</dd><dt><a id="iss098"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss098.html" target="_top">DECODE-UNIVERSAL-TIME-DAYLIGHT:LIKE-ENCODE</a></dt><dd>yes</dd><dt><a id="iss099"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss099.html" target="_top">DEFCONSTANT-SPECIAL:NO</a></dt><dd>yes</dd><dt><a id="iss100"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss100.html" target="_top">DEFGENERIC-DECLARE:ALLOW-MULTIPLE</a></dt><dd>yes</dd><dt><a id="iss101"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss101.html" target="_top">DEFINE-COMPILER-MACRO:X3J13-NOV89</a></dt><dd>yes</dd><dt><a id="iss102"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss102.html" target="_top">DEFINE-CONDITION-SYNTAX:INCOMPATIBLY-MORE-LIKE-DEFCLASS+EMPHASIZE-READ-ONLY</a></dt><dd>yes</dd><dt><a id="iss103"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss103.html" target="_top">DEFINE-METHOD-COMBINATION-BEHAVIOR:CLARIFY</a></dt><dd>no</dd><dt><a id="iss104"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss104.html" target="_top">DEFINING-MACROS-NON-TOP-LEVEL:ALLOW</a></dt><dd>yes</dd><dt><a id="iss105"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss105.html" target="_top">DEFMACRO-BLOCK-SCOPE:EXCLUDES-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss106"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss106.html" target="_top">DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION</a></dt><dd>yes</dd><dt><a id="iss107"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss107.html" target="_top">DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss108"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss108.html" target="_top">DEFPACKAGE:ADDITION</a></dt><dd>yes</dd><dt><a id="iss109"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss109.html" target="_top">DEFSTRUCT-CONSTRUCTOR-KEY-MIXTURE:ALLOW-KEY</a></dt><dd>yes</dd><dt><a id="iss110"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss110.html" target="_top">DEFSTRUCT-CONSTRUCTOR-OPTIONS:EXPLICIT</a></dt><dd>yes</dd><dt><a id="iss111"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss111.html" target="_top">DEFSTRUCT-CONSTRUCTOR-SLOT-VARIABLES:NOT-BOUND</a></dt><dd>yes</dd><dt><a id="iss112"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss112.html" target="_top">DEFSTRUCT-COPIER-ARGUMENT-TYPE:RESTRICT</a></dt><dd>yes</dd><dt><a id="iss113"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss113.html" target="_top">DEFSTRUCT-COPIER:ARGUMENT-TYPE</a></dt><dd>yes</dd><dt><a id="iss114"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss114.html" target="_top">DEFSTRUCT-DEFAULT-VALUE-EVALUATION:IFF-NEEDED</a></dt><dd>yes</dd><dt><a id="iss115"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss115.html" target="_top">DEFSTRUCT-INCLUDE-DEFTYPE:EXPLICITLY-UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss116"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss116.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-AGAIN:X3J13-MAR-93</a></dt><dd>yes</dd><dt><a id="iss117"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss117.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES</a></dt><dd>yes</dd><dt><a id="iss118"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss118.html" target="_top">DEFSTRUCT-REDEFINITION:ERROR</a></dt><dd>yes</dd><dt><a id="iss119"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss119.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</a></dt><dd>yes</dd><dt><a id="iss120"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss120.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NUMBER</a></dt><dd>yes</dd><dt><a id="iss121"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss121.html" target="_top">DEFTYPE-DESTRUCTURING:YES</a></dt><dd>yes</dd><dt><a id="iss122"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss122.html" target="_top">DEFTYPE-KEY:ALLOW</a></dt><dd>yes</dd><dt><a id="iss123"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss123.html" target="_top">DEFVAR-DOCUMENTATION:UNEVALUATED</a></dt><dd>yes</dd><dt><a id="iss124"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss124.html" target="_top">DEFVAR-INIT-TIME:NOT-DELAYED</a></dt><dd>yes</dd><dt><a id="iss125"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss125.html" target="_top">DEFVAR-INITIALIZATION:CONSERVATIVE</a></dt><dd>yes</dd><dt><a id="iss126"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss126.html" target="_top">DEPRECATION-POSITION:LIMITED</a></dt><dd>yes</dd><dt><a id="iss127"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss127.html" target="_top">DESCRIBE-INTERACTIVE:NO</a></dt><dd>yes</dd><dt><a id="iss128"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss128.html" target="_top">DESCRIBE-UNDERSPECIFIED:DESCRIBE-OBJECT</a></dt><dd>yes</dd><dt><a id="iss129"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss129.html" target="_top">DESTRUCTIVE-OPERATIONS:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss130"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss130.html" target="_top">DESTRUCTURING-BIND:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss131"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss131.html" target="_top">DISASSEMBLE-SIDE-EFFECT:DO-NOT-INSTALL</a></dt><dd>yes</dd><dt><a id="iss132"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss132.html" target="_top">DISPLACED-ARRAY-PREDICATE:ADD</a></dt><dd>yes</dd><dt><a id="iss133"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss133.html" target="_top">DO-SYMBOLS-BLOCK-SCOPE:ENTIRE-FORM</a></dt><dd>yes</dd><dt><a id="iss134"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss134.html" target="_top">DO-SYMBOLS-DUPLICATES</a></dt><dd>yes</dd><dt><a id="iss135"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss135.html" target="_top">DOCUMENTATION-FUNCTION-BUGS:FIX</a></dt><dd>yes</dd><dt><a id="iss136"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss136.html" target="_top">DOCUMENTATION-FUNCTION-TANGLED:REQUIRE-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss137"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss137.html" target="_top">DOTIMES-IGNORE:X3J13-MAR91</a></dt><dd>yes</dd><dt><a id="iss138"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss138.html" target="_top">DOTTED-LIST-ARGUMENTS:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss139"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss139.html" target="_top">DOTTED-MACRO-FORMS:ALLOW</a></dt><dd>yes</dd><dt><a id="iss140"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss140.html" target="_top">DRIBBLE-TECHNIQUE</a></dt><dd>yes</dd><dt><a id="iss141"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss141.html" target="_top">DYNAMIC-EXTENT-FUNCTION:EXTEND</a></dt><dd>yes</dd><dt><a id="iss142"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss142.html" target="_top">DYNAMIC-EXTENT:NEW-DECLARATION</a></dt><dd>yes</dd><dt><a id="iss143"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss143.html" target="_top">EQUAL-STRUCTURE:MAYBE-STATUS-QUO</a></dt><dd>yes</dd><dt><a id="iss144"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss144.html" target="_top">ERROR-TERMINOLOGY-WARNING:MIGHT</a></dt><dd>yes</dd><dt><a id="iss145"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss145.html" target="_top">EVAL-OTHER:SELF-EVALUATE</a></dt><dd>yes</dd><dt><a id="iss146"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss146.html" target="_top">EVAL-TOP-LEVEL:LOAD-LIKE-COMPILE-FILE</a></dt><dd>yes</dd><dt><a id="iss147"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss147.html" target="_top">EVAL-WHEN-NON-TOP-LEVEL:GENERALIZE-EVAL-NEW-KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss148"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss148.html" target="_top">EVAL-WHEN-OBSOLETE-KEYWORDS:X3J13-MAR-1993</a></dt><dd>no</dd><dt><a id="iss149"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss149.html" target="_top">EVALHOOK-STEP-CONFUSION:FIX</a></dt><dd>yes</dd><dt><a id="iss150"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss150.html" target="_top">EVALHOOK-STEP-CONFUSION:X3J13-NOV-89</a></dt><dd>yes</dd><dt><a id="iss151"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss151.html" target="_top">EXIT-EXTENT-AND-CONDITION-SYSTEM:LIKE-DYNAMIC-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss152"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss152.html" target="_top">EXIT-EXTENT:MINIMAL</a></dt><dd>yes, actually implement MEDIUM
    </dd><dt><a id="iss153"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss153.html" target="_top">EXPT-RATIO:P.211</a></dt><dd>yes</dd><dt><a id="iss154"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss154.html" target="_top">EXTENSIONS-POSITION:DOCUMENTATION</a></dt><dd>yes</dd><dt><a id="iss155"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss155.html" target="_top">EXTERNAL-FORMAT-FOR-EVERY-FILE-CONNECTION:MINIMUM</a></dt><dd>yes</dd><dt><a id="iss156"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss156.html" target="_top">EXTRA-RETURN-VALUES:NO</a></dt><dd>yes</dd><dt><a id="iss157"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss157.html" target="_top">FILE-OPEN-ERROR:SIGNAL-FILE-ERROR</a></dt><dd>yes</dd><dt><a id="iss158"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss158.html" target="_top">FIXNUM-NON-PORTABLE:TIGHTEN-DEFINITION</a></dt><dd>yes</dd><dt><a id="iss159"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss159.html" target="_top">FLET-DECLARATIONS</a></dt><dd>yes</dd><dt><a id="iss160"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss160.html" target="_top">FLET-DECLARATIONS:ALLOW</a></dt><dd>yes</dd><dt><a id="iss161"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss161.html" target="_top">FLET-IMPLICIT-BLOCK:YES</a></dt><dd>yes</dd><dt><a id="iss162"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss162.html" target="_top">FLOAT-UNDERFLOW:ADD-VARIABLES</a></dt><dd>yes</dd><dt><a id="iss163"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss163.html" target="_top">FLOATING-POINT-CONDITION-NAMES:X3J13-NOV-89</a></dt><dd>yes</dd><dt><a id="iss164"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss164.html" target="_top">FORMAT-ATSIGN-COLON</a></dt><dd>yes</dd><dt><a id="iss165"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss165.html" target="_top">FORMAT-COLON-UPARROW-SCOPE</a></dt><dd>yes</dd><dt><a id="iss166"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss166.html" target="_top">FORMAT-COMMA-INTERVAL</a></dt><dd>yes</dd><dt><a id="iss167"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss167.html" target="_top">FORMAT-E-EXPONENT-SIGN:FORCE-SIGN</a></dt><dd>yes</dd><dt><a id="iss168"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss168.html" target="_top">FORMAT-OP-C</a></dt><dd>yes</dd><dt><a id="iss169"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss169.html" target="_top">FORMAT-PRETTY-PRINT:YES</a></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>,
     <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> also bind <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-BASE*</tt></a> to 10 and
     <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-RADIX*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><a id="iss170"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss170.html" target="_top">FORMAT-STRING-ARGUMENTS:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss171"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss171.html" target="_top">FUNCTION-CALL-EVALUATION-ORDER:MORE-UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss172"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss172.html" target="_top">FUNCTION-COMPOSITION:JAN89-X3J13</a></dt><dd>yes</dd><dt><a id="iss173"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss173.html" target="_top">FUNCTION-DEFINITION:JAN89-X3J13</a></dt><dd>yes</dd><dt><a id="iss174"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss174.html" target="_top">FUNCTION-NAME:LARGE</a></dt><dd>yes</dd><dt><a id="iss175"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss175.html" target="_top">FUNCTION-TYPE</a></dt><dd>yes</dd><dt><a id="iss176"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss176.html" target="_top">FUNCTION-TYPE-ARGUMENT-TYPE-SEMANTICS:RESTRICTIVE</a></dt><dd>yes</dd><dt><a id="iss177"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss177.html" target="_top">FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD</a></dt><dd>yes</dd><dt><a id="iss178"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss178.html" target="_top">FUNCTION-TYPE-REST-LIST-ELEMENT:USE-ACTUAL-ARGUMENT-TYPE</a></dt><dd>yes</dd><dt><a id="iss179"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss179.html" target="_top">FUNCTION-TYPE:X3J13-MARCH-88</a></dt><dd>yes</dd><dt><a id="iss180"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss180.html" target="_top">GENERALIZE-PRETTY-PRINTER:UNIFY</a></dt><dd>no</dd><dt><a id="iss181"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a></dt><dd>yes</dd><dt><a id="iss182"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss182.html" target="_top">GENSYM-NAME-STICKINESS:LIKE-TEFLON</a></dt><dd>yes</dd><dt><a id="iss183"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss183.html" target="_top">GENTEMP-BAD-IDEA:DEPRECATE</a></dt><dd>yes</dd><dt><a id="iss184"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss184.html" target="_top">GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD</a></dt><dd>yes</dd><dt><a id="iss185"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss185.html" target="_top">GET-SETF-METHOD-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss186"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss186.html" target="_top">HASH-TABLE-ACCESS:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss187"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss187.html" target="_top">HASH-TABLE-KEY-MODIFICATION:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss188"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss188.html" target="_top">HASH-TABLE-PACKAGE-GENERATORS:ADD-WITH-WRAPPER</a></dt><dd>yes</dd><dt><a id="iss189"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss189.html" target="_top">HASH-TABLE-REHASH-SIZE-INTEGER</a></dt><dd>yes</dd><dt><a id="iss190"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss190.html" target="_top">HASH-TABLE-SIZE:INTENDED-ENTRIES</a></dt><dd>yes</dd><dt><a id="iss191"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss191.html" target="_top">HASH-TABLE-TESTS:ADD-EQUALP</a></dt><dd>yes</dd><dt><a id="iss192"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss192.html" target="_top">IEEE-ATAN-BRANCH-CUT:SPLIT</a></dt><dd>yes</dd><dt><a id="iss193"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss193.html" target="_top">IGNORE-USE-TERMINOLOGY:VALUE-ONLY</a></dt><dd>yes</dd><dt><a id="iss194"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss194.html" target="_top">IMPORT-SETF-SYMBOL-PACKAGE</a></dt><dd>yes</dd><dt><a id="iss195"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss195.html" target="_top">IN-PACKAGE-FUNCTIONALITY:MAR89-X3J13</a></dt><dd>yes</dd><dt><a id="iss196"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss196.html" target="_top">IN-SYNTAX:MINIMAL</a></dt><dd>yes</dd><dt><a id="iss197"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss197.html" target="_top">INITIALIZATION-FUNCTION-KEYWORD-CHECKING</a></dt><dd>yes</dd><dt><a id="iss198"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss198.html" target="_top">ISO-COMPATIBILITY:ADD-SUBSTRATE</a></dt><dd>yes</dd><dt><a id="iss199"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss199.html" target="_top">JUN90-TRIVIAL-ISSUES:11</a></dt><dd>yes</dd><dt><a id="iss200"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss200.html" target="_top">JUN90-TRIVIAL-ISSUES:14</a></dt><dd>yes</dd><dt><a id="iss201"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss201.html" target="_top">JUN90-TRIVIAL-ISSUES:24</a></dt><dd>yes</dd><dt><a id="iss202"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss202.html" target="_top">JUN90-TRIVIAL-ISSUES:25</a></dt><dd>yes</dd><dt><a id="iss203"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss203.html" target="_top">JUN90-TRIVIAL-ISSUES:27</a></dt><dd>yes for <a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><tt class="function">THE</tt></a>, no for <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> (spec not clear)
     </dd><dt><a id="iss204"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss204.html" target="_top">JUN90-TRIVIAL-ISSUES:3</a></dt><dd>yes</dd><dt><a id="iss205"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss205.html" target="_top">JUN90-TRIVIAL-ISSUES:4</a></dt><dd>yes</dd><dt><a id="iss206"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss206.html" target="_top">JUN90-TRIVIAL-ISSUES:5</a></dt><dd>yes</dd><dt><a id="iss207"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss207.html" target="_top">JUN90-TRIVIAL-ISSUES:9</a></dt><dd>yes</dd><dt><a id="iss208"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss208.html" target="_top">KEYWORD-ARGUMENT-NAME-PACKAGE:ANY</a></dt><dd>yes</dd><dt><a id="iss209"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss209.html" target="_top">LAST-N</a></dt><dd>yes</dd><dt><a id="iss210"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss210.html" target="_top">LCM-NO-ARGUMENTS:1</a></dt><dd>yes</dd><dt><a id="iss211"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss211.html" target="_top">LEXICAL-CONSTRUCT-GLOBAL-DEFINITION:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss212"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss212.html" target="_top">LISP-PACKAGE-NAME:COMMON-LISP</a></dt><dd>yes</dd><dt><a id="iss213"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss213.html" target="_top">LISP-SYMBOL-REDEFINITION-AGAIN:MORE-FIXES</a></dt><dd>yes</dd><dt><a id="iss214"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss214.html" target="_top">LISP-SYMBOL-REDEFINITION:MAR89-X3J13</a></dt><dd>yes</dd><dt><a id="iss215"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss215.html" target="_top">LOAD-OBJECTS:MAKE-LOAD-FORM</a></dt><dd>yes</dd><dt><a id="iss216"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss216.html" target="_top">LOAD-TIME-EVAL:R**2-NEW-SPECIAL-FORM</a></dt><dd>obsolete</dd><dt><a id="iss217"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss217.html" target="_top">LOAD-TIME-EVAL:R**3-NEW-SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss218"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss218.html" target="_top">LOAD-TRUENAME:NEW-PATHNAME-VARIABLES</a></dt><dd>yes</dd><dt><a id="iss219"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss219.html" target="_top">LOCALLY-TOP-LEVEL:SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss220"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss220.html" target="_top">LOOP-AND-DISCREPANCY:NO-REITERATION</a></dt><dd>yes</dd><dt><a id="iss221"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss221.html" target="_top">LOOP-FOR-AS-ON-TYPO:FIX-TYPO</a></dt><dd>yes</dd><dt><a id="iss222"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss222.html" target="_top">LOOP-INITFORM-ENVIRONMENT:PARTIAL-INTERLEAVING-VAGUE</a></dt><dd>no</dd><dt><a id="iss223"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss223.html" target="_top">LOOP-MISCELLANEOUS-REPAIRS:FIX</a></dt><dd>yes</dd><dt><a id="iss224"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss224.html" target="_top">LOOP-NAMED-BLOCK-NIL:OVERRIDE</a></dt><dd>yes</dd><dt><a id="iss225"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss225.html" target="_top">LOOP-PRESENT-SYMBOLS-TYPO:FLUSH-WRONG-WORDS</a></dt><dd>yes</dd><dt><a id="iss226"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss226.html" target="_top">LOOP-SYNTAX-OVERHAUL:REPAIR</a></dt><dd>yes</dd><dt><a id="iss227"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss227.html" target="_top">MACRO-AS-FUNCTION:DISALLOW</a></dt><dd>yes</dd><dt><a id="iss228"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss228.html" target="_top">MACRO-DECLARATIONS:MAKE-EXPLICIT</a></dt><dd>yes</dd><dt><a id="iss229"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss229.html" target="_top">MACRO-ENVIRONMENT-EXTENT:DYNAMIC</a></dt><dd>yes</dd><dt><a id="iss230"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss230.html" target="_top">MACRO-FUNCTION-ENVIRONMENT</a></dt><dd>obsolete</dd><dt><a id="iss231"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss231.html" target="_top">MACRO-FUNCTION-ENVIRONMENT:YES</a></dt><dd>yes</dd><dt><a id="iss232"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss232.html" target="_top">MACRO-SUBFORMS-TOP-LEVEL-P:ADD-CONSTRAINTS</a></dt><dd>no</dd><dt><a id="iss233"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss233.html" target="_top">MACROEXPAND-HOOK-DEFAULT:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss234"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss234.html" target="_top">MACROEXPAND-HOOK-INITIAL-VALUE:IMPLEMENTATION-DEPENDENT</a></dt><dd>yes</dd><dt><a id="iss235"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss235.html" target="_top">MACROEXPAND-RETURN-VALUE:TRUE</a></dt><dd>yes</dd><dt><a id="iss236"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss236.html" target="_top">MAKE-LOAD-FORM-CONFUSION:REWRITE</a></dt><dd>yes</dd><dt><a id="iss237"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss237.html" target="_top">MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS</a></dt><dd>yes</dd><dt><a id="iss238"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss238.html" target="_top">MAKE-PACKAGE-USE-DEFAULT:IMPLEMENTATION-DEPENDENT</a></dt><dd>yes</dd><dt><a id="iss239"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss239.html" target="_top">MAP-INTO:ADD-FUNCTION</a></dt><dd>yes</dd><dt><a id="iss240"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss240.html" target="_top">MAPPING-DESTRUCTIVE-INTERACTION:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss241"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss241.html" target="_top">METACLASS-OF-SYSTEM-CLASS:UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss242"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss242.html" target="_top">METHOD-COMBINATION-ARGUMENTS:CLARIFY</a></dt><dd>no</dd><dt><a id="iss243"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss243.html" target="_top">METHOD-INITFORM:FORBID-CALL-NEXT-METHOD</a></dt><dd>no</dd><dt><a id="iss244"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss244.html" target="_top">MUFFLE-WARNING-CONDITION-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss245"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss245.html" target="_top">MULTIPLE-VALUE-SETQ-ORDER:LIKE-SETF-OF-VALUES</a></dt><dd>yes</dd><dt><a id="iss246"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss246.html" target="_top">MULTIPLE-VALUES-LIMIT-ON-VARIABLES:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss247"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss247.html" target="_top">NINTERSECTION-DESTRUCTION</a></dt><dd>yes</dd><dt><a id="iss248"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss248.html" target="_top">NINTERSECTION-DESTRUCTION:REVERT</a></dt><dd>yes</dd><dt><a id="iss249"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss249.html" target="_top">NOT-AND-NULL-RETURN-VALUE:X3J13-MAR-93</a></dt><dd>yes</dd><dt><a id="iss250"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss250.html" target="_top">NTH-VALUE:ADD</a></dt><dd>yes</dd><dt><a id="iss251"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss251.html" target="_top">OPTIMIZE-DEBUG-INFO:NEW-QUALITY</a></dt><dd>yes</dd><dt><a id="iss252"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss252.html" target="_top">PACKAGE-CLUTTER:REDUCE</a></dt><dd>yes</dd><dt><a id="iss253"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss253.html" target="_top">PACKAGE-DELETION:NEW-FUNCTION</a></dt><dd>yes</dd><dt><a id="iss254"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss254.html" target="_top">PACKAGE-FUNCTION-CONSISTENCY:MORE-PERMISSIVE</a></dt><dd>yes</dd><dt><a id="iss255"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss255.html" target="_top">PARSE-ERROR-STREAM:SPLIT-TYPES</a></dt><dd>yes</dd><dt><a id="iss256"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss256.html" target="_top">PATHNAME-COMPONENT-CASE:KEYWORD-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss257"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss257.html" target="_top">PATHNAME-COMPONENT-VALUE:SPECIFY</a></dt><dd>no</dd><dt><a id="iss258"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss258.html" target="_top">PATHNAME-HOST-PARSING:RECOGNIZE-LOGICAL-HOST-NAMES</a></dt><dd>yes when <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    </dd><dt><a id="iss259"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss259.html" target="_top">PATHNAME-LOGICAL:ADD</a></dt><dd>yes</dd><dt><a id="iss260"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss260.html" target="_top">PATHNAME-PRINT-READ:SHARPSIGN-P</a></dt><dd>yes</dd><dt><a id="iss261"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss261.html" target="_top">PATHNAME-STREAM</a></dt><dd>yes</dd><dt><a id="iss262"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss262.html" target="_top">PATHNAME-STREAM:FILES-OR-SYNONYM</a></dt><dd>yes</dd><dt><a id="iss263"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss263.html" target="_top">PATHNAME-SUBDIRECTORY-LIST:NEW-REPRESENTATION</a></dt><dd>yes</dd><dt><a id="iss264"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss264.html" target="_top">PATHNAME-SYMBOL</a></dt><dd>yes when <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
 </dd><dt><a id="iss265"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss265.html" target="_top">PATHNAME-SYNTAX-ERROR-TIME:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss266"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss266.html" target="_top">PATHNAME-UNSPECIFIC-COMPONENT:NEW-TOKEN</a></dt><dd>yes</dd><dt><a id="iss267"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss267.html" target="_top">PATHNAME-WILD:NEW-FUNCTIONS</a></dt><dd>yes</dd><dt><a id="iss268"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss268.html" target="_top">PEEK-CHAR-READ-CHAR-ECHO:FIRST-READ-CHAR</a></dt><dd>yes</dd><dt><a id="iss269"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss269.html" target="_top">PLIST-DUPLICATES:ALLOW</a></dt><dd>yes</dd><dt><a id="iss270"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss270.html" target="_top">PRETTY-PRINT-INTERFACE</a></dt><dd>yes</dd><dt><a id="iss271"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss271.html" target="_top">PRINC-READABLY:X3J13-DEC-91</a></dt><dd>yes</dd><dt><a id="iss272"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss272.html" target="_top">PRINT-CASE-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss273"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss273.html" target="_top">PRINT-CASE-PRINT-ESCAPE-INTERACTION:VERTICAL-BAR-RULE-NO-UPCASE</a></dt><dd>yes</dd><dt><a id="iss274"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss274.html" target="_top">PRINT-CIRCLE-SHARED:RESPECT-PRINT-CIRCLE</a></dt><dd>yes</dd><dt><a id="iss275"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss275.html" target="_top">PRINT-CIRCLE-STRUCTURE:USER-FUNCTIONS-WORK</a></dt><dd>yes</dd><dt><a id="iss276"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss277"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss277.html" target="_top">PRINTER-WHITESPACE:JUST-ONE-SPACE</a></dt><dd>yes</dd><dt><a id="iss278"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss278.html" target="_top">PROCLAIM-ETC-IN-COMPILE-FILE:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss279"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss279.html" target="_top">PUSH-EVALUATION-ORDER:FIRST-ITEM</a></dt><dd>yes</dd><dt><a id="iss280"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss280.html" target="_top">PUSH-EVALUATION-ORDER:ITEM-FIRST</a></dt><dd>yes</dd><dt><a id="iss281"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss281.html" target="_top">PUSHNEW-STORE-REQUIRED:UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss282"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss282.html" target="_top">QUOTE-SEMANTICS:NO-COPYING</a></dt><dd>yes</dd><dt><a id="iss283"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a></dt><dd>yes, when <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>;
     otherwise negative <tt class="constant">:COUNT</tt> values are not allowed.
     </dd><dt><a id="iss284"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss284.html" target="_top">RANGE-OF-START-AND-END-PARAMETERS:INTEGER-AND-INTEGER-NIL</a></dt><dd>yes</dd><dt><a id="iss285"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss285.html" target="_top">READ-AND-WRITE-BYTES:NEW-FUNCTIONS</a></dt><dd>yes</dd><dt><a id="iss286"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss286.html" target="_top">READ-CASE-SENSITIVITY:READTABLE-KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss287"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss287.html" target="_top">READ-MODIFY-WRITE-EVALUATION-ORDER:DELAYED-ACCESS-STORES</a></dt><dd>no</dd><dt><a id="iss288"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss288.html" target="_top">READ-SUPPRESS-CONFUSING:GENERALIZE</a></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/fun_read-delimited-list.html" target="_top"><tt class="function">READ-DELIMITED-LIST</tt></a> still
     constructs a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a></dd><dt><a id="iss289"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss289.html" target="_top">READER-ERROR:NEW-TYPE</a></dt><dd>yes</dd><dt><a id="iss290"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss290.html" target="_top">REAL-NUMBER-TYPE:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss291"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss291.html" target="_top">RECURSIVE-DEFTYPE:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss292"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss292.html" target="_top">REDUCE-ARGUMENT-EXTRACTION</a></dt><dd>yes</dd><dt><a id="iss293"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss293.html" target="_top">REMF-DESTRUCTION-UNSPECIFIED:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss294"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dt><dd>yes</dd><dt><a id="iss295"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss295.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-YET-AGAIN:RESTORE-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss296"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss296.html" target="_top">REQUIRE-PATHNAME-DEFAULTS:ELIMINATE</a></dt><dd>superseded by <a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dd><dt><a id="iss297"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss297.html" target="_top">REST-LIST-ALLOCATION:MAY-SHARE</a></dt><dd>yes</dd><dt><a id="iss298"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss298.html" target="_top">RESULT-LISTS-SHARED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss299"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss299.html" target="_top">RETURN-VALUES-UNSPECIFIED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss300"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss300.html" target="_top">ROOM-DEFAULT-ARGUMENT:NEW-VALUE</a></dt><dd>yes</dd><dt><a id="iss301"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss301.html" target="_top">SELF-MODIFYING-CODE:FORBID</a></dt><dd>yes</dd><dt><a id="iss302"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss302.html" target="_top">SEQUENCE-TYPE-LENGTH:MUST-MATCH</a></dt><dd>yes</dd><dt><a id="iss303"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss303.html" target="_top">SETF-APPLY-EXPANSION:IGNORE-EXPANDER</a></dt><dd>no</dd><dt><a id="iss304"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss304.html" target="_top">SETF-FIND-CLASS:ALLOW-NIL</a></dt><dd>yes</dd><dt><a id="iss305"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss305.html" target="_top">SETF-FUNCTIONS-AGAIN:MINIMAL-CHANGES</a></dt><dd>yes</dd><dt><a id="iss306"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss306.html" target="_top">SETF-GET-DEFAULT:EVALUATED-BUT-IGNORED</a></dt><dd>yes</dd><dt><a id="iss307"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss307.html" target="_top">SETF-MACRO-EXPANSION:LAST</a></dt><dd>yes</dd><dt><a id="iss308"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss308.html" target="_top">SETF-METHOD-VS-SETF-METHOD:RENAME-OLD-TERMS</a></dt><dd>yes</dd><dt><a id="iss309"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss309.html" target="_top">SETF-MULTIPLE-STORE-VARIABLES:ALLOW</a></dt><dd>yes</dd><dt><a id="iss310"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss310.html" target="_top">SETF-OF-APPLY:ONLY-AREF-AND-FRIENDS</a></dt><dd>yes</dd><dt><a id="iss311"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss311.html" target="_top">SETF-OF-VALUES:ADD</a></dt><dd>yes</dd><dt><a id="iss312"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss312.html" target="_top">SETF-SUB-METHODS:DELAYED-ACCESS-STORES</a></dt><dd>yes</dd><dt><a id="iss313"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss313.html" target="_top">SHADOW-ALREADY-PRESENT</a></dt><dd>yes</dd><dt><a id="iss314"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss314.html" target="_top">SHADOW-ALREADY-PRESENT:WORKS</a></dt><dd>yes</dd><dt><a id="iss315"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a></dt><dd>no</dd><dt><a id="iss316"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss316.html" target="_top">SHARP-O-FOOBAR:CONSEQUENCES-UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss317"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss317.html" target="_top">SHARP-STAR-DELIMITER:NORMAL-DELIMITER</a></dt><dd>yes</dd><dt><a id="iss318"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss318.html" target="_top">SHARPSIGN-PLUS-MINUS-PACKAGE:KEYWORD</a></dt><dd>yes</dd><dt><a id="iss319"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss319.html" target="_top">SLOT-MISSING-VALUES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss320"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss320.html" target="_top">SLOT-VALUE-METACLASSES:LESS-MINIMAL</a></dt><dd>yes</dd><dt><a id="iss321"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss321.html" target="_top">SPECIAL-FORM-P-MISNOMER:RENAME</a></dt><dd>yes</dd><dt><a id="iss322"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss322.html" target="_top">SPECIAL-TYPE-SHADOWING:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss323"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss323.html" target="_top">STANDARD-INPUT-INITIAL-BINDING:DEFINED-CONTRACTS</a></dt><dd>yes</dd><dt><a id="iss324"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss324.html" target="_top">STANDARD-REPERTOIRE-GRATUITOUS:RENAME</a></dt><dd>yes</dd><dt><a id="iss325"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss325.html" target="_top">STEP-ENVIRONMENT:CURRENT</a></dt><dd>yes</dd><dt><a id="iss326"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss326.html" target="_top">STEP-MINIMAL:PERMIT-PROGN</a></dt><dd>yes</dd><dt><a id="iss327"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss327.html" target="_top">STREAM-ACCESS:ADD-TYPES-ACCESSORS</a></dt><dd>yes</dd><dt><a id="iss328"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss328.html" target="_top">STREAM-CAPABILITIES:INTERACTIVE-STREAM-P</a></dt><dd>yes</dd><dt><a id="iss329"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss329.html" target="_top">STRING-COERCION:MAKE-CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss330"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss330.html" target="_top">STRING-OUTPUT-STREAM-BASHING:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss331"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss331.html" target="_top">STRUCTURE-READ-PRINT-SYNTAX:KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss332"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss332.html" target="_top">SUBSEQ-OUT-OF-BOUNDS</a></dt><dd>yes</dd><dt><a id="iss333"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss333.html" target="_top">SUBSEQ-OUT-OF-BOUNDS:IS-AN-ERROR</a></dt><dd>yes</dd><dt><a id="iss334"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss334.html" target="_top">SUBSETTING-POSITION:NONE</a></dt><dd>yes</dd><dt><a id="iss335"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss335.html" target="_top">SUBTYPEP-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss336"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss336.html" target="_top">SUBTYPEP-TOO-VAGUE:CLARIFY-MORE</a></dt><dd>yes</dd><dt><a id="iss337"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss337.html" target="_top">SXHASH-DEFINITION:SIMILAR-FOR-SXHASH</a></dt><dd>yes</dd><dt><a id="iss338"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss338.html" target="_top">SYMBOL-MACROLET-DECLARE:ALLOW</a></dt><dd>yes</dd><dt><a id="iss339"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss339.html" target="_top">SYMBOL-MACROLET-SEMANTICS:SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss340"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss340.html" target="_top">SYMBOL-MACROLET-TYPE-DECLARATION:NO</a></dt><dd>yes</dd><dt><a id="iss341"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss341.html" target="_top">SYMBOL-MACROS-AND-PROCLAIMED-SPECIALS:SIGNALS-AN-ERROR</a></dt><dd>yes</dd><dt><a id="iss342"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss342.html" target="_top">SYMBOL-PRINT-ESCAPE-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss343"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss343.html" target="_top">SYNTACTIC-ENVIRONMENT-ACCESS:RETRACTED-MAR91</a></dt><dd>yes</dd><dt><a id="iss344"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss344.html" target="_top">TAGBODY-TAG-EXPANSION:NO</a></dt><dd>yes</dd><dt><a id="iss345"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss345.html" target="_top">TAILP-NIL:T</a></dt><dd>yes</dd><dt><a id="iss346"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss346.html" target="_top">TEST-NOT-IF-NOT:FLUSH-ALL</a></dt><dd>yes, but no warning</dd><dt><a id="iss347"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss347.html" target="_top">THE-AMBIGUITY:FOR-DECLARATION</a></dt><dd>yes</dd><dt><a id="iss348"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss348.html" target="_top">THE-VALUES:RETURN-NUMBER-RECEIVED</a></dt><dd>yes</dd><dt><a id="iss349"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss349.html" target="_top">TIME-ZONE-NON-INTEGER:ALLOW</a></dt><dd>yes</dd><dt><a id="iss350"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss350.html" target="_top">TYPE-DECLARATION-ABBREVIATION:ALLOW-ALL</a></dt><dd>no</dd><dt><a id="iss351"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss351.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:TYPE-OF-HANDLES-FLOATS</a></dt><dd>yes</dd><dt><a id="iss352"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss352.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a></dt><dd>yes, except for class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a>
     </dd><dt><a id="iss353"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss353.html" target="_top">TYPE-OF-UNDERCONSTRAINED:ADD-CONSTRAINTS</a></dt><dd>yes</dd><dt><a id="iss354"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss354.html" target="_top">TYPE-SPECIFIER-ABBREVIATION:X3J13-JUN90-GUESS</a></dt><dd>yes</dd><dt><a id="iss355"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss355.html" target="_top">UNDEFINED-VARIABLES-AND-FUNCTIONS:COMPROMISE</a></dt><dd>yes</dd><dt><a id="iss356"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss356.html" target="_top">UNINITIALIZED-ELEMENTS:CONSEQUENCES-UNDEFINED</a></dt><dd>yes, could add error checking
     </dd><dt><a id="iss357"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss357.html" target="_top">UNREAD-CHAR-AFTER-PEEK-CHAR:DONT-ALLOW</a></dt><dd>yes</dd><dt><a id="iss358"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss358.html" target="_top">UNSOLICITED-MESSAGES:NOT-TO-SYSTEM-USER-STREAMS</a></dt><dd>yes</dd><dt><a id="iss359"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss359.html" target="_top">VARIABLE-LIST-ASYMMETRY:SYMMETRIZE</a></dt><dd>yes</dd><dt><a id="iss360"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss360.html" target="_top">WITH-ADDED-METHODS:DELETE</a></dt><dd>yes</dd><dt><a id="iss361"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss361.html" target="_top">WITH-COMPILATION-UNIT:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss362"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss362.html" target="_top">WITH-OPEN-FILE-DOES-NOT-EXIST:STREAM-IS-NIL</a></dt><dd>yes</dd><dt><a id="iss363"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss363.html" target="_top">WITH-OPEN-FILE-SETQ:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss364"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss364.html" target="_top">WITH-OPEN-FILE-STREAM-EXTENT:DYNAMIC-EXTENT</a></dt><dd>yes</dd><dt><a id="iss365"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss365.html" target="_top">WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND</a></dt><dd>yes</dd><dt><a id="iss366"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss366.html" target="_top">WITH-STANDARD-IO-SYNTAX-READTABLE:X3J13-MAR-91</a></dt><dd>yes</dd></dl></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="extensions"></a>Extensions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#ext-standard">29. Standard Widely Portable Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt></dl></dd><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt><dd><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <tt class="classname">EXT:FILL-STREAM</tt>.</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ext-p-indep">30. Platform Independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#cradle-grave">30.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></dd><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-platform">31. Platform Specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization.</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization.</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.8. Modules included in the source distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">31.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.2. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.3. The choice of the <span><strong class="command">C</strong></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></dd><dt><span class="section"><a href="#app-dev">31.7. Application delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#shell">31.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">31.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">31.9. Operating System Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">31.10. Other</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-modules">32. Extensions Implemented as Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access.</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.11. Transaction Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.12. Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#regexp">32.5. <span><strong class="command">CLISP</strong></span> <strong class="package">“<span class="quote">REGEXP</span>”</strong> module</a></span></dt><dd><dl><dt><span class="section"><a href="#re-example">32.5.1. Example</a></span></dt></dl></dd><dt><span class="section"><a href="#pcre">32.6. Perl Compatible Regular Expressions.</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.7. Internationalization of User Programs</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">32.7.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#i18n-locale">32.7.2. Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#syscalls">32.8. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.9. Oracle Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#ora-functionality">32.9.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.9.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.9.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.9.4. Building the Oracle Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#fastcgi">32.10. The FastCGI Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#fcgi-overview">32.10.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.10.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.10.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.10.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock">32.11. Raw Socket Access.</a></span></dt><dt><span class="section"><a href="#zlib">32.12. ZLIB Interface</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-standard"></a>Chapter 29. Standard Widely Portable Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt></dl></dd><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt><dd><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <tt class="classname">EXT:FILL-STREAM</tt>.</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="mop-chap"></a>29.1. Meta-Object Protocol</h2></div><div><h3 class="subtitle">Adapted from chapters 5 and 6 of [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>].</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-intro"></a>29.1.1. Introduction</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-intro-notation">29.1.1.1. Notation</a></span></dt><dt><span class="section"><a href="#mop-package">29.1.1.2. Package</a></span></dt></dl></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification ([<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] Chanpter 7) describes the
standard Programmer Interface for the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> Object System (<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>).  This
document extends that specification by defining a metaobject protocol
for <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> - that is, a description of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> itself as an extensible
<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> program.  In this description, the fundamental elements of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
programs (classes, slot definitions, generic functions, methods,
specializers and method combinations) are represented by first-class
objects.  The behavior of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> is provided by these objects, or, more
precisely, by methods specialized to the classes of these objects.
</p><p>Because these objects represent pieces of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> programs, and
because their behavior provides the behavior of the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> language
itself, they are considered meta-level objects or metaobjects.  The
protocol followed by the metaobjects to provide the behavior of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
is called the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> “<span class="quote">Metaobject Protocol</span>” (MOP).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-intro-notation"></a>29.1.1.1. Notation</h4></div></div></div><p>The description of functions follows the same form as used in the
<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification.  The description of generic functions is similar
to that in the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification, but some minor changes have been
made in the way methods are presented.</p><p>The following is an example of the format for the syntax
description of a generic function:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<tt class="function">gf1</tt> <em class="replaceable"><tt>x</tt></em> <em class="replaceable"><tt>y</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>v</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>k</tt></em>)
</pre></td></tr></table><p>This description indicates that <tt class="function">gf1</tt> is a
generic function with two required parameters, <em class="replaceable"><tt>x</tt></em> and <em class="replaceable"><tt>y</tt></em>, an
optional parameter <em class="replaceable"><tt>v</tt></em> and a keyword parameter <em class="replaceable"><tt>k</tt></em>.</p><p>The description of a generic function includes a description of
its behavior.  This provides the general behavior, or protocol of the
generic function.  All methods defined on the generic function, both
portable and specified, must have behavior consistent with this
description.</p><p>Every generic function described here is an instance of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> and uses the <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top"><tt class="function">STANDARD</tt></a> method
combination.</p><p>The description of a generic function also includes descriptions
of the specified methods for that generic function.  In the description
of these methods, a <strong class="first"><em class="firstterm">method signature</em></strong> is used to
describe the parameters and parameter specializers of each method. The
following is an example of the format for a method signature:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
<tt class="method">(<tt class="function">gf1</tt> (<em class="replaceable"><tt>x</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) <em class="replaceable"><tt>y</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>v</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>k</tt></em>)</tt>
</pre></td></tr></table><p>This signature indicates that this primary method on the generic
function <tt class="function">gf1</tt> has two required parameters, named
<em class="replaceable"><tt>x</tt></em> and <em class="replaceable"><tt>y</tt></em>.  In addition, there is an optional parameter <em class="replaceable"><tt>v</tt></em> and
a keyword parameter <em class="replaceable"><tt>k</tt></em>.  This signature also indicates that the
method's parameter specializers are the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>.
</p><p>The description of each method includes a description of the
behavior particular to that method.</p><p>An abbreviated syntax is used when referring to a method defined
elsewhere in the document.  This abbreviated syntax includes the name of
the generic function, the qualifiers, and the parameter specializers.  A
reference to the method with the signature shown above is written as:
<tt class="method"><tt class="function">gf1</tt> (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt>.
</p></div>
<!--mop-intro-notation--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-package"></a>29.1.1.2. Package</h4></div></div></div><p>The package exporting the [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] symbols is unspecified.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The symbols specified by the [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] are
  exported from the package <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> and <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>ed by the package
  <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>.</p></div><p>The package exporting the [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] symbols is different in other
implementations: In <a href="http://armedbear-j.sourceforge.net/" target="_top"><span><strong class="command">ABCL</strong></span></a> it is the package
 <strong class="package">“<span class="quote">SB-MOP</span>”</strong>;
in <a href="http://openmcl.clozure.com/" target="_top"><span><strong class="command">OpenMCL</strong></span></a> it is the package
 <strong class="package">“<span class="quote">OPENMCL-MOP</span>”</strong>.</p></div>
<!--mop-package-->
</div>
<!--mop-intro--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-overview"></a>29.1.2. Overview</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-metaobjects">29.1.2.1. Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-mo-cl-inheritance">29.1.2.2. Inheritance Structure of Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-ui-macro">29.1.2.3. Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-mo-init">29.1.2.4. Metaobject Initialization Protocol</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-metaobjects"></a>29.1.2.1. Metaobjects</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-mo-classes">29.1.2.1.1. Classes</a></span></dt><dt><span class="section"><a href="#mop-mo-slot-defs">29.1.2.1.2. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-mo-gen-funs">29.1.2.1.3. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-mo-methods">29.1.2.1.4. Methods</a></span></dt><dt><span class="section"><a href="#mop-mo-spec">29.1.2.1.5. Specializers</a></span></dt><dt><span class="section"><a href="#mop-mo-meth-combs">29.1.2.1.6. Method Combinations</a></span></dt></dl></div><p>For each kind of program element there is a corresponding
 <strong class="first"><em class="firstterm">basic metaobject class
  <a id="mop-ba-mo-cl" class="indexterm"></a></em></strong>.
These are the classes: <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>, <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>,
<a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a>.
A <strong class="first"><em class="firstterm">metaobject class<a id="mo-cl" class="indexterm"></a></em></strong>
is a subclass of exactly one of these classes.
The results are undefined if an attempt is made to define a <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>
that is a subclass of more than one basic metaobject class.
A <strong class="first"><em class="firstterm">metaobject<a id="mop-mo" class="indexterm"></a></em></strong>
is an instance of a metaobject class.</p><p>Each metaobject represents one program element.  Associated with
each metaobject is the information required to serve its role.  This
includes information that might be provided directly in a user interface
macro such as <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>.  It also includes information
computed indirectly from other metaobjects such as that computed from
class inheritance or the full set of methods associated with a generic
function.</p><p>Much of the information associated with a metaobject is in the
form of connections to other metaobjects.  This interconnection means
that the role of a metaobject is always based on that of other
metaobjects.  As an introduction to this interconnected structure, this
section presents a partial enumeration of the kinds of information
associated with each kind of metaobject.  More detailed information is
presented later.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-classes"></a>29.1.2.1.1. Classes</h5></div></div></div><p>A <strong class="first"><em class="firstterm">class metaobject
  <a id="mop-class-mo" class="indexterm"></a></em></strong>
determines the structure and the default behavior of its instances.
The following information is associated with class metaobjects:

</p><div class="itemizedlist"><ul type="disc"><li>The name, if there is one, is available as an object.
</li><li>The direct subclasses, direct superclasses and class
  precedence list are available as lists of class metaobjects.
</li><li>The slots defined directly in the class are available
  as a list of direct slot definition metaobjects.  The slots which are
  accessible in instances of the class are available as a list of
  effective slot definition metaobjects.</li><li>The methods which use the class as a specializer, and
  the generic functions associated with those methods are available as
  lists of method and generic function metaobjects respectively.
</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>See also <a href="#mop-classes" title="29.1.3.&#xA0;Classes">Section 29.1.3, “Classes”</a></p></div>
<!--mop-mo-classes--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-slot-defs"></a>29.1.2.1.2. Slot Definitions</h5></div></div></div><p>A <strong class="first"><em class="firstterm">slot definition metaobject
  <a id="mop-slot-def-mo" class="indexterm"></a></em></strong>
 contains information about the definition of a slot.
There are two kinds of slot definition metaobjects.
A <strong class="first"><em class="firstterm">direct</em></strong> slot definition metaobject is used to
 represent the direct definition of a slot in a class.
This corresponds roughly to the slot specifiers found in <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> forms.
An <strong class="first"><em class="firstterm">effective</em></strong> slot definition metaobject is used to
 represent information, including inherited information, about a slot
 which is accessible in instances of a particular class.</p><p>Associated with each class metaobject is a list of direct slot
definition metaobjects representing the slots defined directly in the
class.  Also associated with each class metaobject is a list of
effective slot definition metaobjects representing the set of slots
accessible in instances of that class.</p><p>The following information is associated with both direct and
effective slot definitions metaobjects:
</p><div class="itemizedlist"><ul type="disc"><li>The name, allocation, and type are available as forms
  that could appear in a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</li><li>The initialization form, if there is one, is
  available as a form that could appear in a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.  The
  initialization form together with its <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> is available
  as a function of no arguments which, when called, returns the result
  of evaluating the initialization form in its <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>. This
  is called the <strong class="first"><em class="firstterm">initfunction</em></strong> of the slot.
</li><li>The slot filling initialization arguments are
  available as a list of symbols.</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>Certain other information is only associated with direct slot
definition metaobjects.  This information applies only to the direct
definition of the slot in the class (it is not inherited).
</p><div class="itemizedlist"><ul type="disc"><li>The function names of those generic
  functions for which there are automatically generated reader and
  writer methods.  This information is available as lists of function
  names.  Any accessors specified in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form are broken down
  into their equivalent readers and writers in the direct slot
  definition.</li></ul></div><p>Information, including inherited information, which applies to the
definition of a slot in a particular class in which it is accessible is
associated only with effective slot definition metaobjects.
</p><div class="itemizedlist"><ul type="disc"><li>For certain slots, the location of the
slot in instances of the class is available.
</li></ul></div><p>See also <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions">Section 29.1.4, “Slot Definitions”</a></p></div>
<!--mop-mo-slot-defs--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-gen-funs"></a>29.1.2.1.3. Generic Functions</h5></div></div></div><p>A <strong class="first"><em class="firstterm">generic function metaobject
  <a id="mop-gen-fun-mo" class="indexterm"></a></em></strong>
 contains information about a generic function over and above the
 information associated with each of the generic function's methods.
</p><div class="itemizedlist"><ul type="disc"><li>The name is available as a function name.
</li><li>The methods associated with the generic function are
  available as a list of method metaobjects.</li><li>The default class for this generic function's method
  metaobjects is available as a class metaobject.</li><li>The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.
</li><li>The method combination is available as a method
  combination metaobject.</li><li>The argument precedence order is available as a
  permutation of those symbols from the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> which name the
  required arguments of the generic function.</li><li><p>The “<span class="quote">declarations</span>” are available as a
 list of <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>There is a slight misnomer in the naming of functions and
 options in this document: Where the term “<span class="quote">declaration</span>” is
 used, actually a <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a> is meant.
</p></div></li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>See also <a href="#mop-gf" title="29.1.5.&#xA0;Generic Functions">Section 29.1.5, “Generic Functions”</a></p></div>
<!--mop-mo-gen-funs--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-methods"></a>29.1.2.1.4. Methods</h5></div></div></div><p>A <strong class="first"><em class="firstterm">method metaobject
  <a id="mop-method-mo" class="indexterm"></a></em></strong> contains information about a specific <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.
</p><div class="itemizedlist"><ul type="disc"><li>The qualifiers are available as a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of of non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> atoms.</li><li>The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.
</li><li>The specializers are available as a list of
  specializer metaobjects.</li><li>The function is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>.  This
  function can be applied to arguments and a list of next methods using
  <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a>.</li><li>When the method is associated with a generic
  function, that generic function metaobject is available.  A method can
  be associated with at most one generic function at a time.
</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>See also <a href="#mop-meth" title="29.1.6.&#xA0;Methods">Section 29.1.6, “Methods”</a></p></div>
<!--mop-mo-methods--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-spec"></a>29.1.2.1.5. Specializers</h5></div></div></div><p>A <strong class="first"><em class="firstterm">specializer metaobject
  <a id="spec-mo" class="indexterm"></a></em></strong> represents the specializers of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.
 Class metaobjects are themselves specializer metaobjects.  A special
 kind of specializer metaobject is used for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers.</p><p>See also <a href="#mop-specializers" title="29.1.8.&#xA0;Specializers">Section 29.1.8, “Specializers”</a></p></div>
<!--mop-mo-spec--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-meth-combs"></a>29.1.2.1.6. Method Combinations</h5></div></div></div><p>A <strong class="first"><em class="firstterm">method combination metaobject
  <a id="mop-meth-comp-mo" class="indexterm"></a></em></strong>
 represents the information about the method combination being used by a
 generic function.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This document does not specify the structure of method
combination metaobjects.</p></div><p>See also <a href="#mop-meth-comb" title="29.1.9.&#xA0;Method Combinations">Section 29.1.9, “Method Combinations”</a></p></div>
<!--mop-mo-meth-combs-->
</div>
<!--mop-metaobjects--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-mo-cl-inheritance"></a>29.1.2.2. Inheritance Structure of Metaobject Classes</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-ov-impl-and-user-spec">29.1.2.2.1. Implementation and User Specialization</a></span></dt></dl></div><div align="center"><img src="mop-classes-all.png" align="middle" width="270" /></div><p>The inheritance structure of the specified metaobject classes is
 shown in <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes">Table 29.1, “Direct Superclass Relationships
  Among The Specified Metaobject Classes”</a>. The class of every class
 shown is <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> except for the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>,
 which are instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>, and the classes
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>, which are
 instances of the class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>.
</p><div class="table"><a id="mop-inherit-struct"></a><p class="title"><b>Table 29.1. Direct Superclass Relationships
  Among The Specified Metaobject Classes</b></p><table summary="Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Metaobject Class</th><th align="center">Abstract</th><th align="center">Subclassable</th><th align="center">Direct Superclasses</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</td></tr><tr><td align="center"><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-OBBJECT</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-OBBJECT</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</td></tr><tr><td align="center"><a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of Method Metaobjects"><tt class="classname">CLOS:STANDARD-ACCESSOR-METHOD</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-READER-METHOD</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of Method Metaobjects"><tt class="classname">CLOS:STANDARD-ACCESSOR-METHOD</tt></a>)</td></tr><tr><td align="center"><a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="classname">CLOS:STANDARD-WRITER-METHOD</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of Method Metaobjects"><tt class="classname">CLOS:STANDARD-ACCESSOR-METHOD</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a>)</td></tr><tr><td align="center"><a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:DIRECT-SLOT-DEFINITION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EFFECTIVE-SLOT-DEFINITION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:DIRECT-SLOT-DEFINITION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EFFECTIVE-SLOT-DEFINITION</tt></a>)</td></tr><tr><td align="center"><a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><tt class="classname">CLOS:SPECIALIZER</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><tt class="classname">CLOS:METAOBJECT</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><tt class="classname">CLOS:SPECIALIZER</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><tt class="classname">CLOS:SPECIALIZER</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</td></tr><tr><td align="center"><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</td></tr></tbody></table></div><p>
</p><p>Each class with a “<span class="quote">yes</span>” in the “<span class="quote">Abstract</span>”
column is an <span class="emphasis"><em>abstract class</em></span> and is not intended to
be instantiated.  The results are undefined if an attempt is made to
make an instance of one of these classes with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.</p><p>Each class with a “<span class="quote">yes</span>” in
the “<span class="quote">Subclassable</span>” column can be used as direct superclass
for portable programs.  It is not meaningful to subclass a class that
has a “<span class="quote">no</span>” in this column.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a> is also subclassable: It
  is possible to create subclasses of <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a> that do not inherit
  from <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span> and some
  other implementations.</h3><p>The class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-OBBJECT</tt></a>'s class
  precedence list contains <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> before <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>, not
  after <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.
  This is the most transparent way to realize the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement
  (see the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2-2.html" target="_top">4.2.2
   “<span class="quote">Type Relationships</span>”</a>)
  that <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>'s class precedence list contains
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> before <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.</p></div><p>The classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-READER-METHOD</tt></a>,
 <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="classname">CLOS:STANDARD-WRITER-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> are called
 <strong class="first"><em class="firstterm">standard metaobject
  <a id="std-mo" class="indexterm"></a></em></strong> classes.
 For each kind of metaobject, this is the class the user interface
 macros presented in the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> use by default.  These are also the
 classes on which user specializations are normally based.</p><p>The classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>, <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> and
 <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> are special-purpose class metaobject
 classes.  Built-in classes are instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>.
 The class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> provides a special kind of
 instances described in <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances">Section 29.1.10.2, “Funcallable Instances”</a>.  When the
 definition of a class references another class which has not yet been
 defined, an instance of <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> is used as a
 stand-in until the class is actually defined.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p><a id="no-forward-referenced-class"></a><b>The class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> is not implemented. </b>In the direct-superclasses list of non-finalized classes,
   symbols are used instead of <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> instances.
   This choice has been made because the concept of
   <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> contradicts the <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>
   specification:</p><div class="orderedlist"><ol type="1"><li>The [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] says that the first argument of
      <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a> can be a <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a>.  But from
      the description of <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>, it is clear that it can only be
      a class returned by <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>, and [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>
      cannot return a <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a>.</li><li>The [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] says that <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a> creates a
      <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> for not-yet-defined class symbols among
      the direct-superclasses list.  But this leads to many
      <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> with the same name (since they cannot
      be stored and retrieved through <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>), and since
      <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> preserves the <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>-ness, after the class is
      defined, we have many class objects with the same name.
</li></ol></div></div><p>The class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a> is the <span class="emphasis"><em>default direct
superclass</em></span> of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>.  When an instance
of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> is created, and no direct superclasses are
explicitly specified, it defaults to the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.  In
this way, any behavior associated with the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>
will be inherited, directly or indirectly, by all instances of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>.  A subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> may have a different
class as its default direct superclass, but that class must be a
subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.</p><p>The same is true for <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> and
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-OBBJECT</tt></a>.</p><p>The class <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><tt class="classname">CLOS:SPECIALIZER</tt></a> captures only the most basic behavior of
method specializers, and is not itself intended to be instantiated.  The
class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> is a direct subclass of <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><tt class="classname">CLOS:SPECIALIZER</tt></a> reflecting the
property that classes by themselves can be used as method specializers.
The class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a> is used for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-ov-impl-and-user-spec"></a>29.1.2.2.1. Implementation and User Specialization</h5></div></div></div><p>The purpose of the Metaobject Protocol is to provide users with a
powerful mechanism for extending and customizing the basic behavior of
the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>.  As an object-oriented description of the basic <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
behavior, the Metaobject Protocol makes it possible to create these
extensions by defining specialized subclasses of existing metaobject
classes.</p><p>The Metaobject Protocol provides this capability without
interfering with the implementor's ability to develop high-performance
implementations.  This balance between user extensibility and
implementor freedom is mediated by placing explicit restrictions on
each.  Some of these restrictions are general---they apply to the entire
class graph and the applicability of all methods.  These are presented
in this section.</p><p>The following additional terminology is used to present these
restrictions:</p><div class="itemizedlist"><ul type="disc"><li>Metaobjects are divided into three categories.  Those
  defined in this document are called <strong class="first"><em class="firstterm">specified</em></strong>;
  those defined by an implementation but not mentioned in this document
  are called <strong class="first"><em class="firstterm">implementation-specific</em></strong>; and those
  defined by a portable program are called <strong class="first"><em class="firstterm">portable</em></strong>.
</li><li>A class <em class="replaceable"><tt>i</tt></em> is <strong class="first"><em class="firstterm">interposed</em></strong>
  between two other classes <em class="replaceable"><tt>k<sub>1</sub></tt></em> and <em class="replaceable"><tt>k<sub>2</sub></tt></em> if and only if there is
  some path, following direct superclasses, from the class <em class="replaceable"><tt>k<sub>1</sub></tt></em> to the
  class <em class="replaceable"><tt>k<sub>2</sub></tt></em> which includes <em class="replaceable"><tt>i</tt></em>.</li><li>A method is <strong class="first"><em class="firstterm">specialized</em></strong> to a
  class if and only if that class is in the list of specializers
  associated with the method; and the method is in the list of methods
  associated with some generic function.</li><li>In a given implementation, a specified method is said
  to have been <strong class="first"><em class="firstterm">promoted</em></strong> if and only if the
  specializers of the method, <em class="replaceable"><tt>x<sub>1</sub></tt></em> ... <em class="replaceable"><tt>x<sub>n</sub></tt></em>, are defined in this
  specification as the classes <em class="replaceable"><tt>k<sub>1</sub></tt></em> ... <em class="replaceable"><tt>k<sub>n</sub></tt></em>, but in the
  implementation, one or more of the specializers
  <em class="replaceable"><tt>x<sub>l</sub></tt></em>, is a superclass of the class
  given in the specification <em class="replaceable"><tt>k<sub>l</sub></tt></em>.
</li><li><p>For a given generic function and set of arguments, a
  method <em class="replaceable"><tt>k<sub>2</sub></tt></em> <strong class="first"><em class="firstterm">extends</em></strong> a method <em class="replaceable"><tt>k<sub>1</sub></tt></em> if and
  only if:
  </p><div class="orderedlist"><ol type="i"><li><em class="replaceable"><tt>k<sub>1</sub></tt></em> and
     <em class="replaceable"><tt>k<sub>2</sub></tt></em> are both associated with the given generic function
     </li><li><em class="replaceable"><tt>k<sub>1</sub></tt></em> and <em class="replaceable"><tt>k<sub>2</sub></tt></em> are both applicable to the given
     arguments,</li><li>the specializers and qualifiers of the methods are
     such that when the generic function is called, <em class="replaceable"><tt>k<sub>2</sub></tt></em> is executed
     before <em class="replaceable"><tt>k<sub>1</sub></tt></em>,</li><li><em class="replaceable"><tt>k<sub>1</sub></tt></em> will be executed if and only if
   <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is invoked from within the body of <em class="replaceable"><tt>k<sub>2</sub></tt></em> and
   </li><li><a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is invoked from within the body
     of <em class="replaceable"><tt>k<sub>2</sub></tt></em>, thereby causing <em class="replaceable"><tt>k<sub>1</sub></tt></em> to be executed.
  </li></ol></div></li><li><p>For a given generic function and set of arguments, a
  method <em class="replaceable"><tt>k<sub>2</sub></tt></em> <strong class="first"><em class="firstterm">overrides</em></strong> a method <em class="replaceable"><tt>k<sub>1</sub></tt></em> if and
  only if conditions <span class="emphasis"><em>i</em></span>
  through <span class="emphasis"><em>iv</em></span> above hold and,
  instead of <span class="emphasis"><em>v</em></span>,
  </p><div class="orderedlist"><ol start="6" type="i"><li><a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is not invoked from within the
     body of <em class="replaceable"><tt>k<sub>2</sub></tt></em>, thereby preventing <em class="replaceable"><tt>k<sub>1</sub></tt></em> from being executed.
</li></ol></div></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-portable-restrictions"></a>29.1.2.2.1.1. Restrictions on Portable Programs</h6></div></div></div><p>Portable programs are allowed to define subclasses of specified
classes, and are permitted to define methods on specified generic
functions, with the following restrictions: </p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not redefine any specified
classes, generic functions, methods or method combinations.  Any method
defined by a portable program on a specified generic function must have
at least one specializer that is neither a specified class nor an
<a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer whose associated value is an instance of a specified
class.</li><li>Portable programs may define methods that extend
specified methods unless the description of the specified method
explicitly prohibits this.  Unless there is a specific statement to the
contrary, these extending methods must return whatever value was
returned by the call to <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a>.</li><li><p>Portable programs may define methods that override
specified methods only when the description of the specified method
explicitly allows this.  Typically, when a method is allowed to be
overridden, a small number of related methods will need to be overridden
as well.</p><p>An example of this is the specified methods on the generic
functions <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>, <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> and <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>.
Overriding a specified method on one of these generic functions requires
that the corresponding method on the other two generic functions be
overridden as well.</p></li><li><p>Portable methods on specified generic functions
specialized to portable metaobject classes must be defined before any
instances of those classes (or any subclasses) are created, either
directly or indirectly by a call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  Methods can be
defined after instances are created by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a> however.
Portable metaobject classes cannot be redefined.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The purpose of this last restriction is to permit
implementations to provide performance optimizations by analyzing, at
the time the first instance of a metaobject class is initialized, what
portable methods will be applicable to it.  This can make it possible to
optimize calls to those specified generic functions which would have no
applicable portable methods.</p></div></li></ul></div><p>
</p><p>The results are undefined if any of
 these restrictions are violated.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The specification technology used in this document needs
further development.  The concepts of object-oriented protocols and
subclass specialization are intuitively familiar to programmers of
object-oriented systems; the protocols presented here fit quite
naturally into this framework.  Nonetheless, in preparing this document,
we have found it difficult to give specification-quality descriptions of
the protocols in a way that makes it clear what extensions users can and
cannot write.  Object-oriented protocol specification is inherently
about specifying leeway, and this seems difficult using current
technology.</p></div></div>
<!--mop-portable-restrictions--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-impl-restrictions"></a>29.1.2.2.1.2. Restrictions on Implementations</h6></div></div></div><p>Implementations are allowed latitude to modify the structure of
specified classes and methods.  This includes: the interposition of
implementation-specific classes; the promotion of specified methods; and
the consolidation of two or more specified methods into a single method
specialized to interposed classes.</p><p>Any such modifications are permitted only so long as for any
portable class <em class="replaceable"><tt>k</tt></em> that is a subclass of one or more specified classes
<em class="replaceable"><tt>k<sub>1</sub></tt></em> ... <em class="replaceable"><tt>k<sub>n</sub></tt></em>, the following conditions are met:</p><div class="itemizedlist"><ul type="disc"><li>In the actual class precedence list of <em class="replaceable"><tt>k</tt></em>, the
  classes <em class="replaceable"><tt>k<sub>1</sub></tt></em> ... <em class="replaceable"><tt>k<sub>n</sub></tt></em> must appear in the same order as they would
  have if no implementation-specific modifications had been made.
</li><li>The method applicability of any specified generic
  function must be the same in terms of behavior as it would have been
  had no implementation-specific changes been made.  This includes
  specified generic functions that have had portable methods added.  In
  this context, the expression “<span class="quote">the same in terms of
  behavior</span>” means that methods with the same behavior as those
  specified are applicable, and in the same order.</li><li>No portable class <em class="replaceable"><tt>k</tt></em> may inherit, by virtue of
  being a direct or indirect subclass of a specified class, any slot for
  which the name is a symbol accessible in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package or
  exported by any package defined in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li><li>Implementations are free to define
  implementation-specific before- and after-methods on specified generic
  functions.  Implementations are also free to define
  implementation-specific around-methods with extending behavior.
</li></ul></div></div>
<!--mop-impl-restrictions-->
</div>
<!--mop-ov-impl-and-user-spec-->
</div>
<!--mop-mo-cl-inheritance--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-ui-macro"></a>29.1.2.3. Processing of the User Interface Macros</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-compile-ui-macro">29.1.2.3.1. Compile-file Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-ui-others">29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</a></span></dt></dl></div><p>A list in which the first element is one of the symbols
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><tt class="function">DEFINE-METHOD-COMBINATION</tt></a>,
<a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top"><tt class="function">CLOS:GENERIC-FUNCTION</tt></a>, <a href="#gen-flet"><tt class="function">CLOS:GENERIC-FLET</tt></a> or <a href="#gen-labels"><tt class="function">CLOS:GENERIC-LABELS</tt></a>, and which has proper
syntax for that macro is called a <strong class="first"><em class="firstterm">user interface macro
form</em></strong>.  This document provides an extended specification of
the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> macros.</p><p>The user interface macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>
can be used not only to define metaobjects that are instances of the
corresponding standard metaobject class, but also to define metaobjects
that are instances of appropriate portable metaobject classes.  To make
it possible for portable metaobject classes to properly process the
information appearing in the macro form, this document provides a
limited specification of the processing of these macro forms.</p><p>User interface macro forms can be <span class="emphasis"><em>evaluated</em></span>
or <span class="emphasis"><em>compiled</em></span> and later <span class="emphasis"><em>executed</em></span>.
The effect of evaluating or executing a user interface macro form is
specified in terms of calls to specified functions and generic functions
which provide the actual behavior of the macro.  The arguments received
by these functions and generic functions are derived in a specified way
from the macro form.</p><p>Converting a user interface macro form into the arguments to the
appropriate functions and generic functions has two major aspects: the
conversion of the macro argument syntax into a form more suitable for
later processing, and the processing of macro arguments which are forms
to be evaluated (including method bodies).</p><p>In the syntax of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> macro, the <em class="replaceable"><tt>initform</tt></em>
and <em class="replaceable"><tt>default-initarg-initial-value-form</tt></em>
arguments are forms which will be evaluated one or more times after the
macro form is evaluated or executed.  Special processing must be done on
these arguments to ensure that the lexical scope of the forms is
captured properly.  This is done by building a function of zero
arguments which, when called, returns the result of evaluating the form
in the proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><p>In the syntax of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> macro
the <em class="replaceable"><tt>forms</tt></em> argument is a list of forms that
comprise the body of the method definition.  This list of forms must be
processed specially to capture the lexical scope of the macro form.  In
addition, the lexical functions available only in the body of methods
must be introduced.  To allow this and any other special processing
(such as slot access optimization), a specializable protocol is used for
processing the body of methods.
This is discussed in <a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">Section 29.1.6.3.1.1, “Processing Method Bodies”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-compile-ui-macro"></a>29.1.2.3.1. Compile-file Processing of the User Interface Macros</h5></div></div></div><p>It is common practice for <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> compilers, while processing a file
or set of files, to maintain information about the definitions that have
been compiled so far.  Among other things, this makes it possible to
ensure that a global macro definition (<a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> form) which appears in
a file will affect uses of the macro later in that file.  This
information about the state of the compilation is called the
<strong class="first"><em class="firstterm"><a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> environment</em></strong>.</p><p>When compiling files containing <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> definitions, it is useful
to maintain certain additional information in the <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> environment.
This can make it possible to issue various kinds of warnings (e.g.,
<a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> congruence) and to do various performance optimizations that
would not otherwise be possible.</p><p>At this time, there is such significant variance in the way
existing <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations handle <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> environments that it
would be premature to specify this mechanism.  Consequently, this
document specifies only the behavior of evaluating or executing user
interface macro forms. What functions and generic functions are called
during <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> processing of a user interface macro form is not
specified.  Implementations are free to define and document their own
behavior.  Users may need to check implementation-specific behavior
before attempting to compile certain portable programs.</p></div>
<!--mop-compile-ui-macro--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-ov-ui-others"></a>29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</h5></div></div></div><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a></dt><dd><a href="#mop-cl-defclass" title="29.1.3.1.&#xA0;Macro DEFCLASS">Section 29.1.3.1, “Macro <tt class="function">DEFCLASS</tt>”</a>
 </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a></dt><dd><a href="#mop-meth-init-defmethod" title="29.1.6.3.1.&#xA0;Macro DEFMETHOD">Section 29.1.6.3.1, “Macro <tt class="function">DEFMETHOD</tt>”</a>
 </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a></dt><dd><a href="#mop-gf-init-defgeneric" title="29.1.5.3.1.&#xA0;Macro DEFGENERIC">Section 29.1.5.3.1, “Macro <tt class="function">DEFGENERIC</tt>”</a>
</dd></dl></div></div>
<!--mop-ov-ui-others-->
</div>
<!--mop-ui-macro--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-ov-mo-init"></a>29.1.2.4. Metaobject Initialization Protocol</h4></div></div></div><p>Like other objects, metaobjects can be created by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  The initialization arguments passed to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
are used to initialize the metaobject in the usual way.  The set of
legal initialization arguments, and their interpretation, depends on the
kind of metaobject being created.  Implementations and portable programs
are free to extend the set of legal initialization arguments.  Detailed
information about the initialization of each kind of metaobject are
provided in the appropriate sections:</p><div class="itemizedlist"><ul type="disc"><li><a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of Class Metaobjects">Section 29.1.3.5.1, “Initialization of Class Metaobjects”</a></li><li><a href="#mop-cl-reinit-mo" title="29.1.3.5.2.&#xA0;Reinitialization of Class Metaobjects">Section 29.1.3.5.2, “Reinitialization of Class Metaobjects”</a></li><li><a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of Generic Function Metaobjects">Section 29.1.5.3.3, “Initialization of Generic Function Metaobjects”</a></li><li><a href="#mop-cl-finalization" title="29.1.3.4.&#xA0;Class Finalization Protocol">Section 29.1.3.4, “Class Finalization Protocol”</a></li><li><a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a></li><li><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances">Section 29.1.10.2, “Funcallable Instances”</a></li><li><a href="#mop-gf-invocation" title="29.1.5.3.2.&#xA0;Generic Function Invocation Protocol">Section 29.1.5.3.2, “Generic Function Invocation Protocol”</a></li><li><a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a></li></ul></div></div>
<!--mop-ov-mo-init-->
</div>
<!--mop-overview--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-classes"></a>29.1.3. Classes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-cl-defclass">29.1.3.1. Macro <tt class="function">DEFCLASS</tt></a></span></dt><dt><span class="section"><a href="#mop-cl-Inheritance">29.1.3.2. Inheritance Structure of Class Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-cl-readers">29.1.3.3. Introspection: Readers for Class Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-cl-finalization">29.1.3.4. Class Finalization Protocol</a></span></dt><dt><span class="section"><a href="#mop-cl-init">29.1.3.5. Class Initialization</a></span></dt><dt><span class="section"><a href="#mop-cl-customize">29.1.3.6. Customization</a></span></dt><dt><span class="section"><a href="#mop-cl-dep">29.1.3.7. Updating Dependencies</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-defclass"></a>29.1.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a></h4></div></div></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form results in a call
to the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> function. The arguments received by <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>
are derived from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form in a defined way.  The exact
macro-expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form is not defined, only the
relationship between the arguments to the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> macro and the
arguments received by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> function.  Examples of typical
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> forms and sample expansions are shown in the following two
 examples:
</p><div class="informalexample"><p>A <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form with standard slot and class
  options and an expansion of it that would result in the proper call
  to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass plane (moving-object graphics-object)
     ((altitude :initform 0 :accessor plane-altitude)
      (speed))
  (:default-initargs :engine *jet*))

(ensure-class 'plane
  ':direct-superclasses '(moving-object graphics-object)
  ':direct-slots (list (list ':name 'altitude
                             ':initform '0
                             ':initfunction #'(lambda () 0)
                             ':readers '(plane-altitude)
                             ':writers '((setf plane-altitude)))
                       (list ':name 'speed))
  ':direct-default-initargs (list (list ':engine
                                        '*jet*
                                        #'(lambda () *jet*))))
</pre></td></tr></table></div><p>
</p><div class="informalexample"><p>A <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form with non-standard class and
  slot options, and an expansion of it which results in the proper call
  to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.  Note that the order of the slot options has not
  affected the order of the properties in the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>,
  but has affected the order of the elements in the lists
  which are the values of those properties.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass sst (plane)
     ((mach mag-step 2
            locator sst-mach
            locator mach-location
            :reader mach-speed
            :reader mach))
  (:metaclass faster-class)
  (another-option foo bar))

(ensure-class 'sst
  ':direct-superclasses '(plane)
  ':direct-slots (list (list ':name 'mach
                             ':readers '(mach-speed mach)
                             'mag-step '2
                             'locator '(sst-mach mach-location)))
  ':metaclass 'faster-class
  'another-option '(foo bar))
</pre></td></tr></table></div><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><tt>name</tt></em> argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a>
   becomes the value of the first argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.  This is
   the only positional argument accepted by <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>; all other
   arguments are keyword arguments.</li><li>The <em class="replaceable"><tt>direct-superclasses</tt></em>
  argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> becomes the value of the <tt class="constant">:DIRECT-SUPERCLASSES</tt>
  keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</li><li><p>The <em class="replaceable"><tt>direct slots</tt></em> argument
  to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> becomes the value of the <tt class="constant">:DIRECT-SLOTS</tt> keyword
  argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.  Special processing of this value is done
  to regularize the form of each slot specification and to properly
  capture the lexical scope of the initialization forms.  This is done
  by converting each slot specification to a property list called a
  <strong class="first"><em class="firstterm">canonicalized slot specification</em></strong>.
  The resulting list of <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s is the value
  of the <tt class="constant">:DIRECT-SLOTS</tt> keyword argument.</p><p><a id="mop-canonicalized-slot-spec"></a>Canonicalized slot
  specifications are later used as the keyword arguments to a generic
  function which will, in turn, pass them to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> for use as
  a set of initialization arguments.  Each <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> is
  formed from the corresponding slot specification as follows:
  </p><div class="itemizedlist"><ul type="circle"><li>The name of the slot is the value of the <tt class="constant">:NAME</tt>
     property.  This property appears in every
     <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.</li><li>When the <tt class="constant">:INITFORM</tt> slot option is present in
     the slot specification, then both the <tt class="constant">:INITFORM</tt> and
     <tt class="constant">:INITFUNCTION</tt> properties are present in the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
     The value of the <tt class="constant">:INITFORM</tt> property is the
     initialization form.  The value of the <tt class="constant">:INITFUNCTION</tt> property is
     a function of zero arguments which, when called, returns the result
     of evaluating the initialization form in its proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.
   </li><li>If the <tt class="constant">:INITFORM</tt> slot option is not present in
     the slot specification, then either the <tt class="constant">:INITFUNCTION</tt> property
     will not appear, or its value will be false.  In such cases, the
     value of the <tt class="constant">:INITFORM</tt> property, or whether it appears, is
     unspecified.</li><li>The value of the <tt class="constant">:INITARGS</tt> property is a list
     of the values of each <tt class="constant">:INITARG</tt> slot option.  If there are no
     <tt class="constant">:INITARG</tt> slot options, then either the <tt class="constant">:INITARGS</tt> property
     will not appear or its value will be the empty list.
   </li><li>The value of the <tt class="constant">:READERS</tt> property is a list of
     the values of each <tt class="constant">:READER</tt> and <tt class="constant">:ACCESSOR</tt> slot option.  If
     there are no <tt class="constant">:READER</tt> or <tt class="constant">:ACCESSOR</tt> slot options, then either
     the <tt class="constant">:READERS</tt> property will not appear or its value will be the
     empty list.</li><li>The value of the <tt class="constant">:WRITERS</tt> property is a list of
     the values specified by each <tt class="constant">:WRITER</tt> and <tt class="constant">:ACCESSOR</tt> slot
     option.  The value specified by a <tt class="constant">:WRITER</tt> slot option is just
     the value of the slot option.  The value specified by an
     <tt class="constant">:ACCESSOR</tt> slot option is a two element list: the first element
     is the symbol <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>, the second element is the value of the slot
     option.  If there are no <tt class="constant">:WRITER</tt> or <tt class="constant">:ACCESSOR</tt> slot options,
     then either the <tt class="constant">:WRITERS</tt> property will not appear or its value
     will be the empty list.</li><li>The value of the <tt class="constant">:DOCUMENTATION</tt> property is the
     value of the <tt class="constant">:DOCUMENTATION</tt> slot option.  If there is no
     <tt class="constant">:DOCUMENTATION</tt> slot option, then either the <tt class="constant">:DOCUMENTATION</tt>
     property will not appear or its value will be false.
   </li><li>All other slot options appear as the values of
     properties with the same name as the slot option.  Note that this
     includes not only the remaining standard slot options
     (<tt class="constant">:ALLOCATION</tt> and <tt class="constant">:TYPE</tt>), but also any other options and
     values appearing in the slot specification.  If one of these slot
     options appears more than once, the value of the property will be a
     list of the specified values.</li><li>An implementation is free to add additional
     properties to the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> provided these
     are not symbols accessible in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package, or exported by
     any package defined in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li></ul></div></li><li><p>The <em class="replaceable"><tt>default initargs</tt></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form, becomes the value of
  the <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.
  Special processing of this value is done to properly capture the
  lexical scope of the default value forms.  This is done by converting
  each default initarg in the class option into a
  <strong class="first"><em class="firstterm">canonicalized default initialization argument</em></strong>.
  The resulting list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s is the value of
  the <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.
 </p><p><a id="mop-canonicalized-default-initarg"></a>A canonicalized default
  initarg is a list of three elements.  The first element is the name;
  the second is the actual form itself; and the third is a function of
  zero arguments which, when called, returns the result of evaluating
  the default value form in its proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If a <em class="replaceable"><tt>default initargs</tt></em>
    class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form,
    <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p></div></li><li><p>The <em class="replaceable"><tt>metaclass</tt></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form, becomes the value of
  the <tt class="constant">:METACLASS</tt> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If a <em class="replaceable"><tt>metaclass</tt></em>
   class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form,
   <tt class="constant">:METACLASS</tt> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p></div></li><li><p>The <em class="replaceable"><tt>documentation</tt></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form, becomes the value of
  the <tt class="constant">:DOCUMENTATION</tt> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If a <em class="replaceable"><tt>documentation</tt></em>
    class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form,
    <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p></div></li><li><p>Any other class options become the value of keyword
  arguments with the same name.  The value of the keyword argument is
  the tail of the class option.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if any class
  option appears more than once in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The default initargs of the
    <em class="replaceable"><tt>metaclass</tt></em> are added at the end of the list
    of arguments to pass to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p></div></li></ul></div><p>In the call to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>, every element of its arguments
appears in the same left-to-right order as the corresponding element of
the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form, except that the order of the properties of
<a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s is unspecified.  The values of
properties in <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s do follow this ordering
requirement.  Other ordering relationships in the keyword arguments to
<a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> are unspecified.</p><p>The result of the call to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> is returned as the result
of evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form.</p></div>
<!--mop-cl-defclass--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-Inheritance"></a>29.1.3.2. Inheritance Structure of Class Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-class.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-readers"></a>29.1.3.3. Introspection: Readers for Class Metaobjects</h4></div></div></div><p>In this and the following sections, the “<span class="quote">reader</span>”
generic functions which simply return information associated with a
particular kind of metaobject are presented together.  General
information is presented first, followed by a description of the purpose
of each, and ending with the specified methods for these generic
functions.</p><p>The reader generic functions which simply return information
associated with class metaobjects are presented together in this
section.</p><p>Each of the reader generic functions for class metaobjects has the
same syntax, accepting one required argument called <em class="replaceable"><tt>class</tt></em>, which
must be a class metaobject; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.  An error is also
signaled if the class metaobject has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin class basic introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-name"></a>Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><tt class="function">CLASS-NAME</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><tt class="function">CLASS-NAME</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns the name of <em class="replaceable"><tt>class</tt></em>.  This value can be any Lisp object,
but is usually a symbol, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the class has no name.  This is the
defaulted value of the <tt class="constant">:NAME</tt> initialization argument that was
associated with the class during initialization or reinitialization.
(Also see <a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><tt class="sexp">(SETF <tt class="function">CLASS-NAME</tt>)</tt></a>.)
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-superclasses"></a>Generic Function <a href="#class-direct-superclasses" title="Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-direct-superclasses" title="Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a list of the direct superclasses of <em class="replaceable"><tt>class</tt></em>.  The
elements of this list are class metaobjects.  The empty list is returned
if <em class="replaceable"><tt>class</tt></em> has no direct superclasses.  This is the defaulted value of
the <tt class="constant">:DIRECT-SUPERCLASSES</tt> initialization argument that was associated
with the class during initialization or reinitialization.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>For a class that has not yet been finalized,
 the returned list may contain symbols as placeholder for classes that
 were not yet defined when finalization of the class was last attempted.
  <a href="#no-forward-referenced-class" title="The class CLOS:FORWARD-REFERENCED-CLASS is not implemented.">The class <tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt> is not implemented.</a>.</p></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-slots"></a>Generic Function <a href="#class-direct-slots" title="Generic Function CLOS:CLASS-DIRECT-SLOTS"><tt class="function">CLOS:CLASS-DIRECT-SLOTS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-direct-slots" title="Generic Function CLOS:CLASS-DIRECT-SLOTS"><tt class="function">CLOS:CLASS-DIRECT-SLOTS</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a set of the direct slots of <em class="replaceable"><tt>class</tt></em>.  The elements of
this set are direct slot definition metaobjects.  If the class has no
direct slots, the empty set is returned.  This is the defaulted value of
the <tt class="constant">:DIRECT-SLOTS</tt> initialization argument that was associated with
the class during initialization and reinitialization.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-default-initargs"></a>Generic Function <a href="#class-direct-default-initargs" title="Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-direct-default-initargs" title="Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a list of the direct default initialization arguments for
<em class="replaceable"><tt>class</tt></em>.  Each element of this list is a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.
The empty list is returned if <em class="replaceable"><tt>class</tt></em> has no
direct default initialization arguments.  This is the defaulted value of
the <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> initialization argument that was
associated with the class during initialization or reinitialization.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="cpl"></a>Generic Function <a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns the class precedence list of <em class="replaceable"><tt>class</tt></em>.  The elements of
this list are class metaobjects.</p><p>During class finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> calls
<a href="#compute-cpl" title="29.1.3.6.9.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a> to compute the class precedence list of the class.  That
value is associated with the class metaobject and is returned by <a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a>.
</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <em class="replaceable"><tt>class</tt></em> has not been finalized.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-subclasses"></a>Generic Function <a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a set of the direct subclasses of <em class="replaceable"><tt>class</tt></em>. The elements
of this set are class metaobjects that all mention this class among
their direct superclasses.  The empty set is returned if <em class="replaceable"><tt>class</tt></em> has
no direct subclasses.  This value is maintained by the generic functions
<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a> and <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The set of direct subclasses of a class is
 internally managed as a <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a>. Therefore the existence of
 the <a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a> function does not prevent otherwise
 unreferenced classes from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-slots"></a>Generic Function <a href="#class-slots" title="Generic Function CLOS:CLASS-SLOTS"><tt class="function">CLOS:CLASS-SLOTS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-slots" title="Generic Function CLOS:CLASS-SLOTS"><tt class="function">CLOS:CLASS-SLOTS</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a possibly empty set of the slots accessible in instances
of <em class="replaceable"><tt>class</tt></em>.  The elements of this set are effective slot definition
metaobjects.</p><p>During class finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> calls
<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> to compute the slots of the class.  That value is
associated with the class metaobject and is returned by <a href="#class-slots" title="Generic Function CLOS:CLASS-SLOTS"><tt class="function">CLOS:CLASS-SLOTS</tt></a>.
</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <em class="replaceable"><tt>class</tt></em> has not been finalized.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-default-initargs"></a>Generic Function <a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a list of the default initialization arguments for
<em class="replaceable"><tt>class</tt></em>.  Each element of this list is a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.
The empty list is returned if <em class="replaceable"><tt>class</tt></em> has no
default initialization arguments.</p><p>During finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> calls
<a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a> to compute the default initialization
arguments for the class.  That value is associated with the class
metaobject and is returned by <a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a>.</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <em class="replaceable"><tt>class</tt></em> has not been
finalized.</p></div>
<!--end class basic introspection-->
<!--begin class advanced introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-finalized-p"></a>Generic Function <a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns true if <em class="replaceable"><tt>class</tt></em> has been finalized.  Returns false
otherwise.  Also returns false if the class has not been initialized.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-prototype"></a>Generic Function <a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> <em class="replaceable"><tt>class</tt></em>)</tt></h2></div></div></div><p>Returns a prototype instance of <em class="replaceable"><tt>class</tt></em>.  Whether the instance
is initialized is not specified.  The results are undefined if a
portable program modifies the binding of any slot of a prototype instance.
</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <em class="replaceable"><tt>class</tt></em> has not been finalized.
</p><div class="informalexample"><p>This allows non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a> access to slots with
  allocation <tt class="constant">:CLASS</tt>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (defclass counter ()
    ((count :allocation :class :initform 0 :reader how-many)))
  (defmethod initialize-instance :after ((obj counter) &amp;rest args)
    (incf (slot-value obj 'count)))
  (defclass counted-object (counter) ((name :initarg :name)))
 </pre></td></tr></table><p>
 Now one can find out how many <tt class="classname">COUNTED-OBJECT</tt>s
 have been created by using
  <tt class="code">(HOW-MANY (<a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a> 'COUNTER)))</tt>:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> 'counted-object :name 'foo)
    <span class="returnvalue">#&lt;COUNTED-OBJECT #x203028C9&gt;</span>
  (HOW-MANY (<a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a> 'counter)))
    <span class="returnvalue">1</span>
  (<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> 'counted-object :name 'bar)
    <span class="returnvalue">#&lt;COUNTED-OBJECT #x20306CB1&gt;</span>
  (HOW-MANY (<a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a> 'counter)))
    <span class="returnvalue">2</span>
</pre></td></tr></table></div></div>
<!--end class advanced introspection-->
<div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-readers-methods"></a>Methods</h5></div></div></div><p>The specified methods for the class metaobject reader generic
functions are presented below.</p><p>Each entry in the table indicates a method on one of the reader
generic functions, specialized to a specified class.  The number in each
entry is a reference to the full description of the method.  The full
descriptions appear after the table.</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Generic Function</th><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>, <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a></th><th align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a></th><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><tt class="function">CLASS-NAME</tt></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-8">8</a></td></tr><tr><td align="center"><a href="#class-direct-superclasses" title="Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</tt></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-direct-slots" title="Generic Function CLOS:CLASS-DIRECT-SLOTS"><tt class="function">CLOS:CLASS-DIRECT-SLOTS</tt></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-direct-default-initargs" title="Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</tt></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a></td><td align="center"><a href="#CRM-9">9</a></td><td align="center"><a href="#CRM-9">9</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-slots" title="Generic Function CLOS:CLASS-SLOTS"><tt class="function">CLOS:CLASS-SLOTS</tt></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-6">6</a></td><td align="center"><a href="#CRM-5">5</a></td></tr><tr><td align="center"><a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a></td><td align="center"><a href="#CRM-10">10</a></td><td align="center"><a href="#CRM-10">10</a></td><td align="center"><a href="#CRM-10">10</a></td></tr></tbody></table></div><div class="orderedlist"><p class="title"><b>Class Reader Methods</b></p><ol type="1"><li><a id="CRM-1"></a>This method returns the value which was
   associated with the class metaobject during initialization or
   reinitialization.</li><li><a id="CRM-2"></a>This method returns the value associated
   with the class metaobject by <tt class="method"><a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>)</tt> or
   <tt class="method"><a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
    (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)</tt></li><li><a id="CRM-3"></a>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</li><li><a id="CRM-4"></a>This method returns the empty list.
 </li><li><a id="CRM-5"></a>This method returns true.</li><li><a id="CRM-6"></a>This method returns false.</li><li><a id="CRM-7"></a>This method returns a value derived from
   the information in <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes">Table 29.1, “Direct Superclass Relationships
  Among The Specified Metaobject Classes”</a>, except that
   implementation-specific modifications are permitted as described in
   <a href="#mop-ov-impl-and-user-spec" title="29.1.2.2.1.&#xA0;Implementation and User Specialization">Section 29.1.2.2.1, “Implementation and User Specialization”</a>.</li><li><a id="CRM-8"></a>This method returns the name of the
   built-in class.</li><li><a id="CRM-9"></a>This methods returns a value which is
   maintained by <tt class="method"><a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt> and <tt class="method"><a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt>.
   This method can be overridden only if those methods are overridden as
   well.</li><li><a id="CRM-10"></a>No behavior is specified for this
   method beyond that which is specified for the generic function.</li></ol></div></div></div>
<!--mop-cl-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-finalization"></a>29.1.3.4. Class Finalization Protocol</h4></div></div></div><p>Class <strong class="first"><em class="firstterm">finalization</em></strong> is the process of
computing the information a class inherits from its superclasses and
preparing to actually allocate instances of the class.  The class
finalization process includes computing the class's class precedence
list, the full set of slots accessible in instances of the class and the
full set of default initialization arguments for the class.  These
values are associated with the class metaobject and can be accessed by
calling the appropriate reader.  In addition, the class finalization
process makes decisions about how instances of the class will be
implemented.</p><p>To support forward-referenced superclasses, and to account for the
fact that not all classes are actually instantiated, class finalization
is not done as part of the initialization of the class metaobject.
Instead, finalization is done as a separate protocol, invoked by calling
the generic function <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>.  The exact point at which
<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> is called depends on the class of the class
metaobject; for <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> it is called sometime after all the
classes superclasses are defined, but no later than when the first
instance of the class is allocated (by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>).</p><p>The first step of class finalization is computing the class
precedence list.  Doing this first allows subsequent steps to access the
class precedence list.  This step is performed by calling the generic
function <a href="#compute-cpl" title="29.1.3.6.9.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a>.  The value returned from this call is associated
with the class metaobject and can be accessed by calling the <a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a>
generic function.</p><p>The second step is computing the full set of slots that will be
accessible in instances of the class.  This step is performed by calling
the generic function <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a>.  The result of this call is a list
of effective slot definition metaobjects.  This value is associated with
the class metaobject and can be accessed by calling the <a href="#class-slots" title="Generic Function CLOS:CLASS-SLOTS"><tt class="function">CLOS:CLASS-SLOTS</tt></a>
generic function.</p><p>The behavior of <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> is itself layered, consisting of
calls to <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a> and <a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a>.</p><p>The final step of class finalization is computing the full set of
initialization arguments for the class.  This is done by calling the
generic function <a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a>.  The value returned by this
generic function is associated with the class metaobject and can be
accessed by calling <a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a>.</p><p>If the class was previously finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> may
call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html" target="_top"><tt class="function">MAKE-INSTANCES-OBSOLETE</tt></a>.  The circumstances under which this
happens are described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
 <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>.</p><p>Forward-referenced classes, which provide a temporary definition
for a class which has been referenced but not yet defined, can never be
finalized.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> is called on a
forward-referenced class.</p></div>
<!--mop-cl-finalization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-init"></a>29.1.3.5. Class Initialization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-cl-init-mo">29.1.3.5.1. Initialization of Class Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-cl-reinit-mo">29.1.3.5.2. Reinitialization of Class Metaobjects</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-init-mo"></a>29.1.3.5.1. Initialization of Class Metaobjects</h5></div></div></div><p>A class metaobject can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.
 The initialization arguments establish the definition of the class.
 A class metaobject can be redefined by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.
 Some classes of class metaobject do not support redefinition;
 in these cases, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>Initialization of a class metaobject must be done by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>.
Reinitialization of a class metaobject must be done by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.  Portable programs must not call
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> directly to initialize a class
metaobject. Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a> directly
to initialize or reinitialize a class metaobject.  Portable programs
must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> to change the class of any class metaobject
or to turn a non-class object into a class metaobject.</p><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> on class metaobjects.
 Since the class of class metaobjects may not be changed,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a> on class metaobjects.</p><p>During initialization or reinitialization, each initialization
argument is checked for errors and then associated with the class
metaobject.  The value can then be accessed by calling the appropriate
accessor as shown in <a href="#class-mo-initargs" title="Table&#xA0;29.2.&#xA0;Initialization arguments and&#10;   accessors for class metaobjects">Table 29.2, “Initialization arguments and
   accessors for class metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.  Initialization behavior specific to the
different specified class metaobject classes comes next.  The section
ends with a set of restrictions on portable methods affecting class
metaobject initialization and reinitialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><tt>value</tt></em></span>” means that when that initialization argument is not
supplied, initialization or reinitialization is performed as if
<em class="replaceable"><tt>value</tt></em> had been supplied.  For some initialization arguments this
could be done by the use of default initialization arguments, but
whether it is done this way is not specified.  Implementations are free
to define default initialization arguments for specified class
metaobject classes.  Portable programs are free to define default
initialization arguments for portable subclasses of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>.
</p><p>Unless there is a specific note to the contrary, then during
reinitialization, if an initialization argument is not supplied, the
previously stored value is left unchanged.</p><div class="itemizedlist"><ul type="disc"><li><p>The <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> argument is a list
   of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any
   element of the list is not a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.</p><p>If the class metaobject is being initialized, this argument
   defaults to the empty list.</p></li><li><p> The <tt class="constant">:DIRECT-SLOTS</tt> argument is a list of
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or if any
   element of the list is not a <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
  </p><p>After error checking, this value is converted to a
   list of direct slot definition metaobjects before it is associated
   with the class metaobject.  Conversion of each <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>
   to a direct slot definition metaobject is a two-step
   process.  First, the generic function <a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a> is called with the
   class metaobject and the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> to
   determine the class of the new direct slot definition metaobject;
   this permits both the class metaobject and the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>
   to control the resulting direct slot definition
   metaobject class.  Second, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> is applied to the direct
   slot definition metaobject class and the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
   This conversion could be implemented as shown in the
   following code:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> convert-to-direct-slot-definition (class canonicalized-slot)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
         (<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a>
                class canonicalized-slot)
         canonicalized-slot))
</pre></td></tr></table><p>If the class metaobject is being initialized, this argument
   defaults to the empty list.</p><p>Once the direct slot definition metaobjects have been
   created, the specified reader and writer methods are created.  The
   generic functions <a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><tt class="function">CLOS:READER-METHOD-CLASS</tt></a> and <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a> are
   called to determine the classes of the method metaobjects created.
 </p></li><li><p> The <tt class="constant">:DIRECT-SUPERCLASSES</tt> argument is a list of
   class metaobjects.  Classes which do not support multiple inheritance
   signal an error if the list contains more than one element.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or if
   <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a> applied to <em class="replaceable"><tt>class</tt></em> and any element of this
   list returns false.</p><p>When the class metaobject is being initialized, and this
   argument is either not supplied or is the empty list, this argument
   defaults as follows: if the class is an instance of <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>
   or one of its subclasses the default value is a list of the class
   <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>; if the class is an instance of
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> or one of its subclasses the default
   value is a list of the class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-OBBJECT</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If the class is an instance of
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> or one of its subclasses the default value is a
    list of the class <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a></p></div><p>After any defaulting of the value, the generic function
   <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a> is called once for each element of the list.
  </p><p>When the class metaobject is being reinitialized
   and this argument is supplied, the generic function
   <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a> is called once for each class metaobject in
   the previously stored value but not in the new value; the generic
   function <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a> is called once for each class
   metaobject in the new value but not in the previously stored value.
 </p></li><li>The <tt class="constant">:DOCUMENTATION</tt> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> during initialization.</li><li><p>The <tt class="constant">:NAME</tt> argument is an object.</p><p>If the class is being initialized, this argument defaults to
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the class metaobject.  These values can then be accessed by calling
the corresponding generic function.  The correspondences are as follows:
 </p><div class="table"><a id="class-mo-initargs"></a><p class="title"><b>Table 29.2. Initialization arguments and
   accessors for class metaobjects</b></p><table summary="Initialization arguments and&#10;   accessors for class metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:DIRECT-DEFAULT-INITARGS</tt></td><td align="center"><a href="#class-direct-default-initargs" title="Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</tt></a></td></tr><tr><td align="center"><tt class="constant">:DIRECT-SLOTS</tt></td><td align="center"><a href="#class-direct-slots" title="Generic Function CLOS:CLASS-DIRECT-SLOTS"><tt class="function">CLOS:CLASS-DIRECT-SLOTS</tt></a></td></tr><tr><td align="center"><tt class="constant">:DIRECT-SUPERCLASSES</tt></td><td align="center"><a href="#class-direct-superclasses" title="Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</tt></a></td></tr><tr><td align="center"><tt class="constant">:DOCUMENTATION</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></td></tr><tr><td align="center"><tt class="constant">:NAME</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><tt class="function">CLASS-NAME</tt></a></td></tr></tbody></table></div><p>Instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> support multiple
inheritance and reinitialization.  Instances of the class
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> support multiple inheritance and
reinitialization.  For forward referenced classes, all of the
initialization arguments default to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>Instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> do
  not support multiple inheritance and reinitialization.
</p></div><p>Since built-in classes cannot be created or reinitialized by the
user, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>
are called to initialize or reinitialize a derived instance of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>.</p><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="class-mo-init-methods"></a>Methods</h6></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the class metaobject when either all or none of the specified
initialization has taken effect.</p><p>These restrictions govern the methods that a portable program can
 define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.
 These restrictions apply only to methods on these generic functions for
 which the first specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>.
 Other portable methods on these generic functions are not affected by
 these restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-cl-init-anon"></a>Initialization of Anonymous Classes</h6></div></div></div><p>Class metaobjects created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> are usually
 <strong class="first"><em class="firstterm">anonymous</em></strong>; that is, they have no <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a>.
An anonymous class metaobject can be given a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> using
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>)</tt> and
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><tt class="function">CLASS-NAME</tt></a>)</tt>.</p><p>When a class metaobject is created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>, it is
initialized in the usual way.  The initialization arguments passed to
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> are use to establish the definition of the class.  Each
initialization argument is checked for errors and associated with the
class metaobject.  The initialization arguments correspond roughly to
the arguments accepted by the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> macro, and more closely to the
arguments accepted by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> function.</p><p>Some class metaobject classes allow their instances to be
 redefined.  When permissible, this is done by calling
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.  This is discussed in the
 <a href="#mop-cl-reinit-mo" title="29.1.3.5.2.&#xA0;Reinitialization of Class Metaobjects">next section</a>.</p><p>An example of creating an anonymous class directly using
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> follows:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(flet ((zero () 0)
       (propellor () *propellor*))
  (make-instance 'standard-class
    :name '(my-class foo)
    :direct-superclasses (list (find-class 'plane)
                               another-anonymous-class)
    :direct-slots `((:name x
                     :initform 0
                     :initfunction ,#'zero
                     :initargs (:x)
                     :readers (position-x)
                     :writers ((setf position-x)))
                    (:name y
                     :initform 0
                     :initfunction ,#'zero
                     :initargs (:y)
                     :readers (position-y)
                     :writers ((setf position-y))))
    :direct-default-initargs `((:engine *propellor* ,#'propellor))))
</pre></td></tr></table></div></div>
<!--mop-cl-init-mo--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-reinit-mo"></a>29.1.3.5.2. Reinitialization of Class Metaobjects</h5></div></div></div><p>Some class metaobject classes allow their instances to be
reinitialized.  This is done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.
The initialization arguments have the same interpretation as in class
initialization.</p><p>If the class metaobject was finalized before the call to
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> will be called again
once all the initialization arguments have been processed and associated
with the class metaobject.  In addition, once finalization is complete,
any dependents of the class metaobject will be updated by calling
<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a>.</p></div>
<!--mop-cl-reinit-mo-->
</div>
<!--mop-cl-init--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-customize"></a>29.1.3.6. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#setf-class-name">29.1.3.6.1. Generic Function <tt class="sexp">(SETF <tt class="function">CLASS-NAME</tt>)</tt></a></span></dt><dt><span class="section"><a href="#ensure-class">29.1.3.6.2. Generic Function <tt class="function">CLOS:ENSURE-CLASS</tt></a></span></dt><dt><span class="section"><a href="#ensure-class-UC">29.1.3.6.3. Generic Function <tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a></span></dt><dt><span class="section"><a href="#finalize-inheritance">29.1.3.6.4. Generic Function <tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a></span></dt><dt><span class="section"><a href="#mop-make-instance">29.1.3.6.5. Generic Function <tt class="function">MAKE-INSTANCE</tt></a></span></dt><dt><span class="section"><a href="#alloc-instance">29.1.3.6.6. Generic Function <tt class="function">ALLOCATE-INSTANCE</tt></a></span></dt><dt><span class="section"><a href="#validate-superclass">29.1.3.6.7. Generic Function <tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a></span></dt><dt><span class="section"><a href="#dsd-class">29.1.3.6.8. Generic Function <tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a></span></dt><dt><span class="section"><a href="#compute-cpl">29.1.3.6.9. Generic Function <tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a></span></dt><dt><span class="section"><a href="#compute-slots">29.1.3.6.10. Generic Function <tt class="function">CLOS:COMPUTE-SLOTS</tt></a></span></dt><dt><span class="section"><a href="#compute-esd">29.1.3.6.11. Generic Function <tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a></span></dt><dt><span class="section"><a href="#compute-esd-initargs">29.1.3.6.12. Generic Function <tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a></span></dt><dt><span class="section"><a href="#esd-class">29.1.3.6.13. Generic Function <tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a></span></dt><dt><span class="section"><a href="#compute-default-initargs">29.1.3.6.14. Generic Function <tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a></span></dt></dl></div>
<!--begin class basic customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-class-name"></a>29.1.3.6.1. Generic Function <a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><tt class="sexp">(SETF <tt class="function">CLASS-NAME</tt>)</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><tt class="sexp">(SETF <tt class="function">CLASS-NAME</tt>)</tt></a> <em class="replaceable"><tt>new-name</tt></em>
 <em class="replaceable"><tt>class</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>new-name</tt></em></dt><dd>any Lisp object.</dd></dl></div></dd><dt>Values</dt><dd>This function returns its <em class="replaceable"><tt>new-name</tt></em> argument.
</dd><dt>Purpose</dt><dd><p>This function changes the name of <em class="replaceable"><tt>class</tt></em> to <em class="replaceable"><tt>new-name</tt></em>.
   This value is usually a symbol, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the class has no name.</p><p>This function works by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> with
   <em class="replaceable"><tt>class</tt></em> as its first argument, the symbol <tt class="constant">:NAME</tt> as its second
   argument and <em class="replaceable"><tt>new-name</tt></em> as its third argument.
</p></dd></dl></div></div>
<!--setf-class-name--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-class"></a>29.1.3.6.2. Generic Function <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>name</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>.</dd><dt>keyword arguments</dt><dd>Some of the keyword arguments accepted by this
      function are actually processed by <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a>,
      others are processed during initialization of the class metaobject
      (as described in <a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of Class Metaobjects">Section 29.1.3.5.1, “Initialization of Class Metaobjects”</a>).
</dd></dl></div></dd><dt>Values</dt><dd>The result is a class metaobject.
</dd><dt>Purpose</dt><dd><p>This function is called to define or redefine a
   class with the specified name, and can be called by the user or the
   implementation.  It is the functional equivalent of <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a>, and
   is called by the expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> macro.</p><p>The behavior of this function is actually implemented by the
   generic function <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a>.  When <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a> is called,
   it immediately calls <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a> and returns that result as its
   own.</p><p>The first argument to <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a> is computed as
   follows:</p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><tt>name</tt></em> names a class (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a> returns a
      class when called with <em class="replaceable"><tt>name</tt></em>) use that class.</li><li>Otherwise use <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>
   The second argument is <em class="replaceable"><tt>name</tt></em>.  The remaining arguments are the
   complete set of keyword arguments received by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>
   function.</p></dd></dl></div></div>
<!--ensure-class--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-class-UC"></a>29.1.3.6.3. Generic Function <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:DIRECT-DEFAULT-INITARGS</tt> <tt class="constant">:DIRECT-SLOTS</tt> <tt class="constant">:DIRECT-SUPERCLASSES</tt>
    <tt class="constant">:NAME</tt> <tt class="constant">:METACLASS</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   </dd><dt><em class="replaceable"><tt>name</tt></em></dt><dd>a class name.</dd><dt><tt class="constant">:METACLASS</tt></dt><dd>a class metaobject class or a class metaobject
      class name.  If this argument is not supplied, it defaults to the
      class named <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>.  If a class name is supplied, it is
      interpreted as the class with that name.  If a class name is
      supplied, but there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
   </dd><dt><tt class="constant">:DIRECT-SUPERCLASSES</tt></dt><dd>a list of which each element is a class
      metaobject or a class name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is not
      a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>.</dd><dt>additional keyword arguments</dt><dd>See <a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of Class Metaobjects">Section 29.1.3.5.1, “Initialization of Class Metaobjects”</a>
</dd></dl></div></dd><dt>Values</dt><dd>The result is a class metaobject.
</dd><dt>Purpose</dt><dd><p>This generic function is called to define or modify
   the definition of a named class.  It is called by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><tt class="function">CLOS:ENSURE-CLASS</tt></a>
   function.  It can also be called directly.</p><p>The first step performed by this generic function is to
   compute the set of initialization arguments which will be used to
   create or reinitialize the named class.  The initialization arguments
   are computed from the full set of keyword arguments received by this
   generic function as follows:</p><div class="itemizedlist"><ul type="disc"><li>The <tt class="constant">:METACLASS</tt> argument is not included in the
      initialization arguments.</li><li><p>If the <tt class="constant">:DIRECT-SUPERCLASSES</tt> argument was received
      by this generic function, it is converted into a list of class
      metaobjects.  This conversion does not affect the structure of the
      supplied <tt class="constant">:DIRECT-SUPERCLASSES</tt> argument.  For each element in
      the <tt class="constant">:DIRECT-SUPERCLASSES</tt> argument:</p><div class="itemizedlist"><ul type="circle"><li>If the element is a class metaobject, that
         class metaobject is used.</li><li>If the element names a class, that class
         metaobject is used.</li><li><p>Otherwise an instance of the class
         <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a> is created and used.
         The <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> of the newly created forward referenced
         class metaobject is set to the element.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p><a href="#no-forward-referenced-class" title="The class CLOS:FORWARD-REFERENCED-CLASS is not implemented.">The class <tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt> is not implemented.</a>.
          In the <tt class="constant">:DIRECT-SUPERCLASSES</tt> argument, symbols are used
          to represent classes that have not yet been defined.</p></div></li></ul></div></li><li>All other keyword arguments are included directly
      in the initialization arguments.</li></ul></div><p>If the <em class="replaceable"><tt>class</tt></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a new class metaobject is
   created by calling the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> generic function with the
   value of the <tt class="constant">:METACLASS</tt> argument as its first argument, and the
   previously computed initialization arguments.  The <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> of the
   newly created class metaobject is set to <em class="replaceable"><tt>name</tt></em>.  The newly created
   class metaobject is returned.</p><p>If the <em class="replaceable"><tt>class</tt></em> argument is a forward referenced class,
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> is called to change its class to the value specified
   by the <tt class="constant">:METACLASS</tt> argument.  The class metaobject is then
   reinitialized with the previously initialization arguments.  (This is
   a documented violation of the general constraint that <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a>
   may not be used with class metaobjects.)</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>
    <a href="#no-forward-referenced-class" title="The class CLOS:FORWARD-REFERENCED-CLASS is not implemented.">The class <tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt> is not implemented.</a>.</p></div><p>If the class of the <em class="replaceable"><tt>class</tt></em> argument is not the same as the
   class specified by the <tt class="constant">:METACLASS</tt> argument, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Otherwise, the class metaobject <em class="replaceable"><tt>class</tt></em> is redefined by
   calling the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> generic function with <em class="replaceable"><tt>class</tt></em>
   and the initialization arguments.  The <em class="replaceable"><tt>class</tt></em> argument is then
   returned.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:METACLASS</tt>
   <tt class="constant">:DIRECT-SUPERCLASSES</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dt><dd><p>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><tt>class</tt></em> argument is a class.</p><p>This method can be overridden.</p></dd><dt><tt class="method">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a>) <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:METACLASS</tt>
   <tt class="constant">:DIRECT-SUPERCLASSES</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dt><dd><p>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><tt>class</tt></em> argument is a forward
   referenced class.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>This method does not exist.
   <a href="#no-forward-referenced-class" title="The class CLOS:FORWARD-REFERENCED-CLASS is not implemented.">The class <tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt> is not implemented.</a>.  Use the method
   specialized on <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a> instead.</p></div></dd><dt><tt class="method">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><tt class="function">CLOS:ENSURE-CLASS-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>) <em class="replaceable"><tt>name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:METACLASS</tt>
   <tt class="constant">:DIRECT-SUPERCLASSES</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dt><dd>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><tt>class</tt></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd></dl></div></div>
<!--ensure-class-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="finalize-inheritance"></a>29.1.3.6.4. Generic Function <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
     <em class="replaceable"><tt>class</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to finalize a class
   metaobject.  This is described in <a href="#mop-cl-finalization" title="29.1.3.4.&#xA0;Class Finalization Protocol">Section 29.1.3.4, “Class Finalization Protocol”</a>
  </p><p>After <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> returns, the class
   metaobject is finalized and the result of calling <a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a>
   on the class metaobject will be true.
</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>In some situations, the implementation
  finalizes a class without being forced to do so, i.e. ahead of time.
  In these cases <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> is not called (because it would
  have to signal an error if finalization is not yet possible).
  Therefore custom methods on <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> may have no
  effect.</p></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>))</tt><br /><tt class="method">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>))</tt></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><tt class="method">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:FORWARD-REFERENCED-CLASS</tt></a>))</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
</dd></dl></div></div>
<!--finalize-inheritance--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-make-instance"></a>29.1.3.6.5. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> <em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
    <em class="replaceable"><tt>initargs</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject or a class name.
   </dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>a list of alternating initialization argument
      names and values.</dd></dl></div></dd><dt>Values</dt><dd>The result is a newly allocated and initialized
 instance of <em class="replaceable"><tt>class</tt></em>.</dd><dt>Purpose</dt><dd>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> creates and
   returns a new instance of the given class.  Its behavior and use is
   described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd>This method simply invokes <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
   recursively on the arguments <tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>
   <em class="replaceable"><tt>class</tt></em>)</tt> and <em class="replaceable"><tt>initargs</tt></em>.</dd><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt><br /><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd>These methods implement the behavior of
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-1.html" target="_top">7.1
    “<span class="quote">Object Creation and Initialization</span>”</a>.
</dd></dl></div></div>
<!--mop-make-instance--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="alloc-instance"></a>29.1.3.6.6. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a> <em class="replaceable"><tt>class</tt></em>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>alternating initialization argument names and
      values.</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a newly allocated instance of
   <em class="replaceable"><tt>class</tt></em></dd><dt>Purpose</dt><dd><p>This generic function is called to create a new,
   uninitialized instance of a class.  The interpretation of the concept
   of an <strong class="first"><em class="firstterm">uninitialized</em></strong> instance depends on the
   class metaobject class.</p><p>Before allocating the new instance, <a href="#class-finalized-p" title="Generic Function CLOS:CLASS-FINALIZED-P"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a> is
   called to see if <em class="replaceable"><tt>class</tt></em> has been finalized.  If it has not been
   finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> is called before the new instance
   is allocated.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em></tt></dt><dd>This method allocates storage in the instance for
   each slot with allocation <tt class="constant">:INSTANCE</tt>.  These slots are unbound.
   Slots with any other allocation are ignored by this method (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led).</dd><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd><p>This method allocates storage in the instance for
   each slot with allocation <tt class="constant">:INSTANCE</tt>.  These slots are unbound.
   Slots with any other allocation are ignored by this method (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led).</p><p>The funcallable instance function of the instance is
   undefined - the results are undefined if the instance is applied to
   arguments before <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a> has been used
   to set the funcallable instance function.
</p></dd><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
</dd></dl></div></div>
<!--alloc-instance-->
<!--end class basic customization-->
<!--begin class advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="validate-superclass"></a>29.1.3.6.7. Generic Function <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a> <em class="replaceable"><tt>class</tt></em>
    <em class="replaceable"><tt>superclass</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>superclass</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns true or false.
</dd><dt>Purpose</dt><dd><p>This generic function is called to determine whether
   the class <em class="replaceable"><tt>superclass</tt></em> is suitable for use as a superclass of
   <em class="replaceable"><tt>class</tt></em>.</p><p>This generic function can be be called by the implementation
   or user code.  It is called during class metaobject initialization
   and reinitialization, before the direct superclasses are stored.  If
   this generic function returns false, the initialization or
   reinitialization will signal an error.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) (<em class="replaceable"><tt>superclass</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>This method returns true in three situations:
  </p><div class="orderedlist"><ol type="i"><li>If the <em class="replaceable"><tt>superclass</tt></em> argument is the class named <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>,
   </li><li>if the class of the <em class="replaceable"><tt>class</tt></em> argument is the same
     as the class of the <em class="replaceable"><tt>superclass</tt></em> argument, or
   </li><li>if the class of one of the arguments is
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> and the class of the other is
     <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>.</li></ol></div><p>In all other cases, this method returns false.</p><p>This method can be overridden.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>This method also returns true in a fourth situation:
   </p><div class="orderedlist"><ol start="4" type="i"><li>If the class of the <em class="replaceable"><tt>class</tt></em> argument is a subclass
      of the class of the <em class="replaceable"><tt>superclass</tt></em> argument.
 </li></ol></div></div></dd></dl></div><p><b>Remarks. </b>Defining a method on <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a> requires detailed
 knowledge of of the internal protocol followed by each of the two class
 metaobject classes.  A method on <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><tt class="function">CLOS:VALIDATE-SUPERCLASS</tt></a> which returns
 true for two different class metaobject classes declares that they are
 compatible.</p></div>
<!--validate-superclass--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="dsd-class"></a>29.1.3.6.8. Generic Function <a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
    <em class="replaceable"><tt>initargs</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>a set of initialization arguments and values.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a subclass of the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:DIRECT-SLOT-DEFINITION</tt></a>.
</dd><dt>Purpose</dt><dd><p>When a class is initialized, each of the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s must be converted to a direct slot
   definition metaobject.  This generic function is called to determine
   the class of that direct slot definition metaobject.</p><p>The <em class="replaceable"><tt>initargs</tt></em> argument is simply the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> for the slot.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a>
    (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt><br /><tt class="method">(<a href="#dsd-class" title="29.1.3.6.8.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</tt></a> (<em class="replaceable"><tt>class</tt></em>
    <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd><p>These methods return the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>.
  </p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--dsd-class--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-cpl"></a>29.1.3.6.9. Generic Function <a href="#compute-cpl" title="29.1.3.6.9.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-cpl" title="29.1.3.6.9.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a>
     <em class="replaceable"><tt>class</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is a
   list of class metaobjects.</dd><dt>Purpose</dt><dd><p>This generic-function is called to determine the
   class precedence list of a class.</p><p>The result is a list which contains each of <em class="replaceable"><tt>class</tt></em> and its
   superclasses once and only once.  The first element of the list is
   <em class="replaceable"><tt>class</tt></em> and the last element is the class named <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>.</p><p>All methods on this generic function must compute the class
   precedence list as a function of the ordered direct superclasses of
   the superclasses of <em class="replaceable"><tt>class</tt></em>.  The results are undefined if the
   rules used to compute the class precedence list depend on any other
   factors.</p><p>When a class is finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> calls this
   generic function and associates the returned value with the class
   metaobject.  The value can then be accessed by calling <a href="#cpl" title="Generic Function CLOS:CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:CLASS-PRECEDENCE-LIST</tt></a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-cpl" title="29.1.3.6.9.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><tt class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>This method computes the class precedence list
   according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-5.html" target="_top">4.3.5 “<span class="quote">Determining the
     Class Precedence List</span>”</a>.</p><p>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <em class="replaceable"><tt>class</tt></em> or any of its superclasses
  is a forward referenced class.</p><p>This method can be overridden.</p></dd></dl></div></div>
<!--compute-cpl--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-slots"></a>29.1.3.6.10. Generic Function <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> <em class="replaceable"><tt>class</tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a set of effective slot
   definition metaobjects.</dd><dt>Purpose</dt><dd><p>This generic function computes a set of effective
   slot definition metaobjects for the class <em class="replaceable"><tt>class</tt></em>.  The result is a
   list of effective slot definition metaobjects: one for each slot that
   will be accessible in instances of <em class="replaceable"><tt>class</tt></em>.</p><p>This generic function proceeds in 3 steps:</p><p>The first step collects the full set of direct slot
   definitions from the superclasses of <em class="replaceable"><tt>class</tt></em>.</p><p>The direct slot definitions are then collected into
   individual lists, one list for each slot name associated with any of
   the direct slot definitions.  The slot names are compared with
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a>.  Each such list is then sorted into class precedence list
   order.  Direct slot definitions coming from classes earlier in the
   class precedence list of <em class="replaceable"><tt>class</tt></em> appear before those coming from
   classes later in the class precedence list.  For each slot name, the
   generic function <a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a> is called to compute an effective slot
   definition.  The result of <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> is a list of these
   effective slot definitions, in unspecified order.</p><p>In the final step, the location for each effective slot
   definition is set.  This is done by specified around-methods;
   portable methods cannot take over this behavior.
   For more information on the slot definition locations,
   see <a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>))</tt><br /><tt class="method">(<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)}</tt></dt><dd><p>These methods implement the specified behavior of
   the generic function.</p><p>These methods can be overridden.</p></dd><dt><tt class="method">(<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a>
   <tt class="constant">:AROUND</tt> (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>))</tt><br /><tt class="method">(<a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> <tt class="constant">:AROUND</tt>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>))</tt></dt><dd>These methods implement the specified behavior of
   computing and storing slot locations.
   These methods cannot be overridden.
</dd></dl></div></div>
<!--compute-slots--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-esd"></a>29.1.3.6.11. Generic Function <a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>direct-slot-definitions</tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>name</tt></em></dt><dd>a slot name.</dd><dt><em class="replaceable"><tt>direct-slot-definitions</tt></em></dt><dd>an ordered list of direct slot definition
      metaobjects.  The most specific direct slot definition metaobject
      appears first in the list.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is an
   effective slot definition metaobject.</dd><dt>Purpose</dt><dd><p>This generic function determines the effective slot
   definition for a slot in a class.  It is called by <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a>
   once for each slot accessible in instances of <em class="replaceable"><tt>class</tt></em>.</p><p>This generic function uses the supplied list of direct slot
   definition metaobjects to compute the inheritance of slot properties
   for a single slot.  The returned effective slot definition represents
   the result of computing the inheritance.  The name of the new
   effective slot definition is the same as the name of the direct slot
   definitions supplied.</p><p>The class of the effective slot definition metaobject is
   determined by calling <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a>.  The effective slot definition is
   then created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  The initialization
   arguments passed in this call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> are used to
   initialize the new effective slot definition metaobject.
   See <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions">Section 29.1.4, “Slot Definitions”</a> for details.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>direct-slot-definitions</tt></em>)</tt><br /><tt class="method">(<a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>direct-slot-definitions</tt></em>)</tt></dt><dd><p>This method implements the
 inheritance and defaulting of slot options following the rules
 described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_7-5-3.html" target="_top">7.5.3 “<span class="quote">Inheritance of Slots and Options</span>”</a>.</p><p>This method can be extended, but the value returned by the
   extending method must be the value returned by this method.
</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The initialization arguments that are passed
  to <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> are computed through a call to
  <a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a>.  It is the <a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a> method that
  implements the inheritance rules.</p></div></div>
<!--compute-esd--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-esd-initargs"></a>29.1.3.6.12. Generic Function <a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a></h5></div><div><h6 class="subtitle">Implementation dependent: only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</h6></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>direct-slot-definitions</tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>direct-slot-definitions</tt></em></dt><dd>an ordered list of direct slot definition
      metaobjects.  The most specific direct slot definition metaobject
      appears first in the list.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is a
   list of initialization arguments for an effective slot definition
   metaobject.</dd><dt>Purpose</dt><dd><p>This generic function determines the initialization
   arguments for the effective slot definition for a slot in a class.
   It is called by <a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a>.  The resulting initialization arguments
   are passed to <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a> and then to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.</p><p>This generic function uses the supplied list of direct slot
   definition metaobjects to compute the inheritance of slot properties
   for a single slot.  The returned effective slot definition initargs
   represent the result of computing the inheritance.  The value of <tt class="constant">:NAME</tt>
   in the returned initargs is the same as the name of the direct slot
   definitions supplied.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>direct-slot-definitions</tt></em>)</tt><br /><tt class="method">(<a href="#compute-esd-initargs" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>direct-slot-definitions</tt></em>)</tt></dt><dd><p>This method implements the
 inheritance and defaulting of slot options following the rules
 described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_7-5-3.html" target="_top">7.5.3 “<span class="quote">Inheritance of Slots and Options</span>”</a>.</p><p>This method can be extended.</p></dd></dl></div></div>
<!--compute-esd-initargs--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="esd-class"></a>29.1.3.6.13. Generic Function <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
    <em class="replaceable"><tt>initargs</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>set of initialization arguments and values.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a subclass of the class <a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a>.
</dd><dt>Purpose</dt><dd>This generic function is called by <a href="#compute-esd" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</tt></a> to
   determine the class of the resulting effective slot definition
   metaobject.  The <em class="replaceable"><tt>initargs</tt></em> argument is the set of initialization
   arguments and values that will be passed to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> when the
   effective slot definition metaobject is created.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt><br /><tt class="method">(<a href="#esd-class" title="29.1.3.6.13.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><tt class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</tt></a> (<em class="replaceable"><tt>class</tt></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd><p>These methods return  the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>.
  </p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--esd-class--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-default-initargs"></a>29.1.3.6.14. Generic Function <a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a>
    <em class="replaceable"><tt>class</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is a
   list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s.
</dd><dt>Purpose</dt><dd><p>This generic-function is called to determine the
   default initialization arguments for a class.</p><p>The result is a list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s,
  with no duplication among initialization argument names.</p><p>All methods on this generic function must compute the default
  initialization arguments as a function of only:
  </p><div class="orderedlist"><ol type="i"><li>the class precedence list of <em class="replaceable"><tt>class</tt></em>,
     and</li><li>the direct default initialization arguments of each
     class in that list.</li></ol></div><p>The results are undefined if the rules used to compute
  the default initialization arguments depend on any other factors.</p><p>When a class is finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a> calls this
  generic function and associates the returned value with the class
  metaobject.  The value can then be accessed by calling
  <a href="#class-default-initargs" title="Generic Function CLOS:CLASS-DEFAULT-INITARGS"><tt class="function">CLOS:CLASS-DEFAULT-INITARGS</tt></a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>))</tt><br /><tt class="method">(<a href="#compute-default-initargs" title="29.1.3.6.14.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><tt class="function">CLOS:COMPUTE-DEFAULT-INITARGS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>))</tt></dt><dd><p>These methods compute the default initialization
   arguments according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-1-3.html" target="_top">7.1.3 “<span class="quote">Defaulting
     of Initialization Arguments</span>”</a>.</p><p>These methods signal an error if <em class="replaceable"><tt>class</tt></em> or any of its
   superclasses is a forward referenced class.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--compute-default-initargs-->
<!--end class advanced customization-->
</div>
<!--mop-cl-customize--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-dep"></a>29.1.3.7. Updating Dependencies</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#add-direct-subclass">29.1.3.7.1. Generic Function <tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a></span></dt><dt><span class="section"><a href="#remove-direct-subclass">29.1.3.7.2. Generic Function <tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-direct-subclass"></a>29.1.3.7.1. Generic Function <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a> <em class="replaceable"><tt>superclass</tt></em>
    <em class="replaceable"><tt>subclass</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>superclass</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>subclass</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to maintain a set of
   backpointers from a class to its direct subclasses.  This generic
   function adds <em class="replaceable"><tt>subclass</tt></em> to the set of direct subclasses of
   <em class="replaceable"><tt>superclass</tt></em>.</p><p>When a class is initialized, this generic function is called
   once for each direct superclass of the class.</p><p>When a class is reinitialized, this generic function is
   called once for each added direct superclass of the class.  The
   generic function <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a> is called once for each
   deleted direct superclass of the class.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a>
   (<em class="replaceable"><tt>superclass</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) (<em class="replaceable"><tt>subclass</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li><li><tt class="method"><a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div><p>
</p></dd></dl></div></div>
<!--add-direct-subclass--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-direct-subclass"></a>29.1.3.7.2. Generic Function <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a> <em class="replaceable"><tt>superclass</tt></em>
    <em class="replaceable"><tt>subclass</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>superclass</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>subclass</tt></em></dt><dd>a class metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to maintain a set of
   backpointers from a class to its direct subclasses.  It removes
   <em class="replaceable"><tt>subclass</tt></em> from the set of direct subclasses of <em class="replaceable"><tt>superclass</tt></em>.  No
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if <em class="replaceable"><tt>subclass</tt></em> is not in this set.</p><p>Whenever a class is reinitialized, this generic function is
   called once with each deleted direct superclass of the class.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><tt class="function">CLOS:REMOVE-DIRECT-SUBCLASS</tt></a>
   (<em class="replaceable"><tt>superclass</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) (<em class="replaceable"><tt>subclass</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><tt class="function">CLOS:ADD-DIRECT-SUBCLASS</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li><li><tt class="method"><a href="#class-direct-subclasses" title="Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><tt class="function">CLOS:CLASS-DIRECT-SUBCLASSES</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div></dd></dl></div></div>
<!--remove-direct-subclass-->
</div>
<!--mop-cl-dep-->
</div>
<!--mop-classes--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-sd"></a>29.1.4. Slot Definitions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sd-inheritance">29.1.4.1. Inheritance Structure of Slot Definition Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-sd-readers">29.1.4.2. Introspection: Readers for Slot Definition Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-sd-init">29.1.4.3. Initialization of Slot Definition Metaobjects</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-inheritance"></a>29.1.4.1. Inheritance Structure of Slot Definition Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-slotdef.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-readers"></a>29.1.4.2. Introspection: Readers for Slot Definition Metaobjects</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sd-readers-GFs">29.1.4.2.1. Generic Functions</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-methods">29.1.4.2.2. Methods</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-dsd">29.1.4.2.3. Direct Slot Definition Metaobjects</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-esd">29.1.4.2.4. Effective Slot Definition Metaobjects</a></span></dt></dl></div><p>The reader generic functions which simply return information
associated with slot definition metaobjects are presented together here
in the format described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for Class Metaobjects">Section 29.1.3.3, “Introspection: Readers for Class Metaobjects”</a>.</p><p>Each of the reader generic functions for slot definition
metaobjects has the same syntax, accepting one required argument called
<em class="replaceable"><tt>slot</tt></em>, which must be a slot definition metaobject; otherwise, an
<a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led. An error is also signaled if the slot definition metaobject
has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin slot-definition basic introspection--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-sd-readers-GFs"></a>29.1.4.2.1. Generic Functions</h5></div></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-name"></a>Generic Function <a href="#slotdef-name" title="Generic Function CLOS:SLOT-DEFINITION-NAME"><tt class="function">CLOS:SLOT-DEFINITION-NAME</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-name" title="Generic Function CLOS:SLOT-DEFINITION-NAME"><tt class="function">CLOS:SLOT-DEFINITION-NAME</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the name of <em class="replaceable"><tt>slot</tt></em>.  This value is a symbol that can be
used as a variable name.  This is the value of the <tt class="constant">:NAME</tt>
initialization argument that was associated with the slot definition
metaobject during initialization.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The slot name does not need to be usable as a
  variable name. Slot names like <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> are perfectly valid.
</p></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-allocation"></a>Generic Function <a href="#slotdef-allocation" title="Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><tt class="function">CLOS:SLOT-DEFINITION-ALLOCATION</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-allocation" title="Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><tt class="function">CLOS:SLOT-DEFINITION-ALLOCATION</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the allocation of <em class="replaceable"><tt>slot</tt></em>.  This is a symbol.  This is
the defaulted value of the <tt class="constant">:ALLOCATION</tt> initialization argument that
was associated with the slot definition metaobject during
initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initform"></a>Generic Function <a href="#slotdef-initform" title="Generic Function CLOS:SLOT-DEFINITION-INITFORM"><tt class="function">CLOS:SLOT-DEFINITION-INITFORM</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-initform" title="Generic Function CLOS:SLOT-DEFINITION-INITFORM"><tt class="function">CLOS:SLOT-DEFINITION-INITFORM</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the initialization form of <em class="replaceable"><tt>slot</tt></em>.  This can be any
form.  This is the defaulted value of the <tt class="constant">:INITFORM</tt> initialization
argument that was associated with the slot definition metaobject during
initialization.  When <em class="replaceable"><tt>slot</tt></em> has no initialization form, the value
returned is unspecified (however, <a href="#slotdef-initfunction" title="Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><tt class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</tt></a> is guaranteed
to return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>).</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initfunction"></a>Generic Function <a href="#slotdef-initfunction" title="Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><tt class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-initfunction" title="Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><tt class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the initialization function of <em class="replaceable"><tt>slot</tt></em>.  This value is
either a function of no arguments, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, indicating that the slot
has no initialization function.  This is the defaulted value of the
<tt class="constant">:INITFUNCTION</tt> initialization argument that was associated with the
slot definition metaobject during initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-type"></a>Generic Function <a href="#slotdef-type" title="Generic Function CLOS:SLOT-DEFINITION-TYPE"><tt class="function">CLOS:SLOT-DEFINITION-TYPE</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-type" title="Generic Function CLOS:SLOT-DEFINITION-TYPE"><tt class="function">CLOS:SLOT-DEFINITION-TYPE</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the type of <em class="replaceable"><tt>slot</tt></em>.  This is a type specifier
name.  This is the defaulted value of the <tt class="constant">:TYPE</tt> initialization
argument that was associated with the slot definition metaobject during
initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initargs"></a>Generic Function <a href="#slotdef-initargs" title="Generic Function CLOS:SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:SLOT-DEFINITION-INITARGS</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-initargs" title="Generic Function CLOS:SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:SLOT-DEFINITION-INITARGS</tt></a> <em class="replaceable"><tt>slot</tt></em>)</tt></h2></div></div></div><p>Returns the set of initialization argument keywords for <em class="replaceable"><tt>slot</tt></em>.
This is the defaulted value of the <tt class="constant">:INITARGS</tt> initialization argument
that was associated with the slot definition metaobject during
initialization.</p></div></div>
<!--mop-sd-readers-GFs--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-methods"></a>29.1.4.2.2. Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the slot definition
  metaobject readers.</b></p><dl><dt><tt class="method">(<a href="#slotdef-name" title="Generic Function CLOS:SLOT-DEFINITION-NAME"><tt class="function">CLOS:SLOT-DEFINITION-NAME</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-allocation" title="Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><tt class="function">CLOS:SLOT-DEFINITION-ALLOCATION</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-initform" title="Generic Function CLOS:SLOT-DEFINITION-INITFORM"><tt class="function">CLOS:SLOT-DEFINITION-INITFORM</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-initfunction" title="Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><tt class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-type" title="Generic Function CLOS:SLOT-DEFINITION-TYPE"><tt class="function">CLOS:SLOT-DEFINITION-TYPE</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-initargs" title="Generic Function CLOS:SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:SLOT-DEFINITION-INITARGS</tt></a>
    (<em class="replaceable"><tt>slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-SLOT-DEFINITION</tt></a>))</tt></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd></dl></div></div>
<!--slotd-mo-readers-methods--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-dsd"></a>29.1.4.2.3. Direct Slot Definition Metaobjects</h5></div></div></div><p>The following additional reader generic functions are defined for
 direct slot definition metaobjects.</p><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-readers"></a>Generic Function <a href="#slotdef-readers" title="Generic Function CLOS:SLOT-DEFINITION-READERS"><tt class="function">CLOS:SLOT-DEFINITION-READERS</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-readers" title="Generic Function CLOS:SLOT-DEFINITION-READERS"><tt class="function">CLOS:SLOT-DEFINITION-READERS</tt></a> <em class="replaceable"><tt>direct-slot-definition</tt></em>)</tt></h2></div></div></div><p>Returns a (possibly empty) set of readers of the <em class="replaceable"><tt>direct-slot-definition</tt></em>.  This
value is a list of function names.  This is the defaulted value of the
<tt class="constant">:READERS</tt> initialization argument that was associated with the direct
slot definition metaobject during initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-writers"></a>Generic Function <a href="#slotdef-writers" title="Generic Function CLOS:SLOT-DEFINITION-WRITERS"><tt class="function">CLOS:SLOT-DEFINITION-WRITERS</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-writers" title="Generic Function CLOS:SLOT-DEFINITION-WRITERS"><tt class="function">CLOS:SLOT-DEFINITION-WRITERS</tt></a> <em class="replaceable"><tt>direct-slot-definition</tt></em>)</tt></h2></div></div></div><p>Returns a (possibly empty) set of writers of the <em class="replaceable"><tt>direct-slot-definition</tt></em>.  This
value is a list of function names.  This is the defaulted value of the
<tt class="constant">:WRITERS</tt> initialization argument that was associated with the direct
slot definition metaobject during initialization.
</p><div class="variablelist"><dl><dt><tt class="method">(<a href="#slotdef-readers" title="Generic Function CLOS:SLOT-DEFINITION-READERS"><tt class="function">CLOS:SLOT-DEFINITION-READERS</tt></a>
    (<em class="replaceable"><tt>direct-slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slotdef-writers" title="Generic Function CLOS:SLOT-DEFINITION-WRITERS"><tt class="function">CLOS:SLOT-DEFINITION-WRITERS</tt></a>
    (<em class="replaceable"><tt>direct-slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>))</tt></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd></dl></div><p>
</p></div></div>
<!--slotd-mo-readers-dsd-->
<!--end slot-definition basic introspection-->
<!--begin slot-definition advanced introspection--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-esd"></a>29.1.4.2.4. Effective Slot Definition Metaobjects</h5></div></div></div><p>The following reader generic function is defined for effective
 slot definition metaobjects.</p><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-location"></a>Generic Function <a href="#slotdef-location" title="Generic Function CLOS:SLOT-DEFINITION-LOCATION"><tt class="function">CLOS:SLOT-DEFINITION-LOCATION</tt></a></h6></div><div><h2 class="subtitle"><tt class="code">(<a href="#slotdef-location" title="Generic Function CLOS:SLOT-DEFINITION-LOCATION"><tt class="function">CLOS:SLOT-DEFINITION-LOCATION</tt></a> <em class="replaceable"><tt>effective-slot-definition</tt></em>)</tt></h2></div></div></div><p>Returns the location of <em class="replaceable"><tt>effective-slot-definition</tt></em>.  The meaning and interpretation
 of this value is described in <a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a>.</p><div class="variablelist"><dl><dt><tt class="method">(<a href="#slotdef-location" title="Generic Function CLOS:SLOT-DEFINITION-LOCATION"><tt class="function">CLOS:SLOT-DEFINITION-LOCATION</tt></a>
    (<em class="replaceable"><tt>effective-slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt></dt><dd>This method returns the value stored by
    <tt class="method"><a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> <tt class="constant">:AROUND</tt>
     (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>)</tt> and
    <tt class="method"><a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> <tt class="constant">:AROUND</tt>
     (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)</tt>.
</dd></dl></div></div></div>
<!--slotd-mo-readers-esd-->
<!--end slot-definition advanced introspection-->
</div>
<!--mop-sd-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-init"></a>29.1.4.3. Initialization of Slot Definition Metaobjects</h4></div></div></div><p>A slot definition metaobject can be created by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  The initialization arguments establish the definition
of the slot definition.  A slot definition metaobject cannot be
redefined; calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>Initialization of a slot definition metaobject must be done by
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>.
Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> directly to
initialize a slot definition metaobject.  Portable programs must not
call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a> directly to initialize a slot definition
metaobject.  Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> to change
the class of any slot definition metaobject or to turn a
non-slot-definition object into a slot definition metaobject.</p><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> on slot definition metaobjects.
 Since the class of a slot definition metaobject cannot be changed,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a> on slot definition metaobjects.</p><p>During initialization, each initialization argument is checked for
errors and then associated with the slot definition metaobject.  The
value can then be accessed by calling the appropriate accessor as shown
in <a href="#slotd-mo-initargs" title="Table&#xA0;29.3.&#xA0;Initialization arguments and&#10;  accessors for slot definition metaobjects">Table 29.3, “Initialization arguments and
  accessors for slot definition metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><tt>value</tt></em></span>” means that when that initialization argument is not
supplied, initialization is performed as if <em class="replaceable"><tt>value</tt></em> had been supplied.
For some initialization arguments this could be done by the use of
default initialization arguments, but whether it is done this way is not
specified.  Implementations are free to define default initialization
arguments for specified slot definition metaobject classes.  Portable
programs are free to define default initialization arguments for
portable subclasses of the class <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>.</p><div class="itemizedlist"><ul type="disc"><li><p>The <tt class="constant">:NAME</tt> argument is a slot name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led
   if this argument is not a symbol which can be used as a variable
   name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is not supplied.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The <tt class="constant">:NAME</tt> argument does not need to be
    usable as a variable name. Slot names like <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> are
    perfectly valid.</p></div></li><li>The <tt class="constant">:INITFORM</tt> argument is a form. The
   <tt class="constant">:INITFORM</tt> argument defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the
   <tt class="constant">:INITFORM</tt> argument is supplied, but the <tt class="constant">:INITFUNCTION</tt> argument
   is not supplied.</li><li>The <tt class="constant">:INITFUNCTION</tt> argument is a function of zero
   arguments which, when called, evaluates the <tt class="constant">:INITFORM</tt> in the
   appropriate <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.  The <tt class="constant">:INITFUNCTION</tt> argument
   defaults to false.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the <tt class="constant">:INITFUNCTION</tt> argument is
   supplied, but the <tt class="constant">:INITFORM</tt> argument is not supplied.</li><li>The <tt class="constant">:TYPE</tt> argument is a type specifier name.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led otherwise.  The <tt class="constant">:TYPE</tt> argument defaults to the symbol <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
 </li><li>The <tt class="constant">:ALLOCATION</tt> argument is a symbol.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led otherwise.  The <tt class="constant">:ALLOCATION</tt> argument defaults to the
   symbol <tt class="constant">:INSTANCE</tt>.</li><li>The <tt class="constant">:INITARGS</tt> argument is a list of symbols.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any element of
   this list is not a symbol.  The <tt class="constant">:INITARGS</tt> argument defaults to the
   empty list.</li><li>The <tt class="constant">:READERS</tt> argument is a list of function
   names.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if it is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any element is
   not a valid function name. It defaults to the empty list.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is supplied and the metaobject is not a
   direct slot definition.</li><li>The <tt class="constant">:WRITERS</tt> argument is a list of function
   names.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if it is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any element is
   not a valid function name. It defaults to the empty list.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is supplied and the metaobject is not a
   direct slot definition.</li><li>The <tt class="constant">:DOCUMENTATION</tt> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> during initialization.</li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the slot definition metaobject.  These values can then be accessed
by calling the corresponding generic function.  The correspondences are
as follows:

</p><div class="table"><a id="slotd-mo-initargs"></a><p class="title"><b>Table 29.3. Initialization arguments and
  accessors for slot definition metaobjects</b></p><table summary="Initialization arguments and&#10;  accessors for slot definition metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:NAME</tt></td><td align="center"><a href="#slotdef-name" title="Generic Function CLOS:SLOT-DEFINITION-NAME"><tt class="function">CLOS:SLOT-DEFINITION-NAME</tt></a></td></tr><tr><td align="center"><tt class="constant">:INITFORM</tt></td><td align="center"><a href="#slotdef-initform" title="Generic Function CLOS:SLOT-DEFINITION-INITFORM"><tt class="function">CLOS:SLOT-DEFINITION-INITFORM</tt></a></td></tr><tr><td align="center"><tt class="constant">:INITFUNCTION</tt></td><td align="center"><a href="#slotdef-initfunction" title="Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><tt class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</tt></a></td></tr><tr><td align="center"><tt class="constant">:TYPE</tt></td><td align="center"><a href="#slotdef-type" title="Generic Function CLOS:SLOT-DEFINITION-TYPE"><tt class="function">CLOS:SLOT-DEFINITION-TYPE</tt></a></td></tr><tr><td align="center"><tt class="constant">:ALLOCATION</tt></td><td align="center"><a href="#slotdef-allocation" title="Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><tt class="function">CLOS:SLOT-DEFINITION-ALLOCATION</tt></a></td></tr><tr><td align="center"><tt class="constant">:INITARGS</tt></td><td align="center"><a href="#slotdef-initargs" title="Generic Function CLOS:SLOT-DEFINITION-INITARGS"><tt class="function">CLOS:SLOT-DEFINITION-INITARGS</tt></a></td></tr><tr><td align="center"><tt class="constant">:READERS</tt></td><td align="center"><a href="#slotdef-readers" title="Generic Function CLOS:SLOT-DEFINITION-READERS"><tt class="function">CLOS:SLOT-DEFINITION-READERS</tt></a></td></tr><tr><td align="center"><tt class="constant">:WRITERS</tt></td><td align="center"><a href="#slotdef-writers" title="Generic Function CLOS:SLOT-DEFINITION-WRITERS"><tt class="function">CLOS:SLOT-DEFINITION-WRITERS</tt></a></td></tr><tr><td align="center"><tt class="constant">:DOCUMENTATION</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></td></tr></tbody></table></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotdef-mo-methods"></a>Methods</h5></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the slot definition metaobject when either all or none of the
specified initialization has taken effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a>.  Other portable
methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div></div>
<!--mop-sd-init-->
</div>
<!--mop-sd--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-gf"></a>29.1.5. Generic Functions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-gf-inheritance">29.1.5.1. Inheritance Structure of Generic Function Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-gf-readers">29.1.5.2. Introspection: Readers for Generic Function Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-gf-init">29.1.5.3. Initialization of Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-gf-customize">29.1.5.4. Customization</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-inheritance"></a>29.1.5.1. Inheritance Structure of Generic Function Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-genfun.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-readers"></a>29.1.5.2. Introspection: Readers for Generic Function Metaobjects</h4></div></div></div><p>The reader generic functions which simply return information
associated with generic function metaobjects are presented together here
in the format described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for Class Metaobjects">Section 29.1.3.3, “Introspection: Readers for Class Metaobjects”</a>.</p><p>Each of the reader generic functions for generic function
metaobjects has the same syntax, accepting one required argument called
<em class="replaceable"><tt>generic-function</tt></em>, which must be a generic function metaobject; otherwise, an
<a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.  An error is also signaled if the generic function metaobject
has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin generic-function basic introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-name"></a>Generic Function <a href="#gf-name" title="Generic Function CLOS:GENERIC-FUNCTION-NAME"><tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-name" title="Generic Function CLOS:GENERIC-FUNCTION-NAME"><tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the name of the generic function, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the generic
function has no name.  This is the defaulted value of the <tt class="constant">:NAME</tt>
initialization argument that was associated with the generic function
metaobject during initialization or reinitialization.  (See also
<a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><tt class="sexp">(SETF <tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt>)</tt></a>.)</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-methods"></a>Generic Function <a href="#gf-methods" title="Generic Function CLOS:GENERIC-FUNCTION-METHODS"><tt class="function">CLOS:GENERIC-FUNCTION-METHODS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-methods" title="Generic Function CLOS:GENERIC-FUNCTION-METHODS"><tt class="function">CLOS:GENERIC-FUNCTION-METHODS</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the set of methods currently connected to the generic
function.  This is a set of method metaobjects.  This value is
maintained by the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>.
</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-lambda-list"></a>Generic Function <a href="#gf-lambda-list" title="Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><tt class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-lambda-list" title="Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><tt class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.  This is the
defaulted value of the <tt class="constant">:LAMBDA-LIST</tt> initialization argument that was
associated with the generic function metaobject during initialization or
reinitialization.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> has yet to be
supplied.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-argument-precedence-order"></a>Generic Function <a href="#gf-argument-precedence-order" title="Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><tt class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-argument-precedence-order" title="Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><tt class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the argument precedence order of the generic function.
This value is a list of symbols, a permutation of the required
parameters in the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.  This is the
defaulted value of the <tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt> initialization
argument that was associated with the generic function metaobject during
initialization or reinitialization.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> has not yet been
  supplied.</p></div></div>
<!--end generic-function basic introspection-->
<!--begin generic-function advanced introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-declarations"></a>Generic Function <a href="#gf-declarations" title="Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><tt class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-declarations" title="Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><tt class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns a possibly empty list of the “<span class="quote">declarations</span>”
of the generic function.  The elements of this list are
<a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.  This list is the defaulted value of the
<tt class="constant">:DECLARATIONS</tt> initialization argument that was associated with the
generic function metaobject during initialization or
reinitialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-method-class"></a>Generic Function <a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the default method class of the generic function.  This
class must be a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.  This is the defaulted
value of the <tt class="constant">:METHOD-CLASS</tt> initialization argument that was
associated with the generic function metaobject during initialization or
reinitialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-method-combination"></a>Generic Function <a href="#gf-method-combination" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#gf-method-combination" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</tt></a> <em class="replaceable"><tt>generic-function</tt></em>)</tt></h2></div></div></div><p>Returns the method combination of the generic function.  This is a
method combination metaobject.  This is the defaulted value of the
<tt class="constant">:METHOD-COMBINATION</tt> initialization argument that was associated with
the generic function metaobject during initialization or reinitialization.
</p></div>
<!--end generic-function advanced introspection-->
<div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-name-methods"></a>Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the generic function
  metaobject reader generic functions.</b></p><dl><dt><tt class="method">(<a href="#gf-name" title="Generic Function CLOS:GENERIC-FUNCTION-NAME"><tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt><br /><tt class="method">(<a href="#gf-lambda-list" title="Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><tt class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt><br /><tt class="method">(<a href="#gf-argument-precedence-order" title="Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><tt class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt><br /><tt class="method">(<a href="#gf-declarations" title="Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><tt class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt><br /><tt class="method">(<a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt><br /><tt class="method">(<a href="#gf-method-combination" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><tt class="method">(<a href="#gf-methods" title="Generic Function CLOS:GENERIC-FUNCTION-METHODS"><tt class="function">CLOS:GENERIC-FUNCTION-METHODS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>The value returned by this method is maintained by
   <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)</tt> and
   <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)</tt>.</p></dd></dl></div></div></div>
<!--mop-gf-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-init"></a>29.1.5.3. Initialization of Generic Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-gf-init-defgeneric">29.1.5.3.1. Macro <tt class="function">DEFGENERIC</tt></a></span></dt><dt><span class="section"><a href="#mop-gf-invocation">29.1.5.3.2. Generic Function Invocation Protocol</a></span></dt><dt><span class="section"><a href="#mop-gf-init-mo">29.1.5.3.3. Initialization of Generic Function Metaobjects</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-init-defgeneric"></a>29.1.5.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a></h5></div></div></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form results in a
call to the <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> function. The arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>
are derived from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form in a defined way.  As with
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>, the exact macro-expansion of the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form is not defined, only the relationship between the
arguments to the macro and the arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.</p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><tt>function-name</tt></em>
argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> becomes the first argument to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.
This is the only positional argument accepted by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>; all other
arguments are keyword arguments.</li><li>The <em class="replaceable"><tt>lambda-list</tt></em> argument
to <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> becomes the value of the <tt class="constant">:LAMBDA-LIST</tt> keyword
argument to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.</li><li><p>For each of the options
<tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt>, <tt class="constant">:DOCUMENTATION</tt>, <tt class="constant">:GENERIC-FUNCTION-CLASS</tt> and
<tt class="constant">:METHOD-CLASS</tt>, the value of the option becomes the value of the
keyword argument with the same name.  If the option does not appear in
the macro form, the keyword argument does not appear in the resulting
call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If the option does not appear in the macro form, the
  keyword argument appears in the resulting call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>, with a
  default value: the <em class="replaceable"><tt>lambda list</tt></em> for
  <tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> for <tt class="constant">:DOCUMENTATION</tt>, the class
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> for <tt class="constant">:GENERIC-FUNCTION-CLASS</tt>, the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>
  for <tt class="constant">:METHOD-CLASS</tt>. This is needed to make the generic function reflect
  the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form.</p></div></li><li><p>For the option <tt class="constant">:DECLARE</tt>, the list
of “<span class="quote">declarations</span>” becomes the value of the <tt class="constant">:DECLARATIONS</tt>
keyword argument.  If the <tt class="constant">:DECLARE</tt> option does not
appear in the macro form, the <tt class="constant">:DECLARATIONS</tt> keyword argument does not
appear in the call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>If the <tt class="constant">:DECLARE</tt> option does not appear in
  the macro form, the <tt class="constant">:DECLARATIONS</tt> keyword argument appears in the
  resulting call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>, with a default value of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.  This is
  needed to make the generic function reflect the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form.
 </p></div></li><li>The handling of the <tt class="constant">:METHOD-COMBINATION</tt> option is
not specified.</li><li><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The <tt class="constant">:DECLARE</tt> keyword is
  recognized as equivalent to the <tt class="constant">:DECLARATIONS</tt> keyword, for
  compatibility with <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].  If both <tt class="constant">:DECLARE</tt> and
  <tt class="constant">:DECLARATIONS</tt> keyword arguments are specified, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Any other generic function options become the value of
   keyword arguments with the same name. The value of the keyword
   argument is the tail of the generic function option. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if
   any generic function option appears more than once in the
   <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form.</p><p>The default initargs of the
   <em class="replaceable"><tt>generic-function-class</tt></em> are added at the
   end of the list of arguments to pass to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>. This is needed to
   make the generic function reflect the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form.</p></div></li></ul></div><p>The result of the call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> is returned as the result of
evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> form.</p></div>
<!--mop-gf-init-defgeneric--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-invocation"></a>29.1.5.3.2. Generic Function Invocation Protocol</h5></div></div></div><p>Associated with each generic function is its discriminating
function.  Each time the generic function is called, the discriminating
function is called to provide the behavior of the generic function.  The
discriminating function receives the full set of arguments received by
the generic function.  It must lookup and execute the appropriate
methods, and return the appropriate values.</p><p>The discriminating function is computed by the highest layer of
the generic function invocation protocol, <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a>.
Whenever a generic function metaobject is initialized, reinitialized, or
a method is added or removed, the discriminating function is recomputed.
The new discriminating function is then stored with
<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a>.</p><p>Discriminating functions call <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>
and <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> to compute the methods
applicable to the generic functions arguments.  Applicable methods are
combined by <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> to produce
an <strong class="first"><em class="firstterm">effective method</em></strong>.  Provisions are made to
allow memoization of the method applicability and effective methods
computations.  (See the description of <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a>
for details.)</p><p>The body of method definitions are processed by
<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a>.  The result of this generic function is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>
which is processed by either <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> to produce
a <strong class="first"><em class="firstterm">method function</em></strong>.  The arguments received by the
method function are controlled by the <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> forms appearing in
the effective methods.  By default, method functions accept two
arguments: a list of arguments to the generic function, and a list of
next methods.  The list of next methods corresponds to the next methods
argument to <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a>.  If <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> appears with additional
arguments, these will be passed to the method functions as well; in
these cases, <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> must have created the method lambdas
to expect additional arguments.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>See <a href="#no-make-method-lambda" title="The generic function CLOS:MAKE-METHOD-LAMBDA is not implemented">The generic function <tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt> is not implemented</a>.</p><p>See <a href="#method-functions-args" title="Method function arguments.">Method function arguments.</a>.</p></div></div>
<!--mop-gf-invocation--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-init-mo"></a>29.1.5.3.3. Initialization of Generic Function Metaobjects</h5></div></div></div><p>A generic function metaobject can be created by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  The initialization arguments establish the definition
of the generic function.  A generic function metaobject can be redefined
by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.  Some classes of generic function
metaobject do not support redefinition; in these cases,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>Initialization of a generic function metaobject must be done by
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>.
Reinitialization of a generic-function metaobject must be done by
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.  Portable programs must not call
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> directly to initialize a generic function
metaobject.  Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>
directly to initialize or reinitialize a generic function metaobject.
Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> to change the class of
any generic function metaobject or to turn a non-generic-function object
into a generic function metaobject.</p><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> on generic function metaobjects.
 Since the class of a generic function metaobject may not be changed,
 no behavior is specified for the results of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a> on generic function metaobjects.</p><p>During initialization or reinitialization, each initialization
argument is checked for errors and then associated with the generic
function metaobject.  The value can then be accessed by calling the
appropriate accessor as shown in <a href="#gf-mo-initargs" title="Table&#xA0;29.4.&#xA0;Initialization arguments and accessors&#10;  for generic function metaobjects">Table 29.4, “Initialization arguments and accessors
  for generic function metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments. The section ends with a set of restrictions on
portable methods affecting generic function metaobject initialization
and reinitialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><tt>value</tt></em></span>” means that when that initialization argument is not
supplied, initialization or reinitialization is performed as if
<em class="replaceable"><tt>value</tt></em> had been supplied.  For some initialization arguments this
could be done by the use of default initialization arguments, but
whether it is done this way is not specified.  Implementations are free
to define default initialization arguments for specified generic
function metaobject classes.  Portable programs are free to define
default initialization arguments for portable subclasses of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>.</p><p>Unless there is a specific note to the contrary, then during
reinitialization, if an initialization argument is not supplied, the
previously stored value is left unchanged.</p><div class="itemizedlist"><ul type="disc"><li><p>The <tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt> argument is a list
   of symbols.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument appears but the <tt class="constant">:LAMBDA-LIST</tt>
   argument does not appear.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>
   or if this value is not a permutation of the symbols from the
   required arguments part of the <tt class="constant">:LAMBDA-LIST</tt> initialization
   argument.</p><p>When the generic function is being initialized or
   reinitialized, and this argument is not supplied, but the
   <tt class="constant">:LAMBDA-LIST</tt> argument is supplied, this value defaults to the
   symbols from the required arguments part of the <tt class="constant">:LAMBDA-LIST</tt>
   argument, in the order they appear in that argument.  If neither
   argument is supplied, neither are initialized (see the description of
   <tt class="constant">:LAMBDA-LIST</tt>.)</p></li><li><p>The <tt class="constant">:DECLARATIONS</tt> argument is a list of <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.
  </p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or
   if each of its elements is not a legal <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, it defaults to the empty list.
 </p></li><li>The <tt class="constant">:DOCUMENTATION</tt> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> during initialization.</li><li><p>The <tt class="constant">:LAMBDA-LIST</tt> argument is a <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a proper generic function
   <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, the generic function's <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is not
   initialized.  The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> will be initialized later, either when
   the first method is added to the generic function, or a later
   reinitialization of the generic function.</p></li><li>The <tt class="constant">:METHOD-COMBINATION</tt> argument is a method
   combination metaobject.</li><li><p>The <tt class="constant">:METHOD-CLASS</tt> argument is a class metaobject.
  </p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a subclass of the
   class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, it defaults to the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>.
 </p></li><li><p>  The <tt class="constant">:NAME</tt> argument is an object.</p><p>If the generic function is being initialized, this argument
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</p></li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the generic function metaobject.  These values can then be accessed
by calling the corresponding generic function.  The correspondences are
as follows:
</p><div class="table"><a id="gf-mo-initargs"></a><p class="title"><b>Table 29.4. Initialization arguments and accessors
  for generic function metaobjects</b></p><table summary="Initialization arguments and accessors&#10;  for generic function metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt></td><td align="center"><a href="#gf-argument-precedence-order" title="Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><tt class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</tt></a></td></tr><tr><td align="center"><tt class="constant">:DECLARATIONS</tt></td><td align="center"><a href="#gf-declarations" title="Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><tt class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</tt></a></td></tr><tr><td align="center"><tt class="constant">:DOCUMENTATION</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></td></tr><tr><td align="center"><tt class="constant">:LAMBDA-LIST</tt></td><td align="center"><a href="#gf-lambda-list" title="Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><tt class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</tt></a></td></tr><tr><td align="center"><tt class="constant">:METHOD-COMBINATION</tt></td><td align="center"><a href="#gf-method-combination" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</tt></a></td></tr><tr><td align="center"><tt class="constant">:METHOD-CLASS</tt></td><td align="center"><a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a></td></tr><tr><td align="center"><tt class="constant">:NAME</tt></td><td align="center"><a href="#gf-name" title="Generic Function CLOS:GENERIC-FUNCTION-NAME"><tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt></a></td></tr></tbody></table></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="gf-mo-init-methods"></a>Methods</h6></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the generic function metaobject when either all or none of the
specified initialization has taken effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>.  Other
portable methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div></div>
<!--mop-gf-init-mo-->
</div>
<!--mop-gf-init--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-customize"></a>29.1.5.4. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#setf-gf-name">29.1.5.4.1. Generic Function <tt class="sexp">(SETF <tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt>)</tt></a></span></dt><dt><span class="section"><a href="#ensure-gf">29.1.5.4.2. Generic Function <tt class="function">ENSURE-GENERIC-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#ensure-gf-UC">29.1.5.4.3. Generic Function <tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a></span></dt><dt><span class="section"><a href="#add-method">29.1.5.4.4. Generic Function <tt class="function">ADD-METHOD</tt></a></span></dt><dt><span class="section"><a href="#mop-remove-method">29.1.5.4.5. Generic Function <tt class="function">REMOVE-METHOD</tt></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods">29.1.5.4.6. Generic Function <tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods-UC">29.1.5.4.7. Generic Function <tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a></span></dt><dt><span class="section"><a href="#compute-effective-method">29.1.5.4.8. Generic Function <tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a></span></dt><dt><span class="section"><a href="#compute-effective-method-as-function">29.1.5.4.9. Function <tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#make-method-lambda">29.1.5.4.10. Generic Function <tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#compute-discriminating-function">29.1.5.4.11. Generic Function <tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a></span></dt></dl></div>
<!--begin generic-function basic customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-gf-name"></a>29.1.5.4.1. Generic Function <a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><tt class="sexp">(SETF <tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt>)</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><tt class="sexp">(SETF <tt class="function">CLOS:GENERIC-FUNCTION-NAME</tt>)</tt></a> <em class="replaceable"><tt>new-name</tt></em> <em class="replaceable"><tt>generic-function</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>new-name</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd></dl></div></dd><dt>Values</dt><dd>This function returns its <em class="replaceable"><tt>new-name</tt></em> argument.
</dd><dt>Purpose</dt><dd><p>This function changes the name of <em class="replaceable"><tt>generic-function</tt></em> to <em class="replaceable"><tt>new-name</tt></em>.
   This value is usually a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, if the generic function
   is to have no name.</p><p>This function works by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> with
   <em class="replaceable"><tt>generic-function</tt></em> as its first argument, the symbol <tt class="constant">:NAME</tt> as its second argument
   and <em class="replaceable"><tt>new-name</tt></em> as its third argument.
</p></dd></dl></div></div>
<!--setf-gf-name--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-gf"></a>29.1.5.4.2. Generic Function <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> <em class="replaceable"><tt>function-name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>function-name</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a></dd><dt>keyword arguments</dt><dd>Some of the keyword arguments accepted by this
      function are actually processed by <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a>, others are
      processed during initialization of the generic function metaobject
      (as described in <a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of Generic Function Metaobjects">Section 29.1.5.3.3, “Initialization of Generic Function Metaobjects”</a>).
</dd></dl></div></dd><dt>Values</dt><dd>The result is a generic function metaobject.
</dd><dt>Purpose</dt><dd><p>This function is called to define a globally named
   generic function or to specify or modify options and declarations
   that pertain to a globally named generic function as a whole.  It can
   be called by the user or the implementation.</p><p>It is the functional equivalent of <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a>, and is
   called by the expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> macros.
  </p><p>The behavior of this function is actually
   implemented by the generic function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a>.  When <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>
   is called, it immediately calls <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a> and returns that
   result as its own.</p><p>The first argument to <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a> is computed as follows:
   </p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><tt>function-name</tt></em> names a non-generic
      function, a macro, or a special form, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
    </li><li>If <em class="replaceable"><tt>function-name</tt></em> names a generic function, that
      generic function metaobject is used.</li><li>Otherwise, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is used.
   </li></ul></div><p>The second argument is <em class="replaceable"><tt>function-name</tt></em>.  The remaining arguments
   are the complete set of keyword arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.
</p></dd></dl></div></div>
<!--ensure-gf--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-gf-UC"></a>29.1.5.4.3. Generic Function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a> <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>function-name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:ARGUMENT-PRECEDENCE-ORDER</tt> <tt class="constant">:DECLARATIONS</tt> <tt class="constant">:DOCUMENTATION</tt>
    <tt class="constant">:GENERIC-FUNCTION-CLASS</tt> <tt class="constant">:LAMBDA-LIST</tt> <tt class="constant">:METHOD-CLASS</tt> <tt class="constant">:METHOD-COMBINATION</tt>
    <tt class="constant">:NAME</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   </dd><dt><em class="replaceable"><tt>function-name</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a></dd><dt><tt class="constant">:GENERIC-FUNCTION-CLASS</tt></dt><dd>a class metaobject or a class name.  If it is not
      supplied, it defaults to the class named
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>.  If a class name is supplied, it is
      interpreted as the class with that name.  If a class name is
      supplied, but there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
   </dd><dt>additional keyword arguments</dt><dd><p>see <a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of Generic Function Metaobjects">Section 29.1.5.3.3, “Initialization of Generic Function Metaobjects”</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The <tt class="constant">:DECLARE</tt> keyword is recognized as
       equivalent to the <tt class="constant">:DECLARATIONS</tt> keyword, for compatibility
       with <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p></div></dd></dl></div></dd><dt>Values</dt><dd>The result is a generic function metaobject.
</dd><dt>Purpose</dt><dd><p>The generic function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a> is called to
   define or modify the definition of a globally named generic function.
   It is called by the <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> function.  It can also be called
   directly.</p><p>The first step performed by this generic function is to compute
   the set of initialization arguments which will be used to create or
   reinitialize the globally named generic function.  These
   initialization arguments are computed from the full set of keyword
   arguments received by this generic function as follows:
   </p><div class="itemizedlist"><ul type="disc"><li>The <tt class="constant">:GENERIC-FUNCTION-CLASS</tt>
      argument is not included in the initialization arguments.
    </li><li>If the <tt class="constant">:METHOD-CLASS</tt> argument was received by
      this generic function, it is converted into a class metaobject.
      This is done by looking up the class name with <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><tt class="function">FIND-CLASS</tt></a>.  If
      there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</li><li>All other keyword arguments are included directly
      in the initialization arguments.</li></ul></div><p>If the <em class="replaceable"><tt>generic-function</tt></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, an instance of the class
   specified by the <tt class="constant">:GENERIC-FUNCTION-CLASS</tt> argument is created by
   calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> with the previously computed initialization
   arguments.  The function name <em class="replaceable"><tt>function-name</tt></em> is set to name the generic
   function.  The newly created generic function metaobject is returned.
  </p><p>If the class of the <em class="replaceable"><tt>generic-function</tt></em> argument is not the same
   as the class specified by the <tt class="constant">:GENERIC-FUNCTION-CLASS</tt> argument, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Otherwise the generic function <em class="replaceable"><tt>generic-function</tt></em> is redefined by calling
   the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> generic function with <em class="replaceable"><tt>generic-function</tt></em> and the
   initialization arguments.  The <em class="replaceable"><tt>generic-function</tt></em> argument is then returned.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>function-name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   <tt class="constant">:GENERIC-FUNCTION-CLASS</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dt><dd><p>This method implements the behavior of the generic
   function in the case where <em class="replaceable"><tt>function-name</tt></em> names an existing generic
   function.</p><p>This method can be overridden.</p></dd><dt><tt class="method">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><tt class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>) <em class="replaceable"><tt>function-name</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:GENERIC-FUNCTION-CLASS</tt>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)</tt></dt><dd>This method implements the behavior of the generic
   function in the case where <em class="replaceable"><tt>function-name</tt></em> names no function, generic
   function, macro or special form.
</dd></dl></div></div>
<!--ensure-gf-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-method"></a>29.1.5.4.4. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>method</tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>method</tt></em></dt><dd>a method metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The <em class="replaceable"><tt>generic-function</tt></em> argument is returned.
</dd><dt>Purpose</dt><dd><p>This generic function associates an unattached
   method with a generic function.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the method is not
   congruent with the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the method is already associated with some
   other generic function.</p><p>If the given method agrees with an existing method of the
   generic function on parameter specializers and qualifiers, the
   existing method is removed by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a> before the
   new method is added.  See the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-3.html" target="_top">7.6.3 “<span class="quote">Agreement on
     Parameter Specializers and Qualifiers</span>”</a>
   for a definition of agreement in this context.</p><p>Associating the method with the generic function then
   proceeds in four steps:</p><div class="orderedlist"><ol type="i"><li>add <em class="replaceable"><tt>method</tt></em> to the set returned by
      <a href="#gf-methods" title="Generic Function CLOS:GENERIC-FUNCTION-METHODS"><tt class="function">CLOS:GENERIC-FUNCTION-METHODS</tt></a> and arrange for <a href="#method-gf" title="Generic Function CLOS:METHOD-GENERIC-FUNCTION"><tt class="function">CLOS:METHOD-GENERIC-FUNCTION</tt></a> to return <em class="replaceable"><tt>generic-function</tt></em>;
    </li><li>call <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a> for each of the method's
    specializers;</li><li>call <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> and
      install its result with <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a>; and
    </li><li>update the dependents of the generic function.
  </li></ol></div><p>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> can be called by the user
   or the implementation.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd>This method is specified by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div></div>
<!--add-method--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-remove-method"></a>29.1.5.4.5. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a> <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>method</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>method</tt></em></dt><dd>a method metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The <em class="replaceable"><tt>generic-function</tt></em> argument is returned.
</dd><dt>Purpose</dt><dd><p>This generic function breaks the association between
   a generic function and one of its methods.</p><p>No <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the method is not among the methods of the
   generic function.</p><p>Breaking the association between the method and the generic
   function proceeds in four steps:</p><div class="orderedlist"><ol type="i"><li>remove <em class="replaceable"><tt>method</tt></em> from the set returned by
      <a href="#gf-methods" title="Generic Function CLOS:GENERIC-FUNCTION-METHODS"><tt class="function">CLOS:GENERIC-FUNCTION-METHODS</tt></a> and arrange for <a href="#method-gf" title="Generic Function CLOS:METHOD-GENERIC-FUNCTION"><tt class="function">CLOS:METHOD-GENERIC-FUNCTION</tt></a> to return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>;
    </li><li>call <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a> for each of the
      method's specializers;</li><li>call <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> and
      install its result with <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a>;
      and</li><li>update the dependents of the generic function.
  </li></ol></div><p>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a> can be called by the
   user or the implementation.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd><dt><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd>This method is specified by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div></div>
<!--mop-remove-method-->
<!--end generic-function basic customization-->
<!--begin generic-function advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-applicable-methods"></a>29.1.5.4.6. Generic Function <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>
     <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>arguments</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>arguments</tt></em></dt><dd>a list of objects.</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns a possibly empty list
   of method metaobjects.</dd><dt>Purpose</dt><dd><p>This generic function determines the method
   applicability of a generic function given a list of required
   arguments.  The returned list of method metaobjects is sorted by
   precedence order with the most specific method appearing first.  If
   no methods are applicable to the supplied arguments the empty list is
   returned.</p><p>When a generic function is invoked, the discriminating
   function must determine the ordered list of methods applicable to the
   arguments.  Depending on the generic function and the arguments, this
   is done in one of three ways: using a memoized value; calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>; or calling
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>.
   (Refer to the description of <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> for
   the details of this process.)</p><p>The <em class="replaceable"><tt>arguments</tt></em> argument is permitted to contain more elements
   than the generic function accepts required arguments; in these cases
   the extra arguments will be ignored.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if <em class="replaceable"><tt>arguments</tt></em>
   contains fewer elements than the generic function accepts required
   arguments.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>arguments</tt></em>)</tt></dt><dd><p>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if any method of the generic
   function has a specializer which is neither a class metaobject nor an
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer metaobject.</p><p>Otherwise, this method computes the sorted list of applicable
   methods according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6.html" target="_top">7.6.6 “<span class="quote">Method Selection
     and Combination</span>”</a></p><p>This method can be overridden.  Because of the consistency
   requirements between this generic function and
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>, doing so may require also overriding
   <tt class="method"><a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt>.
</p></dd></dl></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-cam-remarks"></a>Remarks</h6></div></div></div>
<!--sds-->
<p>See also the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_com_able-methods.html" target="_top"><tt class="function">COMPUTE-APPLICABLE-METHODS</tt></a>.
</p></div></div>
<!--compute-applicable-methods--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-applicable-methods-UC"></a>29.1.5.4.7. Generic Function <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>
    <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>classes</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>classes</tt></em></dt><dd>a list of class metaobjects.
</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns two values.  The first
   is a possibly empty list of method metaobjects.  The second is either
   true or false.</dd><dt>Purpose</dt><dd><p>This generic function is called to attempt to
   determine the method applicability of a generic function given only
   the classes of the required arguments.</p><p>If it is possible to completely determine the ordered list of
   applicable methods based only on the supplied classes, this generic
   function returns that list as its first value and true as its second
   value.  The returned list of method metaobjects is sorted by
   precedence order, the most specific method coming first.  If no
   methods are applicable to arguments with the specified classes, the
   empty list and true are returned.</p><p>If it is not possible to completely determine the ordered
   list of applicable methods based only on the supplied classes, this
   generic function returns an unspecified first value and false as its
   second value.</p><p>When a generic function is invoked, the discriminating
   function must determine the ordered list of methods applicable to the
   arguments.  Depending on the generic function and the arguments, this
   is done in one of three ways: using a memoized value; calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>; or calling
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>.  (Refer to the description of
   <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> for the details of this process.)
  </p><p>The following consistency relationship between
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> and <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a> must
   be maintained: for any given generic function and set of arguments,
   if <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> returns a second value of true,
   the first value must be equal to the value that would be returned by
   a corresponding call to <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>.  The results
   are undefined if a portable method on either of these generic
   functions causes this consistency to be violated.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>classes</tt></em>)</tt></dt><dd><p>If any method of the generic function has a
   specializer which is neither a class metaobject nor an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a>
   specializer metaobject, this method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>In cases where the generic function has no methods with
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers, or has no methods with <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers
   that could be applicable to arguments of the supplied classes, this
   method returns the ordered list of applicable methods as its first
   value and true as its second value.</p><p>Otherwise this method returns an unspecified first value and
   false as its second value.</p><p>This method can be overridden. Because of the consistency
   requirements between this generic function and
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>, doing so may require also overriding
   <tt class="method"><a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>) </tt>.
</p></dd></dl></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-cam-UC-remarks"></a>Remarks</h6></div></div></div><p>This generic function exists to allow user extensions which alter
method lookup rules, but which base the new rules only on the classes of
the required arguments, to take advantage of the class-based method
lookup memoization found in many implementations.  (There is of course
no requirement for an implementation to provide this optimization.)</p><p>Such an extension can be implemented by two methods, one on this
generic function and one on <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>.  Whenever
the user extension is in effect, the first method will return a second
value of true.  This should allow the implementation to absorb these
cases into its own memoization scheme.</p><p>To get appropriate performance, other kinds of extensions may
require methods on <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> which implement
their own memoization scheme.</p></div></div>
<!--compute-applicable-methods-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-effective-method"></a>29.1.5.4.8. Generic Function <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>method-combination</tt></em>
    <em class="replaceable"><tt>methods</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>method-combination</tt></em></dt><dd>a method combination metaobject.
   </dd><dt><em class="replaceable"><tt>methods</tt></em></dt><dd>a list of method metaobjects.
</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns two values.  The first
   is an effective method, the second is a list of effective method
   options.</dd><dt>Purpose</dt><dd><p>This generic function is called to determine the
   effective method from a sorted list of method metaobjects.</p><p>An effective method is a form that describes how the
    applicable methods are to be combined.  Inside of effective method
    forms are <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> forms which indicate that a particular
    method is to be called.  The arguments to the <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> form
    indicate exactly how the method function of the method should be
    called.  (See <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> for more details about method
    functions.)</p><p>An effective method option has the same interpretation and
    syntax as either the <tt class="constant">:ARGUMENTS</tt> or the <tt class="constant">:GENERIC-FUNCTION</tt> option in the long form
    of <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><tt class="function">DEFINE-METHOD-COMBINATION</tt></a>.</p><p>More information about the form and interpretation of
    effective methods and effective method options can be found under
    the description of the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><tt class="function">DEFINE-METHOD-COMBINATION</tt></a> macro in the
    <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification.</p><p>This generic function can be called by the user or the
    implementation.  It is called by discriminating functions whenever a
    sorted list of applicable methods must be converted to an effective
    method.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>method-combination</tt></em> <em class="replaceable"><tt>methods</tt></em>)</tt></dt><dd><p>This method computes the effective method according
   to the rules of the method combination type implemented by <em class="replaceable"><tt>method-combination</tt></em>.</p><p>This method can be overridden.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The second return value may contain only one
  <tt class="constant">:ARGUMENTS</tt> option and only one <tt class="constant">:GENERIC-FUNCTION</tt> option. When overriding a
  <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> method, before adding an <tt class="constant">:ARGUMENTS</tt> or
  <tt class="constant">:GENERIC-FUNCTION</tt> option, you therefore need to check whether it this option is
  already present.</p></div></div>
<!--compute-effective-method--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-effective-method-as-function"></a>29.1.5.4.9. Function <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</tt></a></h5></div><div><h6 class="subtitle">Implementation dependent: only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</h6></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</tt></a>
    <em class="replaceable"><tt>generic-function</tt></em> <em class="replaceable"><tt>methods</tt></em> <em class="replaceable"><tt>arguments</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>methods</tt></em></dt><dd>a list of method metaobjects.
   </dd><dt><em class="replaceable"><tt>arguments</tt></em></dt><dd>a list of arguments.
   </dd></dl></div></dd><dt>Values</dt><dd>This function returns the effective method as a function,
   accepting any set of arguments for which all of the given methods are
   applicable.</dd><dt>Purpose</dt><dd><p>This function is called to determine the effective method
   from a sorted list of method metaobjects, and convert it to a function.
   The <em class="replaceable"><tt>arguments</tt></em> are a set of arguments to which the methods are applicable,
   and are used solely for error message purposes.</p><p>This function calls <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> using the <em class="replaceable"><tt>generic-function</tt></em>'s
   method combination, wraps local macro definitions for <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">MAKE-METHOD</tt></a> around it, handles the <tt class="constant">:ARGUMENTS</tt> and <tt class="constant">:GENERIC-FUNCTION</tt> options,
   and compiles the resulting form to a function.</p></dd></dl></div></div>
<!--compute-effective-method-as-function--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="make-method-lambda"></a>29.1.5.4.10. Generic Function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> <em class="replaceable"><tt>generic-function</tt></em>
    <em class="replaceable"><tt>method</tt></em> <em class="replaceable"><tt>lambda-expression</tt></em> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>method</tt></em></dt><dd>a (possibly uninitialized) method metaobject.
      
<!--change to uninitialized?????-->

   </dd><dt><em class="replaceable"><tt>lambda-expression</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>.</dd><dt><em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em></dt><dd>the same as the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> argument to
     macro expansion functions.</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns two values.  The first
   is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>, the second is a list of initialization
   arguments and values.</dd><dt>Purpose</dt><dd><p>This generic function is called to produce a
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> which can itself be used to produce a method function for
   a method and generic function with the specified classes.  The
   generic function and method the method function will be used with are
   not required to be the given ones.  Moreover, the method metaobject
   may be uninitialized.</p><p>Either the function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a>, the special form <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> or
   the function <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> must be used to convert the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> a
   method function.  The method function itself can be applied to
   arguments with <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a>.</p><p>When a method is actually called by an effective method, its
   first argument will be a list of the arguments to the generic
   function.  Its remaining arguments will be all but the first argument
   passed to <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a>.  By default, all method functions must
   accept two arguments: the list of arguments to the generic function
   and the list of next methods.</p><p>For a given generic function and method class, the applicable
   methods on <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> and <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> must
   be consistent in the following way: each use of <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a>
   returned by the method on <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> must have the
   same number of arguments, and the method lambda returned by the
   method on <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> must accept a corresponding number of
   arguments.</p><p>Note that the system-supplied implementation of
   <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is not required to handle extra arguments to the
   method function.  Users who define additional arguments to the method
   function must either redefine or forego <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a>.  (See the
   example below.)</p><p>When the method metaobject is created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>,
   the method function must be the value of the <tt class="constant">:FUNCTION</tt>
   initialization argument.  The additional initialization arguments,
   returned as the second value of this generic function, must also be
   passed in this call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)
   <em class="replaceable"><tt>lambda-expression</tt></em> <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>)</tt></dt><dd><p>This method returns a method lambda which accepts two
  arguments, the list of arguments to the generic function, and the list
  of next methods.  What initialization arguments may be returned in the
  second value are unspecified.</p><p>This method can be overridden.</p></dd></dl></div><div class="informalexample"><p>This example shows how to define a kind of method which, from
within the body of the method, has access to the actual method
metaobject for the method.  This simplified code overrides whatever
method combination is specified for the generic function, implementing a
simple method combination supporting only primary methods,
<a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/locfun_next-method-p.html" target="_top"><tt class="function">NEXT-METHOD-P</tt></a>.  (In addition, its a simplified
version of <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> which does no error checking.)</p><p>Notice that the extra lexical function bindings get wrapped around
the body before <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is called.  In this way, the user's
definition of <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/locfun_next-method-p.html" target="_top"><tt class="function">NEXT-METHOD-P</tt></a> are sure to
override the system's definitions.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass my-generic-function (standard-generic-function)
     ()
  (:default-initargs :method-class (find-class 'my-method)))

(defclass my-method (standard-method) ())

(defmethod make-method-lambda ((gf my-generic-function)
                               (method my-method)
                               lambda-expression
                               environment)
  (declare (ignore environment))
  `(lambda (args next-methods this-method)
     (,(call-next-method gf method
         `(lambda ,(cadr lambda-expression)
            (flet ((this-method () this-method)
                   (call-next-method (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> cnm-args)
                     (funcall (method-function (car next-methods))
                              (or cnm-args args)
                              (cdr next-methods)
                              (car next-methods)))
                   (next-method-p ()
                     (not (null next-methods))))
              ,@(cddr lambda-expression)))
          environment)
       args next-methods)))

(defmethod compute-effective-method ((gf my-generic-function)
                                     method-combination
                                     methods)
  `(call-method ,(car methods) ,(cdr methods) ,(car methods)))
</pre></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p><a id="no-make-method-lambda"></a><b>The generic function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> is not implemented. </b>Its specification is misdesigned: it mixes <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> and
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#execution_time" target="_top">execution time</a> behaviour.</p><p><a id="method-functions-args"></a><b>Method function arguments. </b><a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> and method functions always expect exactly two
   arguments: the list of arguments passed to the generic function, and
   the list of next methods.</p></div></div>
<!--make-method-lambda--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-discriminating-function"></a>29.1.5.4.11. Generic Function <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a>
    <em class="replaceable"><tt>generic-function</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is a
   function.</dd><dt>Purpose</dt><dd><p>This generic function is called to determine the
   discriminating function for a generic function.  When a generic
   function is called, the <strong class="first"><em class="firstterm">installed</em></strong>
   discriminating function is called with the full set of arguments
   received by the generic function, and must implement the behavior of
   calling the generic function: determining the ordered set of
   applicable methods, determining the effective method, and running the
   effective method.</p><p>To determine the ordered set of applicable methods, the
   discriminating function first calls <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a>.
   If <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> returns a second value of false,
   the discriminating function then calls <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS</tt></a>.
  </p><p>When <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> returns a second
   value of true, the discriminating function is permitted to memoize
   the first returned value as follows.  The discriminating function may
   reuse the list of applicable methods without calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><tt class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</tt></a> again provided that:
   </p><div class="orderedlist"><ol type="i"><li>the generic function is being called again with
      required arguments which are instances of the same classes,
    </li><li>the generic function has not been reinitialized,
    </li><li>no method has been added to or removed from the
      generic function,</li><li>for all the specializers of all the generic
      function's methods which are classes, their class precedence lists
      have not changed, and</li><li>for any such memoized value, the class precedence
      list of the class of each of the required arguments has not changed.
   </li></ol></div><p>
   Determination of the effective method is done by calling
   <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a>.  When the effective method is run, each
   method's function is called, and receives as arguments:
   </p><div class="orderedlist"><ol type="i"><li>a list of the arguments to the generic function,
    </li><li>whatever other arguments are specified in the
      <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> form indicating that the method should be called.
   </li></ol></div><p>
   (See <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> for more information about how method
   functions are called.)</p><p>The generic function <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a> is
   called, and its result installed, by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><tt class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</tt></a>
    (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method can be overridden.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>Overriding methods can make use of the function
   <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</tt></a>. It is more convenient to call
   <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</tt></a> than <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a>
   because the definition of the local macros <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">MAKE-METHOD</tt></a>
   is implementation dependent.</p></div></div>
<!--compute-discriminating-function-->
<!--end generic-function advanced customization-->
</div>
<!--mop-gf-customize-->
</div>
<!--mop-gf--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth"></a>29.1.6. Methods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-inheritance">29.1.6.1. Inheritance Structure of Method Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers">29.1.6.2. Introspection: Readers for Method Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-meth-init">29.1.6.3. Initialization of Methods</a></span></dt><dt><span class="section"><a href="#mop-meth-customize">29.1.6.4. Customization</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-inheritance"></a>29.1.6.1. Inheritance Structure of Method Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-method.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-mo-readers"></a>29.1.6.2. Introspection: Readers for Method Metaobjects</h4></div></div></div><p>The reader generic functions which simply return information
associated with method metaobjects are presented together here in the
format described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for Class Metaobjects">Section 29.1.3.3, “Introspection: Readers for Class Metaobjects”</a>.</p><p>Each of these reader generic functions have the same syntax,
accepting one required argument called <em class="replaceable"><tt>method</tt></em>, which must be a
method metaobject; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.  An error is also signaled
if the method metaobject has not been initialized.</p><p>These generic functions can be called by the user or the
 implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin method basic introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-specializers"></a>Generic Function <a href="#method-specializers" title="Generic Function CLOS:METHOD-SPECIALIZERS"><tt class="function">CLOS:METHOD-SPECIALIZERS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#method-specializers" title="Generic Function CLOS:METHOD-SPECIALIZERS"><tt class="function">CLOS:METHOD-SPECIALIZERS</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>Returns a list of the specializers of <em class="replaceable"><tt>method</tt></em>.  This value is a
list of specializer metaobjects.  This is the value of the
<tt class="constant">:SPECIALIZERS</tt> initialization argument that was associated with the
method during initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-qualifiers"></a>Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><tt class="function">METHOD-QUALIFIERS</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><tt class="function">METHOD-QUALIFIERS</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>Returns a (possibly empty) list of the qualifiers of <em class="replaceable"><tt>method</tt></em>.
This value is a list of non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> atoms.  This is the defaulted value of
the <tt class="constant">:QUALIFIERS</tt> initialization argument that was associated with the
method during initialization.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-lambda-list"></a>Generic Function <a href="#method-lambda-list" title="Generic Function CLOS:METHOD-LAMBDA-LIST"><tt class="function">CLOS:METHOD-LAMBDA-LIST</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#method-lambda-list" title="Generic Function CLOS:METHOD-LAMBDA-LIST"><tt class="function">CLOS:METHOD-LAMBDA-LIST</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>Returns the (unspecialized) <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of <em class="replaceable"><tt>method</tt></em>.  This value
is a <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.  This is the value of the <tt class="constant">:LAMBDA-LIST</tt>
initialization argument that was associated with the method during
initialization.</p></div>
<!--end method basic introspection-->
<!--begin method advanced introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-gf"></a>Generic Function <a href="#method-gf" title="Generic Function CLOS:METHOD-GENERIC-FUNCTION"><tt class="function">CLOS:METHOD-GENERIC-FUNCTION</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#method-gf" title="Generic Function CLOS:METHOD-GENERIC-FUNCTION"><tt class="function">CLOS:METHOD-GENERIC-FUNCTION</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>Returns the generic function that <em class="replaceable"><tt>method</tt></em> is currently
connected to, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if it is not currently connected to any generic
function.  This value is either a generic function metaobject or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
When a method is first created it is not connected to any generic
function.  This connection is maintained by the generic functions
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-function"></a>Generic Function <a href="#method-function" title="Generic Function CLOS:METHOD-FUNCTION"><tt class="function">CLOS:METHOD-FUNCTION</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#method-function" title="Generic Function CLOS:METHOD-FUNCTION"><tt class="function">CLOS:METHOD-FUNCTION</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>Returns the method function of <em class="replaceable"><tt>method</tt></em>.  This is the
value of the <tt class="constant">:FUNCTION</tt> initialization argument that was associated
with the method during initialization.</p></div>
<!--end method advanced introspection-->
<div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-mo-readers-methods"></a>Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the method metaobject readers.</b></p><dl><dt><tt class="method">(<a href="#method-specializers" title="Generic Function CLOS:METHOD-SPECIALIZERS"><tt class="function">CLOS:METHOD-SPECIALIZERS</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt><br /><tt class="method">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><tt class="function">METHOD-QUALIFIERS</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt><br /><tt class="method">(<a href="#method-lambda-list" title="Generic Function CLOS:METHOD-LAMBDA-LIST"><tt class="function">CLOS:METHOD-LAMBDA-LIST</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt><br /><tt class="method">(<a href="#method-function" title="Generic Function CLOS:METHOD-FUNCTION"><tt class="function">CLOS:METHOD-FUNCTION</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><tt class="method">(<a href="#method-gf" title="Generic Function CLOS:METHOD-GENERIC-FUNCTION"><tt class="function">CLOS:METHOD-GENERIC-FUNCTION</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>The value returned by this method is maintained by
  <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)</tt> and
  <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a>)</tt>.</p></dd></dl></div></div></div>
<!--mop-meth-mo-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-init"></a>29.1.6.3. Initialization of Methods</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-init-defmethod">29.1.6.3.1. Macro <tt class="function">DEFMETHOD</tt></a></span></dt><dt><span class="section"><a href="#mop-meth-init-mo">29.1.6.3.2. Initialization of Method Metaobjects</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-defmethod"></a>29.1.6.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a></h5></div></div></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form requires first
that the body of the method be converted to a method function.
This process is described
<a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">below</a>.
The result of this process is a method function and a set of additional
initialization arguments to be used when creating the new method.
Given these two values, the evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>
form proceeds in three steps.</p><p>The first step ensures the existence of a generic function with
the specified name.  This is done by calling the function <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>.
The first argument in this call is the generic function name specified
in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.</p><p>The second step is the creation of the new method metaobject by
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.  The class of the new method metaobject is
determined by calling <a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a> on the result of the call to
<a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a> from the first step.</p><p>The initialization arguments received by the call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
are as follows:</p><div class="itemizedlist"><ul type="disc"><li>The value of the <tt class="constant">:QUALIFIERS</tt> initialization
argument is a list of the qualifiers which appeared in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>
form.  No special processing is done on these values.  The order of the
elements of this list is the same as in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.
</li><li>The value of the <tt class="constant">:LAMBDA-LIST</tt> initialization
argument is the unspecialized <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.
</li><li>The value of the <tt class="constant">:SPECIALIZERS</tt> initialization
argument is a list of the specializers for the method.  For specializers
which are classes, the specializer is the class metaobject itself.  In
the case of <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers, it will be an <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a>
metaobject obtained by calling <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a> on the result of
evaluating the <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer form in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> of the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.</li><li>The value of the <tt class="constant">:FUNCTION</tt> initialization
argument is the method function.</li><li><p>The value of the <tt class="constant">:DECLARATIONS</tt> initialization
argument is a list of the <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s from the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.  If there are no declarations in the macro form, this
initialization argument either does not appear, or appears with a value
of the empty list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>No <tt class="constant">:DECLARATIONS</tt> initialization argument is
  provided, because method initialization does not support a <tt class="constant">:DECLARATIONS</tt>
  argument, and because the method function is already completely provided
  through the <tt class="constant">:FUNCTION</tt> initialization argument.</p></div></li><li>The value of the <tt class="constant">:DOCUMENTATION</tt> initialization
argument is the documentation string from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.  If
there is no documentation string in the macro form this initialization
argument either does not appear, or appears with a value of false.
</li><li>Any other initialization argument produced in
conjunction with the method function are also included.</li><li>The implementation is free to include additional
initialization arguments provided these are not symbols accessible in
the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package, or exported by any package defined in the
[<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li></ul></div><p>In the third step, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> is called to add the newly created
method to the set of methods associated with the generic function
metaobject.</p><p>The result of the call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> is returned as the result
of evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form.</p><p>An example showing a typical <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form and a sample
expansion is shown in the following example:
</p><div class="informalexample"><a id="defmethod-ex-1"></a><p>An example <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> form and one possible correct
  expansion. In the expansion, <em class="replaceable"><tt>method-lambda</tt></em>
  is the result of calling <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> as described in
  <a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">Section 29.1.6.3.1.1, “Processing Method Bodies”</a>.
  The initargs appearing after <tt class="constant">:FUNCTION</tt> are assumed to be additional
  initargs returned from the call to <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a>.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defmethod move :before ((p position) (l (eql 0))
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (visiblyp t)
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> color)
  (set-to-origin p)
  (when visiblyp (show-move p 0 color)))

(let ((#:g001 (ensure-generic-function 'move)))
  (add-method #:g001
    (make-instance (generic-function-method-class #:g001)
                   :qualifiers '(:before)
                   :specializers (list (find-class 'position)
                                       (intern-eql-specializer 0))
                   :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (visiblyp t)
                                      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> color)
                   :function (function <em class="replaceable"><tt>method-lambda</tt></em>)
                   'additional-initarg-1 't
                   'additional-initarg-2 '39)))
</pre></td></tr></table></div><p>The processing of the method body for this method is shown
 <a href="#defmethod-ex-2">below</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-defmethod-body"></a>29.1.6.3.1.1. Processing Method Bodies</h6></div></div></div><p>Before a method can be created, the list of forms comprising the
method body must be converted to a method function.  This conversion is
a two step process.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The body of methods can also appear in the
<tt class="constant">:METHOD</tt> option of <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><tt class="function">DEFGENERIC</tt></a> forms.  Initial methods are
not considered by any of the protocols specified in this document.
</p></div><div class="informalexample"><a id="defmethod-ex-2"></a><p>During macro-expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> macro shown in
  the <a href="#defmethod-ex-1">previous example</a> code
  similar to this would be run to produce the method lambda and
  additional initargs.  In this example, <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em> is the macroexpansion
  environment of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> macro form.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((gf (ensure-generic-function 'move)))
  (make-method-lambda
    gf
    (class-prototype (generic-function-method-class gf))
    '(lambda (p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (visiblyp t) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> color)
       (set-to-origin p)
       (when visiblyp (show-move p 0 color)))
    <em class="replaceable"><tt><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></tt></em>))
</pre></td></tr></table></div><p>The first step occurs during macro-expansion of the macro form.
In this step, the method <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>, declarations and body are
converted to a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> called a <strong class="first"><em class="firstterm">method
lambda</em></strong>.  This conversion is based on information associated
with the generic function definition in effect at the time the macro
form is expanded.</p><p>The generic function definition is obtained by calling <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><tt class="function">ENSURE-GENERIC-FUNCTION</tt></a>
with a first argument of the generic function name specified in the
macro form.  The <tt class="constant">:LAMBDA-LIST</tt> keyword argument is not passed in this
call.</p><p>Given the generic function, production of the method lambda
proceeds by calling <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a>.  The first argument in this
call is the generic function obtained as described above.  The second
argument is the result of calling <a href="#class-prototype" title="Generic Function CLOS:CLASS-PROTOTYPE"><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> on the result of
calling <a href="#gf-method-class" title="Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><tt class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</tt></a> on the generic function.  The
third argument is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> formed from the method <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>,
declarations and body.  The fourth argument is the macro-expansion
environment of the macro form; this is the value of the
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> argument to the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> macro.</p><p>The generic function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> returns two values.  The
first is the method lambda itself.  The second is a list of
initialization arguments and values.  These are included in the
initialization arguments when the method is created.</p><p>In the second step, the method lambda is converted to a function
which properly captures the lexical scope of the macro form.  This is
done by having the method lambda appear in the macro-expansion as the
argument of the <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> special form.  During the subsequent
evaluation of the macro-expansion, the result of the <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> special
form is the method function.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>See <a href="#no-make-method-lambda" title="The generic function CLOS:MAKE-METHOD-LAMBDA is not implemented">The generic function <tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt> is not implemented</a>.
</p></div></div>
<!--mop-meth-init-defmethod-body--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-defmethod-mo"></a>29.1.6.3.1.2. Initialization of Generic Function and Method Metaobjects</h6></div></div></div><p>An example of creating a generic function and a method metaobject,
and then adding the method to the generic function is shown below.  This
example is comparable to the method definition shown
 <a href="#defmethod-ex-1">above</a>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let* ((gf (make-instance 'standard-generic-function
                          :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> visiblyp <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)))
       (method-class (generic-function-method-class gf)))
  (multiple-value-bind (lambda initargs)
       (make-method-lambda
         gf
         (class-prototype method-class)
         '(lambda (p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (visiblyp t) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> color)
            (set-to-origin p)
            (when visiblyp (show-move p 0 color)))
         nil)
    (add-method gf
                (apply #'make-instance method-class
                       :function (compile nil lambda)
                       :specializers (list (find-class 'position)
                                           (intern-eql-specializer 0))
                       :qualifiers ()
                       :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (visiblyp t)
                                          <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> color)
                       initargs))))
</pre></td></tr></table></div>
<!--mop-meth-init-defmethod-mo--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-efficiency"></a>29.1.6.3.1.3. Efficiency</h6></div><div><h7 class="subtitle">Implementation dependent:: only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> and some other
  implementations.</h7></div></div></div><p>Methods created through <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a> have a faster calling
  convention than methods created through a portable <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>
  invocation.</p></div>
<!--mop-meth-efficiency-->
</div>
<!--mop-meth-init-defmethod--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-mo"></a>29.1.6.3.2. Initialization of Method Metaobjects</h5></div></div></div><p>A method metaobject can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a>.
The initialization arguments establish the definition of the method.
A method metaobject cannot be redefined;
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>Initialization of a method metaobject must be done by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>.  Portable
programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a> directly to initialize a
method metaoject. Portable programs must not call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>
directly to initialize a method metaobject.  Portable programs must not
call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> to change the class of any method metaobject or to
turn a non-method object into a method metaobject.</p><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> on method metaobjects.
 Since the class of a method metaobject cannot be changed,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a> on method metaobjects.</p><p>During initialization, each initialization argument is checked
for errors and then associated with the method metaobject.  The value
can then be accessed by calling the appropriate accessor as shown in
<a href="#mop-meth-initargs" title="Table&#xA0;29.5.&#xA0;Initialization arguments and&#10;  accessors for method metaobjects">Table 29.5, “Initialization arguments and
  accessors for method metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.  The section ends with a set of restrictions
on portable methods affecting method metaobject initialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><tt>value</tt></em></span>” means that when that initialization argument is not
supplied, initialization is performed as if <em class="replaceable"><tt>value</tt></em> had been supplied.
For some initialization arguments this could be done by the use of
default initialization arguments, but whether it is done this way is not
specified.  Implementations are free to define default initialization
arguments for specified method metaobject classes.  Portable programs
are free to define default initialization arguments for portable
subclasses of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.</p><div class="itemizedlist"><ul type="disc"><li>The <tt class="constant">:QUALIFIERS</tt> argument is a list of method
   qualifiers.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if
   any element of the list is not a non-null atom. This argument
   defaults to the empty list.</li><li>The <tt class="constant">:LAMBDA-LIST</tt> argument is the unspecialized
   <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the method.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a
   proper <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>. If this value is not supplied, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
 </li><li>The <tt class="constant">:SPECIALIZERS</tt> argument is a list of the
   specializer metaobjects for the method.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value
   is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if the length of the list differs from the
   number of required arguments in the <tt class="constant">:LAMBDA-LIST</tt> argument, or if
   any element of the list is not a specializer metaobject.  If this
   value is not supplied, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</li><li> The <tt class="constant">:FUNCTION</tt> argument is a method function.  It
   must be compatible with the methods on <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a>
   defined for this class of method and generic function with which it
   will be used.  That is, it must accept the same number of arguments
   as all uses of <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> that will call it supply.  (See
   <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><tt class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</tt></a> and <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><tt class="function">CLOS:MAKE-METHOD-LAMBDA</tt></a> for more information.)
   An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this argument is not supplied.</li><li> When the method being initialized is an instance of
   a subclass of <a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of Method Metaobjects"><tt class="classname">CLOS:STANDARD-ACCESSOR-METHOD</tt></a>, the <tt class="constant">:SLOT-DEFINITION</tt>
   initialization argument must be provided.  Its value is the direct
   slot definition metaobject which defines this accessor method.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if the value is not an instance of a subclass of <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:DIRECT-SLOT-DEFINITION</tt></a>.
 </li><li>The <tt class="constant">:DOCUMENTATION</tt> argument is a string or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led if this value is not a string or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.  This argument
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the method metaobject.  These values can then be accessed by
calling the corresponding generic function.  The correspondences are as
follows:

</p><div class="table"><a id="mop-meth-initargs"></a><p class="title"><b>Table 29.5. Initialization arguments and
  accessors for method metaobjects</b></p><table summary="Initialization arguments and&#10;  accessors for method metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:QUALIFIERS</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><tt class="function">METHOD-QUALIFIERS</tt></a></td></tr><tr><td align="center"><tt class="constant">:LAMBDA-LIST</tt></td><td align="center"><a href="#method-lambda-list" title="Generic Function CLOS:METHOD-LAMBDA-LIST"><tt class="function">CLOS:METHOD-LAMBDA-LIST</tt></a></td></tr><tr><td align="center"><tt class="constant">:SPECIALIZERS</tt></td><td align="center"><a href="#method-specializers" title="Generic Function CLOS:METHOD-SPECIALIZERS"><tt class="function">CLOS:METHOD-SPECIALIZERS</tt></a></td></tr><tr><td align="center"><tt class="constant">:FUNCTION</tt></td><td align="center"><a href="#method-function" title="Generic Function CLOS:METHOD-FUNCTION"><tt class="function">CLOS:METHOD-FUNCTION</tt></a></td></tr><tr><td align="center"><tt class="constant">:SLOT-DEFINITION</tt></td><td align="center"><a href="#accessor-method-slotdef" title="Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><tt class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</tt></a></td></tr><tr><td align="center"><tt class="constant">:DOCUMENTATION</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></td></tr></tbody></table></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-mo-method"></a>Methods</h6></div></div></div><p>It is not specified which methods provide the initialization
behavior described above.  Instead, the information needed to allow
portable programs to specialize this behavior is presented in as a set
of restrictions on the methods a portable program can define.  The model
is that portable initialization methods have access to the method
metaobject when either all or none of the specified initialization has
taken effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>.  Other portable
methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><tt class="function">SHARED-INITIALIZE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><tt class="function">INITIALIZE-INSTANCE</tt></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div></div>
<!--mop-meth-init-mo-->
</div>
<!--mop-meth-init--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-customize"></a>29.1.6.4. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#extract-lambda-list">29.1.6.4.1. Function <tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a></span></dt><dt><span class="section"><a href="#extract-specializer-names">29.1.6.4.2. Function <tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a></span></dt></dl></div>
<!--begin method advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="extract-lambda-list"></a>29.1.6.4.1. Function <a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a> <em class="replaceable"><tt>specialized-lambda-list</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specialized-lambda-list</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> as accepted by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>.
</dd></dl></div></dd><dt>Values</dt><dd>The result is an unspecialized <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.
</dd><dt>Purpose</dt><dd><p>This function takes a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> and
   returns the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> with the specializers removed.  This is a
   non-destructive operation.  Whether the result shares any structure
   with the argument is unspecified.</p><p>If the <em class="replaceable"><tt>specialized-lambda-list</tt></em> argument does not have legal syntax,
   an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.  This syntax checking does not check the syntax of the
   actual specializer names, only the syntax of the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> and
   where the specializers appear.
</p></dd></dl></div><p><b>Examples. </b></p><div class="informalexample"><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a> '((p position)))
 <tt class="data">(P)</tt>

(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a> '((p position) x y))
 <tt class="data">(P X Y)</tt>

(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><tt class="function">CLOS:EXTRACT-LAMBDA-LIST</tt></a> '(a (b (eql x)) c <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> i))
 <tt class="data">(A B C <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> I)</tt>
</pre></td></tr></table></div></div>
<!--extract-lambda-list--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="extract-specializer-names"></a>29.1.6.4.2. Function <a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a>
    <em class="replaceable"><tt>specialized-lambda-list</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specialized-lambda-list</tt></em></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> as accepted by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><tt class="function">DEFMETHOD</tt></a>.
</dd></dl></div></dd><dt>Values</dt><dd>The result is a list of specializer names.
</dd><dt>Purpose</dt><dd><p>This function takes a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> and
   returns its specializer names.  This is a non-destructive operation.
   Whether the result shares structure with the argument is unspecified.
  </p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p><p>The result of this function will be a list with a
   number of elements equal to the number of required arguments in
   <em class="replaceable"><tt>specialized-lambda-list</tt></em>.  Specializers are defaulted to the symbol <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>.
  </p><p>If the <em class="replaceable"><tt>specialized-lambda-list</tt></em> argument does not have legal
   syntax, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.  This syntax checking does not check the syntax
   of the actual specializer names, only the syntax of the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>
   and where the specializers appear.
</p></dd></dl></div><p><b>Examples. </b></p><div class="informalexample"><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a> '((p position)))
 <tt class="data">(POSITION)</tt>

(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a> '((p position) x y))
 <tt class="data">(POSITION T T)</tt>

(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><tt class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</tt></a> '(a (b (eql x)) c <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> i))
 <tt class="data">(T (EQL X) T)</tt>
</pre></td></tr></table></div></div>
<!--extract-specializer-names-->
<!--end method advanced customization-->
</div>
<!--mop-meth-customize-->
</div>
<!--mop-meth--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-accessors"></a>29.1.7. Accessor Methods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-acc-readers">29.1.7.1. Introspection</a></span></dt><dt><span class="section"><a href="#mop-acc-customize">29.1.7.2. Customization</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-acc-readers"></a>29.1.7.1. Introspection</h4></div></div></div>
<!--begin accessor-method basic introspection--><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="accessor-method-slotdef"></a>Generic Function <a href="#accessor-method-slotdef" title="Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><tt class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</tt></a></h5></div><div><h2 class="subtitle"><tt class="code">(<a href="#accessor-method-slotdef" title="Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><tt class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</tt></a> <em class="replaceable"><tt>method</tt></em>)</tt></h2></div></div></div><p>This accessor can only be called on accessor methods.  It returns
the direct slot definition metaobject that defined this method.  This is
the value of the <tt class="constant">:SLOT-DEFINITION</tt> initialization argument associated with the
method during initialization.</p><div class="variablelist"><p class="title"><b>The specified methods for the accessor method
  metaobject readers.</b></p><dl><dt><tt class="method">(<a href="#accessor-method-slotdef" title="Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><tt class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</tt></a>
   (<em class="replaceable"><tt>method</tt></em> <a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of Method Metaobjects"><tt class="classname">CLOS:STANDARD-ACCESSOR-METHOD</tt></a>))</tt></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--end accessor-method basic introspection-->
</div>
<!--mop-acc-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-acc-customize"></a>29.1.7.2. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#reader-method-class">29.1.7.2.1. Generic Function <tt class="function">CLOS:READER-METHOD-CLASS</tt></a></span></dt><dt><span class="section"><a href="#writer-method-class">29.1.7.2.2. Generic Function <tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a></span></dt></dl></div>
<!--begin accessor-method advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="reader-method-class"></a>29.1.7.2.1. Generic Function <a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><tt class="function">CLOS:READER-METHOD-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><tt class="function">CLOS:READER-METHOD-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>direct-slot-definition</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>direct-slot-definition</tt></em></dt><dd>a direct slot definition metaobject.
   </dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>alternating initialization argument names and values.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a class metaobject.
</dd><dt>Purpose</dt><dd><p>This generic function is called to determine the
   class of reader methods created during class initialization and
   reinitialization.  The result must be a subclass of
   <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-READER-METHOD</tt></a>.</p><p>The <em class="replaceable"><tt>initargs</tt></em> argument must be the same as will be passed
   to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> to create the reader method.  The <em class="replaceable"><tt>initargs</tt></em>
   must include <tt class="constant">:SLOT-DEFINITION</tt> with <em class="replaceable"><tt>slot-definition</tt></em> as its value.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><tt class="function">CLOS:READER-METHOD-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) (<em class="replaceable"><tt>direct-slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt><br /><tt class="method">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><tt class="function">CLOS:READER-METHOD-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) (<em class="replaceable"><tt>direct-slot-definition</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd><p>These methods return the class
   <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-READER-METHOD</tt></a>.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--reader-method-class--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="writer-method-class"></a>29.1.7.2.2. Generic Function <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em>
    <em class="replaceable"><tt>direct-slot</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)
 </tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject.</dd><dt><em class="replaceable"><tt>direct-slot</tt></em></dt><dd>a direct slot definition metaobject.
   </dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>a list of initialization arguments and values.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned is a class metaobject.
</dd><dt>Purpose</dt><dd><p>This generic function is called to determine the
   class of writer methods created during class initialization and
   reinitialization.  The result must be a subclass of
   <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="classname">CLOS:STANDARD-WRITER-METHOD</tt></a>.</p><p>The <em class="replaceable"><tt>initargs</tt></em> argument must be the same as will be passed
   to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> to create the reader method.  The <em class="replaceable"><tt>initargs</tt></em>
   must include <tt class="constant">:SLOT-DEFINITION</tt> with <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><tt class="classname">CLOS:SLOT-DEFINITION</tt></a> as its value.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a>
    (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>)
    (<em class="replaceable"><tt>direct-slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt><br /><tt class="method">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="function">CLOS:WRITER-METHOD-CLASS</tt></a>
    (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)
    (<em class="replaceable"><tt>direct-slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</tt></a>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)</tt></dt><dd><p>These methods returns the class
  <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><tt class="classname">CLOS:STANDARD-WRITER-METHOD</tt></a>.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--writer-method-class-->
<!--end accessor-method advanced customization-->
</div>
<!--mop-acc-customize-->
</div>
<!--mop-accessors--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-specializers"></a>29.1.8. Specializers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-specializers-inheritance">29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-spec-readers">29.1.8.2. Introspection</a></span></dt><dt><span class="section"><a href="#mop-spec-init">29.1.8.3. Initialization</a></span></dt><dt><span class="section"><a href="#mop-spec-dep">29.1.8.4. Updating Dependencies</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-specializers-inheritance"></a>29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-specializer.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-readers"></a>29.1.8.2. Introspection</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#eql-specializer-object">29.1.8.2.1. Function <tt class="function">CLOS:EQL-SPECIALIZER-OBJECT</tt></a></span></dt></dl></div>
<!--begin specializer basic introspection--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="eql-specializer-object"></a>29.1.8.2.1. Function <a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><tt class="function">CLOS:EQL-SPECIALIZER-OBJECT</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><tt class="function">CLOS:EQL-SPECIALIZER-OBJECT</tt></a>
    <em class="replaceable"><tt>eql-specializer</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>eql-specializer</tt></em></dt><dd>an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer metaobject.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this function is an object.
</dd><dt>Purpose</dt><dd><p>This function returns the object associated with
   <em class="replaceable"><tt>eql-specializer</tt></em> during initialization.
   The value is guaranteed to be <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> to the value originally passed
   to <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a>, but it is not necessarily <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to that
   value.</p><p>This function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if
   <em class="replaceable"><tt>eql-specializer</tt></em> is not an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a>
   specializer.</p></dd></dl></div></div>
<!--eql-specializer-object-->
<!--end specializer basic introspection-->
</div>
<!--mop-spec-readers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-init"></a>29.1.8.3. Initialization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#intern-eql-specializer">29.1.8.3.1. Function <tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="intern-eql-specializer"></a>29.1.8.3.1. Function <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a>
    <em class="replaceable"><tt>object</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>object</tt></em></dt><dd>any Lisp object.</dd></dl></div></dd><dt>Values</dt><dd>The result is the <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer metaobject for
   <em class="replaceable"><tt>object</tt></em>.</dd><dt>Purpose</dt><dd>This function returns the unique <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializer
   metaobject for <em class="replaceable"><tt>object</tt></em>, creating one if necessary.  Two calls to
   <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> arguments will return the same
   (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>) value.</dd></dl></div><p><b>Remarks. </b>The result of calling <a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><tt class="function">CLOS:EQL-SPECIALIZER-OBJECT</tt></a> on the result of a
call to <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><tt class="function">CLOS:INTERN-EQL-SPECIALIZER</tt></a> is only guaranteed to be <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> to the
original <em class="replaceable"><tt>object</tt></em> argument, not necessarily <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>.</p></div>
<!--intern-eql-specializer-->
</div>
<!--mop-spec-init--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-dep"></a>29.1.8.4. Updating Dependencies</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#specializer-direct-methods">29.1.8.4.1. Generic Function <tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a></span></dt><dt><span class="section"><a href="#specializer-direct-gfs">29.1.8.4.2. Generic Function <tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a></span></dt><dt><span class="section"><a href="#add-direct-method">29.1.8.4.3. Generic Function <tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a></span></dt><dt><span class="section"><a href="#remove-direct-method">29.1.8.4.4. Generic Function <tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="specializer-direct-methods"></a>29.1.8.4.1. Generic Function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
    <em class="replaceable"><tt>specializer</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specializer</tt></em></dt><dd>a specializer metaobject.
   </dd></dl></div></dd><dt>Values</dt><dd>The result of this generic function is a possibly
   empty list of method metaobjects.
</dd><dt>Purpose</dt><dd>This generic function returns the possibly empty set
   of those methods, connected to generic functions, which have
   <em class="replaceable"><tt>specializer</tt></em> as a specializer.  The elements of this set are
   method metaobjects.  This value is maintained by the generic
   functions <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a> and <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method"><a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a>))</tt></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--specializer-direct-methods--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="specializer-direct-gfs"></a>29.1.8.4.2. Generic Function <a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a>
    <em class="replaceable"><tt>specializer</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specializer</tt></em></dt><dd>a specializer metaobject.
   </dd></dl></div></dd><dt>Values</dt><dd>The result of this generic function is a possibly
   empty list of generic function metaobjects.
</dd><dt>Purpose</dt><dd>This generic function returns the possibly empty set
   of those generic functions which have a method with <em class="replaceable"><tt>specializer</tt></em>
   as a specializer.  The elements of this set are generic function
   metaobjects.  This value is maintained by the generic functions
   <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a> and <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>))</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a>))</tt></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--specializer-direct-gfs--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-direct-method"></a>29.1.8.4.3. Generic Function <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
     <em class="replaceable"><tt>specializer</tt></em> <em class="replaceable"><tt>method</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specializer</tt></em></dt><dd>a specializer metaobject.
   </dd><dt><em class="replaceable"><tt>method</tt></em></dt><dd>a method metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to maintain a set of
   backpointers from a specializer to the set of methods specialized to
   it.  If <em class="replaceable"><tt>method</tt></em> is already in the set, it is not added again (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led).</p><p>This set can be accessed as a list by calling the generic
   function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>.  Methods are removed from the
   set by <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>.</p><p>The generic function <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a> is called by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> whenever a method is added to a generic function.  It is
   called once for each of the specializers of the method.  Note that in
   cases where a specializer appears more than once in the specializers
   of a method, this generic function will be called more than once with
   the same specializer as argument.</p><p>The results are undefined if the <em class="replaceable"><tt>specializer</tt></em> argument
   is not one of the specializers of the <em class="replaceable"><tt>method</tt></em> argument.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd><p>This method implements the behavior of the generic
   function for class specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method">
       <a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li><li><tt class="method"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div><p>
</p></dd><dt><tt class="method">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd><p>This method implements the behavior of the generic
   function for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p></dd></dl></div></div>
<!--add-direct-method--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-direct-method"></a>29.1.8.4.4. Generic Function <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a> <em class="replaceable"><tt>specializer</tt></em>
    <em class="replaceable"><tt>method</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>specializer</tt></em></dt><dd>a specializer metaobject.
   </dd><dt><em class="replaceable"><tt>method</tt></em></dt><dd>a method metaobject.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to maintain a set of
   backpointers from a specializer to the set of methods specialized to
   it.  If <em class="replaceable"><tt>method</tt></em> is in the set it is removed.  If it is not, no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>This set can be accessed as a list by calling the generic
   function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>.  Methods are added to the set
   by <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>.</p><p>The generic function <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a> is called by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a> whenever a method is removed from a generic function.
   It is called once for each of the specializers of the method.  Note
   that in cases where a specializer appears more than once in the
   specializers of a method, this generic function will be called more
   than once with the same specializer as argument.</p><p>The results are undefined if the <em class="replaceable"><tt>specializer</tt></em> argument is
   not one of the specializers of the <em class="replaceable"><tt>method</tt></em> argument.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>) (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd><p>This method implements the behavior of the generic
   function for class specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><tt class="function">CLOS:ADD-DIRECT-METHOD</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>)</tt></li><li><tt class="method"><a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><tt class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li><li><tt class="method"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><tt class="function">CLOS:SPECIALIZER-DIRECT-METHODS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><tt class="function">CLOS:REMOVE-DIRECT-METHOD</tt></a>
   (<em class="replaceable"><tt>specializer</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:EQL-SPECIALIZER</tt></a>)
   (<em class="replaceable"><tt>method</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><tt class="classname">METHOD</tt></a>))</tt></dt><dd><p>This method implements the behavior of the generic
   function for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><tt class="classname">EQL</tt></a> specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p></dd></dl></div></div>
<!--remove-direct-method-->
</div>
<!--mop-spec-dep-->
</div>
<!--mop-specializers--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-comb"></a>29.1.9. Method Combinations</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-comb-inheritance">29.1.9.1. Inheritance Structure of Method Combination Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-comb-customize">29.1.9.2. Customization</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-comb-inheritance"></a>29.1.9.1. Inheritance Structure of Method Combination Metaobject Classes</h4></div></div></div><div align="center"><img src="mop-classes-methcomb.png" align="middle" width="270" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-comb-customize"></a>29.1.9.2. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#find-method-combination">29.1.9.2.1. Generic Function <tt class="function">CLOS:FIND-METHOD-COMBINATION</tt></a></span></dt></dl></div>
<!--begin method-combination advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="find-method-combination"></a>29.1.9.2.1. Generic Function <a href="#find-method-combination" title="29.1.9.2.1.&#xA0;Generic Function CLOS:FIND-METHOD-COMBINATION"><tt class="function">CLOS:FIND-METHOD-COMBINATION</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#find-method-combination" title="29.1.9.2.1.&#xA0;Generic Function CLOS:FIND-METHOD-COMBINATION"><tt class="function">CLOS:FIND-METHOD-COMBINATION</tt></a> <em class="replaceable"><tt>generic-function</tt></em>
    <em class="replaceable"><tt>method-combination-type-name</tt></em>
    <em class="replaceable"><tt>method-combination-options</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>generic-function</tt></em></dt><dd>a generic function metaobject.
   </dd><dt><em class="replaceable"><tt>method-combination-type-name</tt></em></dt><dd>a symbol which names a type of method combination.
   </dd><dt><em class="replaceable"><tt>method-combination-options</tt></em></dt><dd>a list of arguments to the method combination type.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is a
   method combination metaobject.</dd><dt>Purpose</dt><dd>This generic function is called to determine the
   method combination object used by a generic function.
</dd></dl></div><p><b>Remarks. </b>Further details of method combination metaobjects are not specified.
</p></div>
<!--find-method-combination-->
<!--end method-combination advanced customization-->
</div>
<!--mop-meth-comb-customize-->
</div>
<!--mop-meth-comb--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-slot-access"></a>29.1.10. Slot Access</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sa-instance-stuct">29.1.10.1. Instance Structure Protocol</a></span></dt><dt><span class="section"><a href="#mop-sa-funcallable">29.1.10.2. Funcallable Instances</a></span></dt><dt><span class="section"><a href="#mop-sa-customize">29.1.10.3. Customization</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-instance-stuct"></a>29.1.10.1. Instance Structure Protocol</h4></div></div></div><p>The instance structure protocol is responsible for implementing
the behavior of the slot access functions like <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a> and
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a>)</tt>.</p><p>For each <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> slot access function other than <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-exists-p.html" target="_top"><tt class="function">SLOT-EXISTS-P</tt></a>,
there is a corresponding generic function which actually provides the
behavior of the function.  When called, the slot access function finds
the pertinent effective slot definition metaobject, calls the
corresponding generic function and returns its result.  The arguments
passed on to the generic function include one additional value, the
class of the <em class="replaceable"><tt>object</tt></em> argument, which always immediately precedes the
<em class="replaceable"><tt>object</tt></em> argument.</p><div class="table"><a id="mop-sa-instance-stuct-table"></a><p class="title"><b>Table 29.6. The correspondence between slot access function and
  underlying slot access generic function</b></p><table summary="The correspondence between slot access function and&#10;  underlying slot access generic function" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Slot Access Function</th><th align="center">Corresponding
    Slot Access Generic Function</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot-name</tt></em></td><td align="center"><a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a>)</tt> <em class="replaceable"><tt>new-value</tt></em> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot-name</tt></em></td><td align="center"><a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a> <em class="replaceable"><tt>new-value</tt></em> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><tt class="function">SLOT-BOUNDP</tt></a> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot-name</tt></em></td><td align="center"><a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><tt class="function">SLOT-MAKUNBOUND</tt></a> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot-name</tt></em></td><td align="center"><a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em></td></tr></tbody></table></div><p>At the lowest level, the instance structure protocol provides only
limited mechanisms for portable programs to control the implementation
of instances and to directly access the storage associated with
instances without going through the indirection of slot access.  This is
done to allow portable programs to perform certain commonly requested
slot access optimizations.</p><p>In particular, portable programs can control the implementation
of, and obtain direct access to, slots with allocation <tt class="constant">:INSTANCE</tt> and
type <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>.  These are called <strong class="first"><em class="firstterm">directly accessible
slots</em></strong>.</p><p>The relevant specified around-method on <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> determines
the implementation of instances by deciding how each slot in the
instance will be stored.  For each directly accessible slot, this method
allocates a <strong class="first"><em class="firstterm">location</em></strong> and associates it with the
effective slot definition metaobject.  The location can be accessed by
calling the <a href="#slotdef-location" title="Generic Function CLOS:SLOT-DEFINITION-LOCATION"><tt class="function">CLOS:SLOT-DEFINITION-LOCATION</tt></a> generic function.  Locations are
non-negative integers.  For a given class, the locations increase
consecutively, in the order that the directly accessible slots appear in
the list of effective slots.  (Note that here, the next paragraph, and
the specification of this around-method are the only places where the
value returned by <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> is described as a list rather than a
set.)</p><p>Given the location of a directly accessible slot, the value of
that slot in an instance can be accessed with the appropriate accessor.
For <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>, this accessor is the function
<a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:STANDARD-INSTANCE-ACCESS</tt></a>.  For <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>, this
accessor is the function <a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</tt></a>.
In each case, the arguments to the accessor are the instance and the
slot location, in that order.  See the definition of each accessor for
additional restrictions on the use of these function.</p><p>Portable programs are permitted to affect and rely on the
allocation of locations only in the following limited way: By first
defining a portable primary method on <a href="#compute-slots" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><tt class="function">CLOS:COMPUTE-SLOTS</tt></a> which orders the
returned value in a predictable way, and then relying on the defined
behavior of the specified around-method to assign locations to all
directly accessible slots.  Portable programs may compile-in calls to
low-level accessors which take advantage of the resulting predictable
allocation of slot locations.</p><div class="informalexample"><p>This example shows the use of this mechanism to implement a new
class metaobject class, <tt class="classname">ordered-class</tt> and class
option <tt class="constant">:SLOT-ORDER-K</tt>.  This option provides control
over the allocation of slot locations.  In this simple example
implementation, the <tt class="constant">:SLOT-ORDER-K</tt> option is not
inherited by subclasses; it controls only instances of the class
itself.
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass ordered-class (standard-class)
     ((slot-order :initform ()
                  :initarg :slot-order
                  :reader class-slot-order)))

(defmethod compute-slots ((class ordered-class))
  (let ((order (class-slot-order class)))
    (sort (copy-list (call-next-method))
          #'(lambda (a b)
              (&lt; (position (slot-definition-name a) order)
                 (position (slot-definition-name a) order))))))
</pre></td></tr></table><p>

Following is the source code the user of this extension would write.
Note that because the code above does not implement inheritance of
the <tt class="constant">:SLOT-ORDER-K</tt> option, the function
<tt class="function">distance</tt> must not be called on instances of
subclasses of <tt class="classname">point</tt>; it can only be called on
instances of <tt class="classname">point</tt> itself.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass point ()
     ((x :initform 0)
      (y :initform 0))
  (:metaclass ordered-class)
  (:slot-order x y))

(defun distance (point)
  (sqrt (/ (+ (expt (standard-instance-access point 0) 2)
              (expt (standard-instance-access point 1) 2))
           2.0)))
</pre></td></tr></table><p>

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>You cannot assume that the slot-location
  values start at 0.  In class <tt class="classname">point</tt>, for
  example, <em class="replaceable"><tt>x</tt></em> and <em class="replaceable"><tt>y</tt></em> will be at slot locations 1 and 2, not 0 and
  1.</p></div><p>

In more realistic uses of this mechanism, the calls to the low-level
instance structure accessors would not actually appear textually in the
source program, but rather would be generated by a meta-level analysis
program run during the process of compiling the source program.
</p></div></div>
<!--mop-sa-instance-stuct--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-funcallable"></a>29.1.10.2. Funcallable Instances</h4></div></div></div><p>Instances of classes which are themselves instances of
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> or one of its subclasses are called
<strong class="first"><em class="firstterm">funcallable instances</em></strong>.
Funcallable instances can only be created by
<tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
 (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)</tt>.</p><p>Like standard instances, funcallable instances have slots with the
normal behavior.  They differ from standard instances in that they can
be used as functions as well; that is, they can be passed to <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a>
and <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a>, and they can be stored as the definition of a function
name.  Associated with each funcallable instance is the function which
it runs when it is called.  This function can be changed with
<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a>.</p><div class="informalexample"><p>The following simple example shows the use of funcallable
instances to create a simple, <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a>-like facility.  (Funcallable
instances are useful when a program needs to construct and maintain a
set of functions and information about those functions.  They make it
possible to maintain both as the same object rather than two separate
objects linked, for example, by hash tables.)

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass constructor ()
     ((name :initarg :name :accessor constructor-name)
      (fields :initarg :fields :accessor constructor-fields))
  (:metaclass funcallable-standard-class))

(defmethod initialize-instance :after ((c constructor) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)
  (with-slots (name fields) c
    (set-funcallable-instance-function
      c
      #'(lambda ()
          (let ((new (make-array (1+ (length fields)))))
            (setf (aref new 0) name)
            new)))))

(setq c1 (make-instance 'constructor
                        :name 'position :fields '(x y)))
<tt class="data">#&lt;CONSTRUCTOR 262437&gt;</tt>

(setq p1 (funcall c1))
<tt class="data">#&lt;ARRAY 3 263674&gt;</tt>
</pre></td></tr></table></div></div>
<!--mop-sa-funcallable--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-customize"></a>29.1.10.3. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#standard-instance-access">29.1.10.3.1. Function <tt class="function">CLOS:STANDARD-INSTANCE-ACCESS</tt></a></span></dt><dt><span class="section"><a href="#funcallable-standard-instance-access">29.1.10.3.2. Function <tt class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</tt></a></span></dt><dt><span class="section"><a href="#set-fif">29.1.10.3.3. Function <tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#slot-value-UC">29.1.10.3.4. Generic Function <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a></span></dt><dt><span class="section"><a href="#setf-slot-value-UC">29.1.10.3.5. Generic Function <tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a></span></dt><dt><span class="section"><a href="#slot-boundp-UC">29.1.10.3.6. Generic Function <tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a></span></dt><dt><span class="section"><a href="#slot-makunbound-UC">29.1.10.3.7. Generic Function <tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a></span></dt></dl></div>
<!--begin slot access basic customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="standard-instance-access"></a>29.1.10.3.1. Function <a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:STANDARD-INSTANCE-ACCESS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:STANDARD-INSTANCE-ACCESS</tt></a> <em class="replaceable"><tt>instance</tt></em>
    <em class="replaceable"><tt>location</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>instance</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>location</tt></em></dt><dd>a slot location</dd></dl></div></dd><dt>Values</dt><dd>The result of this function is an object.
</dd><dt>Purpose</dt><dd><p>This function is called to provide direct access to
   a slot in an instance.  By usurping the normal slot lookup protocol,
   this function is intended to provide highly optimized access to the
   slots associated with an instance.</p><p>The following restrictions apply to the use of this function:
   </p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><tt>instance</tt></em> argument must be a standard
      instance (it must have been returned by
      <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>)</tt>).
    </li><li>The <em class="replaceable"><tt>instance</tt></em> argument cannot be an
      non-updated obsolete instance.</li><li>The <em class="replaceable"><tt>location</tt></em> argument must be a location of
      one of the directly accessible slots of the instance's class.
    </li><li>The slot must be bound.</li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The second and third restrictions do not
  apply in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s implementation supports non-updated
  obsolete instances and also supports slots with allocation <tt class="constant">:CLASS</tt>.
</p></div></div>
<!--standard-instance-access--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="funcallable-standard-instance-access"></a>29.1.10.3.2. Function <a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><tt class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</tt></a>
    <em class="replaceable"><tt>instance</tt></em> <em class="replaceable"><tt>location</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>instance</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>location</tt></em></dt><dd>a slot location
</dd></dl></div></dd><dt>Values</dt><dd>The result of this function is an object.
</dd><dt>Purpose</dt><dd><p>This function is called to provide direct access to
   a slot in an instance.  By usurping the normal slot lookup protocol,
   this function is intended to provide highly optimized access to the
   slots associated with an instance.</p><p>The following restrictions apply to the use of this function:
   </p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><tt>instance</tt></em> argument must be a
      funcallable instance (it must have been returned by
      <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)</tt>).</li><li>The <em class="replaceable"><tt>instance</tt></em> argument cannot be an
      non-updated obsolete instance.</li><li>The <em class="replaceable"><tt>location</tt></em> argument must be a location of
      one of the directly accessible slots of the instance's class.
    </li><li>The slot must be bound.
   </li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span>.</h3><p>The second and third restrictions do not
  apply in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s implementation supports non-updated
  obsolete instances and also supports slots with allocation <tt class="constant">:CLASS</tt>.
</p></div></div>
<!--funcallable-standard-instance-access--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="set-fif"></a>29.1.10.3.3. Function <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a>
    <em class="replaceable"><tt>funcallable-instance</tt></em> <em class="replaceable"><tt>function</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>funcallable-instance</tt></em></dt><dd>a funcallable instance (it must have been returned by
      <tt class="method"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><tt class="function">ALLOCATE-INSTANCE</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>)</tt>).
   </dd><dt><em class="replaceable"><tt>function</tt></em></dt><dd>a function.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd>This function is called to set or to change the
   function of a funcallable instance.  After
   <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><tt class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</tt></a> is called, any subsequent calls
   to <em class="replaceable"><tt>funcallable-instance</tt></em> will run the new
   function.</dd></dl></div></div>
<!--set-fif-->
<!--end slot access basic customization-->
<!--begin slot access advanced customization--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-value-UC"></a>29.1.10.3.4. Generic Function <a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em>
    <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject - the class of the
      <em class="replaceable"><tt>object</tt></em> argument</dd><dt><em class="replaceable"><tt>object</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>slot</tt></em></dt><dd>an effective slot definition metaobject
</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic function is an object.
</dd><dt>Purpose</dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a> with the class
   of <em class="replaceable"><tt>object</tt></em> as its first argument and the pertinent effective slot
   definition metaobject as its third argument.</p><p>The generic function <a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a> returns the value
   contained in the given slot of the given object.  If the slot is
   unbound, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_slot-unbound.html" target="_top"><tt class="function">SLOT-UNBOUND</tt></a> is called.</p><p>The results are undefined if
 the <em class="replaceable"><tt>class</tt></em> argument is not the class of the <em class="replaceable"><tt>object</tt></em> argument, or
 if the <em class="replaceable"><tt>slot</tt></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><tt>class</tt></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <tt class="constant">:INSTANCE</tt> and <tt class="constant">:CLASS</tt>.  If the supplied slot has an allocation
 other than <tt class="constant">:INSTANCE</tt> or <tt class="constant">:CLASS</tt> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><tt class="method">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
</dd></dl></div></div>
<!--slot-value-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-slot-value-UC"></a>29.1.10.3.5. Generic Function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a> <em class="replaceable"><tt>new-value</tt></em> <em class="replaceable"><tt>class</tt></em>
    <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>new-value</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject - the class of the
      <em class="replaceable"><tt>object</tt></em> argument.</dd><dt><em class="replaceable"><tt>object</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>slot</tt></em></dt><dd>an effective slot definition metaobject.
</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns the <em class="replaceable"><tt>new-value</tt></em> argument.
</dd><dt>Purpose</dt><dd><p>The generic function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a> implements
   the behavior of the <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a>)</tt> function. It is called by
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><tt class="function">SLOT-VALUE</tt></a>)</tt> with the class of <em class="replaceable"><tt>object</tt></em> as its second argument
   and the pertinent effective slot definition metaobject as its fourth
   argument.</p><p>The generic function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a> sets the value
   contained in the given slot of the given object to the given new
   value; any previous value is lost.</p><p>The results are undefined if
 the <em class="replaceable"><tt>class</tt></em> argument is not the class of the <em class="replaceable"><tt>object</tt></em> argument, or
 if the <em class="replaceable"><tt>slot</tt></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><tt>class</tt></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a>
   <em class="replaceable"><tt>new-value</tt></em> (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a>
   <em class="replaceable"><tt>new-value</tt></em> (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <tt class="constant">:INSTANCE</tt> and <tt class="constant">:CLASS</tt>.  If the supplied slot has an allocation
 other than <tt class="constant">:INSTANCE</tt> or <tt class="constant">:CLASS</tt> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><tt class="method">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><tt class="sexp">(SETF <tt class="function">CLOS:SLOT-VALUE-USING-CLASS</tt>)</tt></a>
   <em class="replaceable"><tt>new-value</tt></em> (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
</dd></dl></div></div>
<!--setf-slot-value-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-boundp-UC"></a>29.1.10.3.6. Generic Function <a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em>
    <em class="replaceable"><tt>slot</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject - the class of the
      <em class="replaceable"><tt>object</tt></em> argument.</dd><dt><em class="replaceable"><tt>object</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>slot</tt></em></dt><dd> an effective slot definition metaobject.
</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns true or false.
</dd><dt>Purpose</dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><tt class="function">SLOT-BOUNDP</tt></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><tt class="function">SLOT-BOUNDP</tt></a> with the class
   of <em class="replaceable"><tt>object</tt></em> as its first argument and the pertinent effective slot
   definition metaobject as its third argument.</p><p>The generic function <a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a> tests whether a
   specific slot in an instance is bound.</p><p>The results are undefined if
 the <em class="replaceable"><tt>class</tt></em> argument is not the class of the <em class="replaceable"><tt>object</tt></em> argument, or
 if the <em class="replaceable"><tt>slot</tt></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><tt>class</tt></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <tt class="constant">:INSTANCE</tt> and <tt class="constant">:CLASS</tt>.  If the supplied slot has an allocation
 other than <tt class="constant">:INSTANCE</tt> or <tt class="constant">:CLASS</tt> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><tt class="method">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><tt class="function">CLOS:SLOT-BOUNDP-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</dd></dl></div><p><b>Remarks. </b>In cases where the class metaobject class does not distinguish
unbound slots, true should be returned.</p></div>
<!--slot-boundp-UC--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-makunbound-UC"></a>29.1.10.3.7. Generic Function <a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a> <em class="replaceable"><tt>class</tt></em> <em class="replaceable"><tt>object</tt></em>
    <em class="replaceable"><tt>slot</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>class</tt></em></dt><dd>a class metaobject - the class of the
      <em class="replaceable"><tt>object</tt></em> argument.</dd><dt><em class="replaceable"><tt>object</tt></em></dt><dd>an object</dd><dt><em class="replaceable"><tt>slot</tt></em></dt><dd>an effective slot definition metaobject.
</dd></dl></div></dd><dt>Values</dt><dd>This generic function returns its <em class="replaceable"><tt>object</tt></em> argument.
</dd><dt>Purpose</dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><tt class="function">SLOT-MAKUNBOUND</tt></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><tt class="function">SLOT-MAKUNBOUND</tt></a> with
   the class of <em class="replaceable"><tt>object</tt></em> as its first argument and the pertinent
   effective slot definition metaobject as its third argument.</p><p>The generic function <a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a> restores a slot in
   an object to its unbound state.  The interpretation
   of “<span class="quote">restoring a slot to its unbound state</span>” depends on
   the class metaobject class.</p><p>The results are undefined if
 the <em class="replaceable"><tt>class</tt></em> argument is not the class of the <em class="replaceable"><tt>object</tt></em> argument, or
 if the <em class="replaceable"><tt>slot</tt></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><tt>class</tt></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt><br /><tt class="method">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em>
   (<em class="replaceable"><tt>slot</tt></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><tt class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</tt></a>))</tt></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <tt class="constant">:INSTANCE</tt> and <tt class="constant">:CLASS</tt>.  If the supplied slot has an allocation
 other than <tt class="constant">:INSTANCE</tt> or <tt class="constant">:CLASS</tt> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><tt class="method">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><tt class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>) <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>slot</tt></em>)</tt></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
</dd></dl></div></div>
<!--slot-makunbound-UC-->
<!--end slot access advanced customization-->
</div>
<!--mop-sa-customize-->
</div>
<!--mop-slot-access--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-dep-maint"></a>29.1.11. Dependent Maintenance</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-dep-maint-protocol">29.1.11.1. Protocol</a></span></dt></dl></div><p>It is convenient for portable metaobjects to be able to memoize
information about other metaobjects, portable or otherwise.  Because
class and generic function metaobjects can be reinitialized, and generic
function metaobjects can be modified by adding and removing methods, a
means must be provided to update this memoized information.</p><p>The dependent maintenance protocol supports this by providing a
way to register an object which should be notified whenever a class or
generic function is modified.  An object which has been registered this
way is called a <strong class="first"><em class="firstterm">dependent</em></strong> of the class or generic
function metaobject.  The dependents of class and generic function
metaobjects are maintained with <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> and <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>.
The dependents of a class or generic function metaobject can be accessed
with <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>.  Dependents are notified about a modification by
calling <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a>.  (See the specification of
<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a> for detailed description of the circumstances under
which it is called.)</p><p>To prevent conflicts between two portable programs, or between
portable programs and the implementation, portable code must not
register metaobjects themselves as dependents. Instead, portable
programs which need to record a metaobject as a dependent, should
encapsulate that metaobject in some other kind of object, and record
that object as the dependent.  The results are undefined if this
restriction is violated.</p><div class="informalexample"><p>This example shows a general facility for encapsulating
metaobjects before recording them as dependents.  The facility defines a
basic kind of encapsulating object: an updater.  Specializations of the
basic class can be defined with appropriate special updating behavior.
In this way, information about the updating required is associated with
each updater rather than with the metaobject being updated.</p><p>Updaters are used to encapsulate any metaobject which requires
updating when a given class or generic function is modified.  The
function <tt class="function">record-updater</tt> is called to both create an
updater and add it to the dependents of the class or generic function.
Methods on the generic function <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a>, specialized to the
specific class of updater do the appropriate update work.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass updater ()
     ((dependent :initarg :dependent :reader dependent)))

(defun record-updater (class dependee dependent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> initargs)
  (let ((updater (apply #'make-instance class :dependent dependent
                                              initargs)))
    (add-dependent dependee updater)
    updater))
</pre></td></tr></table><p>A <tt class="function">flush-cache-updater</tt> simply flushes the
cache of the dependent when it is updated.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defclass flush-cache-updater (updater) ())

(defmethod update-dependent (dependee (updater flush-cache-updater)
                             <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> args)
  (declare (ignore args))
  (flush-cache (dependent updater)))
</pre></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-dep-maint-protocol"></a>29.1.11.1. Protocol</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#update-dependent">29.1.11.1.1. Generic Function <tt class="function">CLOS:UPDATE-DEPENDENT</tt></a></span></dt><dt><span class="section"><a href="#add-dependent">29.1.11.1.2. Generic Function <tt class="function">CLOS:ADD-DEPENDENT</tt></a></span></dt><dt><span class="section"><a href="#remove-dependent">29.1.11.1.3. Generic Function <tt class="function">CLOS:REMOVE-DEPENDENT</tt></a></span></dt><dt><span class="section"><a href="#map-dependents">29.1.11.1.4. Generic Function <tt class="function">CLOS:MAP-DEPENDENTS</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="update-dependent"></a>29.1.11.1.1. Generic Function <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a> <em class="replaceable"><tt>metaobject</tt></em>
    <em class="replaceable"><tt>dependent</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <em class="replaceable"><tt>initargs</tt></em>)
</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>metaobject</tt></em></dt><dd>a class or generic function metaobject -
      the metaobject being reinitialized or otherwise modified.
   </dd><dt><em class="replaceable"><tt>dependent</tt></em></dt><dd>an object - the dependent being updated.
   </dd><dt><em class="replaceable"><tt>initargs</tt></em></dt><dd>a list of the initialization arguments for
      the metaobject redefinition.</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function is called to update a
   dependent of <em class="replaceable"><tt>metaobject</tt></em>.</p><p>When a class or a generic function is reinitialized each of
   its dependents is updated.  The <em class="replaceable"><tt>initargs</tt></em> argument to
   <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a> is the set of initialization arguments received by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><tt class="function">REINITIALIZE-INSTANCE</tt></a>.</p><p>When a method is added to a generic function, each of the
   generic function's dependents is updated.  The <em class="replaceable"><tt>initargs</tt></em> argument
   is a list of two elements: the symbol <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a>, and the method
   that was added.</p><p>When a method is removed from a generic function, each of the
   generic function's dependents is updated.  The <em class="replaceable"><tt>initargs</tt></em> argument
   is a list of two elements: the symbol <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><tt class="function">REMOVE-METHOD</tt></a>, and the method
   that was removed.</p><p>In each case, <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> is used to call
   <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a> on each of the dependents.  So, for example, the
   update of a generic function's dependents when a method is added
   could be performed by the following code:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> <em class="replaceable"><tt>generic-function</tt></em>
                  #'(lambda (dep)
                      (<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><tt class="function">CLOS:UPDATE-DEPENDENT</tt></a> <em class="replaceable"><tt>generic-function</tt></em>
                                        dep
                                        'add-method
                                        new-method)))
</pre></td></tr></table></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--update-dependent--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-dependent"></a>29.1.11.1.2. Generic Function <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> <em class="replaceable"><tt>metaobject</tt></em>
    <em class="replaceable"><tt>dependent</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>metaobject</tt></em></dt><dd>a class or a generic function metaobject
   </dd><dt><em class="replaceable"><tt>dependent</tt></em></dt><dd>an object</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function adds <em class="replaceable"><tt>dependent</tt></em> to the
   dependents of <em class="replaceable"><tt>metaobject</tt></em>.  If <em class="replaceable"><tt>dependent</tt></em> is already in the set
   of dependents it is not added again (no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led).</p><p>The generic function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> can be called to access
   the set of dependents of a class or generic function.  The generic
   function <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> can be called to remove an object from
   the set of dependents of a class or generic function.  The effect of
   calling <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> while a call to
   <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> on the same class or generic function is in progress
   is unspecified.</p><p>The situations in which <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> is called are not
   specified.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>generic-function</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--add-dependent--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-dependent"></a>29.1.11.1.3. Generic Function <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> <em class="replaceable"><tt>metaobject</tt></em>
     <em class="replaceable"><tt>dependent</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>metaobject</tt></em></dt><dd>a class or generic function metaobject
   </dd><dt><em class="replaceable"><tt>dependent</tt></em></dt><dd>an object</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd><p>This generic function removes <em class="replaceable"><tt>dependent</tt></em> from the
   dependents of <em class="replaceable"><tt>metaobject</tt></em>.  If <em class="replaceable"><tt>dependent</tt></em> is not one of the
   dependents of <em class="replaceable"><tt>metaobject</tt></em>, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.</p><p>The generic function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> can be called to access
   the set of dependents of a class or generic function.  The generic
   function <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> can be called to add an object from the set
   of dependents of a class or generic function.  The effect of calling
   <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> while a call to
   <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> on the same class or generic function is in progress
   is unspecified.</p><p> The situations in which <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> is called are not
   specified.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
   (<em class="replaceable"><tt>class</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>dependent</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--remove-dependent--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="map-dependents"></a>29.1.11.1.4. Generic Function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a></h5></div></div></div><div class="variablelist"><dl><dt>Syntax</dt><dd><tt class="code">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a> <em class="replaceable"><tt>metaobject</tt></em>
    <em class="replaceable"><tt>function</tt></em>)</tt></dd><dt>Arguments</dt><dd><div class="variablelist"><dl><dt><em class="replaceable"><tt>metaobject</tt></em></dt><dd>a class or generic function metaobject.
   </dd><dt><em class="replaceable"><tt>function</tt></em></dt><dd>a function which accepts one argument.
</dd></dl></div></dd><dt>Values</dt><dd>The value returned by this generic
 function is unspecified.</dd><dt>Purpose</dt><dd>This generic function applies <em class="replaceable"><tt>function</tt></em> to each of
   the dependents of <em class="replaceable"><tt>metaobject</tt></em>.  The order in which the dependents
   are processed is not specified, but <em class="replaceable"><tt>function</tt></em> is applied to each
   dependent once and only once.  If, during the mapping,
   <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a> is called to alter the
   dependents of <em class="replaceable"><tt>metaobject</tt></em>, it is not specified whether the newly
   added or removed dependent will have <em class="replaceable"><tt>function</tt></em> applied to it.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><tt class="method">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
   (<em class="replaceable"><tt>metaobject</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>function</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
   (<em class="replaceable"><tt>metaobject</tt></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a>) <em class="replaceable"><tt>function</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><tt class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd><dt><tt class="method">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><tt class="function">CLOS:MAP-DEPENDENTS</tt></a>
   (<em class="replaceable"><tt>metaobject</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a>) <em class="replaceable"><tt>function</tt></em>)</tt></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><tt class="method"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><tt class="function">CLOS:ADD-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li><li><tt class="method"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><tt class="function">CLOS:REMOVE-DEPENDENT</tt></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>)</tt></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--map-dependents-->
</div>
<!--mop-dep-maint-protocol-->
</div>
<!--mop-dep-maint-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gray"></a>29.2. Gray streams</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <tt class="classname">EXT:FILL-STREAM</tt>.</a></span></dt></dl></div><p>This interface permits the definition of new classes of streams,
and programming their behavior by defining methods for the elementary
stream operations.
It is based on the proposal <a href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail" target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> of David N. Gray to X3J13
and is supported by most <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations currently in use.</p><p>All symbols defined by this interface, starting with the prefix
 "fundamental-" or "stream-", are exported from the package
 <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a> and re-exported from <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>.</p><div class="variablelist"><p class="title"><b>Defined classes</b></p><dl><dt><a id="fu-st"></a><a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams.
   It is a subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and of <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.
   Its metaclass is <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>.</dd><dt><a id="fu-st-in"></a><a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s.
   It is a subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing input, you have to make it
   a subclass of <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><a id="fu-st-out"></a><a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s.
   It is a subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">OUTPUT-STREAM-P</tt></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing output, you have to make
   it a subclass of <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd><dt><a id="fu-st-char"></a><a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.  It is a subclass of
   <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  It defines a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> that returns
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</dd><dt><a id="fu-st-bin"></a><a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is a subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.  It is a
   subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  When you define a subclass of <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a>,
   you have to provide a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>.
  </dd><dt><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-INPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-OUTPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-BINARY-INPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-BINARY-OUTPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd></dl></div><div class="variablelist"><p class="title"><b>General generic functions defined on streams</b></p><dl><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns the stream's element type, normally a
   subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.</p><p>The method for <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.
  </p></dd><dt><tt class="code">((<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)
    <em class="replaceable"><tt>new-element-type</tt></em> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Changes the stream's element type.</p><p>The default method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#stream-eltype" title="21.3.1.&#xA0;Function STREAM-ELEMENT-TYPE">Section 21.3.1, “Function <tt class="function">STREAM-ELEMENT-TYPE</tt>”</a>).</p></dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> <em class="replaceable"><tt>stream</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:ABORT</tt>)</tt></dt><dd><p>Closes the stream and flushes any associated buffers.
   </p><p>When you define a primary method on this
    function, do not forget to <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a>.
  </p></dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns true before the stream has been closed, and
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> after the stream has been closed.</p><p>You do not need to add methods to this function.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-POSITION</tt>
    <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>position</tt></em>)</tt></dt><dd><p>Just like <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a>, but <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    <em class="replaceable"><tt>position</tt></em> means inquire.</p><p>You must define a method for this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character input</b></p><dl><dt><a id="st-rc"></a><tt class="code">(<a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns and consumes it.  Otherwise returns and consumes the next
   character from the stream. Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-uc"></a><tt class="code">(<a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>char</tt></em>)</tt></dt><dd><p>Pushes <em class="replaceable"><tt>char</tt></em>, which must be the last character
   read from the <em class="replaceable"><tt>stream</tt></em>, back onto the front of the <em class="replaceable"><tt>stream</tt></em>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-rcnh"></a><tt class="code">(<a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns a character or <tt class="constant">:EOF</tt>, like <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>, if
   that would return immediately.  If <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>
   The default method simply calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this is sufficient for streams
   whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method never blocks.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-PEEK-CHAR</tt>
    <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns it.  Otherwise returns the next character from the stream,
   avoiding any side effects <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> would do.  Returns <tt class="constant">:EOF</tt> if the
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.</p><p>The default method calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no
   side-effects.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-LISTEN</tt>
    <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns it.  Otherwise returns the next character from the stream, if
   already available.  If no character is available immediately, or if
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>The default method calls <a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no
   side-effects.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-CHAR-WILL-HANG-P</tt>
    <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no side-effects.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a>).</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-CHAR-SEQUENCE</tt> <em class="replaceable"><tt>stream</tt></em>
   <em class="replaceable"><tt>sequence</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<em class="replaceable"><tt>start</tt></em> [<em class="replaceable"><tt>end</tt></em>]])</tt></dt><dd><p>Fills the subsequence of <em class="replaceable"><tt>sequence</tt></em> specified by
   <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with characters consecutively read from <em class="replaceable"><tt>stream</tt></em>.
   Returns the index of the first element of <em class="replaceable"><tt>sequence</tt></em> that was not
   updated (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> <em class="replaceable"><tt>end</tt></em>, or <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&lt;</tt></a> <em class="replaceable"><tt>end</tt></em> if the stream reached its end).
   </p><p><em class="replaceable"><tt>sequence</tt></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
   <em class="replaceable"><tt>start</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to <tt class="literal">0</tt>.
   <em class="replaceable"><tt>end</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <em class="replaceable"><tt>sequence</tt></em>)</tt>.
  </p><p>The default method repeatedly calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this
   is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
   <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>).</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-LINE</tt>
    <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Reads a line of characters, and return two values:
   the line (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, without the terminating <span class="keysym">#\Newline</span> character),
   and a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a> value which is true if the line was terminated by
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> instead of <span class="keysym">#\Newline</span>.</p><p>The default method repeatedly calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this
   is always sufficient.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-CLEAR-INPUT</tt>
    <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Clears all pending interactive input from the
   <em class="replaceable"><tt>stream</tt></em>, and returns true if some pending input was removed.</p><p>The default method does nothing and returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; this is
   sufficient for non-interactive streams.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character output</b></p><dl><dt><a id="st-wc"></a><tt class="code">(<a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>char</tt></em>)</tt></dt><dd><p>Writes <em class="replaceable"><tt>char</tt></em>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-lc"></a><tt class="code">(<a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns the column number where the next character
   would be written (<tt class="literal">0</tt> stands for the first column),
    or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if that is not meaningful for this stream.
   </p><p>You must define a method for this function.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-START-LINE-P</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns true if the next character would be
   written at the start of a new line.</p><p>The default method calls <a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> and compares its result with
   0; this is sufficient for streams whose <a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> never returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
  </p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</tt>
    <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>sequence</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<em class="replaceable"><tt>start</tt></em> [<em class="replaceable"><tt>end</tt></em>]])</tt></dt><dd><p>Outputs the subsequence of <em class="replaceable"><tt>sequence</tt></em> specified
   by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <em class="replaceable"><tt>stream</tt></em>.</p><p><em class="replaceable"><tt>sequence</tt></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
   <em class="replaceable"><tt>start</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
   <em class="replaceable"><tt>end</tt></em> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <em class="replaceable"><tt>sequence</tt></em>)</tt>.
  </p><p>The default method repeatedly calls <a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a>; this
   is always sufficient if speed does not matter.
  </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension
   (see <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a>).</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-WRITE-STRING</tt>
    <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<em class="replaceable"><tt>start</tt></em> [<em class="replaceable"><tt>end</tt></em>]])</tt></dt><dd><p>Outputs the subsequence of <em class="replaceable"><tt>string</tt></em> specified by
   <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <em class="replaceable"><tt>stream</tt></em>.  Returns <em class="replaceable"><tt>string</tt></em>.</p><p><em class="replaceable"><tt>string</tt></em> is a string.  <em class="replaceable"><tt>start</tt></em> is a nonnegative integer
   and default to 0.  <em class="replaceable"><tt>end</tt></em> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, which stands for <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <em class="replaceable"><tt>string</tt></em>)</tt>.
   </p><p>The default method calls
   <tt class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</tt>;
   this is always sufficient.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-TERPRI</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Outputs a <span class="keysym">#\Newline</span> character.</p><p>The default method calls <a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a>; this is always
   sufficient.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-FRESH-LINE</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Possibly outputs a <span class="keysym">#\Newline</span> character, so as to ensure
   that the next character would be written at the start of a new line.
   Returns true if it did output a <span class="keysym">#\Newline</span> character.</p><p>The default method calls
   <tt class="function">GRAY:STREAM-START-LINE-P</tt> and then
   <tt class="function">GRAY:STREAM-TERPRI</tt> if necessary; this is always
   sufficient.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-FINISH-OUTPUT</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Ensures that any buffered output has reached its
   destination, and then returns.</p><p>The default method does nothing.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-FORCE-OUTPUT</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Brings any buffered output on its way towards its
   destination, and returns without waiting until it has reached its
   destination.</p><p>The default method does nothing.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-CLEAR-OUTPUT</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Attempts to discard any buffered output which has
   not yet reached its destination.</p><p>The default method does nothing.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-ADVANCE-TO-COLUMN</tt>
                 <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>column</tt></em>)</tt></dt><dd><p>Ensures that the next character will be written at
   <em class="replaceable"><tt>column</tt></em> at least.</p><p>The default method outputs an appropriate amount of space
   characters; this is sufficient for non-proportional output.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary input</b></p><dl><dt><a id="st-rb"></a><tt class="code">(<a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>Returns and consumes the next integer from the
   stream. Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.</p><p>You must define a method for this function.</p></dd><dt><a id="st-rbla"></a><tt class="code">(<a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a> <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> result.  Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is already
   known to be reached.  If <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>You must define a method for this function.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
   <a href="#rbla"><tt class="function">EXT:READ-BYTE-LOOKAHEAD</tt></a>).</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-BYTE-WILL-HANG-P</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a>; this is always sufficient.
   </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rbwhp"><tt class="function">EXT:READ-BYTE-WILL-HANG-P</tt></a>).
 </p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-BYTE-NO-HANG</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd><p>To be called only if <em class="replaceable"><tt>stream</tt></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <tt class="constant">:EOF</tt>, like <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>, if that would
   return immediately.  If <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>'s value is not available immediately,
   returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>The default method calls <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> if <a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a> returns true;
    this is always sufficient.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rbnh"><tt class="function">EXT:READ-BYTE-NO-HANG</tt></a>).
 </p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-READ-BYTE-SEQUENCE</tt>
     <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>sequence</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
      [<em class="replaceable"><tt>start</tt></em> [<em class="replaceable"><tt>end</tt></em> [<em class="replaceable"><tt>no-hang</tt></em> [<em class="replaceable"><tt>interactive</tt></em>]]]])</tt></dt><dd><p>Fills the subsequence of <em class="replaceable"><tt>sequence</tt></em> specified by
    <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with integers consecutively read from <em class="replaceable"><tt>stream</tt></em>.
    Returns the index of the first element of <em class="replaceable"><tt>sequence</tt></em> that was not
    updated (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> <em class="replaceable"><tt>end</tt></em>, or <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&lt;</tt></a> <em class="replaceable"><tt>end</tt></em> if the stream reached its end).
   </p><p><em class="replaceable"><tt>sequence</tt></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.
    <em class="replaceable"><tt>start</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
    <em class="replaceable"><tt>end</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    which stands for <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <em class="replaceable"><tt>sequence</tt></em>)</tt>.
    If <em class="replaceable"><tt>no-hang</tt></em> is true, the function should avoid blocking and instead fill
    only as many elements as are immediately available. If <em class="replaceable"><tt>no-hang</tt></em> is false
    and <em class="replaceable"><tt>interactive</tt></em> is true, the function can block for reading the first
    byte but should avoid blocking for any further bytes.</p><p>The default method repeatedly calls <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>; this
    is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
    <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>).</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary output</b></p><dl><dt><tt class="code">(<tt class="function">GRAY:STREAM-WRITE-BYTE</tt>
                 <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>integer</tt></em>)</tt></dt><dd><p>Writes <em class="replaceable"><tt>integer</tt></em>.</p><p>You must define a method for this function.</p></dd><dt><tt class="code">(<tt class="function">GRAY:STREAM-WRITE-BYTE-SEQUENCE</tt>
     <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>sequence</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
      [<em class="replaceable"><tt>start</tt></em> [<em class="replaceable"><tt>end</tt></em> [<em class="replaceable"><tt>no-hang</tt></em>]]])</tt></dt><dd><p>Outputs the subsequence of <em class="replaceable"><tt>sequence</tt></em> specified
    by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <em class="replaceable"><tt>stream</tt></em></p><p><em class="replaceable"><tt>sequence</tt></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.
    <em class="replaceable"><tt>start</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
    <em class="replaceable"><tt>end</tt></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    which stands for <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <em class="replaceable"><tt>sequence</tt></em>)</tt>.
    If <em class="replaceable"><tt>no-hang</tt></em> is true, the function should avoid blocking and instead output
    only as many elements as it can immediately proceed. If <em class="replaceable"><tt>no-hang</tt></em> is false
    and <em class="replaceable"><tt>interactive</tt></em> is true, the function can block for writing the first
    byte but should avoid blocking for any further bytes.</p><p>The default method repeatedly calls
    <tt class="function">GRAY:STREAM-WRITE-BYTE</tt>; this is always
    sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
    <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a>).</p></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fill-stream"></a>29.2.1. Class <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a>.</h3></div></div></div><p>As an example of the use of <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 offers an additional class, <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a>.  An instance of this class
 is a “<span class="quote">formatting</span>” <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, which makes the final
 output to the underlying stream look neat: indented and filled.
 An instance of <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a> is created like this:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><tt class="function">MAKE-INSTANCE</tt></a> '<a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a> :stream <em class="replaceable"><tt>stream</tt></em>
               [:text-indent symbol-or-number]
               [:sexp-indent symbol-or-number-or-function])
</pre></td></tr></table><p>where</p><div class="variablelist"><dl><dt><em class="replaceable"><tt>stream</tt></em></dt><dd>is the target <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> where the output actually
    goes.</dd><dt><em class="replaceable"><tt>symbol-or-number</tt></em></dt><dd>is the variable whose value is the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> text
    indentation or the indentation itself (defaults to 0).
 </dd><dt><em class="replaceable"><tt>symbol-or-number-or-function</tt></em></dt><dd><p>When <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> writes an S-expression to a
    <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a> using <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><tt class="literal">~S</tt></a>, and the expression's printed
    representation does not fit on the current line, it is printed on
    separate lines, ignoring the prescribed text indentation and
    preserving spacing.  When this argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the
    S-expression <strong>is</strong> indented by:</p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>the text indentation above;
     </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> is the indentation;
     </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></dt><dd>the indentation itself;
     </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a></dt><dd>called with one argument, the text indentation,
        and the value is used as S-expression indentation;
        thus <a href="http://www.lisp.org/HyperSpec/Body/fun_identity.html" target="_top"><tt class="function">IDENTITY</tt></a> is equivalent to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> above.
    </dd></dl></div><p>
    Defaults to <a href="impnotes.html#fill-stream" class="olink"><tt class="varname">CUSTOM::*FILL-INDENT-SEXP*</tt></a>, whose initial value is <a href="http://www.lisp.org/HyperSpec/Body/fun_1plcm_1-.html" target="_top"><tt class="function">1+</tt></a>.
</p></dd></dl></div><p></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Note that, due to buffering, one must call <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FORCE-OUTPUT</tt></a>
 when done with the <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a> (and before changing the indent variable).
 The former is done automatically by the macro
<tt class="code">(with-fill-stream (fill target-stream ...) ...)</tt>.</p></div><div class="example"><a id="ex-fill-stream"></a><p class="title"><b>Example 29.1. Example of <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM."><tt class="classname">EXT:FILL-STREAM</tt></a> usage</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defvar *my-indent-level*)
(with-output-to-string (out)
  (let ((*print-right-margin* 20)
        (*print-pretty* t)
        (*my-indent-level* 2))
    (with-fill-stream (fill out :text-indent '*my-indent-level*)
      (format fill "~%this is some long sentence which will      be broken at spaces")
      (force-output fill)
      (let ((*my-indent-level* 5))
        (format fill "~%and    properly indented to the level specified by the ~S argument which can be a ~S or an ~S - cool!" :TEXT-INDENT 'symbol 'integer))
      (format fill "~%Don't forget  to call ~S on it, and/or use ~S   Pretty formatting of the  S-expressions    printed with ~~S is  preserved: ~S" 'force-output 'with-fill-stream '(defun foo (x y z) (if x (+ y z) (* y z)))))))
<tt class="computeroutput">"
  this is some long
  sentence which
  will be broken at
  spaces
     and properly
     indented to
     the level
     specified by
     the :TEXT-INDENT
     argument which
     can be a
SYMBOL
     or an INTEGER
     - cool!
  Don't forget to
  call FORCE-OUTPUT
  on it, and/or use
WITH-FILL-STREAM
  Pretty formatting
  of the
  S-expressions
  printed with ~S
  is preserved:
(DEFUN FOO (X Y Z)
 (IF X (+ Y Z)
  (* Y Z)))
"</tt></pre></td></tr></table></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-p-indep"></a>Chapter 30. Platform Independent Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cradle-grave">30.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></dd><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cradle-grave"></a>30.1. Cradle to Grave</h2></div><div><h3 class="subtitle">What is done when.</h3></div></div></div><div class="procedure"><ol type="1"><li><p class="title"><b>Initialization</b></p><ol type="a"><li><p>Load the <a href="impnotes.html#image" class="olink">memory image</a>.</p></li><li><p>Install internal signal handlers.</p></li><li><p>Initialize time variables.</p></li><li><p>Initialize <a href="#enc-dflt" title="30.5.6.&#xA0;Default encodings.">locale-dependent
     encodings</a>.</p></li><li><p>Initialize stream variables.</p></li><li><p>Initialize pathname variables.</p></li><li><p>Initialize <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p></li><li><p><a href="#modinit" title="31.2.2.&#xA0;Module initialization.">Initialize
     modules</a>.</p></li><li><a id="init-hooks"></a><p>Run all functions in <a href="#init-hooks"><tt class="varname">CUSTOM:*INIT-HOOKS*</tt></a>
    like this: <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPC</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <a href="#init-hooks"><tt class="varname">CUSTOM:*INIT-HOOKS*</tt></a>)</tt>.
  </p></li><li><p>Say “<span class="quote">hi</span>” unless suppressed by <tt class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></tt>.
</p></li></ol></li><li><p class="title"><b>The actual work</b></p><p>Handle command line options: file
  <a href="clisp.html#opt-init" class="olink">loading</a> and/or
  <a href="clisp.html#opt-compile" class="olink">compilation</a>,
  <a href="clisp.html#opt-exec-expr" class="olink">form evaluation</a>,
  <a href="clisp.html#opt-exec-file" class="olink">script execution</a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>.</p></li><li><p class="title"><b>Finalization</b></p><ol type="a"><li><a id="fini-hooks"></a><p>Run all functions in
  <a href="#fini-hooks"><tt class="varname">CUSTOM:*FINI-HOOKS*</tt></a> like this: <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPC</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <a href="#fini-hooks"><tt class="varname">CUSTOM:*FINI-HOOKS*</tt></a>)</tt>.
  </p></li><li><p>Call <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><tt class="function">FRESH-LINE</tt></a> on the standard streams.</p></li><li><p>Say “<span class="quote">bye</span>” unless suppressed by <tt class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></tt>.
  </p></li><li><p>Wait for a keypress if requested by
    <tt class="option"><a href="clisp.html#opt-wait" class="olink">-w</a></tt>.
  </p></li><li><p>Close all open file streams.</p></li><li><p><a href="#modfini" title="31.2.3.&#xA0;Module finalization.">Finalize
     modules</a>.</p></li><li><p>Close opened DLLs.</p></li></ol></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="image"></a>30.2. Saving an Image</h2></div></div></div><p>The function <tt class="code">(<tt class="function">EXT:SAVEINITMEM</tt>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (<em class="replaceable"><tt>filename</tt></em> "lispinit.mem") <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  :QUIET :INIT-FUNCTION :LOCKED-PACKAGES :START-PACKAGE)</tt>
saves the running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s memory to the file <em class="replaceable"><tt>filename</tt></em>;
extension <tt class="filename">#P".mem"</tt> is recommended (when <em class="replaceable"><tt>filename</tt></em> does not have an
extension, <tt class="filename">#P".mem"</tt> extension is automatically added).
</p><div class="variablelist"><dl><dt><tt class="constant">:QUIET</tt></dt><dd>If this argument is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the startup
   banner and the good-bye message will be suppressed.
   </dd><dt><tt class="constant">:INIT-FUNCTION</tt></dt><dd><p>This argument specifies a function that will be
   executed at startup of the saved image, before entering the standard
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>; thus, if you want to avoid the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>, you have to call
   <a href="#quit" title="30.3.&#xA0;Quitting CLISP"><tt class="function">EXT:EXIT</tt></a> at the end
   of the init function yourself.</p><p>See <a href="clisp.html#opt-exec-file" class="olink">the
     manual</a> for passing command line arguments to this function.
 </p><p>See also <a href="#init-hooks"><tt class="varname">CUSTOM:*INIT-HOOKS*</tt></a> and <a href="#fini-hooks"><tt class="varname">CUSTOM:*FINI-HOOKS*</tt></a>.</p></dd><dt><tt class="constant">:LOCKED-PACKAGES</tt></dt><dd>This argument specifies the packages to lock before
   saving the image; this is convenient for application delivery, when
   you do not want your users to mess up your product.
   This argument defaults to <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>.
   </dd><dt><tt class="constant">:START-PACKAGE</tt></dt><dd>This argument specifies the starting value of
   <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a> in the image being saved, and defaults to the current
   value of <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>.</dd></dl></div><p>
You can use this memory image with the <tt class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></tt> option.
On <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems, you may compress it with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gzip.org/" target="_top"><span><strong class="command">gzip</strong></span></a> to save disk
space.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quit"></a>30.3. Quitting <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><p>The functions <tt class="code">(<tt class="function">EXT:EXIT</tt>
 [<em class="replaceable"><tt>errorp</tt></em>])</tt>,
 <tt class="code">(<tt class="function">EXT:QUIT</tt>
  [<em class="replaceable"><tt>errorp</tt></em>])</tt> and
 <tt class="code">(<tt class="function">EXT:BYE</tt>
  [<em class="replaceable"><tt>errorp</tt></em>])</tt> - all synonymous -
 terminate <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  If <em class="replaceable"><tt>errorp</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> aborts with the supplied numeric error status, i.e.,
 the OS environment is informed that the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> session did not
 succeed.</p><p><a href="#fin-delim">Final delimiter</a>s also terminate
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="i18n"></a>30.4. Internationalization of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></div><p>“<span class="quote">Internationalization</span>” means to prepare a program so
that it can use multiple national languages and national cultural
conventions without requiring further source code changes.  Localization
means providing the data - mostly textual translations - necessary for
an internationalized program to work in a particular language and with
particular cultural conventions.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is internationalized, and is localized for the languages
English, German, French, Spanish, Dutch and Russian.
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> also supports internationalized Lisp programs, through
<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a>, see <a href="#ggettext" title="32.7.1.&#xA0;The GNU gettext">Section 32.7.1, “The GNU gettext”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="language"></a>30.4.1. The Language</h3></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The facilities described in this section will
  work only for the languages for which <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> itself is already
  localized.</p></div><p>The language <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses to communicate with the user can be one of
</p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">ENGLISH</tt></td></tr><tr><td><tt class="constant">DEUTSCH</tt> (i.e., German)</td></tr><tr><td><tt class="constant">FRANÇAIS</tt> (i.e., French)</td></tr><tr><td><tt class="constant">ESPAÑOL</tt> (i.e., Spanish)</td></tr><tr><td><tt class="constant">NEDERLANDS</tt> (i.e., Dutch)</td></tr><tr><td><tt class="constant">РУССКИЙ</tt>
  (i.e. Russian)</td></tr></table><p>This is controlled by the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 <strong class="first"><em class="firstterm"><a href="impnotes.html#language" class="olink"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a><a id="curr-lang" class="indexterm"></a></em></strong>,
 which can be set at run time as well as using the <tt class="option"><a href="clisp.html#opt-lang" class="olink">-L</a></tt> start-up option.
 If you wish to change the
 <a href="clisp.html#opt-locale" class="olink">locale directory</a>
 at run time too, you can do that by setting <a href="impnotes.html#language" class="olink"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>
 cell, whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is the language (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, one of the above),
 and whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> is the new locale directory.</p><p>More languages can be defined through the macro
 <strong class="first"><em class="firstterm"><a href="#deflang"><tt class="function">I18N:DEFLANGUAGE</tt></a><a id="deflang" class="indexterm"></a></em></strong>:
 <tt class="code">(<a href="#deflang"><tt class="function">I18N:DEFLANGUAGE</tt></a> <em class="replaceable"><tt>language</tt></em>)</tt>.
 For such an additional language to take effect, you must install the
 corresponding message catalog, or translate the messages yourself,
 using <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> (or <a href="http://www.xemacs.org" target="_top">XEmacs</a>) po-mode.</p><p>This works only for strings.  For arbitrary language-dependent
 Lisp objects, you define one through the macro
 <strong class="first"><em class="firstterm"><a href="#def-i-l"><tt class="function">I18N:DEFINTERNATIONAL</tt></a><a id="def-i-l" class="indexterm"></a></em></strong>:
 <tt class="code">(<a href="#def-i-l"><tt class="function">I18N:DEFINTERNATIONAL</tt></a> <em class="replaceable"><tt>symbol</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 (<em class="replaceable"><tt>default-language</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>))</tt> and add
 language-dependent values through the macro
 <strong class="first"><em class="firstterm"><a href="#defloc"><tt class="function">I18N:DEFLOCALIZED</tt></a><a id="defloc" class="indexterm"></a></em></strong>:
 <tt class="code">(<a href="#defloc"><tt class="function">I18N:DEFLOCALIZED</tt></a> <em class="replaceable"><tt>symbol</tt></em> <em class="replaceable"><tt>language</tt></em>
  <em class="replaceable"><tt>value-form</tt></em>)</tt>
 (One such form for each language.  Languages without an assigned
 value will be treated like the default-language.)
 You can then access the localized value by calling
 <strong class="first"><em class="firstterm"><a href="#localized"><tt class="function">I18N:LOCALIZED</tt></a><a id="localized" class="indexterm"></a></em></strong>:
 <tt class="code">(<a href="#localized"><tt class="function">I18N:LOCALIZED</tt></a> <em class="replaceable"><tt>symbol</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>language</tt></em>)</tt></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="encoding"></a>30.5. Encodings</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="encodings-intro"></a>30.5.1. Introduction</h3></div></div></div><p>An “<span class="quote">encoding</span>” describes the correspondence
 between <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and raw bytes during input/output via
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><p>An <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a> is an object composed of the following facets:
</p><div class="variablelist"><dl><dt><a href="#charset" title="30.5.2.&#xA0;Character Sets">character set</a></dt><dd>This denotes both the set of characters that
    can be represented and passed through the I/O channel, and the way
    these characters translate into raw bytes.  In this context, for
    example, "UTF-8" and "UCS-4" are considered different, although they
    can represent the same set of characters.
 </dd><dt><a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode</dt><dd>This denotes the way newline characters are
    represented.</dd></dl></div><p><a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>s are also types.  As such, they represent the set of
 characters encodable in the character set.  In this context, the way
 characters are translated into raw bytes is ignored, and the line
 terminator mode is ignored as well.  <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><tt class="function">TYPEP</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><tt class="function">SUBTYPEP</tt></a> can be used
 on encodings.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="charset"></a>30.5.2. Character Sets</h3></div></div></div><div class="variablelist">
<!--#ifndef UNICODE--><dl><dt>Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built
  <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd>Only one character set is understood: the platform's
 native (8-bit) character set.  See <a href="#characters" title="Chapter&#xA0;13.&#xA0;Characters&#10;   [CLHS-13]">Chapter 13, <i>Characters
   [CLHS-13]</i></a>.
</dd>
<!--#else--><dt><a id="charset-symbols"></a>Platform dependent:
  Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>The following character sets are supported, as values
 of the corresponding (constant) symbol in the <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package:
</p><div class="orderedlist"><a id="charset-symbol-list"></a><p class="title"><b>Symbols in package <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></b></p><ol type="1"><li><a id="charset-UCS-2"></a><tt class="literal">UCS-2</tt>
   ≡ <tt class="literal">UNICODE-16</tt>
   ≡ <tt class="literal">UNICODE-16-BIG-ENDIAN</tt>,
   the 16-bit basic multilingual plane of the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   Every character is represented as two bytes.</li><li><a id="charset-UNICODE-16-LITTLE-ENDIAN"></a><tt class="literal">UNICODE-16-LITTLE-ENDIAN</tt>
    </li><li><a id="charset-UCS-4"></a><tt class="literal">UCS-4</tt>
   ≡ <tt class="literal">UNICODE-32</tt>
   ≡ <tt class="literal">UNICODE-32-BIG-ENDIAN</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. Every character is represented as
   four bytes.</li><li><a id="charset-UNICODE-32-LITTLE-ENDIAN"></a><tt class="literal">UNICODE-32-LITTLE-ENDIAN</tt>
 </li><li><a id="charset-UTF-8"></a><tt class="literal">UTF-8</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   Every character is represented as one to four bytes.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves and need one byte per character.
   Most Latin/Greek/Cyrillic/Hebrew characters need two bytes per
   character. Most other characters need three bytes per character,
   and the rarely used remaining characters need four bytes per
   character. This is therefore, in general, the most space-efficient
   encoding of all of Unicode.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-UTF-16"></a><tt class="literal">UTF-16</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. Every character in the 16-bit
   basic multilingual plane is represented as two bytes, and the
   rarely used remaining characters need four bytes per character.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-UTF-7"></a><tt class="literal">UTF-7</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. This is a stateful 7-bit encoding.
   Not all <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-JAVA"></a><tt class="literal">JAVA</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves and need one byte per character.
   All other characters of the basic multilingual plane are represented
   by <tt class="literal">\u<em class="replaceable"><tt>nnnn</tt></em></tt> sequences
   (<em class="replaceable"><tt>nnnn</tt></em> a hexadecimal number)
   and need 6 bytes per character. The remaining characters are represented
   by <tt class="literal">\u<em class="replaceable"><tt>xxxx</tt></em>\u<em class="replaceable"><tt>yyyy</tt></em></tt>
   and need 12 bytes per character. While this encoding is very comfortable
   for editing Unicode files using only <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>-aware tools and editors, it
   cannot faithfully represent all <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> text. Only text which
   does not contain <tt class="literal">\u</tt> (backslash followed by
   lowercase Latin u) can be faithfully represented by this encoding.
 </li><li><a id="charset-ASCII"></a><tt class="literal">ASCII</tt>,
   the well-known US-centric 7-bit character set (American Standard
   Code for Information Interchange - <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>).</li><li><a id="charset-ISO-8859-1"></a><tt class="literal">ISO-8859-1</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Afrikaans, Albanian, Basque, Breton, Catalan,
   Cornish, Danish, Dutch, English, Faeroese, Finnish, French,
   Frisian, Galician, German, Greenlandic, Icelandic, Irish, Italian,
   Latin, Luxemburgish, Norwegian, Portuguese, Raeto-Romanic,
   Scottish, Spanish, and Swedish languages.</li><li><a id="charset-ISO-8859-2"></a><tt class="literal">ISO-8859-2</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Croatian, Czech, German, Hungarian, Polish,
   Slovak, Slovenian, and Sorbian languages. </li><li><a id="charset-ISO-8859-3"></a><tt class="literal">ISO-8859-3</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Esperanto and Maltese languages.</li><li><a id="charset-ISO-8859-4"></a><tt class="literal">ISO-8859-4</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian and Sami (Lappish)
   languages.</li><li><a id="charset-ISO-8859-5"></a><tt class="literal">ISO-8859-5</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Bulgarian, Byelorussian, Macedonian, Russian,
   Serbian, and Ukrainian languages.</li><li><a id="charset-ISO-8859-6"></a><tt class="literal">ISO-8859-6</tt>,
   suitable for the Arabic language.</li><li><a id="charset-ISO-8859-7"></a><tt class="literal">ISO-8859-7</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Greek language.</li><li><a id="charset-ISO-8859-8"></a><tt class="literal">ISO-8859-8</tt>,
      an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Hebrew language (without punctuation).
 </li><li><a id="charset-ISO-8859-9"></a><tt class="literal">ISO-8859-9</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Turkish language.</li><li><a id="charset-ISO-8859-10"></a><tt class="literal">ISO-8859-10</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Icelandic, Inuit (Greenlandic), Latvian,
   Lithuanian, and Sami (Lappish) languages.</li><li><a id="charset-ISO-8859-13"></a><tt class="literal">ISO-8859-13</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian, Polish and Sami
   (Lappish) languages.</li><li><a id="charset-ISO-8859-14"></a><tt class="literal">ISO-8859-14</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Irish Gaelic, Manx Gaelic, Scottish Gaelic, and
   Welsh languages.</li><li><a id="charset-ISO-8859-15"></a><tt class="literal">ISO-8859-15</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the ISO-8859-1 languages, with improvements for
   French, Finnish and the Euro.</li><li><a id="charset-ISO-8859-16"></a><tt class="literal">ISO-8859-16</tt>
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Rumanian language.</li><li><a id="charset-KOI8-R"></a><tt class="literal">KOI8-R</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language (very popular, especially on the
   internet).</li><li><a id="charset-KOI8-U"></a><tt class="literal">KOI8-U</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Ukrainian language (very popular, especially on the
   internet).</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-KOI8-RU"></a><tt class="literal">KOI8-RU</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><tt class="literal">JIS_X0201</tt>,
   a character set for the Japanese language.</li><li><a id="charset-MAC-ARABIC"></a><tt class="literal">MAC-ARABIC</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CENTRAL-EUROPE"></a><tt class="literal">MAC-CENTRAL-EUROPE</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CROATIAN"></a><tt class="literal">MAC-CROATIAN</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CYRILLIC"></a><tt class="literal">MAC-CYRILLIC</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-DINGBAT"></a><tt class="literal">MAC-DINGBAT</tt>,
   a platform specific character set.
 </li><li><a id="charset-MAC-GREEK"></a><tt class="literal">MAC-GREEK</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-HEBREW"></a><tt class="literal">MAC-HEBREW</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ICELAND"></a><tt class="literal">MAC-ICELAND</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMAN"></a><tt class="literal">MAC-ROMAN</tt>
   ≡ <tt class="literal">MACINTOSH</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMANIA"></a><tt class="literal">MAC-ROMANIA</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-SYMBOL"></a><tt class="literal">MAC-SYMBOL</tt>,
   a platform specific character set.</li><li><a id="charset-MAC-THAI"></a><tt class="literal">MAC-THAI</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-TURKISH"></a><tt class="literal">MAC-TURKISH</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-UKRAINE"></a><tt class="literal">MAC-UKRAINE</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437"></a><tt class="literal">CP437</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437-IBM"></a><tt class="literal">CP437-IBM</tt>,
   an IBM variant of <tt class="literal">CP437</tt>.
 </li><li><a id="charset-CP737"></a><tt class="literal">CP737</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP775"></a><tt class="literal">CP775</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Baltic languages.
 </li><li><a id="charset-CP850"></a><tt class="literal">CP850</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852"></a><tt class="literal">CP852</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852-IBM"></a><tt class="literal">CP852-IBM</tt>,
   an IBM variant of <tt class="literal">CP852</tt>.</li><li><a id="charset-CP855"></a><tt class="literal">CP855</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP857"></a><tt class="literal">CP857</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Turkish language.
 </li><li><a id="charset-CP860"></a><tt class="literal">CP860</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Portuguese language.
 </li><li><a id="charset-CP860-IBM"></a><tt class="literal">CP860-IBM</tt>,
   an IBM variant of <tt class="literal">CP860</tt>.
 </li><li><a id="charset-CP861"></a><tt class="literal">CP861</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Icelandic language.
 </li><li><a id="charset-CP861-IBM"></a><tt class="literal">CP861-IBM</tt>,
   an IBM variant of <tt class="literal">CP861</tt>.
 </li><li><a id="charset-CP862"></a><tt class="literal">CP862</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Hebrew language.
 </li><li><a id="charset-CP862-IBM"></a><tt class="literal">CP862-IBM</tt>,
   an IBM variant of <tt class="literal">CP862</tt>.
 </li><li><a id="charset-CP863"></a><tt class="literal">CP863</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP863-IBM"></a><tt class="literal">CP863-IBM</tt>,
   an IBM variant of <tt class="literal">CP863</tt>.
 </li><li><a id="charset-CP864"></a><tt class="literal">CP864</tt>, a DOS oldie,
   meant to be suitable for the Arabic language.
 </li><li><a id="charset-CP864-IBM"></a><tt class="literal">CP864-IBM</tt>,
   an IBM variant of <tt class="literal">CP864</tt>.
 </li><li><a id="charset-CP865"></a><tt class="literal">CP865</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Nordic languages.
 </li><li><a id="charset-CP865-IBM"></a><tt class="literal">CP865-IBM</tt>,
   an IBM variant of <tt class="literal">CP865</tt>.
 </li><li><a id="charset-CP866"></a><tt class="literal">CP866</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP869"></a><tt class="literal">CP869</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP869-IBM"></a><tt class="literal">CP869-IBM</tt>,
   an IBM variant of <tt class="literal">CP869</tt>.
 </li><li><a id="charset-CP874"></a><tt class="literal">CP874</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Thai language.
 </li><li><a id="charset-CP874-IBM"></a><tt class="literal">CP874-IBM</tt>,
   an IBM variant of <tt class="literal">CP874</tt>.
 </li><li><a id="charset-WINDOWS-1250"></a><tt class="literal">WINDOWS-1250</tt>
   ≡ <tt class="literal">CP1250</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-2.
 </li><li><a id="charset-WINDOWS-1251"></a><tt class="literal">WINDOWS-1251</tt>
   ≡ <tt class="literal">CP1251</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-5,
   meant to be suitable for the Russian language.
 </li><li><a id="charset-WINDOWS-1252"></a><tt class="literal">WINDOWS-1252</tt>
   ≡ <tt class="literal">CP1252</tt>,
   a platform specific extension of the ISO-8859-1 character set.
 </li><li><a id="charset-WINDOWS-1253"></a><tt class="literal">WINDOWS-1253</tt>
   ≡ <tt class="literal">CP1253</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-7,
   meant to be suitable for the Greek language.
 </li><li><a id="charset-WINDOWS-1254"></a><tt class="literal">WINDOWS-1254</tt>
   ≡ <tt class="literal">CP1254</tt>,
   a platform specific extension of the ISO-8859-9 character set.
 </li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-WINDOWS-1255"></a><tt class="literal">WINDOWS-1255</tt>
   ≡ <tt class="literal">CP1255</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-8,
   suitable for the Hebrew language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-WINDOWS-1256"></a><tt class="literal">WINDOWS-1256</tt>
   ≡ <tt class="literal">CP1256</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Arabic language.
 </li><li><a id="charset-WINDOWS-1257"></a><tt class="literal">WINDOWS-1257</tt>
   ≡ <tt class="literal">CP1257</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-WINDOWS-1258"></a><tt class="literal">WINDOWS-1258</tt>
   ≡ <tt class="literal">CP1258</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Vietnamese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-HP-ROMAN8"></a><tt class="literal">HP-ROMAN8</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-NEXTSTEP"></a><tt class="literal">NEXTSTEP</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-EUC-JP"></a><tt class="literal">EUC-JP</tt>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-SHIFT-JIS"></a><tt class="literal">SHIFT-JIS</tt>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP932"></a><tt class="literal">CP932</tt>,
   a Microsoft variant of <tt class="literal">SHIFT-JIS</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP"></a><tt class="literal">ISO-2022-JP</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-2"></a><tt class="literal">ISO-2022-JP-2</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.3
   or newer or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-1"></a><tt class="literal">ISO-2022-JP-1</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-CN"></a><tt class="literal">EUC-CN</tt>,
   a multibyte character set for simplified Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-HZ"></a><tt class="literal">HZ</tt>,
   a stateful 7-bit multibyte character set for simplified Chinese.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GBK"></a><tt class="literal">GBK</tt>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP936"></a><tt class="literal">CP936</tt>,
   a Microsoft variant of <tt class="literal">GBK</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GB18030"></a><tt class="literal">GB18030</tt>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-TW"></a><tt class="literal">EUC-TW</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5"></a><tt class="literal">BIG5</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP950"></a><tt class="literal">CP950</tt>,
   a Microsoft variant of <tt class="literal">BIG5</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5-HKSCS"></a><tt class="literal">BIG5-HKSCS</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN"></a><tt class="literal">ISO-2022-CN</tt>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN-EXT"></a><tt class="literal">ISO-2022-CN-EXT</tt>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-KR"></a><tt class="literal">EUC-KR</tt>,
   a multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP949"></a><tt class="literal">CP949</tt>,
   a Microsoft variant of <tt class="literal">EUC-KR</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-KR"></a><tt class="literal">ISO-2022-KR</tt>,
   a stateful 7-bit multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-JOHAB"></a><tt class="literal">JOHAB</tt>,
   a multibyte character set for Korean used mostly on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ARMSCII-8"></a><tt class="literal">ARMSCII-8</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Armenian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-ACADEMY"></a><tt class="literal">GEORGIAN-ACADEMY</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-PS"></a><tt class="literal">GEORGIAN-PS</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TIS-620"></a><tt class="literal">TIS-620</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Thai. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-MULELAO-1"></a><tt class="literal">MULELAO-1</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP1133"></a><tt class="literal">CP1133</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-VISCII"></a><tt class="literal">VISCII</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TCVN"></a><tt class="literal">TCVN</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
</ol></div><p>


<!--#ifdef /* HAVE_ICONV */-->
</p><div class="variablelist"><dl><dt><a id="iconv"></a>Platform dependent: Only on <a href="http://www.gnu.org" target="_top">GNU</a> systems
  with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or better and other systems (<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>)
  on which the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library has been installed</dt><dd><p>The character sets provided by the library function
 <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> can also be used as encodings.  To create such an encoding,
 call <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> with the character set name (a string) as the
 <tt class="constant">:CHARSET</tt> argument.</p><p>When an <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a> is available both as a <a href="#charset-symbols">built-in</a> and
 through <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>, the <a href="#charset-symbols">built-in</a> is used, because it is more
 efficient and available across all platforms.</p><p>These encodings are not assigned to global variables, since
 there is no portable way to get the list of all character sets
 supported by <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>.</p><p>On <a href="http://www.gnu.org" target="_top">GNU</a> systems (such as <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> and <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.gnu.org/software/hurd/" target="_top"><strong>Hurd</strong></a>)
 and on systems with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> you get this list by calling the
 <span class="emphasis"><em>program</em></span> <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/iconv.html" target="_top"><span><strong class="command">iconv</strong></span></a>: <span><strong class="command">iconv -l</strong></span>.
 </p><p>The reason we use only <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> is
 that the other <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> implementations are broken in various ways and
 we do not want to deal with random <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> crashes caused by those bugs.
 If your system supplies an <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> implementation which passes the
 <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>'s test suite, please report that to <tt class="email">&lt;<a href="mailto:clisp-list/at/sf.net"><a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">clisp-list/at/sf.net</a></a>&gt;</tt> and a
 future <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version will use <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> on your system.</p></dd></dl></div><p>

<!--#endif /* HAVE_ICONV */-->

</p></dd>
<!--#endif /* UNICODE */-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="newline"></a>30.5.3. Line Terminators</h3></div></div></div><p>The line terminator mode can be one of the following three keywords:
</p><div class="variablelist"><dl><dt><tt class="constant">:UNIX</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">LF</span> character (<span class="keycode">U000A</span>).
</dd><dt><tt class="constant">:MAC</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">CR</span> character (<span class="keycode">U000D</span>).
</dd><dt><tt class="constant">:DOS</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">CR</span> followed by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> <span class="keycode">LF</span>.
</dd></dl></div><p>Windows programs typically use the <tt class="constant">:DOS</tt> line terminator,
 sometimes they also accept <tt class="constant">:UNIX</tt> line terminators or produce
 <tt class="constant">:MAC</tt> line terminators.</p><p>The <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> protocol also requires <tt class="constant">:DOS</tt> line terminators:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a> (s (<a href="#so-connect"><tt class="function">SOCKET:SOCKET-CONNECT</tt></a> 80 <em class="replaceable"><tt>host</tt></em> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <tt class="constant">:DOS</tt>))
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> s "GET foo.jpeg HTTP/1.0~%")
  (<a href="#sost-shut"><tt class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</tt></a> s <tt class="constant">:OUTPUT</tt>)
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a> :with content-length :and marker = "Content-length: "
    :for line = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> s nil nil)
    :until (<a href="http://www.lisp.org/HyperSpec/Body/fun_zerop.html" target="_top"><tt class="function">ZEROP</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> line)) :do
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><tt class="function">STRING=</tt></a> line "Content-length: " :end1 (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> marker))
      (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> content-length (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><tt class="function">PARSE-INTEGER</tt></a> line :start (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> marker)))
    :finally (<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><tt class="function">RETURN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> ((data (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a> content-length
                                             :element-type '<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>)))
                       (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> s) '<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>)
                       (<a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a> data s)
                       data)))))
</pre></td></tr></table><p>The line terminator mode is relevant only for output (writing to a
 <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>).  During input, all three kinds of line terminators
 are recognized.  See also <a href="#clhs-newline" title="13.8.&#xA0;Treatment of Newline during Input and Output&#10;   [CLHS-13.1.8]">Section 13.8, “Treatment of Newline during Input and Output
   [CLHS-13.1.8]”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-encoding"></a>30.5.4. Function <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a>.</h3></div></div></div><p>The function <tt class="code">(<a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :CHARSET
     :LINE-TERMINATOR :INPUT-ERROR-ACTION :OUTPUT-ERROR-ACTION)</tt>
 returns an <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>. The <tt class="constant">:CHARSET</tt> argument may be
 an encoding, a string, or <tt class="constant">:DEFAULT</tt>.
 The possible values for the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> argument are the
 keywords <tt class="constant">:UNIX</tt>, <tt class="constant">:MAC</tt>, <tt class="constant">:DOS</tt>.</p><p>The <tt class="constant">:INPUT-ERROR-ACTION</tt> argument specifies
 what happens when an invalid byte sequence is encountered while
 converting bytes to characters.  Its value can be <tt class="constant">:ERROR</tt>, <tt class="constant">:IGNORE</tt>
 or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character
 <span class="keysym">#\uFFFD</span> is typically used to indicate an error in the
 input sequence.</p><p>The <tt class="constant">:OUTPUT-ERROR-ACTION</tt> argument specifies
 what happens when an invalid character is encountered while converting
 characters to bytes.  Its value can be <tt class="constant">:ERROR</tt>, <tt class="constant">:IGNORE</tt>, a byte to
 be used instead, or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>
 character <span class="keysym">#\uFFFD</span> can be used here only if it is
 encodable in the character set.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-charset"></a>30.5.5. Function <a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a>.</h3></div><div><h4 class="subtitle">Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built
 <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</h4></div></div></div><p>The function <tt class="code">(<a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a> <em class="replaceable"><tt>encoding</tt></em>)</tt> returns the
 charset of the <em class="replaceable"><tt>encoding</tt></em>, as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><tt class="function">STRING</tt></a> (<a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a> <em class="replaceable"><tt>encoding</tt></em>))</tt> is
  not necessarily a valid MIME name.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-dflt"></a>30.5.6. Default encodings.</h3></div></div></div><p>Besides every <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> containing an encoding,
 the following <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> places contain global <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>s:</p><p><a id="def-file-enc"></a><b><a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="impnotes.html#def-file-enc" class="olink"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>. </b>The <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <a href="impnotes.html#def-file-enc" class="olink"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a> is the encoding used for
 new <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, when no <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> argument was specified.
</p>
<!--#ifdef UNICODE--><div class="variablelist"><dl><dt>Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built
  <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>The following are <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> places.</p><div class="variablelist"><dl><dt><strong class="first"><em class="firstterm"><a href="impnotes.html#path-enc" class="olink"><tt class="varname">CUSTOM:*PATHNAME-ENCODING*</tt></a>
   <a id="path-enc" class="indexterm"></a></em></strong></dt><dd>is the encoding used for pathnames in the file
 system. Normally, this is a 1:1 encoding.  Its <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.
 </dd><dt><strong class="first"><em class="firstterm"><a href="impnotes.html#term-enc" class="olink"><tt class="varname">CUSTOM:*TERMINAL-ENCODING*</tt></a>
   <a id="term-enc" class="indexterm"></a></em></strong></dt><dd>is the encoding used for communication with the
  terminal, in particular by <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>.
 </dd><dt><strong class="first"><em class="firstterm"><a href="impnotes.html#misc-enc" class="olink"><tt class="varname">CUSTOM:*MISC-ENCODING*</tt></a>
   <a id="misc-enc" class="indexterm"></a></em></strong></dt><dd>is the encoding used for access to <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s,
 command line options, and the like.  Its <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.
 </dd>
<!--#if defined(HAVE_AFFI) || defined(DYNAMIC_FFI)--><dt><strong class="first"><em class="firstterm"><a href="impnotes.html#foreign-enc" class="olink"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a>
   <a id="foreign-enc" class="indexterm"></a></em></strong></dt><dd>is the encoding for characters and strings passed
 through the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> (some plaforms only).
 Its value must be a 1:1 encoding, i.e., an encoding in which every
 character is represented by one byte.
</dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
<p>The default encoding objects are initialized as described in
 <a href="clisp.html#opt-enc" class="olink">-Edomain encoding</a></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-byte"></a>30.5.7. Converting between strings and byte vectors</h3></div></div></div><p>Encodings can also be used to convert directly between strings and
their corresponding byte vector representation according to that encoding.
</p><div class="variablelist"><dl><dt><tt class="code">(<tt class="function">EXT:CONVERT-STRING-FROM-BYTES</tt>
      <em class="replaceable"><tt>byte-vector</tt></em> <em class="replaceable"><tt>encoding</tt></em>
      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt></dt><dd>converts the subsequence of
  <em class="replaceable"><tt>byte-vector</tt></em> from <em class="replaceable"><tt>start</tt></em> to <em class="replaceable"><tt>end</tt></em> to a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, according to the given <em class="replaceable"><tt>encoding</tt></em>, and returns the
  resulting string.</dd><dt><tt class="code">(<tt class="function">EXT:CONVERT-STRING-TO-BYTES</tt>
      <em class="replaceable"><tt>string</tt></em> <em class="replaceable"><tt>encoding</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt></dt><dd>converts the subsequence of <em class="replaceable"><tt>string</tt></em> from
  <em class="replaceable"><tt>start</tt></em> to <em class="replaceable"><tt>end</tt></em> to a <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>,
  according to the given <em class="replaceable"><tt>encoding</tt></em>, and returns the resulting byte
  vector.</dd></dl></div></div></div>
<!--#ifdef GENERIC_STREAMS--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gstream"></a>30.6. Generic streams</h2></div></div></div><p>This interface is <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific and now obsolete.  Please use
 the <a href="#gray" title="29.2.&#xA0;Gray streams">Gray streams</a> interface instead.</p><p>Generic streams are user programmable streams.
 The programmer interface:</p><div class="variablelist"><dl><dt><tt class="code">(<tt class="function">gstream:make-generic-stream</tt>
                 <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd>returns a generic stream.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-controller</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>returns a private object to which generic stream
   methods dispatch.  The typical usage is to retrieve the object
   originally provided by the user in
   <tt class="function">gstream:make-generic-stream</tt>.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-p</tt>
                 <em class="replaceable"><tt>stream</tt></em>)</tt></dt><dd>determines whether a stream is a generic stream,
   returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if it is, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> otherwise.
  </dd></dl></div><p>In order to specify the behavior of a generic stream, the user
 must define <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> methods on the following <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> generic
 functions.  The function
 <tt class="function">gstream:generic-stream-<em class="replaceable"><tt>xyz</tt></em></tt>
 corresponds to the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> function
 <tt class="function"><em class="replaceable"><tt>xyz</tt></em></tt>.  They all take a
 controller and some number of arguments.</p><div class="variablelist"><dl><dt><tt class="code">(<tt class="function">gstream:generic-stream-read-char</tt>
                 <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd> Returns and consumes the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at
    end of file.  Takes one argument, the controller object.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-peek-char</tt>
                 <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd> Returns the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at end of file.  A
   second value indicates whether the side effects associated with
   consuming the character were executed: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> means that a full
   <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> was done, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> means that no side effects were done.
   Takes one argument, the controller object.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-read-byte</tt>
                 <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd>Returns and consumes the next integer, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at end
   of file.  Takes one argument, the controller object.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-read-char-will-hang-p</tt>
     <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd>This generic function is used to query the stream's
   input status.  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if
   <tt class="function">gstream:generic-stream-read-char</tt> and
   <tt class="function">gstream:generic-stream-peek-char</tt> will certainly
   return immediately.  Otherwise it returns true.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-write-char</tt>
                 <em class="replaceable"><tt>controller</tt></em> <em class="replaceable"><tt>char</tt></em>)</tt></dt><dd>The first argument is the controller object.
   The second argument is the character to be written.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-write-byte</tt>
                 <em class="replaceable"><tt>controller</tt></em>
                 <em class="replaceable"><tt>by</tt></em>)</tt></dt><dd>The first argument is the controller object.
   The second argument is the integer to be written.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-write-string</tt>
                 <em class="replaceable"><tt>controller</tt></em>
                 <em class="replaceable"><tt>string</tt></em> <em class="replaceable"><tt>start</tt></em> <em class="replaceable"><tt>length</tt></em>)</tt></dt><dd>Writes the subsequence of <em class="replaceable"><tt>string</tt></em> starting from
   <em class="replaceable"><tt>start</tt></em> of length <em class="replaceable"><tt>length</tt></em>.
   The first argument is the controller object.
  </dd><dt><tt class="code">(<tt class="function">gstream:generic-stream-clear-input</tt>
                 <em class="replaceable"><tt>controller</tt></em>)</tt><br /><tt class="code">(<tt class="function">gstream:generic-stream-clear-output</tt>
     <em class="replaceable"><tt>controller</tt></em>)</tt><br /><tt class="code">(<tt class="function">gstream:generic-stream-finish-output</tt>
     <em class="replaceable"><tt>controller</tt></em>)</tt><br /><tt class="code">(<tt class="function">gstream:generic-stream-force-output</tt>
     <em class="replaceable"><tt>controller</tt></em>)</tt><br /><tt class="code">(<tt class="function">gstream:generic-stream-close</tt>
     <em class="replaceable"><tt>controller</tt></em>)</tt></dt><dd>Take one argument, the controller object.
 </dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="weak"></a>30.7. Weak Objects</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></div><p>Recall two terms: An object is called “<span class="quote">"alive"</span>” as
 long as it can be retrieved by the user or program, through any kind of
 references, starting from global and local variables. (Objects that
 consume no heap storage, also known as “<span class="quote">"immediate
 objects"</span>”, such as <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s, and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s, are alive indefinitely.) An object is said to be
 <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed when its storage is reclaimed, at some moment after it becomes
 “<span class="quote">"dead"</span>”.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-pointer"></a>30.7.1. Weak Pointers</h3></div></div></div><p>A <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a> is an object holding a reference to a given object,
 without keeping the latter from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p><div class="variablelist"><p class="title"><b>Weak Pointer API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-POINTER</tt>
   <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>returns a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a> referring to
   <em class="replaceable"><tt>value</tt></em>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-POINTER-P</tt> <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-POINTER-VALUE</tt>
   <em class="replaceable"><tt>weak-pointer</tt></em>)</tt></dt><dd>returns two values: The original value and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>,
   if the value has not yet been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able: you can change the value that the weak pointer
   points to.</dd></dl></div><p>Weak pointers are useful for notification-based communication
 protocols between software modules, e.g. when a change to an object
 <em class="replaceable"><tt>x</tt></em> requires a notification to an object <em class="replaceable"><tt>y</tt></em>, as long as <em class="replaceable"><tt>y</tt></em> is
 alive.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-list"></a>30.7.2. Weak Lists</h3></div></div></div><p>A <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a> is an ordered collection of references to objects
 that does <strong>not</strong> keep the objects from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed. It is
 semantically equivalent to a list of <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>s, however with a
 more efficient in-memory representation than a plain list of
 <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>s would be.</p><div class="variablelist"><p class="title"><b>Weak List API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-LIST</tt> <em class="replaceable"><tt>list</tt></em>)</tt></dt><dd>creates a <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a> pointing to each of the
   elements in the given <em class="replaceable"><tt>list</tt></em>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-LIST-P</tt> <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-LIST-LIST</tt>
   <em class="replaceable"><tt>weak-list</tt></em>)</tt></dt><dd>returns a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of those objects from the
   <em class="replaceable"><tt>weak-list</tt></em> that are still
   alive.</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:WEAK-LIST-LIST</tt>
   <em class="replaceable"><tt>weak-list</tt></em>) <em class="replaceable"><tt>list</tt></em>)</tt></dt><dd>replaces the list of objects stored by the
   <em class="replaceable"><tt>weak-list</tt></em>.</dd></dl></div><p>Weak lists are useful for notification based communication
 protocols between software modules, e.g. when a change to an object
 <em class="replaceable"><tt>x</tt></em> requires a notification to objects <em class="replaceable"><tt>k<sub>1</sub></tt></em>, <em class="replaceable"><tt>k<sub>2</sub></tt></em>, ..., as long
 as such a particular <em class="replaceable"><tt>k<sub>n</sub></tt></em> is alive.</p><p>A <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><tt class="classname">EXT:WEAK-LIST</tt></a> with a single element is semantically equivalent to a
 single <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-and-relation"></a>30.7.3. Weak “<span class="quote">And</span>” Relations</h3></div></div></div><p>A weak “<span class="quote">and</span>” relation is an ordered collection of
 references to objects, that does <strong>not</strong> keep the objects from being
 <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and which allows access to all the objects as long as all of
 them are still alive. As soon as one of them is <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, the entire
 collection of objects becomes empty.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">And</span>” Relation API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-AND-RELATION</tt>
   <em class="replaceable"><tt>list</tt></em>)</tt></dt><dd>creates a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a> between the objects in
   the given <em class="replaceable"><tt>list</tt></em>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-AND-RELATION-P</tt>
   <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-AND-RELATION-LIST</tt>
   <em class="replaceable"><tt>weak-and-relation</tt></em>)</tt></dt><dd>returns the list of objects stored in the
   <em class="replaceable"><tt>weak-and-relation</tt></em>. The returned list must not
   be destructively modified.</dd></dl></div><p><a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a>s are useful to model relations between objects
 that become worthless when one of the objects dies.</p><p>A <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a> with a single element is semantically
 equivalent to a <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-or-relation"></a>30.7.4. Weak “<span class="quote">Or</span>” Relations</h3></div></div></div><p>A weak “<span class="quote">or</span>” relation is an ordered collection of
 references to objects, that keeps all objects from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed as long
 as one of them is still alive. In other words, each of them keeps all
 others among them from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed. When all of them are unreferenced,
 the collection of objects becomes empty.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">Or</span>” Relation API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-OR-RELATION</tt>
   <em class="replaceable"><tt>list</tt></em>)</tt></dt><dd>creates a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a> between the objects in
   the given <em class="replaceable"><tt>list</tt></em>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-OR-RELATION-P</tt>
   <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-OR-RELATION-LIST</tt>
   <em class="replaceable"><tt>weak-or-relation</tt></em>)</tt></dt><dd>returns the list of objects stored in the
   <em class="replaceable"><tt>weak-or-relation</tt></em>. The returned list must not
   be destructively modified.</dd></dl></div><p><a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a>s are useful to model relations between objects
 that do not become worthless when one of the objects dies.</p><p>A <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a> with a single element is semantically
 equivalent to a <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-mapping"></a>30.7.5. Weak Associations</h3></div></div></div><p>A weak association is a mapping from an object called <em class="replaceable"><tt>key</tt></em> to
 an object called <em class="replaceable"><tt>value</tt></em>, that exists as long as the key is alive. In
 other words, as long as the key is alive, it keeps the value from being
 <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p><div class="variablelist"><p class="title"><b>Weak Association API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-MAPPING</tt>
   <em class="replaceable"><tt>key</tt></em> <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>creates a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a>.
</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-MAPPING-P</tt>
   <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the object is of type
   <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-MAPPING-PAIR</tt>
   <em class="replaceable"><tt>weak-mapping</tt></em>)</tt></dt><dd>returns three values: the original key, the original
   value, and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, if the key has not yet been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-mapping</tt></em>)</tt></dt><dd>returns the value, if the key has not yet been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
   else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:WEAK-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-mapping</tt></em>) <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>replaces the value stored in the
   <em class="replaceable"><tt>weak-mapping</tt></em>. It has no effect when the
   key has already been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p>Weak associations are useful to supplement objects with additional
 information that is stored outside of the object.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-and-mapping"></a>30.7.6. Weak “<span class="quote">And</span>” Mappings</h3></div></div></div><p>A weak “<span class="quote">and</span>” mapping is a mapping from a tuple of
 objects called <em class="replaceable"><tt>keys</tt></em> to an object called <em class="replaceable"><tt>value</tt></em>, that does
 <strong>not</strong> keep the keys from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed and that exists as long as all
 keys are alive. As soon as one of the keys is <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, the entire
 mapping goes away.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">And</span>” Mapping API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-AND-MAPPING</tt>
   <em class="replaceable"><tt>keys</tt></em> <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>creates a <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><tt class="classname">EXT:WEAK-AND-MAPPING</tt></a> between the <em class="replaceable"><tt>keys</tt></em>
   objects in the given list and the given <em class="replaceable"><tt>value</tt></em>.
   The <em class="replaceable"><tt>keys</tt></em> list must be non-empty.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-AND-MAPPING-P</tt>
   <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><tt class="classname">EXT:WEAK-AND-MAPPING</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-AND-MAPPING-PAIR</tt>
   <em class="replaceable"><tt>weak-and-mapping</tt></em>)</tt></dt><dd>returns three values: the list of keys, the value,
   and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, if none of the keys have been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   The returned keys list must not be destructively modified.
</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-AND-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-and-mapping</tt></em>)</tt></dt><dd>returns the value, if none of the keys have been
   <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
   (<tt class="function">EXT:WEAK-AND-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-and-mapping</tt></em>) <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>replaces the value stored in the
   <em class="replaceable"><tt>weak-and-mapping</tt></em>. It has no effect when
   some key has already been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p><a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><tt class="classname">EXT:WEAK-AND-MAPPING</tt></a>s are useful to model properties of sets of
 objects that become worthless when one of the objects dies.</p><p>A <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><tt class="classname">EXT:WEAK-AND-MAPPING</tt></a> with a single key is semantically equivalent
 to a weak association.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-or-mapping"></a>30.7.7. Weak “<span class="quote">Or</span>” Mappings</h3></div></div></div><p>A weak “<span class="quote">or</span>” mapping is a mapping from a tuple of
 objects called <em class="replaceable"><tt>keys</tt></em> to an object called <em class="replaceable"><tt>value</tt></em>, that keeps all
 keys and the value from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed as long as one of the keys is
 still alive. In other words, each of the keys keeps all others among
 them and the value from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.  When all of them are
 unreferenced, the entire mapping goes away.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">Or</span>” Mapping API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-OR-MAPPING</tt>
   <em class="replaceable"><tt>keys</tt></em> <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd> creates a <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><tt class="classname">EXT:WEAK-OR-MAPPINGINTER</tt></a> between the
   <em class="replaceable"><tt>keys</tt></em> objects in the given list and the given
   <em class="replaceable"><tt>value</tt></em>. The <em class="replaceable"><tt>keys</tt></em> list must be
   non-empty.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-OR-MAPPING-P</tt>
   <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><tt class="classname">EXT:WEAK-OR-MAPPINGINTER</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-OR-MAPPING-PAIR</tt>
   <em class="replaceable"><tt>weak-or-mapping</tt></em>)</tt></dt><dd>returns three values: the list of keys, the value,
   and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, if the keys have not yet been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   The returned keys list must not be destructively modified.
</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-OR-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-or-mapping</tt></em>)</tt></dt><dd>returns the value, if the keys have not yet been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
   else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:WEAK-OR-MAPPING-VALUE</tt>
   <em class="replaceable"><tt>weak-or-mapping</tt></em>) <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>replaces the value stored in the
   <em class="replaceable"><tt>weak-or-mapping</tt></em>. It has no effect when the
   keys have already been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p><a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><tt class="classname">EXT:WEAK-OR-MAPPINGINTER</tt></a>s are useful to model properties of sets of
 objects that do not become worthless when one of the objects dies.</p><p>A <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><tt class="classname">EXT:WEAK-OR-MAPPINGINTER</tt></a> with a single key is semantically equivalent
 to a weak association.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-alist"></a>30.7.8. Weak Association Lists</h3></div></div></div><p>A weak association list is an ordered collection of pairs, each
 pair being built from an object called <em class="replaceable"><tt>key</tt></em> and an object called
 <em class="replaceable"><tt>value</tt></em>.  The lifetime of each pair depends on the type of the weak
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>:
</p><div class="variablelist"><dl><dt><tt class="constant">:KEY</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em> is not <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
    As long as the <em class="replaceable"><tt>key</tt></em> is alive, it prevents the <em class="replaceable"><tt>value</tt></em> from
    being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><tt class="constant">:VALUE</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>value</tt></em> is not <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
   As long as the <em class="replaceable"><tt>value</tt></em> is alive, it prevents the <em class="replaceable"><tt>key</tt></em> from
   being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><tt class="constant">:EITHER</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em>
   <strong>and</strong> the <em class="replaceable"><tt>value</tt></em> are alive.
 </dd><dt><tt class="constant">:BOTH</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em>
   <strong>or</strong> the <em class="replaceable"><tt>value</tt></em> are alive.  As
   long as the <em class="replaceable"><tt>key</tt></em> is alive, it prevents the <em class="replaceable"><tt>value</tt></em> from being
   <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and as long as the <em class="replaceable"><tt>value</tt></em> is alive, it prevents the
   <em class="replaceable"><tt>key</tt></em> from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p>
In other words, each pair is:
</p><div class="variablelist"><dl><dt><tt class="constant">:KEY</tt></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a> from the <em class="replaceable"><tt>key</tt></em> to the <em class="replaceable"><tt>value</tt></em>,
 </dd><dt><tt class="constant">:VALUE</tt></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a> from the <em class="replaceable"><tt>value</tt></em> to the <em class="replaceable"><tt>key</tt></em>,
 </dd><dt><tt class="constant">:EITHER</tt></dt><dd>a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a> of the <em class="replaceable"><tt>key</tt></em> and the <em class="replaceable"><tt>value</tt></em>,
 </dd><dt><tt class="constant">:BOTH</tt></dt><dd>a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a> of the <em class="replaceable"><tt>key</tt></em> and the <em class="replaceable"><tt>value</tt></em>.
 </dd></dl></div><div class="variablelist"><p class="title"><b>Weak Association List API</b></p><dl><dt><tt class="code">(<tt class="function">EXT:MAKE-WEAK-ALIST</tt>
   :type :initial-contents)</tt></dt><dd>creates a <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><tt class="classname">EXT:WEAK-ALIST</tt></a>. The <em class="replaceable"><tt>type</tt></em> argument
   must be one of the four aforementioned types; the default is <tt class="constant">:KEY</tt>.
   The <em class="replaceable"><tt>initial-contents</tt></em> argument must be an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-P</tt> <em class="replaceable"><tt>object</tt></em>)</tt></dt><dd>returns true if the <em class="replaceable"><tt>object</tt></em> is of type
   <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><tt class="classname">EXT:WEAK-ALIST</tt></a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-TYPE</tt>
   <em class="replaceable"><tt>weak-alist</tt></em>)</tt></dt><dd>returns the type of the
   <em class="replaceable"><tt>weak-alist</tt></em>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-CONTENTS</tt>
   <em class="replaceable"><tt>weak-alist</tt></em>)</tt></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> that corresponds to the current
   contents of the <em class="replaceable"><tt>weak-alist</tt></em>.
</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:WEAK-ALIST-CONTENTS</tt>
   <em class="replaceable"><tt>weak-alist</tt></em>)
   <em class="replaceable"><tt>contents</tt></em>)</tt></dt><dd>replaces the contents of a
   <em class="replaceable"><tt>weak-alist</tt></em>. The
   <em class="replaceable"><tt>contents</tt></em> argument must be an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-ASSOC</tt> <em class="replaceable"><tt>item</tt></em>
   <em class="replaceable"><tt>weak-alist</tt></em>
   [:test] [:test-not] [:key])</tt></dt><dd>is equivalent to
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_assoccm_a_assoc-if-not.html" target="_top"><tt class="function">ASSOC</tt></a> <em class="replaceable"><tt>item</tt></em> (<tt class="function">EXT:WEAK-ALIST-CONTENTS</tt>
    <em class="replaceable"><tt>weak-alist</tt></em>)
    [:test] [:test-not] [:key])</tt>.
</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-RASSOC</tt> <em class="replaceable"><tt>item</tt></em>
   <em class="replaceable"><tt>weak-alist</tt></em>
   [:test] [:test-not] [:key])</tt></dt><dd>is equivalent to
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_rassoccm__assoc-if-not.html" target="_top"><tt class="function">RASSOC</tt></a> <em class="replaceable"><tt>item</tt></em> (<tt class="function">EXT:WEAK-ALIST-CONTENTS</tt>
    <em class="replaceable"><tt>weak-alist</tt></em>)
    [:test] [:test-not] [:key])</tt>.
</dd><dt><tt class="code">(<tt class="function">EXT:WEAK-ALIST-VALUE</tt> <em class="replaceable"><tt>item</tt></em>
   <em class="replaceable"><tt>weak-alist</tt></em> [:test] [:test-not])</tt></dt><dd>is equivalent to
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> (<tt class="function">EXT:WEAK-LIST-ASSOC</tt>
    <em class="replaceable"><tt>item</tt></em> <em class="replaceable"><tt>weak-alist</tt></em>
    [:test] [:test-not]))</tt>.
</dd><dt><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:WEAK-ALIST-VALUE</tt>
   <em class="replaceable"><tt>item</tt></em> <em class="replaceable"><tt>weak-alist</tt></em> [:test] [:test-not])
   <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd>replaces the value stored for <em class="replaceable"><tt>item</tt></em> in
   a <em class="replaceable"><tt>weak-alist</tt></em>.  When a pair with the given
   <em class="replaceable"><tt>item</tt></em> as key does not exist or has already been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, a new pair
   is added to the <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd></dl></div><p>Weak associations lists are useful to supplement objects with
 additional information that is stored outside of the object, when the
 number of such objects is known to be small.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-ht"></a>30.7.9. Weak Hash Tables</h3></div></div></div><p>A weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> is an unordered collection of pairs, each
 pair being built from an object called <em class="replaceable"><tt>key</tt></em> and an object called
 <em class="replaceable"><tt>value</tt></em>. There can be only one pair with a given <em class="replaceable"><tt>key</tt></em> in a weak
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>. The lifetime of each pair depends on the type of the
 weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>
</p><div class="variablelist"><dl><dt><tt class="constant">:KEY</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em> is not <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
    As long as the <em class="replaceable"><tt>key</tt></em> is alive, it prevents the <em class="replaceable"><tt>value</tt></em> from
    being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><tt class="constant">:VALUE</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>value</tt></em> is not <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
     As long as the <em class="replaceable"><tt>value</tt></em> is alive, it prevents the <em class="replaceable"><tt>key</tt></em> from
     being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><tt class="constant">:EITHER</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em> and the
     <em class="replaceable"><tt>value</tt></em> are alive.</dd><dt><tt class="constant">:BOTH</tt></dt><dd>The pair exists as long as the <em class="replaceable"><tt>key</tt></em> or the
     <em class="replaceable"><tt>value</tt></em> are alive.  As long as the <em class="replaceable"><tt>key</tt></em> is alive, it prevents
     the <em class="replaceable"><tt>key</tt></em> from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and as long as the <em class="replaceable"><tt>value</tt></em> is
     alive, it prevents the <em class="replaceable"><tt>key</tt></em> from being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
  </dd></dl></div><p>
In other words, each pair is:
</p><div class="variablelist"><dl><dt><tt class="constant">:KEY</tt></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a> from the <em class="replaceable"><tt>key</tt></em> to the <em class="replaceable"><tt>value</tt></em>,
 </dd><dt><tt class="constant">:VALUE</tt></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><tt class="classname">EXT:WEAK-MAPPING</tt></a> from the <em class="replaceable"><tt>value</tt></em> to the <em class="replaceable"><tt>key</tt></em>,
 </dd><dt><tt class="constant">:EITHER</tt></dt><dd>a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><tt class="classname">EXT:WEAK-AND-RELATION</tt></a> of the <em class="replaceable"><tt>key</tt></em> and the <em class="replaceable"><tt>value</tt></em>,
 </dd><dt><tt class="constant">:BOTH</tt></dt><dd>a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><tt class="classname">EXT:WEAK-OR-RELATION</tt></a> of the <em class="replaceable"><tt>key</tt></em> and the <em class="replaceable"><tt>value</tt></em>.
</dd></dl></div><p>See also <a href="impnotes.html#make-hash" class="olink">Section 18.1.1, “Function MAKE-HASH-TABLE”</a>.</p><p>Weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s are useful to supplement objects with
 additional information that is stored outside of the object. This data
 structure scales up without performance degradation when the number of
 pairs is big.</p><p>Weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s are also useful to implement canonicalization
 tables.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="final"></a>30.8. Finalization</h2></div></div></div><p>Calling <tt class="code">(<a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>function</tt></em>)</tt>
 has the effect that when the specified object is being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>function</tt></em> <em class="replaceable"><tt>object</tt></em>)</tt> will be executed.</p><p>Calling <tt class="code">(<a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>function</tt></em>
  <em class="replaceable"><tt>guardian</tt></em>)</tt>
 has a similar effect, but only as long as the
 <em class="replaceable"><tt>guardian</tt></em> has not been <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed:
 when <em class="replaceable"><tt>object</tt></em> is being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <em class="replaceable"><tt>function</tt></em>
 <em class="replaceable"><tt>object</tt></em> <em class="replaceable"><tt>guardian</tt></em>)</tt> will be executed.
 If the <em class="replaceable"><tt>guardian</tt></em> is <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed before <em class="replaceable"><tt>object</tt></em>
 is, nothing happens.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The time when “<span class="quote">the <em class="replaceable"><tt>object</tt></em> is being <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed</span>” is
  not defined deterministically.  (Actually, it might possibly never
  occur.)  It denotes a moment at which no references to <em class="replaceable"><tt>object</tt></em>
  exist from other Lisp objects.  When the <em class="replaceable"><tt>function</tt></em> is called,
  <em class="replaceable"><tt>object</tt></em> (and possibly <em class="replaceable"><tt>guardian</tt></em>) enter
  the “<span class="quote">arena of live Lisp objects</span>” again.</p></div><p>No finalization request will be executed more than once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="prompt"></a>30.9. The Prompt</h2></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> prompt consists of 3 mandatory parts: “<span class="quote">start</span>”,
 “<span class="quote">body</span>”, and “<span class="quote">finish</span>”; and 2 optional parts:
 “<span class="quote">break</span>”, which appears only during
 <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging</a> (after <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a>),
 and “<span class="quote">step</span>”, which appears only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>ping.
 Each part is controlled by a custom variable, which can be either a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of no arguments returning a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
 (if it is something else - or if the return value was not a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
 - it is printed with <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>).  In the order of invocation:
 </p><div class="variablelist"><dl><dt><a id="prompt-start"></a><a href="#prompt-start"><tt class="varname">CUSTOM:*PROMPT-START*</tt></a></dt><dd>Defaults to an empty string.
  </dd><dt><a id="prompt-step"></a><a href="#prompt-step"><tt class="varname">CUSTOM:*PROMPT-STEP*</tt></a></dt><dd>Used only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>ping.
     Defaults to <tt class="prompt">"Step n "</tt>,
     where <em class="replaceable"><tt>n</tt></em> is the stepping level as returned by <a href="#step-level"><tt class="function">EXT:STEP-LEVEL</tt></a>.
  </dd><dt><a id="prompt-break"></a><a href="#prompt-break"><tt class="varname">CUSTOM:*PROMPT-BREAK*</tt></a></dt><dd>Used only inside break loop (during debugging).
     Defaults to <tt class="prompt">"Break n "</tt>,
     where <em class="replaceable"><tt>n</tt></em> is the break level as returned by <a href="#break-level"><tt class="function">EXT:BREAK-LEVEL</tt></a>.
  </dd><dt><a id="prompt-body"></a><a href="#prompt-body"><tt class="varname">CUSTOM:*PROMPT-BODY*</tt></a></dt><dd>Defaults to <tt class="prompt">"package[n]"</tt>
     where <em class="replaceable"><tt>package</tt></em> is the shortest (nick)name (as returned by
     <a href="#package-short-name"><tt class="function">EXT:PACKAGE-SHORT-NAME</tt></a>) of the current package <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>
     if it is <strong>not</strong> the same as it was in the beginning
     (determined by <a href="#prompt-new-package"><tt class="function">EXT:PROMPT-NEW-PACKAGE</tt></a>)
     or if it does not contain symbol <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>,
     (it is assumed that in the latter case you would want to keep in
     mind that your current package is something weird);
     and <em class="replaceable"><tt>n</tt></em> is the index of the current prompt, kept in <a href="#command-index"><tt class="varname">EXT:*COMMAND-INDEX*</tt></a>;
  </dd><dt><a id="prompt-finish"></a><a href="#prompt-finish"><tt class="varname">CUSTOM:*PROMPT-FINISH*</tt></a></dt><dd>Defaults to <tt class="prompt">&gt; </tt>.
</dd></dl></div><p>To facilitate your own custom prompt creation, the following
 functions and variables are available:
 </p><div class="variablelist"><dl><dt><a id="break-level"></a><a href="#break-level"><tt class="function">EXT:BREAK-LEVEL</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> level.
  </dd><dt><a id="step-level"></a><a href="#step-level"><tt class="function">EXT:STEP-LEVEL</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a> level.
  </dd><dt><a id="prompt-new-package"></a><a href="#prompt-new-package"><tt class="function">EXT:PROMPT-NEW-PACKAGE</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
     if the current package is the same as it was initially.
  </dd><dt><a id="package-short-name"></a><a href="#package-short-name"><tt class="function">EXT:PACKAGE-SHORT-NAME</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> takes one argument, a
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>, and returns its shortest name or nickname.
  </dd><dt><a id="command-index"></a><a href="#command-index"><tt class="varname">EXT:*COMMAND-INDEX*</tt></a></dt><dd>contains the current prompt number;
     it is your responsibility to increment it
     (this variable is bound to 0 before saving the <a href="impnotes.html#image" class="olink">memory image</a>).
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ansi"></a>30.10. Maximum ANSI CL compliance</h2></div></div></div><p>Some [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] features are turned off by default for backwards
 compatibility.
 They can be switched on, all at once, by setting the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, or they can be switched on individually.
 Setting <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> implies the following:</p><div class="orderedlist"><ol type="1"><li>Setting <a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#spacecharprint" title="22.5.5.&#xA0;Characters"><tt class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><tt class="varname">CUSTOM:*LOOP-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#pr-empty-arr-ansi"><tt class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#pr-unreadable-ansi"><tt class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you run <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with the <a href="clisp.html#opt-ansi" class="olink"><tt class="option">-ansi</tt></a> switch or set
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> and then save <a href="impnotes.html#image" class="olink">memory image</a>,
 then all subsequent invocations of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with this image
 will be as if with <a href="clisp.html#opt-ansi" class="olink"><tt class="option">-ansi</tt></a>
 (regardless whether you actually supply the <a href="clisp.html#opt-ansi" class="olink"><tt class="option">-ansi</tt></a> switch).
 You can always set the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, or invoke
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with the <a href="clisp.html#opt-traditional" class="olink"><tt class="option">-traditional</tt></a> switch, reversing the above
 settings, i.e.,</p></div><div class="orderedlist"><ol type="1"><li>Setting <a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#spacecharprint" title="22.5.5.&#xA0;Characters"><tt class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><tt class="varname">CUSTOM:*LOOP-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#pr-empty-arr-ansi"><tt class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#pr-unreadable-ansi"><tt class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="macros3"></a>30.11. Additional Fancy Macros</h2></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> comes with some extension macros, mostly defined in the
 file <tt class="filename">macros3.lisp</tt> and loaded from the file
 <tt class="filename">init.lisp</tt> during <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html" target="_top"><span><strong class="command">make</strong></span></a>:</p><p><a id="ethe"></a><b>Macro <a href="#ethe"><tt class="function">EXT:ETHE</tt></a>. </b><tt class="code">(<a href="#ethe"><tt class="function">EXT:ETHE</tt></a> <em class="replaceable"><tt>value-type</tt></em> <em class="replaceable"><tt>form</tt></em>)</tt>
 enforces a type check in both interpreted and compiled code.
 </p><p><a id="letf"></a><b>Macros <a href="#letf"><tt class="function">EXT:LETF</tt></a> &amp; <a href="#letf"><tt class="function">EXT:LETF*</tt></a>. </b>These macros are similar to <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a>, respectively,
 except that they can bind <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s, even <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s with <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
 Example:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (letf (((values a b) form)) ...)
</pre></td></tr></table><p>

is equivalent to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (multiple-value-bind (a b) form ...)
</pre></td></tr></table><p>

while

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(letf (((first l) 7)) ...)
</pre></td></tr></table><p>

is approximately equivalent to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a> ((#:g1 l) (#:g2 (first #:g1)))
   (<a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (first #:g1) 7) ...)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (first #:g1) #:g2)))
</pre></td></tr></table><p>
</p><p><a id="with-collect"></a><b>Macro <tt class="function">EXT:WITH-COLLECT</tt>. </b>Similar to the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a>'s
 <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1-3.html" target="_top"><tt class="constant">collect</tt></a>
 construct, except that it is looks more "Lispy" and can appear
 arbitrarily deep.  It defines local macros (with <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a>) which
 collect objects given to it into lists, which are then returned as
 <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.  E.g.,

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (ext:with-collect (c0 c1)
   (dotimes (i 10) (if (oddp i) (c0 i) (c1 i))))
</pre></td></tr></table><p>

returns two lists <tt class="data">(1 3 5 7 9)</tt> and
<tt class="data">(0 2 4 6 8)</tt> as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
</p><p><a id="with-gensyms"></a><b>Macro <tt class="function">EXT:WITH-GENSYMS</tt>. </b>Similar to its namesake from
 <a href="http://www.paulgraham.com/" target="_top">Paul Graham</a>'s book
 <a href="http://www.paulgraham.com/onlisp.html" target="_top">“<span class="quote">On
  Lisp</span>”</a>, this macro is useful for writing other macros:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (with-gensyms ("FOO-" bar baz zot) ...)
</pre></td></tr></table><p>
expands to
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (let ((bar (gensym "FOO-BAR-"))
       (baz (gensym "FOO-BAZ-"))
       (zot (gensym "FOO-ZOT-")))
   ...)
</pre></td></tr></table><p>
</p><p><a id="remove-plist"></a><b>Function <tt class="function">EXT:REMOVE-PLIST</tt>. </b>Similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_remf.html" target="_top"><tt class="function">REMF</tt></a>, this function removes some
 properties from a property list.  It is non-destructve and thus can be
 used on <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> arguments to remove some keyword parameters, e.g.,
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (defmacro with-foo ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> foo1 foo2) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)
   `(... ,foo1 ... ,foo2 ... ,@body))
 (defmacro with-foo-bar ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> opts <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> bar1 bar2
                          <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)
   `(with-foo (,@(remove-plist opts :bar1 :bar2)
      ... ,bar1 ... ,bar2 ... ,@body)))
 (defun foo-bar ()
   (with-foo-bar (:bar1 1 :foo2 2) ...))
</pre></td></tr></table><p>
here <tt class="function">WITH-FOO</tt> does not receive the
<tt class="literal">:BAR1 1</tt> argument from <tt class="function">FOO-BAR</tt>.
</p><p><a id="html-http-output"></a><b>Macros <tt class="function">EXT:WITH-HTML-OUTPUT</tt> and
                   <tt class="function">EXT:WITH-HTTP-OUTPUT</tt>. </b>Defined in <tt class="filename">inspect.lisp</tt>, these macros are useful
 for the rudimentary <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> server defined there.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="customize"></a>30.12. Customizing <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> behavior.</h2></div></div></div><p>The user-customizable variables are located in the package
 <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a> and thus can be listed using
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> "" "CUSTOM")</tt>:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="impnotes.html#ansi" class="olink"><tt class="varname">CUSTOM:*ANSI*</tt></a></td><td><tt class="varname">CUSTOM:*APPLYHOOK*</tt></td></tr><tr><td><a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a></td><td><a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*BREAK-ON-WARNINGS*</tt></td><td><a href="#browser"><tt class="constant">CUSTOM:*BROWSER*</tt></a></td></tr><tr><td><a href="#browser"><tt class="constant">CUSTOM:*BROWSERS*</tt></a></td><td><tt class="varname">CUSTOM:*CLHS-ROOT-DEFAULT*</tt></td></tr><tr><td><a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a></td><td><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><tt class="varname">CUSTOM:*COMPILE-WARNINGS*</tt></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*COMPILED-FILE-TYPES*</tt></a></td><td><a href="impnotes.html#language" class="olink"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a></td></tr><tr><td><a href="impnotes.html#def-file-enc" class="olink"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a></td><td><a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a></td></tr><tr><td><a href="#default-tz"><tt class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</tt></a></td><td><tt class="varname">CUSTOM:*DEFTYPE-DEPTH-LIMIT*</tt></td></tr><tr><td><a href="#defun-accept-spelalist"><tt class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</tt></a></td><td><a href="#device-prefix"><tt class="varname">CUSTOM:*DEVICE-PREFIX*</tt></a></td></tr><tr><td><a href="#ed" title="25.2.8.&#xA0;Function ED"><tt class="varname">CUSTOM:*EDITOR*</tt></a></td><td><tt class="varname">CUSTOM:*ERROR-HANDLER*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*EVALHOOK*</tt></td><td><a href="impnotes.html#fill-stream" class="olink"><tt class="varname">CUSTOM::*FILL-INDENT-SEXP*</tt></a></td></tr><tr><td><a href="#fini-hooks"><tt class="varname">CUSTOM:*FINI-HOOKS*</tt></a></td><td><a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a></td></tr><tr><td><a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><tt class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</tt></a></td><td><a href="impnotes.html#foreign-enc" class="olink"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a></td></tr><tr><td><a href="#init-hooks"><tt class="varname">CUSTOM:*INIT-HOOKS*</tt></a></td><td><tt class="varname">CUSTOM:*INSPECT-BROWSER*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-FRONTEND*</tt></td><td><tt class="varname">CUSTOM:*INSPECT-LENGTH*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LENGTH*</tt></td><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LEVEL*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LINES*</tt></td><td><tt class="varname">CUSTOM:*LIB-DIRECTORY*</tt></td></tr><tr><td><a href="impnotes.html#loadfile" class="olink"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a></td></tr><tr><td><a href="impnotes.html#load-lpt" class="olink"><tt class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</tt></a></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a></td></tr><tr><td><a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a></td><td><a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><tt class="varname">CUSTOM:*LOOP-ANSI*</tt></a></td></tr><tr><td><a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a></td><td><a href="impnotes.html#misc-enc" class="olink"><tt class="varname">CUSTOM:*MISC-ENCODING*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*PACKAGE-TASKS-TREAT-SPECIALLY*</tt></td><td><a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a></td></tr><tr><td><a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a></td><td><a href="impnotes.html#path-enc" class="olink"><tt class="varname">CUSTOM:*PATHNAME-ENCODING*</tt></a></td></tr><tr><td><a href="#phasecont"><tt class="varname">CUSTOM:*PHASE-ANSI*</tt></a></td><td><a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a></td></tr><tr><td><a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a></td><td><a href="#pr-empty-arr-ansi"><tt class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</tt></a></td></tr><tr><td><a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a></td><td><a href="#pathprint" title="22.5.4.&#xA0;Pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*PRINT-PRETTY-FILL*</tt></td><td><a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a></td></tr><tr><td><a href="#spacecharprint" title="22.5.5.&#xA0;Characters"><tt class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</tt></a></td><td><a href="#pr-unreadable-ansi"><tt class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</tt></a></td></tr><tr><td><a href="#prompt-body"><tt class="varname">CUSTOM:*PROMPT-BODY*</tt></a></td><td><a href="#prompt-break"><tt class="varname">CUSTOM:*PROMPT-BREAK*</tt></a></td></tr><tr><td><a href="#prompt-finish"><tt class="varname">CUSTOM:*PROMPT-FINISH*</tt></a></td><td><a href="#prompt-start"><tt class="varname">CUSTOM:*PROMPT-START*</tt></a></td></tr><tr><td><a href="#prompt-step"><tt class="varname">CUSTOM:*PROMPT-STEP*</tt></a></td><td><a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*SOURCE-FILE-TYPES*</tt></a></td><td><a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a></td></tr><tr><td><a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a></td><td><a href="impnotes.html#term-enc" class="olink"><tt class="varname">CUSTOM:*TERMINAL-ENCODING*</tt></a></td></tr><tr><td><a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a></td><td><a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><tt class="varname">CUSTOM:*USER-COMMANDS*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*USER-MAIL-ADDRESS*</tt></td><td><a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*WITH-HTML-OUTPUT-DOCTYPE*</tt></td><td> </td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Some of these variables are
  platform-specific.</p></div><p>You should set these variables (and do whatever other
 customization you see fit) in the file <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> in the build
 directory before building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Alternatively, after building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, or if you are using a binary
 distribution of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, you can modify <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>, compile and load
 it, and then save the <a href="impnotes.html#image" class="olink">memory image</a>.
 Finally, you can create an <a href="clisp.html#opt-norc" class="olink">RC file</a> which is loaded whenever <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 is started.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="code-walk"></a>30.13. Code Walker</h2></div></div></div><p>You can use <tt class="function">EXT:EXPAND-FORM</tt> to expand all
 the macros, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s, etc, in a single form:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (expand-form '(macrolet ((bar (x) `(print ,x)))
                 (macrolet ((baz (x) `(bar ,x)))
                   (symbol-macrolet ((z 3))
                     (baz z)))))
</pre></td></tr></table><p>
returns two values: <tt class="code">(locally (print 3))</tt> (the expansion) and
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> (an indicator that some expansion has actually been done).</p><p>This is sometimes called a “<span class="quote">code walker</span>”,
 except that the code walker would probably leave the <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><tt class="function">SYMBOL-MACROLET</tt></a> forms intact and just do the expansion.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-platform"></a>Chapter 31. Platform Specific Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization.</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization.</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.8. Modules included in the source distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">31.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.2. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.3. The choice of the <span><strong class="command">C</strong></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></dd><dt><span class="section"><a href="#app-dev">31.7. Application delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#shell">31.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">31.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">31.9. Operating System Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">31.10. Other</a></span></dt></dl></div>
<!--#if defined(SCREEN)--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="screen"></a>31.1. Random Screen Access</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(<tt class="function">SCREEN:MAKE-WINDOW</tt>)</tt></dt><dd>returns a <span class="type">WINDOW-STREAM</span>.
    As long as this stream is open, the terminal is in cbreak/noecho mode.
    <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> should not be used for input or output during this
    time.  (Use <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> and <a href="impnotes.html#terminal" class="olink"><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a> instead.)
  </dd><dt><tt class="code">(<tt class="function">SCREEN:WITH-WINDOW</tt> .
    <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd>binds
    <strong class="first"><em class="firstterm"><a href="#screen" title="31.1.&#xA0;Random Screen Access"><tt class="varname">SCREEN:*WINDOW*</tt></a><a id="scr-win" class="indexterm"></a></em></strong>
    to a <span class="type">WINDOW-STREAM</span> and executes <em class="replaceable"><tt>body</tt></em>.
    The stream is guaranteed to be closed when the body is left.
    During its execution, <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> should not be used, as above.
  </dd><dt><tt class="code">(<tt class="function">SCREEN:WINDOW-SIZE</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>returns the window's size, as two values:
   height (= y<sub>max</sub>+1) and width (= x<sub>max</sub>+1).
  </dd><dt><tt class="code">(<tt class="function">SCREEN:WINDOW-CURSOR-POSITION</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>returns the position of the cursor in the window,
   as two values: line (≥0, ≤y<sub>max</sub>, 0 means top), column
   (≥0, ≤x<sub>max</sub>, 0 means left margin).
 </dd><dt><tt class="code">(<tt class="function">SCREEN:SET-WINDOW-CURSOR-POSITION</tt>
    <em class="replaceable"><tt>window-stream</tt></em> <em class="replaceable"><tt>line</tt></em>
      <em class="replaceable"><tt>column</tt></em>)</tt></dt><dd>sets the position of the cursor in the window.
  </dd><dt><tt class="code">(<tt class="function">SCREEN:CLEAR-WINDOW</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>clears the window's contents and puts the cursor
    in the upper left corner.</dd><dt><tt class="code">(<tt class="function">SCREEN:CLEAR-WINDOW-TO-EOT</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>clears the window's contents from the cursor
    position to the end of window.</dd><dt><tt class="code">(<tt class="function">SCREEN:CLEAR-WINDOW-TO-EOL</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>clears the window's contents from the cursor
    position to the end of line.</dd><dt><tt class="code">(<tt class="function">SCREEN:DELETE-WINDOW-LINE</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>removes the cursor's line, moves the lines below
    it up by one line and clears the window's last line.
 </dd><dt><tt class="code">(<tt class="function">SCREEN:INSERT-WINDOW-LINE</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>inserts a line at the cursor's line, moving the
    lines below it down by one line.</dd><dt><tt class="code">(<tt class="function">SCREEN:HIGHLIGHT-ON</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>switches highlighted output on.
 </dd><dt><tt class="code">(<tt class="function">SCREEN:HIGHLIGHT-OFF</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>switches highlighted output off.
 </dd><dt><tt class="code">(<tt class="function">SCREEN:WINDOW-CURSOR-ON</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>makes the cursor visible, a cursor block in most
    implementations.</dd><dt><tt class="code">(<tt class="function">SCREEN:WINDOW-CURSOR-OFF</tt>
    <em class="replaceable"><tt>window-stream</tt></em>)</tt></dt><dd>makes the cursor invisible, in implementations
    where this is possible.</dd></dl></div></div>
<!--#endif-->
<!--#if defined(UNIX) || defined(WIN32_NATIVE)--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modules"></a>31.2. External Modules</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization.</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization.</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.8. Modules included in the source distribution.</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-win32"></a>Modules on <strong>Win32</strong>.</h3><p>Everything described in the section will work verbatim on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
  when using <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> or <a href="http://www.mingw.org/" target="_top"><strong>MinGW</strong></a>, <span class="emphasis"><em>except</em></span> for one
  thing - you will need to replace the <tt class="filename">run</tt>
  extension in <tt class="filename">lisp.run</tt> with the <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> executable
  extension <tt class="filename">exe</tt>.</p><p>For historical reasons, all examples appear to assume <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and
  use the <tt class="filename">run</tt> file type (“<span class="quote">extension</span>”)
  for the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> run-time.
  This does <strong>not</strong> mean that they will not work on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-overview"></a>31.2.1. Overview</h3></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has a facility for adding external modules (written in
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, for example).  It is invoked through
 <span><strong class="command">clisp-link</strong></span>.</p><p>A <strong class="first"><em class="firstterm">module<a id="module" class="indexterm"></a></em></strong> is a
 piece of external code which defines extra Lisp objects, symbols and
 functions.  A module <strong class="first"><em class="firstterm">name</em></strong> must consist of the
 characters <tt class="filename">A</tt>-<tt class="filename">Z</tt>,
 <tt class="filename">a</tt>-<tt class="filename">z</tt>, <tt class="filename">_</tt>,
 <tt class="filename">0</tt>-<tt class="filename">9</tt>.
 The module name “<span class="quote">clisp</span>” is reserved.
 Normally a module name is derived from the corresponding file name.</p><p><span><strong class="command">clisp-link</strong></span> needs a directory containing:
</p><div class="itemizedlist"><ul type="disc"><li><tt class="filename">#P"modules.d"</tt></li><li><tt class="filename">#P"modules.c"</tt></li><li><a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><tt class="filename">#P"clisp.h"</tt></a></li></ul></div><p>
<span><strong class="command">clisp-link</strong></span> expects to find these files in a
subdirectory <tt class="filename">linkkit/</tt> of the current directory.
This can be overridden by the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">CLISP_LINKKIT</tt>.</p><p><span><strong class="command">clisp-link</strong></span> operates on <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>s and
 on <a href="impnotes.html#modset" class="olink">module set</a>s.</p><p><a id="linkset"></a><b><a href="impnotes.html#linkset" class="olink">linking set</a>. </b>A <strong class="first"><em class="firstterm"><a href="impnotes.html#linkset" class="olink">linking set</a><a id="linkseti" class="indexterm"></a></em></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><tt class="filename">makevars</tt></dt><dd><p>some <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a> commands, setting the variables
</p><div class="variablelist"><dl><dt><tt class="envar">CC</tt></dt><dd>the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler
 </dd><dt><tt class="envar">CPPFLAGS</tt></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when preprocessing
    or compiling</dd><dt><tt class="envar">CFLAGS</tt></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when compiling or
    linking</dd><dt><tt class="envar">CLFLAGS</tt></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when linking
 </dd><dt><tt class="envar">LIBS</tt></dt><dd>libraries to use when linking
 </dd><dt><tt class="envar">X_LIBS</tt></dt><dd>additional <a href="http://www.x.org/" target="_top">X Window System</a> libraries to use
 </dd><dt><tt class="envar">RANLIB</tt></dt><dd>the ranlib command
 </dd><dt><tt class="envar">FILES</tt></dt><dd>the list of files needed when linking
 </dd></dl></div></dd><dt><tt class="filename">modules.h</tt></dt><dd>the list of modules contained in this <a href="impnotes.html#linkset" class="olink">linking set</a>
</dd><dt><tt class="filename">modules.o</tt></dt><dd>the compiled list of modules contained in this <a href="impnotes.html#linkset" class="olink">linking set</a>
</dd><dt>all the <tt class="filename">FILES</tt></dt><dd>listed in <tt class="filename">makevars</tt>
</dd><dt><tt class="filename">lisp.run</tt></dt><dd>the executable</dd><dt><a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a></dt><dd>the <a href="impnotes.html#image" class="olink">memory image</a></dd></dl></div><p>To run a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> contained in some <a href="impnotes.html#linkset" class="olink">linking set</a> <em class="replaceable"><tt>directory</tt></em>, call
 <span><strong class="command"><em class="replaceable"><tt>directory</tt></em>/lisp.run -M <em class="replaceable"><tt>directory</tt></em>/lispinit.mem</strong></span>
 or <span><strong class="command">clisp <tt class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></tt> <em class="replaceable"><tt>directory</tt></em></strong></span>.</p><p><a id="modset"></a><b><a href="impnotes.html#modset" class="olink">module set</a>. </b>A <strong class="first"><em class="firstterm"><a href="impnotes.html#modset" class="olink">module set</a><a id="modseti" class="indexterm"></a></em></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a></dt><dd>some <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a> commands, which prepare the directory
  before linking, and set the variables <tt class="envar">NEW_FILES</tt>,
  <tt class="envar">NEW_LIBS</tt>, <tt class="envar">NEW_MODULES</tt>, <a href="#mod-load"><tt class="envar">TO_LOAD</tt></a>
  and optionally <a href="#mod-preload"><tt class="envar">TO_PRELOAD</tt></a></dd><dt>and any other files</dt><dd>needed by <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>
 </dd></dl></div><p>In <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a> the <a href="impnotes.html#modset" class="olink">module set</a> directory
 is referred to as <tt class="varname">$modulename/</tt>.</p><div class="variablelist"><dl><dt><tt class="envar">NEW_FILES</tt></dt><dd>the space-separated list of files that
  belong to the <a href="impnotes.html#modset" class="olink">module set</a> and will belong to every new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><tt class="envar">NEW_LIBS</tt></dt><dd>the space-separated list of files or
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler switches that need to be passed to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
  compiler when linking the <tt class="filename">lisp.run</tt> belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><tt class="envar">NEW_MODULES</tt></dt><dd>the space-separated list of the module names
  belonging to the <a href="impnotes.html#modset" class="olink">module set</a>.  Normally, every <tt class="filename">#P".c"</tt> file in the
  <a href="impnotes.html#modset" class="olink">module set</a> defines a module of its own.  The module name is derived
  from the file name.</dd><dt><a id="mod-load"></a><a href="#mod-load"><tt class="envar">TO_LOAD</tt></a></dt><dd>the space-separated list of Lisp files to load
  before building the <a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><a id="mod-preload"></a><a href="#mod-preload"><tt class="envar">TO_PRELOAD</tt></a> (optional)</dt><dd><p>the space-separated list of Lisp files to load
  into an intermediate <a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> file, before building the <a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a>
  belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
  This variable is usually used to <a href="#make-pack" title="11.4.2.&#xA0;Function MAKE-PACKAGE">create</a>
  (or <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]">unlock</a>) the Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>s which
  must be present when the new <tt class="filename">#P".c"</tt> files are initialized.
  E.g., the <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a> functions must reside in already defined packages;
  see <a href="#ex-call-in" title="Example&#xA0;31.5.&#xA0;Calling Lisp from C">Example 31.5, “Calling Lisp from <span><strong class="command">C</strong></span>”</a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are unlocking a package, you must also
    <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE</tt></a> it from <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a> (see <a href="#image" title="30.2.&#xA0;Saving an Image">Section 30.2, “Saving an Image”</a>)
    here and re-add it to <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a> in one of the <a href="#mod-load"><tt class="envar">TO_LOAD</tt></a>
    files.</p></div></dd></dl></div><p>The command <span><strong class="command">clisp-link create-module-set
 <em class="replaceable"><tt>module-dir</tt></em>
 <em class="replaceable"><tt>file1.c</tt></em> ...</strong></span> creates a <a href="impnotes.html#modset" class="olink">module set</a>
 in <em class="replaceable"><tt>module-dir</tt></em> which refers (via symbolic
 links) to <em class="replaceable"><tt>file1.c</tt></em> etc.  The files are
 expected to be modules of their own.</p><p>The command <span><strong class="command">clisp-link add-module-set
 <em class="replaceable"><tt>module-dir</tt></em>
 <em class="replaceable"><tt>source-dir</tt></em>
 <em class="replaceable"><tt>destination-dir</tt></em></strong></span> combines a
 <a href="impnotes.html#linkset" class="olink">linking set</a> in <em class="replaceable"><tt>source-dir</tt></em> and a module in
 <em class="replaceable"><tt>module-dir</tt></em> to a new <a href="impnotes.html#linkset" class="olink">linking set</a>, in a
 directory <em class="replaceable"><tt>destination-dir</tt></em> which is newly
 created.</p><p>The command <span><strong class="command">clisp-link run <em class="replaceable"><tt>source-dir</tt></em>
 <em class="replaceable"><tt>module-dir</tt></em> ...</strong></span> runs the <a href="impnotes.html#linkset" class="olink">linking set</a>
 in <em class="replaceable"><tt>source-dir</tt></em>, with the module in
 <em class="replaceable"><tt>module-dir</tt></em> loaded.  More than one module can
 be specified.  If <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has been built with the configuration option
 <tt class="option">--with-dynamic-modules</tt>, the loading will be performed
 through <a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES">dynamic loading</a>.
 Otherwise - this is much slower - a temporary <a href="impnotes.html#linkset" class="olink">linking set</a> will be created
 and deleted afterwards.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modinit"></a>31.2.2. Module initialization.</h3></div></div></div><p>Each module has two initialization functions:
</p><div class="variablelist"><dl><dt><tt class="function">module__<em class="replaceable"><tt>name</tt></em>__init_function_1</tt></dt><dd><p>called only <span class="emphasis"><em>once</em></span> when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  discovers while loading a <a href="impnotes.html#image" class="olink">memory image</a> that there is a module present
  in the executable (<tt class="filename">lisp.run</tt>) which was not present at the time the
  image was saved.  It can be used to create Lisp objects,
  e.g. functions or keywords, and is indeed used for that purpose by
  <a href="#modprep" title="31.2.7.1.&#xA0;Modprep">modprep</a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>s must already exist and be unlocked,
   cf. <a href="#mod-preload"><tt class="envar">TO_PRELOAD</tt></a>.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are using <a href="#modprep" title="31.2.7.1.&#xA0;Modprep">modprep</a>
   <span class="emphasis"><em>and</em></span> defining your own “<span class="quote">init-once</span>”
   function, it must call the
   <tt class="function">module__<em class="replaceable"><tt>name</tt></em>__init_function_1__modprep</tt>
   function!</p></div></dd><dt><tt class="function">module__<em class="replaceable"><tt>name</tt></em>__init_function_2</tt></dt><dd>called <span class="emphasis"><em>every time</em></span> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> starts.
  It can be used to bind names to foreign addresses, since the address
  will be different in each invocation of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, and is indeed used
  for that purpose by <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> (e.g., <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>).
  It can also be used to set parameters of the libraries to which the
  module interfaces, e.g., the <a href="#pcre" title="32.6.&#xA0;Perl Compatible Regular Expressions.">pcre</a> module
  sets <tt class="varname">pcre_malloc</tt> and <tt class="varname">pcre_free</tt>.
</dd></dl></div><p>
<em class="replaceable"><tt>name</tt></em> is the <a href="#mod-overview" title="31.2.1.&#xA0;Overview">module name</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modfini"></a>31.2.3. Module finalization.</h3></div></div></div><p>Each module has a finalization function
</p><div class="variablelist"><dl><dt><tt class="function">module__<em class="replaceable"><tt>name</tt></em>__fini_function</tt></dt><dd>called before exiting <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
</dd></dl></div><p>
<em class="replaceable"><tt>name</tt></em> is the <a href="#mod-overview" title="31.2.1.&#xA0;Overview">module name</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modinfo"></a>31.2.4. Function <a href="#modinfo" title="31.2.4.&#xA0;Function EXT:MODULE-INFO"><tt class="function">EXT:MODULE-INFO</tt></a></h3></div></div></div><p>Function <tt class="code">(<a href="#modinfo" title="31.2.4.&#xA0;Function EXT:MODULE-INFO"><tt class="function">EXT:MODULE-INFO</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>name</tt></em>
  <em class="replaceable"><tt>verbose</tt></em>)</tt> allows one to inquire
 about what modules are available in the currently running image.
 When called without arguments, it returns the list of module names,
 starting with “<span class="quote">clisp</span>”.  When <em class="replaceable"><tt>name</tt></em> is supplied and
 names a module, 3 values are returned - <em class="replaceable"><tt>name</tt></em>,
 <em class="replaceable"><tt>subr-count</tt></em>,
 <em class="replaceable"><tt>object-count</tt></em>.
 When <em class="replaceable"><tt>verbose</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the full list of
 module lisp function names written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> (<span class="type">Subr</span>s) and
 the full list of internal lisp objects available in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
 are additionally returned for the total of 5 values.</p><p>When <em class="replaceable"><tt>name</tt></em> is <tt class="constant">:FFI</tt>, returns the list of
 shared libraries opened using <tt class="constant">:LIBRARY</tt>.
 When <em class="replaceable"><tt>verbose</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return the
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> of DLL names and all foreign objects associated with it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-dynload"></a>31.2.5. Function <a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES"><tt class="function">SYS::DYNLOAD-MODULES</tt></a></h3></div><div><h4 class="subtitle">Platform dependent: some <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only, compiled <strong>with</strong>
 compile-time flag <tt class="option">--with-dynamic-modules</tt>.</h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Dynamic loading does not work on all operating systems
(<a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> is required)</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><tt class="option">--with-dynamic-modules</tt> precludes some
efficiency optimizations which are on by default.</p></div><p>Function <tt class="code">(<a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES"><tt class="function">SYS::DYNLOAD-MODULES</tt></a> <em class="replaceable"><tt>filename</tt></em> ({<em class="replaceable"><tt>name</tt></em>}+))</tt>
 loads a shared object file or library containing a number of named
 external <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> modules.  This facility cannot be used to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> and
 access arbitrary shared libraries.</p><p>External modules for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> are those which contain a
 <tt class="literal">module__<em class="replaceable"><tt>name</tt></em>__subr_tab</tt>, among others.
 This serves to register external functions which operate on
 Lisp-level structures with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p>To use <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> with modules, you should add
 <tt class="option">-fPIC</tt> to the module's compilation options.
 Something like <span><strong class="command">cc -shared -o <em class="replaceable"><tt>name</tt></em>.so <em class="replaceable"><tt>name</tt></em>.o</strong></span>
 may be needed to produce the shared object file.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-set-example"></a>31.2.6. Example</h3></div></div></div><p>To link in the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> bindings for the <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> operating
 system, the following steps are needed.  (Step 1 and step 2 need not be
 executed in this order.)</p><div class="procedure"><ol type="1"><li><p class="title"><b>Create a new <a href="impnotes.html#modset" class="olink">module set</a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">$ clisp-link create-module-set linux /<em class="replaceable"><tt>somewhere</tt></em>/bindings/linux.c</pre></td></tr></table></li><li><p class="title"><b>Modify the newly created
  <tt class="filename">linux/<a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a></tt></b></p><ol type="a"><li><p class="title"><b>add <tt class="option">-lm</tt> to the libraries</b></p><p>replace </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">NEW_LIBS="$file_list"</pre></td></tr></table><p>
    with </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">NEW_LIBS="$file_list -lm"</pre></td></tr></table></li><li><p class="title"><b>load <tt class="filename">linux.fas</tt> before saving the
    <a href="impnotes.html#image" class="olink">memory image</a></b></p><p>replace </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">TO_LOAD=''</pre></td></tr></table><p> with
      </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">TO_LOAD='/<em class="replaceable"><tt>somewhere</tt></em>/bindings/linux.fas'</pre></td></tr></table></li></ol></li><li><p class="title"><b>Compile <tt class="filename">linux.lisp</tt>, creating
  <tt class="filename">linux.c</tt></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">$ clisp -c /<em class="replaceable"><tt>somewhere</tt></em>/bindings/linux.lisp</pre></td></tr></table></li><li><p class="title"><b>Create a new <a href="impnotes.html#linkset" class="olink">linking set</a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">$ clisp-link add-module-set linux base base+linux</pre></td></tr></table></li><li><p class="title"><b>Run and try it</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">$ base+linux/lisp.run -M base+linux/lispinit.mem -x '(linux:stat "/tmp")'</pre></td></tr></table></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="module-tools"></a>31.2.7. Module tools</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#modprep">31.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="#clisp-h">31.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="#exporting">31.2.7.3. Exporting</a></span></dt></dl></div><p>There are some tools to facilitate easy module writing.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="modprep"></a>31.2.7.1. Modprep</h4></div></div></div><p>If your module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, you can pre-process your
 sources with <tt class="filename">modprep.lisp</tt> in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 distribution and define lisp functions with the
 <tt class="function">DEFUN</tt> macro:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
DEFUN(MY-PACKAGE:MY-FUNCTION-NAME, arg1 arg2 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> FOO BAR) {
  if (!boundp(STACK_0)) STACK_0 = fixnum(0); /* BAR */
  if (!boundp(STACK_1)) STACK_1 = fixnum(1); /* FOO */
  pushSTACK(`MY-PACKAGE::SOME-SYMBOL`); /* create a symbol in the package */
  pushSTACK(`#(:THIS :IS :A :VECTOR)`); /* some vector, created once */
  pushSTACK(``MY-PACKAGE::MY-FUNCTION-NAME``); /* double `` means FUNCTION */
  VALUES1(listof(7)); /* cons up a new list and clean up the STACK */
}</pre></td></tr></table><p>
Then <tt class="code">(MY-PACKAGE:MY-FUNCTION-NAME 'A 12 :FOO T)</tt> will
 return <tt class="data">(A 12 T 0 MY-PACKAGE::SOME-SYMBOL #(:THIS
  :IS :A :VECTOR) #&lt;ADD-ON-SYSTEM-FUNCTION
  MY-PACKAGE:MY-FUNCTION-NAME&gt;)</tt>
(assuming you <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed <tt class="literal">MY-FUNCTION-NAME</tt> from
 <strong class="package">“<span class="quote">MY-PACKAGE</span>”</strong>).</p><p>Another useful macros are:
 </p><div class="variablelist"><dl><dt><tt class="function">DEFVAR</tt></dt><dd>create a GC-visible private object
  </dd><dt><tt class="function">DEFFLAGSET</tt></dt><dd>define a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function which will remove
     several flag arguments from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> and return the combined flag
     value</dd><dt><tt class="function">DEFCHECKER</tt></dt><dd>define a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function which will check that
     its argument is one of the specified keywords and return the value
     of the appropriate <span><strong class="command">cpp</strong></span> macro
  </dd></dl></div><p>See <tt class="filename">modules/syscalls</tt> and other included
 modules for more examples and file <tt class="filename">modprep.lisp</tt>
 for full documentation.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you manipulate Lisp objects, you need to watch for
  <a href="#gc-safety" title="33.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="clisp-h"></a>31.2.7.2. clisp.h</h4></div></div></div><p>If your module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, you will probably want
 to <tt class="literal">#include "clisp.h"</tt> to access <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects.
 You will certainly need to read <a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><tt class="filename">#P"clisp.h"</tt></a> and the code in
 <a href="#included-modules" title="31.2.8.&#xA0;Modules included in the source distribution.">included modules</a>, but here are
 some important hints that you will need to keep in mind:
</p><div class="itemizedlist"><ul type="disc"><li>Lisp objects have type <span class="type">object</span>.
 </li><li>Variables of this type are invalidated by
   <a href="#gc-safety" title="33.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">memory allocation</a> and must be saved
   on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> using macros <tt class="function">pushSTASK()</tt>,
   <tt class="function">popSTACK()</tt> and <tt class="function">skipSTACK()</tt>.
 </li><li>Access object slots using the
   approprate <tt class="function">TheFoo()</tt> macro, e.g.,
   <tt class="function">TheCons(my_cons)-&gt;Car</tt>, but first check the
   type with <tt class="function">consp()</tt>.</li><li>Arguments are passed on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, as illustrated
   in the <a href="#modprep" title="31.2.7.1.&#xA0;Modprep">above example</a>.</li><li>Wrap your system calls in
   <tt class="literal">begin_system_call()</tt>/<tt class="literal">end_system_call()</tt>
   pairs.  These macros, defined in <a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><tt class="filename">#P"clisp.h"</tt></a>, save and restore
   registers used by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> which could be clobbered by a system call.
 </li></ul></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="exporting"></a>31.2.7.3. Exporting</h4></div></div></div><p>If your module uses <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> to interface to a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library,
 you might want to make your module package
 <a href="#make-pack" title="11.4.2.&#xA0;Function MAKE-PACKAGE">case-sensitive</a> and use
 <tt class="filename">exporting.lisp</tt> in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> distribution to
 make all <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms export the symbols they define.
 See <tt class="filename">modules/netica</tt>
 and <tt class="filename">modules/bindings/*</tt> for examples.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="included-modules"></a>31.2.8. Modules included in the source distribution.</h3></div></div></div><p>The following modules come with the <span class="emphasis"><em>source</em></span>
 distribution of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> (but are not necessarily built in a
 particular <span class="emphasis"><em>binary</em></span> distribution):</p><div class="variablelist"><dl><dt>bindings</dt><dd><p>Call the operating system functions from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
    The following platforms are supported:
   </p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a>/<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a></li><li><a href="http://winehq.com/" target="_top"><strong>Win32</strong></a></li></ul></div></dd><dt><a href="http://www.cliki.net/CLX" target="_top"><span><strong class="command">CLX</strong></span></a></dt><dd><p>Call
    <a href="http://www.the-labs.com/X11/XLib-Manual/" target="_top">Xlib</a>
    functions from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  Two implementations are supplied:
   </p><div class="itemizedlist"><ul type="disc"><li>mit-clx, from MIT
     <a href="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z" target="_top">ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</a>
     - the standard implementation</li><li>new-clx, by <span class="author"><span class="firstname">Gilbert</span> <span class="surname">Baumann</span></span>
      - faster, with additional features, but not quite complete yet.
    </li></ul></div></dd><dt><a href="#oracle" title="32.9.&#xA0;Oracle Interface">oracle</a></dt><dd>Access
    <a href="http://www.oracle.com/" target="_top">Oracle</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><a href="#fastcgi" title="32.10.&#xA0;The FastCGI Interface">fastcgi</a></dt><dd>Access
    <a href="http://www.fastcgi.com/" target="_top">FastCGI</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><a href="#matlab" title="32.1.&#xA0;Matlab Interface">matlab</a></dt><dd>Do matrix computations via
    <a href="http://www.mathworks.com/products/matlab/" target="_top">MATLAB</a>.
 </dd><dt><a href="#netica" title="32.2.&#xA0;Netica Interface">netica</a></dt><dd>Work with Bayesian belief networks and influence
    diagrams using
    <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica</a>.
 </dd><dt>postgresql</dt><dd>Access
    <a href="http://www.PostgreSQL.org/" target="_top">PostgreSQL</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
  </dd><dt>queens</dt><dd>Compute the number of solutions to the <em class="replaceable"><tt>n</tt></em>-queens
    problem on a <em class="replaceable"><tt>n*n</tt></em> checkboard (a toy
    example for the users to explore).</dd><dt><a href="#dir-key" title="32.3.&#xA0;Directory Access">dirkey</a></dt><dd>Directory Access</dd><dt><a href="#berkeley-db" title="32.4.&#xA0;Berkeley DB access.">berkeley-db</a></dt><dd><a href="http://www.sleepycat.com/docs/index.html" target="_top">Berkeley DB from Sleepycat Software</a>
    interface</dd><dt><a href="#regexp" title="32.5.&#xA0;CLISP &#x201C;REGEXP&#x201D; module">regexp</a></dt><dd>The <a href="regexp.html" target="_top">POSIX Regular
   Expressions</a> matching, compiling, executing.
 </dd><dt><a href="#pcre" title="32.6.&#xA0;Perl Compatible Regular Expressions.">pcre</a></dt><dd>The <a href="http://www.pcre.org/" target="_top">Perl
     Compatible Regular Expressions</a> matching, compiling,
    executing.</dd><dt><a href="#i18n-mod" title="32.7.&#xA0;Internationalization of User Programs">i18n</a></dt><dd>Internationalization of User Programs
 </dd><dt><a href="#syscalls" title="32.8.&#xA0;System Calls">syscalls</a></dt><dd>Use some system calls in a platform-independent way.
 </dd><dt><a href="wildcard.html" target="_top">wildcard</a></dt><dd>Shell (<a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a>) globbing</dd><dt><a href="#rawsock" title="32.11.&#xA0;Raw Socket Access.">rawsock</a></dt><dd>Raw socket access.
 </dd><dt><a href="#zlib" title="32.12.&#xA0;ZLIB Interface">zlib</a></dt><dd>Compress <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>s using
    <a href="http://www.zlib.org" target="_top">ZLIB</a>.
 </dd></dl></div><p>To use them, read <tt class="filename">unix/INSTALL</tt> and build
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> in directory <tt class="filename">build-dir</tt> with, e.g.,</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ ./configure --with-module=syscalls --with-module=clx/new-clx --build build-dir
</pre></td></tr></table><p>then run it with</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ ./build-dir/clisp <tt class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></tt> full
</pre></td></tr></table><p>See <a href="#ext-modules" title="Chapter&#xA0;32.&#xA0;Extensions Implemented as Modules">Chapter 32, <i>Extensions Implemented as Modules</i></a> for details.</p></div></div>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dffi"></a>31.3. The Foreign Function Call Facility</h2></div><div><h3 class="subtitle">Platform dependent: many <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms
only.</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-overview">31.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.2. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.3. The choice of the <span><strong class="command">C</strong></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.9. Examples</a></span></dt></dl></div><p>A foreign function description is written as a Lisp file, and when
 compiled it produces a <tt class="filename">#P".c"</tt> file which is then compiled by the
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler and may be linked together with
 <tt class="filename">lisp.a</tt>.</p><p>All symbols relating to the foreign function interface are
 exported from the package <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.  To use them,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>)</tt>.</p><p>Special <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms may appear anywhere in the Lisp file.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-overview"></a>31.3.1. Overview</h3></div></div></div><p>These are the special <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms.  We have taken a pragmatic
 approach: the only foreign languages we support for now are <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 and ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>.</p><div class="variablelist"><p class="title"><b>special <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms; <em class="replaceable"><tt>name</tt></em> is any Lisp
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>; <em class="replaceable"><tt>c-name</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.</b></p><dl><dt><a id="def-c-type"></a><tt class="code">(<a href="#def-c-type"><tt class="function">FFI:DEF-C-TYPE</tt></a> <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>This form makes <em class="replaceable"><tt>name</tt></em> a shortcut for <em class="replaceable"><tt>c-type</tt></em>.
   Note that <em class="replaceable"><tt>c-type</tt></em> may already refer to name.
   Forward declarations of types are not possible, however.
</dd><dt><a id="def-c-var"></a><tt class="code">(<a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a> <em class="replaceable"><tt>name</tt></em>
   {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd><p>This form defines a <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>.
  <em class="replaceable"><tt>name</tt></em> is the Lisp name, a regular Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>.</p><div class="variablelist"><a id="def-c-var-opts"></a><p class="title"><b>Options for <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a></b></p><dl><dt><tt class="code">(<tt class="constant">:NAME</tt> <em class="replaceable"><tt>c-name</tt></em>)</tt></dt><dd>specifies the name as seen from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, as a
   string.  If not specified, it is derived from the print name of
   the Lisp name.</dd><dt><tt class="code">(<tt class="constant">:TYPE</tt> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>specifies the variable's foreign type.
</dd><dt><tt class="code">(<tt class="constant">:READ-ONLY</tt> <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a>)</tt></dt><dd>If this option is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   it will be impossible to change the variable's value from within
   Lisp (using <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> or similar).</dd><dt><tt class="code">(:ALLOC <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>)</tt></dt><dd>This option can be either <tt class="constant">:NONE</tt> or
   <tt class="constant">:MALLOC-FREE</tt> and defaults to <tt class="constant">:NONE</tt>.  If it is
   <tt class="constant">:MALLOC-FREE</tt>, any values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>,
   <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> within the foreign value are assumed
   to be pointers to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>-allocated storage, and when <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a>
   replaces an old value by a new one, the old storage is freed using
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> and the new storage allocated using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>.  If it is
   <tt class="constant">:NONE</tt>, <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> assumes that the pointers point to good storage
   (not <tt class="constant">NULL</tt>!) and overwrites the old values by the new ones.
   This is dangerous (just think of overwriting a string with a
   longer one or storing some data in a <tt class="constant">NULL</tt> pointer...)  and
   deprecated.</dd><dt><tt class="code">(<tt class="constant">:LIBRARY</tt> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd><p>Specifies the (optional) dynamic library
   which contains the variable.</p><p><em class="replaceable"><tt>name</tt></em> should <span class="emphasis"><em>evaluate</em></span> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
   or, depending on the underlying <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html" target="_top"><tt class="function">dlsym</tt></a> implementation, <tt class="constant">:DEFAULT</tt>
   or <tt class="constant">:NEXT</tt>.</p></dd></dl></div></dd><dt><a id="def-call-out"></a><tt class="code">(<a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>
              <em class="replaceable"><tt>name</tt></em> {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd><p>This form defines a named call-out function (a
 foreign function called from Lisp: control flow temporarily leaves Lisp).
 </p><div class="variablelist"><a id="def-call-out-opts"></a><p class="title"><b>Options for <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a></b></p><dl><dt><tt class="code">(<tt class="constant">:NAME</tt> <em class="replaceable"><tt>c-name</tt></em>)</tt></dt><dd>Any Lisp function call to <tt class="function">#'<em class="replaceable"><tt>name</tt></em></tt>
  is redirected to call the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function <em class="replaceable"><tt>c-name</tt></em>.
</dd><dt><tt class="code">(<tt class="constant">:ARGUMENTS</tt>
   {(<em class="replaceable"><tt>argument</tt></em> <em class="replaceable"><tt>c-type</tt></em> [<a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode"><em class="replaceable"><tt>PARAM-MODE</tt></em></a> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>]])}*)</tt><br /><tt class="code">(<tt class="constant">:RETURN-TYPE</tt> <em class="replaceable"><tt>c-type</tt></em> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>])</tt></dt><dd>Argument list and return value, see
   <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions">Section 31.3.7, “Argument and result passing conventions”</a> and <a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode">Section 31.3.8, “Parameter Mode”</a>.
</dd><dt><tt class="code">(<a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <em class="replaceable"><tt>language</tt></em>)</tt></dt><dd>See <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor.">Section 31.3.3, “The choice of the <span><strong class="command">C</strong></span> flavor.”</a>.
</dd><dt><tt class="code">(:BUILT-IN <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a>)</tt></dt><dd>When the function is a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> built-in, the full
   prototype will be output (unless suppressed by <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a>).
</dd><dt><tt class="code">(<tt class="constant">:LIBRARY</tt> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd><p>Specifies the (optional) dynamic library
   which contains the function.</p><p><em class="replaceable"><tt>name</tt></em> should <span class="emphasis"><em>evaluate</em></span> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>,
   or, depending on the underlying <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html" target="_top"><tt class="function">dlsym</tt></a> implementation, <tt class="constant">:DEFAULT</tt>
   or <tt class="constant">:NEXT</tt>.</p></dd></dl></div></dd><dt><a id="def-call-in"></a><tt class="code">(<a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>
              <em class="replaceable"><tt>name</tt></em> {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd><p>This form defines a named call-in function (i.e., a Lisp
 function called from the foreign language: control flow temporary
 enters Lisp)</p><div class="variablelist"><a id="def-call-in-opts"></a><p class="title"><b>Options for <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a></b></p><dl><dt><tt class="code">(<tt class="constant">:NAME</tt> <em class="replaceable"><tt>c-name</tt></em>)</tt></dt><dd>Any <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function call to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function
   <em class="replaceable"><tt>c-name</tt></em> is redirected to call the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> function
   <tt class="function">#'<em class="replaceable"><tt>name</tt></em></tt>.</dd><dt><tt class="code">(<tt class="constant">:ARGUMENTS</tt>
   {(<em class="replaceable"><tt>argument</tt></em> <em class="replaceable"><tt>c-type</tt></em> [<a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode"><em class="replaceable"><tt>PARAM-MODE</tt></em></a> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>]])}*)</tt><br /><tt class="code">(<tt class="constant">:RETURN-TYPE</tt> <em class="replaceable"><tt>c-type</tt></em> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>])</tt></dt><dd>Argument list and return value, see
   <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions">Section 31.3.7, “Argument and result passing conventions”</a> and <a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode">Section 31.3.8, “Parameter Mode”</a>.
</dd><dt><tt class="code">(<a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <em class="replaceable"><tt>language</tt></em>)</tt></dt><dd>See <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor.">Section 31.3.3, “The choice of the <span><strong class="command">C</strong></span> flavor.”</a>.
</dd></dl></div></dd><dt><a id="def-c-call-out"></a><tt class="code">(<a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a>
        <em class="replaceable"><tt>name</tt></em> {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd>This is equivalent to <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> with
   <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <tt class="constant">:STDC</tt>.  <span class="emphasis"><em>deprecated</em></span>.
   </dd><dt><a id="def-c-call-in"></a><tt class="code">(<a href="#def-c-call-in"><tt class="function">FFI:DEF-C-CALL-IN</tt></a>
        <em class="replaceable"><tt>name</tt></em> {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd>This is equivalent to <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a> with
   <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <tt class="constant">:STDC</tt>.  <span class="emphasis"><em>deprecated</em></span>.
   </dd><dt><a id="def-c-struct"></a><tt class="code">(<a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a>
   <em class="replaceable"><tt>name</tt></em> (<em class="replaceable"><tt>symbol</tt></em> <em class="replaceable"><tt>c-type</tt></em>)*)</tt></dt><dd><p>This form defines <em class="replaceable"><tt>name</tt></em> to be both a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> and a foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type with the given slots.
  If this class representation overhead is not needed one should consider
  writing <tt class="code">(<a href="#def-c-type"><tt class="function">FFI:DEF-C-TYPE</tt></a> <em class="replaceable"><tt>name</tt></em> (<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>
  {<a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> | <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>} (<em class="replaceable"><tt>symbol</tt></em> <em class="replaceable"><tt>c-type</tt></em>)*))</tt> instead.
  <em class="replaceable"><tt>name</tt></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (structure name) or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> whose <a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><tt class="function">FIRST</tt></a>
  element is the structure name and the <a href="http://www.lisp.org/HyperSpec/Body/acc_rest.html" target="_top"><tt class="function">REST</tt></a> is options.
  Two options are supported at this time:
  </p><div class="variablelist"><a id="def-c-struct-opts"></a><p class="title"><b>Options for <a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a></b></p><dl><dt><a id="def-c-struct-typedef"></a><tt class="constant">:TYPEDEF</tt></dt><dd>means that the name of this structure is a
      <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type defined with <tt class="function">typedef</tt>
      elsewhere.</dd><dt><a id="def-c-struct-external"></a><tt class="constant">:EXTERNAL</tt></dt><dd>means that this structure is defined in a
      <tt class="filename">#P".c"</tt> file that you include with, e.g.,
      <tt class="code">(<a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a> "#include &lt;filename.h&gt;")</tt>.
  </dd></dl></div><p>
  These options determine how the struct is written to the <tt class="filename">#P".c"</tt>.
</p></dd><dt><a id="def-c-enum"></a><tt class="code">(<a href="#def-c-enum"><tt class="function">FFI:DEF-C-ENUM</tt></a>
   <em class="replaceable"><tt>name</tt></em> {<em class="replaceable"><tt>symbol</tt></em> | (<em class="replaceable"><tt>symbol</tt></em> [<em class="replaceable"><tt>value</tt></em>])}*)</tt></dt><dd><p>This form defines <em class="replaceable"><tt>symbol</tt></em>s
  as constants, similarly to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> declaration <span class="type">enum {
  <em class="replaceable"><tt>symbol</tt></em> [= <em class="replaceable"><tt>value</tt></em>], ... };</span></p><p>You can use <tt class="code">(<tt class="function">FFI:ENUM-FROM-VALUE</tt>
  <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>value</tt></em>)</tt> and
 <tt class="code">(<tt class="function">FFI:ENUM-TO-VALUE</tt> <em class="replaceable"><tt>name</tt></em>
  <em class="replaceable"><tt>symbol</tt></em>)</tt> to convert between the numeric and symbolic
 representations (of course, the latter function boils down to
 <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> plus a check that the <em class="replaceable"><tt>symbol</tt></em> is indeed a constant
 defined in the <a href="#def-c-enum"><tt class="function">FFI:DEF-C-ENUM</tt></a> <em class="replaceable"><tt>name</tt></em>).</p></dd><dt><a id="c-lines"></a><tt class="code">(<a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a> <em class="replaceable"><tt>format-string</tt></em>
   {<em class="replaceable"><tt>argument</tt></em>}*)</tt></dt><dd>This form outputs the string
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt>
   to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> output file.
   This is usually used to include the relevant header files,
   see <a href="#def-c-struct-external"><tt class="constant">:EXTERNAL</tt></a>
   and <a href="#ffi-extern-output"><a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a></a>.
 </dd><dt><a id="c-init"></a><tt class="code">(<a href="#c-init"><tt class="function">FFI:C-INIT-ONCE</tt></a>
   <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt><br /><tt class="code">(<a href="#c-init"><tt class="function">FFI:C-INIT-ALWAYS</tt></a> <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt></dt><dd>These forms add <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt>
   to the appropriate <a href="#modinit" title="31.2.2.&#xA0;Module initialization.">initialization function</a>.
</dd><dt><a id="c-fini"></a><tt class="code">(<a href="#c-fini"><tt class="function">FFI:C-FINI</tt></a>
   <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt></dt><dd>This form adds <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
   <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <em class="replaceable"><tt>format-string</tt></em> {<em class="replaceable"><tt>argument</tt></em>}*)</tt>
   to the <a href="#modfini" title="31.2.3.&#xA0;Module finalization.">finalization function</a>.
</dd><dt><a id="element"></a><tt class="code">(<a href="#element"><tt class="function">FFI:ELEMENT</tt></a>
     <em class="replaceable"><tt>c-place</tt></em> <em class="replaceable"><tt>index<sub>1</sub></tt></em> ...
     <em class="replaceable"><tt>index<sub>n</sub></tt></em>)</tt></dt><dd>Array element: If <em class="replaceable"><tt>c-place</tt></em> is of foreign type
  <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <em class="replaceable"><tt>c-type</tt></em>
  (<em class="replaceable"><tt>dim<sub>1</sub></tt></em>
  ... <em class="replaceable"><tt>dim<sub>n</sub></tt></em>))</tt>
  and 0 ≤ <em class="replaceable"><tt>index<sub>1</sub></tt></em>
  &lt; <em class="replaceable"><tt>dim<sub>1</sub></tt></em>, ..., 0
  ≤ <em class="replaceable"><tt>index<sub>n</sub></tt></em> &lt;
  <em class="replaceable"><tt>dim<sub>n</sub></tt></em>, this will be
  the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><tt class="function">AREF</tt></a>
  <em class="replaceable"><tt>c-place</tt></em> <em class="replaceable"><tt>index<sub>1</sub></tt></em>
  ... <em class="replaceable"><tt>index<sub>n</sub></tt></em>)</tt> or
  <tt class="varname"><em class="replaceable"><tt>c-place</tt></em>[<em class="replaceable"><tt>index<sub>1</sub></tt></em>]...[<em class="replaceable"><tt>index<sub>n</sub></tt></em>]</tt>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><tt>c-type</tt></em>.
  If <em class="replaceable"><tt>c-place</tt></em> is of foreign type <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <em class="replaceable"><tt>c-type</tt></em> <em class="replaceable"><tt>dim</tt></em>)</tt> and 0 ≤
  <em class="replaceable"><tt>index</tt></em> &lt; <em class="replaceable"><tt>dim</tt></em>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><tt class="function">AREF</tt></a>
  <em class="replaceable"><tt>c-place</tt></em> <em class="replaceable"><tt>index</tt></em>)</tt> or
  <tt class="varname"><em class="replaceable"><tt>c-place</tt></em>[<em class="replaceable"><tt>index</tt></em>]</tt>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><tt>c-type</tt></em>.
</dd><dt><a id="deref"></a><tt class="code">(<a href="#deref"><tt class="function">FFI:DEREF</tt></a> <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd>Dereference pointer: If
  <em class="replaceable"><tt>c-place</tt></em> is of foreign type
  <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt>,
  <tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt> or
  <tt class="type">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> the pointer points to.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><tt>c-type</tt></em>.
  For <tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt>,
  the <em class="replaceable"><tt>c-place</tt></em> may not be <tt class="constant">NULL</tt>.
</dd><dt><a id="slot"></a><tt class="code">(<a href="#slot"><tt class="function">FFI:SLOT</tt></a> <em class="replaceable"><tt>c-place</tt></em>
   <em class="replaceable"><tt>slot-name</tt></em>)</tt></dt><dd>Struct or union component: If <em class="replaceable"><tt>c-place</tt></em> is of
  foreign type <tt class="type">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a> <em class="replaceable"><tt>class</tt></em>
  ... (<em class="replaceable"><tt>slot-name</tt></em> <em class="replaceable"><tt>c-type</tt></em>) ...)</tt> or
  of type <tt class="type">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
  ... (<em class="replaceable"><tt>slot-name</tt></em> <em class="replaceable"><tt>c-type</tt></em>) ...)</tt>,
  this will be of type <em class="replaceable"><tt>c-type</tt></em>.
  </dd><dt><a id="cast"></a><tt class="code">(<a href="#cast"><tt class="function">FFI:CAST</tt></a>
           <em class="replaceable"><tt>c-place</tt></em> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>Type change: A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting the same memory
  locations as the original <em class="replaceable"><tt>c-place</tt></em>, but of type <em class="replaceable"><tt>c-type</tt></em>.
 </dd><dt><a id="offset"></a><tt class="code">(<a href="#offset"><tt class="function">FFI:OFFSET</tt></a>
           <em class="replaceable"><tt>c-place</tt></em> <em class="replaceable"><tt>offset</tt></em> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>Type change and displacement: return a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting
  a memory locations displaced from the original <em class="replaceable"><tt>c-place</tt></em> by an
  <em class="replaceable"><tt>offset</tt></em> counted in bytes, with type <em class="replaceable"><tt>c-type</tt></em>.
  This can be used to resize an array, e.g. of <em class="replaceable"><tt>c-type</tt></em>
  <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span> <em class="replaceable"><tt>n</tt></em>)</tt>
  via <tt class="code">(<a href="#offset"><tt class="function">FFI:OFFSET</tt></a> <em class="replaceable"><tt>c-place</tt></em> 0 '(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span>
   <em class="replaceable"><tt>k</tt></em>))</tt>.
 </dd><dt><a id="c-var-addr"></a><tt class="code">(<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a>
           <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd>Return the address of <em class="replaceable"><tt>c-place</tt></em> as a Lisp object of
  type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>.  This is useful as an argument
  to foreign functions expecting a parameter of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>.
 </dd><dt><a id="c-var-object"></a><tt class="code">(<a href="#c-var-object"><tt class="function">FFI:C-VAR-OBJECT</tt></a>
   <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd>Return the <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object underlying the
   <em class="replaceable"><tt>c-place</tt></em>.  This is also an acceptable argument type to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
   declaration.</dd><dt><a id="typeof"></a><tt class="code">(<a href="#typeof"><tt class="function">FFI:TYPEOF</tt></a>
    <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd>returns the <em class="replaceable"><tt>c-type</tt></em> corresponding to the <em class="replaceable"><tt>c-place</tt></em>.
</dd><dt><a id="sizeof"></a><tt class="code">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <em class="replaceable"><tt>c-type</tt></em>)</tt><br /><tt class="code">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <em class="replaceable"><tt>c-type</tt></em>, measured in bytes.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type of <em class="replaceable"><tt>c-place</tt></em>, measured in bytes.
</p></dd><dt><a id="bitsizeof"></a><tt class="code">(<a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a> <em class="replaceable"><tt>c-type</tt></em>)</tt><br /><tt class="code">(<a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a> <em class="replaceable"><tt>c-place</tt></em>)</tt></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <em class="replaceable"><tt>c-type</tt></em>, measured in bits.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type of <em class="replaceable"><tt>c-place</tt></em>, measured in bits.
</p></dd><dt><a id="fa-null"></a><tt class="code">(<a href="#fa-null"><tt class="function">FFI:FOREIGN-ADDRESS-NULL</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>)</tt></dt><dd>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the
  <em class="replaceable"><tt>foreign-entity</tt></em> refers to the <tt class="constant">NULL</tt> address (and thus <em class="replaceable"><tt>foreign-entity</tt></em> should
  probably not be passed to most foreign functions).
</dd><dt><a id="faddr-u"></a><tt class="code">(<a href="#faddr-u"><tt class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>)</tt><br /><tt class="code">(<a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a> <em class="replaceable"><tt>number</tt></em>)</tt></dt><dd><p><a href="#faddr-u"><tt class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</tt></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
   address embodied in the Lisp object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>,
   <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>.</p><p><a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a> returns a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>
   object pointing to the given <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> address.
</p></dd><dt><a id="faddr"></a><tt class="code">(<a href="#faddr"><tt class="function">FFI:FOREIGN-ADDRESS</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>)</tt></dt><dd><p><a href="#faddr"><tt class="function">FFI:FOREIGN-ADDRESS</tt></a> is both a type name and a
   selector/constructor function. It is the Lisp object type
   corresponding to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration, e.g. a
   call-out function with <tt class="code">(<tt class="constant">:RETURN-TYPE</tt> <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>)</tt> yields
   a Lisp object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>.</p><p>The function extracts the object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>
   living within any <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object.
   If the <em class="replaceable"><tt>foreign-entity</tt></em> already is a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>, it returns it.
   If it is a <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> (e.g. a base foreign library address),
   it encapsulates it into a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> object, as suitable
   for use with a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration.
   It does not construct addresses out of <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s,
   <a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a> must be used for that purpose.
</p></dd><dt><a id="dffi-make-var"></a><tt class="code">(<a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>
   <em class="replaceable"><tt>c-type-internal</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd> This constructor creates a new <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>
   from the given <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> or <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> and the
   internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor (as obtained from <a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a>).
   <em class="replaceable"><tt>name</tt></em>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, is mostly useful for documentation and
   interactive debugging since it appears in the printed representation
   of the <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object, as in <tt class="data">#&lt;<a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> "foo" #x0ADD4E55&gt;</tt>.
   In effect, this is similar to <a href="#cast"><tt class="function">FFI:CAST</tt></a> (or rather
   <tt class="code">(<a href="#offset"><tt class="function">FFI:OFFSET</tt></a> ... 0 ...)</tt> for places),
   except that it works with <a href="#faddr"><tt class="function">FFI:FOREIGN-ADDRESS</tt></a> objects and allows
   caching of the internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types.</dd><dt><a id="dffi-make-func"></a><tt class="code">(<a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a>
   <em class="replaceable"><tt>foreign-entity</tt></em> <em class="replaceable"><tt>c-type-internal</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd>This constructor creates a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>
   from the given <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> and the
   internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor (as obtained from
   <tt class="code">(<a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a> '(<a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a> ...))</tt>,
   in which case it is important to specify the <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> because the
   expressions are likely to be evaluated at run time, outside the <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit" target="_top">compilation unit</a>).
   <em class="replaceable"><tt>name</tt></em>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, is mostly useful for documentation and
   interactive debugging since it appears in the printed representation
   of the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object, as in <tt class="data">#&lt;<a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> "foo" #x0052B060&gt;</tt>.
   It is inherited from the given <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object when
   available.</dd><dt><a id="validp"></a><tt class="code">(<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>)</tt><br /><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>) <em class="replaceable"><tt>value</tt></em>)</tt></dt><dd><p>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the <em class="replaceable"><tt>foreign-entity</tt></em>
  (e.g. the Lisp equivalent of a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>) refers to a pointer
  which is invalid because it comes from a previous Lisp session.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <em class="replaceable"><tt>foreign-entity</tt></em> can be used within the current Lisp process
  (thus it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for all non-foreign arguments).</p><p>You can invalidate a foreign object using
  <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt>.
  You cannot resurrect a zombie, nor can you kill a non-foreign
  object.</p></dd><dt><a id="fptr"></a><tt class="code">(<a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em>)</tt></dt><dd><a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> returns the <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>
   associated with the Lisp object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>,
   <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or
   <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>.</dd><dt><tt class="code">(<a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em> {<em class="replaceable"><tt>foreign-entity</tt></em> |
   <tt class="constant">:COPY</tt>})</tt></dt><dd><a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a> changes the
   <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> associated with the Lisp object of type
   <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>, <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> to
   that of the other entity.
   With <tt class="constant">:COPY</tt>, a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> is allocated.
   The original <em class="replaceable"><tt>foreign-entity</tt></em> still points to the same object and is returned.
   This is particularly useful with <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt>,
   see <a href="#ex-dffi-validity" title="Example&#xA0;31.9.&#xA0;Controling validity of ressources.">Example 31.9, “Controling validity of ressources.”</a>.</dd><dt><a id="foreign-stack"></a><tt class="code">(<a href="#foreign-stack"><tt class="function">FFI:WITH-FOREIGN-OBJECT</tt></a> (<em class="replaceable"><tt>variable</tt></em> <em class="replaceable"><tt>c-type</tt></em>
      [<em class="replaceable"><tt>initarg</tt></em>]) <em class="replaceable"><tt>body</tt></em>)</tt><br /><tt class="code">(<a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a> (<em class="replaceable"><tt>variable</tt></em> <em class="replaceable"><tt>c-type</tt></em>
      [<em class="replaceable"><tt>initarg</tt></em>]) <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd><p>These forms allocate space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> execution
  stack, bind respectively a <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object or
  a local <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> to <em class="replaceable"><tt>variable</tt></em> and execute <em class="replaceable"><tt>body</tt></em>.</p><p>When <em class="replaceable"><tt>initarg</tt></em> is not supplied,
  they allocate space only for <tt class="code">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a>
  <em class="replaceable"><tt>c-type</tt></em>)</tt> bytes.  This space is filled with zeroes.  E.g.,
  using a <em class="replaceable"><tt>c-type</tt></em> of <a href="#c-string"><span class="type">FFI:C-STRING</span></a> or even <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
  (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint8</span> 32))</tt> (!) both allocate place
  for a single pointer, initialized to <tt class="constant">NULL</tt>.</p><p>When <em class="replaceable"><tt>initarg</tt></em> is supplied, they
  allocate space for an arbitrarily complex set of structures rooted in
  <em class="replaceable"><tt>c-type</tt></em>.  Therefore, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>, <tt class="data">#()</tt>
  and <tt class="data">""</tt> are your friends for creating a
  pointer to the empty arrays:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-c-var (v '(c-ptr (c-array-max uint8 32)) #())
  (setf (element (deref v) 0) 127) v)</pre></td></tr></table><p>
  <em class="replaceable"><tt>c-type</tt></em> is evaluated, making creation of variable sized buffers easy:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-c-var (fv `(c-array uint8 ,(length my-vector)) my-vector)
  (print fv))</pre></td></tr></table><p>
 </p></dd><dt><a id="foreign-value"></a><tt class="code">(<a href="#foreign-value"><tt class="function">FFI:FOREIGN-VALUE</tt></a> <a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a>)</tt><br /><tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#foreign-value"><tt class="function">FFI:FOREIGN-VALUE</tt></a> <a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a>) ...)</tt></dt><dd><p>This functions converts the reference to a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
  data structure which the <a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a> describes, to Lisp. Such a
  reference is typically obtained from <a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a>,
  <a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a>, <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-ALLOCATE</tt></a> or via a <tt class="code">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
  <em class="replaceable"><tt>c-type</tt></em>)</tt> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type description.
  Alternatively, macros like <a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a> or <a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a> and the
  concept of foreign <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> hide many uses of this function.</p><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> form performs conversion from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>,
  following to the <a href="#dffi-make-var"><tt class="function">FFI:FOREIGN-VARIABLE</tt></a>'s type description.
</p></dd><dt><a id="foreign-stack-string"></a><tt class="code">(<a href="#foreign-stack-string"><tt class="function">FFI:WITH-FOREIGN-STRING</tt></a>
   (<em class="replaceable"><tt>foreign-address</tt></em> <em class="replaceable"><tt>char-count</tt></em>
    <em class="replaceable"><tt>byte-count</tt></em> <em class="replaceable"><tt>string</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>encoding</tt></em> <em class="replaceable"><tt>null-terminated-p</tt></em>
    <em class="replaceable"><tt>start</tt></em> <em class="replaceable"><tt>end</tt></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd><p>This forms converts a Lisp <em class="replaceable"><tt>string</tt></em> according to
   the <em class="replaceable"><tt>encoding</tt></em>, allocating space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> execution stack.
   <em class="replaceable"><tt>encoding</tt></em> can be any <a href="#encoding" title="30.5.&#xA0;Encodings"><tt class="classname">EXT:ENCODING</tt></a>, e.g.
   <a href="#charset-UTF-16"><tt class="constant">CHARSET:UTF-16</tt></a>
   or <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>, circumventing the usual 1:1 limit imposed on
   <a href="impnotes.html#foreign-enc" class="olink"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p><p><em class="replaceable"><tt>body</tt></em> is then executed with the three variables <em class="replaceable"><tt>foreign-address</tt></em>,
   <em class="replaceable"><tt>char-count</tt></em> and
   <em class="replaceable"><tt>byte-count</tt></em> respectively bound to an
   untyped <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> (as known from the <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> foreign
   type specification) pointing to the stack location, the number of
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s of the Lisp <em class="replaceable"><tt>string</tt></em> that were considered and the
   number of <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> bytes that were allocated for it on the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> stack.</p><p>When <em class="replaceable"><tt>null-terminated-p</tt></em> is true,
   which is the default, a variable number of zero bytes is appended,
   depending on the encoding, e.g. 2 for <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>,
   and accounted for in <em class="replaceable"><tt>byte-count</tt></em>,
   and <em class="replaceable"><tt>char-count</tt></em> is incremented by one.</p><p>The <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> object bound to <em class="replaceable"><tt>foreign-address</tt></em> is
   invalidated upon the exit from the form.</p><p>A stupid example (a quite costly interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/mblen.html" target="_top"><tt class="function">mblen</tt></a>):
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-foreign-string (fv elems bytes string
                      :encoding charset:jis... :null-terminated-p nil
                      :end 5)
 (declare (ignore fv elems))
 (format t "This string would take ~D bytes." bytes))</pre></td></tr></table><p>
</p></dd><dt><a id="c-type-parse"></a><tt class="code">(<a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a> <em class="replaceable"><tt>c-type</tt></em>)</tt><br /><tt class="code">(<a href="#c-type-parse"><tt class="function">FFI:DEPARSE-C-TYPE</tt></a> <em class="replaceable"><tt>c-type-internal</tt></em>)</tt></dt><dd>Convert between the external (<a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>) and internal
   (<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type representations (used by <a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><tt class="function">DESCRIBE</tt></a>).
</dd><dt><a id="foreign-heap"></a><tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a>
   <em class="replaceable"><tt>c-type</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt><br /><tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> <em class="replaceable"><tt>c-type</tt></em> <em class="replaceable"><tt>contents</tt></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt><br /><tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> <em class="replaceable"><tt>foreign-entity</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :FULL)</tt><br /><tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:FOREIGN-ALLOCATE</tt></a> <em class="replaceable"><tt>c-type-internal</tt></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :INITIAL-CONTENTS <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt></dt><dd><p>Macro <a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a> allocates
   <tt class="code">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <em class="replaceable"><tt>c-type</tt></em>)</tt>
   bytes on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> heap and zeroes them out (like <a href="http://www.opengroup.org/onlinepubs/007904975/functions/calloc.html" target="_top"><tt class="function">calloc</tt></a>).
   When <tt class="constant">:COUNT</tt> is supplied, <em class="replaceable"><tt>c-type</tt></em> is substituted with
   <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <em class="replaceable"><tt>c-type</tt></em> <em class="replaceable"><tt>count</tt></em>)</tt>,
   except when <em class="replaceable"><tt>c-type</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>, in which case
   <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> <em class="replaceable"><tt>count</tt></em>)</tt>
   is used instead.
   When <tt class="constant">:READ-ONLY</tt> is supplied, the Lisp side is prevented from modifying the
   memory contents.  This can be used as an indication that some foreign
   side is going to fill this memory (e.g. via <a href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html" target="_top"><tt class="function">read</tt></a>).</p><p>Returns a <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object of the actual <em class="replaceable"><tt>c-type</tt></em>,
   whose address part points to the newly allocated memory.</p><p><a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> will call <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> as many times
   as necessary to build a structure on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> heap of the given
   <em class="replaceable"><tt>c-type</tt></em>, initialized from the given <em class="replaceable"><tt>contents</tt></em>.</p><p>E.g., <tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> '<a href="#c-string"><span class="type">FFI:C-STRING</span></a> "ABCDE")</tt>
    performs 2 allocations: one for a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> pointer to a string,
    another for the contents of that string.  This would be useful in
    conjunction with a <span class="type">char**</span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type
    declaration.  <tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a> '<a href="#c-string"><span class="type">FFI:C-STRING</span></a>)</tt>
    allocates room for a single pointer (probably 4 bytes).</p><p><tt class="code">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> '<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> "ABCDEF" :count
    10)</tt> allocates and initializes room for the type <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> 10)</tt>,
    corresponding to <span class="type">char*</span> or, more specifically,
   <span class="type">char[10]</span> in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>.</p><p>Function <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> deallocates memory at the address
   held by the given <em class="replaceable"><tt>foreign-entity</tt></em>. If <tt class="constant">:FULL</tt> is supplied
   and the argument is of type <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>, recursively frees
   the whole complex stucture pointed to by this variable.</p><p>If given a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object that corresponds to a
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> callback, deallocates it.  Callbacks are automatically
   created each time you pass a Lisp function via the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p>Use <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt> to disable further
   references to this address from Lisp.  This is currently not done
   automatically.  If the given pointer is already invalid,
   <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> (currently) <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>. This may change to
   make it easier to integrate with <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a>.</p><p>Function <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-ALLOCATE</tt></a> is a lower-level interface as it
   requires an internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor as returned by
   <a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a>.</p></dd><dt><a id="with-c-place"></a><tt class="code">(<a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a> (<em class="replaceable"><tt>variable</tt></em> <em class="replaceable"><tt>foreign-entity</tt></em>)
   <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd><p>Create a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> out of the given <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>
  object so operations on places (e.g. <a href="#cast"><tt class="function">FFI:CAST</tt></a>, <a href="#deref"><tt class="function">FFI:DEREF</tt></a>, <a href="#slot"><tt class="function">FFI:SLOT</tt></a> etc.) can
  be used within <em class="replaceable"><tt>body</tt></em>.  <a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a> appears as a composition of
  <a href="#foreign-stack"><tt class="function">FFI:WITH-FOREIGN-OBJECT</tt></a> and <a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a>.</p><p>Such a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> can be used to access memory referenced by a <em class="replaceable"><tt>foreign-entity</tt></em>
  object:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(setq foo (allocate-deep '(c-array uint8 3) rgb))
(with-c-place (place foo) (element place 0))</pre></td></tr></table><p>
</p></dd><dt><a id="ffi-extern-output"></a><a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a><br /><tt class="varname">FFI:*OUTPUT-C-VARIABLES*</tt></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will write the <span class="type">extern</span>
   declarations for foreign functions (defined with <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>) and
   foreign variables (defined with <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>) into the output <tt class="filename">#P".c"</tt>
   (when the Lisp file is compiled with <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>)
   <span class="emphasis"><em>unless</em></span> these variables are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   They are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> by default, so the <span class="type">extern</span>
   declarations are <strong>not</strong> written; you are encouraged to use
   <a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a> to include the appropriate <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> headers.
   Set these variables to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the headers are not available or
   not usable.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-types"></a>31.3.2. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types</h3></div></div></div><p>Foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types are used in the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.
They are <strong>not</strong> regular <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes.</p><p>A <em class="replaceable"><tt>c-type</tt></em> is either a predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type or the name of a
 type defined by <a href="#def-c-type"><tt class="function">FFI:DEF-C-TYPE</tt></a>.</p><div class="variablelist"><p class="title"><b>the predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types (<em class="replaceable"><tt>c-type</tt></em>)</b></p><dl><dt><a id="simple-c-type"></a><em class="replaceable"><tt>simple-c-type</tt></em></dt><dd><p>the simple <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types
  </p><div class="informaltable"><a id="simple-c-type-tab"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Lisp name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> equivalent</th><th align="center">ILU
 equivalent</th><th align="center">Comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><span class="type">void</span></td><td align="center"> </td><td align="center">as a result type only</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><span class="type">int</span></td><td align="center"><span class="type">BOOLEAN</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></td><td align="center"><span class="type">char</span></td><td align="center"><span class="type">SHORT CHARACTER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">char</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">signed char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uchar</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">short</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ushort</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">int</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">long</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ulong</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint8</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">uint8</span></td><td align="center"><span class="type">BYTE</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint8</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">sint8</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint16</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">uint16</span></td><td align="center"><span class="type">SHORT CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint16</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">sint16</span></td><td align="center"><span class="type">SHORT INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint32</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">uint32</span></td><td align="center"><span class="type">CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint32</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">sint32</span></td><td align="center"><span class="type">INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint64</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 64)</tt></td><td align="center"><span class="type">uint64</span></td><td align="center"><span class="type">LONG CARDINAL</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><span class="type">sint64</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 64)</tt></td><td align="center"><span class="type">sint64</span></td><td align="center"><span class="type">LONG INTEGER</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center"><span class="type">float</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center"><span class="type">double</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div></dd><dt><a id="c-pointer"></a><a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
   <span class="type">void*</span>, an opaque pointer.
   When used as an argument, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is accepted as a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> and
   treated as <tt class="constant">NULL</tt>; when a function wants to return a <tt class="constant">NULL</tt>
   <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>, it actually returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd><dt><tt class="type">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
  <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><tt>c-type</tt></em>. It differs from <tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>
  <em class="replaceable"><tt>c-type</tt></em>)</tt> (see below) in that no conversion to and from
  Lisp will occur (beyond the usual one of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <tt class="constant">NULL</tt> pointer
  to or from Lisp <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>). Instead, an object of type <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>
  is used to represent the foreign place. It is assimilable to a typed
  pointer.</dd><dt><a id="c-string"></a><a href="#c-string"><span class="type">FFI:C-STRING</span></a></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type">char*</span>, a zero-terminated string.  Its Lisp equivalent is
  a string, without the trailing zero character.
 </dd><dt><a id="c-struct"></a><tt class="type">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>
  <em class="replaceable"><tt>class</tt></em> (<em class="replaceable"><tt>ident<sub>1</sub></tt></em>
   <em class="replaceable"><tt>c-type<sub>1</sub></tt></em>) ...
  (<em class="replaceable"><tt>ident<sub>n</sub></tt></em>
   <em class="replaceable"><tt>c-type<sub>n</sub></tt></em>))</tt></dt><dd><p>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
 <span class="type">struct { <em class="replaceable"><tt>c-type<sub>1</sub></tt></em>
 <em class="replaceable"><tt>ident<sub>1</sub></tt></em>; ...;
 <em class="replaceable"><tt>c-type<sub>n</sub></tt></em>
 <em class="replaceable"><tt>ident<sub>n</sub></tt></em>; }</span>.
 Its Lisp equivalent is: if <em class="replaceable"><tt>class</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>, a
 <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>; if <em class="replaceable"><tt>class</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>;
 if <em class="replaceable"><tt>class</tt></em> is a symbol naming a structure or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> class, an
 instance of this class, with slots of names
 <em class="replaceable"><tt>ident<sub>1</sub></tt></em>, ...,
 <em class="replaceable"><tt>ident<sub>n</sub></tt></em>.</p><p>
 <em class="replaceable"><tt>class</tt></em> may also be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (as above) and
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of <a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a> options.
 </p></dd><dt><a id="c-union"></a><tt class="type">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
  (<em class="replaceable"><tt>ident<sub>1</sub></tt></em>
   <em class="replaceable"><tt>c-type<sub>1</sub></tt></em>) ...
  (<em class="replaceable"><tt>ident<sub>n</sub></tt></em>
   <em class="replaceable"><tt>c-type<sub>n</sub></tt></em>))</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type">union { <em class="replaceable"><tt>c-type<sub>1</sub></tt></em>
  <em class="replaceable"><tt>ident<sub>1</sub></tt></em>; ...;
  <em class="replaceable"><tt>c-type<sub>n</sub></tt></em>
  <em class="replaceable"><tt>ident<sub>n</sub></tt></em>;
  }</span>.
  Conversion to and from Lisp assumes that a value is to be viewed as
  being of <em class="replaceable"><tt>c-type<sub>1</sub></tt></em>.
 </dd><dt><a id="c-array"></a><tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <em class="replaceable"><tt>c-type</tt></em> <em class="replaceable"><tt>dim<sub>1</sub></tt></em>)</tt><br /><tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <em class="replaceable"><tt>c-type</tt></em> (<em class="replaceable"><tt>dim<sub>1</sub></tt></em> ...
   <em class="replaceable"><tt>dim<sub>n</sub></tt></em>))</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> [<em class="replaceable"><tt>dim<sub>1</sub></tt></em>]
  ... [<em class="replaceable"><tt>dim<sub>n</sub></tt></em>]</span>.
  Note that when an array is passed as an argument to a function in
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, it is actually passed as a pointer; you therefore have to
  write <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> ...))</tt> for this
  argument's type.</dd><dt><a id="c-array-max"></a><tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <em class="replaceable"><tt>c-type</tt></em> <em class="replaceable"><tt>maxdimension</tt></em>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> [<em class="replaceable"><tt>maxdimension</tt></em>]</span>, an array containing up to
  <em class="replaceable"><tt>maxdimension</tt></em> elements.
  The array is zero-terminated if it contains less than <em class="replaceable"><tt>maxdimension</tt></em> elements.
  Conversion from Lisp of an array with more than <em class="replaceable"><tt>maxdimension</tt></em> elements
  silently ignores the superfluous elements.
  </dd><dt><a id="c-function"></a><tt class="type">(<a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a> (<tt class="constant">:ARGUMENTS</tt>
      {(<em class="replaceable"><tt>argument</tt></em> <em class="replaceable"><tt>a-c-type</tt></em>
        [<a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode"><em class="replaceable"><tt>PARAM-MODE</tt></em></a> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>]])}*)
    (<tt class="constant">:RETURN-TYPE</tt> <em class="replaceable"><tt>r-c-type</tt></em> [<a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a>])
    (<a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <em class="replaceable"><tt>language</tt></em>))</tt></dt><dd>This type designates a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function that can be
  called according to the given prototype <tt class="code">(<em class="replaceable"><tt>r-c-type</tt></em> (*)
  (<em class="replaceable"><tt>a-c-type<sub>1</sub></tt></em>, ...))</tt>.
  Conversion between <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions and Lisp functions
  is transparent, and <tt class="constant">NULL</tt>/<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is recognized and
  accepted.</dd><dt><a id="c-ptr"></a><tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
              <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><tt>c-type</tt></em>.</dd><dt><a id="c-ptr-null"></a><tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>This type is also equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><tt>c-type</tt></em>, with the exception that <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <tt class="constant">NULL</tt> corresponds to
  Lisp <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="c-array-ptr"></a><tt class="type">(<a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> <em class="replaceable"><tt>c-type</tt></em>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><tt>c-type</tt></em> (*)[]</span>: a pointer to a zero-terminated array of
  items of the given <em class="replaceable"><tt>c-type</tt></em>.</dd></dl></div>
<!--#ifdef UNICODE--><p><a href="impnotes.html#foreign-enc" class="olink"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a> governs conversion for any <em class="replaceable"><tt>c-type</tt></em> involving
 <a href="#c-string"><span class="type">FFI:C-STRING</span></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> (but not <span class="type">char</span>).</p>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="c-flavor"></a>31.3.3. The choice of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> flavor.</h3></div></div></div><p><a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a>, <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>, <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> take a <a href="#c-flavor" title="31.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> argument.
The <em class="replaceable"><tt>language</tt></em> is either <tt class="constant">:C</tt> (denotes K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>) or <tt class="constant">:STDC</tt>
(denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>) or <tt class="constant">:STDC-STDCALL</tt> (denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
with the <span class="emphasis"><em>stdcall</em></span> calling convention).
It specifies whether the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function (caller or callee) has been
compiled by a K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler or by an ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler,
and possibly the calling convention.</p><p>The default language is set using the macro
 <tt class="function">FFI:DEFAULT-FOREIGN-LANGUAGE</tt>.
If this macro has not been called in the current <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit" target="_top">compilation unit</a>
 (usually a file), a warning is issued and
<tt class="constant">:STDC</tt> is used for the rest of the unit.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-variables"></a>31.3.4. Foreign variables</h3></div></div></div><p>Foreign variables are variables whose storage is allocated in the
 foreign language module.  They can nevertheless be evaluated and
 modified through <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a>, just as normal variables can, except that the
 range of allowed values is limited according to the variable's foreign
 type.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>For a foreign variable <em class="replaceable"><tt>x</tt></em> the form <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> <em class="replaceable"><tt>x</tt></em>
 <em class="replaceable"><tt>x</tt></em>)</tt> is not necessarily true, since every time <em class="replaceable"><tt>x</tt></em> is
 evaluated its foreign value is converted to a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> Lisp value.
 Foreign variables are defined using <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-places"></a>31.3.5. Operations on foreign places</h3></div></div></div><p>A <a href="#dffi-variables" title="31.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> <em class="replaceable"><tt>name</tt></em> defined by <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>, <a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a>
 or <a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a> defines a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>,
 i.e., a form which can also be used as argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>.
 (An "lvalue" in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> terminology.)
 The following operations are available on foreign places:
 <a href="#element"><tt class="function">FFI:ELEMENT</tt></a>, <a href="#deref"><tt class="function">FFI:DEREF</tt></a>, <a href="#slot"><tt class="function">FFI:SLOT</tt></a>, <a href="#cast"><tt class="function">FFI:CAST</tt></a>, <a href="#offset"><tt class="function">FFI:OFFSET</tt></a>, <a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a>,
 <a href="#c-var-object"><tt class="function">FFI:C-VAR-OBJECT</tt></a>, <a href="#typeof"><tt class="function">FFI:TYPEOF</tt></a>, <a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a>, <a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-functions"></a>31.3.6. Foreign functions</h3></div></div></div><p>Foreign functions are functions which are defined in the foreign
 language.  There are <strong class="first"><em class="firstterm">named foreign functions</em></strong>
 (imported via <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> or created via <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>) and
 <strong class="first"><em class="firstterm">anonymous foreign functions</em></strong>; they arise through
 conversion of function pointers.</p><p>A <strong class="first"><em class="firstterm">call-out function</em></strong> is a foreign function
 called from Lisp: control flow temporarily leaves Lisp.
 A <strong class="first"><em class="firstterm">call-in function</em></strong> is a Lisp function called
 from the foreign language: control flow temporary enters Lisp.</p><p>The following operators define foreign functions: <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>,
 <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>, <a href="#def-c-call-in"><tt class="function">FFI:DEF-C-CALL-IN</tt></a>, <a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a>, <a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="allocation"></a>31.3.7. Argument and result passing conventions</h3></div></div></div><p>When passed to and from functions, allocation of arguments and
 results is handled as follows:</p><p>Values of <a href="#simple-c-type"><em class="replaceable"><tt>SIMPLE-C-TYPE</tt></em></a>, <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> are passed on the stack,
 with dynamic extent. The <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is effectively ignored.</p><p>Values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>, <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a>
 need storage.  The <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> specifies the allocation policy:
</p><div class="variablelist"><dl><dt><tt class="constant">:NONE</tt></dt><dd>no storage is allocated.
</dd><dt><tt class="constant">:ALLOCA</tt></dt><dd>allocation of storage on the stack, which has
   dynamic extent.</dd><dt><tt class="constant">:MALLOC-FREE</tt></dt><dd>storage will be allocated via <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and freed via
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a>.</dd></dl></div><p>If no <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is specified, the default <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is
 <tt class="constant">:NONE</tt> for most types, but <tt class="constant">:ALLOCA</tt> for <a href="#c-string"><span class="type">FFI:C-STRING</span></a> and <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> and
 <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> and <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> and for <tt class="constant">:OUT</tt> arguments. [Subject to
 change!]  The <tt class="constant">:MALLOC-FREE</tt> policy provides the ability to pass
 arbitrarily nested structs containing pointers pointing to structs
 ... within a single conversion.</p><div class="variablelist"><dl><dt>For call-out functions:</dt><dd><div class="variablelist"><dl><dt>For arguments passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp allocates the storage using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and
     never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function is supposed to call
     <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> when done with it.</dd><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:ALLOCA</tt>:</dt><dd>Lisp allocates the storage on the stack, with
     dynamic extent.  It is freed when the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function returns.
    </dd><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </dd></dl></div></dd><dt>For results passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> to Lisp:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> on it when done.
    </dd><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp does nothing.
    </dd></dl></div></dd></dl></div></dd><dt>For call-in functions:</dt><dd><div class="variablelist"><dl><dt>For arguments passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> to Lisp:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> on it when done.
     </dd><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:ALLOCA</tt> or <tt class="constant">:NONE</tt>:</dt><dd>Lisp does nothing.
     </dd></dl></div></dd><dt>For results passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp allocates the storage using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and
      never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function is supposed to call
      <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> when done with it.</dd><dt>If <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </dd></dl></div></dd></dl></div></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="ffi-struct-arg"></a>Warning</h3><p>Passing <a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>, <a href="#c-union"><span class="type">FFI:C-UNION</span></a>,
  <a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> values as arguments (not via pointers) is
  only possible to the extent the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler supports it.
  Most <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compilers do it right, but some <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compilers
  (such as <a href="http://gcc.gnu.org/" target="_top"><span><strong class="command">gcc</strong></span></a> on hppa and <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>) have problems with this.
  The recommended workaround is to pass pointers; this is fully supported.
  See also this <tt class="email">&lt;<a href="mailto:clisp-list/at/sf.net"><a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">clisp-list/at/sf.net</a></a>&gt;</tt>
  <a href="http://article.gmane.org/gmane.lisp.clisp.devel/10089" target="_top">message</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="param-mode"></a>31.3.8. Parameter Mode</h3></div></div></div><p>A function parameter's <a href="#param-mode" title="31.3.8.&#xA0;Parameter Mode"><em class="replaceable"><tt>PARAM-MODE</tt></em></a> may be</p><div class="variablelist"><dl><dt><tt class="constant">:IN</tt> (means: read-only):</dt><dd>The caller passes information to the callee.
  </dd><dt><tt class="constant">:OUT</tt> (means: write-only):</dt><dd>The callee passes information back to the caller on
   return.  When viewed as a Lisp function, there is no Lisp argument
   corresponding to this, instead it means an additional return value.
  </dd><dt><tt class="constant">:IN-OUT</tt> (means: read-write):</dt><dd>Information is passed from the caller to the callee
   and then back to the caller.  When viewed as a Lisp function, the
   <tt class="constant">:OUT</tt> value is returned as an additional multiple value.
  </dd></dl></div><p>The default is <tt class="constant">:IN</tt>.</p><p>[Currently, only <tt class="constant">:IN</tt> is fully implemented.  <tt class="constant">:OUT</tt> works only
 with <a href="#allocation" title="31.3.7.&#xA0;Argument and result passing conventions"><em class="replaceable"><tt>ALLOCATION</tt></em></a> = <tt class="constant">:ALLOCA</tt>.]</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-examples"></a>31.3.9. Examples</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-ex-more">31.3.9.1. More examples</a></span></dt></dl></div><div class="example"><a id="dffi-simple"></a><p class="title"><b>Example 31.1. Simple declarations and access</b></p><p>The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> declaration

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct foo {
    int a;
    struct foo * b[100];
};
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct foo
  (a int)
  (b (c-array (c-ptr foo) 100)))
</pre></td></tr></table><p>The element access

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct foo f;
f.b[7].a
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(declare (type foo f))
(foo-a (aref (foo-b f) 7)) or (slot-value (aref (slot-value f 'b) 7) 'a)
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-var"></a><p class="title"><b>Example 31.2. external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variable and some accesses</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct bar {
    short x, y;
    char a, b;
    int z;
    struct bar * n;
};

extern struct bar * my_struct;

my_struct-&gt;x++;
my_struct-&gt;a = 5;
my_struct = my_struct-&gt;n;
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct bar
  (x short)
  (y short)
  (a char)
  (b char) ; or (b character) if it represents a character, not a number
  (z int)
  (n (c-ptr bar)))

(def-c-var my_struct (:type (c-ptr bar)))

(setq my_struct (let ((s my_struct)) (incf (slot-value s 'x)) s))
or (incf (slot my_struct 'x))
(setq my_struct (let ((s my_struct)) (setf (slot-value s 'a) 5) s))
or (setf (slot my_struct 'a) 5)
(setq my_struct (slot-value my_struct 'n))
or (setq my_struct (deref (slot my_struct 'n)))
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-func1"></a><p class="title"><b>Example 31.3. Calling an external function</b></p><p>On ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> systems, <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdlib.h.html" target="_top"><tt class="filename">&lt;stdlib.h&gt;</tt></a> contains the declarations:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
typedef struct {
  int quot;   /* Quotient */
  int rem;    /* Remainder */
} div_t;
extern div_t div (int numer, int denom);
</pre></td></tr></table><p>

This translates to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct (div_t :typedef)
  (quot int)
  (rem int))
(default-foreign-language :stdc)
(def-call-out div (:arguments (numer int) (denom int))
  (:return-type div_t))
</pre></td></tr></table><p>

Sample call from within Lisp:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(div 20 3)
<span class="returnvalue">#S(DIV_T :QUOT 6 :REM 2)</span>
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-func2"></a><p class="title"><b>Example 31.4. Another example for calling an external function</b></p><p>Suppose the following is defined in a file
 <tt class="filename">cfun.c</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct cfunr { int x; char *s; };
struct cfunr * cfun (int i,char *s,struct cfunr * r,int a[10]) {
  int j;
  struct cfunr * r2;
  printf("i = %d\n", i);
  printf("s = %s\n", s);
  printf("r-&gt;x = %d\n", r-&gt;x);
  printf("r-&gt;s = %s\n", r-&gt;s);
  for (j = 0; j &lt; 10; j++) printf("a[%d] = %d.\n", j, a[j]);
  r2 = (struct cfunr *) malloc (sizeof (struct cfunr));
  r2-&gt;x = i+5;
  r2-&gt;s = "A C string";
  return r2;
}
</pre></td></tr></table><p>

It is possible to call this function from Lisp using the file
<tt class="filename">callcfun.lisp</tt> (do not call it
<tt class="filename">cfun.lisp</tt> - <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> will
<a href="#c-file-overwrite">overwrite</a>
<tt class="filename">cfun.c</tt>) whose contents is:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "TEST-C-CALL" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "TEST-C-CALL")
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-c-struct cfunr (x int) (s c-string))
(default-foreign-language :stdc)
(def-call-out cfun
    (:arguments (i int)
                (s c-string)
                (r (c-ptr cfunr) :in :alloca)
                (a (c-ptr (c-array int 10)) :in :alloca))
  (:return-type (c-ptr cfunr)))
(defun call-cfun ()
  (cfun 5 "A Lisp string" (make-cfunr :x 10 :s "Another Lisp string")
        '#(0 1 2 3 4 5 6 7 8 9)))
</pre></td></tr></table><p>

Use the <a href="#modules" title="31.2.&#xA0;External Modules">module</a> facility:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
$ clisp-link create-module-set cfun callcfun.c
$ cc -O -c cfun.c
$ cd cfun
$ ln -s ../cfun.o cfun.o
Add cfun.o to NEW_LIBS and NEW_FILES in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c callcfun.lisp
$ clisp-link add-module-set cfun base base+cfun
$ base+cfun/lisp.run -M base+cfun/lispinit.mem -i callcfun
&gt; (test-c-call::call-cfun)
i = 5
s = A Lisp string
r-&gt;x = 10
r-&gt;s = Another Lisp string
a[0] = 0.
a[1] = 1.
a[2] = 2.
a[3] = 3.
a[4] = 4.
a[5] = 5.
a[6] = 6.
a[7] = 7.
a[8] = 8.
a[9] = 9.
#S(TEST-C-CALL::CFUNR :X 10 :S "A C string")
&gt;
$ rm -r base+cfun
</pre></td></tr></table><p>Note that there is a memory leak here: The return value
<tt class="varname">r2</tt> of <tt class="function">cfun()</tt> is
<a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed but never <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a>d. Specifying
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(:return-type (c-ptr cfunr) :malloc-free)
</pre></td></tr></table><p>
is not an alternative because this would also
<tt class="function">free(r2-&gt;x)</tt> but <tt class="varname">r2-&gt;x</tt> is a
pointer to static data.</p><p>The memory leak can be avoided using
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(:return-type (c-pointer cfunr))
</pre></td></tr></table><p>
instead, in conjunction with
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defun call-cfun ()
  (let ((data (cfun ...)))
    (prog1 (<a href="#foreign-value"><tt class="function">FFI:FOREIGN-VALUE</tt></a> data)
      (<a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> data :FULL nil))))
</pre></td></tr></table></div><div class="example"><a id="ex-call-in"></a><p class="title"><b>Example 31.5. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></b></p><p>To sort an array of double-floats using the Lisp function <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a>
 instead of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library function <a href="http://www.opengroup.org/onlinepubs/007904975/functions/qsort.html" target="_top"><tt class="function">qsort</tt></a>, one can use the
 following interface code <tt class="filename">sort1.c</tt>.
 The main problem is to pass a variable-sized array.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
extern void lispsort_begin (int);
void* lispsort_function;
void lispsort_double (int n, double * array) {
    double * sorted_array;
    int i;
    lispsort_begin(n); /* store #'sort2 in lispsort_function */
    sorted_array = ((double * (*) (double *)) lispsort_function) (array);
    for (i = 0; i &lt; n; i++) array[i] = sorted_array[i];
    free(sorted_array);
}
</pre></td></tr></table><p>

This is accompanied by <tt class="filename">sort2.lisp</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "FFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "FFI-TEST")
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-call-in lispsort_begin (:arguments (n int))
  (:return-type nil)
  (:language :stdc))
(def-c-var lispsort_function (:type c-pointer))
(defun lispsort_begin (n)
  (setf (cast lispsort_function
              `(c-function
                 (:arguments (v (c-ptr (c-array double-float ,n))))
                 (:return-type (c-ptr (c-array double-float ,n))
                               :malloc-free)))
        #'sort2))
(defun sort2 (v)
  (declare (type vector v))
  (sort v #'&lt;))
</pre></td></tr></table><p>

To test this, use the following test file <tt class="filename">sorttest.lisp</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-call-out sort10
  (:name "lispsort_double")
  (:language :stdc)
  (:arguments (n int)
              (array (c-ptr (c-array double-float 10)) :in-out)))
</pre></td></tr></table><p>

Now try

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
$ clisp-link create-module-set sort sort2.c sorttest.c
$ cc -O -c sort1.c
$ cd sort
$ ln -s ../sort1.o sort1.o
</pre></td></tr></table><p>

Add <tt class="filename">sort1.o</tt> to <tt class="envar">NEW_LIBS</tt>
and <tt class="envar">NEW_FILES</tt> in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
Create a file <tt class="filename">package.lisp</tt> containing the
form <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "FFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>
<a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))</tt> and add <tt class="filename">package.lisp</tt>
to <a href="#mod-preload"><tt class="envar">TO_PRELOAD</tt></a> in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
Proceed:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c sort2.lisp sorttest.lisp
$ clisp-link add-module-set sort base base+sort
$ base+sort/lisp.run -M base+sort/lispinit.mem -i sort2 sorttest
&gt; (sort10 10 '#(0.501d0 0.528d0 0.615d0 0.550d0 0.711d0
                0.523d0 0.585d0 0.670d0 0.271d0 0.063d0))
#(0.063d0 0.271d0 0.501d0 0.523d0 0.528d0 0.55d0 0.585d0 0.615d0 0.67d0 0.711d0)
$ rm -r base+sort
</pre></td></tr></table></div><div class="example"><a id="ex-call-in-dll"></a><p class="title"><b>Example 31.6. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> dynamically</b></p><p>Create a dynamic library <tt class="filename">lispdll</tt>
 (<tt class="filename">#P".dll"</tt> on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>,
  <tt class="filename">#P".so"</tt> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>)
  with the following function:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
typedef int (*LispFunc)(int parameter);
int CallInFunc(LispFunc f) {
  return f(5)+11;
}
</pre></td></tr></table><p>
  and call it from Lisp:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(ffi:def-call-out callout
  (:name "CallInFunc")
  (:library "lispdll.dll")
  (:arguments (function-arg
               (ffi:c-function (:arguments (number ffi:int))
                               (:return-type ffi:int) (:language :stdc))))
  (:return-type ffi:int)
  (:language :stdc))
(defun f (x) (* x 2))
<span class="returnvalue">F</span>
(callout #'f)
<span class="returnvalue">21</span>
</pre></td></tr></table></div><div class="example"><a id="dffi-gethostname"></a><p class="title"><b>Example 31.7. Variable size arguments:
  calling <a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostname.html" target="_top"><tt class="function">gethostname</tt></a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><div class="funcsynopsis"><a id="gethostname-synopsis"></a><p><code class="funcdef">int <b class="fsfunc">gethostname</b>(</code><var class="pdparam">name</var>, <var class="pdparam">namelen</var><code>)</code>;<br /><code>char*</code> <code>name</code>;<br /><code>size_t</code> <code>namelen</code>;</p></div><p>
 follows a typical pattern of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> "out"-parameter convention - it
 expects a pointer to a buffer it is going to fill.
 So you must view this parameter as either <tt class="constant">:OUT</tt> or <tt class="constant">:IN-OUT</tt>.
 Additionaly, one must tell the function the size of the buffer.
 Here <em class="replaceable"><tt>namelen</tt></em> is just an <tt class="constant">:IN</tt> parameter.
 Sometimes this will be an <tt class="constant">:IN-OUT</tt> parameter, returning the
 number of bytes actually filled in.</p><p>So <em class="replaceable"><tt>name</tt></em> is actually a pointer to an array of up to
 <em class="replaceable"><tt>namelen</tt></em> characters, regardless of what the
 poor <span class="type">char*</span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> prototype says, to be used like a
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <span class="type">string</span> (<tt class="constant">NULL</tt>-termination).  <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> specifies
 that “<span class="quote">host names are limited to
  <tt class="constant">HOST_NAME_MAX</tt> bytes</span>”, which is, of course,
 system dependent, but it appears that 256 is sufficient.</p><p>In the present example, you can use allocation <tt class="constant">:ALLOCA</tt>, like
 you would do in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>: stack-allocate a temporary.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a> gethostname
  (:arguments (name (<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> ffi:char 256))
                    <tt class="constant">:OUT</tt> <tt class="constant">:ALLOCA</tt>)
              (len ffi:int))
  (:return-type ffi:int))

(defun myhostname ()
  (multiple-value-bind (success name)
      ;; <tt class="constant">:OUT</tt> and <tt class="constant">:IN-OUT</tt> parameters are returned as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>
      (gethostname 256)
    (if (zerop success) name
        (error ...)))) ;; <a href="http://www.opengroup.org/onlinepubs/007904975/functions/strerror.html" target="_top"><tt class="function">strerror</tt></a>(<a href="http://www.opengroup.org/onlinepubs/007904975/functions/errno.html" target="_top"><tt class="varname">errno</tt></a>)

(defvar hostname (myhostname))
</pre></td></tr></table></div><div class="example"><a id="dffi-dll-var"></a><p class="title"><b>Example 31.8. Accessing variables in shared libraries.</b></p><p>Suppose one wants to access and modify variables that reside in
 shared libraries:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct bar {
  double x, y;
  double out;
};

struct bar my_struct = {10.0, 20.5, 0.0};

double test_dll(struct bar *ptr)
{
  return ptr-&gt;out = ptr-&gt;out + ptr-&gt;x + ptr-&gt;y;
}
</pre></td></tr></table><p>This is compiled to <tt class="filename">libtest.so</tt> (or
 <tt class="filename">libtest.dll</tt>, depending on your platform).</p><p>Use the following lisp code:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>)

(<a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a> bar
  (x double-float)
  (y double-float)
  (out double-float))

(<a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> get-own-c-float
  (:library "libtest.so")
  (:language :stdc)
  (:name "test_dll")
  (:arguments (ptr c-pointer :in :alloca))
  (:return-type double-float))

(<a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a> my-c-var (:name "my_struct")
  (:library "libtest.so") (:type (c-ptr bar)))
</pre></td></tr></table><p>Note that <tt class="function">get-own-c-float</tt> takes a
 <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>, not a <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> bar)</tt> as the
 argument.</p><p>Now you can access call <tt class="function">get-own-c-float</tt> on
<tt class="varname">my-c-var</tt>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a> my-c-var)
<span class="returnvalue">#&lt;FOREIGN-ADDRESS #x282935D8&gt;</span>
(get-own-c-float (<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a> my-c-var))
<span class="returnvalue">30.5d0</span>
(get-own-c-float (<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a> my-c-var))
<span class="returnvalue">61.0d0</span>
(get-own-c-float (<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a> my-c-var))
<span class="returnvalue">91.5d0</span>
(get-own-c-float (<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a> my-c-var))
<span class="returnvalue">122.0d0</span>
</pre></td></tr></table></div><div class="example"><a id="ex-dffi-validity"></a><p class="title"><b>Example 31.9. Controling validity of ressources.</b></p><p><a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a> is useful in conjunction with (setf <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>) to
limit the extent of external resources. Closing twice can be avoided by
checking <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>. All pointers depending on this resource can be
disabled at once upon close by sharing their <a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> using
<a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a>.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-type PGconn c-pointer) ; opaque pointer
(def-call-out PQconnectdb (:return-type PGconn)
  (:arguments (conninfo c-string)))
(defun sql-connect (conninfo)
  (let ((conn (PQconnectdb conninfo)))
    (unless conn (error "NULL pointer"))
    ;; may wish to use <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> as well
    (<a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a> conn <tt class="constant">:COPY</tt>)))
(defun sql-dependent-resource (conn arg1)
  (let ((res (PQxxx conn arg1)))
    (<a href="#fptr"><tt class="function">FFI:SET-FOREIGN-POINTER</tt></a> res conn)))
(defun sql-close (connection)
  (when (<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> connection)
    (PQfinish connection)
    (setf (<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> connection) nil)
    T))
</pre></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="dffi-ex-more"></a>31.3.9.1. More examples</h4></div></div></div><p>You can find more information and examples of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> in the following <tt class="email">&lt;<a href="mailto:clisp-list/at/sf.net"><a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">clisp-list/at/sf.net</a></a>&gt;</tt> messages:
 </p><div class="itemizedlist"><ul type="disc"><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/7278" target="_top">"variable size values"</a></li><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/6626" target="_top">"variable length arrays"</a></li></ul></div><p>
</p></div></div></div>
<!--#endif-->
<!--#ifdef HAVE_AFFI--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="affi"></a>31.4. The Amiga Foreign Function Call Facility</h2></div><div><h3 class="subtitle">Platform dependent: no platform supports this currently.</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></div><p><b>Another Foreign Function Interface. </b>All symbols relating to the simple foreign function interface are
 exported from the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>. To use them,
 <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> "AFFI")</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-design"></a>31.4.1. Design issues</h3></div></div></div><p><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> was designed to be small in size but powerful enough to
use most library functions.  Lisp files may be compiled to <tt class="filename">#P".fas"</tt>
files without the need to load function definition files at run-time and
without external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> or linker support.
<a href="impnotes.html#image" class="olink">memory image</a>s can be created, provided that the function libraries are
opened at run-time.</p><p>Therefore, <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> supports only primitive <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types
(integers 8, 16 and 32 bits wide, signed or unsigned, pointers) and
defines no new types or classes.  Foreign functions are not first-class
objects (you can define a λ yourself), name spaces are
separate.</p><p>The <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> does no tracking of resources.  Use <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-overview"></a>31.4.2. Overview</h3></div></div></div><p>These are the <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> forms:</p><p><tt class="code">(declare-library-base
 <em class="replaceable"><tt>keyword-base</tt></em> <em class="replaceable"><tt>library-name</tt></em>)</tt></p><p><tt class="code">(require-library-functions <em class="replaceable"><tt>library-name</tt></em>
 [(:import {<em class="replaceable"><tt>string-name</tt></em>}*)])</tt></p><p><tt class="code">(open-library <em class="replaceable"><tt>base-symbol</tt></em>)</tt></p><p><tt class="code">(close-library <em class="replaceable"><tt>base-symbol</tt></em>)</tt></p><p><tt class="code">(with-open-library (<em class="replaceable"><tt>base-symbol</tt></em> |
 <em class="replaceable"><tt>library-name</tt></em>) {<em class="replaceable"><tt>form</tt></em>}*)</tt></p><p><tt class="code">(defflibfun <em class="replaceable"><tt>function-name</tt></em>
 <em class="replaceable"><tt>base-symbol</tt></em>
 <em class="replaceable"><tt>offset</tt></em> <em class="replaceable"><tt>mask</tt></em>
 <em class="replaceable"><tt>result-type</tt></em>
 {<em class="replaceable"><tt>argument-type</tt></em>}*)</tt></p><p><tt class="code">(declare-library-function
 <em class="replaceable"><tt>function-name</tt></em>
 <em class="replaceable"><tt>library-name</tt></em> {<em class="replaceable"><tt>option</tt></em>}*)</tt></p><p><tt class="code">(flibcall <em class="replaceable"><tt>function-name</tt></em>
 {<em class="replaceable"><tt>argument</tt></em>}*)</tt></p><p><tt class="code">(mlibcall <em class="replaceable"><tt>function-name</tt></em>
 {<em class="replaceable"><tt>argument</tt></em>}*)</tt></p><p><tt class="code">(mem-read <em class="replaceable"><tt>address</tt></em>
  <em class="replaceable"><tt>result-type</tt></em> [<em class="replaceable"><tt>offset</tt></em>])</tt></p><p><tt class="code">(mem-write <em class="replaceable"><tt>address</tt></em> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>value</tt></em>
 [<em class="replaceable"><tt>offset</tt></em>])</tt></p><p><tt class="code">(mem-write-vector <em class="replaceable"><tt>address</tt></em>
  <em class="replaceable"><tt>vector</tt></em> [<em class="replaceable"><tt>offset</tt></em>])</tt></p><p><tt class="code">(nzero-pointer-p <em class="replaceable"><tt>value</tt></em>)</tt></p><p>Except for <tt class="function">with-open-library</tt>,
<tt class="function">declare-library-function</tt> and
<tt class="function">mlibcall</tt>, all of the above are functions.</p><p>A library contains a collection of functions.  The library is
referred to by a symbol referred as library-base at the <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
level.  This symbol is created in the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
The link between this symbol and the OS-level library name is
established by <tt class="function">declare-library-base</tt>.  To avoid
multiple package conflicts, this and only this function requires the
symbol-name to be in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a> package. The function returns the
library-base.</p><p>A library may be opened by <tt class="function">open-library</tt> and
 closed by <tt class="function">close-library</tt>. An opened library must be
 closed. <tt class="function">with-open-library</tt> is provided to
 automatically close the library for you, thus it is much safer to
 use.</p><p>A function is contained in a library.  Every function is referred
to by a symbol.  A function is defined through
<tt class="function">defflibfun</tt> or
<tt class="function">declare-library-function</tt> by giving the function
name, the library-base, an offset into the library, a mask (or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)
for register-based library calls, the result type and all
parameter-types.  <tt class="function">require-library-functions</tt> loads
the complete set of functions defined in a library file. Symbols are
created in the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> and imported into the current
package.</p><p><tt class="function">flibcall</tt> and <tt class="function">mlibcall</tt>
call library functions. <tt class="function">mlibcall</tt> is a macro that
does a few checks at macroexpansion time and allows the compiler to
inline the call, not requiring the foreign function to be defined again
at load or execution time. The use of this macro is advertised wherever
possible.</p><p><tt class="function">mem-read</tt> reads an arbitrary address (with
offset for structure references) and returns the given type.</p><p><tt class="function">mem-write</tt> writes an arbitrary
address. <tt class="function">mem-write-vector</tt> copies the content of a
Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> into memory.</p><p><tt class="function">nzero-pointer-p</tt> tests for
non-<tt class="constant">NULL</tt> pointers in all recognized representations
(<a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-libs"></a>31.4.3. Foreign Libraries</h3></div></div></div><p><tt class="function">declare-library-base</tt> ought to be wrapped in an
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> (compile eval load) ...)</tt>
form and come before any function is referenced, because the library
base symbol must be known.</p><p><tt class="function">open-library</tt> tries to open the library
referenced by the base symbol.  Therefore it must have been preceded
with <tt class="function">declare-library-base</tt>.  The call returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
on failure. <tt class="function">open-library</tt> calls nest.  Every
successful call must be matched by <tt class="function">close-library</tt>.
<tt class="function">with-open-library</tt> does this for you and also allows
you to specify the library by name, provided that its base has been
declared.  It is recommended to use this macro and to reference the
library by name.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will not close libraries for you at program exit.  [A
previous version did so but now <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> is a module and there are no
module exit functions.]  Programmers, watch
<tt class="function">AFFI::*LIBRARIES-ALIST*</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-types"></a>31.4.4. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types</h3></div></div></div><p>The following foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types are used in <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
They are <strong>not</strong> regular <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes.
</p><div class="informaltable"><a id="affi-types-tab"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> equivalent</th><th align="center">Comment</th><td class="auto-generated"> </td></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><span class="type">void</span></td><td align="center">as a result type for functions only</td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">4</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">unsigned long</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">2</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">unsigned short</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">1</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">unsigned char</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-4</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">long</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-2</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">short</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-1</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">signed char</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">0</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><span class="type">BOOL</span></td><td align="center">as a result type for functions only</td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">*</span></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="constant">:EXTERNAL</tt></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="constant">:IO</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr></tbody></table></div><p>Objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> are copied and passed
<tt class="constant">NULL</tt>-terminated on the execution stack.  On return, a Lisp string is
allocated and filled from the address returned (unless <tt class="constant">NULL</tt>).
Functions with <tt class="constant">:IO</tt> parameters are passed the address of the Lisp
string or unsigned byte vector. These are not <tt class="constant">NULL</tt>-terminated!
This is useful for functions like like <a href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html" target="_top"><tt class="function">read</tt></a> which do not need an
array at a constant address longer than the dynamic extent of the call
(it is dangerous to define callback functions with <tt class="constant">:IO</tt> - or
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> - type parameters).
Arguments of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> are always
acceptable where a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="constant">:IO</tt> type is specified.</p>
<!--#ifdef UNICODE--><p>See also <a href="impnotes.html#foreign-enc" class="olink"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p>
<!--#endif-->
<p>To meet the design goals, predefined types and objects were
used. As such, pointers were represented as integers. Now that there is
the <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> type, both representations may be used on input.
The pointer type should be therefore considered as opaque.
Use <tt class="function">nzero-pointer-p</tt> for <tt class="constant">NULL</tt> tests.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-functions"></a>31.4.5. Foreign functions</h3></div></div></div><p>Foreign Functions are declared either through
<tt class="function">defflibfun</tt> or
<tt class="function">declare-library-function</tt>.  The former is closer to
the low-level implementation of the interface, the latter is closer to
the other <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p><tt class="function">defflibfun</tt> requires the library base symbol
and register mask to be specified,
<tt class="function">declare-library-function</tt> requires the library name
and computes the mask from the declaration of the arguments.</p><p>The value of mask is implementation-dependent.</p><p>The <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> type <tt class="literal">0</tt> is only acceptable as a
function result type and yields either <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. The difference
between <tt class="function">*</tt> and <tt class="constant">:EXTERNAL</tt> is the following:
<tt class="function">*</tt> uses integers, <tt class="constant">:EXTERNAL</tt> uses
<a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> as function result-type (except from <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> for a
<tt class="constant">NULL</tt> pointer) and refuses objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or
<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> as input.  Thus <tt class="constant">:EXTERNAL</tt> provides some security
on the input and the ability to use <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> for resource-tracking on
the output side.</p><p><tt class="code">(declare-library-function <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>library-name</tt></em>
 {<em class="replaceable"><tt>option</tt></em>}*)</tt>

</p><div class="variablelist"><dl><dt><em class="replaceable"><tt>option</tt></em> ::==</dt><dd><div class="informaltable"><a id="affi-dec-lib-fun-opt-bnf"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="left"> </td><td align="left"><tt class="code">(:offset
    <em class="replaceable"><tt>library-offset</tt></em>)</tt></td></tr><tr><td align="left">|</td><td align="left"><tt class="code">(<tt class="constant">:ARGUMENTS</tt>
    {(<em class="replaceable"><tt>argument</tt></em> <em class="replaceable"><tt><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</tt></em>
      <em class="replaceable"><tt>register</tt></em>)}*)</tt></td></tr><tr><td align="left">|</td><td align="left"><tt class="code">(:return-type
    <em class="replaceable"><tt><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</tt></em>)</tt></td></tr></tbody></table></div></dd><dt><em class="replaceable"><tt>register</tt></em> ::==</dt><dd><tt class="constant">:d0</tt> | <tt class="constant">:d1</tt>
 | ... | <tt class="constant">:d7</tt> | <tt class="constant">:a0</tt> | ... |
 <tt class="constant">:a6</tt></dd></dl></div><p>

declares a named library function for further reference through
<tt class="function">flibcall</tt> and <tt class="function">mlibcall</tt>.</p><p><tt class="function">mlibcall</tt> should be the preferred way of
calling foreign functions (when they are known at compile-time) as
macroexpansion-time checks may be performed and the call can be sort of
inlined.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-memory-access"></a>31.4.6. Memory access</h3></div></div></div><p><tt class="code">(affi:mem-read <em class="replaceable"><tt>address</tt></em> <em class="replaceable"><tt>type</tt></em>
  <em class="replaceable"><tt>offset</tt></em>)</tt> can read 8, 16 and 32 bit
signed or unsigned integers (<a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> types <span class="type">-4</span>,
<span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>, <span class="type">2</span>,
<span class="type">4</span>), a pointer (<span class="type">*</span>), a <tt class="constant">NULL</tt>-terminated
string (<span class="type">string</span>) or, if the type argument is of type
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>, it can fill this vector.
<tt class="constant">:EXTERNAL</tt> is not an acceptable type as no object can be created by
using <tt class="function">affi:mem-read</tt>.</p><p><tt class="code">(affi:mem-write <em class="replaceable"><tt>address</tt></em> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>value</tt></em>
[<em class="replaceable"><tt>offset</tt></em>])</tt> writes integers (<a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
type <span class="type">-4</span>, <span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>,
<span class="type">2</span> and <span class="type">4</span>) or pointer values (type
<span class="type">*</span>), but not vectors to the specified memory address.</p><p><tt class="code">(affi:mem-write-vector <em class="replaceable"><tt>address</tt></em>
  <em class="replaceable"><tt>vector</tt></em> [<em class="replaceable"><tt>offset</tt></em>])</tt> can write
memory from the given vector (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>).
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-func-def"></a>31.4.7. Function Definition Files</h3></div></div></div><p><tt class="function">affi:require-library-functions</tt> will <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> a
file of name derived from thelibrary name and with type
<tt class="filename">affi</tt>. It may be used to import all names into the
current package or only a given subset identified by string names, using
the <tt class="constant">:import</tt> keyword (recommended use).
Some definition files for standard Amiga libraries are provided.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;31.10.&#xA0;Using a predefined library function file">Example 31.10, “Using a predefined library function file”</a> below.</p><p>As <tt class="function">affi:require-library-functions</tt> loads a
global file which you, the programmer, may have not defined, you may
consider declaring every function yourself to be certain what the return
and argument types are.
See <a href="#affi-ex-4-sample" title="Example&#xA0;31.13.&#xA0;Some sample function definitions">Example 31.13, “Some sample function definitions”</a> below.</p><p>The file <tt class="filename">read-fd.lisp</tt> defines the function
<tt class="function">make-partial-fd-file</tt> with which the provided
<tt class="filename">.affi</tt> files have been prepared from the original
Amiga FD files (located in the directory <tt class="filename">FD:</tt>).
They must still be edited as the function cannot know whether a function
accepts a <tt class="function">*</tt>, <tt class="constant">:IO</tt>,
<tt class="function">string</tt> or <tt class="constant">:EXTERNAL</tt> argument and because files
in <tt class="filename">FD:</tt> only contain a register specification, not
the width of integer arguments (<tt class="literal">-4</tt>,
<tt class="literal">-2</tt>, <tt class="literal">-1</tt>, <tt class="literal">1</tt>,
<tt class="literal">2</tt>, or <tt class="literal">4</tt>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-hints"></a>31.4.8. Hints</h3></div></div></div><p>By using appropriate <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> forms for
<tt class="function">affi:declare-library-base</tt> and
<tt class="function">affi:require-library-functions</tt> and not using
<tt class="function">affi:flibcall</tt>, it is possible to write code that
only loads library function definition files at compile-time.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;31.10.&#xA0;Using a predefined library function file">Example 31.10, “Using a predefined library function file”</a> below.</p><p>Do not rely on <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> to free resources for you, as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
does not call finalizers when it exits, use <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-caveats"></a>31.4.9. Caveats</h3></div></div></div><p>You can consider the library bases being symbols in need of being
imported from the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> originating from a brain-damage, causing
the usual symbol headaches when using foreign functions calls within
macros.  Luckily, even if the high-level interface (or its
implementation in <tt class="filename">affi1.lisp</tt>) were to change, the
low-level part (<tt class="filename">affi.d</tt>) should remain untouched as
all it knows are <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>s, no <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s.
The difficulty is just to get the library base value at run-time.
Feel free to suggest enhancements to this facility!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-examples"></a>31.4.10. Examples</h3></div><div><h4 class="subtitle">NB: These examples are somewhat specific to the Amiga.</h4></div></div></div><div class="example"><a id="affi-ex-1-predefined"></a><p class="title"><b>Example 31.10. Using a predefined library function file</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

;; SysBase is the conventional name for exec.library
;; It is only enforced by the file loaded by REQUIRE-LIBRARY-FUNCTIONS
(eval-when (compile eval load)
  (declare-library-base :SysBase "exec.library")) ;keyword avoids name conflicts

;; using only MLIBCALL allows not to load definitions at load-time
(eval-when (compile eval)
  (require-library-functions "exec.library"
    :import '("FindTask")))

(with-open-library ("exec.library")
  (print (mlibcall FindTask 0)))
</pre></td></tr></table><p>

This file can be used in interpreted and compiled mode.
Compiled, it will have inlined the library function calls.
</p></div><div class="example"><a id="affi-ex-2-flibcall"></a><p class="title"><b>Example 31.11. Using flibcall</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  ;; keyword avoids name conflicts
  (declare-library-base :SysBase "exec.library"))

;; The load situation permits the use of flibcall
(eval-when (eval compile load)
  (require-library-functions "exec.library"))

(unless (open-library 'SysBase) (error "No library for SysBase"))
(flibcall (if t 'FindTask 'Debug) 0)
(close-library 'SysBase)
</pre></td></tr></table></div><div class="example"><a id="affi-ex-3-dynamic"></a><p class="title"><b>Example 31.12. Be fully dynamic, defining library bases ourselves</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  (defvar mylib (declare-library-base :foobase "foo.library")))
(eval-when (eval compile load)          ;eval allows mlibcall, load flibcall
  (defflibfun 'foo1 mylib -30 '#xA '* 'string)
  (defflibfun 'foo2 mylib -36 '#x21 0 * 4))

(defun foo (name)
  (when (open-library mylib)
    (list (mlibcall foo1 name) (flibcall 'foo2 name 123213))
    (close-library mylib)))
</pre></td></tr></table></div><div class="example"><a id="affi-ex-4-sample"></a><p class="title"><b>Example 31.13. Some sample function definitions</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defflibfun 'FindTask 'SysBase -294 #xA '* 'string)
(eval-library-function FindTask "exec.library"
  (:offset -294)
  (:return-type *)
  (:arguments
   (name   string   :A1)))
(declare-library-function NameFromLock "dos.library"
  (:offset -402)
  (:return-type 0)
  (:arguments
   (lock   4   :D1)
   (buffer :io :D2)
   (len    4   :D3)))

(eval-when (compile eval)
  (defconstant GVF_LOCAL_ONLY (ash 1 9))
  (defflibfun 'SetVar 'DosBase -900 #x5432 0 'string 'string -4 4))
(defun setvar (name value)
  (with-open-library (DosBase)
    ;; length of -1 means find length of <tt class="constant">NULL</tt>-terminated-string
    (mlibcall SetVar name value -1 GVF_LOCAL_ONLY)))
</pre></td></tr></table></div></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="socket"></a>31.5. Socket Streams</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</h3></div></div></div>
<!--#ifdef SOCKET_STREAMS--><div class="variablelist"><dl><dt><a id="sose"></a><tt class="code">(<a href="#sose"><tt class="function">SOCKET:SOCKET-SERVER</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
                 [<em class="replaceable"><tt>port-or-socket</tt></em>])</tt></dt><dd>This function creates a socket an binds a port to
    the socket.  The server exists to watch for client connect attempts.
    The optional argument is either a port (positive <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>) or a
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> (from whose peer the connections will be made).
 </dd><dt><a id="sose-close"></a><tt class="code">(<a href="#sose-close"><tt class="function">SOCKET:SOCKET-SERVER-CLOSE</tt></a> <em class="replaceable"><tt>socket-server</tt></em>)</tt></dt><dd>Closes down the server socket.
    <a href="#close" title="21.3.9.&#xA0;Function CLOSE">Just like streams</a>,
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>s are closed at <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.  You should not rely on
    this however, because <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion times are not deterministic.
 </dd><dt><a id="sose-hopo"></a><tt class="code">(<a href="#sose-hopo"><tt class="function">SOCKET:SOCKET-SERVER-HOST</tt></a> <em class="replaceable"><tt>socket-server</tt></em>)</tt><br /><tt class="code">(<a href="#sose-hopo"><tt class="function">SOCKET:SOCKET-SERVER-PORT</tt></a> <em class="replaceable"><tt>socket-server</tt></em>)</tt></dt><dd>Returns the host mask indicating which hosts can
    connect to this server and the port which was bound using <a href="#sose"><tt class="function">SOCKET:SOCKET-SERVER</tt></a>.
 </dd><dt><a id="so-wait"></a><tt class="code">(<a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a>
    <em class="replaceable"><tt>socket-server</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#timeout-opt">[<em class="replaceable"><tt>seconds</tt></em> [<em class="replaceable"><tt>microseconds</tt></em>]]</a>)</tt></dt><dd>Wait for a fixed time for a
    connection on the <em class="replaceable"><tt>socket-server</tt></em> (a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>).
    Without a timeout argument, <a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a> blocks indefinitely.
    When timeout is zero, poll.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> when a connection is available (i.e., <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a> will
    not block) and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> on timeout.</dd><dt><a id="so-accept"></a><tt class="code">(<a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a> <em class="replaceable"><tt>socket-server</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a>)</tt></dt><dd>Creates the server-side two-way
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> for the connection.
   Waits for an attempt to connect to the server for no more than
   <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a> seconds (which may be a non-negative real number or a
   list <tt class="data">(sec usec)</tt> or a pair
   <tt class="data">(sec . usec)</tt>).
   <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if no connection is made in that time.
  </dd><dt><a id="so-connect"></a><tt class="code">(<a href="#so-connect"><tt class="function">SOCKET:SOCKET-CONNECT</tt></a>
    <em class="replaceable"><tt>port</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<em class="replaceable"><tt>host</tt></em>] <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a>)</tt></dt><dd>Attempts to create a client-side two-way
   <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>.  Blocks until the server accepts the connection, for
   no more than <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a> seconds.  If it is 0, returns immediately
   and (probably) blocks on the next i/o operation (you can use
   <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> to check whether it will actually block).
  </dd><dt><a id="so-status"></a><tt class="code">(<a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a>
                 <em class="replaceable"><tt>socket-stream-or-list</tt></em>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#timeout-opt">[<em class="replaceable"><tt>seconds</tt></em> [<em class="replaceable"><tt>microseconds</tt></em>]]</a>)</tt></dt><dd><p>Checks whether it is possible to read from or write
   to a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> or whether a connection is available on a
   <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a> without blocking.</p><p>For the cognoscenti: this is the interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/select.html" target="_top"><tt class="function">select</tt></a>, so
    it will work for any <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> which is based on a
    <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>, e.g., <a href="impnotes.html#terminal" class="olink"><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a> and <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="31.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, as well as
    for <a href="#rawsock" title="32.11.&#xA0;Raw Socket Access.">raw sockets</a>.</p><p>This is similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>, which checks only one
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and only for input, and <a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a>, which works only with
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>s.</p><p>We define “<span class="quote">status</span>” for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a> or a
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> to be <tt class="constant">:ERROR</tt> if any i/o operation will cause an
    <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>Additionally, for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>, we define
    “<span class="quote">status</span>” to be <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if a connection is available, i.e.,
    is <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a> will not block, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> otherwise.</p><p>Additionally, for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>, we define
    “<span class="quote">status</span>” in the given <em class="replaceable"><tt>direction</tt></em> (one of <tt class="constant">:INPUT</tt>,
    <tt class="constant">:OUTPUT</tt>, and <tt class="constant">:IO</tt>) to be
    </p><div class="variablelist"><a id="so-status-values"></a><p class="title"><b>Possible status values for various directions:</b></p><dl><dt><tt class="constant">:INPUT</tt> status:</dt><dd><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>reading will block
        </dd><dt><tt class="constant">:INPUT</tt></dt><dd>some input is available
        </dd><dt><tt class="constant">:EOF</tt></dt><dd>the stream has reached its end
       </dd></dl></div></dd><dt><tt class="constant">:OUTPUT</tt> status:</dt><dd><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>writing will block
        </dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>output to the stream will not block
       </dd></dl></div></dd><dt><tt class="constant">:IO</tt> status:</dt><dd><div class="informaltable"><a id="so-status-i-o"></a><table border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th rowspan="2" align="center" valign="bottom">output status</th><th colspan="3" align="center">input status</th></tr><tr><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></th><th align="center"><tt class="constant">:INPUT</tt></th><th align="center"><tt class="constant">:EOF</tt></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="constant">:INPUT</tt></td><td align="center"><tt class="constant">:EOF</tt></td></tr><tr><td align="center"><tt class="constant">:OUTPUT</tt></td><td align="center"><tt class="constant">:OUTPUT</tt></td><td align="center"><tt class="constant">:IO</tt></td><td align="center"><tt class="constant">:APPEND</tt></td></tr></tbody></table></div></dd></dl></div><div class="variablelist"><p class="title"><b>Possible values of
     <em class="replaceable"><tt>socket-stream-or-list</tt></em>:</b></p><dl><dt><a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> or <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a></dt><dd>Returns the appropriate status, as defined
       above (<tt class="constant">:IO</tt> status for <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>)
    </dd><dt><tt class="code">(<a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> . <em class="replaceable"><tt>direction</tt></em>)</tt></dt><dd>Return the status in the specified direction
    </dd><dt>a list of the above</dt><dd>Return a list of values, one for each element of the
       argument list (a la <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a>)</dd></dl></div><p>If you want to avoid <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a> up a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> list, you can
    make the elements of <em class="replaceable"><tt>socket-stream-or-list</tt></em>
    to be <tt class="data">(<em class="replaceable"><tt>socket-stream</tt></em> <em class="replaceable"><tt>direction</tt></em> .
     <em class="replaceable"><tt>x</tt></em>)</tt> or <tt class="data">(<em class="replaceable"><tt>socket-server</tt></em> . <em class="replaceable"><tt>x</tt></em>)</tt>.
    Then <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> will destructively modify its argument and replace
    <em class="replaceable"><tt>x</tt></em> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> with the status and return the modified list.
    You can pass this modified list to <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> again.</p><p>The optional arguments specify the timeout. <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> means
    wait forever, <tt class="literal">0</tt> means poll.</p><p>The second value returned is the number of objects with
    non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> status, i.e., “<span class="quote">actionable</span>” objects.
    <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> returns either due to a timeout or when this number is
    positive, i.e., if the timeout was <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> did
    return, then the second value is positive.</p></dd><dt><a id="sost-hopo"></a><tt class="code">(<a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-HOST</tt></a> <em class="replaceable"><tt>socket-stream</tt></em>)</tt><br /><tt class="code">(<a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-PORT</tt></a> <em class="replaceable"><tt>socket-stream</tt></em>)</tt></dt><dd>These two functions return information about the
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>.</dd><dt><a id="service-port"></a><tt class="code">(<a href="#service-port"><tt class="function">SOCKET:SOCKET-SERVICE-PORT</tt></a>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>service-name</tt></em>
                 (<em class="replaceable"><tt>protocol</tt></em> "tcp"))</tt></dt><dd>A convenience function for looking up a port given
   the service name.  It returns the servent struct as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>
   (name, list of aliases, port, protocol) for the given
   <em class="replaceable"><tt>service-name</tt></em> and
   <em class="replaceable"><tt>protocol</tt></em>, or all services as the list of
   <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> 4)</tt>
   if <em class="replaceable"><tt>service-name</tt></em> is not given or is
   <tt class="constant">:DEFAULT</tt> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="sost-peer"></a><tt class="code">(<a href="#sost-peer"><tt class="function">SOCKET:SOCKET-STREAM-PEER</tt></a>
    <em class="replaceable"><tt>socket-stream</tt></em> [<em class="replaceable"><tt>do-not-resolve-p</tt></em>])</tt></dt><dd><p>Given a <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>, this function returns the
   name of the host on the opposite side of the connection and its port
   number; the server-side can use this to see who connected.</p><p>When the optional second argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the hostname
   resolution is disabled and just the IP address is returned, without
   the <span class="acronym">FQDN</span> (Fully Qualified Domain Name).
   </p></dd><dt><a id="sost-local"></a><tt class="code">(<a href="#sost-local"><tt class="function">SOCKET:SOCKET-STREAM-LOCAL</tt></a>
    <em class="replaceable"><tt>socket-stream</tt></em> [<em class="replaceable"><tt>do-not-resolve-p</tt></em>])</tt></dt><dd>The dual to <a href="#sost-peer"><tt class="function">SOCKET:SOCKET-STREAM-PEER</tt></a> - same information,
   host name and port number, but for the local host.
   The difference from <a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-HOST</tt></a> and <a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-PORT</tt></a> is that this function
   asks the OS (and thus returns the correct trusted values) while the
   other two are just accessors to the internal data structure, and
   basically return the arguments given to the function which created
   the <em class="replaceable"><tt>socket-stream</tt></em>.</dd><dt><a id="sost-shut"></a><tt class="code">(<a href="#sost-shut"><tt class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</tt></a> <em class="replaceable"><tt>socket-stream</tt></em>
    <em class="replaceable"><tt>direction</tt></em>)</tt></dt><dd><p>Some Internet protocols, such as <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a>, provide for
   closing the connection in one <em class="replaceable"><tt>direction</tt></em> using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html" target="_top"><tt class="function">shutdown</tt></a>.
   This function provides an interface to this <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system call.
   <em class="replaceable"><tt>direction</tt></em> should be <tt class="constant">:INPUT</tt> or <tt class="constant">:OUTPUT</tt>.
   Note that you should still call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> after you are done with your
   <em class="replaceable"><tt>socket-stream</tt></em>; this is best accomplished by using <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a>.</p><p>All <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s are <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s (i.e., both <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
   and <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">OUTPUT-STREAM-P</tt></a> return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for them).
   <a href="#sost-shut"><tt class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</tt></a> <span class="emphasis"><em>breaks</em></span> this and turns its argument
   stream into an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (if <em class="replaceable"><tt>direction</tt></em> is <tt class="constant">:OUTPUT</tt>) or <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (if
   <em class="replaceable"><tt>direction</tt></em> is <tt class="constant">:INPUT</tt>).
    Thus, the following important invariant is preserved: whenever
   </p><div class="itemizedlist"><ul type="disc"><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is open
    (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>) and</li><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
     returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</li></ul></div><p>
   the <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> can be read from (e.g., with <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>).
 </p></dd><dt><a id="so-opt"></a><tt class="code">(<a href="#so-opt"><tt class="function">SOCKET:SOCKET-OPTIONS</tt></a> <em class="replaceable"><tt>socket-server</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
    {<em class="replaceable"><tt>option</tt></em>}*)</tt></dt><dd>Query and, optionally, set socket options using
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html" target="_top"><tt class="function">getsockopt</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html" target="_top"><tt class="function">setsockopt</tt></a>.
   An <em class="replaceable"><tt>option</tt></em> is a keyword, optionally followed by the new value.
   When the new value is not supplied, <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html" target="_top"><tt class="function">setsockopt</tt></a> is not called.
   For each option the old (or current, if new value was not supplied)
   value is returned. E.g., <tt class="code">(<a href="#so-opt"><tt class="function">SOCKET:SOCKET-OPTIONS</tt></a> <em class="replaceable"><tt>socket-server</tt></em>
   :SO-LINGER 1 :SO-RCVLOWAT)</tt> returns 2 values: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the old
   value of the <tt class="constant">:SO-LINGER</tt> option, and 1, the
   current value of the <tt class="constant">:SO-RCVLOWAT</tt> option.
  </dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quickstart"></a>31.6. Quickstarting delivery with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></div><p>This section describes three ways to turn <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> programs into
 executable programs, which can be started as quickly as executables
 written in other languages.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-summary"></a>31.6.1. Summary</h3></div></div></div><div class="variablelist"><dl><dt><a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can act as a script interpreter.
  </dd><dt>Desktop environments such as <a href="http://www.kde.org/" target="_top"><strong>KDE</strong></a>, <a href="http://www.gnome.org/" target="_top"><strong>Gnome</strong></a>,
   <a href="http://www.apple.com/macosx/" target="_top"><strong>Mac OS X</strong></a> or <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>.</dt><dd>Files created with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be associated with
   the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> executable so that clicking on them would make <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   execute the appropriate code.</dd><dt><a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> kernel with
   <tt class="option">CONFIG_BINFMT_MISC=y</tt></dt><dd>Associate the extensions <tt class="filename">#P".fas"</tt>
    and <tt class="filename">#P".lisp"</tt> with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>; then you can make the
    files executable and run them from the command line.
 </dd></dl></div><p>These three techniques apply to a single <tt class="filename">#P".lisp"</tt> or <tt class="filename">#P".fas"</tt> file.
 If your application is made up of several <tt class="filename">#P".lisp"</tt> or <tt class="filename">#P".fas"</tt> files,
 you can simply concatenate them (using <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/cat.html" target="_top"><span><strong class="command">cat</strong></span></a>) into one file;
 the techniques then apply to that concatenated file.</p></div>
<!--#ifdef UNIX--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-unix"></a>31.6.2. Scripting with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h3></div><div><h4 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only, including
  <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a>.</h4></div></div></div><p>On <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, a text file (<tt class="filename">#P".fas"</tt> or <tt class="filename">#P".lisp"</tt>) can
 be made executable by adding a first line of the form
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">#!<em class="replaceable"><tt>interpreter</tt></em> [<em class="replaceable"><tt>interpreter-arguments</tt></em>]</pre></td></tr></table><p>
 and using <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/chmod.html" target="_top"><span><strong class="command">chmod</strong></span></a> to make the script executable.</p><p><b>OS Requirements. </b><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be used as a script interpreter under the following
 conditions:
</p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><tt>interpreter</tt></em> must be the full pathname of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 The recommended path is <tt class="filename">/usr/local/bin/clisp</tt>,
 and if <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is actually installed elsewhere, making
 <tt class="filename">/usr/local/bin/clisp</tt> be a symbolic link to the
 real <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</li><li>The <em class="replaceable"><tt>interpreter</tt></em> must be a real executable, not a script.
 Unfortunately, in the binary distributions of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> on Solaris,
 <span><strong class="command">clisp</strong></span> is a shell script because a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler cannot be
 assumed to be installed on this platform.  If you do have a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 compiler installed, build <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> from the source yourself;
 <span><strong class="command"><a href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html" target="_top"><span><strong class="command">make</strong></span></a> install</strong></span> will install <span><strong class="command">clisp</strong></span> as a real
 executable.</li><li><p>On some platforms, the first line which specifies the
 interpreter is limited in length:
   </p><div class="itemizedlist"><ul type="circle"><li>max. 32 characters on SunOS 4,</li><li>max. 80 characters on HP-UX,</li><li>max. 127 characters on <a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a>.</li></ul></div><p>
   Characters exceeding this limit are simply cut off by the system.
   At least 128 characters are accepted on Solaris, IRIX, AIX, OSF/1.
   There is no workaround: You have to keep the interpreter pathname
   and arguments short.</p></li><li>On Solaris and HP-UX, only the first
 <em class="replaceable"><tt>interpreter-arg</tt></em> is passed to the <em class="replaceable"><tt>interpreter</tt></em>.
 In order to pass more than one option (for example, <tt class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></tt> and
 <tt class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></tt>) to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, separate them with
 <a href="http://www.fileformat.info/info/unicode/char/00a0/" target="_top">no-break
 spaces</a> instead of normal spaces.  (But the separator between
 <em class="replaceable"><tt>interpreter</tt></em> and <em class="replaceable"><tt>interpreter-arguments</tt></em> must still be a normal space!) <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 will split the <em class="replaceable"><tt>interpreter-arguments</tt></em> both at no-break spaces and at normal spaces.
</li></ul></div><p><a id="script-exec"></a><b>Script execution. </b></p><div class="itemizedlist"><ul type="disc"><li>The script should contain Lisp
   forms, except in the <tt class="literal">#!</tt> line.</li><li>The file is loaded normally, through the function
   <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> (in particular, the name of the script file, which
   is <tt class="envar">$0</tt> in <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a>, can be found in <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><tt class="varname">*LOAD-TRUENAME*</tt></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><tt class="varname">*LOAD-PATHNAME*</tt></a>).</li><li>Before it is loaded, the variable <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a> is bound
   to a list of strings, representing the arguments given to the Lisp
   script (i.e., <tt class="envar">$1</tt> in <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a> becomes <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><tt class="function">FIRST</tt></a>
     <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a>)</tt> etc).</li><li>The standard <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> i/o facilities (see <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdio.h.html" target="_top"><tt class="filename">&lt;stdio.h&gt;</tt></a>)
    are used: <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a> is bound to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stdin.html" target="_top"><tt class="varname">stdin</tt></a>,
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-OUTPUT*</tt></a> to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stdout.html" target="_top"><tt class="varname">stdout</tt></a>, and
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*ERROR-OUTPUT*</tt></a> to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stderr.html" target="_top"><tt class="varname">stderr</tt></a>.</li><li>The <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>s will be turned into <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a>s
   (using <a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a>).</li><li>Non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>s and
   <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span> interrupts will
   terminate the execution of the Lisp script with an error status
   (using <a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a>).</li><li>If you wish the script's contents to be compiled
    during loading, add <tt class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></tt> to the <em class="replaceable"><tt>interpreter-arguments</tt></em>.
 </li></ul></div><p>
 See also <a href="clisp.html#opt-exec-file" class="olink">the manual</a>.
</p><p><a id="script-bad"></a><b>If nothing works. </b>Another, quite inferior, alternative is to put the following into
 a file:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/bin/sh
exec clisp &lt;&lt;EOF
(lisp-form)
(another-lisp-form)
(yet-another-lisp-form)
EOF
</pre></td></tr></table><p>
The problem with this approach is that the return values of each form
will be printed to the standard output.  Another problem is that no user
input will be available.</p></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-desktop"></a>31.6.3. Desktop Environments</h3></div><div><h4 class="subtitle">Platform dependent: <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>, <a href="http://www.gnome.org/" target="_top"><strong>Gnome</strong></a>, <a href="http://www.kde.org/" target="_top"><strong>KDE</strong></a>, <a href="http://www.apple.com/macosx/" target="_top"><strong>Mac OS X</strong></a> desktop
  platforms only.</h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="quickstart-desktop-win32"></a>Notations</h3><p>Although we use <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>-specific notation, these techniques work
 on other desktop environments as well.</p></div><p>There are two different ways to make <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 “<span class="quote">executables</span>” on desktop platforms.</p><div class="orderedlist"><ol type="1"><li>Associate the <tt class="filename">#P".mem"</tt> extension with
   <span><strong class="command">c:\clisp\lisp.exe -B c:\clisp -M %s</strong></span>.
  </li><li>Associate the <tt class="filename">#P".fas"</tt> extension with
   <span><strong class="command">c:\clisp\lisp.exe -B c:\clisp -M c:\clisp\lispinit.mem
    -i %s</strong></span>.
    Alternatively, you may want to have a function
    <tt class="function">main</tt> in your <tt class="filename">#P".fas"</tt> files and associate
    the <tt class="filename">#P".fas"</tt> extension with <span><strong class="command">c:\clisp\lisp.exe -B
    c:\clisp -M c:\clisp\lispinit.mem -i %s -x (main)</strong></span>.
  </li></ol></div><p>Then clicking on the compiled lisp file (with <tt class="filename">#P".fas"</tt>
 extension) will load the file (thus executing all the code in the
 file), while the clicking on a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#image" class="olink">memory image</a> (with <tt class="filename">#P".mem"</tt>
 extension) will start clisp with the given <a href="impnotes.html#image" class="olink">memory image</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is distributed with a file
 <tt class="filename">install.bat</tt>, which creates a file
 <tt class="filename">clisp.lnk</tt> on your desktop and also associates
 <tt class="filename">#P".fas"</tt>, <tt class="filename">#P".lisp"</tt>, and <tt class="filename">#P".mem"</tt> files with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-linux"></a>31.6.4. Associating extensions with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> via kernel</h3></div><div><h4 class="subtitle">Platform dependent: <a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> platforms only.</h4></div></div></div><p>You have to build your kernel with
 <tt class="option">CONFIG_BINFMT_MISC=y</tt> and
 <tt class="option">CONFIG_PROC_FS=y</tt>.  Then you will have a
 <tt class="filename">/proc/sys/fs/binfmt_misc/</tt> directory and you will
 be able to do (as <tt class="literal">root</tt>; you might want to put
 these lines into <tt class="filename">/etc/rc.d/rc.local</tt>):

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash# echo ":CLISP:E::fas::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
bash# echo ":CLISP:E::lisp::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
</pre></td></tr></table><p>Then you can do the following:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ cat &lt;&lt; EOF &gt; hello.lisp
(print "hello, world!")
EOF
bash$ clisp -c hello.lisp

Compiling file hello.lisp ...

Compilation of file hello.lisp is finished.
0 errors, 0 warnings
bash$ chmod +x hello.fas
bash$ hello.fas

"hello, world!"
bash$
</pre></td></tr></table><p>Please read
 <tt class="filename">/usr/src/linux/Documentation/binfmt_misc.txt</tt> for
 details.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="app-dev"></a>31.7. Application delivery with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><p>Some ways of packaging <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> programs are discussed in the
 section <a href="#quickstart" title="31.6.&#xA0;Quickstarting delivery with CLISP">Quickstarting delivery with
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></a>.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is
 <a href="http://www.gnu.org/philosophy/free-sw.html" target="_top">Free
  Software</a>, covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, with special
 terms governing the distribution of applications that run in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 The precise terms can be found in the <tt class="filename">COPYRIGHT</tt>
 file contained in the source and binary distributions of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  Here
 is an informal clarification what these terms mean in practice.  Please
 refer to the said <tt class="filename">COPYRIGHT</tt> file when in
 doubt.</p><p>In many cases, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not force an application to be covered
 by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. Nevertheless, we encourage you to release your software
 under an open source license. The benefits of such a license for
 your users are numerous, in particular they are free to modify the
 application when their needs/requirements change, and they are free to
 recompile the application when they upgrade their machine or operating
 system.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, i.e. programs which need to access
 non-portable <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internal symbols (in the packages <a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a>,
 <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>, <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, ...), must be covered by <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a> as
 well.</p><p>Other programs running in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> have to or need not to be placed
 under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, depending on their distribution form:

</p><div class="itemizedlist"><ul type="disc"><li>Programs distributed as Lisp source or <tt class="filename">#P".fas"</tt>
   files can be distributed without restrictions coming from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 </li><li>Programs distributed as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#image" class="olink">memory image</a>s can be
  distributed only if accompanied with the non-<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <tt class="filename">#P".fas"</tt> files
  which make up the <a href="impnotes.html#image" class="olink">memory image</a>, and a <tt class="filename">#P"Makefile"</tt> for rebuilding the
  <a href="impnotes.html#image" class="olink">memory image</a>.</li><li>If you need to distribute a modified <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  executable (for example, incorporating additional <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s written
  in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>), you must distribute its full source under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
  If you are not satisfied with this, you can instead put the additional
  <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s into a separate (non-<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>) program, with which your Lisp
  program will communicate via <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="shell"></a>31.8. Shell, Pipes and Printing</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#exec">31.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.8.3. Printing</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="exec"></a>31.8.1. Shell</h3></div></div></div><div class="variablelist">
<!--#ifdef UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><tt class="code">(<a href="#exec" title="31.8.1.&#xA0;Shell"><tt class="function">EXT:EXECUTE</tt></a> <em class="replaceable"><tt>program</tt></em>
       <em class="replaceable"><tt>arg<sub>1</sub></tt></em>
       <em class="replaceable"><tt>arg<sub>2</sub></tt></em> ...)</tt>
   executes an external program.
   Its name is <em class="replaceable"><tt>program</tt></em> (a full pathname).
   It is given the strings <em class="replaceable"><tt>arg<sub>1</sub></tt></em>,
   <em class="replaceable"><tt>arg<sub>2</sub></tt></em>, ... as arguments.
 </dd>
<!--#endif-->
<!--#ifdef HAVE_SHELL--><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><tt class="code">(<a href="impnotes.html#exec" class="olink"><tt class="function">EXT:SHELL</tt></a> [<em class="replaceable"><tt>command</tt></em>])</tt>
   calls the operating system's shell, the value of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>
   <tt class="envar">SHELL</tt> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <tt class="envar">COMSPEC</tt> on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>.
   <tt class="code">(<a href="impnotes.html#exec" class="olink"><tt class="function">EXT:SHELL</tt></a>)</tt> calls the shell for interactive use.
   <tt class="code">(<a href="impnotes.html#exec" class="olink"><tt class="function">EXT:SHELL</tt></a> <em class="replaceable"><tt>command</tt></em>)</tt> calls the shell
   only for execution of the one given <em class="replaceable"><tt>command</tt></em>.
 </dd>
<!--#endif-->
<!--#ifdef PIPES2--><dt><a id="run-prog"></a>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><p>The functions <a href="#run-prog"><tt class="function">EXT:RUN-SHELL-COMMAND</tt></a> and <a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> are the
   general interface to <a href="impnotes.html#exec" class="olink"><tt class="function">EXT:SHELL</tt></a> and the above:</p><p><tt class="code">(<a href="#run-prog"><tt class="function">EXT:RUN-SHELL-COMMAND</tt></a> <em class="replaceable"><tt>command</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:MAY-EXEC</tt> <tt class="constant">:INDIRECTP</tt>
    <tt class="constant">:INPUT</tt> <tt class="constant">:OUTPUT</tt> <tt class="constant">:IF-OUTPUT-EXISTS</tt> <tt class="constant">:WAIT</tt>)</tt>
   runs a shell command (including shell built-in commands,
   like <span><strong class="command">DIR</strong></span> on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>
   and <span><strong class="command">for/do/done</strong></span> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>).</p><p><tt class="code">(<a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> <em class="replaceable"><tt>program</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:MAY-EXEC</tt> <tt class="constant">:INDIRECTP</tt>
    <tt class="constant">:ARGUMENTS</tt> <tt class="constant">:INPUT</tt> <tt class="constant">:OUTPUT</tt> <tt class="constant">:IF-OUTPUT-EXISTS</tt> <tt class="constant">:WAIT</tt>)</tt>
   runs an external program.</p><div class="variablelist"><dl><dt><em class="replaceable"><tt>command</tt></em></dt><dd><p>the shell command.</p>
<!--#ifdef UNIX--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>The shell the command is passed to is the value
       of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">SHELL</tt>, which normally is <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a>.
       The command should be a “<span class="quote">simple command</span>”;
       a “<span class="quote">command list</span>” should be enclosed in "{
       ... ; }" (for <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><strong class="command">/bin/sh</strong></span></a>) or "( ... )" (for <tt class="filename">/bin/csh</tt>).
     </dd></dl></div>
<!--#endif-->
</dd><dt><em class="replaceable"><tt>program</tt></em></dt><dd>the program.  The directories listed in the
     <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">PATH</tt> will be searched for it.
    </dd><dt><tt class="constant">:ARGUMENTS</tt></dt><dd>a list of arguments (strings) that are given to the
     program.</dd><dt><tt class="constant">:INPUT</tt></dt><dd>where the program's input is to come from: either
     <tt class="constant">:TERMINAL</tt> (the standard input, default) or
     <tt class="constant">:STREAM</tt> (a Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> to be created) or
     a <a href="#path-des">pathname designator</a> (an input file) or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (no input at all).
   </dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>where the program's output is to be sent to: either
     <tt class="constant">:TERMINAL</tt> (the standard output, default) or
     <tt class="constant">:STREAM</tt> (a Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> to be created) or
     a <a href="#path-des">pathname designator</a> (an output file) or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (ignore the output).
   </dd><dt><tt class="constant">:IF-OUTPUT-EXISTS</tt></dt><dd>what to do if the <tt class="constant">:OUTPUT</tt> file already exists.
     The possible values are <tt class="constant">:OVERWRITE</tt>, <tt class="constant">:APPEND</tt>, <tt class="constant">:ERROR</tt>,
     with the same meaning as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>. The default is <tt class="constant">:OVERWRITE</tt>.
    </dd><dt><tt class="constant">:WAIT</tt></dt><dd>whether to wait for program termination or not
     (this is useful when no i/o to the process is needed);
     the default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, i.e., synchronous execution.
    </dd>
<!--#ifdef UNIX--><dt><tt class="constant">:MAY-EXEC</tt></dt><dd>pass <span><strong class="command">exec</strong></span> to the underlying
    shell (<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> only).</dd>
<!--#endif-->
<!--#ifdef WIN32--><dt><tt class="constant">:INDIRECTP</tt></dt><dd>use a shell to run the command, e.g.,
    <tt class="code">(<a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> "dir" :indirectp <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt>
    will run the shell built-in command <span><strong class="command">DIR</strong></span>.
    This argument defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for <a href="#run-prog"><tt class="function">EXT:RUN-SHELL-COMMAND</tt></a> and to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> for <a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a>.
    (<a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> only).</dd>
<!--#endif-->
</dl></div><p>If <tt class="constant">:STREAM</tt> was specified for <tt class="constant">:INPUT</tt> or <tt class="constant">:OUTPUT</tt>, a Lisp
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is returned.
 If <tt class="constant">:STREAM</tt> was specified for both <tt class="constant">:INPUT</tt> and <tt class="constant">:OUTPUT</tt>, three
 Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s are returned, as for the function <a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>.
 This use of <a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> can cause
 <a href="#deadlock">deadlocks</a>, see <a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>.</p></dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pipe"></a>31.8.2. Pipes</h3></div></div></div>
<!--#ifdef PIPES--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="variablelist"><dl><dt><tt class="code">(<a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-INPUT-STREAM</tt></a> <em class="replaceable"><tt>command</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a>
    <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will supply the output
  from the execution of the given operating system command.
  </dd><dt><tt class="code">(<a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a> <em class="replaceable"><tt>command</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a>
   <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will pass its output as
   input to the execution of the given operating system command.
  </dd>
<!--#ifdef PIPES2--><dt><tt class="code">(<a href="#pipe" title="31.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a> <em class="replaceable"><tt>command</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a>
   <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd><p>returns three values.
  The first value is a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will simultaneously pass its output
  as input to the execution of the given operating system command and
  supply the output from this command as input.
  The second and third value will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and the <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that
  make up the <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, respectively.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>These three streams must be closed
   individually.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="deadlock"></a>Warning</h3><p>Improper use of this function
   can lead to <span class="emphasis"><em>deadlocks</em></span>.
   Use it at your own risk!</p><p>A deadlock occurs if the command and your Lisp program either
   both try to read from each other at the same time or both try to
   write to each other at the same time.</p><p>To avoid deadlocks, it is recommended that you fix a
   protocol between the command and your program and avoid any hidden
   buffering: use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>,
   <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> on the input side, and
   complete every output operation by a <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FINISH-OUTPUT</tt></a>.
   The same precautions must apply to the called command as well.
</p></div></dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="hardcopy"></a>31.8.3. Printing</h3></div></div></div><p>The macro
 <strong class="first"><em class="firstterm"><a href="#hardcopy" title="31.8.3.&#xA0;Printing"><tt class="function">EXT:WITH-OUTPUT-TO-PRINTER</tt></a><a id="with-print" class="indexterm"></a></em></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#hardcopy" title="31.8.3.&#xA0;Printing"><tt class="function">EXT:WITH-OUTPUT-TO-PRINTER</tt></a> (<em class="replaceable"><tt>variable</tt></em> [<a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a>])
  {<em class="replaceable"><tt>declaration</tt></em>}*
  {<em class="replaceable"><tt>form</tt></em>}*)
</pre></td></tr></table><p>
 binds the variable <em class="replaceable"><tt>variable</tt></em> to an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>
 that sends its output to the printer.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="getenv"></a>31.9. Operating System Environment.</h2></div></div></div><p>Most modern operating systems support <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s that associate
 strings (“<span class="quote">variables</span>”) with other strings
 (“<span class="quote">values</span>”).  These variables are somewhat similar to the
 <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a> variables in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>: their values are inherited by the
 processes from their parent process.</p><p>You can access your OS <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s using the function
<tt class="code">(<a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>string</tt></em>)</tt>,
where <em class="replaceable"><tt>string</tt></em> is the name of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>.
When <em class="replaceable"><tt>string</tt></em> is omitted or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, all the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s and their values
are returned in an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</p><p>You can change the value of existing <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s or create new ones
 using <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> <em class="replaceable"><tt>string</tt></em>) <em class="replaceable"><tt>new-value</tt></em>)</tt>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="separate-io"></a>31.10. Other</h2></div></div></div><div class="variablelist">
<!--#ifdef UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><p>When running under the <a href="http://www.x.org/" target="_top">X Window System</a>, you can create
  a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, which uses a new dedicated xterm, using the function
  <strong class="first"><em class="firstterm"><a href="#separate-io" title="31.10.&#xA0;Other"><tt class="function">EXT:MAKE-XTERM-IO-STREAM</tt></a><a id="mk-xterm" class="indexterm"></a></em></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*ERROR-OUTPUT*</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*DEBUG-IO*</tt></a>
      (<a href="#separate-io" title="31.10.&#xA0;Other"><tt class="function">EXT:MAKE-XTERM-IO-STREAM</tt></a>)))
</pre></td></tr></table></dd>
<!--#endif-->
</dl></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-modules"></a>Chapter 32. Extensions Implemented as Modules</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access.</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.11. Transaction Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.12. Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#regexp">32.5. <span><strong class="command">CLISP</strong></span> <strong class="package">“<span class="quote">REGEXP</span>”</strong> module</a></span></dt><dd><dl><dt><span class="section"><a href="#re-example">32.5.1. Example</a></span></dt></dl></dd><dt><span class="section"><a href="#pcre">32.6. Perl Compatible Regular Expressions.</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.7. Internationalization of User Programs</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">32.7.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#i18n-locale">32.7.2. Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#syscalls">32.8. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.9. Oracle Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#ora-functionality">32.9.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.9.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.9.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.9.4. Building the Oracle Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#fastcgi">32.10. The FastCGI Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#fcgi-overview">32.10.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.10.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.10.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.10.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock">32.11. Raw Socket Access.</a></span></dt><dt><span class="section"><a href="#zlib">32.12. ZLIB Interface</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="matlab"></a>32.1. Matlab Interface</h2></div></div></div><p>This is an interface to the
 <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/apiref.shtml" target="_top">Matlab C API</a>.
 The package <strong class="package">“<span class="quote">MATLAB</span>”</strong> is
 <a href="#make-pack" title="11.4.2.&#xA0;Function MAKE-PACKAGE">case-sensitive</a>, so you would write
 <tt class="code">(matlab:engOpen ...)</tt>
 when you need to call
 <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/engopen.html" target="_top"><tt class="function">engOpen()</tt></a>.
</p><p>Additionally, some higher level functionality is available
 (see <tt class="filename">modules/matlab/demo.lisp</tt> for sample
 usage)</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="netica"></a>32.2. Netica Interface</h2></div></div></div><p>This is an interface to the
 <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica C API</a>.
 The package <strong class="package">“<span class="quote">NETICA</span>”</strong> is
 <a href="#make-pack" title="11.4.2.&#xA0;Function MAKE-PACKAGE">case-sensitive</a>, you would write
 <tt class="code">(netica:GetNodeExpectedUtils_bn ...)</tt>
 when you need to call
 <a href="http://norsys.com/onLineAPIManual/functions/GetNodeExpectedUtils_bn.html" target="_top"><tt class="function">GetNodeExpectedUtils_bn()</tt></a>
</p><p>Additionally, some higher level functionality is available
 (see <tt class="filename">modules/netica/demo.lisp</tt> for a sample
 usage):</p><div class="variablelist"><dl><dt><tt class="code">(netica:start-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :license :verbose)</tt></dt><dd>Call
   <a href="http://norsys.com/onLineAPIManual/functions/NewNeticaEnviron_ns.html" target="_top"><tt class="function">NewNeticaEnviron_ns()</tt></a> and
   <a href="http://norsys.com/onLineAPIManual/functions/InitNetica_bn.html" target="_top"><tt class="function">InitNetica_bn()</tt></a>
   and print some statistics; initialize
   <tt class="varname">netica:*env*</tt>.</dd><dt><tt class="code">(netica:check-errors <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :clear :severity)</tt></dt><dd>Show and, optionally,
   <a href="http://norsys.com/onLineAPIManual/functions/ClearError_ns.html" target="_top">clear</a>, the errors of
   the given <a href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html" target="_top">severity</a>
   and above.  You should call this function
   after <span class="emphasis"><em>every</em></span> call to a Netica function.
   Every wrapper function in this list calls it, so you do <strong>not</strong> need to
   call it after a call to a wrapper function.
</dd><dt><tt class="code">(netica:error-message error)</tt></dt><dd>Convert netica error to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> containing
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorCategory_ns.html" target="_top">error category</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html" target="_top">error severity</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorNumber_ns.html" target="_top">error number</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorMessage_ns.html" target="_top">error message</a>.
</dd><dt><tt class="code">(netica:close-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :verbose)</tt></dt><dd>Terminate the netica session.
   Sets <tt class="varname">netica:*env*</tt> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> when it was closed.
</dd><dt><tt class="code">(netica:make-net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :name
   :comment :title :env :verbose)</tt></dt><dd>Make a <a href="http://norsys.com/onLineAPIManual/functions/NewNet_bn.html" target="_top">new
    network</a> with a given name,
   <a href="http://norsys.com/onLineAPIManual/functions/SetNetTitle_bn.html" target="_top">title</a> and
   <a href="http://norsys.com/onLineAPIManual/functions/SetNetComment_bn.html" target="_top">comment</a>
   and return it.</dd><dt><tt class="code">(netica:net-info net)</tt></dt><dd>Print some information about the net
   (<a href="http://norsys.com/onLineAPIManual/functions/GetNetName_bn.html" target="_top">name</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetTitle_bn.html" target="_top">title</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetComment_bn.html" target="_top">comment</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetFileName_bn.html" target="_top">file name</a> and
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetNodes_bn.html" target="_top">nodes</a>).
</dd><dt><tt class="code">(netica:make-node <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :name :net :kind :levels :states :num-states :title :comment :parents
   :cpt :x :y :env :verbose)</tt></dt><dd>Make a <a href="http://norsys.com/onLineAPIManual/functions/NewNode_bn.html" target="_top">new
    node</a> with the given name and many other parameters.
</dd><dt><tt class="code">(netica:node-info node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :header)</tt></dt><dd>Print some information about the node, preceded by
   the header.</dd><dt><tt class="code">(netica:get-beliefs node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/GetNodeBeliefs_bn.html" target="_top">Get
    the belief vector</a> for the node.
</dd><dt><tt class="code">(netica:enter-finding net node
   state <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/EnterFinding_bn.html" target="_top">Enter a
    finding</a> by
   <a href="http://norsys.com/onLineAPIManual/functions/NodeNamed_bn.html" target="_top">node</a>
   and <a href="http://norsys.com/onLineAPIManual/functions/StateNamed_bn.html" target="_top">state</a>
   names.</dd><dt><tt class="code">(netica:save-net net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :file :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/WriteNet_bn.html" target="_top">Write</a>
   a network to a file.</dd><dt><tt class="code">(netica:read-net file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/ReadNet_bn.html" target="_top">Read</a>
   a network from a file.</dd><dt><tt class="code">(netica:with-open-dne-file (var
   file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> opts) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/NewStreamFile_ns.html" target="_top">Open
    a netica stream</a>, execute <em class="replaceable"><tt>body</tt></em>,
   <a href="http://norsys.com/onLineAPIManual/functions/DeleteStream_ns.html" target="_top">close the stream</a>
   - just like <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html" target="_top"><tt class="function">WITH-OPEN-FILE</tt></a>.</dd><dt><tt class="varname">netica:*verbose*</tt></dt><dd>The log <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; the default value for
   the <tt class="constant">:VERBOSE</tt> argument.</dd><dt><tt class="varname">netica:*license*</tt></dt><dd>The license key provided by
   <a href="http://norsys.com/" target="_top">Norsys</a>; the default value
   for the <tt class="literal">:LICENSE</tt> argument.
</dd><dt><tt class="varname">netica:*env*</tt></dt><dd>The Netica environment object; the default value
   for the <tt class="literal">:ENV</tt> argument.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dir-key"></a>32.3. Directory Access</h2></div></div></div><p>This module provides some directory access from lisp,
 in package <a href="#dir-key" title="32.3.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>.  3 types of directory keys
 may exist, depending on the compilation environment.</p><div class="variablelist"><a id="dir-key-type"></a><p class="title"><b>valid directory key types</b></p><dl><dt>:win32</dt><dd><a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> registry access
  </dd><dt>:gnome</dt><dd><a href="http://developer.gnome.org/doc/API/libgnome/gnome-gnome-config.html" target="_top">gnome-config</a> access
  </dd><dt>:ldap</dt><dd>LDAP interface via
   <a href="http://www.openldap.org" target="_top">OpenLDAP</a> or compatible
  </dd></dl></div><p>The following functions and macros are exported (please note that
these features are experimental and the API may be modified in the
future).</p><div class="variablelist"><dl><dt><a id="dir-key-open"></a><tt class="code">(<a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a>
   <em class="replaceable"><tt>dkey</tt></em> <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:DIRECTION</tt> <tt class="constant">:INPUT</tt>)
   <tt class="constant">:IF-DOES-NOT-EXIST</tt>)</tt></dt><dd>Open the directory key under <em class="replaceable"><tt>dkey</tt></em>, which should
   be either an open directory key or a valid <a href="#dir-key-type">directory key type</a>.
   The meaning of the <tt class="constant">:DIRECTION</tt> and <tt class="constant">:IF-DOES-NOT-EXIST</tt> keyword
   arguments is the same as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>.</dd><dt><a id="dir-key-close"></a><tt class="code">(<a href="#dir-key-close"><tt class="function">LDAP:DIR-KEY-CLOSE</tt></a>
    <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Close the directory key.  The preferred way is to
   use the <a href="#with-dir-key-open"><tt class="function">LDAP:WITH-DIR-KEY-OPEN</tt></a> macro.</dd><dt><a id="with-dir-key-open"></a><tt class="code">(<a href="#with-dir-key-open"><tt class="function">LDAP:WITH-DIR-KEY-OPEN</tt></a> (<em class="replaceable"><tt>variable</tt></em>
    <em class="replaceable"><tt>dkey</tt></em> <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> {<em class="replaceable"><tt>option</tt></em>}*) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a>
    <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd>Open the directory key (by calling <a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a>
   on <em class="replaceable"><tt>dkey</tt></em>, <em class="replaceable"><tt>pathname</tt></em> and <em class="replaceable"><tt>option</tt></em>s), bind it to <em class="replaceable"><tt>variable</tt></em>,
   execute <em class="replaceable"><tt>body</tt></em>, then close it with <a href="#dir-key-close"><tt class="function">LDAP:DIR-KEY-CLOSE</tt></a>.
 </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-TYPE</tt>
    <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Return the <a href="#dir-key-type">directory key type</a> of the directory key
  </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-PATH</tt>
                <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Return the path of this directory key, which is the
   <em class="replaceable"><tt>pathname</tt></em> argument of <a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a> if <em class="replaceable"><tt>dkey</tt></em> was a <a href="#dir-key-type">directory key type</a> or the
   concatenation of the <em class="replaceable"><tt>pathname</tt></em> argument and the
   <tt class="function">ldap:dir-key-path</tt> of <em class="replaceable"><tt>dkey</tt></em>.
   </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-DIRECTION</tt>
    <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>One of <tt class="constant">:INPUT</tt>, <tt class="constant">:OUTPUT</tt> and <tt class="constant">:IO</tt>, indicating
   the permitted operation on this key and its derivatives.
   </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-CLOSED-P</tt>
    <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Check whether the key has been closed.
   It is not an error to close a closed key.
   </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-SUBKEY-DELETE</tt>
     <em class="replaceable"><tt>dkey</tt></em> <em class="replaceable"><tt>subkey</tt></em>)</tt>
   <tt class="code">(<tt class="function">LDAP:DIR-KEY-VALUE-DELETE</tt>
     <em class="replaceable"><tt>dkey</tt></em> <em class="replaceable"><tt>attribute</tt></em>)</tt></dt><dd>Delete the specified subkey or attribute.
  </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-SUBKEY</tt>
    <em class="replaceable"><tt>dkey</tt></em>)</tt>
  <tt class="code">(<tt class="function">LDAP:DIR-KEY-ATTRIBUTES</tt> <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Return the list of the subkeys or attributes.
  </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-VALUE</tt> <em class="replaceable"><tt>dkey</tt></em>
    <em class="replaceable"><tt>attribute</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
    <em class="replaceable"><tt>default</tt></em>)</tt></dt><dd>Return the value of the specified attribute,
   similar to <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><tt class="function">GETHASH</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able just like <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><tt class="function">GETHASH</tt></a>.
   </dd><dt><tt class="code">(<tt class="function">LDAP:DIR-KEY-INFO</tt>
    <em class="replaceable"><tt>dkey</tt></em>)</tt></dt><dd>Return some information about the directory key.
   This is highly platform-dependent and will probably be removed or
   replaced or modified in the future.</dd><dt><a id="with-dir-key-search"></a><tt class="code">(<a href="#with-dir-key-search"><tt class="function">LDAP:WITH-DIR-KEY-SEARCH</tt></a>
    (<em class="replaceable"><tt>key-iter</tt></em>
    <em class="replaceable"><tt>atribute-iter</tt></em>
    <em class="replaceable"><tt>dkey</tt></em> <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:scope</tt>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd><p>This is the main way to iterate over the subtree
   under the key <em class="replaceable"><tt>dkey</tt></em>+<em class="replaceable"><tt>pathname</tt></em>.</p><p><em class="replaceable"><tt>key-iter</tt></em> is a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> symbol
    and is bound via <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a> to a macro, each call of which returns
    the next subkey.</p><p><em class="replaceable"><tt>atribute-iter</tt></em> is a symbol and is
    bound, when non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, to a macro, each call of which returns two
   values - the next attribute and its value.</p><p>The <tt class="constant">:scope</tt> keyword argument specifies the
    scope of the search and can be
   </p><div class="variablelist"><dl><dt><tt class="constant">:self</tt></dt><dd>iterate over the key itself
     </dd><dt><tt class="constant">:level</tt></dt><dd>iterate over the children of the key
     </dd><dt><tt class="constant">:tree</tt></dt><dd>iterate over the subtree
     </dd></dl></div><p><a href="#with-dir-key-search"><tt class="function">LDAP:WITH-DIR-KEY-SEARCH</tt></a> is used to implement
    <tt class="function">LDAP:DIR-KEY-VALUES</tt>,
    <tt class="function">LDAP:DIR-KEY-CHILDREN</tt> and
    <tt class="function">LDAP:DIR-KEY-DUMP-TREE</tt> in
    <tt class="filename">dirkey.lisp</tt>.
    </p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="berkeley-db"></a>32.4. Berkeley DB access.</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.11. Transaction Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.12. Replication</a></span></dt></dl></div><p>This interface to <a href="http://www.sleepycat.com/docs/index.html" target="_top">Berkeley DB from Sleepycat Software</a> exports almost all
 functions in the official <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> API.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-objects"></a>32.4.1. Berkeley-DB Objects</h3></div></div></div><p>Thie module exports the following object types:
 </p><div class="variablelist"><dl><dt><tt class="type">BDB:DBE</tt></dt><dd>environment handle</dd><dt><tt class="type">BDB:DB</tt></dt><dd>database handle</dd><dt><tt class="type">BDB:DBC</tt></dt><dd>cursor handle</dd><dt><tt class="type">BDB:TXN</tt></dt><dd>transaction handle</dd><dt><tt class="type">BDB:LOGC</tt></dt><dd>log cursor handle</dd><dt><tt class="type">BDB:MPOOLFILE</tt></dt><dd>memory pool file handle</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-close"></a>32.4.2. Closing handles</h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> will close (or commit, in the case of a transaction) the
 Berkeley-DB handle objects.  <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>or will also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>.
 Closing an object will first close all its dependents.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-db-environment"></a>32.4.3. Database Environment</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:DB-VERSION)</tt></dt><dd>Return version information as 4 values: descriptive
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and 3 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s: major, minor and patch number (<a href="http://www.sleepycat.com/docs/api_c/env_version.html" target="_top"><tt class="function">db_version</tt></a>).
 </dd><dt><tt class="code">(BDB:DBE-CREATE <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    PASSWORD ENCRYPT HOST CLIENT_TIMEOUT SERVER_TIMEOUT)</tt></dt><dd>Create an environment handle (<a href="http://www.sleepycat.com/docs/api_c/env_create.html" target="_top"><tt class="function">db_env_create</tt></a>),
    possibly connecting to a remote host (<a href="http://www.sleepycat.com/docs/api_c/env_set_rpc_server.html" target="_top"><tt class="function">DB_ENV-&gt;set_rpc_server</tt></a>) and
    possibly using encryption with password (<a href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html" target="_top"><tt class="function">DB_ENV-&gt;set_encrypt</tt></a>).
 </dd><dt><tt class="code">(BDB:DBE-CLOSE dbe)</tt></dt><dd>Close an environment (<a href="http://www.sleepycat.com/docs/api_c/env_close.html" target="_top"><tt class="function">DB_ENV-&gt;close</tt></a>).
    You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>.</dd><dt><tt class="code">(BDB:DBREMOVE dbe file
    database <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> TRANSACTION AUTO_COMMIT)</tt></dt><dd>Remove a database (<a href="http://www.sleepycat.com/docs/api_c/env_dbremove.html" target="_top"><tt class="function">DB_ENV-&gt;dbremove</tt></a>).
 </dd><dt><tt class="code">(BDB:DBREMOVE dbe file
    database newname <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> TRANSACTION AUTO_COMMIT)</tt></dt><dd>Rename a database (<a href="http://www.sleepycat.com/docs/api_c/env_dbrename.html" target="_top"><tt class="function">DB_ENV-&gt;dbrename</tt></a>).
 </dd><dt><tt class="code">(BDB:DBE-OPEN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    HOME JOIN INIT_CDB INIT_LOCK INIT_LOG INIT_MPOOL INIT_TXN
    RECOVER RECOVER_FATAL USE_ENVIRON USE_ENVIRON_ROOT CREATE
    LOCKDOWN PRIVATE SYSTEM_MEM THREAD MODE)</tt></dt><dd>Open an environment (<a href="http://www.sleepycat.com/docs/api_c/env_open.html" target="_top"><tt class="function">DB_ENV-&gt;open</tt></a>).
 </dd><dt><tt class="code">(BDB:DBE-REMOVE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    HOME FORCE USE_ENVIRON USE_ENVIRON_ROOT)</tt></dt><dd>Destroy an environment (<a href="http://www.sleepycat.com/docs/api_c/env_remove.html" target="_top"><tt class="function">DB_ENV-&gt;remove</tt></a>).
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-environment-config"></a>32.4.4. Environment Configuration</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:DBE-SET-OPTIONS dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> ERRFILE ERRPFX PASSWORD ENCRYPT LOCK_TIMEOUT TXN_TIMEOUT SHM_KEY
   TAS_SPINS TX_TIMESTAMP TX_MAX DATA_DIR TMP_DIR LG_BSIZE LG_DIR LG_MAX
   LG_REGIONMAX LK_CONFLICTS LK_DETECT LK_MAX_LOCKERS LK_MAX_LOCKS
   LK_MAX_OBJECTS AUTO_COMMIT CDB_ALLDB DIRECT_DB DIRECT_LOG NOLOCKING
   NOMMAP NOPANIC OVERWRITE PANIC_ENVIRONMENT REGION_INIT TXN_NOSYNC
   TXN_WRITE_NOSYNC YIELDCPU VERB_CHKPOINT VERB_DEADLOCK VERB_RECOVERY
   VERB_REPLICATION VERB_WAITSFOR VERBOSE)</tt></dt><dd><p>Set some environment options using </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_flags.html" target="_top"><tt class="function">DB_ENV-&gt;set_flags</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_tas_spins.html" target="_top"><tt class="function">DB_ENV-&gt;set_tas_spins</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lg_bsize.html" target="_top"><tt class="function">DB_ENV-&gt;set_lg_bsize</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_lockers.html" target="_top"><tt class="function">DB_ENV-&gt;set_lk_max_lockers</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html" target="_top"><tt class="function">DB_ENV-&gt;set_verbose</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_shm_key.html" target="_top"><tt class="function">DB_ENV-&gt;set_shm_key</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lg_dir.html" target="_top"><tt class="function">DB_ENV-&gt;set_lg_dir</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_locks.html" target="_top"><tt class="function">DB_ENV-&gt;set_lk_max_locks</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_tmp_dir.html" target="_top"><tt class="function">DB_ENV-&gt;set_tmp_dir</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_timeout.html" target="_top"><tt class="function">DB_ENV-&gt;set_timeout</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lg_max.html" target="_top"><tt class="function">DB_ENV-&gt;set_lg_max</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_objects.html" target="_top"><tt class="function">DB_ENV-&gt;set_lk_max_objects</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_data_dir.html" target="_top"><tt class="function">DB_ENV-&gt;set_data_dir</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html" target="_top"><tt class="function">DB_ENV-&gt;set_encrypt</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lg_regionmax.html" target="_top"><tt class="function">DB_ENV-&gt;set_lg_regionmax</tt></a></td><td> </td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_tx_max.html" target="_top"><tt class="function">DB_ENV-&gt;set_tx_max</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html" target="_top"><tt class="function">DB_ENV-&gt;set_errfile</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lk_conflicts.html" target="_top"><tt class="function">DB_ENV-&gt;set_lk_conflicts</tt></a></td><td> </td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_tx_timestamp.html" target="_top"><tt class="function">DB_ENV-&gt;set_tx_timestamp</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html" target="_top"><tt class="function">DB_ENV-&gt;set_errpfx</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/env_set_lk_detect.html" target="_top"><tt class="function">DB_ENV-&gt;set_lk_detect</tt></a></td><td> </td></tr></table></dd><dt><tt class="code">(BDB:DBE-GET-OPTIONS dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>what</tt></em>)</tt></dt><dd><p>Retrieve some environment options.
   </p><div class="variablelist"><p class="title"><b>Values of <em class="replaceable"><tt>what</tt></em></b></p><dl><dt>missing<br /><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>all options as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>
    </dd><dt><tt class="constant">:TX_TIMESTAMP</tt></dt><dd>Recover to the time specified by timestamp
       rather than to the most current possible date
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_tx_timestamp.html" target="_top"><tt class="function">DB_ENV-&gt;get_tx_timestamp</tt></a>)</dd><dt><tt class="constant">:TX_MAX</tt></dt><dd>the number of active transactions
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_tx_max.html" target="_top"><tt class="function">DB_ENV-&gt;set_tx_max</tt></a>)</dd><dt><tt class="constant">:DATA_DIR</tt></dt><dd>list of data directories (<a href="http://www.sleepycat.com/docs/api_c/env_set_data_dir.html" target="_top"><tt class="function">DB_ENV-&gt;get_data_dir</tt></a>)
    </dd><dt><tt class="constant">:TMP_DIR</tt></dt><dd>temporary directory (<a href="http://www.sleepycat.com/docs/api_c/env_set_tmp_dir.html" target="_top"><tt class="function">DB_ENV-&gt;get_tmp_dir</tt></a>).
       May be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:VERBOSE</tt></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of verbosity settings
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html" target="_top"><tt class="function">DB_ENV-&gt;get_verbose</tt></a>).</dd><dt><tt class="constant">:AUTO_COMMIT</tt><br /><tt class="constant">:CDB_ALLDB</tt><br /><tt class="constant">:DIRECT_DB</tt><br /><tt class="constant">:DIRECT_LOG</tt><br /><tt class="constant">:NOLOCKING</tt><br /><tt class="constant">:NOMMAP</tt><br /><tt class="constant">:NOPANIC</tt><br /><tt class="constant">:OVERWRITE</tt><br /><tt class="constant">:PANIC_ENVIRONMENT</tt><br /><tt class="constant">:REGION_INIT</tt><br /><tt class="constant">:TXN_NOSYNC</tt><br /><tt class="constant">:TXN_WRITE_NOSYNC</tt><br /><tt class="constant">:YIELDCPU</tt><br /><tt class="constant">:VERB_CHKPOINT</tt><br /><tt class="constant">:VERB_DEADLOCK</tt><br /><tt class="constant">:VERB_RECOVERY</tt><br /><tt class="constant">:VERB_REPLICATION</tt><br /><tt class="constant">:VERB_WAITSFOR</tt></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a> indicator of whether this
       option is set or not (<a href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html" target="_top"><tt class="function">DB_ENV-&gt;get_verbose</tt></a> and <a href="http://www.sleepycat.com/docs/api_c/env_set_flags.html" target="_top"><tt class="function">DB_ENV-&gt;get_flags</tt></a>).
    </dd><dt><tt class="constant">:LG_BSIZE</tt></dt><dd>log buffer size
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lg_bsize.html" target="_top"><tt class="function">DB_ENV-&gt;get_lg_bsize</tt></a>)</dd><dt><tt class="constant">:LG_DIR</tt></dt><dd>logging directory
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lg_dir.html" target="_top"><tt class="function">DB_ENV-&gt;get_lg_dir</tt></a>)</dd><dt><tt class="constant">:LG_MAX</tt></dt><dd>log file size
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lg_max.html" target="_top"><tt class="function">DB_ENV-&gt;get_lg_max</tt></a>)</dd><dt><tt class="constant">:LG_REGIONMAX</tt></dt><dd>logging region size
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lg_regionmax.html" target="_top"><tt class="function">DB_ENV-&gt;get_lg_regionmax</tt></a>)</dd><dt><tt class="constant">:LK_CONFLICTS</tt></dt><dd>lock conflicts matrix
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lk_conflicts.html" target="_top"><tt class="function">DB_ENV-&gt;get_lk_conflicts</tt></a>)</dd><dt><tt class="constant">:LK_DETECT</tt></dt><dd>automatic deadlock detection
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lk_detect.html" target="_top"><tt class="function">DB_ENV-&gt;get_lk_detect</tt></a>)</dd><dt><tt class="constant">:LK_MAX_LOCKERS</tt></dt><dd>maximum number of lockers
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_lockers.html" target="_top"><tt class="function">DB_ENV-&gt;get_lk_max_lockers</tt></a>)</dd><dt><tt class="constant">:lk_max_locks</tt></dt><dd>maximum number of locks
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_locks.html" target="_top"><tt class="function">DB_ENV-&gt;get_lk_max_locks</tt></a>)</dd><dt><tt class="constant">:lk_max_objects</tt></dt><dd>maximum number of lock objects
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_objects.html" target="_top"><tt class="function">DB_ENV-&gt;get_lk_max_objects</tt></a>)</dd><dt><tt class="constant">:TAS_SPINS</tt></dt><dd>the number of test-and-set spins
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_tas_spins.html" target="_top"><tt class="function">DB_ENV-&gt;get_tas_spins</tt></a>).</dd><dt><tt class="constant">:SHM_KEY</tt></dt><dd>base segment ID for shared memory regions
       (<a href="http://www.sleepycat.com/docs/api_c/env_set_shm_key.html" target="_top"><tt class="function">DB_ENV-&gt;get_shm_key</tt></a>).</dd><dt><tt class="constant">:LOCK_TIMEOUT</tt><br /><tt class="constant">:TXN_TIMEOUT</tt></dt><dd>timeout values for locks or transactions in the
       database environment (<a href="http://www.sleepycat.com/docs/api_c/env_set_timeout.html" target="_top"><tt class="function">DB_ENV-&gt;get_timeout</tt></a>).
    </dd><dt><tt class="constant">:ENCRYPT</tt></dt><dd>encryption flags (<a href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html" target="_top"><tt class="function">DB_ENV-&gt;get_encrypt_flags</tt></a>).
    </dd><dt><tt class="constant">:ERRFILE</tt></dt><dd><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (<a href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html" target="_top"><tt class="function">DB_ENV-&gt;get_errfile</tt></a>).
    </dd><dt><tt class="constant">:ERRPFX</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (<a href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html" target="_top"><tt class="function">DB_ENV-&gt;get_errpfx</tt></a>).
    </dd><dt><tt class="constant">:DB_XIDDATASIZE</tt></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> of the globally unique
       <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> which must be passed to <a href="http://www.sleepycat.com/docs/api_c/txn_prepare.html" target="_top"><tt class="function">DB_TXN-&gt;prepare</tt></a>.
    </dd><dt><tt class="constant">:HOME</tt></dt><dd>the home directory (when open) or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
    </dd><dt><tt class="constant">:OPEN</tt></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of open flags (when open) or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
    </dd></dl></div></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-operations"></a>32.4.5. Database Operations</h3></div></div></div>
<!--DB->associate Associate a secondary index DB->err Error message with error string DB->errx Error message-->
<div class="variablelist"><dl><dt><tt class="code">(BDB:DB-CREATE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> XA)</tt></dt><dd>Create a database handle (<a href="http://www.sleepycat.com/docs/api_c/db_create.html" target="_top"><tt class="function">db_create</tt></a>).
</dd><dt><tt class="code">(BDB:DB-CLOSE db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> NOSYNC)</tt></dt><dd>Close a database (<a href="http://www.sleepycat.com/docs/api_c/db_close.html" target="_top"><tt class="function">DB-&gt;close</tt></a>).
   You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>.</dd><dt><tt class="code">(BDB:DB-DEL dbe key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   TRANSACTION AUTO_COMMIT)</tt></dt><dd>Delete items from a database (<a href="http://www.sleepycat.com/docs/api_c/db_del.html" target="_top"><tt class="function">DB-&gt;del</tt></a>).
</dd><dt><tt class="code">(BDB:DB-FD db)</tt></dt><dd>Return a file descriptor from a database (<a href="http://www.sleepycat.com/docs/api_c/db_fd.html" target="_top"><tt class="function">DB-&gt;fd</tt></a>).
</dd><dt><tt class="code">(BDB:DB-GET db key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> ACTION
   AUTO_COMMIT DIRTY_READ MULTIPLE RMW TRANSACTION (ERROR <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>))</tt></dt><dd><p>Get items from a database (<a href="http://www.sleepycat.com/docs/api_c/db_get.html" target="_top"><tt class="function">DB-&gt;get</tt></a>).
   If <tt class="constant">:ERROR</tt> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led,
   instead <tt class="constant">:NOTFOUND</tt> is returned.
   <tt class="constant">:ACTION</tt> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">:DB_CONSUME</tt></td><td><tt class="constant">:DB_GET_BOTH</tt></td></tr><tr><td><tt class="constant">:DB_CONSUME_WAIT</tt></td><td><tt class="constant">:DB_SET_RECNO</tt></td></tr></table><p>
</p></dd><dt><tt class="code">(BDB:DB-PUT db key val
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> AUTO_COMMIT ACTION TRANSACTION)</tt></dt><dd><p>Store items into a database (<a href="http://www.sleepycat.com/docs/api_c/db_put.html" target="_top"><tt class="function">DB-&gt;put</tt></a>).
  <tt class="constant">:ACTION</tt> should be one of
  </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">:DB_APPEND</tt></td><td><tt class="constant">:DB_NODUPDATA</tt></td><td><tt class="constant">:DB_NOOVERWRITE</tt></td></tr></table><p>
</p></dd><dt><tt class="code">(BDB:DB-STAT db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> FAST_STAT)</tt></dt><dd>Return database statistics (<a href="http://www.sleepycat.com/docs/api_c/db_get_byteswapped.html" target="_top"><tt class="function">DB-&gt;get_byteswapped</tt></a>,
   <a href="http://www.sleepycat.com/docs/api_c/db_get_type.html" target="_top"><tt class="function">DB-&gt;get_type</tt></a>, <a href="http://www.sleepycat.com/docs/api_c/db_stat.html" target="_top"><tt class="function">DB-&gt;stat</tt></a>).</dd><dt><tt class="code">(BDB:DB-OPEN db file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   DATABASE TYPE MODE CREATE DIRTY_READ EXCL NOMMAP RDONLY
   THREAD TRUNCATE AUTO_COMMIT TRANSACTION)</tt></dt><dd><p>Open a database (<a href="http://www.sleepycat.com/docs/api_c/db_open.html" target="_top"><tt class="function">DB-&gt;open</tt></a>).
   <tt class="constant">:TYPE</tt> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">:BTREE</tt></td><td><tt class="constant">:RECNO</tt></td></tr><tr><td><tt class="constant">:HASH</tt></td><td><tt class="constant">:UNKNOWN</tt> (default)</td></tr><tr><td><tt class="constant">:QUEUE</tt></td><td> </td></tr></table><p>
</p></dd><dt><tt class="code">(BDB:DB-SYNC db)</tt></dt><dd>Flush a database to stable storage (<a href="http://www.sleepycat.com/docs/api_c/db_sync.html" target="_top"><tt class="function">DB-&gt;sync</tt></a>).
</dd><dt><tt class="code">(BDB:DB-TRUNCATE db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   TRANSACTION AUTO_COMMIT)</tt></dt><dd>Empty a database (<a href="http://www.sleepycat.com/docs/api_c/db_truncate.html" target="_top"><tt class="function">DB-&gt;truncate</tt></a>).
</dd><dt><tt class="code">(BDB:DB-UPGRADE db file
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> DUPSORT)</tt></dt><dd>Upgrade a database (<a href="http://www.sleepycat.com/docs/api_c/db_upgrade.html" target="_top"><tt class="function">DB-&gt;upgrade</tt></a>).
</dd><dt><tt class="code">(BDB:DB-RENAME db file database newname)</tt></dt><dd>Rename a database (<a href="http://www.sleepycat.com/docs/api_c/db_rename.html" target="_top"><tt class="function">DB-&gt;rename</tt></a>).
</dd><dt><tt class="code">(BDB:DB-REMOVE db file database)</tt></dt><dd>Remove a database (<a href="http://www.sleepycat.com/docs/api_c/db_remove.html" target="_top"><tt class="function">DB-&gt;remove</tt></a>).
</dd><dt><tt class="code">(BDB:DB-JOIN db cursor-sequence
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> JOIN_NOSORT)</tt></dt><dd>Create a specialized join cursor for use in
   performing equality or natural joins on secondary indices (<a href="http://www.sleepycat.com/docs/api_c/db_join.html" target="_top"><tt class="function">DB-&gt;join</tt></a>).
</dd><dt><tt class="code">(BDB:DB-KEY-RANGE db key
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> TRANSACTION)</tt></dt><dd>return an estimate of the proportion of keys that
   are less than, equal to, and greater than the specified key
   (<a href="http://www.sleepycat.com/docs/api_c/db_key_range.html" target="_top"><tt class="function">DB-&gt;key_range</tt></a>).  The underlying database must be of type Btree.
</dd><dt><tt class="code">(BDB:DB-VERIFY db file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   DATABASE SALVAGE AGGRESSIVE PRINTABLE NOORDERCHK)</tt></dt><dd>Verify/salvage a database (<a href="http://www.sleepycat.com/docs/api_c/db_verify.html" target="_top"><tt class="function">DB-&gt;verify</tt></a>).
   <tt class="constant">:SALVAGE</tt>, if supplied, should be the output
   file name.  <tt class="constant">:DATABASE</tt>, if supplied,
   will force <tt class="constant">DB_ORDERCHKONLY</tt>.
</dd><dt><tt class="code">(BDB:WITH-DB (var dbe file
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> options <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> xa <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)</tt></dt><dd>Open the database, execute <em class="replaceable"><tt>body</tt></em>, close it.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-db-config"></a>32.4.6. Database Configuration</h3></div></div></div>
<!--DB->set_alloc Set local space allocation functions DB->set_dup_compare Set a duplicate comparison function DB->set_errcall Set error message callback DB->set_errpfx Set error message prefix DB->set_feedback Set feedback callback DB->set_paniccall Set panic callback DB->set_append_recno Set record append callback DB->set_bt_compare Set a Btree comparison function DB->set_bt_prefix Set a Btree prefix comparison function DB->set_h_hash Set a hashing function-->
<div class="variablelist"><dl><dt><tt class="code">(BDB:DB-SET-OPTIONS db
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> ERRFILE ERRPFX PASSWORD ENCRYPTION NCACHE CACHESIZE CACHE
   LORDER PAGESIZE BT_MINKEY H_FFACTOR H_NELEM Q_EXTENTSIZE
   RE_DELIM RE_LEN RE_PAD RE_SOURCE
   CHKSUM ENCRYPT TXN_NOT_DURABLE DUP DUPSORT RECNUM REVSPLITOFF
   RENUMBER SNAPSHOT)</tt></dt><dd><p>Set some database options using </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html" target="_top"><tt class="function">DB_ENV-&gt;set_errfile</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_lorder.html" target="_top"><tt class="function">DB-&gt;set_lorder</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_h_nelem.html" target="_top"><tt class="function">DB-&gt;set_h_nelem</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_re_pad.html" target="_top"><tt class="function">DB-&gt;set_re_pad</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html" target="_top"><tt class="function">DB_ENV-&gt;set_errpfx</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_pagesize.html" target="_top"><tt class="function">DB-&gt;set_pagesize</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_q_extentsize.html" target="_top"><tt class="function">DB-&gt;set_q_extentsize</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_re_source.html" target="_top"><tt class="function">DB-&gt;set_re_source</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/db_set_encrypt.html" target="_top"><tt class="function">DB-&gt;set_encrypt</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_bt_minkey.html" target="_top"><tt class="function">DB-&gt;set_bt_minkey</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_re_delim.html" target="_top"><tt class="function">DB-&gt;set_re_delim</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_flags.html" target="_top"><tt class="function">DB-&gt;set_flags</tt></a></td></tr><tr><td><a href="http://www.sleepycat.com/docs/api_c/db_set_cachesize.html" target="_top"><tt class="function">DB-&gt;set_cachesize</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_h_ffactor.html" target="_top"><tt class="function">DB-&gt;set_h_ffactor</tt></a></td><td><a href="http://www.sleepycat.com/docs/api_c/db_set_re_len.html" target="_top"><tt class="function">DB-&gt;set_re_len</tt></a></td><td> </td></tr></table></dd><dt><tt class="code">(BDB:DB-GET-OPTIONS db
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>what</tt></em>)</tt></dt><dd><p>Retrieve some database options.
   </p><div class="variablelist"><p class="title"><b>Values of <em class="replaceable"><tt>what</tt></em></b></p><dl><dt>missing<br /><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>all options as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>
    </dd><dt><tt class="constant">:FLAGS</tt></dt><dd>all flags (<a href="http://www.sleepycat.com/docs/api_c/env_set_flags.html" target="_top"><tt class="function">DB_ENV-&gt;get_flags</tt></a>).
    </dd><dt><tt class="constant">:CHKSUM</tt><br /><tt class="constant">:ENCRYPT</tt><br /><tt class="constant">:TXN_NOT_DURABLE</tt><br /><tt class="constant">:DUP</tt><br /><tt class="constant">:DUPSORT</tt><br /><tt class="constant">:RECNUM</tt><br /><tt class="constant">:REVSPLITOFF</tt><br /><tt class="constant">:RENUMBER</tt><br /><tt class="constant">:SNAPSHOT</tt></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a> indicator of whether this
       option is set or not (<a href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html" target="_top"><tt class="function">DB_ENV-&gt;get_verbose</tt></a> and <a href="http://www.sleepycat.com/docs/api_c/env_set_flags.html" target="_top"><tt class="function">DB_ENV-&gt;get_flags</tt></a>).
    </dd><dt><tt class="constant">:CACHE</tt></dt><dd>database cache information (<a href="http://www.sleepycat.com/docs/api_c/db_set_cachesize.html" target="_top"><tt class="function">DB-&gt;get_cachesize</tt></a>).
    </dd><dt><tt class="constant">:ENCRYPTION</tt></dt><dd>encryption flags (<a href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html" target="_top"><tt class="function">DB_ENV-&gt;get_encrypt_flags</tt></a>).
    </dd><dt><tt class="constant">:ERRFILE</tt></dt><dd><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (<a href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html" target="_top"><tt class="function">DB_ENV-&gt;get_errfile</tt></a>).
    </dd><dt><tt class="constant">:ERRPFX</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (<a href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html" target="_top"><tt class="function">DB_ENV-&gt;get_errpfx</tt></a>).
    </dd><dt><tt class="constant">:PAGESIZE</tt></dt><dd>database page size (<a href="http://www.sleepycat.com/docs/api_c/db_set_pagesize.html" target="_top"><tt class="function">DB-&gt;get_pagesize</tt></a>).
    </dd><dt><tt class="constant">:BT_MINKEY</tt></dt><dd>the minimum number of key/data pairs intended to
       be stored on any single <tt class="constant">:BTREE</tt> leaf page
       underlying source file (<a href="http://www.sleepycat.com/docs/api_c/db_set_bt_minkey.html" target="_top"><tt class="function">DB-&gt;get_bt_minkey</tt></a>).
    </dd><dt><tt class="constant">:H_FFACTOR</tt></dt><dd>the desired density within
       the <tt class="constant">:HASH</tt> table (<a href="http://www.sleepycat.com/docs/api_c/db_set_h_ffactor.html" target="_top"><tt class="function">DB-&gt;get_h_ffactor</tt></a>).
    </dd><dt><tt class="constant">:H_NELEM</tt></dt><dd>an estimate of the final size of
       the <tt class="constant">:HASH</tt> table (<a href="http://www.sleepycat.com/docs/api_c/db_set_h_nelem.html" target="_top"><tt class="function">DB-&gt;get_h_nelem</tt></a>).
    </dd><dt><tt class="constant">:Q_EXTENTSIZE</tt></dt><dd>the size of the extents used to hold pages in
       a <tt class="constant">:QUEUE</tt> database (<a href="http://www.sleepycat.com/docs/api_c/db_set_q_extentsize.html" target="_top"><tt class="function">DB-&gt;get_q_extentsize</tt></a>).
    </dd><dt><tt class="constant">:RE_DELIM</tt></dt><dd>the record delimiter
       for <tt class="constant">:RECNO</tt> databases (<a href="http://www.sleepycat.com/docs/api_c/db_set_re_delim.html" target="_top"><tt class="function">DB-&gt;get_re_delim</tt></a>).
    </dd><dt><tt class="constant">:RE_LEN</tt></dt><dd>database record length (<a href="http://www.sleepycat.com/docs/api_c/db_set_re_len.html" target="_top"><tt class="function">DB-&gt;get_re_len</tt></a>).
    </dd><dt><tt class="constant">:RE_PAD</tt></dt><dd>database record pad byte (<a href="http://www.sleepycat.com/docs/api_c/db_set_re_pad.html" target="_top"><tt class="function">DB-&gt;get_re_pad</tt></a>).
    </dd><dt><tt class="constant">:RE_SOURCE</tt></dt><dd>the underlying source file
       for <tt class="constant">:RECNO</tt> databases (<a href="http://www.sleepycat.com/docs/api_c/db_set_re_source.html" target="_top"><tt class="function">DB-&gt;get_re_source</tt></a>).
    </dd><dt><tt class="constant">:LORDER</tt></dt><dd>database byte order (<a href="http://www.sleepycat.com/docs/api_c/db_set_lorder.html" target="_top"><tt class="function">DB-&gt;get_lorder</tt></a>).
    </dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Once you call a method for one type of access method,
    the handle can only be used for that type.
    The methods <a href="http://www.sleepycat.com/docs/api_c/db_set_re_delim.html" target="_top"><tt class="function">DB-&gt;get_re_delim</tt></a> and <a href="http://www.sleepycat.com/docs/api_c/db_set_re_source.html" target="_top"><tt class="function">DB-&gt;get_re_source</tt></a> are for
    a <tt class="constant">:RECNO</tt> database so
    you <span class="emphasis"><em>cannot</em></span> call them
    (by passing <tt class="constant">:RE_DELIM</tt>
    or <tt class="constant">:RE_SOURCE</tt> to this function)
    and then use the database handle to open a database of different type
    (e.g., <tt class="constant">:QUEUE</tt>).</p></div></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-cursor"></a>32.4.7. Database Cursor Operations</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:MAKE-DBC db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   DIRTY_READ WRITECURSOR TRANSACTION)</tt></dt><dd>Create a cursor handle (<a href="http://www.sleepycat.com/docs/api_c/db_cursor.html" target="_top"><tt class="function">DB-&gt;cursor</tt></a>).
</dd><dt><tt class="code">(BDB:DBC-CLOSE cursor)</tt></dt><dd>Close the cursor handle (<a href="http://www.sleepycat.com/docs/api_c/dbc_close.html" target="_top"><tt class="function">DBcursor-&gt;c_close</tt></a>).
   You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>.</dd><dt><tt class="code">(BDB:DBC-COUNT cursor)</tt></dt><dd>Return count of duplicates (<a href="http://www.sleepycat.com/docs/api_c/dbc_count.html" target="_top"><tt class="function">DBcursor-&gt;c_count</tt></a>).
</dd><dt><tt class="code">(BDB:DBC-DEL cursor)</tt></dt><dd>Delete by cursor (<a href="http://www.sleepycat.com/docs/api_c/dbc_del.html" target="_top"><tt class="function">DBcursor-&gt;c_del</tt></a>).
</dd><dt><tt class="code">(BDB:DBC-DUP cursor <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> POSITION)</tt></dt><dd>Duplicate a cursor (<a href="http://www.sleepycat.com/docs/api_c/dbc_dup.html" target="_top"><tt class="function">DBcursor-&gt;c_dup</tt></a>).
</dd><dt><tt class="code">(BDB:DBC-GET cursor key data
   action <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> DIRTY_READ MULTIPLE (ERROR <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>))</tt></dt><dd><p>Retrieve by cursor (<a href="http://www.sleepycat.com/docs/api_c/dbc_get.html" target="_top"><tt class="function">DBcursor-&gt;c_get</tt></a>).
   If <tt class="constant">:ERROR</tt> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led,
   <tt class="constant">:NOTFOUND</tt> or <tt class="constant">:KEYEMPTY</tt>
   is returned instead, as appropriate.
   <em class="replaceable"><tt>action</tt></em> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">:DB_CURRENT</tt></td><td><tt class="constant">:DB_GET_RECNO</tt></td><td><tt class="constant">:DB_NEXT_DUP</tt></td><td><tt class="constant">:DB_SET</tt></td></tr><tr><td><tt class="constant">:DB_FIRST</tt></td><td><tt class="constant">:DB_JOIN_ITEM</tt></td><td><tt class="constant">:DB_NEXT_NODUP</tt></td><td><tt class="constant">:DB_SET_RANGE</tt></td></tr><tr><td><tt class="constant">:DB_GET_BOTH</tt></td><td><tt class="constant">:DB_LAST</tt></td><td><tt class="constant">:DB_PREV</tt></td><td><tt class="constant">:DB_SET_RECNO</tt></td></tr><tr><td><tt class="constant">:DB_GET_BOTH_RANGE</tt></td><td><tt class="constant">:DB_NEXT</tt></td><td><tt class="constant">:DB_PREV_NODUP</tt></td><td> </td></tr></table><p>
</p></dd><dt><tt class="code">(BDB:DBC-PUT cursor key data
   flag)</tt></dt><dd>Store by cursor (<a href="http://www.sleepycat.com/docs/api_c/dbc_put.html" target="_top"><tt class="function">DBcursor-&gt;c_put</tt></a>).
</dd><dt><tt class="code">(BDB:WITH-DBC (var <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
   options) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <em class="replaceable"><tt>body</tt></em>))</tt></dt><dd>Open a cursor, execute <em class="replaceable"><tt>body</tt></em>, close it.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-lock"></a>32.4.8. Lock Subsystem</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:LOCK-DETECT dbe action)</tt></dt><dd>Perform deadlock detection
   (<a href="http://www.sleepycat.com/docs/api_c/env_lock_detect.html" target="_top"><tt class="function">DB_ENV-&gt;lock_detect</tt></a>).</dd><dt><tt class="code">(BDB:LOCK-ID dbe)</tt></dt><dd>Acquire a locker ID
  (<a href="http://www.sleepycat.com/docs/api_c/env_lock_id.html" target="_top"><tt class="function">DB_ENV-&gt;lock_id</tt></a>).</dd><dt><tt class="code">(BDB:LOCK-ID-FREE dbe id)</tt></dt><dd>Release a locker ID (<a href="http://www.sleepycat.com/docs/api_c/env_lock_id_free.html" target="_top"><tt class="function">DB_ENV-&gt;lock_id_free</tt></a>).
   All associated locks should be released first.
</dd><dt><tt class="code">(BDB:LOCK-GET dbe object locker
   mode <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> NOWAIT)</tt></dt><dd>Acquire a lock (<a href="http://www.sleepycat.com/docs/api_c/env_lock_get.html" target="_top"><tt class="function">DB_ENV-&gt;lock_get</tt></a>).
   The <span class="type">BDB:DBLOCK</span> object returned by this function will
   <strong>not</strong> be released when the environment is closed.
   This permits long-lived locks.</dd><dt><tt class="code">(BDB:LOCK-PUT dbe lock)</tt></dt><dd>Release a lock
   (<a href="http://www.sleepycat.com/docs/api_c/env_lock_put.html" target="_top"><tt class="function">DB_ENV-&gt;lock_put</tt></a>).</dd><dt><tt class="code">(BDB:LOCK-CLOSE lock)</tt></dt><dd>Release a lock (<a href="http://www.sleepycat.com/docs/api_c/env_lock_put.html" target="_top"><tt class="function">DB_ENV-&gt;lock_put</tt></a>) using the
   environment with which it has been acquired.
   This is used to <a href="#final" title="30.8.&#xA0;Finalization"><tt class="function">EXT:FINALIZE</tt></a> <span class="type">BDB:DBLOCK</span> objects.
   If that environment has already been closed, you are in big trouble,
   so you better release your locks or do not drop them.
</dd><dt><tt class="code">(BDB:LOCK-STAT dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   STAT_CLEAR)</tt></dt><dd>Return lock subsystem statistics
   (<a href="http://www.sleepycat.com/docs/api_c/env_lock_stat.html" target="_top"><tt class="function">DB_ENV-&gt;lock_stat</tt></a>).</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-log"></a>32.4.9. Log Subsystem</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bdb-log-cursor">32.4.9.1. Log Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-log-seq">32.4.9.2. Log Sequence Numbers</a></span></dt></dl></div><div class="variablelist"><dl><dt><tt class="code">(BDB:LOG-ARCHIVE dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :ARCH_ABS :ARCH_DATA :ARCH_LOG :ARCH_REMOVE)</tt></dt><dd>Return a list of log or database filenames
   (<a href="http://www.sleepycat.com/docs/api_c/env_log_archive.html" target="_top"><tt class="function">DB_ENV-&gt;log_archive</tt></a>).</dd><dt><tt class="code">(BDB:LOG-FILE dbe lsn)</tt></dt><dd>Return the name of the file containing the record
   named by <em class="replaceable"><tt>lsn</tt></em> (<a href="http://www.sleepycat.com/docs/api_c/env_log_file.html" target="_top"><tt class="function">DB_ENV-&gt;log_file</tt></a>).
</dd><dt><tt class="code">(BDB:LOG-FLUSH dbe lsn)</tt></dt><dd>Flush log records to disk (<a href="http://www.sleepycat.com/docs/api_c/env_log_flush.html" target="_top"><tt class="function">DB_ENV-&gt;log_flush</tt></a>).
</dd><dt><tt class="code">(BDB:LOG-PUT dbe data
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :FLUSH)</tt></dt><dd>Write a log record (<a href="http://www.sleepycat.com/docs/api_c/env_log_put.html" target="_top"><tt class="function">DB_ENV-&gt;log_put</tt></a>).
</dd><dt><tt class="code">(BDB:LOG-STAT dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> STAT_CLEAR)</tt></dt><dd>Logging subsystem statistics (<a href="http://www.sleepycat.com/docs/api_c/env_log_stat.html" target="_top"><tt class="function">DB_ENV-&gt;log_stat</tt></a>).
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bdb-log-cursor"></a>32.4.9.1. Log Cursor Operations</h4></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:LOG-CURSOR dbe)</tt></dt><dd>Create a log cursor handle
   (<a href="http://www.sleepycat.com/docs/api_c/env_log_cursor.html" target="_top"><tt class="function">DB_ENV-&gt;log_cursor</tt></a>).</dd><dt><tt class="code">(BDB:LOGC-CLOSE logc)</tt></dt><dd>Close a log cursor handle
   (<a href="http://www.sleepycat.com/docs/api_c/ogc_close.html" target="_top"><tt class="function">DB_LOGC-&gt;close</tt></a>).</dd><dt><tt class="code">(BDB:LOGC-GET logc action
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> TYPE ERROR)</tt></dt><dd><p>Retrieve a log record (<a href="http://www.sleepycat.com/docs/api_c/ogc_get.html" target="_top"><tt class="function">DB_LOGC-&gt;get</tt></a>).
   If <tt class="constant">:ERROR</tt> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led,
   <tt class="constant">:NOTFOUND</tt> is returned instead.
   </p><div class="variablelist"><p class="title"><b>Valid <em class="replaceable"><tt>action</tt></em>s</b></p><dl><dt><tt class="constant">:DB_CURRENT</tt><br /><tt class="constant">:DB_FIRST</tt><br /><tt class="constant">:DB_LAST</tt><br /><tt class="constant">:DB_NEXT</tt><br /><tt class="constant">:DB_PREV</tt></dt><dd>Retrieve the appropriate record.
    </dd><dt><span class="type">DB:LSN</span></dt><dd>Retrieve the specified record, as
       with <tt class="constant">DB_SET</tt>.
   </dd></dl></div><p>
   Returns two values: the datum of type specified by the <tt class="constant">:TYPE</tt>
   argument and the <span class="type">DB:LSN</span> value of the record retrieved
   (when <em class="replaceable"><tt>action</tt></em> is a <span class="type">DB:LSN</span>, it
   is returned unchanged).
</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bdb-log-seq"></a>32.4.9.2. Log Sequence Numbers</h4></div></div></div><p>Use <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><tt class="function">EQUALP</tt></a> to check similarity of <span class="type">BDB:LSN</span> objects.</p><div class="variablelist"><dl><dt><tt class="code">(BDB:LOG-COMPARE lsn1 lsn2)</tt></dt><dd>Compare two Log Sequence Numbers (<a href="http://www.sleepycat.com/docs/api_c/log_compare.html" target="_top"><tt class="function">log_compare</tt></a>).
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-mem-pool"></a>32.4.10. Memory Pool Subsystem</h3></div></div></div>
<!--DB_ENV->set_cachesize Set the environment cache size DB_ENV->set_mp_mmapsize Set maximum mapped-in database file size DB_ENV->memp_register Register input/output functions for a file in a memory pool DB_ENV->memp_stat Return memory pool statistics DB_ENV->memp_sync Flush pages from a memory pool DB_ENV->memp_trickle Trickle flush pages from a memory pool Memory Pool Files DB_ENV->memp_fcreate Open a file in a memory pool DB_MPOOLFILE->close Close a file in a memory pool DB_MPOOLFILE->get Get page from a file in a memory pool DB_MPOOLFILE->open Open a file in a memory pool DB_MPOOLFILE->put Return a page to a memory pool DB_MPOOLFILE->set Set memory pool page status DB_MPOOLFILE->sync Flush pages from a file in a memory pool DB_MPOOLFILE->set_clear_len Set file page bytes to be cleared DB_MPOOLFILE->set_fileid Set file unique identifier DB_MPOOLFILE->set_ftype Set file type DB_MPOOLFILE->set_lsn_offset Set file log-sequence-number offset DB_MPOOLFILE->set_pgcookie Set file cookie for pgin/pgout-->
<div class="variablelist"><dl><dt><tt class="code">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-transaction"></a>32.4.11. Transaction Subsystem</h3></div></div></div><div class="variablelist"><dl><dt><tt class="code">(BDB:TXN-BEGIN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   PARENT DIRTY_READ NOSYNC NOWAIT SYNC)</tt></dt><dd>Begin a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_begin.html" target="_top"><tt class="function">DB_ENV-&gt;txn_begin</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-ABORT txn)</tt></dt><dd>Abort a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_abort.html" target="_top"><tt class="function">DB_TXN-&gt;abort</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-COMMIT txn <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   NOSYNC SYNC)</tt></dt><dd>Commit a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_commit.html" target="_top"><tt class="function">DB_TXN-&gt;commit</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-DISCARD txn)</tt></dt><dd>Discard a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_discard.html" target="_top"><tt class="function">DB_TXN-&gt;discard</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-ID txn)</tt></dt><dd>Return the transaction's ID (<a href="http://www.sleepycat.com/docs/api_c/txn_id.html" target="_top"><tt class="function">DB_TXN-&gt;id</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-CHECKPOINT dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> KBYTE MIN FORCE)</tt></dt><dd>Checkpoint the transaction subsystem
   (<a href="http://www.sleepycat.com/docs/api_c/txn_checkpoint.html" target="_top"><tt class="function">DB_ENV-&gt;txn_checkpoint</tt></a>).</dd><dt><tt class="code">(BDB:TXN-PREPARE txn id)</tt></dt><dd>Initiate the beginning of a two-phase commit
   (<a href="http://www.sleepycat.com/docs/api_c/txn_prepare.html" target="_top"><tt class="function">DB_TXN-&gt;prepare</tt></a>).</dd><dt><tt class="code">(BDB:TXN-RECOVER dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   FIRST NEXT)</tt></dt><dd>Return a list of prepared but not yet resolved
   transactions (<a href="http://www.sleepycat.com/docs/api_c/txn_recover.html" target="_top"><tt class="function">DB_ENV-&gt;txn_recover</tt></a>).</dd><dt><tt class="code">(BDB:TXN-SET-TIMEOUT txn
   timeout which)</tt></dt><dd>Set timeout values for locks or transactions for the
   specified transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_set_timeout.html" target="_top"><tt class="function">DB_TXN-&gt;set_timeout</tt></a>).
</dd><dt><tt class="code">(BDB:TXN-STAT dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   STAT_CLEAR)</tt></dt><dd>Transaction subsystem statistics (<a href="http://www.sleepycat.com/docs/api_c/txn_stat.html" target="_top"><tt class="function">DB_ENV-&gt;txn_stat</tt></a>).
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-replication"></a>32.4.12. Replication</h3></div></div></div>
<!--DB_ENV->set_rep_transport Configure replication transport DB_ENV->rep_elect Hold a replication election DB_ENV->set_rep_limit Limit data sent in response to a single message DB_ENV->rep_process_message Process a replication message DB_ENV->rep_start Configure an environment for replication DB_ENV->rep_stat Replication statistics-->
<div class="variablelist"><dl><dt><tt class="code">()</tt></dt><dd></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="regexp"></a>32.5. <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="#regexp" title="32.5.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><strong class="package">“<span class="quote">REGEXP</span>”</strong></a> module</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#re-example">32.5.1. Example</a></span></dt></dl></div><p>The <a href="#regexp" title="32.5.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><strong class="package">“<span class="quote">REGEXP</span>”</strong></a> module implements the
 <a href="regexp.html" target="_top">POSIX regular expressions</a>
by calling the standard <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> system facilities.
The syntax of these <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>s is described in many places,
such as your local <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">&lt;regex.h&gt;</tt></a> manual and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> info pages.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:REGEXP</tt>.</p><div class="variablelist"><a id="re-api"></a><p class="title"><b>API</b></p><dl><dt><a id="re-match"></a><tt class="code">(<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> <em class="replaceable"><tt>pattern</tt></em>
   <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt> <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a>
   <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd><p>This macro returns as first value a <tt class="classname">REGEXP:MATCH</tt> structure
  containing the indices of the start and end of the first match for the
  <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <em class="replaceable"><tt>pattern</tt></em> in <em class="replaceable"><tt>string</tt></em>; or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if there is no match.
  Additionally, a <tt class="classname">REGEXP:MATCH</tt> structure is returned for every matched
  <tt class="literal">"\(...\)"</tt> group in <em class="replaceable"><tt>pattern</tt></em>, in the
  order that the open parentheses appear in <em class="replaceable"><tt>pattern</tt></em>.
  If <em class="replaceable"><tt>start</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the search starts at that index in <em class="replaceable"><tt>string</tt></em>.
  If <em class="replaceable"><tt>end</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, only <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><tt class="function">SUBSEQ</tt></a> <em class="replaceable"><tt>string</tt></em> <em class="replaceable"><tt>start</tt></em>
  <em class="replaceable"><tt>end</tt></em>)</tt> is considered.
  </p><div class="example"><a id="ex-re-match"></a><p class="title"><b>Example 32.1. <a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly.")
     <tt class="data">#S(<tt class="classname">REGEXP:MATCH</tt> :START 4 :END 9)</tt>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8)
     <tt class="data">#S(<tt class="classname">REGEXP:MATCH</tt> :START 27 :END 32)</tt>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8 :end 30)
     <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "\\([a-z]*\\)[0-9]*\\(bar\\)" "foo12bar")
     <tt class="data">#S(<tt class="classname">REGEXP:MATCH</tt> :START 0 :END 8) ;</tt>
     <tt class="data">#S(<tt class="classname">REGEXP:MATCH</tt> :START 0 :END 3) ;</tt>
     <tt class="data">#S(<tt class="classname">REGEXP:MATCH</tt> :START 5 :END 8)</tt>
  </pre></td></tr></table></div><p>
</p></dd><dt><a id="re-match-access"></a><tt class="code">(<a href="#re-match-access"><tt class="function">REGEXP:MATCH-START</tt></a> <em class="replaceable"><tt>match</tt></em>)</tt><br /><tt class="code">(<a href="#re-match-access"><tt class="function">REGEXP:MATCH-END</tt></a> <em class="replaceable"><tt>match</tt></em>)</tt></dt><dd>Return the start and end the <em class="replaceable"><tt>match</tt></em>; <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able.
</dd><dt><a id="re-match-string"></a><tt class="code">(<a href="#re-match-string"><tt class="function">REGEXP:MATCH-STRING</tt></a> <em class="replaceable"><tt>string</tt></em> <em class="replaceable"><tt>match</tt></em>)</tt></dt><dd>Extracts the substring of <em class="replaceable"><tt>string</tt></em> corresponding
  to the given pair of start and end indices of <em class="replaceable"><tt>match</tt></em>.
  The result is shared with <em class="replaceable"><tt>string</tt></em>.
  If you want a freshly consed <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, use <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><tt class="function">COPY-SEQ</tt></a> or
  <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> (<a href="#re-match-string"><tt class="function">REGEXP:MATCH-STRING</tt></a> ...) '<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>)</tt>.
</dd><dt><a id="re-regexp-quote"></a><tt class="code">(<a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a>
   <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>extended</tt></em>)</tt></dt><dd><p>This function returns a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
  that matches exactly <em class="replaceable"><tt>string</tt></em> and nothing else.
  This allows you to request an exact string match when calling a
  function that wants a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>.
  </p><div class="example"><a id="ex-re-quote"></a><p class="title"><b>Example 32.2. <a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
    (regexp-quote "^The cat$")
     <span class="returnvalue">"\\^The cat\\$"</span>
   </pre></td></tr></table></div><p>
  One use of <a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a> is to combine an exact string match with
  context described as a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>.
  When <em class="replaceable"><tt>extended</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, also
  quote <span class="keysym">#\+</span> and <span class="keysym">#\?</span>.
</p></dd><dt><a id="re-regexp-compile"></a><tt class="code">(<a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a>
   <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a>)</tt></dt><dd>Compile the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <em class="replaceable"><tt>string</tt></em> into an
  object suitable for <a href="#re-regexp-exec"><tt class="function">REGEXP:REGEXP-EXEC</tt></a>.</dd><dt><a id="re-regexp-exec"></a><tt class="code">(<a href="#re-regexp-exec"><tt class="function">REGEXP:REGEXP-EXEC</tt></a>
     <em class="replaceable"><tt>pattern</tt></em> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt>
     <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd><p>Execute the <em class="replaceable"><tt>pattern</tt></em>, which must be a compiled
   <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> returned by <a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a>, against the
   appropriate portion of the <em class="replaceable"><tt>string</tt></em>.</p><p>Negative <em class="replaceable"><tt>end</tt></em> means <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
    <em class="replaceable"><tt>string</tt></em>) <em class="replaceable"><tt>end</tt></em>)</tt></p><p>Returns <tt class="classname">REGEXP:MATCH</tt> structures as multiple values (one for each
   subexpression which successfully matched and one for the whole pattern),
   unless <tt class="literal">:BOOLEAN</tt> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case
   return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> as an indicator of success, but do not allocate anything.
</p></dd><dt><a id="re-regexp-split"></a><tt class="code">(<a href="#re-regexp-split"><tt class="function">REGEXP:REGEXP-SPLIT</tt></a>
     <em class="replaceable"><tt>pattern</tt></em> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt>
     <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd>Return a list of substrings of <em class="replaceable"><tt>string</tt></em> (all
  sharing the structure with <em class="replaceable"><tt>string</tt></em>) separated by <em class="replaceable"><tt>pattern</tt></em> (a
  <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a return value of <a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a>)
 </dd><dt><a id="re-with-loop-split"></a><tt class="code">(<a href="#re-with-loop-split"><tt class="function">REGEXP:WITH-LOOP-SPLIT</tt></a>
     (<em class="replaceable"><tt>variable</tt></em> <em class="replaceable"><tt>stream</tt></em> <em class="replaceable"><tt>pattern</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt>
     <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd>Read lines from <em class="replaceable"><tt>stream</tt></em>, split them with
  <a href="#re-regexp-split"><tt class="function">REGEXP:REGEXP-SPLIT</tt></a> on <em class="replaceable"><tt>pattern</tt></em>, and bind the resulting list to
  <em class="replaceable"><tt>variable</tt></em>.</dd><dt><a id="re-cflags"></a><a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a></dt><dd>These options control compilation of a pattern.
   See <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">&lt;regex.h&gt;</tt></a> for their meaning.
</dd><dt><a id="re-eflags"></a><a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a></dt><dd>These options constrol execution of a pattern.
   See <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">&lt;regex.h&gt;</tt></a> for their meaning.
</dd><dt><a id="re-matcher"></a><a href="#re-matcher"><tt class="function">REGEXP:REGEXP-MATCHER</tt></a></dt><dd>A valid value for <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>.
   This will work only when your <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em> is <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>
   because <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a> internally and POSIX constrains
   <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">&lt;regex.h&gt;</tt></a> to use the current <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em>.
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="re-example"></a>32.5.1. Example</h3></div></div></div><p>The following code computes the number of people who use a
 particular shell:</p><div class="example"><a id="re-example-lisp"></a><p class="title"><b>Example 32.3. shell-count.lisp</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/usr/local/bin/clisp -C
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "REGEXP-TEST" (:use "LISP" "REGEXP"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "REGEXP-TEST")
(let ((h (make-hash-table :test #'equal :size 10)) (n 0))
  (with-open-file (f "/etc/passwd")
    (with-loop-split (s f ":")
      (incf (gethash (seventh s) h 0))))
  (with-hash-table-iterator (i h)
    (loop (multiple-value-bind (r k v) (i)
            (unless r (return))
            (format t "[~d] ~s~30t== ~5:d~%" (incf n) k v)))))
</pre></td></tr></table></div><p>For comparison, the same can be done by the following <a href="http://www.perl.com" target="_top"><span><strong class="command">Perl</strong></span></a>:</p><div class="example"><a id="re-example-perl"></a><p class="title"><b>Example 32.4. shell-count.perl</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/usr/local/bin/perl -w

use diagnostics;
use strict;

my $IN = $ARGV[0];
open(INF,"&lt; $IN") || die "$0: cannot read file [$IN]: $!\n;";
my %hash;
while (&lt;INF&gt;) {
  chop;
  my @all = split($ARGV[1]);
  my $shell = ($#all &gt;= 6 ? $all[6] : "");
  if ($hash{$shell}) { $hash{$shell} ++; }
  else { $hash{$shell} = 1; }
}
my $ii = 0;
for my $kk (keys(%hash)) {
  print "[",++$ii,"] \"",$kk,"\"  --  ",$hash{$kk},"\n";
}
close(INF);
</pre></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pcre"></a>32.6. Perl Compatible Regular Expressions.</h2></div></div></div><p>This is an interface to <a href="http://www.pcre.org/" target="_top">Perl
  Compatible Regular Expressions</a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:PCRE</tt>.</p><div class="variablelist"><a id="pcre-api"></a><p class="title"><b>PCRE module API</b></p><dl><dt><a id="pcre-version"></a><tt class="code">(PCRE:PCRE-VERSION)</tt></dt><dd>Return version information as 3 values: descriptive
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and 2 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s: major and minor numbers.
 </dd><dt><a id="pcre-config"></a><tt class="code">(PCRE:PCRE-CONFIG <em class="replaceable"><tt>type</tt></em>)</tt></dt><dd>Return some information about the PCRE build
    configuration (<em class="replaceable"><tt>type</tt></em> is one of <tt class="literal">:UTF8</tt>
    <tt class="literal">:NEWLINE</tt> <tt class="literal">:LINK-SIZE</tt>
    <tt class="literal">:POSIX-MALLOC-THRESHOLD</tt>
    <tt class="literal">:MATCH-LIMIT</tt>).</dd><dt><a id="pcre-compile"></a><tt class="code">(PCRE:PCRE-COMPILE <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :STUDY
    :IGNORE-CASE :MULTILINE :DOTALL :EXTENDED :ANCHORED :DOLLAR-ENDONLY
    :EXTRA :NOTBOL :NOTEOL :UNGREADY :NOTEMPTY :NO-AUTO-CAPTURE)</tt></dt><dd>Compile a pattern, optionally study it.
 </dd><dt><a id="pattern-info"></a>
   <tt class="code">(PCRE:PATTERN-INFO <em class="replaceable"><tt>pattern</tt></em> request)</tt></dt><dd>Return some information about the <em class="replaceable"><tt>pattern</tt></em>,
    such as <tt class="literal">:OPTIONS</tt> <tt class="literal">:SIZE</tt>
    <tt class="literal">:CAPTURECOUNT</tt> <tt class="literal">:BACKREFMAX</tt>
    <tt class="literal">:FIRSTBYTE</tt> <tt class="literal">:FIRSTTABLE</tt>
    <tt class="literal">:LASTLITERAL</tt> <tt class="literal">:NAMEENTRYSIZE</tt>
    <tt class="literal">:NAMECOUNT</tt> <tt class="literal">:NAMETABLE</tt>
    <tt class="literal">:STUDYSIZE</tt>.</dd><dt><a id="pcre-name-to-index"></a><tt class="code">(PCRE:PCRE-NAME-TO-INDEX <em class="replaceable"><tt>pattern</tt></em> <em class="replaceable"><tt>name</tt></em>)</tt></dt><dd>Convert the name of the sub-pattern to an index in
    the return vector.</dd><dt><a id="pcre-exec"></a><tt class="code">(PCRE:PCRE-EXEC <em class="replaceable"><tt>pattern</tt></em> <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :BOOLEAN
    :OFFSET :ANCHORED :NOTBOL :NOTEOL :NOTEMPTY)</tt></dt><dd>Execute the compiled <em class="replaceable"><tt>pattern</tt></em> against the
    <em class="replaceable"><tt>string</tt></em> at the given <em class="replaceable"><tt>offset</tt></em> with the given options.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if no matches or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
    <tt class="literal">CAPTURECOUNT+1</tt> of <span class="type">PCRE:MATCH</span> structures,
    unless <tt class="literal">:BOOLEAN</tt> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case
    return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> as an indicator of success, but do not allocate anything.
 </dd><dt><a id="pcre-match-access"></a><tt class="code">(PCRE:MATCH-START <em class="replaceable"><tt>match</tt></em>)</tt><br /><tt class="code">(PCRE:MATCH-END <em class="replaceable"><tt>match</tt></em>)</tt></dt><dd>Return the start and end of the <em class="replaceable"><tt>match</tt></em>. <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able.
 </dd><dt><a id="match-substring"></a><tt class="code">(PCRE:MATCH-SUBSTRING <em class="replaceable"><tt>match</tt></em> <em class="replaceable"><tt>string</tt></em>)</tt></dt><dd>Return the substring of <em class="replaceable"><tt>string</tt></em> bounded by <em class="replaceable"><tt>match</tt></em>.
 </dd><dt><a id="match-strings"></a><tt class="code">(PCRE:MATCH-STRINGS return-vector <em class="replaceable"><tt>string</tt></em>)</tt></dt><dd>Return all substrings for all matches found
    by <tt class="function">PCRE:PCRE-EXEC</tt>.
 </dd><dt><a id="match-string"></a><tt class="code">(PCRE:MATCH-STRING return-vector which
    <em class="replaceable"><tt>string</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>pattern</tt></em>)</tt></dt><dd>Return the substring that matches the given sub-pattern.
    If <em class="replaceable"><tt>which</tt></em> is a name of the sub-pattern (as
    opposed to its number), <em class="replaceable"><tt>pattern</tt></em> must be supplied.
 </dd><dt><a id="pcre-matcher"></a><tt class="code">(PCRE:PCRE-MATCHER <em class="replaceable"><tt>pattern</tt></em>)</tt></dt><dd>A valid value for <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="i18n-mod"></a>32.7. Internationalization of User Programs</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ggettext">32.7.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#i18n-locale">32.7.2. Locale</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ggettext"></a>32.7.1. The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#domain">32.7.1.1. Domain</a></span></dt><dt><span class="section"><a href="#category">32.7.1.2. Category</a></span></dt><dt><span class="section"><a href="#i18n-example">32.7.1.3. Internationalization Example</a></span></dt></dl></div><p><a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> is a set of functions, included in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> or the
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library, which permit looking up translations of strings
through message catalogs. It is also a set of tools which makes the
translation maintenance easy for the translator and the program
maintainer.</p><p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> functions are available in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> in the
<a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP"><strong class="package">“<span class="quote">I18N</span>”</strong></a> package, which is <a href="#re-export" title="11.4.4.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>ed from the <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>
package.</p><div class="variablelist"><dl><dt><a id="gettext"></a><tt class="code">(<a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a>
    <em class="replaceable"><tt>MSGID</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a>)</tt></dt><dd>returns the translation of the message <em class="replaceable"><tt>MSGID</tt></em>,
    in the given <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>, depending on the given <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a>.
    <em class="replaceable"><tt>MSGID</tt></em> should be an <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> string, and is normally the English message.
 </dd><dt><a id="ngettext"></a><tt class="code">(<a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a>
    <em class="replaceable"><tt>MSGID</tt></em> <em class="replaceable"><tt>msgid_plural</tt></em>
    <em class="replaceable"><tt>n</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a>)</tt></dt><dd>returns the plural form of the translation for of
    <em class="replaceable"><tt>MSGID</tt></em> and <em class="replaceable"><tt>n</tt></em> in the given <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>, depending on the given
    <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a>.  <em class="replaceable"><tt>MSGID</tt></em> and <em class="replaceable"><tt>msgid_plural</tt></em>
    should be <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> strings, and are normally the English singular and
    English plural variant of the message, respectively.
 </dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="domain"></a>32.7.1.1. Domain</h4></div></div></div><p>The <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> is a string identifier denoting the program that
is requesting the translation.  The pathname of the message catalog
depends on the <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>: usually it is located at
<tt class="filename">TEXTDOMAINDIR/l/LC_MESSAGES/domain.mo</tt>, where
<em class="replaceable"><tt>l</tt></em> is the ISO 639 code of the language.
The notion of <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> allows several Lisp programs running in the same
image to request translations independently of each other.</p><p><a id="textdomain"></a><b>Function <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>. </b><tt class="code">(<a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the default
 <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>, used when no <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> argument is passed to the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> and
 <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a> functions.  It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able.
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is usually used
during the startup phase of a program.
Note that the default <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> is not saved in a <a href="impnotes.html#image" class="olink">memory image</a>.
The use of <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is
recommended only for programs that are so simple that they will never
need more than one <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>.</p><p><a id="textdomaindir"></a><b>Function <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a>. </b><tt class="code">(<a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a> <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a>)</tt>
is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the base directory, called
<tt class="filename">TEXTDOMAINDIR</tt> above, where the message
catalogs for the given <a href="#domain" title="32.7.1.1.&#xA0;Domain"><em class="replaceable"><tt>DOMAIN</tt></em></a> are assumed to be installed.
It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able.
<tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a>)</tt> is usually used
during the startup phase of a program, and should be used because only
the program knows where its message catalogs are installed.
Note that the <tt class="filename">TEXTDOMAINDIR</tt>s
are not saved in a <a href="impnotes.html#image" class="olink">memory image</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="category"></a>32.7.1.2. Category</h4></div></div></div><p>The <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a> argument of the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> and <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a>
functions denotes which <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em> facet the result should depend on.
The possible values are a platform-dependent subset of
<span class="simplelist"><tt class="constant">:LC_ADDRESS</tt>, <tt class="constant">:LC_ALL</tt>, <tt class="constant">:LC_COLLATE</tt>, <tt class="constant">:LC_CTYPE</tt>, <tt class="constant">:LC_IDENTIFICATION</tt>, <tt class="constant">:LC_MEASUREMENT</tt>, <tt class="constant">:LC_MESSAGES</tt>, <tt class="constant">:LC_MONETARY</tt>, <tt class="constant">:LC_NAME</tt>, <tt class="constant">:LC_NUMERIC</tt>, <tt class="constant">:LC_PAPER</tt>, <tt class="constant">:LC_TELEPHONE</tt>, <tt class="constant">:LC_TIME</tt></span>
The use of these values is useful for users who have a
character/time/collation/money handling set differently from the usual
message handling.
Note that when a <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a> argument is used, the message catalog
location depends on the <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a>: it will be expected at
<tt class="filename">TEXTDOMAINDIR/ll/category/domain.mo</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="i18n-example"></a>32.7.1.3. Internationalization Example</h4></div></div></div><p>A non-internationalized program simulating a restaurant dialogue
might look as follows.</p><p><a id="i18n-non-i"></a><b>prog.lisp. </b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%" "'Your command, please?', asked the waiter.")

(format t "~@?~%"
          (if (= n 1) "a piece of cake" "~D pieces of cake")
          n)
</pre></td></tr></table><p>After being internationalized, all strings are wrapped in
<a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> calls, and <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a> is used for plurals.
Also, <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a> is assigned a value; in our case, for simplicity,
the current directory.</p><p><a id="i18n-i"></a><b>prog.lisp. </b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setf (textdomain) "prog")
(setf (textdomaindir "prog") "./")

(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%"
          (gettext "'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n)
          n)
</pre></td></tr></table><p>For ease of reading, it is customary to define an abbreviation
for the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> function.  An underscore is customary.</p><p><a id="i18n-i-abbrev"></a><b>prog.lisp. </b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setf (textdomaindir "prog") "./")
(defun _ (msgid) (gettext msgid "prog"))

(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%"
          (_"'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n "prog")
          n)
</pre></td></tr></table><p>Now the program's maintainer creates a message catalog template
through the command
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ xgettext -o prog.pot prog.lisp
</pre></td></tr></table><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>xgettext version 0.11 or higher is required here.</p></div><p>The message catalog template looks roughly like this.</p><p><a id="i18n-pot"></a><b>prog.pot. </b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
msgid "'Your command, please?', asked the waiter."
msgstr ""

msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] ""
msgstr[1] ""
</pre></td></tr></table><p>Then a French translator creates a French message catalog</p><p><a id="i18n-fr-po"></a><b>prog.fr.po. </b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO-8859-1\n"
"Plural-Forms: nplurals=2; plural=(n &gt; 1);\n"

msgid "'Your command, please?', asked the waiter."
msgstr "«Votre commande, s'il vous plait», dit le garçon."

# Les gateaux allemands sont les meilleurs du monde.
msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] "un morceau de gateau"
msgstr[1] "%d morceaux de gateau"
</pre></td></tr></table><p>and sends it to the program's maintainer.</p><p>The program's maintainer compiles the catalog as follows:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ mkdir -p ./fr/LC_MESSAGES
bash$ msgfmt -o ./fr/LC_MESSAGES/prog.mo prog.fr.po
</pre></td></tr></table><p>When a user in a french <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em> then runs the program
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ clisp prog.lisp 2
</pre></td></tr></table><p>
she will get the output
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
    «Votre commande, s'il vous plait», dit le garçon.
    2 morceaux de gateau
</pre></td></tr></table><p>
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="i18n-locale"></a>32.7.2. Locale</h3></div></div></div><div class="variablelist"><dl><dt><a id="set-locale"></a><tt class="code">(<a href="#set-locale"><tt class="function">I18N:SET-LOCALE</tt></a>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a> <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em>)</tt></dt><dd><p>This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setlocale.html" target="_top"><tt class="function">setlocale</tt></a>.</p><p>When <em class="replaceable"><tt><a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">LOCALE</a></tt></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return the current one.</p><p>When <a href="#category" title="32.7.1.2.&#xA0;Category"><em class="replaceable"><tt>CATEGORY</tt></em></a> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return all categories
   as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</p></dd><dt><a id="locale-conv"></a><tt class="code">(<a href="#locale-conv"><tt class="function">I18N:LOCALE-CONV</tt></a>)</tt></dt><dd><p>This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/localeconv.html" target="_top"><tt class="function">localeconv</tt></a>.</p><p>Returns a <span class="type">I18N:LOCALE-CONV</span>
   structure.</p></dd><dt><a id="lang-info"></a><tt class="code">(<a href="#lang-info"><tt class="function">I18N:LANGUAGE-INFORMATION</tt></a>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>item</tt></em>)</tt></dt><dd><p>This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/nl_langinfo.html" target="_top"><tt class="function">nl_langinfo</tt></a> (<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>)
   and <tt class="function">GetLocaleInfo</tt> (<a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>).</p><p>When <em class="replaceable"><tt>item</tt></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   return all available information as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="syscalls"></a>32.8. System Calls</h2></div></div></div><p>The <a href="#syscalls" title="32.8.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a> module makes some system calls available from lisp.
 Not all of these system calls are actually POSIX, so this package has a
 nickname <strong class="package">“<span class="quote">OS</span>”</strong>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:SYSCALLS</tt>.</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">POSIX:RESOLVE-HOST-IPADDR</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>host</tt></em>)</tt></dt><dd><p>Returns the <span class="type">HOSTENT</span> structure:
   </p><div class="variablelist"><dl><dt><em class="structfield"><tt>name</tt></em></dt><dd>host name</dd><dt><em class="structfield"><tt>aliases</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of aliases</dd><dt><em class="structfield"><tt>addr-list</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of IP addresses as dotted quads (for IPv4) or
       coloned octets (for IPv6)</dd><dt><em class="structfield"><tt>addrtype</tt></em></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> address type (IPv4 or IPv6)
   </dd></dl></div><p>
   When <em class="replaceable"><tt>host</tt></em> is omitted or <tt class="constant">:DEFAULT</tt>, return the data for the
   current host. When <em class="replaceable"><tt>host</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, all the
   host database is returned as a list (this would be the contents of the
   <tt class="filename">/etc/hosts</tt> file on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system or
   <tt class="filename">${windir}/system32/etc/hosts</tt> on a <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> system).
  </p><p>This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html" target="_top"><tt class="function">gethostbyname</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html" target="_top"><tt class="function">gethostbyaddr</tt></a>.
 </p></dd><dt><a id="file-stat"></a><tt class="code">(<tt class="function">POSIX:FILE-STAT</tt>
    <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>link-p</tt></em>)</tt></dt><dd><p>Return the <span class="type">FILE-STAT</span> structure.
   <em class="replaceable"><tt>pathname</tt></em> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system, meaning <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>).
   The first slot of the structure returned is the string or the
   number on which <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html" target="_top"><tt class="function">stat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html" target="_top"><tt class="function">fstat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html" target="_top"><tt class="function">lstat</tt></a> was called.
   The other slots are numbers, members of the <span class="type">struct stat</span>:
    </p><div class="variablelist"><dl><dt><em class="structfield"><tt>dev</tt></em></dt><dd>Device ID of device containing file.
     </dd><dt><em class="structfield"><tt>ino</tt></em></dt><dd>File serial number.
     </dd><dt><em class="structfield"><tt>mode</tt></em></dt><dd>Mode of file.
     </dd><dt><em class="structfield"><tt>nlink</tt></em></dt><dd>Number of hard links to the file.
     </dd><dt><em class="structfield"><tt>uid</tt></em></dt><dd>User ID of file.
     </dd><dt><em class="structfield"><tt>gid</tt></em></dt><dd>Group ID of file.
     </dd><dt><em class="structfield"><tt>rdev</tt></em></dt><dd>Device ID (if file is character or block
        special).</dd><dt><em class="structfield"><tt>size</tt></em></dt><dd>For regular files, the file size in bytes.
        For symbolic links, the length in bytes of the pathname contained
        in the symbolic link.
        For a shared memory object, the length in bytes.
        For a typed memory object, the length in bytes.
        For other file types, the use of this field is unspecified.
     </dd><dt><em class="structfield"><tt>atime</tt></em></dt><dd>Time of last access (as the number of seconds
        since 1900-01-01).</dd><dt><em class="structfield"><tt>mtime</tt></em></dt><dd>Time of last data modification (as the number of
        seconds since 1900-01-01).</dd><dt><em class="structfield"><tt>ctime</tt></em></dt><dd>Time of last status change (as the number of
        seconds since 1900-01-01).</dd><dt><em class="structfield"><tt>blksize</tt></em></dt><dd>A file system-specific preferred I/O block size
        for this object.  In some file system types, this may vary from
        file to file.</dd><dt><em class="structfield"><tt>blocks</tt></em></dt><dd>Number of blocks allocated for this object.
     </dd></dl></div><p>
    All slots are read-only.
   </p><p>If the system does not support a particular
    field (e.g., <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> prior to 2000 does not have hard links), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    (or the default, like 1 for the number of hard links for old
    <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt><a id="set-file-stat"></a><tt class="code">(<tt class="function">POSIX:SET-FILE-STAT</tt> <em class="replaceable"><tt>pathname</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>mode</tt></em> <em class="replaceable"><tt>uid</tt></em>
    <em class="replaceable"><tt>gid</tt></em>)</tt></dt><dd><p>Set some file attributes using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/chmod.html" target="_top"><tt class="function">chmod</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/chown.html" target="_top"><tt class="function">chown</tt></a>.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches ar welcome.]
 </p></dd><dt><a id="stat-vfs"></a><tt class="code">(<tt class="function">POSIX:STAT-VFS</tt>
    <em class="replaceable"><tt>pathname</tt></em>)</tt></dt><dd><p>Return the <span class="type">STAT-VFS</span> structure.
   <em class="replaceable"><tt>pathname</tt></em> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system, meaning <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>).
   The first slot of the structure returned is the string
   or the number on which <a href="http://www.opengroup.org/onlinepubs/007904975/functions/statvfs.html" target="_top"><tt class="function">statvfs</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/fstatvfs.html" target="_top"><tt class="function">fstatvfs</tt></a> was called.
   The other slots are members of the <span class="type">struct statvfs</span>:
   </p><div class="variablelist"><dl><dt><em class="structfield"><tt>bsize</tt></em></dt><dd>File system block size.
    </dd><dt><em class="structfield"><tt>frsize</tt></em></dt><dd>Fundamental file system block size.
    </dd><dt><em class="structfield"><tt>blocks</tt></em></dt><dd>Total number of blocks on file system in units of
       <em class="structfield"><tt>frsize</tt></em>.</dd><dt><em class="structfield"><tt>bfree</tt></em></dt><dd>Total number of free blocks.
    </dd><dt><em class="structfield"><tt>bavail</tt></em></dt><dd>Number of free blocks available to
       non-privileged processes.</dd><dt><em class="structfield"><tt>files</tt></em></dt><dd>Total number of file serial numbers.
    </dd><dt><em class="structfield"><tt>ffree</tt></em></dt><dd>Total number of free file serial numbers.
    </dd><dt><em class="structfield"><tt>favail</tt></em></dt><dd>Number of file serial numbers available to
       non-privileged processes.</dd><dt><em class="structfield"><tt>fsid</tt></em></dt><dd>File system ID.</dd><dt><em class="structfield"><tt>flag</tt></em></dt><dd>List of platform-dependent values, such as <tt class="constant">:READ-ONLY</tt>.
    </dd><dt><em class="structfield"><tt>namemax</tt></em></dt><dd>Maximum filename length.
   </dd></dl></div><p>
   All slots are read-only.
  </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt><a id="file-info"></a><tt class="code">(<tt class="function">OS:FILE-INFO</tt>
    <em class="replaceable"><tt>pathname</tt></em>)</tt></dt><dd><p>Return the <span class="type">FILE-INFO</span> structure.
   <em class="replaceable"><tt>pathname</tt></em> should be a <a href="#path-des">pathname designator</a>. The 8 slots are attributes, ctime,
   atime, wtime, high and low sizes, name and short name.
   </p><p>[<a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="code">(<tt class="function">POSIX:USER-DATA</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>user</tt></em>)</tt></dt><dd><p>Return the <span class="type">PASSWD</span> structure (name,
   encoded password, UID, GID, full name, home directory, shell).
   When <em class="replaceable"><tt>user</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return all users.
   When <em class="replaceable"><tt>user</tt></em> is <tt class="constant">:DEFAULT</tt> or
   not supplied, return the information about the current user.
   If the system does not support a particular field (e.g., Win32 does
   not have a concept of a shell), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (or the default, like
   <tt class="filename">c:\command.com</tt> for DOS) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="code">(<tt class="function">POSIX:UNAME</tt>)</tt></dt><dd>Return a structure describing the OS, derived from
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html" target="_top"><tt class="function">uname</tt></a>.</dd><dt><tt class="code">(<tt class="function">POSIX:SYSCONF</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>what</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:CONFSTR</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>what</tt></em>)</tt></dt><dd>Return the specified configuration parameter or a
    list of all available parameters (when <em class="replaceable"><tt>what</tt></em> is missing or
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>), by calling <a href="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html" target="_top"><tt class="function">sysconf</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/confstr.html" target="_top"><tt class="function">confstr</tt></a> respectively.
 </dd><dt><tt class="code">(<tt class="function">POSIX:LIMITS</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>what</tt></em>)</tt></dt><dd>Return the current and the maximal limits as two
    values when <em class="replaceable"><tt>what</tt></em> is specified or a list of all available limits
    when <em class="replaceable"><tt>what</tt></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, by calling <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html" target="_top"><tt class="function">getrlimit</tt></a>.
 </dd><dt><tt class="code">(<tt class="function">POSIX:USAGE</tt>)</tt></dt><dd>Return 2 structures describing the resource usage by
    the lisp process and its children, derived from <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html" target="_top"><tt class="function">getrusage</tt></a>.
  </dd><dt><tt class="code">(<tt class="function">POSIX:ERF</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:ERFC</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:J0</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:J1</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:JN</tt> <em class="replaceable"><tt>integer</tt></em> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:Y0</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:Y1</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:YN</tt> <em class="replaceable"><tt>integer</tt></em> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:GAMMA</tt> <em class="replaceable"><tt>real</tt></em>)</tt><br /><tt class="code">(<tt class="function">POSIX:LGAMMA</tt> <em class="replaceable"><tt>real</tt></em>)</tt></dt><dd><p>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in <tt class="filename">libm.so</tt>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Please note that these functions do not provide
    lisp-style error handling and precision, and do all the computations
    at the <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> level.</p></div></dd><dt><a id="stream-lock"></a>
   <tt class="code">(<tt class="function">POSIX:STREAM-LOCK</tt> <em class="replaceable"><tt>stream</tt></em>
    <em class="replaceable"><tt>lock-p</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    (:BLOCK <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>) (:SHARED <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>) (:START 0) (:END <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>))</tt></dt><dd>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/fcntl.html" target="_top"><tt class="function">fcntl</tt></a> system call.
   It sets or removes a file lock for the (portion of the) file associated
   with <em class="replaceable"><tt>stream</tt></em>, depending on <em class="replaceable"><tt>lock-p</tt></em>.
   When <em class="replaceable"><tt>block</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the call is non-blocking,
   and when the file is already locked, it <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
   When <em class="replaceable"><tt>shared</tt></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   then lock can be shared between several callers.
   Several processes can set a <em class="replaceable"><tt>shared</tt></em>
   (i.e., <span class="emphasis"><em>read</em></span>) lock, but only one can set
   an <span class="emphasis"><em>exclusive</em></span> (i.e., <span class="emphasis"><em>write</em></span>,
   or non-<em class="replaceable"><tt>shared</tt></em>) lock.
 </dd><dt><a id="mknod"></a><tt class="code">(<tt class="function">POSIX:MKNOD</tt>
    <em class="replaceable"><tt>pathname</tt></em> <em class="replaceable"><tt>type</tt></em> <em class="replaceable"><tt>mode</tt></em>)</tt></dt><dd>Create a special file using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/mknod.html" target="_top"><tt class="function">mknod</tt></a>.
   Use <tt class="literal">:FIFO</tt> to create pipes
   and <tt class="literal">:SOCK</tt> to create sockets.
 </dd><dt><a id="convert-modes"></a><tt class="code">(<tt class="function">POSIX:CONVERT-MODE</tt> <em class="replaceable"><tt>mode</tt></em>)</tt></dt><dd>Convert between numeric, (e.g., <tt class="literal">0644</tt>)
   and symbolic (e.g., <tt class="data">(:RUSR :WUSR :RGRP :ROTH)</tt>)
   file modes.</dd><dt><a id="umask"></a><tt class="code">(<tt class="function">UMASK</tt>
    <em class="replaceable"><tt>mode</tt></em>)</tt></dt><dd>Change process mask using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/umask.html" target="_top"><tt class="function">umask</tt></a>.
 </dd><dt><a id="copy-file"></a>
   <tt class="code">(<tt class="function">POSIX:COPY-FILE</tt>
    <em class="replaceable"><tt>source-path</tt></em>
    <em class="replaceable"><tt>destination-path</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</tt></dt><dd><p>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html" target="_top"><tt class="function">symlink</tt></a>
    (when <em class="replaceable"><tt>method</tt></em> is <tt class="constant">:SYMLINK</tt>),
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/link.html" target="_top"><tt class="function">link</tt></a> (when it is <tt class="constant">:HARDLINK</tt>), and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html" target="_top"><tt class="function">rename</tt></a>
    (when it is <tt class="constant">:RENAME</tt>) system calls, as well as,
    you guessed it, a generic file copy utility
    (when <em class="replaceable"><tt>method</tt></em> is <tt class="constant">:COPY</tt>).
   </p><p>Both <em class="replaceable"><tt>source-path</tt></em> and
    <em class="replaceable"><tt>destination-path</tt></em> may be wild.
 </p></dd><dt><a id="dup-handle"></a>
   <tt class="code">(<tt class="function">POSIX:DUPLICATE-HANDLE</tt>
    <em class="replaceable"><tt>fd1</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>fd2</tt></em>)</tt></dt><dd>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html" target="_top"><tt class="function">dup/dup2</tt></a> system calls on
   <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems and to <tt class="function">DuplicateHandle</tt> system
   call on <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>.</dd><dt><tt class="code">(OS:SHORTCUT-INFO <em class="replaceable"><tt>pathname</tt></em>)</tt></dt><dd>Return information about a <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> shortcut
    (<tt class="filename">#P".lnk"</tt>) file contents in a
    <span class="type">SHORTCUT-INFO</span> structure.</dd><dt><tt class="code">(OS:MAKE-SHORTCUT <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    :WORKING-DIRECTORY :ARGUMENTS :SHOW-COMMAND :ICON :DESCRIPTION
    :HOT-KEY :PATH)</tt></dt><dd>Create (or modify the properties of an existing one)
    a <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> shortcut (<tt class="filename">#P".lnk"</tt>) file.
 </dd><dt><tt class="code">(OS:SYSTEM-INFO)</tt></dt><dd>Return <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> system information in a
    <span class="type">SYSTEM-INFO</span> structure.</dd><dt><tt class="code">(OS:VERSION)</tt></dt><dd>Return <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> version information in a
    <span class="type">VERSION</span> structure.</dd><dt><tt class="code">(OS:MEMORY-STATUS)</tt></dt><dd>Return <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a> memory status information in a
    <span class="type">MEMORY-STATUS</span> structure.</dd><dt><tt class="code">(POSIX:CRYPT <em class="replaceable"><tt>key</tt></em>
    <em class="replaceable"><tt>salt</tt></em>)</tt></dt><dd>Call <a href="http://www.opengroup.org/onlinepubs/007904975/functions/crypt.html" target="_top"><tt class="function">crypt</tt></a>, arguments are <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s.
 </dd><dt><tt class="code">(POSIX:ENCRYPT <em class="replaceable"><tt>block</tt></em>
    <em class="replaceable"><tt>decrypt-p</tt></em>)</tt><br /><tt class="code">(POSIX:SETKEY <em class="replaceable"><tt>key</tt></em>)</tt></dt><dd>Call <a href="http://www.opengroup.org/onlinepubs/007904975/functions/encrypt.html" target="_top"><tt class="function">encrypt</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setkey.html" target="_top"><tt class="function">setkey</tt></a>, respectively.
    <em class="replaceable"><tt>block</tt></em> and <em class="replaceable"><tt>key</tt></em> are of type
    <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/fun_vector.html" target="_top"><tt class="function">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8) 8)</tt>.
    <em class="replaceable"><tt>decrypt-p</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a>.
 </dd><dt><tt class="code">(OS:PHYSICAL-MEMORY)</tt></dt><dd><p>Return 2 values: total and available physical memory.
   </p><p>Works on both <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <a href="http://winehq.com/" target="_top"><strong>Win32</strong></a>.
 </p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="oracle"></a>32.9. <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ora-functionality">32.9.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.9.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.9.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.9.4. Building the Oracle Interface</a></span></dt></dl></div><p>
The <a href="http://www.oracle.com" target="_top">Oracle</a> module allows a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program to act as client to an
<a href="http://www.oracle.com" target="_top">Oracle</a> database server.  The module includes full
SQL support, transactions (including auto-commit), support for most
<a href="http://www.oracle.com" target="_top">Oracle</a> data types (<span class="type">LONG</span>, <span class="type">BLOB</span>,
<span class="type">CLOB</span>, <span class="type">RAW</span>, etc.), automatic conversion
between <a href="http://www.oracle.com" target="_top">Oracle</a> and <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> data types, database connection caching and
retry, concurrent connections to multiple databases, proper handling
of <a href="http://www.oracle.com" target="_top">Oracle</a> errors, and more.</p><p>The module can be used to build sophisticated <a href="http://www.oracle.com" target="_top">Oracle</a> database
applications in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:ORACLE</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-functionality"></a>32.9.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></h3></div></div></div><p>Access to <a href="http://www.oracle.com" target="_top">Oracle</a> is via these functions and macros in
package <strong class="package">“<span class="quote">ORACLE</span>”</strong>.
When any <a href="http://www.oracle.com" target="_top">Oracle</a> function fails, the general Lisp function
<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> is called, with the condition string set to
include the <a href="http://www.oracle.com" target="_top">Oracle</a> error number, the <a href="http://www.oracle.com" target="_top">Oracle</a> message text,
and other context of the error (e.g., the text and parse location of a
SQL query).</p>
<!--List of functions an macros-->
<div class="variablelist">
<!--CONNECT--><dl><dt><a id="ora-connect"></a><tt class="code">(ORACLE:CONNECT
<em class="replaceable"><tt>user</tt></em>
<em class="replaceable"><tt>password</tt></em>
<em class="replaceable"><tt>server</tt></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<em class="replaceable"><tt>schema</tt></em>
<em class="replaceable"><tt>auto-commit</tt></em>
<em class="replaceable"><tt>prefetch-buffer-bytes</tt></em>
<em class="replaceable"><tt>long-len</tt></em>
<em class="replaceable"><tt>truncate-ok</tt></em>)</tt></dt><dd><p>

Connect to an <a href="http://www.oracle.com" target="_top">Oracle</a> database.  All subsequent operations will affect
this database until the next call to <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>.  A
single program can access different <a href="http://www.oracle.com" target="_top">Oracle</a> schemas concurrently by
repeated calls to <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>.  Database connections
are cached and re-used: if you call <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> again
with the same <em class="replaceable"><tt>user</tt></em>,
<em class="replaceable"><tt>schema</tt></em>, and
<em class="replaceable"><tt>server</tt></em>, the previous <a href="http://www.oracle.com" target="_top">Oracle</a> connection will
be re-used.  <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> may not be called inside
<tt class="function">WITH-TRANSACTION</tt>.

Returns: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if a cached connection was re-used, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if a new
connection was created (and cached).

The meaning of the arguments is as follows:
</p><div class="variablelist"><p class="title"><b>Arguments for <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a></b></p><dl><dt><em class="replaceable"><tt>user</tt></em></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> user ID</dd><dt><em class="replaceable"><tt>password</tt></em></dt><dd>Password for user, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if
   <em class="replaceable"><tt>user</tt></em> has no password (!).
</dd><dt><em class="replaceable"><tt>server</tt></em></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> server ID (SID).
</dd><dt><em class="replaceable"><tt>schema</tt></em></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> default schema (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>).
   If <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, same as user.  This allows you to log on with one user's
   id/password but see the database as if you were some other user.
</dd><dt><em class="replaceable"><tt>auto-commit</tt></em></dt><dd>Flag: whether to commit after every operation
   (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>). Set this to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if you intend to do transactions
   and call <tt class="function">COMMIT</tt> explicitly.  However,
   <tt class="function">WITH-TRANSACTION</tt> is probably easier.
</dd><dt><em class="replaceable"><tt>prefetch-buffer-bytes</tt></em></dt><dd>Number of bytes to cache from SQL SELECT fetches
   (default: 64 Kbytes) If you are very short of memory, or have a slow
   connection to <a href="http://www.oracle.com" target="_top">Oracle</a>, you can reduce this to 10k or so.
   Alternatively, if you have a fast connection to <a href="http://www.oracle.com" target="_top">Oracle</a> and
   regularly do large queries, you can increase throughput by increasing
   this value.</dd><dt><em class="replaceable"><tt>long-len</tt></em></dt><dd>Number of bytes to fetch for "long" (LONG, [BC]LOB)
   types.  Long data that exceeds this size will raise an error, or be
   truncated depending on the value of <em class="replaceable"><tt>truncate-ok</tt></em>
   (below).  Setting <em class="replaceable"><tt>long-len</tt></em> to zero and
   <em class="replaceable"><tt>truncate-ok</tt></em> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> will disable long
   fetching entirely.  If <em class="replaceable"><tt>long-len</tt></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
   or negative, defaults to 500k bytes.</dd><dt><em class="replaceable"><tt>truncate-ok</tt></em></dt><dd>Flag: if set, allow truncation of LONG columns to
   <em class="replaceable"><tt>long-len</tt></em> bytes on fetch; otherwise, fetches
   of LONG columns exceeding <em class="replaceable"><tt>long-len</tt></em> bytes
   will raise an error.  Default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd></dl></div></dd>
<!--DISCONNECT--><dt><tt class="code">(ORACLE:DISCONNECT)</tt></dt><dd>
Disconnect from the database currently connected.  No more calls can
be made until <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> is called again.  The
connection is closed and removed from the connection cache.  Does
nothing if there is no connection.  <tt class="function">DISCONNECT</tt>
may not be called inside <tt class="function">WITH-TRANSACTION</tt>.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd>
<!--RUN-SQL--><dt><tt class="code">(ORACLE:RUN-SQL
<em class="replaceable"><tt>sql</tt></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<em class="replaceable"><tt>params</tt></em>
<em class="replaceable"><tt>is-select</tt></em>)</tt></dt><dd><p>Execute a SQL statement.  Must be <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>ed
to a database.  Returns the number of rows affected by the SQL operation,
for non-SELECT statements, zero for SELECT statements.  For
destructive database operations (INSERT, UPDATE, DELETE), the results
are committed to the database immediately if
<em class="replaceable"><tt>auto-commit</tt></em> when establishing the current
connection; see <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>.  The meaning of the
arguments is as follows: </p><div class="variablelist"><p class="title"><b>Arguments for <tt class="function">RUN-SQL</tt></b></p><dl><dt><em class="replaceable"><tt>sql</tt></em></dt><dd>Text of SQL statement, as a string.
   The <em class="replaceable"><tt>sql</tt></em> statement may contain
   <a href="http://www.oracle.com" target="_top">Oracle</a> "named parameters," e.g. ":myparam" whose values will
   be substituted from the parameters given
   in <em class="replaceable"><tt>params</tt></em>.
</dd><dt><em class="replaceable"><tt>params</tt></em></dt><dd>A mapping of the names of the bind-parameters in the
   query to their values.  The set of named parameters in the query must
   match exactly the keys mapped by <em class="replaceable"><tt>params</tt></em>.
   The mapping may be passed as either (1) a hash table whose keys are
   the named parameters or (2) a list of pairs, ((name value) (name
   value) ...).  Parameter values passed from Lisp are converted to the
   appropriate <a href="http://www.oracle.com" target="_top">Oracle</a> data types (see <tt class="function">FETCH</tt>).
</dd><dt><em class="replaceable"><tt>is-select</tt></em></dt><dd>Flag: whether the statement is a SELECT query.  You
   usually do not need to set this as it is detected by default based on
   the SQL text.  However, there are situations, such as when a SELECT
   query begins with comment, that you need to specify it explicitly.
</dd></dl></div></dd>
<!--DO-ROWS--><dt><tt class="code">(ORACLE:DO-ROWS
<em class="replaceable"><tt>vars</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <em class="replaceable"><tt>body</tt></em>)</tt></dt><dd><p> Macro which loops over a SQL SELECT result,
   evaluating, for each row in the result, the forms in <em class="replaceable"><tt>body</tt></em>,
   binding symbols given in <em class="replaceable"><tt>vars</tt></em> to
   corresponding database columns in the SELECT result.  The
   argument <em class="replaceable"><tt>vars</tt></em> must be a non-empty list of
   symbols matching a subset of the columns of an active SELECT query.
   If a SELECT column is an <a href="http://www.oracle.com" target="_top">Oracle</a> expression such as
   <tt class="literal">SUBSTR(mycol, 1, 10)</tt>, it is recommended to use a
   column alias, e.g., <tt class="literal">SELECT SUBSTR(mycol, 1, 10) AS
    myvar</tt>, in which case the column alias will be used as the
   symbol bound to the column value.</p><p>As <tt class="function">DO-ROWS</tt> expands into a <a href="http://www.lisp.org/HyperSpec/Body/mac_docm_dost.html" target="_top"><tt class="function">DO*</tt></a>
   loop, it may be terminated prematurely, before all rows are fetched,
   by using <a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><tt class="function">RETURN</tt></a> anywhere in <em class="replaceable"><tt>body</tt></em>.</p><p>It is allowed to call <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> in the
   <em class="replaceable"><tt>body</tt></em> of the loop, but only to switch the connection to a database
   other than the one that was used to do the SELECT.  This is useful
   for reading from one database while writing to another.
  </p><p>In <em class="replaceable"><tt>vars</tt></em>, instead of a single
   symbol, a pair (<em class="replaceable"><tt>bound-var</tt></em>
   <em class="replaceable"><tt>"column-name"</tt></em>) may be specified, which
   will cause values from the SELECTed column or alias ,
   <em class="replaceable"><tt>column-name</tt></em>, to be bound to Lisp variable,
   <em class="replaceable"><tt>bound-var</tt></em>.  This is for unusual cases
   where a Lisp variable cannot be created with the same name as the
   column (e.g., a column named "T"), or when it is inconvenient or
   impossible to alias the column with <tt class="literal">SELECT ... AS</tt>.
</p></dd>
<!--FETCH--><dt><tt class="code">(ORACLE:FETCH
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>result-type</tt></em>)</tt></dt><dd><p>Fetch a single row of data.  Returns a row of values
   corresponding to the columns of an active SELECT statment.  The row
   data is returned in one of three different forms, depending on the
   value of the symbol <em class="replaceable"><tt>result-type</tt></em>:
</p><div class="variablelist"><p class="title"><b>Return values for <tt class="function">FETCH</tt></b></p><dl><dt><tt class="classname">ARRAY</tt></dt><dd>Values will be returned in an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> with the
    same number of columns as in the SELECT statement, in the same
    order.  This is the default.</dd><dt><tt class="classname">PAIRS</tt></dt><dd>A list of pairs, <tt class="literal">((column, value)
     ...)</tt> is be returned.  The number and order of pairs is
    the same as the columns in the SELECT statement.
 </dd><dt><tt class="classname">HASH</tt></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> whose keys are the column names
    and whose values are the column values in the row.  The SELECT
    columns <span class="emphasis"><em>must be unique</em></span> and be valid Lisp
    symbols to use this option. If you are SELECTing an expression, you
    probably want to use a column alias: <tt class="literal">SELECT &lt;expr&gt; AS
    some_alias ...</tt></dd></dl></div><p>The following data type conversions are done between <a href="http://www.oracle.com" target="_top">Oracle</a>
 datatypes and <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> data types:
 </p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th><a href="http://www.oracle.com" target="_top">Oracle</a> type</th><th>Converts to/from <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> type</th></tr></thead><tbody><tr><td>Numeric (NUMBER, INTEGER, FLOAT)</td><td>The appropriate <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> numeric type (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><tt class="classname">BIGNUM</tt></a>,
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>)</td></tr><tr><td>String (CHAR, VARCHAR, VARCHAR2)</td><td>A <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.  Note that CHAR will be padded out to its
      full, fixed length as defined in <a href="http://www.oracle.com" target="_top">Oracle</a>; VARCHAR will be a
      string of variable length.  Also note that <a href="http://www.oracle.com" target="_top">Oracle</a> has no
      "zero-length string" value - it returns the SQL special value
      <tt class="constant">NULL</tt> which is converted to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (see below).</td></tr><tr><td>DATE</td><td>A string of the form "YYYY-MM-DD HH:MM:SS" where HH is
      24-hour form.  If you want dates formatted differently, convert
      them to strings in <a href="http://www.oracle.com" target="_top">Oracle</a> using <tt class="literal">SELECT
       TO_CHAR(mydate, '<em class="replaceable"><tt>template</tt></em>') AS
       mydate</tt>; the result will then be returned as a string,
      formatted as per <em class="replaceable"><tt>template</tt></em>.</td></tr><tr><td>RAW, LONG RAW</td><td>A hexadecimal string, with two hex digits for each byte of
      <a href="http://www.oracle.com" target="_top">Oracle</a> data.  Note that this means the Lisp string will be
      twice the size, in bytes, as the <a href="http://www.oracle.com" target="_top">Oracle</a> data.</td></tr><tr><td>"Large" types (LONG, BLOB, CLOB)</td><td>A Lisp string of (arbitrary, possibly binary) data.  Note
      that truncation may occur; see the <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>
      parameters <em class="replaceable"><tt>long-len</tt></em>
      and <em class="replaceable"><tt>truncate-ok</tt></em>.</td></tr><tr><td><tt class="constant">NULL</tt></td><td>The <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> value <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr></tbody></table></div><p>
</p></dd>
<!--FETCH-ALL--><dt><tt class="code">(ORACLE:FETCH-ALL
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<em class="replaceable"><tt>max-rows</tt></em>
<em class="replaceable"><tt>result-type</tt></em>
<em class="replaceable"><tt>item-type</tt></em>)</tt></dt><dd><p>Fetch some or all the rows from a query and return
result as a sequence of sequences.  Arguments are all optional:
<em class="replaceable"><tt>max-rows</tt></em> limits the result to
that numbers of rows;
<em class="replaceable"><tt>result-type</tt></em> is the type of
sequence of the rows, either
'<tt class="classname">ARRAY</tt> (the default) or
'<tt class="classname">LIST</tt>;
<em class="replaceable"><tt>item-type</tt></em> is the type of
sequence of the column values for each row, either
'<tt class="classname">ARRAY</tt> (the default) or
'<tt class="classname">LIST</tt>.
Each row fetched always contains the full set of column values SELECTed.
</p><p>
<tt class="function">FETCH-ALL</tt> is often useful in conjunction with
<tt class="function">MAP</tt> or <tt class="function">REDUCE</tt> to iterate
over an entire SELECT result to construct a single Lisp value.

</p></dd>
<!--PEEK--><dt><tt class="code">(ORACLE:PEEK
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<em class="replaceable"><tt>result-type</tt></em>)</tt></dt><dd>

Peek at next row of data (without fetching it).  Returns a row a la
<tt class="function">FETCH</tt>, except does not advance to the next row.
Repeated calls to <tt class="function">PEEK</tt> will thus return the same
row of data.  Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if at EOF.  If data is available, returns
row data just as <tt class="function">FETCH</tt> (see
<tt class="function">FETCH</tt> for data format and conversions done).
Optional argument <em class="replaceable"><tt>result-type</tt></em> is the type
of sequence of the column values for the returned row, either
<a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> (the default) or <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.
<tt class="function">PEEK</tt> is a useful look-ahead
for database reporting functions that may need to "break" on changes in
data to print headers, summaries, etc.
</dd>
<!--COLUMNS--><dt><tt class="code">(ORACLE:COLUMNS)</tt></dt><dd><p>Returns information on the columns of a SELECT
  result, in the form of an array of SQLCOL structures, one for each
  result column in the most recent SELECT statement.  It is not
  necessary to have called <tt class="function">FETCH</tt> before requesting
  column information on the query, however the query must have been
  compiled and executed with <tt class="function">RUN-SQL</tt>.  Each SQLCOL
  structure has these slots:
</p><div class="variablelist"><p class="title"><b>Slots of <tt class="classname">SQLCOL</tt></b></p><dl><dt>NAME</dt><dd>The <a href="http://www.oracle.com" target="_top">Oracle</a> column name or the expression
    selected.  If the query used a column alias, <tt class="literal">SELECT
     <em class="replaceable"><tt>expr</tt></em> AS
     <em class="replaceable"><tt>alias</tt></em></tt>, then
    <em class="replaceable"><tt>alias</tt></em> will be returned as the column name.
 </dd><dt>TYPE</dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> data type (VARCHAR, NUMBER, DATE, ...)
 </dd><dt>SIZE</dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> data length (useful mostly for
    character types)</dd><dt>SCALE</dt><dd>For numeric (NUMBER) types, number of digits to right of
    decimal; NIL for FLOAT</dd><dt>PRECISION</dt><dd>For numeric types, total number of significant
    digits (decimal digits for NUMBER, bits for FLOAT)</dd><dt>NULL_OK</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <tt class="constant">NULL</tt>s allowed, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <tt class="constant">NULL</tt>s are
    not allowed.</dd></dl></div><p>To access the values of the SQLCOL structures, use the standard
 accessor functions, e.g., <tt class="literal">(ORACLE:SQLCOL-NAME (elt
  (ORACLE:COLUMNS) 0))</tt></p></dd>
<!--EOF--><dt><tt class="code">(ORACLE:EOF)</tt></dt><dd>
Returns EOF status.  A SELECT query cursor is considered at EOF if the next
FETCH would return no data.  Must be connected to a database, and have
an active SELECT statement.
</dd>
<!--INSERT-ROW--><dt><tt class="code">(ORACLE:INSERT-ROW
<em class="replaceable"><tt>table</tt></em>
<em class="replaceable"><tt>values</tt></em>)</tt></dt><dd>
Inserts a single row into <em class="replaceable"><tt>table</tt></em>.
Second argument <em class="replaceable"><tt>values</tt></em> is a map of
column names to values: either a hash table whose keys are the column
names, or a list of (name, value) pairs.  Columns missing from the map
will be given the default <a href="http://www.oracle.com" target="_top">Oracle</a> value, or <tt class="constant">NULL</tt>.
Returns the number of rows inserted (i.e., always 1).
</dd>
<!--UPDATE-ROW--><dt><tt class="code">(ORACLE:UPDATE-ROW
<em class="replaceable"><tt>table</tt></em>
<em class="replaceable"><tt>condition</tt></em>
<em class="replaceable"><tt>vals</tt></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<em class="replaceable"><tt>params</tt></em>)</tt></dt><dd>
Updates rows in <em class="replaceable"><tt>table</tt></em>.  Second argument
<em class="replaceable"><tt>condition</tt></em> is a string expression for a WHERE
clause (without the "WHERE") which determines which rows are updated.
Third argument <em class="replaceable"><tt>vals</tt></em> is a map of columns to
be updated to their new values: a hash table whose keys are column
names, or list of (name, value) pairs.  Optional
<em class="replaceable"><tt>params</tt></em> specifies values for named
parameters that may occur in <em class="replaceable"><tt>condition</tt></em>,
e.g., when the condition is a match on a primary key, e.g.: <tt class="literal">"pk_column
= :pk_val"</tt>.  Returns the number of rows updated.
</dd>
<!--ROW-COUNT--><dt><tt class="code">(ORACLE:ROW-COUNT)</tt></dt><dd>
For SELECT statements, returns the number of rows
<tt class="function">FETCH</tt>ed (<strong>not</strong>
<tt class="function">PEEK</tt>ed) so far.  For other statements (e.g.,
INSERT, UPDATE, DELETE), returns the number of rows affected by the
last operation (e.g., inserted, updated, deleted).  Must be connected
to a database and have an active SQL statement.
</dd>
<!--WITH-TRANSACTION--><dt><tt class="code">(ORACLE:WITH-TRANSACTION
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a>
<em class="replaceable"><tt>body</tt></em>)</tt></dt><dd>

Evaluates the forms in <em class="replaceable"><tt>body</tt></em> atomically as a
database transaction, ensuring that either all the database operations
done in <em class="replaceable"><tt>body</tt></em> complete successfully, or none
of them do.  If pending (un-committed) changes exist when this macro
is entered, they are <span class="emphasis"><em>rolled back</em></span> (undone), so
that the database is affected only by the subsequent updates inside
<em class="replaceable"><tt>body</tt></em>.  Nesting of
<tt class="function">WITH-TRANSACTION</tt> blocks is not allowed and will
raise an error.  There is no effect on the status of
<em class="replaceable"><tt>auto-commit</tt></em> given in
<a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a>; it resumes its previous state when the
macro exits.  The value of the <tt class="function">WITH-TRANSACTION</tt>
expression is that of the last form in <em class="replaceable"><tt>body</tt></em>.
</dd>
<!--COMMIT--><dt><tt class="code">(ORACLE:COMMIT)</tt></dt><dd>
Commits (makes permanent) any pending changes to the database.  The
<em class="replaceable"><tt>auto-commit</tt></em> parameter to
<a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> must not have been set to use this
function, nor can it be called inside a
<tt class="function">WITH-TRANSACTION</tt> block. Always returns NIL.
</dd>
<!--ROLLBACK--><dt><tt class="code">(ORACLE:ROLLBACK)</tt></dt><dd>
Rolls back (undoes and abandons) any pending changes to the database.
The <em class="replaceable"><tt>auto-commit</tt></em> parameter to
<a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> must not have been set to use this
function, nor can it be called inside a
<tt class="function">WITH-TRANSACTION</tt> block. Always returns NIL.
</dd>
<!--AUTO-COMMIT--><dt><tt class="code">(ORACLE:AUTO-COMMIT)</tt></dt><dd>
Toggles the state of <em class="replaceable"><tt>auto-commit</tt></em> initially
given to <a href="#ora-connect"><tt class="function">ORACLE:CONNECT</tt></a> for the current connection.
With <em class="replaceable"><tt>auto-commit</tt></em> enabled, modifications to
the database are committed (made permanent) after each destructive SQL
operation made with calls to <tt class="function">RUN-SQL</tt>,
<tt class="function">INSERT-ROW</tt>, <tt class="function">UPDATE_ROW</tt>, etc.
With <em class="replaceable"><tt>auto-commit</tt></em> disabled, transactional
integrity is under the programmer's control and is managed either by
(1) explicitly calling <tt class="function">COMMIT</tt> or
<tt class="function">ROLLBACK</tt> to commit or undo the pending
operations, or (2) wrapping code blocks with database operations
inside the <tt class="function">WITH-TRANSACTION</tt> macro.
<tt class="function">AUTO-COMMIT</tt> returns the previous status of
<em class="replaceable"><tt>auto-commit</tt></em>.
<tt class="function">AUTO-COMMIT</tt> may not be called inside
<tt class="function">WITH-TRANSACTION</tt>.
</dd>
<!--=-=-==-=-==-=-==-=-==-=-==-=-= End of functions section-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-example"></a>32.9.2. <a href="http://www.oracle.com" target="_top">Oracle</a> Example</h3></div></div></div><p>
Below is a simple example script which uses <a href="http://www.oracle.com" target="_top">Oracle</a>'s demo database
schema, <tt class="literal">SCOTT</tt>.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(setf server "orcl") ; Change this to your server's SID
(oracle:connect "scott" "tiger" server)

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "NEWACCT")) '(("acctval" "ACCOUNTING")))

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "ACCOUNTING")) '(("acctval" "NEWACCT")))
</pre></td></tr></table><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-config"></a>32.9.3. <a href="http://www.oracle.com" target="_top">Oracle</a> Configuration</h3></div></div></div><p>Obviously, a working <a href="http://www.oracle.com" target="_top">Oracle</a> environment is required.  It is
recommended that you first be able to log on and use the <a href="http://www.oracle.com" target="_top">Oracle</a>
SQL*Plus application to test your environment
<span class="emphasis"><em>before</em></span> attempting <a href="http://www.oracle.com" target="_top">Oracle</a> access via the
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> module.
At a minimum you will need to set environment variables
<tt class="envar">ORACLE_HOME</tt> to the <a href="http://www.oracle.com" target="_top">Oracle</a> base directory and
<tt class="envar">LD_LIBRARY_PATH</tt> to include
<tt class="literal">$<tt class="envar">ORACLE_HOME</tt>/lib</tt> and possibly other
directories.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-build"></a>32.9.4. Building the <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h3></div></div></div><p>The module uses the <a href="http://www.oracle.com" target="_top">Oracle</a> Call Interface (<a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a>)
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library.  To build the module you will need the <a href="http://www.oracle.com" target="_top">Oracle</a>
<a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a> headers and link libraries; as a quick check, make sure
you have the file <tt class="filename">oci.h</tt> somewhere
under <tt class="envar">ORACLE_HOME</tt>, probably
in <tt class="filename">$<tt class="envar">ORACLE_HOME</tt>/rdbms/demo/oci.h</tt>.</p><p>To build the module into <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, configure with
<span><strong class="command">./configure ... --with-module=oracle ...</strong></span>.
The <span><strong class="command">full</strong></span> <a href="impnotes.html#linkset" class="olink">linking set</a> will contain the module,
so you will need to use the <tt class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></tt> option to use it.
You can test that you really have the <a href="http://www.oracle.com" target="_top">Oracle</a>-enabled <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> by
evaluating <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><tt class="function">DESCRIBE</tt></a> 'oracle:connect)</tt>
It may be necessary to edit the Makefile in the
<tt class="filename">modules/oracle</tt> subdirectory of the distribution
prior to running <span><strong class="command">./configure</strong></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="fastcgi"></a>32.10. The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fcgi-overview">32.10.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.10.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.10.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.10.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></div><p>
The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> module speeds up <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> CGI
scripts launched by a Web server.  Working with a
<a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server such as <a href="http://www.apache.org/" target="_top">Apache</a> with
<a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program using the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol will run many times faster than a conventional CGI program.
The performance improvements stem from the fact that the script's
process remains running across <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests, eliminating startup
overhead and allowing for caching of data structures and other resources.  This
is the same approach used is in other languages (e.g., <a href="http://perl.apache.org" target="_top">mod_perl</a> for Perl).  </p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:FASTCGI</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-overview"></a>32.10.1. Overview of <a href="http://www.fastcgi.com" target="_top">FastCGI</a></h3></div></div></div><p>
Traditional CGI programs work by doing input/output with the Web
server via the following channels:
</p><div class="orderedlist"><ol type="1"><li>
Examining environment variables; e.g., <tt class="envar">HTTP_USER_AGENT</tt> is the
variable set by the Web server to name the browser used
</li><li>
Reading from standard input.  E.g., to get input data in a "method=POST" request
</li><li>
Writing an <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response document (usually "Content-type:
text/html") to the standard output, for eventual transmission
back to the browser client
</li><li>
Writing error messages to the standard error, usually captured
by the Web server and logged in its log files.
</li></ol></div><p>
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> involves replacing calls the standard routines to do
the above with calls in the <strong class="package">“<span class="quote">FASTCGI</span>”</strong> package.  These calls will then
work exactly as before when the program is invoked as a CGI, but will
also work when invoked by a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server.
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> programs persist across <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests, and thus incur
startup overhead costs only once.  For Lisp Web programs, this overhead
can be substantial: code must be
compiled and loaded, files and databases must be opened, etc.  Further,
because the program stays running from <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request to <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request,
it can cache information in memory such as database connections
or large in-memory data structures.

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-functionality"></a>32.10.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></h3></div></div></div><p>Access to
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> is via these functions in package <strong class="package">“<span class="quote">FASTCGI</span>”</strong>.

</p><div class="variablelist">
<!--IS-CGI--><dl><dt><tt class="code">(FASTCGI:IS-CGI)</tt></dt><dd>
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program has been launched as a traditional
CGI rather than in <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.  In traditional CGI, program I/O is
via operating system environment variables and standard file streams.
Under <a href="http://www.fastcgi.com" target="_top">FastCGI</a>, I/O is done directly with the Web server via
the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> protocol.
</dd>
<!--ACCEPT--><dt>
<tt class="code">(FASTCGI:ACCEPT)</tt> <em class="replaceable"><tt>cgi-forms</tt></em>
<tt class="code">(FASTCGI:FINISH)</tt>
</dt><dd><p>
In <a href="http://www.fastcgi.com" target="_top">FastCGI</a> mode, the program loops,
<tt class="function">ACCEPT</tt>ing to begin the execution of an <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a>
request, and <tt class="function">FINISH</tt>ing to signal that the script
is finished writing its response to the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request.  <tt class="function">ACCEPT</tt>
blocks until the next <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request comes in, returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if there is
a new request to handle, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if no more <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests will
occur, usually because the Web server itself has terminated, in which
case the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> server loop should also exit.
</p><p>
A typical <a href="http://www.fastcgi.com" target="_top">FastCGI</a> top-level server loop looks like:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">    (do ()
	((not (fastcgi:accept)))
	(run-my-script)
        (fastcgi:finish))
</pre></td></tr></table><p>

</p></dd>
<!--GETENV--><dt><tt class="code">(FASTCGI:GETENV
<em class="replaceable"><tt>varname</tt></em>)</tt></dt><dd>
Use in place of <a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a> to get the value of the environment variable
named <em class="replaceable"><tt>varname</tt></em>, which should be a string.
Unlike <a href="#getenv" title="31.9.&#xA0;Operating System Environment."><tt class="function">EXT:GETENV</tt></a>, which accesses the actual host operating system environment,
<tt class="function">FASTCGI:GETENV</tt> obtains its environment via
the Web server, over its FastCGI communications channel.
For more information, see the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Web site.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <em class="replaceable"><tt>varname</tt></em> is not defined in
the operating system environment.  See <a href="http://www.cgi101.com/class/ch3/text.html" target="_top">here</a> for a
list of useful variables.  You must first have called
<tt class="function">ACCEPT</tt> and not yet have called
<tt class="function">FINISH</tt>.  </dd>
<!--WRITE-STDOUT--><dt><tt class="code">(FASTCGI:WRITE-STDOUT
<em class="replaceable"><tt>string</tt></em>)</tt></dt><dd>
Use in place of standard Lisp calls which print to standard output
(i.e., as part of the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response).
You must first have called <tt class="function">ACCEPT</tt> and not yet have
called <tt class="function">FINISH</tt>.
</dd>
<!--WRITE-STDERR--><dt><tt class="code">(FASTCGI:WRITE-STDERR
<em class="replaceable"><tt>string</tt></em>)</tt></dt><dd>
Use in place of standard Lisp calls which print to
standard error. Rather than being part of
the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response, data written to standard error are usually
collected by the Web server in its error log.  This is useful
for diagnostic purposes.
</dd>
<!--SLURP-STDIN--><dt><tt class="code">(FASTCGI:SLURP-STDIN)</tt></dt><dd>
Reads in the entirety of standard input and returns it as a string.
This is usually done for <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests with
<tt class="literal">METHOD="post"</tt>, when the data are passed to the CGI
script via standard input rather than via the environment variable
<tt class="envar">QUERY_STRING</tt>.  There is no way to read standard input
in pieces, which could be a problem, say, for <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> uploads of very large files.
</dd>
<!--OUT-->
<dt><tt class="code">(FASTCGI:OUT
<em class="replaceable"><tt>tree</tt></em>)</tt></dt><dd>
Like <tt class="function">WRITE-STDOUT</tt>, except that
<em class="replaceable"><tt>tree</tt></em>
may be an arbitrarily nested list structure containing (at the leaves)
numbers and strings.  For example,
<tt class="literal">(FASTCGI:OUT '("foo" (" " 10 " " 20)))</tt>
will write the string <tt class="literal">"foo 10 20"</tt>.  This function
is useful when building strings in memory for display.
</dd></dl></div><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-example"></a>32.10.3. <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Example</h3></div></div></div><p>

Below is a simple example CGI script using <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">#!/usr/local/bin/clisp -q -K full

(defun newline () (format nil "~%"))
(do ((count 1 (1+ count)))
	((not (fastcgi:accept)) nil)

    (fastcgi:out "Content-type: text/plain" (newline) (newline))
    (fastcgi:out
     "I am running in mode: " (if (fastcgi:is-cgi) "CGI" "FastCGI") (newline)
     "This is execution no.: " count (newline)
     "The browser string is '" (fastcgi:getenv "HTTP_USER_AGENT") "'" (newline))

    (fastcgi:finish))
</pre></td></tr></table><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-build"></a>32.10.4. Building and configuring the
  <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h3></div></div></div><p>
It is necessary to download the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> developers' kit, build it,
and install it, before building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with <a href="http://www.fastcgi.com" target="_top">FastCGI</a> support.
You also need to upgrade your Web server to speak the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol.  For <a href="http://www.apache.org/" target="_top">Apache</a> this means building in <a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, either statically
or dynamically, and then adding a line to your <a href="http://www.apache.org/" target="_top">Apache</a> config like:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">    Addhandler fastcgi-script .fcgi
</pre></td></tr></table><p>
After that, you can convert <tt class="filename">foo.cgi</tt> by linking it
to a script names <tt class="filename">foo.fcgi</tt>.  Since a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
script is also a valid CGI script, it can be run unmodified in either
mode.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="rawsock"></a>32.11. Raw Socket Access.</h2></div></div></div><p>This is the raw socket interface, as described in <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/syssocket.h.html" target="_top"><tt class="filename">&lt;sys/socket.h&gt;</tt></a>.
Sockets are represented by their <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>s.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="rawsock-use-sockets"></a>Use <tt class="classname">SOCKET:SOCKET-STREAM</tt> instead!</h3><p>This interface is very low-level, and you probably do not need
 it - unless you are doing something <span class="emphasis"><em>very</em></span> unusual.
 If you are interested in TCP/IP (Internet) sockets, you should use
 <a href="#socket" title="31.5.&#xA0;Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s, <strong>not</strong> this package.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="rawsock-not-streams"></a>Do <strong>not</strong> use <tt class="function">EXT:MAKE-STREAM</tt>!</h3><p>You can turn such a raw socket into a usual lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>
  using <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a>, but you should be <span class="emphasis"><em>extremely</em></span>
  careful with such dubious actions!  See the <tt class="email">&lt;<a href="mailto:clisp-devel/at/sf.net"><a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">clisp-devel/at/sf.net</a></a>&gt;</tt>
  <a href="http://sourceforge.net/mailarchive/message.php?msg_id=7203955" target="_top">mailing list archives</a> for more details.</p></div><p>We implement access to
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/accept.html" target="_top"><tt class="function">accept</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockname.html" target="_top"><tt class="function">getsockname</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/recvmsg.html" target="_top"><tt class="function">recvmsg</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/socket.html" target="_top"><tt class="function">socket</tt></a></td></tr><tr><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/bind.html" target="_top"><tt class="function">bind</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/listen.html" target="_top"><tt class="function">listen</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/send.html" target="_top"><tt class="function">send</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/socketpair.html" target="_top"><tt class="function">socketpair</tt></a></td></tr><tr><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/connect.html" target="_top"><tt class="function">connect</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/recv.html" target="_top"><tt class="function">recv</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/sendmsg.html" target="_top"><tt class="function">sendmsg</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html" target="_top"><tt class="function">shutdown</tt></a></td></tr><tr><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/getpeername.html" target="_top"><tt class="function">getpeername</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/recvfrom.html" target="_top"><tt class="function">recvfrom</tt></a></td><td><a href="http://www.opengroup.org/onlinepubs/007904975/functions/sendto.html" target="_top"><tt class="function">sendto</tt></a></td><td> </td></tr></table><p>
 using same-named lisp functions in package
 <strong class="package">“<span class="quote">RAWSOCK</span>”</strong>.
 Additionally,</p><div class="itemizedlist"><ul type="disc"><li><tt class="function">RAWSOCK:SOCK-READ</tt>
    calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html" target="_top"><tt class="function">read</tt></a>;</li><li><tt class="function">RAWSOCK:SOCK-WRITE</tt>
    calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/write.html" target="_top"><tt class="function">write</tt></a>;</li><li><tt class="function">RAWSOCK:SOCK-CLOSE</tt>
   calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/close.html" target="_top"><tt class="function">close</tt></a>.</li></ul></div><p>We do not interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html" target="_top"><tt class="function">getsockopt</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html" target="_top"><tt class="function">setsockopt</tt></a>,
 they are available through <a href="#so-opt"><tt class="function">SOCKET:SOCKET-OPTIONS</tt></a>.</p><p>We do not interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/select.html" target="_top"><tt class="function">select</tt></a>,
 it is available through <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a>.</p><p>We do not interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/poll.html" target="_top"><tt class="function">poll</tt></a> yet, patches are welcome.</p><div class="variablelist"><a id="rawsock-add-on"></a><p class="title"><b>Additional Functions</b></p><dl><dt><tt class="code">(RAWSOCK:MAKE-SOCKADDR
    <em class="replaceable"><tt>family</tt></em> <em class="replaceable"><tt>data</tt></em>)</tt></dt><dd>create a <span class="type">sockaddr</span> object.
 </dd><dt><tt class="code">(RAWSOCK:SOCKADDR-FAMILY
    <em class="replaceable"><tt>sockaddr</tt></em>)</tt></dt><dd>return the numeric family of a
    <span class="type">sockaddr</span> object.</dd><dt><tt class="code">(RAWSOCK:SOCKADDR-DATA
    <em class="replaceable"><tt>sockaddr</tt></em>)</tt></dt><dd>return a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> data vector of a
    <span class="type">sockaddr</span> object.</dd><dt><tt class="code">(RAWSOCK:OPEN-UNIX-SOCKET
    <em class="replaceable"><tt>pathname</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>type</tt></em>)</tt></dt><dd>open a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> socket special file.
 </dd><dt><tt class="code">(RAWSOCK:MAKE-MSGHDR <em class="replaceable"><tt>data</tt></em>)</tt></dt><dd>Create a <span class="type">RAWSOCK:MSGHDR</span> object for
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/sendmsg.html" target="_top"><tt class="function">sendmsg</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/recvmsg.html" target="_top"><tt class="function">recvmsg</tt></a>.</dd><dt><tt class="code">(RAWSOCK:IPCSUM <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>buffer</tt></em>)</tt><br /><tt class="code">(RAWSOCK:ICMPCSUM <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>buffer</tt></em>)</tt><br /><tt class="code">(RAWSOCK:TCPCSUM <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>buffer</tt></em>)</tt><br /><tt class="code">(RAWSOCK:UDPCSUM <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <em class="replaceable"><tt>buffer</tt></em>)</tt></dt><dd>Compute the appropriate protocol checksum.
    <em class="replaceable"><tt>buffer</tt></em> defaults to the internal buffer.
 </dd><dt><tt class="code">(RAWSOCK:BUFFER)</tt></dt><dd>Return the internal buffer, used as the default
    argument in the checksum functions and when <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is passed as the
    <em class="replaceable"><tt>buffer</tt></em> argument to the i/o functions like <a href="http://www.opengroup.org/onlinepubs/007904975/functions/sendto.html" target="_top"><tt class="function">sendto</tt></a>.
 </dd><dt><tt class="code">(RAWSOCK:RESIZE-BUFFER <em class="replaceable"><tt>size</tt></em>)</tt></dt><dd>Resize the internal buffer.
 </dd><dt><tt class="code">(RAWSOCK:CONFIGDEV <em class="replaceable"><tt>socket</tt></em>
    <em class="replaceable"><tt>name</tt></em> <em class="replaceable"><tt>ip-address</tt></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <em class="replaceable"><tt>promisc</tt></em>
    <em class="replaceable"><tt>noarp</tt></em>)</tt></dt><dd>Set some socket options and IP address with <a href="http://www.opengroup.org/onlinepubs/007904975/functions/ioctl.html" target="_top"><tt class="function">ioctl</tt></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="zlib"></a>32.12. ZLIB Interface</h2></div></div></div><p>This is an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>-based interface to the
 <a href="http://www.zlib.org" target="_top">ZLIB</a>.</p><div class="variablelist"><dl><dt><tt class="code">(ZLIB:Z-VERSION)</tt></dt><dd>Return the string version of the underlying library.
</dd><dt><tt class="code">(ZLIB:COMPRESS source <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> level)</tt></dt><dd>Compress the source <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>.
</dd><dt><tt class="code">(ZLIB:UNCOMPRESS
   source destination-length)</tt></dt><dd>Uncompress the source <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (returned
   by <tt class="function">ZLIB:COMPRESS</tt>).
   <em class="replaceable"><tt>destination-length</tt></em> should be no less than
   the length of the uncompressed <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>.
</dd><dt><tt class="code">(ZLIB:COMPRESS-BOUND source-length)</tt></dt><dd>Return the maximum length of the return value
   of <tt class="function">ZLIB:COMPRESS</tt>.</dd><dt><tt class="code">(ZLIB:ERROR-STRING errno)</tt></dt><dd>Return a descriptive string for the supplied error
   code.</dd><dt><tt class="classname">ZLIB:ZERROR</tt></dt><dd>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> sometimes <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed
   by <tt class="function">ZLIB:COMPRESS</tt>
   and <tt class="function">ZLIB:UNCOMPRESS</tt>.
   You can find the error code and the caller
   using <tt class="function">ZLIB:ZERROR-ERRNO</tt>
   and <tt class="function">ZLIB:ZERROR-CALLER</tt>.
</dd></dl></div></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="internals"></a>Internals of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> Implementation</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#gc">33. Overview of <span><strong class="command">CLISP</strong></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">33.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">33.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">33.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">33.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">33.6. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">34. Extending <span><strong class="command">CLISP</strong></span>.</a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">34.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">34.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">34.3. Recompilation.</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">35. The <span><strong class="command">CLISP</strong></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">35.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">35.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">35.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">35.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">35.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">35.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">35.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">35.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">35.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">35.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">35.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">35.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">35.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">35.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">35.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">35.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">35.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">35.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">35.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">35.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">35.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">35.5.17. Shortcut instructions</a></span></dt></dl></dd><dt><span class="section"><a href="#bytecode-design">35.6. Bytecode Design</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-when-add-q">35.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">35.6.2. Why JMPTAIL?</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gc"></a>Chapter 33. Overview of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s Garbage Collection</h2></div><div><h3 class="subtitle"><i>These are internals, which are of interest only to the
  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers.
  If you are not subscribed to <tt class="email">&lt;<a href="mailto:clisp-devel/at/sf.net"><a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">clisp-devel/at/sf.net</a></a>&gt;</tt>,
  this chapter is probably not for you.</i></h3></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#internals-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">33.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">33.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">33.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">33.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">33.6. Foreign Pointers</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="internals-intro"></a>33.1. Introduction</h2></div></div></div><p>Knowing that most <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> implementations are buggy and/or slow,
and because <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> needs to perform <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has its
own memory management subsystem in
files <tt class="filename">#P"spvw*.d"</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lisp-obj-in-c"></a>33.2. Lisp objects in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="itemizedlist"><p class="title"><b>Three kinds of storage are distinguished:</b></p><ul type="disc"><li><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data (the "heap"), i.e. storage which contains
  Lisp objects and is managed by the garbage collector.</li><li><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> stack (called <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>), contains <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>s</li><li><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> data (including program text, data,
  <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed memory)</li></ul></div><p>A <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object is one word, containing a tag
 (partial type information) and either immediate data
 (e.g. <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s) or a pointer to storage.
Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> data have tag = <tt class="literal">machine_type</tt> = 0,
pointers to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> stack have tag = <tt class="literal">system_type</tt>,
most other pointers point to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data.</p><p>Let us turn to these <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects that consume regular <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
memory.  Every <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object has a size which is determined when the
object is allocated (using one of the <tt class="function">allocate_*()</tt>
routines). The size can be computed from the type tag and - if necessary
- the length field of the object's header. The length field always
contains the number of elements of the object. The number of bytes is
given by the function <tt class="function">objsize()</tt>.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects which contain exactly 2 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects
(i.e. <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> numbers, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>s) are
stored in a separate area and occupy 2 words each.
All other <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects have "varying length" (more precisely,
not a fixed length) and include a word for <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion purposes
at their beginning.</p><p>The garbage collector is invoked by
 <tt class="function">allocate_*()</tt> calls according to certain heuristics.
It marks all objects which are "live" (may be reached from the "roots"),
compacts these objects and unmarks them.  Non-live objects are lost;
their storage is reclaimed.</p><p>2-pointer objects are compacted by a simple hole-filling
algorithm: fill the left-most object into the right-most hole, and so
on, until the objects are contiguous at the right and the hole is
contiguous at the left.</p><p>Variable-length objects are compacted by sliding them down (their
address decreases).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="typecodes"></a>33.3. Object Pointer Representations</h2></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implements two ways of representing object pointers.
(An object pointer, <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>, contains a
pointer to the memory location of the object, or - for <a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>
 - all bits of the object itself.)
Both of them have some things in common:
</p><div class="itemizedlist"><ul type="disc"><li>There is a distinction between <a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>s
   (<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s, etc) and
   heap allocated objects.</li><li>All object pointers are typed, i.e. contain a few
   bits of information about the type of the pointed-to object. At a
   minimum, these bits must allow to distinguish immediate and
   heap-allocated objects.</li><li>Not all of the type information is contained in the
   object pointer.  For example, <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> objects can change their type
   when <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><tt class="function">CHANGE-CLASS</tt></a> is called. To avoid scanning all the heap for
   references when this happens, the class information is stored in the
   heap allocated object, not in the object pointer.</li></ul></div><p>The <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a> object representation has a minimum of type
bits in the object pointer, namely, 2 bits. They allow to distinguish
<a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>s (which have some more type bits), <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es (which
have no type bits in the heap, since they occupy just two words in the
heap, with no header), other heap objects (many, from <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>s
to <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>s), and <span class="type">Subr</span>s. Most object types are
distinguished by looking a the <em class="structfield"><tt>rectype</tt></em> field
in the header of the heap object.</p><p>The <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">TYPECODES</tt></strong></a> object representation has about two dozen of types
encoded in 6 or 7 bits in the object pointer.
Typically these are the upper 8 bits of a word (on a 32-bit machine) or
the upper 16 bits or 32 bits of a word (on a 64-bit machine).
The particular values of the typecodes allow many common operations to
be performed with a single bit test (e.g. <a href="http://www.lisp.org/HyperSpec/Body/fun_consp.html" target="_top"><tt class="function">CONSP</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_minuspcm_plusp.html" target="_top"><tt class="function">MINUSP</tt></a> for a
<a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> are bit tests) or range check.
However, the <em class="structfield"><tt>rectype</tt></em> field still exists for
many types, because there are many built-in types which do not need a
particularly fast type test.</p><p>Which object representation is chosen is decided at build time
depending on the available preprocessor definitions. You can define
<a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">TYPECODES</tt></strong></a> or <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a> to force one or the other.</p><p>One might expect that <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">TYPECODES</tt></strong></a> is faster than <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a>
because it does not need to make as many memory accesses. This effect
is, however, hardly measurable in practice (certainly not more than 5%
faster).  Apparently because, first, the situations where the type of an
object is requested but then the object is not looked into are rare.
It is much more common to look into an object, regardless of its type.
Second, due to the existence of data caches in the CPU, accessing a heap
location twice, once for the type test and then immediately afterwards
for the data, is not significantly slower than just accessing the
data.</p><p><a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">TYPECODES</tt></strong></a> is problematic on 32-bit machines, when you want to
use more than 16 MB of memory, because the type bits (at bit 31..24)
interfere with the bits of a heap address. For this reason,
<a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a> is the default on 32-bit platforms.</p><p><a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a> is problematic on platforms whose object alignment
is less than 4. This affects only the mc680x0 CPU; however, here the
alignment can usually be guaranteed through some <a href="http://gcc.gnu.org/" target="_top"><span><strong class="command">gcc</strong></span></a> options.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="memory-models"></a>33.4. Memory Models</h2></div></div></div><p>There are 6 memory models. Which one is used, depends on the
operating system and is determined at build time.</p><div class="variablelist"><p class="title"><b>Memory Models</b></p><dl><dt>SPVW_MIXED_BLOCKS_OPPOSITE</dt><dd><p>The heap consists of one block of fixed length
  (allocated at startup).
  The variable-length objects are allocated from the left, the 2-pointer
  objects are allocated from the right.
  There is a hole between them.
  When the hole shrinks to 0, <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> is invoked.
  <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> slides the variable-length objects to the left and concentrates
  the 2-pointer objects at the right end of the block again.
  When no more room is available, some reserve area beyond the right end
  of the block is halved, and the 2-pointer objects are moved to the
  right accordingly.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Simple management.
    </dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(-)</dt><dd>The total heap size is limited.
    </dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_BLOCKS_OPPOSITE &amp; TRIVIALMAP_MEMORY</dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  The former one has a hole to the right and is extensible to the right,
  the latter one has a hole to the left and is extensible to the left.
  Similar to the previous model, except that the hole is unmapped.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(*)</dt><dd>Works only when SINGLEMAP_MEMORY is
     possible as well.</dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_BLOCKS_STAGGERED &amp; TRIVIALMAP_MEMORY</dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  Both have a hole to the right, but are extensible to the right.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(*)</dt><dd>Works only when SINGLEMAP_MEMORY is
     possible as well.</dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_PAGES</dt><dd><p>The heap consists of many small pages (usually around 8 KB).
  There are two kinds of pages: one for 2-pointer objects, one for
  variable-length objects.
  The set of all pages of a fixed kind is called a "Heap".
  Each page has its hole (free space) at its end.
  For every heap, the pages are kept sorted according to the size of
  their hole, using AVL trees.
  The <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is invoked when the used space has grown by 25% since the
  last GC; until that point new pages are allocated from the OS.
  The GC compacts the data in each page separately:
  data is moved to the left. Emptied pages are given back to the OS.
  If the holes then make up more than 25% of the occupied storage, a
  second GC turn moves objects across pages, from nearly empty ones to
  nearly full ones, with the aim to free as many pages as possible.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(-)</dt><dd>every allocation requires AVL tree operations,
     thus slower</dd><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>Works on operating systems which do not provide
     large contiguous areas.</dd></dl></div><p>
 </p></dd><dt>SPVW_PURE_PAGES</dt><dd><p>Just like SPVW_MIXED_PAGES, except that every page
  contains data of only a single type tag, i.e. there is a Heap for
  every type tag.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(-)</dt><dd>every allocation requires AVL tree operations,
     thus slower</dd><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>Works on operating systems which do not provide
     large contiguous areas.</dd><dt>(-)</dt><dd>More fragmentation because objects of different
    type never fit into the same page.</dd></dl></div></dd><dt>SPVW_PURE_BLOCKS</dt><dd><p>There is a big block of storage for each type tag.
  Each of these blocks has its data to the left and the hole to the
  right, but these blocks are extensible to the right (because there is
  enough room between them).
  A <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is triggered when the allocation amount since the
  last GC reaches 50% of the amount of used space at the last GC, but at
  least 512 KB.
  The <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion cleans up each block separately: data is moved left.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No 16 MB total size limit.
    </dd><dt>(*)</dt><dd>Works only in combination with SINGLEMAP_MEMORY.
    </dd></dl></div><p>
 </p></dd></dl></div><p>In page based memory models, an object larger than a page is the
only object carried by its pages.
There are no small objects in pages belonging to a big object.</p><p>The following combinations of memory model and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/mmap.html" target="_top"><tt class="function">mmap</tt></a> tricks are
possible (the number indicates the order in which the respective models
have been developed):</p><div class="table"><a id="mem-models-comb-typecodes"></a><p class="title"><b>Table 33.1. Memory models with <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">TYPECODES</tt></strong></a></b></p><table summary="Memory models with TYPECODES" border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">no MAP_MEMORY</th><th align="center">TRIVIALMAP_MEMORY</th><th align="center">SINGLEMAP_MEMORY</th><th align="center">MULTIMAP_MEMORY</th><th align="center">GENERATIONAL_GC</th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">1</td><td align="center">10</td><td align="center"> </td><td align="center">2</td><td align="center">9</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">7</td><td align="center"> </td><td align="center"> </td><td align="center">8</td></tr><tr><td align="center">SPVW_PURE_BLOCKS</td><td align="center"> </td><td align="center"> </td><td align="center">5</td><td align="center"> </td><td align="center">6</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">3</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">SPVW_PURE_PAGES</td><td align="center">4</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><div class="table"><a id="mem-models-comb-heapcodes"></a><p class="title"><b>Table 33.2. Memory models with <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><strong><tt class="option">HEAPCODES</tt></strong></a></b></p><table summary="Memory models with HEAPCODES" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">no MAP_MEMORY</th><th align="center">TRIVIALMAP_MEMORY</th><th align="center">GENERATIONAL_GC</th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">*</td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">*</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gc-safety"></a>33.5. The burden of <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion upon the rest of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><p>Every subroutine marked with <span class="emphasis"><em>can trigger GC</em></span>
may invoke <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.
<a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> moves all the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> non-<a href="#lisp-obj-in-c" title="33.2.&#xA0;Lisp objects in CLISP">immediate object</a>s and updates the pointers.
But the <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> looks only on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> and not in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
variables. (Anything else would not be portable.)
Therefore at every "unsafe" point, i.e. every call to such a subroutine,
all the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variables of type <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>
<span class="emphasis"><em>MUST BE ASSUMED TO BECOME GARBAGE</em></span>.
(Except for <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>s that are known to be unmovable,
 e.g. immediate data or <span class="type">Subr</span>s.)
Pointers inside <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data (e.g. to the characters of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
or to the elements of a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>) become
<span class="emphasis"><em>INVALID</em></span> as well.</p><p>The workaround is usually to allocate all the needed <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data
first and do the rest of the computation with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variables,
without calling unsafe routines, and without worrying about <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>.</p><p>Run-time GC-safety checking is available when you build <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 with a C++ compiler, e.g.:
<a id="clisp-config-gxx"></a></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ CC=g++ ./configure --with-debug build-g-gxx
</pre></td></tr></table><p>
When built like this, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will <a href="http://www.opengroup.org/onlinepubs/007904975/functions/abort.html" target="_top"><tt class="function">abort</tt></a> when you reference
GC-unsafe data after an allocation (which could have triggered a
<a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion), and <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> will pinpoint the trouble spot.</p><p>Specifically, when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is configured
 as <a href="#clisp-config-gxx">above</a>, there is a
global integer variable <tt class="varname">alloccount</tt> and the <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>
structure contains an integer <em class="structfield"><tt>allocstamp</tt></em>
slot. If these two integers are not the same, the <a href="#typecodes" title="33.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a> is invalid.
By playing with <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a>, you should be able to figure out the precise spot
where an allocation increments <tt class="varname">alloccount</tt>
<span class="emphasis"><em>after</em></span> the object has been retrieved from a
GC-visible location.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="foreign-pointers"></a>33.6. Foreign Pointers</h2></div></div></div><p>Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions and to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed data can be
hidden in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects of type machine_type; <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> will not modify its
value.  But one should not dare to assume that a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> stack pointer
or the address of a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function in a shared library satisfies the
same requirements.</p><p>If another pointer is to be viewed as a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object, it is best
to box it, e.g. in a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><tt class="classname">SIMPLE-BIT-VECTOR</tt></a> or in an
<span class="type">Fpointer</span> (using <tt class="function">allocate_fpointer()</tt>.)</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="extend"></a>Chapter 34. Extending <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#add-fun">34.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">34.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">34.3. Recompilation.</a></span></dt></dl></div><div class="epigraph"><p><a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> is a <span class="emphasis"><em>programmable</em></span>
  programming language.</p><div class="attribution"><span>--<span class="attribution"><a href="http://www.franz.com/~jkf/" target="_top">John
  Foderaro</a></span></span></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be easily extended the same way any other <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>
 implementation can: create a lisp file with your variables, functions,
 macros, etc.; (optionally) compile it with <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>; <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> it
 into a running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, and save the <a href="impnotes.html#image" class="olink">memory image</a>.</p><p>This method does not work when you need to use some functionality
 not available in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, e.g., you want to call a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function.
 You are urged to use <a href="#modules" title="31.2.&#xA0;External Modules">External Modules</a>
 instead of adding built-in functions.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> comes with an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> which allows you
 to access <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> libraries in an easy way (including creating
 <a href="#dffi-make-func"><tt class="function">FFI:FOREIGN-FUNCTION</tt></a>s dynamically).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-fun"></a>34.1. Adding a built-in function.</h2></div></div></div><p>In the rare cases when you really need to modify <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 internals and add a truly built-in function, you should read the
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> sources for inspiration and enlightenment, choose a file where
 your brand-new built-in function should go to, and then ...
 </p><div class="itemizedlist"><ul type="disc"><li>add the <tt class="function">LISPFUN</tt>
    form and the implementation there;</li><li>add the <tt class="function">LISPFUN</tt> header to
    file <tt class="filename">#P"subr.d"</tt>;</li><li>declare the function name in file
    <tt class="filename">#P"constsym.d"</tt> in the appropriate package
    (probably <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>, if there is no specific package);
  </li><li>if your function accepts keyword arguments,
    then an appropriate pair of forms must be added
    to <tt class="filename">#P"subrkw.d"</tt> and you must make sure that the
    keyword symbols are declared in <tt class="filename">#P"constsym.d"</tt>;
  </li><li>export your function name from the appropriate
    package in file <tt class="filename">#P"init.lisp"</tt>;</li><li>when you are done, you should run <span><strong class="command">make
     check-sources</strong></span> in your build directory: this will check
    that the definitions (source files) and the declarations
    (<tt class="filename">#P"subr.d"</tt>, <tt class="filename">#P"subrkw.d"</tt>
    and <tt class="filename">#P"fsubr.d"</tt>) are in sync.</li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Be very careful with the <span class="emphasis"><em>GC-unsafe</em></span>
  functions!  Always remember about <a href="#gc-safety" title="33.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>!</p></div><p>These instructions are intentionally terse - you are encouraged to
 use <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s and/or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> instead of adding built-ins directly.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-var"></a>34.2. Adding a built-in variable.</h2></div></div></div><p>If you must be able to access the Lisp variable in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 code, follow these steps:
 </p><div class="itemizedlist"><ul type="disc"><li>declare the variable name
    in <tt class="filename">#P"constsym.d"</tt> in the appropriate package
    (probably <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>, if there is no specific package);
  </li><li>add a <tt class="function">define_variable()</tt> call
    in function <tt class="function">init_symbol_values()</tt>
    in file <tt class="filename">#P"spvw.d"</tt>;</li><li>export your variable name from the appropriate
    package in file <tt class="filename">#P"init.lisp"</tt>;
</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="recompile"></a>34.3. Recompilation.</h2></div></div></div><p><span class="emphasis"><em>Any</em></span> change that forces <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html" target="_top"><span><strong class="command">make</strong></span></a> to remake
 <tt class="filename">lisp.run</tt>, will force recompilation of all <tt class="filename">#P".lisp"</tt> files and
 re-dumping of <a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a>, which may be time-consuming.  This is not
 always necessary, depending on what kind of change you introduced.
</p><p>On the other hand, if you change any of the following files:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="filename">#P"constobj.d"</tt></td></tr><tr><td><tt class="filename">#P"constsym.d"</tt></td></tr><tr><td><tt class="filename">#P"fsubr.d"</tt></td></tr><tr><td><tt class="filename">#P"subr.d"</tt></td></tr><tr><td><tt class="filename">#P"subrkw.d"</tt></td></tr></table><p>
 your <a href="#image" title="30.2.&#xA0;Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> will <span class="emphasis"><em>have</em></span> to be re-dumped.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="byte-version"></a>Warning</h3><p>If you change the signature of any
 system function mentioned in the <tt class="varname">FUNTAB</tt> arrays in
 file <tt class="filename">#P"eval.d"</tt>, all the <tt class="filename">#P".fas"</tt> files will
 become obsolete and will need to be recompiled.
 You will need to add a note to that effect to
 the <tt class="filename">#P"NEWS"</tt> file
 and augment the object <tt class="literal">version</tt> in
 file <tt class="filename">#P"constsym.d"</tt>.
  Please try to avoid this as much as possible.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="bytecode"></a>Chapter 35. The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> bytecode specification</h2></div><div><h3 class="subtitle"><i>Last modified: 19 September 1998.</i></h3></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#byte-intro">35.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">35.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">35.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">35.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">35.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">35.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">35.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">35.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">35.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">35.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">35.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">35.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">35.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">35.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">35.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">35.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">35.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">35.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">35.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">35.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">35.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">35.5.17. Shortcut instructions</a></span></dt></dl></dd><dt><span class="section"><a href="#bytecode-design">35.6. Bytecode Design</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-when-add-q">35.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">35.6.2. Why JMPTAIL?</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="byte-intro"></a>35.1. Introduction</h2></div></div></div><p>The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> compiler compiles <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> programs into instruction codes
for a virtual processor.  This bytecode is optimized for saving space in
the most common cases of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> programs.  The main advantages/drawbacks
of this approach, compared to native code compilation, are:
</p><div class="itemizedlist"><ul type="disc"><li>Bytecode compiled programs are a lot smaller than
  when compiled to native code.  This results in better use of CPU
  caches, and in less virtual memory paging. Users perceive this as good
  responsiveness.</li><li>Maximum execution speed (throughput in tight loops)
   is limited.</li><li>Since no bytecode instructions are provided for
   “<span class="quote">unsafe</span>” operations (like unchecked array accesses,
   or “<span class="quote">fast</span>” <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>), programs run with all safety
   checks enabled even when compiled.</li><li>Execution speed of a program can easily be
   understood by looking at the output of the <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a> function.
   A rule of thumb is that every elementary instruction costs 1 time
   unit, whereas a function call costs 3 to 4 time units.
  </li><li>Needing to do no type inference, the compiler is
   pretty straightforward and fast.  As a consequence, the definition of
   <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> generic functions, which needs to compile small pieces of
   generated code, is not perceived to be slow.</li><li>The compiler is independent from the hardware CPU.
   Different back-ends, one for each hardware CPU, are not needed.  As a
   consequence, the compiler is fairly small (and would have been easily
   maintainable if it were written in a less kludgey way...), and it is
   impossible for the compiler writer to introduce CPU dependent bugs.
 </li></ul></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="vm"></a>35.2. The virtual machine</h2></div></div></div><p>The bytecode can be thought of as being interpreted by a virtual
processor.  The engine which interprets the bytecode (the
 “<span class="quote">implementation of the virtual machine</span>”) is actually a
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function, but it could as well be a just-in-time compiler which
translates a function's bytecode into hardware CPU instructions the
first time said function is called.</p><p>The virtual machine is a stack machine with two stacks:
</p><div class="variablelist"><dl><dt><a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a></dt><dd>a stack for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects and frames
   (“<span class="quote">Lisp stack</span>”).</dd><dt><a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a></dt><dd>a stack for other data and pointers
   (“<span class="quote">Program stack</span>”).</dd></dl></div><p>This two-stack architecture permits to save an unlimited number of
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> (needed for handling of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>),
without <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a>.  Also, in a world with a compacting no-ambiguous-roots
garbage collector, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> must only hold <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects, and <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> can
hold all the other data belonging to a frame, which would not fit into
<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> without tagging/untagging overhead.</p><p>The scope of <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> and <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> is only valid for a given function
invocation.  Whereas the amount of <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> space needed for executing a
function (excluding other function calls) is unlimited, the amount of
<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> space needed is known a priori, at compile time.  When a function
is called, no relation is specified between the caller's <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> and the
callee's <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and between the caller's <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> and the callee's <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>.
The bytecode is designed so that outgoing arguments on the caller's
<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> can be shared by the caller's incoming arguments area (on the
callee's <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>), but a virtual machine implementation may also copy
outgoing arguments to incoming arguments instead of sharing them.</p><p>The virtual machine has a special data structure,
<tt class="varname">values</tt>, containing the “<span class="quote">top of stack</span>”,
specially adapted to <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>:
</p><div class="variablelist"><dl><dt><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a></dt><dd>an unsigned integer.
  </dd><dt><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a></dt><dd>the first value, a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object.
  If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> = 0, this is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_space</tt></a></dt><dd>all values except the first one, an array of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  objects.</dd></dl></div><p>The contents of <tt class="varname">values</tt> is short-lived.
It does not survive a function call, not even a <a href="#gc" title="Chapter&#xA0;33.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.</p><p>The interpretation of some bytecode instructions depends on a
constant, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.  This is a CPU-dependent number, the value of
<tt class="varname">SYSTEM::*JMPBUF-SIZE*</tt>.  In <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, it is defined as
<tt class="literal">ceiling(sizeof(jmp_buf),sizeof(void*))</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="comp-fun"></a>35.3. The structure of compiled functions</h2></div></div></div><p>A compiled function consists of two objects: The function itself,
containing the references to all <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects needed for the bytecode,
and a byte vector containing only immediate data, including the bytecode
proper.</p><p>Typically, the byte vector is about twice as large as the function
vector.  The separation thus helps the garbage collector (since the byte
vector does not need to be scanned for pointers).</p><p>A function looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <span class="type">Cclosure</span>):
</p><div class="variablelist"><dl><dt><a id="func-name"></a>name</dt><dd>This is the name of the function, normally a symbol
   or a list of the form <tt class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <em class="replaceable"><tt>symbol</tt></em>)</tt>.
   It is used for printing the function and for error messages.
   This field is immutable.</dd><dt><a id="func-codevec"></a><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a></dt><dd>This is the byte-code vector, a <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html" target="_top"><tt class="classname">SIMPLE-ARRAY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8) (*))</tt>.
   This field is immutable.</dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[]</dt><dd>The remaining fields in the function object are
   references to other <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects.  These references are immutable,
   which is why they are called "constants".  (The referenced <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   objects can be mutable objects, such as <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>s,
   however.)</dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">The Exception to the Immutability Rule</h3><p>When a generic function's dispatch code is installed, the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a>
  and <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a> fields are destructively modified.</p></div><p>Some of the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a> can play special roles.
 A function looks like this, in more detail:
</p><div class="variablelist"><dl><dt>name</dt><dd>see <a href="#func-name">above</a>.
 </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a></dt><dd>see <a href="#func-codevec">above</a>.
 </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>*</dt><dd>At most one object, representing the closed-up
   variables, representing the variables of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in
   which this function was defined.  It is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>, which
   looks like this: <tt class="data">#(<em class="replaceable"><tt>next</tt></em>
   <em class="replaceable"><tt>value<sub>1</sub></tt></em> ...
   <em class="replaceable"><tt>value<sub>n</sub></tt></em>)</tt>
   where <em class="replaceable"><tt>value<sub>1</sub></tt></em>, ...,
   <em class="replaceable"><tt>value<sub>n</sub></tt></em>
   are the values of the closed-up variables, and
   <em class="replaceable"><tt>next</tt></em> is either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> having the same structure.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>*</dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> tags of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> part: either a frame pointer to the block frame, or <tt class="literal">#&lt;DISABLED&gt;</tt>.
   The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is the block's name, only for error message purposes.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a>*</dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> part: either a frame pointer to the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, or
   <tt class="literal">#&lt;DISABLED&gt;</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> has already been left.  The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is a
   <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> containing the names of the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags, only
   for the error message purposes.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a>*</dt><dd>If the function was defined with a <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>
   containing <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>, here come the symbols ("keywords"), in their
   correct order.  They are used by the interpreter during function call.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">other-const</tt></a>*</dt><dd>Other objects needed by the function's bytecode.
  </dd></dl></div><p>
</p><p>If <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a> are all absent,
the function is called <span class="emphasis"><em>autonomous</em></span>.
This is the case if the function does not refer to lexical variables,
blocks or tags defined in compile code outside of the function.
In particular, it is the case if the function is defined in a null
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><p>If some <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, or <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a> are
present, the function (a "closure") is created at runtime.
The compiler only generates a prototype, containing <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> values
instead of each <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a>.
At runtime, a function is created by copying this prototype and
replacing the <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> values by the definitive ones.</p><p>The list <tt class="data">(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a>*
<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">other-const</tt></a>*)</tt> normally does not contain duplicates, because
the compiler removes duplicates when possible.  (Duplicates can occur
nevertheless, through the use of <a href="http://www.lisp.org/HyperSpec/Body/speope_load-time-value.html" target="_top"><tt class="function">LOAD-TIME-VALUE</tt></a>.)</p><p>The <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a> looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <span class="type">Codevec</span>):
</p><div class="variablelist"><dl><dt><tt class="literal">spdepth_1</tt> (2 bytes)</dt><dd>The 1st part of the maximal <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> depth.
  </dd><dt><tt class="literal">spdepth_jmpbufsize</tt> (2 bytes)</dt><dd>The <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> part of the maximal <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> depth.
   The maximal <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> depth (precomputed by the compiler) is given by
   <tt class="literal">spdepth_1 + spdepth_jmpbufsize * <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a></tt>.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> (2 bytes)</dt><dd>Number of required parameters.
  </dd><dt><tt class="literal">numopt</tt> (2 bytes)</dt><dd>Number of optional parameters.
  </dd><dt><a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a> (1 byte)</dt><dd><div class="variablelist"><dl><dt>bit 0</dt><dd>set if the function has an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> parameter
    </dd><dt>bit 7</dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters
    </dd><dt>bit 6</dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>
    </dd><dt>bit 4</dt><dd>set if the function is a generic function
    </dd><dt>bit 3</dt><dd>set if the function is a generic function and its
     effective method shall be returned (instead of being executed)
    </dd></dl></div></dd><dt><tt class="literal">signature</tt> (1 byte)</dt><dd>An abbreviation code depending on
    <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>, <tt class="literal">numopt</tt>, <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a>.
    It is used for speeding up the function
    call.</dd><dt><tt class="literal">numkey</tt> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)</dt><dd>The number of <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters.
   </dd><dt><tt class="literal">keyconsts</tt> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)</dt><dd>The offset of the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a> in the function.
   </dd><dt><tt class="literal">byte</tt>* (any number of bytes)</dt><dd>The bytecode instructions.
   </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-struct"></a>35.4. The general structure of the instructions</h2></div></div></div><p>All instructions consist of one byte, denoting the opcode, and
some number of operands.</p><p>The conversion from a byte (in the range 0..255) to the opcode is
performed by lookup in the table contained in the file
<tt class="filename">#P"bytecode.d"</tt>.</p><p>There are the following types of operands, denoted by different
letters:
</p><div class="variablelist"><dl><dt><em class="replaceable"><tt>k</tt></em>, <em class="replaceable"><tt>n</tt></em>, <em class="replaceable"><tt>m</tt></em>, <em class="replaceable"><tt>l</tt></em></dt><dd>A (nonnegative) numeric operand.
   The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value (7 bits).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
   together form the value (15 bits).
  </dd><dt><em class="replaceable"><tt>b</tt></em></dt><dd>A (nonnegative) 1-byte operand.
   The next byte is read and is the value.
  </dd><dt><em class="replaceable"><tt>label</tt></em></dt><dd>A label operand.
   A signed numeric operand is read: The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value
    (7 bits, sign-extended).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
    together form the value (15 bits, sign-extended).
   If the latter 15-bit result is zero, then four more bytes are read
    and put together (32 bits, sign-extended).
   Finally, the bytecode pointer for the target is computed as the
   current bytecode pointer (pointing after the operand just read), plus
   the signed numeric operand.
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-set"></a>35.5. The instruction set</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#instr-const">35.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">35.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">35.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">35.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">35.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">35.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">35.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">35.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">35.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">35.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">35.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">35.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">35.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">35.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">35.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">35.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">35.5.17. Shortcut instructions</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-const"></a>35.5.1. Instructions for constants</h3></div></div></div><div class="informaltable"><a id="instr-const-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(PUSH-NIL <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Push <em class="replaceable"><tt>n</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>s into the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center"><em class="replaceable"><tt>n</tt></em> times do: *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
             values undefined</td></tr><tr><td align="center"><tt class="byte">(<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Load the function's <em class="replaceable"><tt>n</tt></em>th constant into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>],
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-lex-var"></a>35.5.2. Instructions for lexical variables</h3></div></div></div><div class="informaltable"><a id="instr-lex-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Load a directly accessible local variable into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(LOADI <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Load an indirectly accessible local variable into values.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
              <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+ <em class="replaceable"><tt>n</tt></em>),
              <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(LOADC <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Load a closed-up variable, defined in the same function and
             directly accessible, into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>),1+<em class="replaceable"><tt>m</tt></em>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(LOADV <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Load a closed-up variable, defined in an outer function,
             into values.</td><td align="center"><em class="replaceable"><tt>v</tt></em> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>,
             <em class="replaceable"><tt>m</tt></em> times do: <em class="replaceable"><tt>v</tt></em> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>v</tt></em>,0),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>v</tt></em>,<em class="replaceable"><tt>m</tt></em>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(LOADIC <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Load a closed-up variable, defined in the same function and
             indirectly accessible, into values.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+<em class="replaceable"><tt>n</tt></em>),1+<em class="replaceable"><tt>m</tt></em>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Store values into a directly accessible local variable.</td><td align="center">*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(STOREI <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Store values into an indirectly accessible local variable.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
              *(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+ <em class="replaceable"><tt>n</tt></em>) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
              <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(STOREC <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Store values into a closed-up variable, defined in the same
             function and directly accessible.</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>),1+m) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(STOREV <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Store values into a closed-up variable, defined in an outer
             function.</td><td align="center"><em class="replaceable"><tt>v</tt></em> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>,
             <em class="replaceable"><tt>m</tt></em> times do: <em class="replaceable"><tt>v</tt></em> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>v</tt></em>,0),
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>v</tt></em>,<em class="replaceable"><tt>m</tt></em>) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(STOREIC <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Store values into a closed-up variable, defined in the same
             function and indirectly accessible.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+<em class="replaceable"><tt>n</tt></em>),1+<em class="replaceable"><tt>m</tt></em>) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-dyn-var"></a>35.5.3. Instructions for dynamic variables</h3></div></div></div><div class="informaltable"><a id="instr-dyn-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(GETVALUE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Load a symbol's value into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := symbol-value(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>]),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(SETVALUE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Store values into a symbol's value.</td><td align="center">symbol-value(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>]) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(BIND <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Bind a symbol dynamically.</td><td align="center">Bind the value of the symbol
             <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] to <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             implicitly <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= 3,
             values undefined</td></tr><tr><td align="center"><tt class="byte">(UNBIND1)</tt></td><td align="center">Dissolve one binding frame.</td><td align="center">Unbind the binding frame <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> is pointing to,
             implicitly <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 3</td></tr><tr><td align="center"><tt class="byte">(UNBIND <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Dissolve <em class="replaceable"><tt>n</tt></em> binding frames.</td><td align="center"><em class="replaceable"><tt>n</tt></em> times do:
              Unbind the binding frame <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> is pointing to, thereby
              incrementing <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             Thus, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 1+2*<em class="replaceable"><tt>n</tt></em></td></tr><tr><td align="center"><tt class="byte">(PROGV)</tt></td><td align="center">Bind a set of symbols dynamically to a set of values.</td><td align="center"><em class="replaceable"><tt>symbols</tt></em> := *<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             build a single binding frame binding the symbols in
             <em class="replaceable"><tt>symbols</tt></em> to the values in <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             values undefined</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-stack"></a>35.5.4. Instructions for stack operations</h3></div></div></div><div class="informaltable"><a id="instr-stack-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(PUSH)</tt></td><td align="center">Push one object onto the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             values undefined</td></tr><tr><td align="center"><tt class="byte">(POP)</tt></td><td align="center">Pop one object from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(SKIP <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> pointer.
             Remove <em class="replaceable"><tt>n</tt></em> objects from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center"><a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> + <em class="replaceable"><tt>n</tt></em></td></tr><tr><td align="center"><tt class="byte">(SKIPI <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> pointer. Remove an unknown
             number of objects from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>),
             <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>+1,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> + <em class="replaceable"><tt>n</tt></em></td></tr><tr><td align="center"><tt class="byte">(SKIPSP <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em>)</tt></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> pointer.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-jump"></a>35.5.5. Instructions for control flow, jumps</h3></div></div></div><div class="informaltable"><a id="instr-jump-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(SKIP&amp;RET <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Clean up the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and return from the function.</td><td align="center"><a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>,
            return from the function, returning values.</td></tr><tr><td align="center"><tt class="byte">(SKIP&amp;RETGF <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Clean up the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and return from the generic
             function.</td><td align="center">If bit 3 is set in the function's <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a>,
                then <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1,
                     and return from the function.
             Otherwise: if the current function has no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> argument,
                then <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>,
                     apply <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> to the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> arguments
                           still on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and
                           return from the function.
                Else <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>-1,
                     apply <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> to the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> arguments and the
                           <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> argument, all still on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and
                           return from the function.</td></tr><tr><td align="center"><tt class="byte">(JMP <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>.</td><td align="center">PC := <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is true.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, PC := <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is false.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, PC := <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(JMPIF1 <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em> and forget secondary values,
             if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is true.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
                <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(JMPIFNOT1 <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em> and forget secondary values,
             if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is false.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
                <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(JMPIFATOM <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not a cons.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not a cons, PC := <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFCONSP <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is a cons.</td><td align="center">If <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is a cons, PC := <em class="replaceable"><tt>label</tt></em>.
                values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFEQ <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the top-of-stack.</td><td align="center">If eq(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++), PC := <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFNOTEQ <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>
             to the top-of-stack.</td><td align="center">If not eq(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++), PC := <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFEQTO <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>,
             if the top-of-stack is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to a constant.</td><td align="center">If eq(*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>]), PC := <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFNOTEQTO <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if the top-of-stack is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>
             to a constant.</td><td align="center">If not eq(*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>]), PC := <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPHASH <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Table-driven jump, depending on <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td><td align="center">Lookup <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> in the hash table <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>].
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>,
             jump to it: PC := PC + value.  Else jump to <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPHASHV <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Table-driven jump, depending on <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             inside a generic function.</td><td align="center">Lookup <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> in the hash table <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[0],<em class="replaceable"><tt>n</tt></em>).
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>,
             jump to it: PC := PC + value.  Else jump to <em class="replaceable"><tt>label</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JSR <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Subroutine call.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := function. Then start interpreting the
             bytecode at <em class="replaceable"><tt>label</tt></em>, with values undefined.
             When a <tt class="byte">(RET)</tt> is encountered,
             program execution is resumed at the instruction after
             <tt class="byte">(JSR <em class="replaceable"><tt>label</tt></em>)</tt>.</td></tr><tr><td align="center"><tt class="byte">(JMPTAIL <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>
             <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Tail subroutine call.</td><td align="center"><em class="replaceable"><tt>n</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&gt;=</tt></a> <em class="replaceable"><tt>m</tt></em>.
             The <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> frame of size <em class="replaceable"><tt>n</tt></em> is reduced to size <em class="replaceable"><tt>m</tt></em>:
             {*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-<em class="replaceable"><tt>m</tt></em>), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1)} :=
               {*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>m</tt></em>-1)}.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += n-m.
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := function.
             Then jump to <em class="replaceable"><tt>label</tt></em>, with values undefined.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-env"></a>35.5.6. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>,
   creation of closures</h3></div></div></div><div class="informaltable"><a id="instr-env-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(VENV)</tt></td><td align="center">Load the <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a> into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[0], <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(MAKE-VECTOR1&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> used for closed-up variables.</td><td align="center"><em class="replaceable"><tt>v</tt></em> := new <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> of size <em class="replaceable"><tt>n</tt></em>+1.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>v</tt></em>,0) := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <em class="replaceable"><tt>v</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(COPY-CLOSURE <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Create a closure by copying the prototype and filling in
             the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</td><td align="center"><em class="replaceable"><tt>f</tt></em> := copy-function(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>m</tt></em>]).
             For <em class="replaceable"><tt>i</tt></em>=0,..,<em class="replaceable"><tt>n</tt></em>-1:
                 <em class="replaceable"><tt>f</tt></em>_<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[i] := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1-<em class="replaceable"><tt>i</tt></em>).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>.
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <em class="replaceable"><tt>f</tt></em>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-funcall"></a>35.5.7. Instructions for function calls</h3></div></div></div><div class="informaltable"><a id="instr-funcall-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(CALL <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a constant function with <em class="replaceable"><tt>k</tt></em> arguments.</td><td align="center">The function <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] is called
             with the arguments *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>k</tt></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>k</tt></em>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALL0 <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a constant function with 0 arguments.</td><td align="center">The function <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] is called with 0 arguments.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALL1 <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a constant function with 1 argument.</td><td align="center">The function <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] is called with one argument *<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 1. The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALL2 <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a constant function with 2 arguments.</td><td align="center">The function <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] is called
             with two arguments *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+1) and *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 2. The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALLS1 <em class="replaceable"><tt>b</tt></em>)</tt></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTAB[<em class="replaceable"><tt>b</tt></em>].
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALLS2 <em class="replaceable"><tt>b</tt></em>)</tt></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTAB[256+<em class="replaceable"><tt>b</tt></em>].
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALLSR <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>b</tt></em>)</tt></td><td align="center">Calls a system function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTABR[<em class="replaceable"><tt>b</tt></em>].
             The minimum number of arguments is already on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             and <em class="replaceable"><tt>m</tt></em> additional arguments as well.
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALLC)</tt></td><td align="center">Calls a computed compiled function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
              parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(CALLCKEY)</tt></td><td align="center">Calls a computed compiled function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
              or <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(FUNCALL <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a computed function.</td><td align="center">Calls the function *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>)
             with the arguments *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>+1.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(APPLY <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Calls a computed function with an unknown number of
             arguments.</td><td align="center">Calls the function *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>)
             with the arguments *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0)
             and a list of additional arguments <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>+1.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-optkey"></a>35.5.8. Instructions for optional
  and keyword parameters</h3></div></div></div><div class="informaltable"><a id="instr-optkey-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(PUSH-UNBOUND <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Push <em class="replaceable"><tt>n</tt></em> <tt class="literal">#&lt;UNBOUND&gt;</tt>s into the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center"><em class="replaceable"><tt>n</tt></em> times do: *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(UNLIST <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Destructure a proper <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</td><td align="center">0 ≤ <em class="replaceable"><tt>m</tt></em> ≤ <em class="replaceable"><tt>n</tt></em>.
             <em class="replaceable"><tt>n</tt></em> times do: *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>).
             During the last <em class="replaceable"><tt>m</tt></em> iterations, the list <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>
             may already have reached its end;
             in this case, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             At the end, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(UNLIST* <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center">Destructure a proper or dotted <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</td><td align="center">0 ≤ <em class="replaceable"><tt>m</tt></em> ≤ <em class="replaceable"><tt>n</tt></em>, <em class="replaceable"><tt>n</tt></em> &gt; 0.
             <em class="replaceable"><tt>n</tt></em> times do: *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>).
             During the last <em class="replaceable"><tt>m</tt></em> iterations, the list <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>
             may already have reached its end;
             in this case, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             At the end, after <em class="replaceable"><tt>n</tt></em> <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>s, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(JMPIFBOUNDP <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump to <em class="replaceable"><tt>label</tt></em>, if a local variable is not unbound.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>) is not <tt class="literal">#&lt;UNBOUND&gt;</tt>,
                <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>), <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <em class="replaceable"><tt>label</tt></em>.
             Else: values undefined.</td></tr><tr><td align="center"><tt class="byte">(BOUNDP <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values, depending on whether a local
             variable is bound.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>) is not <tt class="literal">#&lt;UNBOUND&gt;</tt>,
                <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.
             Else: <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(UNBOUND-&gt;NIL <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">If a local variable is unbound, assign a default value
             <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> to it.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>) is <tt class="literal">#&lt;UNBOUND&gt;</tt>,
             *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>) := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-mulval"></a>35.5.9. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a></h3></div></div></div><div class="informaltable"><a id="instr-mulval-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(VALUES0)</tt></td><td align="center">Load no values into values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 0</td></tr><tr><td align="center"><tt class="byte">(VALUES1)</tt></td><td align="center">Forget secondary values.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>-TO-MV <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Pop the first <em class="replaceable"><tt>n</tt></em> objects from <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> into values.</td><td align="center">Load values(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1),...,*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0)) into
             values. <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(MV-TO-<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>)</tt></td><td align="center">Save values on <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center">Push the <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> values onto the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (in order: <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> comes first).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(NV-TO-<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Save <em class="replaceable"><tt>n</tt></em> values on <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.</td><td align="center">Push the first <em class="replaceable"><tt>n</tt></em> values onto the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>
             (in order: <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> comes first).
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= <em class="replaceable"><tt>n</tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(MV-TO-LIST)</tt></td><td align="center">Convert <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a> into a list.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := list of values, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="byte">(LIST-TO-MV)</tt></td><td align="center">Convert a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> into <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.</td><td align="center">Call the function <a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> with <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> as argument.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="byte">(MVCALLP)</tt></td><td align="center">Start a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><tt class="function">MULTIPLE-VALUE-CALL</tt></a> invocation.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>. *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td></tr><tr><td align="center"><tt class="byte">(MVCALL)</tt></td><td align="center">Finish a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><tt class="function">MULTIPLE-VALUE-CALL</tt></a> invocation.</td><td align="center">newSTACK := *<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>++.
             Call the function *(newSTACK-1), passing it
             *(newSTACK-2), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0) as arguments.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := newSTACK.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-block"></a>35.5.10. Instructions for
   <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><tt class="function">RETURN-FROM</tt></a></h3></div></div></div><div class="informaltable"><a id="instr-block-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(BLOCK-OPEN <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= 3, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
   The topmost (third) object in the block frame is
   <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>],frame-pointer) (its <em class="replaceable"><tt>block-cons</tt></em>).
   Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><tt class="function">RETURN-FROM</tt></a> to this frame, execution will continue at <em class="replaceable"><tt>label</tt></em>.
   values undefined.</td></tr><tr><td align="center"><tt class="byte">(BLOCK-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 3,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>. Mark the <em class="replaceable"><tt>block-cons</tt></em> as invalid.</td></tr><tr><td align="center"><tt class="byte">(RETURN-FROM <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> whose <em class="replaceable"><tt>block-cons</tt></em> is given.</td><td align="center"><em class="replaceable"><tt>block-cons</tt></em> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>block-cons</tt></em>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>block-cons</tt></em>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr><tr><td align="center"><tt class="byte">(RETURN-FROM-I <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> whose <em class="replaceable"><tt>block-cons</tt></em> is indirectly accessible.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <em class="replaceable"><tt>block-cons</tt></em> := *(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+<em class="replaceable"><tt>n</tt></em>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>block-cons</tt></em>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>block-cons</tt></em>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-tagbody"></a>35.5.11. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><tt class="function">GO</tt></a></h3></div></div></div><div class="informaltable"><a id="instr-tagbody-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(TAGBODY-OPEN <em class="replaceable"><tt>m</tt></em>
             <em class="replaceable"><tt>label<sub>1</sub></tt></em> ...
             <em class="replaceable"><tt>label<sub>n</sub></tt></em>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame.</td><td align="center">Fetch <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>m</tt></em>], this is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> with
             <em class="replaceable"><tt>n</tt></em> elements, then decode <em class="replaceable"><tt>n</tt></em> label operands.
             Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= 3+<em class="replaceable"><tt>n</tt></em>, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> -= 1+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             The third object in the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame is
             <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>(<a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>m</tt></em>],frame-pointer) (the <em class="replaceable"><tt>tagbody-cons</tt></em>)
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><tt class="function">GO</tt></a> to tag <em class="replaceable"><tt>label</tt></em> of this frame, execution
             will continue at <em class="replaceable"><tt>label<sub>l</sub></tt></em>.
             values undefined</td></tr><tr><td align="center"><tt class="byte">(TAGBODY-CLOSE-NIL)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, and load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 3+<em class="replaceable"><tt>m</tt></em>, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 1+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Mark the <em class="replaceable"><tt>tagbody-cons</tt></em> as invalid.
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(TAGBODY-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 3+<em class="replaceable"><tt>m</tt></em>, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 1+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Mark the <em class="replaceable"><tt>tagbody-cons</tt></em> as invalid.</td></tr><tr><td align="center"><tt class="byte">(GO <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> whose <em class="replaceable"><tt>tagbody-cons</tt></em> is given.</td><td align="center"><em class="replaceable"><tt>tagbody-cons</tt></em> := <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>tagbody-cons</tt></em>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>tagbody-cons</tt></em>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(GO-I <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> whose <em class="replaceable"><tt>tagbody-cons</tt></em> is indirectly
             accessible.</td><td align="center"><em class="replaceable"><tt>k</tt></em> := <em class="replaceable"><tt>k<sub>1</sub></tt></em> + <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <em class="replaceable"><tt>k<sub>2</sub></tt></em>,
             <em class="replaceable"><tt>tagbody-cons</tt></em> := *(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>+<em class="replaceable"><tt>k</tt></em>)+<em class="replaceable"><tt>n</tt></em>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>tagbody-cons</tt></em>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>led.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<em class="replaceable"><tt>tagbody-cons</tt></em>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <em class="replaceable"><tt>label</tt></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-catch"></a>35.5.12. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><tt class="function">THROW</tt></a></h3></div></div></div><div class="informaltable"><a id="instr-catch-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(CATCH-OPEN <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame, with <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> as tag.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= 3, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><tt class="function">THROW</tt></a> to this tag execution continues at
             <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(CATCH-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 3, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.</td></tr><tr><td align="center"><tt class="byte">(THROW)</tt></td><td align="center">Non-local exit to a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center"><em class="replaceable"><tt>tag</tt></em> := *<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++.
             Search the innermost <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame with tag
             <em class="replaceable"><tt>tag</tt></em> on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, unwind the
             stack up to it, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-unwind"></a>35.5.13. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a></h3></div></div></div><div class="informaltable"><a id="instr-unwind-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(UNWIND-PROTECT-OPEN
             <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame.</td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= 2, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             When the stack will be unwound by a non-local exit,
             values will be saved on <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, and execution will be
             transferred to <em class="replaceable"><tt>label</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(UNWIND-PROTECT-NORMAL-EXIT)</tt></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame, and start the cleanup
             code.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 2, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := 0, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := 0, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             Save the values on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.</td></tr><tr><td align="center"><tt class="byte">(UNWIND-PROTECT-CLOSE)</tt></td><td align="center">Terminate the cleanup code.</td><td align="center">newSTACK := *<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>++. Load
             values(*(newSTACK-1), ..., *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0)) into values.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := newSTACK. SPword1 := *<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>++, SPword2 := *<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>++.
             Continue depending on SPword1 and SPword2.
             If both are 0, simply continue execution.
             If SPword2 is 0 but SPword1 is nonzero, interpret it as a
             label and jump to it.</td></tr><tr><td align="center"><tt class="byte">(UNWIND-PROTECT-CLEANUP)</tt></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame, and execute the cleanup
             code like a subroutine call.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame at <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>,
             get <em class="replaceable"><tt>label</tt></em> out of the frame.
             <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 2, <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := 0, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := PC, *--<a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> := <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>.
             Save the values on the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.
             PC := <em class="replaceable"><tt>label</tt></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-handler"></a>35.5.14. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><tt class="function">HANDLER-BIND</tt></a></h3></div></div></div><div class="informaltable"><a id="instr-handler-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(HANDLER-OPEN <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Create a handler frame.</td><td align="center">Create a handler frame, using <a href="#comp-fun" title="35.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<em class="replaceable"><tt>n</tt></em>] which
             contains the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> types, the corresponding labels and
             the current <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> depth (= function entry <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> - current <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a>).
             </td></tr><tr><td align="center"><tt class="byte">(HANDLER-BEGIN&amp;PUSH)</tt></td><td align="center">Start a handler.</td><td align="center">Restore the same <a href="impnotes.html#vm" class="olink"><tt class="literal">SP</tt></a> state as after the HANDLER-OPEN.
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> that was passed to the handler,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.
             *--<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> := <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-inline"></a>35.5.15. Instructions for some inlined
  functions</h3></div></div></div><div class="informaltable"><a id="instr-inline-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(NOT)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><tt class="function">NOT</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := not(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(EQ)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := eq(*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(CAR)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(CDR)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(CONS)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := cons(*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(SYMBOL-FUNCTION)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a>(<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(SVREF)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(SVSET)</tt></td><td align="center">Inlined call to <tt class="function">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a></tt>.</td><td align="center"><em class="replaceable"><tt>arg1</tt></em> := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+1),
             <em class="replaceable"><tt>arg2</tt></em> := *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0), <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += 2.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<em class="replaceable"><tt>arg2</tt></em>,<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>) :=
                  <em class="replaceable"><tt>arg1</tt></em>.
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <em class="replaceable"><tt>arg1</tt></em>,
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="byte">(LIST <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST</tt></a>(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1),...,*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0)),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>.</td></tr><tr><td align="center"><tt class="byte">(LIST* <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST*</tt></a>.</td><td align="center"><a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST*</tt></a>(*(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+<em class="replaceable"><tt>n</tt></em>-1),...,
                                     *(<a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>+0),<a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="35.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> += <em class="replaceable"><tt>n</tt></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-combo"></a>35.5.16. Combined instructions</h3></div></div></div><p>The most frequent short sequences of instructions have an
equivalent combined instruction.  They are only present for space and
speed optimization. The only exception is
<tt class="byte">FUNCALL&amp;SKIP&amp;RETGF</tt>, which is needed for
generic functions.</p><div class="informaltable"><a id="instr-combo-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">equivalent</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(NIL&amp;PUSH)</tt></td><td align="center"><tt class="byte">(NIL) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(T&amp;PUSH)</tt></td><td align="center"><tt class="byte">(T) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CONST&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOADI&amp;PUSH <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOADI <em class="replaceable"><tt>k<sub>1</sub></tt></em> <em class="replaceable"><tt>k<sub>2</sub></tt></em> <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOADC&amp;PUSH <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center"><tt class="byte">(LOADC <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOADV&amp;PUSH <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center"><tt class="byte">(LOADV <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>m</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(POP&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(POP) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(GETVALUE&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(GETVALUE <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(JSR&amp;PUSH <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(JSR <em class="replaceable"><tt>label</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(COPY-CLOSURE&amp;PUSH <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(COPY-CLOSURE <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL&amp;PUSH <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL1&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL1 <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL2&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL2 <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS1&amp;PUSH <em class="replaceable"><tt>b</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS1 <em class="replaceable"><tt>b</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS2&amp;PUSH <em class="replaceable"><tt>b</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS2 <em class="replaceable"><tt>b</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLSR&amp;PUSH <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLSR <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLC&amp;PUSH)</tt></td><td align="center"><tt class="byte">(CALLC) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLCKEY&amp;PUSH)</tt></td><td align="center"><tt class="byte">(CALLCKEY) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(FUNCALL&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(FUNCALL <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(APPLY&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(APPLY <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CAR&amp;PUSH)</tt></td><td align="center"><tt class="byte">(CAR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CDR&amp;PUSH)</tt></td><td align="center"><tt class="byte">(CDR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CONS&amp;PUSH)</tt></td><td align="center"><tt class="byte">(CONS) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LIST&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LIST <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LIST*&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LIST* <em class="replaceable"><tt>n</tt></em>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(NIL&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(NIL) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(T&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(T) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;STOREC <em class="replaceable"><tt>k</tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>k</tt></em>) (STOREC <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>m</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS1&amp;STORE <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS1 <em class="replaceable"><tt>b</tt></em>) (STORE <em class="replaceable"><tt>k</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS2&amp;STORE <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS2 <em class="replaceable"><tt>b</tt></em>) (STORE <em class="replaceable"><tt>k</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLSR&amp;STORE <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLSR <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>) (STORE <em class="replaceable"><tt>k</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;CDR&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CDR) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;CONS&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>+1) (CONS) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;INC&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CALL1 #'1+) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;DEC&amp;STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CALL1 #'1-) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;CAR&amp;STORE <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>m</tt></em>) (CAR) (STORE <em class="replaceable"><tt>n</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL1&amp;JMPIF <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL1 <em class="replaceable"><tt>n</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL1&amp;JMPIFNOT <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL1 <em class="replaceable"><tt>n</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL2&amp;JMPIF <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL2 <em class="replaceable"><tt>n</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALL2&amp;JMPIFNOT <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALL2 <em class="replaceable"><tt>n</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS1&amp;JMPIF <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS1 <em class="replaceable"><tt>b</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS1&amp;JMPIFNOT <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS1 <em class="replaceable"><tt>b</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS2&amp;JMPIF <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS2 <em class="replaceable"><tt>b</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLS2&amp;JMPIFNOT <em class="replaceable"><tt>b</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLS2 <em class="replaceable"><tt>b</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLSR&amp;JMPIF <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLSR <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(CALLSR&amp;JMPIFNOT <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(CALLSR <em class="replaceable"><tt>m</tt></em> <em class="replaceable"><tt>n</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;JMPIF <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (JMPIF <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;JMPIFNOT <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>label</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (JMPIFNOT <em class="replaceable"><tt>label</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;CAR&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CAR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;CDR&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CDR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;INC&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CALL1 #'1+) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;DEC&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>) (CALL1 #'1-) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CONST&amp;SYMBOL-FUNCTION <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>) (SYMBOL-FUNCTION)</tt></td></tr><tr><td align="center"><tt class="byte">(CONST&amp;SYMBOL-FUNCTION&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>) (SYMBOL-FUNCTION) (PUSH)</tt></td></tr><tr><td align="center"><tt class="byte">(CONST&amp;SYMBOL-FUNCTION&amp;STORE <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>) (SYMBOL-FUNCTION) (STORE <em class="replaceable"><tt>k</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(APPLY&amp;SKIP&amp;RET <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(APPLY <em class="replaceable"><tt>n</tt></em>) (SKIP&amp;RET <em class="replaceable"><tt>k</tt></em>)</tt></td></tr><tr><td align="center"><tt class="byte">(FUNCALL&amp;SKIP&amp;RETGF <em class="replaceable"><tt>n</tt></em> <em class="replaceable"><tt>k</tt></em>)</tt></td><td align="center"><tt class="byte">(FUNCALL <em class="replaceable"><tt>n</tt></em>) (SKIP&amp;RETGF <em class="replaceable"><tt>k</tt></em>)</tt></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-shortcut"></a>35.5.17. Shortcut instructions</h3></div></div></div><p>There are special one-byte instructions (without explicit
operands) for the following frequent instructions:</p><div class="informaltable"><a id="instr-shortcut-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">operand range</th></tr></thead><tbody><tr><td align="center"><tt class="byte">(LOAD <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">0 ≤ <em class="replaceable"><tt>n</tt></em> &lt; 15</td></tr><tr><td align="center"><tt class="byte">(LOAD&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">0 ≤ <em class="replaceable"><tt>n</tt></em> &lt; 25</td></tr><tr><td align="center"><tt class="byte">(CONST <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">0 ≤ <em class="replaceable"><tt>n</tt></em> &lt; 21</td></tr><tr><td align="center"><tt class="byte">(CONST&amp;PUSH <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">0 ≤ <em class="replaceable"><tt>n</tt></em> &lt; 30</td></tr><tr><td align="center"><tt class="byte">(STORE <em class="replaceable"><tt>n</tt></em>)</tt></td><td align="center">0 ≤ <em class="replaceable"><tt>n</tt></em> &lt; 8</td></tr></tbody></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="bytecode-design"></a>35.6. Bytecode Design</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#byte-when-add-q">35.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">35.6.2. Why JMPTAIL?</a></span></dt></dl></div><p>This section offers some insight into bytecode design in the form
 of questions and answers.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-when-add-q"></a>35.6.1. When to add a new bytecode?</h3></div></div></div><div class="abstract"><p class="title"><b>Question:</b></p><p>Does it make sense to define a new bytecode instruction for
   <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a>? Why? Why not?</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="byte-when-add-a"></a>Answer: Is it speed critical?</h4></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> is a glorified <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> binding
   for <tt class="varname">SYSTEM::*ACTIVE-RESTARTS*</tt> and could well profit
   from a separate bytecode: it would make it non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a>.
   (Remember that <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><tt class="classname">RESTART</tt></a>s have dynamic extent and therefore do not
   really need to be heap allocated.)</p><p>The reason <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><tt class="function">HANDLER-BIND</tt></a> has its own bytecodes and
   <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> does not is that <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><tt class="function">HANDLER-BIND</tt></a> can occur in inner
   computation loops, whereas <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> occurs only as part of
   user-interface programming and therefore not in inner loops where its
   consing could hurt much.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-jmptail-q"></a>35.6.2. Why <a href="#instr-jump" title="35.5.5.&#xA0;Instructions for control flow, jumps">JMPTAIL</a>?</h3></div></div></div><div class="abstract"><p class="title"><b>Question:</b></p><p>Consider this function and its disassembly:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (defun foo (x y) (if (or (= x 0) (= y 0)) (+ x y) (foo y (1- x))))
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a> 'foo)
8     (LOAD&amp;PUSH 1)
9     (LOAD&amp;DEC&amp;PUSH 3)
11    (JMPTAIL 2 5 L0)
    </pre></td></tr></table><p>
    Why are the arguments pushed onto the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a>, just to be popped off of
    it during the <tt class="byte">JMPTAIL</tt>?
    Why not a sequence of <tt class="byte">LOAD</tt>,
    <tt class="byte">STORE</tt> and
    <tt class="byte">SKIP</tt> instructions
    followed by a <tt class="byte">JMP</tt>?
 </p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="byte-jmptail-a"></a>Answer: This is a shortcut for the most common use.</h4></div></div></div><p>Using <tt class="byte">JMPTAIL</tt> requires 3
   instructions, <tt class="byte">JMP</tt> requires more.
   When <tt class="byte">JMPTAIL</tt> needs to be called, we
   usually have some stuff close to the top of the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> which will
   become the new arguments, and some junk between these new arguments
   and the closure object.  <tt class="byte">JMPTAIL</tt>
   removes the junk.  <tt class="byte">JMPTAIL</tt> is a
   convenient shortcut which shortens the bytecode - because typically
   one would really have to clean-up the <a href="impnotes.html#vm" class="olink"><tt class="literal">STACK</tt></a> by hand or make the
   calculations in <tt class="filename">compiler.lisp</tt> more complicated.
</p></div></div></div></div></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="gfdl"></a>GNU Free Documentation License</h1></div><div><p class="releaseinfo">Version 1.2, November 2002</p></div><div><p class="copyright">Copyright © 2000,2001,2002 Free Software Foundation, Inc.</p></div><div><div class="legalnotice"><a id="gfdl-legalnotice"></a><div class="address"><p>Free Software Foundation, Inc.<br />
 <span class="street">59 Temple Place, Suite 330</span>,<br />
 <span class="city">Boston</span>,<br />
 <span class="state">MA</span><br />
 <span class="postcode">02111-1307</span><br />
 <span class="country">USA</span><br />
 </p></div><p>Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.</p></div></div><div><p class="pubdate">Version 1.2, November 2002</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#gfdl-0">A.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">A.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">A.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">A.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">A.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">A.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">A.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">A.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">A.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">A.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">A.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">A.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-0"></a>A.1. PREAMBLE</h2></div></div></div><p>The purpose of this License is to make a manual, textbook, or
other functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it, with
or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</p><p>This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft license
designed for free software.</p><p>We have designed this License in order to use it for manuals for
free software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals; it
can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-1"></a>A.2. APPLICABILITY AND DEFINITIONS</h2></div></div></div><p><a id="gfdl-doc"></a>This License applies to any manual or other work, in
any medium, that contains a notice placed by the copyright holder saying
it can be distributed under the terms of this License.  Such a notice
grants a world-wide, royalty-free license, unlimited in duration, to use
that work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission under
copyright law.</p><p><a id="gfdl-mod-ver"></a>A "Modified Version" of the Document means any
work containing the Document or a portion of it, either copied verbatim,
or with modifications and/or translated into another language.</p><p><a id="gfdl-secnd-sect"></a>A "Secondary Section" is a named appendix or
a front-matter section of the Document that deals exclusively with the
relationship of the publishers or authors of the Document to the
Document's overall subject (or to related matters) and contains nothing
that could fall directly within that overall subject.  (Thus, if the
Document is in part a textbook of mathematics, a Secondary Section may
not explain any mathematics.)  The relationship could be a matter of
historical connection with the subject or with related matters, or of
legal, commercial, philosophical, ethical or political position
regarding them.</p><p><a id="gfdl-inv-sect"></a>The "Invariant Sections" are certain Secondary
Sections whose titles are designated, as being those of Invariant
Sections, in the notice that says that the Document is released under
this License.  If a section does not fit the above definition of
Secondary then it is not allowed to be designated as Invariant.  The
Document may contain zero Invariant Sections.  If the Document does not
identify any Invariant Sections then there are none.</p><p><a id="gfdl-cov-text"></a>The "Cover Texts" are certain short passages of
text that are listed, as Front-Cover Texts or Back-Cover Texts, in the
notice that says that the Document is released under this License.  A
Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at
most 25 words.</p><p><a id="gfdl-transparent"></a>A "Transparent" copy of the Document means a
machine-readable copy, represented in a format whose specification is
available to the general public, that is suitable for revising the
document straightforwardly with generic text editors or (for images
composed of pixels) generic paint programs or (for drawings) some widely
available drawing editor, and that is suitable for input to text
formatters or for automatic translation to a variety of formats suitable
for input to text formatters.  A copy made in an otherwise Transparent
file format whose markup, or absence of markup, has been arranged to
thwart or discourage subsequent modification by readers is not
Transparent.  An image format is not Transparent if used for any
substantial amount of text.  A copy that is not "Transparent" is called
"Opaque".</p><p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML or
XML using a publicly available DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</p><p><a id="gfdl-title-page"></a>The "Title Page" means, for a printed book,
the title page itself, plus such following pages as are needed to hold,
legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title
Page" means the text near the most prominent appearance of the work's
title, preceding the beginning of the body of the text.</p><p><a id="gfdl-entitled"></a>A section "Entitled XYZ" means a named subunit
of the Document whose title either is precisely XYZ or contains XYZ in
parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as
"Acknowledgements", "Dedications", "Endorsements", or "History".)  To
"Preserve the Title" of such a section when you modify the Document
means that it remains a section "Entitled XYZ" according to this
definition.</p><p>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-2"></a>A.3. VERBATIM COPYING</h2></div></div></div><p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p><p>You may also lend copies, under the same conditions stated above,
and you may publicly display copies.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-3"></a>A.4. COPYING IN QUANTITY</h2></div></div></div><p>If you publish printed copies (or copies in media that commonly
have printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover.  Both covers must also clearly and legibly identify you as the
publisher of these copies.  The front cover must present the full title
with all words of the title equally prominent and visible.  You may add
other material on the covers in addition.  Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</p><p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</p><p>If you publish or distribute Opaque copies of the Document
numbering more than 100, you must either include a machine-readable
Transparent copy along with each Opaque copy, or state in or with each
Opaque copy a computer-network location from which the general
network-using public has access to download using public-standard
network protocols a complete Transparent copy of the Document, free of
added material.  If you use the latter option, you must take reasonably
prudent steps, when you begin distribution of Opaque copies in quantity,
to ensure that this Transparent copy will remain thus accessible at the
stated location until at least one year after the last time you
distribute an Opaque copy (directly or through your agents or retailers)
of that edition to the public.</p><p>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-4"></a>A.5. MODIFICATIONS</h2></div></div></div><p>You may copy and distribute a Modified Version of the Document
under the conditions of sections 2 and 3 above, provided that you
release the Modified Version under precisely this License, with the
Modified Version filling the role of the Document, thus licensing
distribution and modification of the Modified Version to whoever
possesses a copy of it.  In addition, you must do these things in the
Modified Version:</p><div class="orderedlist"><a id="gfdl-modif-cond"></a><p class="title"><b>GNU FDL Modification Conditions</b></p><ol type="A"><li>Use in the Title Page (and on the covers, if any) a
  title distinct from that of the Document, and from those of previous
  versions (which should, if there were any, be listed in the History
  section of the Document).  You may use the same title as a previous
  version if the original publisher of that version gives permission.
</li><li>List on the Title Page, as authors, one or more
  persons or entities responsible for authorship of the modifications in
  the Modified Version, together with at least five of the principal
  authors of the Document (all of its principal authors, if it has fewer
  than five), unless they release you from this requirement.
</li><li>State on the Title page the name of the publisher of
  the Modified Version, as the publisher.</li><li>Preserve all the copyright notices of the Document.
</li><li>Add an appropriate copyright notice for your
  modifications adjacent to the other copyright notices.
</li><li>Include, immediately after the copyright notices, a
  license notice giving the public permission to use the Modified
  Version under the terms of this License, in the form shown in the
  <a href="#gfdl-addendum" title="A.12.&#xA0;ADDENDUM: How to use this License for&#10;  your documents">Addendum</a> below.
</li><li>Preserve in that license notice the full lists of
  Invariant Sections and required Cover Texts given in the Document's
  license notice.</li><li>Include an unaltered copy of this License.
</li><li>Preserve the section Entitled "History", Preserve its
  Title, and add to it an item stating at least the title, year, new
  authors, and publisher of the Modified Version as given on the Title
  Page.  If there is no section Entitled "History" in the Document,
  create one stating the title, year, authors, and publisher of the
  Document as given on its Title Page, then add an item describing the
  Modified Version as stated in the previous sentence.
</li><li>Preserve the network location, if any, given in the
  Document for public access to a Transparent copy of the Document, and
  likewise the network locations given in the Document for previous
  versions it was based on.  These may be placed in the "History"
  section.  You may omit a network location for a work that was
  published at least four years before the Document itself, or if the
  original publisher of the version it refers to gives permission.
</li><li>For any section Entitled "Acknowledgements" or
  "Dedications", Preserve the Title of the section, and preserve in the
  section all the substance and tone of each of the contributor
  acknowledgements and/or dedications given therein.
</li><li>Preserve all the Invariant Sections of the Document,
  unaltered in their text and in their titles.  Section numbers or the
  equivalent are not considered part of the section titles.
</li><li>Delete any section Entitled "Endorsements".
  Such a section may not be included in the Modified Version.
</li><li>Do not retitle any existing section to be Entitled
  "Endorsements" or to conflict in title with any Invariant Section.
</li><li>Preserve any Warranty Disclaimers.
</li></ol></div><p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.</p><p>You may add a section Entitled "Endorsements", provided it
contains nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.</p><p>You may add a passage of up to five words as a Front-Cover Text,
and a passage of up to 25 words as a Back-Cover Text, to the end of the
list of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity.  If the Document already includes
a cover text for the same cover, previously added by you or by
arrangement made by the same entity you are acting on behalf of, you may
not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.</p><p>The author(s) and publisher(s) of the Document do not by this
License give permission to use their names for publicity for or to
assert or imply endorsement of any Modified Version.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-5"></a>A.6. COMBINING DOCUMENTS</h2></div></div></div><p>You may combine the Document with other documents released under
this License, under the terms defined in <a href="#gfdl-4" title="A.5.&#xA0;MODIFICATIONS">section
4</a> above for modified versions, provided that you include in the
combination all of the Invariant Sections of all of the original
documents, unmodified, and list them all as Invariant Sections of your
combined work in its license notice, and that you preserve all their
Warranty Disclaimers.</p><p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number.  Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</p><p>In the combination, you must combine any sections Entitled
"History" in the various original documents, forming one section
Entitled "History"; likewise combine any sections Entitled
"Acknowledgements", and any sections Entitled "Dedications".  You must
delete all sections Entitled "Endorsements".</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-6"></a>A.7. COLLECTIONS OF DOCUMENTS</h2></div></div></div><p>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</p><p>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-7"></a>A.8. AGGREGATION WITH INDEPENDENT WORKS</h2></div></div></div><p>A compilation of the Document or its derivatives with other
separate and independent documents or works, in or on a volume of a
storage or distribution medium, is called an "aggregate" if the
copyright resulting from the compilation is not used to limit the legal
rights of the compilation's users beyond what the individual works
permit.  When the Document is included in an aggregate, this License does
not apply to the other works in the aggregate which are not themselves
derivative works of the Document.</p><p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form.  Otherwise
they must appear on printed covers that bracket the whole
aggregate.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-8"></a>A.9. TRANSLATION</h2></div></div></div><p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</p><p>If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual
title.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-9"></a>A.10. TERMINATION</h2></div></div></div><p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided for under this License.  Any other attempt
to copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this License
will not have their licenses terminated so long as such parties remain
in full compliance.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-10"></a>A.11. FUTURE REVISIONS OF THIS LICENSE</h2></div></div></div><p>The Free Software Foundation may publish new, revised versions of
the GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
http://www.gnu.org/copyleft/.</p><p>Each version of the License is given a distinguishing version
number.  If the Document specifies that a particular numbered version of
this License "or any later version" applies to it, you have the option
of following the terms and conditions either of that specified version
or of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-addendum"></a>A.12. ADDENDUM: How to use this License for
  your documents</h2></div></div></div><p>To use this License in a document you have written, include a copy
of the License in the document and put the following copyright and
license notices just after the title page:</p><div class="blockquote"><a id="copyright-sample"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Sample Invariant Sections list</b></p></div><p>
    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.2
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".
</p></blockquote></div><p>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the "with...Texts." line with this:</p><div class="blockquote"><a id="inv-cover-sample"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Sample Invariant Sections list</b></p></div><p>
    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.
</p></blockquote></div><p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</p><p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</p></div></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="gpl"></a>GNU General Public License</h1></div><div><p class="releaseinfo">      Version 2, June 1991</p></div><div><p class="copyright">Copyright © 1989, 1991 Free Software Foundation, Inc.</p></div><div><div class="legalnotice"><a id="gpl-legalnotice"></a><p>	
	</p><div class="address"><p>Free Software Foundation, Inc. <br />
	  <span class="street">59 Temple Place, Suite 330</span>, <br />
	  <span class="city">Boston</span>, <br />
	  <span class="state">MA</span> <br />
	  <span class="postcode">02111-1307</span><br />
	  <span class="country">USA</span><br />
	</p></div><p>
      </p><p>	Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.
      </p></div></div><div><p class="pubdate">Version 2, June 1991</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#gpl-1">B.1. Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">B.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">B.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">B.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">B.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">B.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">B.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">B.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">B.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">B.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">B.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">B.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">B.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">B.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">B.2.13. Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">B.3. How to Apply These Terms to Your New Programs
    </a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-1"></a>B.1. Preamble</h2></div></div></div><p>      The licenses for most software are designed to take away your 
      freedom to share and change it. By contrast, the GNU General Public License is 
      intended to guarantee your freedom to share and change 
      free software - to make sure the software is free for all its users. 
      This General Public License applies to most of the Free Software 
      Foundation's software and to any other program whose authors commit 
      to using it. (Some other Free Software Foundation software is covered 
      by the GNU Library General Public License instead.) You can apply it 
      to your programs, too.
    </p><p>      When we speak of free software, we are referring to freedom, not price. 
      Our General Public Licenses are designed to make sure that you have the 
      freedom to distribute copies of free software (and charge for this 
      service if you wish), that you receive source code or can get it if you 
      want it, that you can change the software or use pieces of it in new free 
      programs; and that you know you can do these things.
    </p><p>      To protect your rights, we need to make restrictions that forbid anyone 
      to deny you these rights or to ask you to surrender the rights. These 
      restrictions translate to certain responsibilities for you if you distribute 
      copies of the software, or if you modify it.
    </p><p>      For example, if you distribute copies of such a program, whether gratis or 
      for a fee, you must give the recipients all the rights that you have. You 
      must make sure that they, too, receive or can get the source code. And you 
      must show them these terms so they know their rights.
    </p><p>      We protect your rights with two steps:
      </p><div class="orderedlist"><ol type="1"><li><p>	    copyright the software, and
	  </p></li><li><p>	    offer you this license which gives you legal permission to copy, 
	    distribute and/or modify the software.
	  </p></li></ol></div><p>
    </p><p>      Also, for each author's protection and ours, we want to make certain that 
      everyone understands that there is no warranty for this free software. If 
      the software is modified by someone else and passed on, we want its 
      recipients to know that what they have is not the original, so that any 
      problems introduced by others will not reflect on the original authors' 
      reputations.
    </p><p>      Finally, any free program is threatened constantly by software patents. 
      We wish to avoid the danger that redistributors of a free program will 
      individually obtain patent licenses, in effect making the program 
      proprietary. To prevent this, we have made it clear that any patent must be 
      licensed for everyone's free use or not licensed at all.
    </p><p>      The precise terms and conditions for copying, distribution and modification 
      follow.
    </p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-2"></a>B.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#gpl-2-0">B.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">B.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">B.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">B.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">B.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">B.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">B.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">B.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">B.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">B.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">B.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">B.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">B.2.13. Section 12
      </a></span></dt></dl></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-0"></a>B.2.1. Section 0</h3></div></div></div><p>	This License applies to any program or other work which contains a notice 
	placed by the copyright holder saying it may be distributed under the terms 
	of this General Public License. The "Program", below, refers to any such 
	program or work, and a 
	“<span class="quote">work based on the Program
	</span>” means either 
	the Program or any derivative work under copyright law: that is to say, a 
	work containing the Program or a portion of it, either verbatim or with 
	modifications and/or translated into another language. (Hereinafter, translation 
	is included without limitation in the term 
	“<span class="quote">modification
	</span>”.) Each licensee is addressed as “<span class="quote">you</span>”.
      </p><p>	Activities other than copying, distribution and modification are not covered by 
	this License; they are outside its scope. The act of running the Program is not 
	restricted, and the output from the Program is covered only if its contents 
	constitute a work based on the Program (independent of having been made by running 
	the Program). Whether that is true depends on what the Program does.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-1"></a>B.2.2. Section 1</h3></div></div></div><p>	You may copy and distribute verbatim copies of the Program's source code as you 
	receive it, in any medium, provided that you conspicuously and appropriately 
	publish on each copy an appropriate copyright notice and disclaimer of warranty; 
	keep intact all the notices that refer to this License and to the absence of any 
	warranty; and give any other recipients of the Program a copy of this License 
	along with the Program.
      </p><p>	You may charge a fee for the physical act of transferring a copy, and you may at 
	your option offer warranty protection in exchange for a fee.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-2"></a>B.2.3. Section 2</h3></div></div></div><p>	You may modify your copy or copies of the Program or any portion of it, thus 
	forming a work based on the Program, and copy and distribute such modifications 
	or work under the terms of 
	<a href="#gpl-2-1" title="B.2.2.&#xA0;Section 1">Section 1
	</a> above, provided 
	that you also meet all of these conditions:
	</p><div class="orderedlist"><ol type="1"><li><p>	      You must cause the modified files to carry prominent notices stating that 
	      you changed the files and the date of any change.
	    </p></li><li><p>	      You must cause any work that you distribute or publish, that in whole or 
	      in part contains or is derived from the Program or any part thereof, to be 
	      licensed as a whole at no charge to all third parties under the terms of 
	      this License.
	    </p></li><li><p>	      If the modified program normally reads commands interactively when run, you 
	      must cause it, when started running for such interactive use in the most 
	      ordinary way, to print or display an announcement including an appropriate 
	      copyright notice and a notice that there is no warranty (or else, saying 
	      that you provide a warranty) and that users may redistribute the program 
	      under these conditions, and telling the user how to view a copy of this 
	      License. 
	      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Exception:
		</h3><p>		  If the Program itself is interactive but does not normally print such an 
		  announcement, your work based on the Program is not required to print an 
		  announcement.) 
		</p></div><p>
	    </p></li></ol></div><p>
      </p><p>	These requirements apply to the modified work as a whole. If identifiable sections 
	of that work are not derived from the Program, and can be reasonably considered 
	independent and separate works in themselves, then this License, and its terms, 
	do not apply to those sections when you distribute them as separate works. But when 
	you distribute the same sections as part of a whole which is a work based on the 
	Program, the distribution of the whole must be on the terms of this License, whose 
	permissions for other licensees extend to the entire whole, and thus to each and 
	every part regardless of who wrote it.
      </p><p>	Thus, it is not the intent of this section to claim rights or contest your rights 
	to work written entirely by you; rather, the intent is to exercise the right to control 
	the distribution of derivative or collective works based on the Program.
      </p><p>	In addition, mere aggregation of another work not based on the Program with the Program 
	(or with a work based on the Program) on a volume of a storage or distribution medium 
	does not bring the other work under the scope of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-3"></a>B.2.4. Section 3
      </h3></div></div></div><p>	You may copy and distribute the Program (or a work based on it, under 
	<a href="#gpl-2-2" title="B.2.3.&#xA0;Section 2">Section 2
	</a> in object code or executable form under the terms of 
	<a href="#gpl-2-1" title="B.2.2.&#xA0;Section 1">Sections 1
	</a> and 
	<a href="#gpl-2-2" title="B.2.3.&#xA0;Section 2">2
	</a> above provided that you also do one of the following:
	</p><div class="orderedlist"><ol type="1"><li><p>	Accompany it with the complete corresponding machine-readable source code, which 
	      must be distributed under the terms of Sections 1 and 2 above on a medium 
	      customarily used for software interchange; or,
	    </p></li><li><p>	      Accompany it with a written offer, valid for at least three years, to give any 
	      third party, for a charge no more than your cost of physically performing source 
	      distribution, a complete machine-readable copy of the corresponding source code, 
	      to be distributed under the terms of Sections 1 and 2 above on a medium customarily 
	      used for software interchange; or,
	    </p></li><li><p>	      Accompany it with the information you received as to the offer to distribute 
	      corresponding source code. (This alternative is allowed only for noncommercial 
	      distribution and only if you received the program in object code or executable form 
	      with such an offer, in accord with Subsection b above.)
	    </p></li></ol></div><p>
      </p><p>	The source code for a work means the preferred form of the work for making modifications 
	to it. For an executable work, complete source code means all the source code for all modules 
	it contains, plus any associated interface definition files, plus the scripts used to control 
	compilation and installation of the executable. However, as a special exception, the source 
	code distributed need not include anything that is normally distributed (in either source or 
	binary form) with the major components (compiler, kernel, and so on) of the operating system 
	on which the executable runs, unless that component itself accompanies the executable.
      </p><p>	If distribution of executable or object code is made by offering access to copy from a 
	designated place, then offering equivalent access to copy the source code from the same place 
	counts as distribution of the source code, even though third parties are not compelled to 
	copy the source along with the object code.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-4"></a>B.2.5. Section 4
      </h3></div></div></div><p>	You may not copy, modify, sublicense, or distribute the Program except as expressly provided 
	under this License. Any attempt otherwise to copy, modify, sublicense or distribute the 
	Program is void, and will automatically terminate your rights under this License. However, 
	parties who have received copies, or rights, from you under this License will not have their 
	licenses terminated so long as such parties remain in full compliance.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-5"></a>B.2.6. Section 5
      </h3></div></div></div><p>	You are not required to accept this License, since you have not signed it. However, nothing 
	else grants you permission to modify or distribute the Program or its derivative works. 
	These actions are prohibited by law if you do not accept this License. Therefore, by modifying 
	or distributing the Program (or any work based on the Program), you indicate your acceptance 
	of this License to do so, and all its terms and conditions for copying, distributing or 
	modifying the Program or works based on it.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-6"></a>B.2.7. Section 6
      </h3></div></div></div><p>	Each time you redistribute the Program (or any work based on the Program), the recipient 
	automatically receives a license from the original licensor to copy, distribute or modify 
	the Program subject to these terms and conditions. You may not impose any further restrictions 
	on the recipients' exercise of the rights granted herein. You are not responsible for enforcing 
	compliance by third parties to this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-7"></a>B.2.8. Section 7
      </h3></div></div></div><p>	If, as a consequence of a court judgment or allegation of patent infringement or for any other 
	reason (not limited to patent issues), conditions are imposed on you (whether by court order, 
	agreement or otherwise) that contradict the conditions of this License, they do not excuse you 
	from the conditions of this License. If you cannot distribute so as to satisfy simultaneously 
	your obligations under this License and any other pertinent obligations, then as a consequence 
	you may not distribute the Program at all. For example, if a patent license would not permit 
	royalty-free redistribution of the Program by all those who receive copies directly or 
	indirectly through you, then the only way you could satisfy both it and this License would be 
	to refrain entirely from distribution of the Program.
      </p><p>	If any portion of this section is held invalid or unenforceable under any particular circumstance, 
	the balance of the section is intended to apply and the section as a whole is intended to apply 
	in other circumstances.
      </p><p>	It is not the purpose of this section to induce you to infringe any patents or other property 
	right claims or to contest validity of any such claims; this section has the sole purpose of 
	protecting the integrity of the free software distribution system, which is implemented by public 
	license practices. Many people have made generous contributions to the wide range of software 
	distributed through that system in reliance on consistent application of that system; it is up 
	to the author/donor to decide if he or she is willing to distribute software through any other 
	system and a licensee cannot impose that choice.
      </p><p>	This section is intended to make thoroughly clear what is believed to be a consequence of the 
	rest of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-8"></a>B.2.9. Section 8
      </h3></div></div></div><p>	If the distribution and/or use of the Program is restricted in certain countries either by patents 
	or by copyrighted interfaces, the original copyright holder who places the Program under this License 
	may add an explicit geographical distribution limitation excluding those countries, so that 
	distribution is permitted only in or among countries not thus excluded. In such case, this License 
	incorporates the limitation as if written in the body of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-9"></a>B.2.10. Section 9
      </h3></div></div></div><p>	The Free Software Foundation may publish revised and/or new versions of the General Public License 
	from time to time. Such new versions will be similar in spirit to the present version, but may differ 
	in detail to address new problems or concerns.
      </p><p>	Each version is given a distinguishing version number. If the Program specifies a version number of 
	this License which applies to it and "any later version", you have the option of following the terms 
	and conditions either of that version or of any later version published by the Free Software 
	Foundation. If the Program does not specify a version number of this License, you may choose any 
	version ever published by the Free Software Foundation.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-10"></a>B.2.11. Section 10
      </h3></div></div></div><p>	If you wish to incorporate parts of the Program into other free programs whose distribution 
	conditions are different, write to the author to ask for permission. For software which is copyrighted 
	by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions 
	for this. Our decision will be guided by the two goals of preserving the free status of all 
	derivatives of our free software and of promoting the sharing and reuse of software generally.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-11"></a>B.2.12. NO WARRANTY Section 11
      </h3></div></div></div><p>	BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT 
	PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR 
	OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, 
	INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR 
	PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE 
	PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-12"></a>B.2.13. Section 12
      </h3></div></div></div><p>	IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR 
	ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU 
	FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE 
	USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED 
	INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH 
	ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH 
	DAMAGES.
      </p><p>END OF TERMS AND CONDITIONS
      </p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-3"></a>B.3. How to Apply These Terms to Your New Programs
    </h2></div></div></div><p>
      If you develop a new program, and you want it to be of the greatest
      possible use to the public, the best way to achieve this is to make it
      free software which everyone can redistribute and change under these terms.
    </p><p>
      To do so, attach the following notices to the program.  It is safest
      to attach them to the start of each source file to most effectively
      convey the exclusion of warranty; and each file should have at least
      the "copyright" line and a pointer to where the full notice is found.
    </p><p>
      &lt;one line to give the program's name and a brief idea of what it does.&gt;
      Copyright (C) &lt;year&gt;    &lt;name of author&gt;
    </p><p>
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
    </p><p>
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
    </p><p>
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
    </p><p>
      Also add information on how to contact you by electronic and paper mail.
    </p><p>
      If the program is interactive, make it output a short notice like this
      when it starts in an interactive mode:
    </p><p>
      Gnomovision version 69, Copyright (C) year name of author
      Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
      This is free software, and you are welcome to redistribute it
      under certain conditions; type `show c' for details.
    </p><p>
      The hypothetical commands `show w' and `show c' should show the appropriate
      parts of the General Public License.  Of course, the commands you use may
      be called something other than `show w' and `show c'; they could even be
      mouse-clicks or menu items--whatever suits your program.
    </p><p>
      You should also get your employer (if you work as a programmer) or your
      school, if any, to sign a "copyright disclaimer" for the program, if
      necessary.  Here is a sample; alter the names:
    </p><p>
      Yoyodyne, Inc., hereby disclaims all copyright interest in the program
      `Gnomovision' (which makes passes at compilers) written by James Hacker.
    </p><p>
      &lt;signature of Ty Coon&gt;, 1 April 1989
      Ty Coon, President of Vice
    </p><p>
      This General Public License does not permit incorporating your program into
      proprietary programs.  If your program is a subroutine library, you may
      consider it more useful to permit linking proprietary applications with the
      library.  If this is what you want to do, use the GNU Library General
      Public License instead of this License.
    </p></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="idx"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>*CURRENT-LANGUAGE*
 , <a href="#language">The Language</a></dt><dt>*FOREIGN-ENCODING*
 , <a href="#enc-dflt">Default encodings.</a></dt><dt>*MISC-ENCODING*
 , <a href="#enc-dflt">Default encodings.</a></dt><dt>*PATHNAME-ENCODING*
 , <a href="#enc-dflt">Default encodings.</a></dt><dt>*TERMINAL-ENCODING*
 , <a href="#enc-dflt">Default encodings.</a></dt><dt>
   *WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*
, <a href="#make-hash">Function MAKE-HASH-TABLE</a></dt><dt>*WINDOW*
    , <a href="#screen">Random Screen Access</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>DEFINTERNATIONAL
 , <a href="#language">The Language</a></dt><dt>DEFLANGUAGE
 , <a href="#language">The Language</a></dt><dt>DEFLOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>
     EXT:MAKE-BUFFERED-INPUT-STREAM
  , <a href="#stream-buffer">Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM
    and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM
   </a></dt><dt>
     EXT:MAKE-BUFFERED-OUTPUT-STREAM
 , <a href="#stream-buffer">Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM
    and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM
   </a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>final delimiter, <a href="#spec-symb">Special Symbols
  [CLHS-1.4.1.3]</a></dt><dt>FORMAT</dt><dd><dl><dt>~!, <a href="#format">Function FORMAT</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GC
 , <a href="#room">Function ROOM</a></dt><dt>GENERIC-FLET
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt><dt>GENERIC-LABELS
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>linking set, <a href="#mod-overview">Overview</a></dt><dt>LOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MAKE-XTERM-IO-STREAM
  , <a href="#separate-io">Other</a></dt><dt>metaobject, <a href="#mop-metaobjects">Metaobjects</a></dt><dd><dl><dt>class, <a href="#mop-mo-classes">Classes</a></dt><dt>generic function, <a href="#mop-mo-gen-funs">Generic Functions</a></dt><dt>method, <a href="#mop-mo-methods">Methods</a></dt><dt>method combination, <a href="#mop-mo-meth-combs">Method Combinations</a></dt><dt>slot definition, <a href="#mop-mo-slot-defs">Slot Definitions</a></dt><dt>specializer, <a href="#mop-mo-spec">Specializers</a></dt><dt>standard, <a href="#mop-mo-cl-inheritance">Inheritance Structure of Metaobject Classes</a></dt></dl></dd><dt>metaobject class, <a href="#mop-metaobjects">Metaobjects</a></dt><dd><dl><dt>basic, <a href="#mop-metaobjects">Metaobjects</a></dt></dl></dd><dt>METHOD-CALL-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>
    METHOD-CALL-TYPE-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>module, <a href="#mod-overview">Overview</a></dt><dt>module set, <a href="#mod-overview">Overview</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NO-PRIMARY-METHOD
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>reserved token, <a href="#tokens">Symbols as Tokens
  [CLHS-2.3.4]</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>SYMBOL-MACRO-EXPAND
 , <a href="#def-sym-mac">Macro DEFINE-SYMBOL-MACRO</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>WITH-OUTPUT-TO-PRINTER
 , <a href="#hardcopy">Printing</a></dt><dt>WITHOUT-PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt><dt>WRITE-FLOAT-DECIMAL
 , <a href="#print-misc">Miscellaneous Issues</a></dt></dl></div></div></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a id="references"></a>References</h2></div></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-books"></a>Books</h3><div class="biblioentry"><a id="CLtL1"></a><p>[<span class="abbrev">CLtL1</span>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="citetitle"><em class="citetitle">Common Lisp: the Language (1st Edition)</em>. </span><span class="pubdate">1984. </span><span class="pagenums">465 pages. </span><span class="isbn">0-201-10088-6. </span><span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="CLtL2"></a><p>[<span class="abbrev">CLtL2</span>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="citetitle"><em class="citetitle"><a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/cltl2.html" target="_top">Common Lisp: the Language (2nd Edition)</a></em>. </span><span class="pubdate">1990. </span><span class="pagenums">1032 pages. </span><span class="isbn">0-201-10088-6. </span><span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="amop"></a><p>[<span class="abbrev">AMOP</span>] <span class="authorgroup"><span class="firstname">Gregor</span> <span class="surname">Kiczales</span>, <span class="firstname">Jim</span> <span class="surname">des Rivieres</span>, and <span class="firstname">Daniel G.</span> <span class="surname">Bobrow</span>. </span><span class="citetitle"><em class="citetitle"><a href="http://www.lisp.org/mop" target="_top">The Art of the Metaobject Protocol</a></em>. </span><span class="pubdate">1991. </span><span class="pagenums">335 pages. </span><span class="isbn">0-262-61074-4. </span><span class="publisher"><span class="publishername"><a href="http://www-mitpress.mit.edu" target="_top">MIT
      Press</a>. </span></span></p></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-ansi"></a>ANSI standard documents</h3><div class="biblioentry"><a id="ansi-cl"></a><p>[<span class="abbrev">ANSI CL standard</span>] ANSI CL<span class="pubdate">1994. </span><span class="citetitle"><em class="citetitle">ANSI Common Lisp standard X3.226-1994 -
       <a href="http://www.ncits.org/tc_home/j13sd4.htm" target="_top">Information
       Technology - Programming Language - Common Lisp</a></em>. </span></p></div><div class="biblioentry"><a id="CLHS"></a><p>[<span class="abbrev">CLHS</span>] <span class="citetitle"><em class="citetitle"><a href="http://www.lisp.org/HyperSpec/FrontMatter/" target="_top">Common Lisp HyperSpec</a></em>. </span></p></div></div></div></div><div class="bookinfo"><hr width="100%" /><table width="100%"><th><td align="left">These notes document CLISP version 2.33.</td><td align="right">Last modified: 2004-11-08</td></th></table></div><div class="custom-footer"><hr width="100%" /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://www.gnu.org"><img src="http://www.gnu.org/graphics/gnubanner.jpg" width="468" height="60" alt="[Come and see what GNU creates for YOU]" /></a></td><td align="right"><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=1355&amp;amp;type=2" width="125" height="37" alt="[SourceForge]" /></a></td></tr></table></div></body></html>
