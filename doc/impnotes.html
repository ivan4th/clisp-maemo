<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Implementation Notes for GNU CLISP.</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@sf.net" /><meta name="generator" content="DocBook XSL Stylesheets V1.64.1" /><meta name="keywords" content="Lisp, Common Lisp, CLISP" /></head><body><div class="book" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="impnotes-top"></a>Implementation Notes for <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</h1></div><div><h2 class="subtitle">These notes document <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> version 2.32.</h2></div><div><div class="author"><h3 class="author"><span class="honorific">Dr</span>. <span class="firstname">Bruno</span> <span class="surname">Haible</span></h3></div></div><div><div class="author"><h3 class="author"><span class="honorific">Dr</span>. <span class="firstname">Sam</span> <span class="surname">Steingold</span></h3></div></div><div><p class="copyright">Copyright © 1992-2003 Bruno Haible</p></div><div><p class="copyright">Copyright © 1998-2003 Sam Steingold</p></div><div><div class="legalnotice"><p>These notes are covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>:</p><p>Permission is granted to copy, distribute and/or modify this
   document under the terms of the GNU Free Documentation License
   (<a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>), Version 1.2 or any later version published by the <a href="http://www.fsf.org" target="_top">Free Software Foundation (FSF)</a>;
   with no Invariant Sections,
   with no Front-Cover Text, and
   with no Back-Cover Texts.
   A copy of the license is included in the section entitled
   <a href="#gfdl" title="Appendix&#xA0;A.&#xA0;GNU Free Documentation License">"GNU Free Documentation License."</a></p></div></div></div><div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#preface">Overview</a></span></dt><dt><span class="part"><a href="#clhs-chapters">I. Chapters or the Common Lisp HyperSpec</a></span></dt><dd><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#class-prec">1.3. Class Precedence Lists
  [CLHS-1.4.4.5]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.4. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#double-quote">2.4. Double-Quote
  [CLHS-2.4.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt>.</a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-int">4.7. Integrating Types and Classes
  [CLHS-4.3.7]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.8. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.8.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro EXT:FCASE</a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function EXT:XOR</a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
   [CLHS-6]</a></span></dt><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt><dt><span class="section"><a href="#meth-combo">7.2. Declarative Method Combination
  [CLHS-7.6.6.3]</a></span></dt><dt><span class="section"><a href="#obj-dict">7.3. The Objects Dictionary
  [CLHS-7.7]</a></span></dt><dd><dl><dt><span class="section"><a href="#class-proto">7.3.1. Generic function <tt class="function">CLOS:CLASS-PROTOTYPE</tt>.</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  COMMON-LISP-USER Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-pack">11.4.1. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.2. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.1. Attributes</a></span></dt><dt><span class="section"><a href="#char-script">13.2. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.3. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dt><span class="section"><a href="#graph-char">13.4. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.5. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.6. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.7. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.8. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.9. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.10. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.11. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.12. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.13. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.14. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.15. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
   [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.2. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.3. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.4. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.2. pathnames</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.3. Miscellaneous Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></dd><dt><span class="part"><a href="#extensions">II. Extensions</a></span></dt><dd><dl><dt><span class="chapter"><a href="#p-indep">29. Extensions-1: Platform independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#image">29.1. Extensions-1.1. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">29.2. Extensions-1.2. Quitting <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#i18n">29.3. Extensions-1.3. Internationalization</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">29.3.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#language">29.3.2. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">29.4. Extensions-1.4. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">29.4.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">29.4.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">29.4.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">29.4.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">29.4.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">29.4.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">29.4.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#clos-stream">29.5. Extensions-1.5. Defining new kinds of Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#gray">29.5.1. Gray streams</a></span></dt><dt><span class="section"><a href="#gstream">29.5.2. Generic streams</a></span></dt></dl></dd><dt><span class="section"><a href="#weak">29.6. Extensions-1.6. Weak Pointers</a></span></dt><dt><span class="section"><a href="#final">29.7. Extensions-1.7. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">29.8. Extensions-1.8. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">29.9. Extensions-1.9. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">29.10. Extensions-1.10. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">29.11. Extensions-1.11. Customizing <span><b class="command">CLISP</b></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">29.12. Extensions-1.12. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#platform">30. Extensions-2: Platform specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">30.1. Extensions-2.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">30.2. Extensions-2.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">30.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinfo">30.2.2. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">30.2.3. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">30.2.4. Example</a></span></dt><dt><span class="section"><a href="#module-tools">30.2.5. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">30.2.6. Modules included in the distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">30.3. Extensions-2.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">30.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">30.3.2. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">30.3.3. The choice of the <span><b class="command">C</b></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">30.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">30.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">30.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">30.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">30.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">30.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">30.4. Extensions-2.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">30.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">30.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">30.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">30.4.4. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">30.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">30.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">30.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">30.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">30.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">30.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">30.5. Extensions-2.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">30.6. Extensions-2.6. Quickstarting delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#app-dev">30.7. Extensions-2.7. Application delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#shell">30.8. Extensions-2.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">30.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">30.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">30.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">30.9. Extensions-2.9. Operating System
  Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">30.10. Extensions-2.10. Other</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#internals">III. Internals of the <span><b class="command">CLISP</b></span> Implementation</a></span></dt><dd><dl><dt><span class="chapter"><a href="#gc">31. Overview of <span><b class="command">CLISP</b></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">31.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">31.2. Lisp objects in <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#memory-models">31.3. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">31.4. The burden of garbage-collection upon the rest of <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">31.5. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">32. Extending <span><b class="command">CLISP</b></span>.</a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">32.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">32.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">32.3. Recompilation.</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">33. The <span><b class="command">CLISP</b></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">33.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">33.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">33.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">33.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">33.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">33.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">33.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">33.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">33.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">33.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">33.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">33.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">33.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">33.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">33.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">33.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">33.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">33.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">33.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">33.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">33.5.17. Shortcut instructions</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="appendix"><a href="#gfdl">A. GNU Free Documentation License</a></span></dt><dd><dl><dt><span class="section"><a href="#gfdl-0">A.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">A.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">A.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">A.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">A.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">A.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">A.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">A.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">A.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">A.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">A.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">A.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></dd><dt><span class="index"><a href="#idx">Index</a></span></dt><dt><span class="bibliography"><a href="#references">References</a></span></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>5.1. <a href="#values-limits-table">Function call limits</a></dt><dt>12.1. <a href="#bool-op-table">Boolean Operations</a></dt><dt>12.2. <a href="#fixnum-lim-table">Fixnum limits</a></dt><dt>13.1. <a href="#standard-char-table">Standard characters</a></dt><dt>13.2. <a href="#semi-standard-char-table">Semi-standard characters</a></dt><dt>13.3. <a href="#extra-named-chars-table">Additional Named Characters</a></dt><dt>13.4. <a href="#ctrl-char-table">Additional syntax for characters with code from
   #x00 to #x1F:</a></dt><dt>13.5. <a href="#char-code-limit-table">Number of characters</a></dt><dt>13.6. <a href="#dos-win32-chars-table">Platform dependent characters: <strong>Win32</strong> platforms.</a></dt><dt>13.7. <a href="#unix-chars-table">Platform dependent characters: <strong>UNIX</strong> platforms.</a></dt><dt>13.8. <a href="#char-bits-table">Character bit constants (obsolete)</a></dt><dt>15.1. <a href="#array-limit-table">Array limits</a></dt><dt>19.1. <a href="#min-filename-syntax-table">The minimum filename syntax that may be used portably</a></dt><dt>23.1. <a href="#unreadable-objects-table">Unreadable objects</a></dt><dt>25.1. <a href="#debugger-main-deb-step">Commands common to the main loop, the debugger and the stepper</a></dt><dt>25.2. <a href="#debugger-deb-step">Commands common to the debugger and the stepper</a></dt><dt>25.3. <a href="#debugger-deb-step-1">Commands common to the debugger and the stepper</a></dt><dt>25.4. <a href="#debugger-eval-apply">Commands specific to <tt class="function">EVAL</tt>/<tt class="function">APPLY</tt></a></dt><dt>25.5. <a href="#debugger-deb">Commands specific to the debugger</a></dt><dt>25.6. <a href="#debugger-step">Commands specific to the stepper</a></dt><dt>25.7. <a href="#internal-time-units-table">Time granularity</a></dt><dt>31.1. <a href="#mem-models-comb-typecodes">Memory models with TYPECODES</a></dt><dt>31.2. <a href="#mem-models-comb-no-typecodes">Memory models with no TYPECODES</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>29.1. <a href="#i18n-non-i">prog.lisp</a></dt><dt>29.2. <a href="#i18n-i">prog.lisp</a></dt><dt>29.3. <a href="#i18n-i-abbrev">prog.lisp</a></dt><dt>29.4. <a href="#i18n-pot">prog.pot</a></dt><dt>29.5. <a href="#i18n-fr-po">prog.fr.po</a></dt><dt>30.1. <a href="#ex-re-match"><tt class="function">REGEXP:MATCH</tt></a></dt><dt>30.2. <a href="#ex-re-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a></dt><dt>30.3. <a href="#re-example-lisp">shell-count.lisp</a></dt><dt>30.4. <a href="#re-example-perl">shell-count.perl</a></dt><dt>30.5. <a href="#dffi-simple">Simple declarations and access</a></dt><dt>30.6. <a href="#dffi-extern-var">external <span><b class="command">C</b></span> variable and some accesses</a></dt><dt>30.7. <a href="#dffi-extern-func1">Calling an external function</a></dt><dt>30.8. <a href="#dffi-extern-func2">Another example for calling an external function</a></dt><dt>30.9. <a href="#ex-call-in">Calling Lisp from <span><b class="command">C</b></span></a></dt><dt>30.10. <a href="#ex-call-in-dll">Calling Lisp from <span><b class="command">C</b></span> dynamically</a></dt><dt>30.11. <a href="#dffi-gethostname">Variable size arguments:
  calling <tt class="function">gethostname</tt> from <span><b class="command">CLISP</b></span></a></dt><dt>30.12. <a href="#affi-ex-1-predefined">Using a predefined library function file</a></dt><dt>30.13. <a href="#affi-ex-2-flibcall">Using flibcall</a></dt><dt>30.14. <a href="#affi-ex-3-dynamic">Be fully dynamic, defining library bases ourselves</a></dt><dt>30.15. <a href="#affi-ex-4-sample">Some sample function definitions</a></dt></dl></div><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="preface"></a>Overview</h2></div></div><div></div></div><p>These notes discuss the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> implementation of <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> by
</p><div class="blockquote"><a id="bruno-addr"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Bruno's address</b></p></div><div class="address"><p><br />
 <span class="honorific">Dr</span> <span class="firstname">Bruno</span> <span class="surname">Haible</span><br />
 <span class="street">Louisenstraße 103</span><br />
 <span class="city">Bad Homburg</span><br />
 <span class="postcode">D-61348</span> <span class="country">Germany</span><br />
 <span class="otheraddr"><a href="http://www.haible.de/bruno/" target="_top">http://www.haible.de/bruno/</a></span><br />
</p></div></blockquote></div><p>
 and
</p><div class="blockquote"><a id="stoll-addr"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Michael's address</b></p></div><div class="address"><p><br />
 <span class="honorific">Dr</span> <span class="firstname">Michael</span> <span class="surname">Stoll</span><br />
 <span class="street">Westerwaldweg 22</span><br />
 <span class="city">Remagen-Oberwinter</span><br />
 <span class="postcode">D-53424</span> <span class="country">Germany</span><br />
 <span class="otheraddr"><a href="http://www.math.uni-duesseldorf.de/~stoll/" target="_top">http://www.math.uni-duesseldorf.de/~stoll/</a></span><br />
</p></div></blockquote></div><p>
The current maintainers are
</p><div class="blockquote"><a id="bruno-addr1"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Bruno's title</b></p></div><div class="address"><p><br />
  <span class="honorific">Dr</span> <span class="firstname">Bruno</span> <span class="surname">Haible</span><br />
</p></div></blockquote></div><p>
and
</p><div class="blockquote"><a id="sds-addr"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Sam's address</b></p></div><div class="address"><p><br />
  <span class="honorific">Dr</span> <span class="firstname">Sam</span> <span class="surname">Steingold</span><br />
  <span class="otheraddr"><a href="http://www.podval.org/~sds/" target="_top">http://www.podval.org/~sds/</a></span><br />
</p></div></blockquote></div><p>
</p><p>This implementation is mostly conforming to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 available on-line as the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] (but the printed ANSI document
 remains the authoritative source of information).  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] supersedes
 the earlier specifications [<span class="citation"><a href="#CLtL1">CLtL1</a></span>] and [<span class="citation"><a href="#CLtL2">CLtL2</a></span>].</p><p>The <a href="#clhs-chapters" title="Part&#xA0;I.&#xA0;Chapters or the Common Lisp HyperSpec">first part</a> of these notes
 is indexed in parallel to the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] and documents how <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 implements the standard [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p><p>The <a href="#extensions" title="Part&#xA0;II.&#xA0;Extensions">second part</a> documents the
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extensions, i.e., the functionality that goes beyond the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirements.</p><p>The <a href="#internals" title="Part&#xA0;III.&#xA0;Internals of the CLISP Implementation">third part</a> is intended mostly
 for developers as it documents the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> internals, e.g., <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion,
 adding new built-ins, and the bytecodes generated by the compiler
 (i.e., what is printed by <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a>).</p></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="clhs-chapters"></a>Chapters or the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>]</h1></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#class-prec">1.3. Class Precedence Lists
  [CLHS-1.4.4.5]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.4. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#double-quote">2.4. Double-Quote
  [CLHS-2.4.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt>.</a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-int">4.7. Integrating Types and Classes
  [CLHS-4.3.7]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.8. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.8.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro EXT:FCASE</a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function EXT:XOR</a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
   [CLHS-6]</a></span></dt><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt><dt><span class="section"><a href="#meth-combo">7.2. Declarative Method Combination
  [CLHS-7.6.6.3]</a></span></dt><dt><span class="section"><a href="#obj-dict">7.3. The Objects Dictionary
  [CLHS-7.7]</a></span></dt><dd><dl><dt><span class="section"><a href="#class-proto">7.3.1. Generic function <tt class="function">CLOS:CLASS-PROTOTYPE</tt>.</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  COMMON-LISP-USER Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-pack">11.4.1. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.2. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.1. Attributes</a></span></dt><dt><span class="section"><a href="#char-script">13.2. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.3. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dt><span class="section"><a href="#graph-char">13.4. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.5. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.6. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.7. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.8. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.9. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.10. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.11. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.12. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.13. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.14. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.15. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
   [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.2. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.3. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.4. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.2. pathnames</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.3. Miscellaneous Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="intro"></a>Chapter 1. Introduction
  <a href="http://www.lisp.org/HyperSpec/Body/chap-1.html" target="_top">[CLHS-1]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#class-prec">1.3. Class Precedence Lists
  [CLHS-1.4.4.5]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.4. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="spec-symb"></a>1.1. Special Symbols
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html" target="_top">[CLHS-1.4.1.3]</a></h2></div></div><div></div></div><p>The final delimiter of an interactive stream: On <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, the user
 has to type <span><b class="keycap">Control</b></span>-<span class="keysym">D</span> at the
 beginning of a line. On <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>, the user has to type
 <span><b class="keycap">Control</b></span>-<span class="keysym">Z</span>, followed
 by <span><b class="keycap">Return</b></span>.  This final delimiter is never actually
 seen by programs; no need to test for <span class="keysym">#\^D</span> or
 <span class="keysym">#\^Z</span> - use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a> to check for end of
 stream.  Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><tt class="function">CLEAR-INPUT</tt></a> on the stream removes the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> state,
 thus making it available for further input.</p><p>A newline character can be entered by the user by pressing the
 <span><b class="keycap">Newline</b></span> key or, on the numeric keypad, the
 <span><b class="keycap">Enter</b></span> key.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="error-terms"></a>1.2. Error Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html" target="_top">[CLHS-1.4.2]</a></h2></div></div><div></div></div><p>Safety settings are ignored; therefore where the standard uses the
 phrase “<span class="quote">should signal an error</span>”,
 an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="class-prec"></a>1.3. Class Precedence Lists
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-4-5.html" target="_top">[CLHS-1.4.4.5]</a></h2></div></div><div></div></div><p>The class precedence lists of the system classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><tt class="classname">CLASS</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><tt class="classname">STANDARD-METHOD</tt></a> contain the class <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>
 instead of the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cl-symb"></a>1.4. Symbols in the Package <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-9.html" target="_top">[CLHS-1.9]</a></h2></div></div><div></div></div><p>The 6 symbols missing from the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> package
 (out of 978 specified by the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]):</p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><tt class="function">DEFINE-METHOD-COMBINATION</tt></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html" target="_top"><tt class="function">INVALID-METHOD-ERROR</tt></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">MAKE-METHOD</tt></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html" target="_top"><tt class="function">METHOD-COMBINATION-ERROR</tt></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a></td></tr></table></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="syntax"></a>Chapter 2. Syntax
   <a href="http://www.lisp.org/HyperSpec/Body/chap-2.html" target="_top">[CLHS-2]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#reader-alg">2.1. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.2. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.3. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#double-quote">2.4. Double-Quote
  [CLHS-2.4.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="reader-alg"></a>2.1. Reader Algorithm
   <a href="http://www.lisp.org/HyperSpec/Body/sec_2-2.html" target="_top">[CLHS-2.2]</a></h2></div></div><div></div></div><p>The requirement of step 4 that a
 “<span class="quote"><a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#reader_macro_function" target="_top">reader
  macro function</a> may return zero values or one value</span>”
 <strong>is</strong> enforced.
 You can use the function <a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><tt class="function">VALUES</tt></a> to control the number of values
 returned.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tokens"></a>2.2. Symbols as Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html" target="_top">[CLHS-2.3.4]</a></h2></div></div><div></div></div><p>A "reserved token", i.e., a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#token" target="_top">token</a> that has
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#potential_number" target="_top">potential number</a>
 syntax but cannot be interpreted as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>, is interpreted as
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> when being read.</p><p>When creating a symbol from a token, no character attributes are
 removed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="valid-patterns"></a>2.3. Valid Patterns for Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html" target="_top">[CLHS-2.3.5]</a></h2></div></div><div></div></div><p>When a token with package markers is read, then no checking is
 done whether the package part and the symbol-name part do not have
 number syntax. (What's the purpose of this check?) So we consider
 tokens like <span class="token">USER::</span> or <span class="token">:1</span> or
 <span class="token">LISP::4711</span> or <span class="token">21:3</span> as symbols.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="double-quote"></a>2.4. Double-Quote
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-5.html" target="_top">[CLHS-2.4.5]</a></h2></div></div><div></div></div><p>When a string is read, no character attributes are removed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="backquote"></a>2.5. Backquote
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html" target="_top">[CLHS-2.4.6]</a></h2></div></div><div></div></div><p>The backquote read macro also works when nested. Example:
</p><div class="informalexample"><a id="bq-nested"></a><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> ``(,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',a) ,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> `(list #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',a) #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> (list 'list (list 'function (list 'lambda nil (list 'quote a)))
                     (list 'function (list 'lambda nil (list 'quote b)))))
</pre></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sharpsign"></a>2.6. Sharpsign
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html" target="_top">[CLHS-2.4.8]</a></h2></div></div><div></div></div><p>Reader macros are also defined for the following:
</p><div class="variablelist"><a id="extra-read-macro-table"></a><p class="title"><b>Additional reader macros</b></p><dl><dt>#,</dt><dd>load-time evaluation, kept despite the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue
    <a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a>
 </dd><dt>#Y</dt><dd>function objects and file <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>s
 </dd><dt>#""</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a></dd></dl></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="eval"></a>Chapter 3. Evaluation and Compilation
   <a href="http://www.lisp.org/HyperSpec/Body/chap-3.html" target="_top">[CLHS-3]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt>.</a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></dd></dl></div><p>All the functions built by <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a> and the like are
 atoms.  There are built-in functions written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, compiled
 functions (both of type <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><tt class="classname">COMPILED-FUNCTION</tt></a>) and interpreted
 functions (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="evaluation"></a>3.1. Evaluation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1.html" target="_top">[CLHS-3.1]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-environ"></a>3.1.1. Introduction to Environments
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1.html" target="_top">[CLHS-3.1.1]</a></h3></div></div><div></div></div><p><a id="the-env"></a><b>Macro <a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a>. </b>As in Scheme, the macro <tt class="sexp">(<a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a>)</tt>
 returns the current lexical environment.  This works only in
 interpreted code and is not compilable!</p><p><a id="eval-env"></a><b>Function <tt class="sexp">(EXT:EVAL-ENV
 <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>env</tt></i>)</tt>. </b>evaluates a form in a given lexical environment, just as if the
 form had been a part of the program that the environment came from.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="compilation"></a>3.2. Compilation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2.html" target="_top">[CLHS-3.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-terms"></a>3.2.1. Compiler Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-1.html" target="_top">[CLHS-3.2.1]</a></h3></div></div><div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> compiles to platform-independent
 <a href="#bytecode" title="Chapter&#xA0;33.&#xA0;The CLISP bytecode specification">byte-code</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-macros"></a>3.2.2. Compiler Macros
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-2-1.html" target="_top">[CLHS-3.2.2.1]</a></h3></div></div><div></div></div><p>Compiler macros are expanded in the compiled code only, and
ignored by the interpreter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="similarity"></a>3.2.3. Definition of Similarity
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-2-2.html" target="_top">[CLHS-3.2.4.2.2]</a></h3></div></div><div></div></div><p>Hash tables are <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#externalizable_object" target="_top">externalizable
 object</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="declarations"></a>3.3. Declarations
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-3.html" target="_top">[CLHS-3.3]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compile-decl">3.3.1. Additional declarations</a></span></dt></dl></div><p>The declarations
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/dec_type.html" target="_top"><tt class="literal">TYPE</tt></a> <i class="replaceable"><tt>type</tt></i> <i class="replaceable"><tt>variable</tt></i> ...)</tt>,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html" target="_top"><tt class="literal">FTYPE</tt></a> <i class="replaceable"><tt>type</tt></i>
        <i class="replaceable"><tt>function</tt></i> ...)</tt>,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><tt class="literal">OPTIMIZE</tt></a> (<i class="replaceable"><tt>quality</tt></i>
        <i class="replaceable"><tt>value</tt></i>) ...)</tt>
   are ignored by the interpreter and the compiler.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] declaration <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><tt class="literal">OPTIMIZE</tt></a>
 (debug ...))</tt> is legal.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] declaration <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/dec_ignorecm_ignorable.html" target="_top"><tt class="literal">IGNORABLE</tt></a>
 <i class="replaceable"><tt>variable</tt></i> ...)</tt> affects the variable
 binding for the variable <i class="replaceable"><tt>variable</tt></i>.  The compiler
 will not warn about the variable, regardless whether it is used or
 not.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-decl"></a>3.3.1. Additional declarations</h3></div></div><div></div></div><p>The declaration <tt class="sexp">(COMPILE)</tt> has the
 effect that the current form is compiled prior to execution.
 Examples:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><tt class="function">DECLARE</tt></a> (compile)) <i class="replaceable"><tt>form</tt></i>)
</pre></td></tr></table><p>
executes a compiled version of form.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> ((x 0))
  (<a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">FLET</tt></a> ((inc () (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><tt class="function">DECLARE</tt></a> (compile)) (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><tt class="function">INCF</tt></a> x))
         (dec () (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><tt class="function">DECF</tt></a> x)))
    (<a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><tt class="function">VALUES</tt></a> #'inc #'dec)))
</pre></td></tr></table><p>
 returns two functions.  The first is compiled and increments <i class="replaceable"><tt>x</tt></i>, the
 second is interpreted (slower) and decrements the same <i class="replaceable"><tt>x</tt></i>.</p><p>The type assertion <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><tt class="function">THE</tt></a> <i class="replaceable"><tt>value-type</tt></i>
 <i class="replaceable"><tt>form</tt></i>)</tt> enforces a type check in interpreted code.
 No type check is done in compiled code.  See also the <a href="#ethe"><tt class="function">EXT:ETHE</tt></a> macro.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lalist"></a>3.4. Lambda Lists
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4.html" target="_top">[CLHS-3.4]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="boa-lalist"></a>3.4.1. Boa Lambda Lists
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html" target="_top">[CLHS-3.4.6]</a></h3></div></div><div></div></div><p>The initial value of an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;AUX</tt></a> variable in a boa <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is
 the value of the corresponding slot's initial form.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="eval-comp"></a>3.5. The Evaluation and Compilation Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_evalu_n_dictionary.html" target="_top">[CLHS-3.8]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#spec-decl">3.5.1. Declaration <tt class="literal">SPECIAL</tt></a></span></dt><dt><span class="section"><a href="#constantp">3.5.2. Function <tt class="function">CONSTANTP</tt>.</a></span></dt><dt><span class="section"><a href="#eval-when">3.5.3. Macro <tt class="function">EVAL-WHEN</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="spec-decl"></a>3.5.1. Declaration <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html" target="_top"><tt class="function">PROCLAIM</tt></a> '(<a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a>
 <i class="replaceable"><tt>variable</tt></i>))</tt> declarations cannot be undone.  The same holds for
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFPARAMETER</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> declarations.</p><p>It is an error if a <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> variable is bound at the moment
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> is executed, but <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a> does not check
 this.</p><p><a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable" target="_top">constant variable</a>s may not be bound dynamically or lexically.</p><p><a id="spe-var-p"></a><b>Function <a href="#spe-var-p"><tt class="function">EXT:SPECIAL-VARIABLE-P</tt></a>. </b>You can use the function <tt class="sexp">(<a href="#spe-var-p"><tt class="function">EXT:SPECIAL-VARIABLE-P</tt></a>
  <i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>env</tt></i>)</tt> to check whether the
 symbol is a special variable.  <i class="replaceable"><tt>env</tt></i> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or omitted means use
 the global environment, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> means use current lexical environment.
 You can also obtain the current lexical environment using the macro
 <a href="#the-env"><tt class="function">EXT:THE-ENVIRONMENT</tt></a> (interpreted code only).
 This function will always return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for global special
 variables and constants.
 Note that this function will not work in compiled code as you expect:
 when called with <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <i class="replaceable"><tt>env</tt></i>, it will be called at <span class="emphasis"><em>run
  time</em></span> and check for globally special variables,
 but when <i class="replaceable"><tt>env</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, it will be called at <span class="emphasis"><em>compile
  time</em></span> and the value will be used as a constant in the
 code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="constantp"></a>3.5.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a>.</h3></div></div><div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a> fully complies with [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
Additionally, some non-trivial forms are identified as constants, e.g.,
<tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><tt class="function">CONSTANTP</tt></a> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> 1 2 3))</tt> returns
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-when"></a>3.5.3. Macro <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> also accepts the situations <tt class="sexp">(NOT
 EVAL)</tt> and <tt class="sexp">(NOT COMPILE)</tt>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Note that the situations <tt class="constant">EVAL</tt>,
 <tt class="constant">LOAD</tt> and <tt class="constant">COMPILE</tt> are
 deprecated by the spec, and they are <span class="emphasis"><em>not</em></span> equivalent to the new
 standard situations <tt class="constant">:EXECUTE</tt>,
 <tt class="constant">:LOAD-TOPLEVEL</tt>
 and <tt class="constant">:COMPILE-TOPLEVEL</tt> in that they ignore the
 top-level versus non-top-level distinction.</p></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="types-classes"></a>Chapter 4. Types and Classes
   <a href="http://www.lisp.org/HyperSpec/Body/chap-4.html" target="_top">[CLHS-4]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-int">4.7. Integrating Types and Classes
  [CLHS-4.3.7]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.8. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.8.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="types"></a>4.1. Types
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2.html" target="_top">[CLHS-4.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="type-spec"></a>4.1.1. Type Specifiers
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2-3.html" target="_top">[CLHS-4.2.3]</a></h3></div></div><div></div></div><p>The general form of the <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> type specifier is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <i class="replaceable"><tt>type-of-real-part</tt></i>
 <i class="replaceable"><tt>type-of-imaginary-part</tt></i>)</tt>.  The type
 specifier <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <i class="replaceable"><tt>type</tt></i>)</tt> is
 equivalent to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <i class="replaceable"><tt>type</tt></i>
 <i class="replaceable"><tt>type</tt></i>)</tt>.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] type specifier <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>
 <i class="replaceable"><tt>low</tt></i> <i class="replaceable"><tt>high</tt></i>)</tt>
 denotes the real numbers between <i class="replaceable"><tt>low</tt></i> and
 <i class="replaceable"><tt>high</tt></i>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_deftype.html" target="_top"><tt class="function">DEFTYPE</tt></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are subject to destructuring (nested <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s
 are allowed, as in <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a>) and may contain a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;WHOLE</tt></a> marker,
 but not an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> marker.</p><p><b>Function
  <tt class="sexp">(<tt class="function">EXT:TYPE-EXPAND</tt>
   <i class="replaceable"><tt>typespec</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
   <i class="replaceable"><tt>once-p</tt></i>)</tt>. </b>If <i class="replaceable"><tt>typespec</tt></i> is a user-defined type,
 this will expand it recursively until it is no longer a user-defined
 type (unless <i class="replaceable"><tt>once-p</tt></i> is supplied and
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>).  Two values are returned - the expansion and an indicator
 (<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>) of whether the original
 <i class="replaceable"><tt>typespec</tt></i> was a user-defined type.
</p><div class="itemizedlist"><p class="title"><b>The possible results of <a href="http://www.lisp.org/HyperSpec/Body/fun_type-of.html" target="_top"><tt class="function">TYPE-OF</tt></a></b></p><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><tt class="classname">BIGNUM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><tt class="classname">BASE-CHAR</tt></a></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> <i class="replaceable"><tt>element-type</tt></i>
  <i class="replaceable"><tt>dimensions</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html" target="_top"><tt class="classname">SIMPLE-ARRAY</tt></a>
  <i class="replaceable"><tt>element-type</tt></i> <i class="replaceable"><tt>dimensions</tt></i>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_base-string.html" target="_top"><tt class="classname">BASE-STRING</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-base-string.html" target="_top"><tt class="classname">SIMPLE-BASE-STRING</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt></li><li><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><tt class="classname">BIT-VECTOR</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><tt class="classname">SIMPLE-BIT-VECTOR</tt></a>
  <i class="replaceable"><tt>size</tt></i>)</tt></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><tt class="classname">COMPILED-FUNCTION</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><tt class="classname">CONCATENATED-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><tt class="classname">ECHO-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><tt class="classname">RANDOM-STATE</tt></a>, <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a></li><li><tt class="classname">SPECIAL-OPERATOR</tt>,
  <tt class="classname">LOAD-TIME-EVAL</tt>, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>, <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>,
  <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>,
  <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>;, <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a></li><li><a href="#weak" title="29.6.&#xA0;Extensions-1.6. Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><tt class="classname">READ-LABEL</tt></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><tt class="classname">FRAME-POINTER</tt></a>,
   <tt class="classname">SYSTEM-INTERNAL</tt></li><li><tt class="classname">ADDRESS</tt> (should not
  occur)</li><li>any other <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (structure types or <span><b class="command">CLOS</b></span>
  classes)</li><li>a class object (<span><b class="command">CLOS</b></span> classes without a proper
  name)</li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="classes"></a>4.2. Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3.html" target="_top">[CLHS-4.3]</a></h2></div></div><div></div></div><p>The <span><b class="command">CLOS</b></span> symbols are <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed from the package <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> uses (as in <a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a>) <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> and <a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>s the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] standard exported symbols (the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extensions, e.g.,
 <a href="#class-proto" title="7.3.1.&#xA0;Generic function CLOS:CLASS-PROTOTYPE."><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a>, are <span class="emphasis"><em>not</em></span> <a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>ed).
 Since <a href="#make-pack" title="11.4.1.&#xA0;Function MAKE-PACKAGE">the default <tt class="constant">:USE</tt> argument</a>
 to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>, the standard <span><b class="command">CLOS</b></span> symbols are normally
 visible in all user-defined packages.
 If you do not want them (for example, if you want to use the
 <a href="ftp://cvs2.cons.org/pub/lisp/clisp/packages/pcl.sept92f.clisp.tar.gz" target="_top">PCL</a>
 implementation of <span><b class="command">CLOS</b></span> instead of the native one), do the following:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "CL-NO-CLOS" (:use "CL"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><tt class="function">DO-EXTERNAL-SYMBOLS</tt></a> (<i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_shadow.html" target="_top"><tt class="function">SHADOW</tt></a> <i class="replaceable"><tt>symbol</tt></i> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><tt class="function">DO-SYMBOLS</tt></a> (<i class="replaceable"><tt>symbol</tt></i> "CL-NO-CLOS")
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a> <i class="replaceable"><tt>symbol</tt></i> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "CL-NO-CLOS")
(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> "pcl") ; or whatever
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "MY-USER" (:use "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "MY-USER")
;; your code which uses PCL goes here
</pre></td></tr></table><p>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clos-diff"></a>4.3. Deviations from [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</h2></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> supports the option <tt class="constant">:METACLASS</tt> <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a>.
 This option is necessary in order to define a subclass of a
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a>-defined structure type using <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> instead of
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a>.</p><p>When <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> is called with arguments, the rule that
 the ordered set of applicable methods must be the same as for the
 original arguments is enforced by the implementation only in
 interpreted code.</p><p><strong class="first"><i class="firstterm"><a href="#gen-flet"><tt class="function">CLOS:GENERIC-FLET</tt></a><a id="gen-flet" class="indexterm"></a></i></strong>
 and
 <strong class="first"><i class="firstterm"><a href="#gen-labels"><tt class="function">CLOS:GENERIC-LABELS</tt></a><a id="gen-labels" class="indexterm"></a></i></strong>
 are implemented as macros, not as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>).
 They are not imported into the packages <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> and <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> because
 of the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><tt class="function">ADD-METHOD</tt></a> can put methods into other generic functions
 than the one the method came from.</p><p><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><tt class="function">PRINT-OBJECT</tt></a> is only called on objects of type
 <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>.
 It is not called on other objects, like <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es
 and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s, due to the performance concerns.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="metaclasses"></a>4.4. Standard Metaclasses
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html" target="_top">[CLHS-4.3.1.1]</a></h2></div></div><div></div></div><p>Among those classes listed in <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html#classtypecorrespondence" target="_top">Figure
 4-8</a>, only the following are instances of <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><tt class="classname">BUILT-IN-CLASS</tt></a>:

</p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><tt class="classname">SEQUENCE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><tt class="classname">BIT-VECTOR</tt></a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><tt class="classname">STANDARD-GENERIC-FUNCTION</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>
  </li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><tt class="classname">RANDOM-STATE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><tt class="classname">CONCATENATED-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><tt class="classname">ECHO-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="def-class"></a>4.5. Defining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html" target="_top">[CLHS-4.3.2]</a></h2></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> supports the <tt class="constant">:METACLASS</tt> option.  Possible values are
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a> (the default) and <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> (which creates
 structure classes, like <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a> does).</p><p>It is <span class="emphasis"><em>not</em></span> required that the superclasses of a class are
 defined before the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><tt class="function">DEFCLASS</tt></a> form for the class is evaluated.
 Use [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] generic functions
 <strong class="first"><i class="firstterm"><a href="#class-fin-p"><tt class="function">CLOS:CLASS-FINALIZED-P</tt></a><a id="class-fin-p" class="indexterm"></a></i></strong>
 to check whether the class has been finalized and thus its instances
 can be created, and
 <strong class="first"><i class="firstterm"><a href="#fin-inher"><tt class="function">CLOS:FINALIZE-INHERITANCE</tt></a><a id="fin-inher" class="indexterm"></a></i></strong>
 to force class finalization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="redef-class"></a>4.6. Redefining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html" target="_top">[CLHS-4.3.6]</a></h2></div></div><div></div></div><p>Trivial changes, e.g., those that can occur when doubly loading
 the same code, do not require updating the instances.
 These are the changes that do not modify the set of local slots
 accessible in instances, e.g., changes to slot options
 <tt class="constant">:INITFORM</tt>, <tt class="constant">:DOCUMENTATION</tt>,
 and changes to class options <tt class="constant">:DEFAULT-INITARGS</tt>,
 <tt class="constant">:DOCUMENTATION</tt>.</p><p>The instances are updated when they are first accessed, <span class="emphasis"><em>not</em></span> at
 the time when the class is redefined or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html" target="_top"><tt class="function">MAKE-INSTANCES-OBSOLETE</tt></a> is
 called.  When the class has been redefined several times since the
 instance was last accessed, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><tt class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> is
 still called just once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="type-class-int"></a>4.7. Integrating Types and Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html" target="_top">[CLHS-4.3.7]</a></h2></div></div><div></div></div><p>The class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a> is not implemented.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="type-class-dict"></a>4.8. The Types and Classes Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html" target="_top">[CLHS-4.4]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.8.1. Function <tt class="function">COERCE</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-char-ansi"></a>4.8.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#character_designator" target="_top">character
  designator</a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], although <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> provides an
  obvious venue to <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> a <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.
  When <a href="#fixnum-char-ansi" title="4.8.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>s <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s to
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s via <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a>.
  When <a href="#fixnum-char-ansi" title="4.8.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s cannot be
  <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>d to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="data"></a>Chapter 5. Data and Control Flow
   <a href="http://www.lisp.org/HyperSpec/Body/chap-5.html" target="_top">[CLHS-5]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro EXT:FCASE</a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function EXT:XOR</a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="flow-dict"></a>5.1. The Data and Control Flow Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html" target="_top">[CLHS-5.3]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fcase">5.1.1. Macro EXT:FCASE</a></span></dt><dt><span class="section"><a href="#xor">5.1.2. Function EXT:XOR</a></span></dt><dt><span class="section"><a href="#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></div><p><a id="fle"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html" target="_top"><tt class="function">FUNCTION-LAMBDA-EXPRESSION</tt></a>. </b>The <i class="replaceable"><tt>name</tt></i> of a <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> is a <span class="emphasis"><em>string</em></span>
(the name of the underlying <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function), not a lisp
<a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a>.
</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html" target="_top"><tt class="function">DESTRUCTURING-BIND</tt></a>. </b>This macro does not perform full error checking.</p><p><b>Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG2</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_and.html" target="_top"><tt class="function">AND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><tt class="function">PSETQ</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">UNLESS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_cond.html" target="_top"><tt class="function">COND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><tt class="function">MULTIPLE-VALUE-BIND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html" target="_top"><tt class="function">MULTIPLE-VALUE-SETQ</tt></a>. </b>These macros are implemented as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>)
 and, as such, are rather efficient.</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a>. </b>The initial value is <span class="emphasis"><em>not</em></span> evaluated at compile time,
 just like with <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFPARAMETER</tt></a>.
 Use <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> if you need the value at compile time.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcase"></a>5.1.1. Macro <tt class="function">EXT:FCASE</tt></h3></div></div><div></div></div><p>This macro allows specifying the test for <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, e.g.,
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</pre></td></tr></table><p>
is the same as
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</pre></td></tr></table><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="xor"></a>5.1.2. Function <tt class="function">EXT:XOR</tt></h3></div></div><div></div></div><p>This function checks that exactly one of its arguments is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
 and, if this is the case, returns its value and index in the argument
 list as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>, otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eq"></a>5.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> compares <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s as <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> does.
 No unnecessary copies are made of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s.
 Nevertheless, one should use <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> as it is more portable across <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>
 implementations.</p><p><tt class="sexp">(let ((x y)) (eq x x))</tt> always
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, regardless of <i class="replaceable"><tt>y</tt></i>.</p><p>Note that <tt class="sexp">(eq x x)</tt> might not be
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for a <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> <i class="replaceable"><tt>x</tt></i>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sym-fun"></a>5.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)
 <i class="replaceable"><tt>object</tt></i>)</tt> requires <i class="replaceable"><tt>object</tt></i> to be either a function, a
 <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> return value or a <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a>.  The <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a>
 is thereby immediately converted to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="setf"></a>5.1.5. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a></h3></div></div><div></div></div><p>Additional <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s:
</p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a></dt><dd><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> #'<i class="replaceable"><tt>symbol</tt></i> ...)
     <i class="replaceable"><tt>object</tt></i>)</tt>
    and
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> '<i class="replaceable"><tt>symbol</tt></i> ...)
     <i class="replaceable"><tt>object</tt></i>)</tt>
   are equivalent to
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<i class="replaceable"><tt>symbol</tt></i> ...) <i class="replaceable"><tt>object</tt></i>)</tt>.
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> <i class="replaceable"><tt>form</tt></i> ... <i class="replaceable"><tt>place</tt></i>)
                                <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a> <i class="replaceable"><tt>declaration</tt></i> ... <i class="replaceable"><tt>form</tt></i> ...
                                 <i class="replaceable"><tt>place</tt></i>) <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a> <i class="replaceable"><tt>condition</tt></i>
                                  <i class="replaceable"><tt>place<sub>1</sub></tt></i>
                                  <i class="replaceable"><tt>place<sub>2</sub></tt></i>)
                                <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a> ...)
     ...)</tt> calls <a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">SET-DISPATCH-MACRO-CHARACTER</tt></a>.
  </dd><dt><a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>:</dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) <i class="replaceable"><tt>digits</tt></i>)</tt> sets the
    default mantissa length of long floats to <i class="replaceable"><tt>digits</tt></i> bits.
   </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a>
       <i class="replaceable"><tt>list</tt></i>) <i class="replaceable"><tt>form</tt></i>)</tt>
    is equivalent to
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <i class="replaceable"><tt>list</tt></i>
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a> <i class="replaceable"><tt>form</tt></i>)))</tt>
  </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> markers in <a href="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html" target="_top"><tt class="function">DEFSETF</tt></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are supported, but the
 corresponding keywords must appear literally in the program text.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a> <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt>, <tt class="sexp">(EXT:GET-SETF-METHOD <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt>, and <tt class="sexp">(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt> receive as optional argument <i class="replaceable"><tt>env</tt></i>
 the environment necessary for macro expansions.  In
 <a href="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html" target="_top"><tt class="function">DEFINE-SETF-EXPANDER</tt></a> and <tt class="function">EXT:DEFINE-SETF-METHOD</tt>
 <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s, one can specify <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> and a variable, which will
 be bound to the environment.  This environment should be passed to all
 calls of <a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a>,
 <tt class="function">EXT:GET-SETF-METHOD</tt> and
 <tt class="function">EXT:GET-SETF-METHOD-MULTIPLE-VALUE</tt>.  If this is
 done, even local macros will be interpreted as places correctly.</p><p>Attempts to modify read-only data will <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</p><p>See also the <a href="#letf"><tt class="function">EXT:LETF</tt></a> and <a href="#letf"><tt class="function">EXT:LETF*</tt></a> macros.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="func"></a>5.1.6. Special Operator <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns the
 local function definition established by <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">FLET</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">LABELS</tt></a>, if it
 exists, otherwise the global function definition.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html" target="_top"><tt class="function">SPECIAL-OPERATOR-P</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt>
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.  If it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, then <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns the
 (useless) special operator handler.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="def-sym-mac"></a>5.1.7. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a></h3></div></div><div></div></div><p>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> establishes <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s with
 global scope (as opposed to <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s defined with
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><tt class="function">SYMBOL-MACROLET</tt></a>, which have local scope):
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> <i class="replaceable"><tt>symbol</tt></i>
 <i class="replaceable"><tt>expansion</tt></i>)</tt>.</p><p>The function
 <strong class="first"><i class="firstterm"><a href="#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a><a id="symbol-mex" class="indexterm"></a></i></strong>
 tests for a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>: If <i class="replaceable"><tt>symbol</tt></i> is defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>,
 <tt class="sexp">(<a href="#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns two
 values, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> and the expansion; otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_boundp.html" target="_top"><tt class="function">BOUNDP</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 returns the value of the expansion.  Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_set.html" target="_top"><tt class="function">SET</tt></a> on a symbol defined
 as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> calls <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> on the expansion.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html" target="_top"><tt class="function">MAKUNBOUND</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 removes the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> definition.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="lambda"></a>5.1.8. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a></h3></div></div><div></div></div><p><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html" target="_top"><tt class="constant">LAMBDA-LIST-KEYWORDS</tt></a>. </b><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;AUX</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;WHOLE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a>)
</tt></p><div class="table"><a id="values-limits-table"></a><p class="title"><b>Table 5.1. Function call limits</b></p><table summary="Function call limits" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html" target="_top"><tt class="constant">CALL-ARGUMENTS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html" target="_top"><tt class="constant">MULTIPLE-VALUES-LIMIT</tt></a></td><td align="center">2<sup>7</sup>=128</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html" target="_top"><tt class="constant">LAMBDA-PARAMETERS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defun"></a>5.1.9. Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> are allowed in non-toplevel positions. As
 an example, consider the old ([<span class="citation"><a href="#CLtL1">CLtL1</a></span>]) definition of <a href="http://www.lisp.org/HyperSpec/Body/fun_gensym.html" target="_top"><tt class="function">GENSYM</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&amp;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</pre></td></tr></table><p><a id="suppress-check-redef"></a><b>Variable <a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a>. </b>When <strong class="first"><i class="firstterm"><a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a></i></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> issues a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <span class="emphasis"><em>not</em></span> a good idea to set this variable to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="iteration"></a>Chapter 6. Iteration
   <a href="http://www.lisp.org/HyperSpec/Body/chap-6.html" target="_top">[CLHS-6]</a></h2></div></div><div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="objects"></a>Chapter 7. Objects
   <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top">[CLHS-7]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt><dt><span class="section"><a href="#meth-combo">7.2. Declarative Method Combination
  [CLHS-7.6.6.3]</a></span></dt><dt><span class="section"><a href="#obj-dict">7.3. The Objects Dictionary
  [CLHS-7.7]</a></span></dt><dd><dl><dt><span class="section"><a href="#class-proto">7.3.1. Generic function <tt class="function">CLOS:CLASS-PROTOTYPE</tt>.</a></span></dt></dl></dd></dl></div><p>Only the <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top"><tt class="function">STANDARD</tt></a> method combination is implemented.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="std-meth-combo"></a>7.1. Standard Method Combination
  <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top">[CLHS-7.6.6.2]</a></h2></div></div><div></div></div><p>Generic function
 <strong class="first"><i class="firstterm"><a href="#no-prim"><tt class="function">CLOS:NO-PRIMARY-METHOD</tt></a><a id="no-prim" class="indexterm"></a></i></strong>
 (similar to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><tt class="function">NO-APPLICABLE-METHOD</tt></a>) is called when there is an
 applicable method but no applicable <span class="emphasis"><em>primary</em></span>
 method.</p><p>The default methods for <a href="#no-prim"><tt class="function">CLOS:NO-PRIMARY-METHOD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><tt class="function">NO-APPLICABLE-METHOD</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><tt class="function">NO-NEXT-METHOD</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
 <strong class="first"><i class="firstterm"><a href="#meth-call-err"><tt class="classname">CLOS:METHOD-CALL-ERROR</tt></a>
  <a id="meth-call-err" class="indexterm"></a></i></strong>.
 You can find out more information about the error using functions
 <tt class="function">CLOS:METHOD-CALL-ERROR-GENERIC-FUNCTION</tt>,
 <tt class="function">CLOS:METHOD-CALL-ERROR-ARGUMENT-LIST</tt>, and
 (only for <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><tt class="function">NO-NEXT-METHOD</tt></a>)
 <tt class="function">CLOS:METHOD-CALL-ERROR-METHOD</tt>.
 Moreover, when the generic function has only one <span class="emphasis"><em>dispatching
 argument</em></span>, (i.e., such an argument that not all the
 corresponding parameter specializers are <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>), an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
 <strong class="first"><i class="firstterm"><a href="#meth-call-type-err"><tt class="classname">CLOS:METHOD-CALL-TYPE-ERROR</tt></a>
  <a id="meth-call-type-err" class="indexterm"></a></i></strong>
  is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed, additinally making <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><tt class="function">TYPE-ERROR-DATUM</tt></a> and
  <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><tt class="function">TYPE-ERROR-EXPECTED-TYPE</tt></a> available.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="meth-combo"></a>7.2. Declarative Method Combination
  <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-3.html" target="_top">[CLHS-7.6.6.3]</a></h2></div></div><div></div></div><p>User-defined method combination is not supported.
 The macros <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><tt class="function">DEFINE-METHOD-COMBINATION</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><tt class="function">CALL-METHOD</tt></a> and the
 functions <a href="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html" target="_top"><tt class="function">INVALID-METHOD-ERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html" target="_top"><tt class="function">METHOD-COMBINATION-ERROR</tt></a> are
 not implemented.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="obj-dict"></a>7.3. The Objects Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_7-7.html" target="_top">[CLHS-7.7]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#class-proto">7.3.1. Generic function <tt class="function">CLOS:CLASS-PROTOTYPE</tt>.</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="class-proto"></a>7.3.1. Generic function <a href="#class-proto" title="7.3.1.&#xA0;Generic function CLOS:CLASS-PROTOTYPE."><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a>.</h3></div></div><div></div></div><p>The [<span class="citation"><a href="#amop">Metaobject Protocol</a></span>] generic function <a href="#class-proto" title="7.3.1.&#xA0;Generic function CLOS:CLASS-PROTOTYPE."><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> is implemented.
 This allows non-consing access to slots with
 allocation <tt class="constant">:CLASS</tt>:
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (defclass counter ()
    ((count :allocation :class :initform 0 :reader how-many)))
  (defmethod initialize-instance :after ((obj counter) &amp;rest args)
    (incf (slot-value obj 'count)))
  (defclass counted-object (counter) ((name :initarg :name)))
 </pre></td></tr></table><p>
 Now you can find out how many <tt class="classname">COUNTED-OBJECT</tt>s
 have been created by using
 <tt class="sexp">(HOW-MANY (<a href="#class-proto" title="7.3.1.&#xA0;Generic function CLOS:CLASS-PROTOTYPE."><tt class="function">CLOS:CLASS-PROTOTYPE</tt></a> 'COUNTER))</tt>:
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (make-instance 'counted-object :name 'foo)
    <span class="returnvalue">#&lt;COUNTED-OBJECT #x203028C9&gt;</span>
  (how-many (clos:class-prototype 'counter))
    <span class="returnvalue">1</span>
  (make-instance 'counted-object :name 'bar)
    <span class="returnvalue">#&lt;COUNTED-OBJECT #x20306CB1&gt;</span>
  (how-many (clos:class-prototype 'counter))
    <span class="returnvalue">2</span>
</pre></td></tr></table></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="structures"></a>Chapter 8. Structures
   <a href="http://www.lisp.org/HyperSpec/Body/chap-8.html" target="_top">[CLHS-8]</a></h2></div></div><div></div></div><p>The <tt class="constant">:PRINT-FUNCTION</tt> option should contain a <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a>
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> (object stream depth) (declare
 (ignore depth)) ...)</tt>
 This <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a> names a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> whose task is to output the
 external representation of the <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a> <i class="replaceable"><tt>object</tt></i> onto the
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <i class="replaceable"><tt>stream</tt></i>. This may be done by outputting text onto the
 stream using <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html" target="_top"><tt class="function">WRITE-STRING</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> and the like.
 The following rules must be obeyed:</p><div class="itemizedlist"><ul type="disc"><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a> must be
  respected.</li><li>The treatment of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is up to you.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html" target="_top"><tt class="varname">*PRINT-CIRCLE*</tt></a> need not be
  respected.  This is managed by the system.  (But the print-circle
  mechanism handles only those objects that are direct or indirect
  components of the structure.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LEVEL*</tt></a> is respected by
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><tt class="literal">~A</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><tt class="literal">~S</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><tt class="literal">~W</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><tt class="literal">~D</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><tt class="literal">~B</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><tt class="literal">~O</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><tt class="literal">~X</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> with not-numerical arguments.
  Therefore the print-level mechanism works automatically if only these
  functions are used for outputting objects and if they are not called
  on objects with nesting level &gt; 1. (The print-level mechanism does
  not recognize how many parentheses you have output. It only counts how
  many times it was called recursively.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LENGTH*</tt></a> must be respected,
  especially if you are outputting an arbitrary number of components.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> must be
  respected. Remember that the values of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LEVEL*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><tt class="varname">*PRINT-LENGTH*</tt></a> are ignored if
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true.  The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is
  respected by <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><tt class="function">PRINT-UNREADABLE-OBJECT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRIN1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PPRINT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><tt class="literal">~A</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><tt class="literal">~S</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><tt class="literal">~W</tt></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><tt class="literal">~D</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><tt class="literal">~B</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><tt class="literal">~O</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><tt class="literal">~X</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> with not-numerical arguments.  Therefore
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> will be respected automatically if only these
  functions are used for printing objects.</li><li>You need not worry about the values of
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-BASE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-RADIX*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><tt class="varname">*PRINT-CASE*</tt></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-gensymst.html" target="_top"><tt class="varname">*PRINT-GENSYM*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a>, <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>,
  <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a>, <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a>.</li></ul></div><p>The <tt class="constant">:INHERIT</tt> option is exactly like <tt class="constant">:INCLUDE</tt> except that it
 does not create new accessors for the inherited slots (this is a
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension).</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conditions"></a>Chapter 9. Conditions
   <a href="http://www.lisp.org/HyperSpec/Body/chap-9.html" target="_top">[CLHS-9]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></div><p>When an error occurred, you are in a break loop. You can evaluate
 forms as usual. The <span><b class="command">help</b></span> command (or help key if
 there is one) lists the available <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging
 commands</a>.</p><p><a id="muffle-cerrors"></a><b>Macro <a href="#muffle-cerrors"><tt class="function">EXT:MUFFLE-CERRORS</tt></a>. </b>The macro <tt class="sexp">(<a href="#muffle-cerrors"><tt class="function">EXT:MUFFLE-CERRORS</tt></a> {<i class="replaceable"><tt>form</tt></i>}*)</tt>
 executes the <i class="replaceable"><tt>form</tt></i>s.  When a continuable error occurs, no message is
 printed, instead, the <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><tt class="function">CONTINUE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><tt class="classname">RESTART</tt></a> is invoked.</p><p><a id="appease-cerrors"></a><b>Macro <a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a>. </b>The macro <tt class="sexp">(<a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a> {<i class="replaceable"><tt>form</tt></i>}*)</tt>
 executes the <i class="replaceable"><tt>form</tt></i>s.  Continuable errors are reported as warnings
 and the <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><tt class="function">CONTINUE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><tt class="classname">RESTART</tt></a> is invoked.</p><p><a id="exit-on-error"></a><b>Macro <a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a>. </b>The macro <tt class="sexp">(<a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a> {<i class="replaceable"><tt>form</tt></i>}*)</tt>
 executes the <i class="replaceable"><tt>form</tt></i>s.  When a non-continuable error or
 a <span><b class="keycap">Control</b></span>-<span class="keysym">C</span> interrupt occurs, the
 error message is printed and <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> terminates with an error
 status.</p><p><a id="with-restarts"></a><b>Macro <a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a>. </b>The macro <a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a>, except that the
 forms are specified after the restart clauses instead of before them,
 and the restarts created are not implicitly associated with any <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a>.
 <tt class="sexp">(<a href="#with-restarts"><tt class="function">EXT:WITH-RESTARTS</tt></a> ({<tt class="varname">restart-clause</tt>}*)
 {<i class="replaceable"><tt>form</tt></i>}*)</tt> is therefore equivalent to
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> {<i class="replaceable"><tt>form</tt></i>}*)
 {<tt class="varname">restart-clause</tt>}*)</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-nl"></a>9.1. Embedded Newlines in Condition Reports
   <a href="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html" target="_top">[CLHS-9.1.3.1.3]</a></h2></div></div><div></div></div><p>The error message prefix for the first line is "*** - ". There is
 no prefix for subsequent error lines. The aesthetics of <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a>
 reports containing an object which requires newlines when pretty
 printing is enabled, is undefined.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-dict"></a>9.2. The Conditions Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html" target="_top">[CLHS-9.2]</a></h2></div></div><div></div></div><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a>. </b>In <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> clauses the argument list can also be specified
 after the keyword/value pairs instead of before them.  The syntax
 therefore is

</p><div class="variablelist"><p class="title"><b>Macro <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> <i class="replaceable"><tt>form</tt></i>
 {<tt class="varname">restart-clause</tt>}*)</tt></b></p><dl><dt><tt class="varname">restart-clause</tt> ::==</dt><dd><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
   (<tt class="varname">restart-name</tt> <i class="replaceable"><tt>arglist</tt></i>
    {<tt class="varname">keyword-value</tt>}* {<i class="replaceable"><tt>form</tt></i>}*) |
   (<tt class="varname">restart-name</tt> {<tt class="varname">keyword-value</tt>}*
    <i class="replaceable"><tt>arglist</tt></i> {<i class="replaceable"><tt>form</tt></i>}*)
</pre></td></tr></table></dd></dl></div><p>
</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><tt class="function">COMPUTE-RESTARTS</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><tt class="function">COMPUTE-RESTARTS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_find-restart.html" target="_top"><tt class="function">FIND-RESTART</tt></a> behave as specified in
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: If the optional <i class="replaceable"><tt>condition</tt></i>
 argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, only restarts associated with that condition and
 restarts associated with no condition at all are considered.
 Therefore the effect of associating a restart to a condition is not to
 activate it, but to hide it from other conditions.
 This makes the syntax dependent implicit association performed by
 <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><tt class="function">RESTART-CASE</tt></a> nearly obsolete.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="symbols"></a>Chapter 10. Symbols
   <a href="http://www.lisp.org/HyperSpec/Body/chap-10.html" target="_top">[CLHS-10]</a></h2></div></div><div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="packages"></a>Chapter 11. Packages
   <a href="http://www.lisp.org/HyperSpec/Body/chap-11.html" target="_top">[CLHS-11]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  COMMON-LISP-USER Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#pack-dict">11.4. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-pack">11.4.1. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.2. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></dd></dl></div><div class="variablelist"><p class="title"><b>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] packages present in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></b></p><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL</span>”</strong>
    and <strong class="package">“<span class="quote">LISP</span>”</strong></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL-USER</span>”</strong>
    and <strong class="package">“<span class="quote">USER</span>”</strong></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a></dt><dd>with the nickname <strong class="package">“<span class="quote"></span>”</strong>
  </dd></dl></div><p>The package <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s only those symbols
 from the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] that are actually implemented.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-lock"></a>11.1. Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package
  for Conforming Programs - package locking
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">[CLHS-11.1.2.1.2]</a></h2></div></div><div></div></div><p><b>Function <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a>. </b><a id="pack-lock-f" class="indexterm"></a>
 Packages can be “<span class="quote">locked</span>”.
When a package is locked, attempts to change its symbol table or
redefine functions which its symbols name result in a continuable
<a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> (continuing overrides locking for this operation).
When <a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> (<span class="emphasis"><em>not</em></span> a good idea!), the <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
is not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed for redefine operations.
Function <tt class="sexp">(<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a> <i class="replaceable"><tt>package</tt></i>)</tt>
returns the generalized boolean indicating whether the <i class="replaceable"><tt>package</tt></i> is locked.
A package (or a list thereof) can be locked using <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="function">EXT:PACKAGE-LOCK</tt></a> <i class="replaceable"><tt>package-or-list</tt></i>)
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt>.
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> locks its system packages (specified in the variable
<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>).</p><p><b>Macro <a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a>. </b>If you want to evaluate some forms with certain packages unlocked,
 you can use
 <strong class="first"><i class="firstterm"><a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a>
  <a id="without-pack-lock" class="indexterm"></a></i></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> ("LISP" "EXT" "CLOS")
  (defun restart () ...))
</pre></td></tr></table><p>
or
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> ("LISP") (trace read-line))
</pre></td></tr></table><p>
<tt class="sexp">(<a href="#without-pack-lock"><tt class="function">EXT:WITHOUT-PACKAGE-LOCK</tt></a> () ...)</tt>
temporarily unlocks all packages in <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>.</p><p><b>Discussion - see also
  <a href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;selm=3C3E7F57.7F80395%40pacbell.net" target="_top">the USENET posting</a> by
  <span class="author"><span class="firstname">Steven M.</span> <span class="surname">Haflich</span></span>. </b>This should prevent you from accidentally hosing yourself with
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><tt class="function">DEFSTRUCT</tt></a> instance ...)
</pre></td></tr></table><p>
and allow enforcing modularity.
Note that you will also get the continuable error when you try to
assign (with <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><tt class="function">PSETQ</tt></a>, etc.) a value to an internal special
variable living in a locked package and not accessible in your current
<a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>, but only in the interpreted code and during compilation.
There is no check for package locks in compiled code because of the
performance considerations.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clupack"></a>11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top">[CLHS-11.1.2.2]</a></h2></div></div><div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package uses the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> and <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a> packages.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="imppack"></a>11.3. Implementation-Defined Packages
   <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html" target="_top">[CLHS-11.1.2.4]</a></h2></div></div><div></div></div><p>The following additional packages exist:</p><div class="variablelist"><p class="title"><b>Implementation-Defined Packages</b></p><dl><dt><a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s all <span><b class="command">CLOS</b></span>-specific symbols, including some
    <a href="#clos-diff" title="4.3.&#xA0;Deviations from ANSI CL standard">additional symbols</a>.
 </dd><dt><a id="sys-pac"></a><a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a></dt><dd>has the nicknames <strong class="package">“<span class="quote">SYS</span>”</strong>
    and <strong class="package">“<span class="quote">COMPILER</span>”</strong>, and has no
    <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed symbols.  It defines many system internals.
 </dd><dt><a id="ext-pac"></a><a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a></dt><dd>
    is the umbrella package for all extensions: it imports and <a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>s
    all the external symbols in all <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extensions, so a simple
    <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> "EXT")</tt> is enough to
    make all the extensions available in the current package.
    This package uses packages (in addition to <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>):
    <a href="#dir-key" title="30.2.6.2.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>, <a href="#syscalls" title="30.2.6.6.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a>, <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><strong class="package">“<span class="quote">SOCKET</span>”</strong></a>, <a href="#gstream" title="29.5.2.&#xA0;Generic streams"><strong class="package">“<span class="quote">GSTREAM</span>”</strong></a>, <a href="#gray" title="29.5.1.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a>,
    <a href="#i18n" title="29.3.&#xA0;Extensions-1.3. Internationalization"><strong class="package">“<span class="quote">I18N</span>”</strong></a>, <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>.</dd><dt><a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></dt><dd>defines and <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s some character sets, for use with
    <a href="#make-encoding" title="29.4.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> and as <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> argument.
 </dd><dt><a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a></dt><dd>implements the <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility">foreign function
     interface</a>.  Some platforms only.
 </dd><dt><a href="#screen" title="30.1.&#xA0;Extensions-2.1. Random Screen Access"><strong class="package">“<span class="quote">SCREEN</span>”</strong></a></dt><dd>defines an API for <a href="#screen" title="30.1.&#xA0;Extensions-2.1. Random Screen Access">random screen
     access</a>.  Some platforms only.
 </dd></dl></div><p>All pre-existing packages except <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> belong to the
 implementation, in the sense that the programs that do not follow
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">Section 11.1.2.1.2</a>
 ("Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package for Conforming Programs")
 cause undefined behavior.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-dict"></a>11.4. The Packages Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html" target="_top">[CLHS-11.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#make-pack">11.4.1. Function <tt class="function">MAKE-PACKAGE</tt></a></span></dt><dt><span class="section"><a href="#re-export">11.4.2. Function <tt class="function">EXT:RE-EXPORT</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-pack"></a>11.4.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a></h3></div></div><div></div></div><p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a>, the default value of the <tt class="constant">:USE</tt> argument is
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)</tt>.
</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> accepts a keyword argument <tt class="constant">:CASE-SENSITIVE</tt>.
 Similarly, <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> accepts an option <tt class="constant">:CASE-SENSITIVE</tt>.
 When its value is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the package will be case sensitive, i.e.,
 the reader will not case-convert symbol names before looking them up or
 creating them in this package.
 The package names are still subject to
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_streadtablest.html" target="_top"><tt class="varname">*READTABLE*</tt></a>)</tt>,
 though.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="re-export"></a>11.4.2. Function <a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a></h3></div></div><div></div></div><p>The function <tt class="sexp">(<a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a> <i class="replaceable"><tt>FROM-PACK</tt></i>
               <i class="replaceable"><tt>TO-PACK</tt></i>)</tt>
 re-<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>s all external <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s from
 <i class="replaceable"><tt>FROM-PACK</tt></i> also from
 <i class="replaceable"><tt>TO-PACK</tt></i>, provided it already uses
 <i class="replaceable"><tt>FROM-PACK</tt></i>; and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> otherwise.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="numbers"></a>Chapter 12. Numbers
   <a href="http://www.lisp.org/HyperSpec/Body/chap-12.html" target="_top">[CLHS-12]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-types"></a>12.1. Numeric Types</h2></div></div><div></div></div><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#exhaustive_partition" target="_top">“<span class="quote">exhaustive
 partition</span>”</a>)</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><tt class="classname">BIGNUM</tt></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-concepts"></a>12.2. Number Concepts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1.html" target="_top">[CLHS-12.1]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-type"></a>12.2.1. Byte Operations on Integers
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html" target="_top">[CLHS-12.1.1.3.2]</a></h3></div></div><div></div></div><p>Byte specifiers are objects of built-in type <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a>,
 not <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-subst"></a>12.2.2. Rule of Float Substitutability
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html" target="_top">[CLHS-12.1.3.3]</a></h3></div></div><div></div></div><p>When a mathematical function may return an exact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a>) or
 inexact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>) result, it always returns the exact result.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-comp"></a>12.2.3. Floating-point Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html" target="_top">[CLHS-12.1.4]</a></h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#flocont">12.2.3.1. Rule of Float Precision Contagion
   [CLHS-12.1.4.4]</a></span></dt></dl></div><p>There are four floating point types: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>:
</p><div class="informaltable"><a id="floating-types-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">type</th><th align="center">sign</th><th align="center">mantissa</th><th align="center">exponent</th><th align="center">comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">16+1 bits</td><td align="center">8 bits</td><td align="center">immediate</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">23+1 bits</td><td align="center">8 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">52+1 bits</td><td align="center">11 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a></td><td align="center">1 bit</td><td align="center">&gt;=64 bits</td><td align="center">32 bits</td><td align="center">variable
 length</td></tr></tbody></table></div><p>The single and double float formats are those of the <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>
 “<span class="quote">Standard for Binary Floating-Point Arithmetic</span>”,
 except that <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> does not support features like
 <tt class="literal">±0</tt>, <tt class="literal">±inf</tt>,
 <tt class="literal">NaN</tt>, gradual underflow, etc.
 <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> does not make use of these features, so, to reduce portability
 problems, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> by design returns the same floating point results on
 all platforms (<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> has a floating-point emulation built in for
 platforms that do not support <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>).  Note that
 </p><div class="itemizedlist"><ul type="disc"><li>When you got a <tt class="literal">NaN</tt>
    in your program, your program is broken, so you will spend time
    determining where the <tt class="literal">NaN</tt> came from.
    It is better to <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> in this case.</li><li>When you got unnormalized floats in your program,
    your results will have a greatly reduced accuracy anyway.
    Since <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> has the means to cope with this - <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s of
    <a href="#lfd">variable precision</a> - it does not
    need unnormalized floats.</li></ul></div><p>
 This is why <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> does not contain the
 <tt class="constant">:IEEE-FLOATING-POINT</tt> keyword.</p><p><a id="lfd"></a><b>Arbitrary Precision Floats. </b>Long floats have variable mantissa length, which is a
 multiple of 16 (or 32, depending on the word size of the processor).
 The default length used when long floats are read is given by the
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <tt class="sexp">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>.  It can be set by <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) <i class="replaceable"><tt>n</tt></i>)</tt>, where <i class="replaceable"><tt>n</tt></i> is a positive integer.
 E.g., <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) 3322)</tt> sets the
 default precision of long floats to about 1000 decimal digits.
</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="flocont"></a>12.2.3.1. Rule of Float Precision Contagion
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">[CLHS-12.1.4.4]</a></h4></div></div><div></div></div><p>The floating point contagion is controlled by the variable
 <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a>.  When it is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, contagion is done as per the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>.</p><div class="variablelist"><dl><dt>Rationale:</dt><dd>See it pragmatically: save what you can and let
  others worry about the rest.</dd><dt>Brief:</dt><dd><a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> knows the number's precision, not accuracy, so
  preserving the precision can be accomplished reliably, while anything
  relating to the accuracy is just a speculation - only the user
  (programmer) knows what it is in each case.
 </dd><dt>Detailed:</dt><dd>A computer float is an approximation of a real number.
  One can think of it as a random variable with the mean equal to
  itself and standard deviation equal to half the last significant digit.
  E.g., <tt class="literal">1.5</tt> is actually <tt class="literal">1.5±0.05</tt>.
  Consider adding <tt class="literal">1.5</tt> and <tt class="literal">1.75</tt>.
  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requires that <tt class="sexp">(+ 1.5 1.75)</tt>
  return <tt class="literal">3.25</tt>, while traditional <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> would return
  <tt class="literal">3.3</tt>.  The implied random variables are:
  <tt class="literal">3.25±0.005</tt> and <tt class="literal">3.3±0.05</tt>.
  Note that the traditional <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> way <strong>does</strong>
  lie about the mean: the mean <strong>is</strong>
  <tt class="literal">3.25</tt> and nothing else, while the standard way
  <strong>could</strong> be lying about the deviation
  (accuracy): if the implied accuracy of <tt class="literal">1.5 (0.05)</tt>
  is its actual accuracy, then the accuracy of the result cannot be
  smaller that that.  Therefore, since <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> has no way of knowing the
  actual accuracy, [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] (and all the other standard engineering
  programming languages, like <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, FORTRAN etc) decides that
  keeping the accuracy correct is the business of the programmer, while
  the language should preserve what it can - the precision.
  </dd><dt>Experience:</dt><dd> Rounding errors accumulate, and if a computation
  is conducted with insufficient precision, an outright incorrect
  result can be returned.
  (E.g., <tt class="literal">E(x<sup>2</sup>) -
  E(x)<sup>2</sup></tt> can be negative!)
  The user should not mix floats of different precision (that's what
  <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is for), but one should not be penalized for this too
  harshly.</dd></dl></div><p>When <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the traditional <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> method is used,
 namely the result of an arithmetic operation whose arguments are of
 different float types is rounded to the float format of the shortest
 (least precise) of the arguments: <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>
 → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a> (in contrast to <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">12.1.4.4 Rule of Float Precision
 Contagion</a>!)</p><div class="variablelist"><dl><dt>Rationale:</dt><dd> See it mathematically.  Add intervals:
  <tt class="literal">{1.0 ± 1e-8} + {1.0 ± 1e-16} = {2.0 ±
  1e-8}</tt>.  So, if we add <tt class="literal">1.0s0</tt> and
  <tt class="literal">1.0d0</tt>, we should get <tt class="literal">2.0s0</tt>.
  </dd><dt>Brief:</dt><dd>Do not suggest accuracy of a result by giving it a
  precision that is greater than its accuracy.
  </dd><dt>Example:</dt><dd><tt class="sexp">(- (+ 1.7 <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>) <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>)</tt>
  should not return <tt class="literal">1.700000726342836417234L0</tt>, it
  should return <tt class="literal">1.7f0</tt> (or
  <tt class="literal">1.700001f0</tt> if there were rounding errors).
  </dd><dt>Experience:</dt><dd>If in a computation using thousands of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s,
  a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> (like <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>) happens to be used, the long precision
  should not propagate throughout all the intermediate values.
  Otherwise, the long result would look precise, but its accuracy is
  only that of a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>; furthermore much computation time
  would be lost by calculating with <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a>s when only
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s would be needed.
  </dd></dl></div><p><a id="warn-fpc"></a><b>Variable <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a>. </b>If the variable <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a warning is emitted for
 every coercion involving different floating-point types.
 As explained above, float precision contagion is not a good idea,
 this is why <a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> initially.
 You can avoid the contagion by doing all your computations with the
 same floating-point type (and using <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><tt class="function">FLOAT</tt></a> to convert all constants,
 e.g., <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>, to your preferred type).
 Set it to <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> to have <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> on float
 precision contagion.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-comp"></a>12.2.4. Complex Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html" target="_top">[CLHS-12.1.5]</a></h3></div></div><div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types. For example, <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><tt class="function">SQRT</tt></a>
 -9.0)</tt> evaluates to the number <tt class="literal">#C(0 3.0)</tt>,
 which has a real part of exactly <tt class="literal">0</tt>, not only
 <tt class="literal">0.0</tt> (which would mean "approximately 0").</p><p>The type specifier for this is <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a>)</tt>, and <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <tt class="varname">type-of-real-part</tt>
 <tt class="varname">type-of-imaginary-part</tt>)</tt> in general.</p><p>The type specifier <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a>
 <i class="replaceable"><tt>type</tt></i>)</tt> is equivalent to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> <i class="replaceable"><tt>type</tt></i> <i class="replaceable"><tt>type</tt></i>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-rational"></a>12.2.5. Rule of
   Canonical Representation for Complex Rationals
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html" target="_top">[CLHS-12.1.5.3]</a></h3></div></div><div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types.  If the imaginary part is <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> to <tt class="literal">0</tt>,
 the number is automatically converted to a real number.</p><p>This has the advantage that
   <tt class="sexp">(let ((x (sqrt -9.0))) (* x x))</tt>
 - instead of evaluating to <tt class="literal">#C(-9.0 0.0)</tt>,
 with <i class="replaceable"><tt>x</tt></i> = <tt class="literal">#C(0.0 3.0)</tt> - evaluates to
 <tt class="literal">#C(-9.0 0)</tt> = <tt class="literal">-9.0</tt>,
 with <i class="replaceable"><tt>x</tt></i> = <tt class="literal">#C(0 3.0)</tt>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-dict"></a>12.3. The Numbers Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html" target="_top">[CLHS-12.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#int-func-ext">12.3.1. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.2. Floating Point</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.3. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.4. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.5. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.6. Float Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-invalid-op">12.3.7. Condition <tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></span></dt><dt><span class="section"><a href="#float-inexact">12.3.8. Condition <tt class="classname">FLOATING-POINT-INEXACT</tt></a></span></dt></dl></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><tt class="function">UPGRADED-COMPLEX-PART-TYPE</tt></a>. </b>When the argument is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><tt class="function">UPGRADED-COMPLEX-PART-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>,
 otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a>, since a <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> number in
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> can always have <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><tt class="function">REALPART</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><tt class="function">IMAGPART</tt></a> of any type.
</p><p><a id="default-float-format"></a><b>Variable <a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>. </b>When rational numbers are to be converted to floats (due to
 <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><tt class="function">FLOAT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><tt class="function">SQRT</tt></a> or a transcendental function), the result
 type is given by the variable <a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>.</p><p><a id="no-underflow"></a><b>Macro <a href="#no-underflow"><tt class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a>. </b>The macro <tt class="sexp">(<a href="#no-underflow"><tt class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a>
 {<i class="replaceable"><tt>form</tt></i>}*)</tt> executes the <i class="replaceable"><tt>form</tt></i>s, with errors of type
 <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><tt class="classname">FLOATING-POINT-UNDERFLOW</tt></a> inhibited.  Floating point operations
 will silently return zero instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ing an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> of type
 <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><tt class="classname">FLOATING-POINT-UNDERFLOW</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="int-func-ext"></a>12.3.1. Additional Integer Functions</h3></div></div><div></div></div><p><b>Function <tt class="function">EXT:!</tt> </b><tt class="sexp">(<tt class="function">EXT:!</tt> <i class="replaceable"><tt>n</tt></i>)</tt>
 returns the factorial of <i class="replaceable"><tt>n</tt></i>, <i class="replaceable"><tt>n</tt></i> being a nonnegative
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.</p><p><b>Function <tt class="function">EXT:EXQUO</tt>. </b><tt class="sexp">(<tt class="function">EXT:EXQUO</tt> <i class="replaceable"><tt>x</tt></i>
 <i class="replaceable"><tt>y</tt></i>)</tt> returns the integer quotient <tt class="varname">x/y</tt> of
 two integers <i class="replaceable"><tt>x</tt></i>,<i class="replaceable"><tt>y</tt></i>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> when the quotient
 is not integer.  (This is more efficient than <a href="http://www.lisp.org/HyperSpec/Body/fun_sl.html" target="_top"><tt class="function">/</tt></a>.)</p><p><b>Function <tt class="function">EXT:XGCD</tt>. </b><tt class="sexp">(<tt class="function">EXT:XGCD</tt>
 <i class="replaceable"><tt>x<sub>1</sub></tt></i> ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>)</tt>
 returns the values <i class="replaceable"><tt>l</tt></i>, <i class="replaceable"><tt>k<sub>1</sub></tt></i>, ..., <i class="replaceable"><tt>k<sub>n</sub></tt></i>, where <i class="replaceable"><tt>l</tt></i> is the
 greatest common divisor of the integers <i class="replaceable"><tt>x<sub>1</sub></tt></i>, ..., <i class="replaceable"><tt>x<sub>n</sub></tt></i>, and
 <i class="replaceable"><tt>k<sub>1</sub></tt></i>, ..., <i class="replaceable"><tt>k<sub>n</sub></tt></i> are the integer coefficients such that
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 <i class="replaceable"><tt>l</tt></i> = (<a href="http://www.lisp.org/HyperSpec/Body/fun_gcd.html" target="_top"><tt class="function">GCD</tt></a> <i class="replaceable"><tt>x<sub>1</sub></tt></i> ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>)
   = (+ (* <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>x<sub>1</sub></tt></i>) ... (* <i class="replaceable"><tt>k<sub>n</sub></tt></i> <i class="replaceable"><tt>x<sub>n</sub></tt></i>))
</pre></td></tr></table><p><b>Function <tt class="function">EXT:MOD-EXPT</tt>. </b><tt class="sexp">(<tt class="function">EXT:MOD-EXPT</tt>
 <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>l</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt> is equivalent to
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_modcm_rem.html" target="_top"><tt class="function">MOD</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a> <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>l</tt></i>) <i class="replaceable"><tt>m</tt></i>)</tt>
 except it is more efficient for very large arguments.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-notes"></a>12.3.2. Floating Point</h3></div></div><div></div></div><p><a id="expt"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a>. </b><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><tt class="function">EXPT</tt></a> <i class="replaceable"><tt>base</tt></i>
 <i class="replaceable"><tt>exponent</tt></i>)</tt> is not very precise if
 <i class="replaceable"><tt>exponent</tt></i> has a large absolute value.
</p><p><a id="log"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><tt class="function">LOG</tt></a>. </b><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><tt class="function">LOG</tt></a> <i class="replaceable"><tt>number</tt></i> <i class="replaceable"><tt>base</tt></i>)</tt> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s
 an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if <tt class="literal"><i class="replaceable"><tt>base</tt></i> = 1</tt>.</p><p><a id="pi"></a><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>. </b>The value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">LONG-FLOAT</tt></a> with the precision given
  by <tt class="sexp">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>.  When this precision is changed, the value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is
  automatically recomputed.  Therefore <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a> is <span class="emphasis"><em>not</em></span> a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable" target="_top">constant variable</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-decode"></a>12.3.3. Float Decoding
  <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top">[CLHS]</a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-RADIX</tt></a> always returns <tt class="literal">2</tt>.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> <i class="replaceable"><tt>number</tt></i>
   <i class="replaceable"><tt>digits</tt></i>)</tt> coerces <i class="replaceable"><tt>number</tt></i> (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><tt class="classname">REAL</tt></a> number) to a
  floating point number with at least <i class="replaceable"><tt>digits</tt></i> mantissa digits.
  The following always evaluates to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&gt;=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><tt class="function">FLOAT-DIGITS</tt></a> <i class="replaceable"><tt>number</tt></i> <i class="replaceable"><tt>digits</tt></i>)) <i class="replaceable"><tt>digits</tt></i>)
 </pre></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bool-ops"></a>12.3.4. Boolean Operations
  <a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top">[CLHS]</a></h3></div></div><div></div></div><div class="table"><a id="bool-op-table"></a><p class="title"><b>Table 12.1. Boolean Operations</b></p><table summary="Boolean Operations" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">constant</th><th align="left">value</th></tr></thead><tbody><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-CLR</tt></a></td><td align="left">0</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-SET</tt></a></td><td align="left">15</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-1</tt></a></td><td align="left">10</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-2</tt></a></td><td align="left">12</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-C1</tt></a></td><td align="left">5</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-C2</tt></a></td><td align="left">3</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-AND</tt></a></td><td align="left">8</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-IOR</tt></a></td><td align="left">14</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-XOR</tt></a></td><td align="left">6</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-EQV</tt></a></td><td align="left">9</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-NAND</tt></a></td><td align="left">7</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-NOR</tt></a></td><td align="left">1</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ANDC1</tt></a></td><td align="left">4</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ANDC2</tt></a></td><td align="left">2</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ORC1</tt></a></td><td align="left">13</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><tt class="constant">BOOLE-ORC2</tt></a></td><td align="left">11</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-lim"></a>12.3.5. Fixnum Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top">[CLHS]</a></h3></div></div><div></div></div><div class="table"><a id="fixnum-lim-table"></a><p class="title"><b>Table 12.2. Fixnum limits</b></p><table summary="Fixnum limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">16-bit CPU</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-POSITIVE-FIXNUM</tt></a></td><td colspan="2" align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-NEGATIVE-FIXNUM</tt></a></td><td colspan="2" align="center">-2<sup>24</sup> = -16777216</td><td align="center">-2<sup>32</sup> = -4294967296</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-lim"></a>12.3.6. Float Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top">[CLHS]</a></h3></div></div><div></div></div><p>Together with <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><tt class="constant">PI</tt></a>, the other long float constants
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-NEGATIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-POSITIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">LEAST-POSITIVE-NORMALIZED-LONG-FLOAT</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><tt class="constant">LONG-FLOAT-EPSILON</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><tt class="constant">LONG-FLOAT-NEGATIVE-EPSILON</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">MOST-NEGATIVE-LONG-FLOAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><tt class="constant">MOST-POSITIVE-LONG-FLOAT</tt></a> are recomputed
  whenever <tt class="sexp">(<a href="#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>)</tt> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>ed.  They are <span class="emphasis"><em>not</em></span> <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable" target="_top">constant variable</a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-invalid-op"></a>12.3.7. Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_id-operation.html" target="_top"><tt class="classname">FLOATING-POINT-INVALID-OPERATION</tt></a></h3></div></div><div></div></div><p>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed by <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-inexact"></a>12.3.8. Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_oint-inexact.html" target="_top"><tt class="classname">FLOATING-POINT-INEXACT</tt></a></h3></div></div><div></div></div><p>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed by <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="characters"></a>Chapter 13. Characters
   <a href="http://www.lisp.org/HyperSpec/Body/chap-13.html" target="_top">[CLHS-13]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#input-char">13.1. Attributes</a></span></dt><dt><span class="section"><a href="#char-script">13.2. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.3. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dt><span class="section"><a href="#graph-char">13.4. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.5. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-ext">13.6. Case of Implementation-Defined Characters
   [CLHS-13.1.4.3.4]</a></span></dt><dt><span class="section"><a href="#num-char">13.7. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.8. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.9. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.10. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.11. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.12. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-width">13.13. Functions on characters</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.14. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.15. Obsolete Constants</a></span></dt></dl></div><p>The characters are ordered according to a superset of the
 <a href="#charset-ASCII">ASCII character set</a>.</p>
<!--#ifdef UNICODE--><div class="variablelist"><dl><dt>Platform dependent: only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built
  <strong>with</strong> the compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd>More precisely, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> uses the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> 3.2
 character set (ISO 10646, also known as UCS-4).
</dd></dl></div>
<!--#endif-->
<!--#if defined(ISOLATIN_CHS) && !defined(UNICODE)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> (except <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a>),
   <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only, and only in
   <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> uses the ISO Latin-1 (ISO
 8859-1) character set:
</p><div class="informaltable"><a id="latin-1-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#x90</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#xA0</td><td align="center"> </td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">¤</td><td align="center">¥</td><td align="center">¦</td><td align="center">§</td><td align="center">¨</td><td align="center">©</td><td align="center">ª</td><td align="center">«</td><td align="center">¬</td><td align="center">­</td><td align="center">®</td><td align="center">¯</td></tr><tr><td align="center">#xB0</td><td align="center">°</td><td align="center">±</td><td align="center">²</td><td align="center">³</td><td align="center">´</td><td align="center">µ</td><td align="center">¶</td><td align="center">·</td><td align="center">¸</td><td align="center">¹</td><td align="center">º</td><td align="center">»</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Æ</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#xD0</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">×</td><td align="center">Ø</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">ß</td></tr><tr><td align="center">#xE0</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">æ</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td><td align="center">ì</td><td align="center">í</td><td align="center">î</td><td align="center">ï</td></tr><tr><td align="center">#xF0</td><td align="center">ð</td><td align="center">ñ</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td><td align="center">ö</td><td align="center">÷</td><td align="center">ø</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ü</td><td align="center">ý</td><td align="center">þ</td><td align="center">ÿ</td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<!--#if defined(NEXTSTEP_CHS) && !defined(UNICODE)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a> platforms only, and
 only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> uses the <a href="http://www.next.com/" target="_top"><strong>NeXTstep</strong></a> character set:
</p><div class="informaltable"><a id="next-charset-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#x90</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">µ</td><td align="center">×</td><td align="center">÷</td></tr><tr><td align="center">#xA0</td><td align="center">©</td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">⁄</td><td align="center">¥</td><td align="center">ƒ</td><td align="center">§</td><td align="center">¤</td><td align="center">’</td><td align="center">“</td><td align="center">«</td><td align="center">‹</td><td align="center">›</td><td align="center">ﬁ</td><td align="center">ﬂ</td></tr><tr><td align="center">#xB0</td><td align="center">®</td><td align="center">–</td><td align="center">†</td><td align="center">‡</td><td align="center">·</td><td align="center">¦</td><td align="center">¶</td><td align="center">•</td><td align="center">‚</td><td align="center">„</td><td align="center">”</td><td align="center">»</td><td align="center">…</td><td align="center">‰</td><td align="center">¬</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">¹</td><td align="center">ˋ</td><td align="center">´</td><td align="center">^</td><td align="center">˜</td><td align="center">¯</td><td align="center">˘</td><td align="center">˙</td><td align="center">¨</td><td align="center">²</td><td align="center">˚</td><td align="center">¸</td><td align="center">³</td><td align="center">˝</td><td align="center">˛</td><td align="center">ˇ</td></tr><tr><td align="center">#xD0</td><td align="center">—</td><td align="center">±</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td></tr><tr><td align="center">#xE0</td><td align="center">ì</td><td align="center">Æ</td><td align="center">í</td><td align="center">ª</td><td align="center">î</td><td align="center">ï</td><td align="center">ð</td><td align="center">ñ</td><td align="center">Ł</td><td align="center">Ø</td><td align="center">Œ</td><td align="center">º</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td></tr><tr><td align="center">#xF0</td><td align="center">ö</td><td align="center">æ</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ı</td><td align="center">ü</td><td align="center">ý</td><td align="center">ł</td><td align="center">ø</td><td align="center">œ</td><td align="center">ß</td><td align="center">þ</td><td align="center">ÿ</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<div class="table"><a id="standard-char-table"></a><p class="title"><b>Table 13.1. Standard characters</b></p><table summary="Standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keycode">#x20</span></td></tr><tr><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keycode">#x0A</span></td></tr></tbody></table></div><div class="table"><a id="semi-standard-char-table"></a><p class="title"><b>Table 13.2. Semi-standard characters</b></p><table summary="Semi-standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keycode">#x08</span></td></tr><tr><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keycode">#x09</span></td></tr><tr><td align="center"><span class="keysym">#\Linefeed</span></td><td align="center"><span class="keycode">#x0A</span></td></tr><tr><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keycode">#x0C</span></td></tr><tr><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keycode">#x0D</span></td></tr></tbody></table></div><p><span class="keysym">#\Newline</span> is the <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a>.</p><div class="table"><a id="extra-named-chars-table"></a><p class="title"><b>Table 13.3. Additional Named Characters</b></p><table summary="Additional Named Characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keycode">#x07</span></td></tr><tr><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keycode">#x1B</span></td></tr></tbody></table></div><div class="table"><a id="ctrl-char-table"></a><p class="title"><b>Table 13.4. Additional syntax for characters with code from
   <span class="keycode">#x00</span> to <span class="keycode">#x1F</span>:</b></p><table summary="Additional syntax for characters with code from&#10;   #x00 to #x1F:" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\^@</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\^A</span> … <span class="keysym">#\^Z</span></td><td align="center"><span class="keycode">#x01</span> …
                   <span class="keycode">#x1A</span></td></tr><tr><td align="center"><span class="keysym">#\^[</span></td><td align="center"><span class="keycode">#x1B</span></td></tr><tr><td align="center"><span class="keysym">#\^\</span></td><td align="center"><span class="keycode">#x1C</span></td></tr><tr><td align="center"><span class="keysym">#\^]</span></td><td align="center"><span class="keycode">#x1D</span></td></tr><tr><td align="center"><span class="keysym">#\^^</span></td><td align="center"><span class="keycode">#x1E</span></td></tr><tr><td align="center"><span class="keysym">#\^_</span></td><td align="center"><span class="keycode">#x1F</span></td></tr></tbody></table></div><p>See also the section <a href="#chario" title="23.1.&#xA0;characters">Character
 I/O</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="input-char"></a>13.1. Attributes</h2></div></div><div></div></div><p>Characters do not have the [<span class="citation"><a href="#CLtL1">CLtL1</a></span>] font and bits attributes.
 For backward compatibility, there is a class <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> representing
 either a character with font and bits, or a keystroke.
 The following functions work with objects of types <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>
 and <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
 Note that <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> on objects of type
 <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.</p><div class="variablelist"><dl><dt><tt class="constant">ext:char-font-limit</tt> = 16</dt><dd>The system uses only font 0.
  </dd><dt><tt class="constant">ext:char-bits-limit</tt> = 16</dt><dd><p>Character bits:
    </p><div class="informaltable"><a id="bit-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><tt class="constant">:CONTROL</tt></td><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-CONTROL-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:META</tt></td><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-META-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:SUPER</tt></td><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-SUPER-BIT</tt></a></td></tr><tr><td align="center"><tt class="constant">:HYPER</tt></td><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-HYPER-BIT</tt></a></td></tr></tbody></table></div></dd><dt><tt class="sexp">(<tt class="function">ext:char-font</tt>
  <i class="replaceable"><tt>object</tt></i>)</tt> </dt><dd>returns the font of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
  </dd><dt><tt class="sexp">(<tt class="function">ext:char-bits</tt>
  <i class="replaceable"><tt>object</tt></i>)</tt> </dt><dd>returns the bits of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>.
  </dd><dt><tt class="sexp">(<tt class="function">ext:make-char</tt>
  <i class="replaceable"><tt>char</tt></i> [<i class="replaceable"><tt>bits</tt></i>
            [<i class="replaceable"><tt>font</tt></i>]])</tt></dt><dd>returns a new <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a>, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if such a
 character cannot be created.</dd><dt><tt class="sexp">(<tt class="function">ext:char-bit</tt>
  <i class="replaceable"><tt>object</tt></i> <i class="replaceable"><tt>name</tt></i>)</tt></dt><dd>returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the named bit is set in <i class="replaceable"><tt>object</tt></i>,
  else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="sexp">(<tt class="function">ext:set-char-bit</tt>
  <i class="replaceable"><tt>object</tt></i> <i class="replaceable"><tt>name</tt></i> <i class="replaceable"><tt>newvalue</tt></i>)</tt></dt><dd>returns a new <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> with the named bit set or
  unset, depending on the boolean <i class="replaceable"><tt>newvalue</tt></i>.
  </dd></dl></div>
<!--#ifdef KEYBOARD--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd>The system itself uses this <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> type only to
 mention special keys and <span><b class="keycap">Control</b></span>/<span><b class="keycap">Alternate</b></span>/<span><b class="keycap">Shift</b></span> key status on return from
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a>)</tt>.
 </dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-script"></a>13.2. Character Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html" target="_top">[CLHS-13.1.2.1]</a></h2></div></div><div></div></div><p>The only defined character script is the type <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>
 itself.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-attrib"></a>13.3. Character Attributes
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html" target="_top">[CLHS-13.1.3]</a></h2></div></div><div></div></div><p>Characters have no implementation-defined attributes.  All characters
are simple characters.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-char"></a>13.4. Graphic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html" target="_top">[CLHS-13.1.4.1]</a></h2></div></div><div></div></div><p>The graphic characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard, excluding the ranges
 <span class="keycode">U0000</span> … <span class="keycode">U001F</span> and
 <span class="keycode">U007F</span> … <span class="keycode">U009F</span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="alpha-char"></a>13.5. Alphabetic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html" target="_top">[CLHS-13.1.4.2]</a></h2></div></div><div></div></div><p>The alphabetic characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined as letters by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-ext"></a>13.6. Case of Implementation-Defined Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html" target="_top">[CLHS-13.1.4.3.4]</a></h2></div></div><div></div></div><p>The characters with case are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters <i class="replaceable"><tt>c</tt></i>, for
 which the upper case mapping <i class="replaceable"><tt>uc</tt></i> and the lower case mapping <i class="replaceable"><tt>lc</tt></i>
 have the following properties:
</p><div class="itemizedlist"><ul type="disc"><li><i class="replaceable"><tt>uc</tt></i> and <i class="replaceable"><tt>lc</tt></i> are different</li><li><i class="replaceable"><tt>c</tt></i> is one of <i class="replaceable"><tt>uc</tt></i> and <i class="replaceable"><tt>lc</tt></i></li><li>the upper case mapping of <i class="replaceable"><tt>uc</tt></i> and of <i class="replaceable"><tt>lc</tt></i>
   is <i class="replaceable"><tt>uc</tt></i></li><li>the lower case mapping of <i class="replaceable"><tt>uc</tt></i> and of <i class="replaceable"><tt>lc</tt></i>
   is <i class="replaceable"><tt>lc</tt></i></li></ul></div><p>The titlecase property of <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters has no equivalent in
 <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-char"></a>13.7. Numeric Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html" target="_top">[CLHS-13.1.4.4]</a></h2></div></div><div></div></div><p>The numeric characters are those <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> characters which are
 defined as digits by the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> standard.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-ord"></a>13.8. Ordering of Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html" target="_top">[CLHS-13.1.6]</a></h2></div></div><div></div></div><p>The characters are ordered according to their <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clhs-newline"></a>13.9. Treatment of Newline during Input and Output
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html" target="_top">[CLHS-13.1.8]</a></h2></div></div><div></div></div><p>Newlines are written according to the stream's <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>, see the
 function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-external-format.html" target="_top"><tt class="function">STREAM-EXTERNAL-FORMAT</tt></a> and the description of <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>s,
 in particular, <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a>s.
 The default behavior is as follows:</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY != 0))--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd>When writing to a file, <span class="keysym">#\Newline</span> is converted to
 <span class="keycode">CR</span>/<span class="keycode">LF</span>. (This is the usual convention on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>.)
 For example, <span class="keysym">#\Return</span>+<span class="keysym">#\Newline</span> is written as <span class="keycode">CR</span>/<span class="keycode">CR</span>/<span class="keycode">LF</span>.
</dd></dl></div>
<!--#endif-->
<p>When reading from a file, <span class="keycode">CR</span>/<span class="keycode">LF</span> is converted to <span class="keysym">#\Newline</span>
 (the usual convention on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>), and <span class="keycode">CR</span> not followed by <span class="keycode">LF</span> is
 converted to <span class="keysym">#\Newline</span> as well (the usual conversion on MacOS, also used
 by some programs on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-int"></a>13.10. Character Encodings
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html" target="_top">[CLHS-13.1.9]</a></h2></div></div><div></div></div><p>The integer returned by <a href="http://www.lisp.org/HyperSpec/Body/fun_char-int.html" target="_top"><tt class="function">CHAR-INT</tt></a> is the same as the character's
 code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="script-ext"></a>13.11. Documentation
   of Implementation-Defined Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html" target="_top">[CLHS-13.1.10]</a></h2></div></div><div></div></div><p>See the description of <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-dict"></a>13.12. The Characters Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html" target="_top">[CLHS-13.2]</a></h2></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><tt class="function">CHAR-CODE</tt></a> takes values from <tt class="literal">0</tt> (inclusive) to
 <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a> (exclusive), i.e., the implementation
 supports exactly <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a> characters.</p><div class="table"><a id="char-code-limit-table"></a><p class="title"><b>Table 13.5. Number of characters</b></p><table summary="Number of characters" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">binaries built</th><th align="center"><strong>without</strong><a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> support</th><th align="center"><strong>with</strong><a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> support</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><tt class="constant">CHAR-CODE-LIMIT</tt></a></td><td align="center">2<sup>8</sup> = 256</td><td align="center">17 * 2<sup>16</sup> = 1114112</td></tr></tbody></table></div><p>The types <tt class="classname">EXT:STRING-CHAR</tt> and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><tt class="classname">BASE-CHAR</tt></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><p>The graphic characters have been described above.</p><p>The standard characters are <span class="keysym">#\Newline</span> and the graphic characters with
 a code between 32 and 126 (inclusive).</p><p>The alphabetic characters are these characters:
</p><div class="literallayout"><p><br />
             ABCDEFGHIJKLMNOPQRSTUVWXYZ<br />
             abcdefghijklmnopqrstuvwxyz<br />
</p></div><p>
and the international alphabetic characters from the character set:
</p><div class="literallayout"><p><br />
             ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜßáíóúñÑªºãõØøÀÃÕ etc.<br />
</p></div><p>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-EQUAL</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-EQUAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-LESSP</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-GREATERP</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-GREATERP</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR-NOT-LESSP</tt></a> ignore bits and
 font attributes of their arguments.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-width"></a>13.13. Functions on characters</h2></div></div><div></div></div><p><b>Function
  <tt class="sexp">(<a href="#char-width" title="13.13.&#xA0;Functions on characters"><tt class="function">EXT:CHAR-WIDTH</tt></a> <i class="replaceable"><tt>char</tt></i>)</tt>. </b>returns the number of screen columns occupied by <i class="replaceable"><tt>char</tt></i>.
 This is 0 for non-spacing characters
  (such as control characters and many combining characters),
 2 for double-width East Asian characters,
 and 1 for all other characters.
 See also function <a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-platform-dep"></a>13.14. Platform-Dependent Characters</h2></div></div><div></div></div><p>The characters that are not graphic chars and the space character
 have names:</p>
<!--#ifdef WIN32_CHARNAMES--><div class="table"><a id="dos-win32-chars-table"></a><p class="title"><b>Table 13.6. Platform dependent characters: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms.</b></p><table summary="Platform dependent characters: Win32 platforms." border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x00)</tt></td><td align="center"><span class="keysym">#\Null</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x07)</tt></td><td align="center"><span class="keysym">#\Bell</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x08)</tt></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Rubout</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x09)</tt></td><td align="center"><span class="keysym">#\Tab</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0A)</tt></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0B)</tt></td><td align="center"><span class="keysym">#\Code11</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0C)</tt></td><td align="center"><span class="keysym">#\Page</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0D)</tt></td><td align="center"><span class="keysym">#\Return</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1A)</tt></td><td align="center"><span class="keysym">#\Code26</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1B)</tt></td><td align="center"><span class="keysym">#\Escape</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x20)</tt></td><td align="center"><span class="keysym">#\Space</span></td><td class="auto-generated"> </td></tr></tbody></table></div>
<!--#endif-->
<!--#ifdef UNIX_CHARNAMES--><div class="table"><a id="unix-chars-table"></a><p class="title"><b>Table 13.7. Platform dependent characters: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms.</b></p><table summary="Platform dependent characters: UNIX platforms." border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x00)</tt></td><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keysym">#\Nul</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x01)</tt></td><td align="center"><span class="keysym">#\Soh</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x02)</tt></td><td align="center"><span class="keysym">#\Stx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x03)</tt></td><td align="center"><span class="keysym">#\Etx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x04)</tt></td><td align="center"><span class="keysym">#\Eot</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x05)</tt></td><td align="center"><span class="keysym">#\Enq</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x06)</tt></td><td align="center"><span class="keysym">#\Ack</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x07)</tt></td><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keysym">#\Bel</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x08)</tt></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Bs</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x09)</tt></td><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keysym">#\Ht</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0A)</tt></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Nl</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0B)</tt></td><td align="center"><span class="keysym">#\Vt</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0C)</tt></td><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keysym">#\Np</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0D)</tt></td><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keysym">#\Cr</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0E)</tt></td><td align="center"><span class="keysym">#\So</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x0F)</tt></td><td align="center"><span class="keysym">#\Si</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x10)</tt></td><td align="center"><span class="keysym">#\Dle</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x11)</tt></td><td align="center"><span class="keysym">#\Dc1</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x12)</tt></td><td align="center"><span class="keysym">#\Dc2</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x13)</tt></td><td align="center"><span class="keysym">#\Dc3</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x14)</tt></td><td align="center"><span class="keysym">#\Dc4</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x15)</tt></td><td align="center"><span class="keysym">#\Nak</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x16)</tt></td><td align="center"><span class="keysym">#\Syn</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x17)</tt></td><td align="center"><span class="keysym">#\Etb</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x18)</tt></td><td align="center"><span class="keysym">#\Can</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x19)</tt></td><td align="center"><span class="keysym">#\Em</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1A)</tt></td><td align="center"><span class="keysym">#\Sub</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1B)</tt></td><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keysym">#\Esc</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1C)</tt></td><td align="center"><span class="keysym">#\Fs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1D)</tt></td><td align="center"><span class="keysym">#\Gs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1E)</tt></td><td align="center"><span class="keysym">#\Rs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x1F)</tt></td><td align="center"><span class="keysym">#\Us</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x20)</tt></td><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keysym">#\Sp</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> #x7F)</tt></td><td align="center"><span class="keysym">#\Rubout</span></td><td align="center"><span class="keysym">#\Delete</span></td><td align="center"><span class="keysym">#\Del</span></td></tr></tbody></table></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-bits"></a>13.15. Obsolete Constants</h2></div></div><div></div></div><div class="table"><a id="char-bits-table"></a><p class="title"><b>Table 13.8. Character bit constants (obsolete)</b></p><table summary="Character bit constants (obsolete)" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">constant</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-CONTROL-BIT</tt></a></td><td align="center">1</td></tr><tr><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-META-BIT</tt></a></td><td align="center">2</td></tr><tr><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-SUPER-BIT</tt></a></td><td align="center">4</td></tr><tr><td align="center"><a href="#char-bits" title="13.15.&#xA0;Obsolete Constants"><tt class="constant">EXT:CHAR-HYPER-BIT</tt></a></td><td align="center">8</td></tr></tbody></table></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conses"></a>Chapter 14. Conses
   <a href="http://www.lisp.org/HyperSpec/Body/chap-14.html" target="_top">[CLHS-14]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cons-dict"></a>14.1. The Conses Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html" target="_top">[CLHS-14.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#map-func">14.1.1. Functions <tt class="function">MAPCAR</tt>, <tt class="function">MAPCAN</tt>, <tt class="function">MAPLIST</tt>, <tt class="function">MAPCON</tt>, ...</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="map-func"></a>14.1.1. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAN</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPLIST</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCON</tt></a>, ...</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mapcap">14.1.1.1. Function <tt class="function">EXT:MAPCAP</tt></a></span></dt><dt><span class="section"><a href="#maplap">14.1.1.2. Function <tt class="function">EXT:MAPLAP</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mapcap"></a>14.1.1.1. Function <a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPCAP</tt></a></h4></div></div><div></div></div><p>The function <a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPCAP</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAN</tt></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a>:</p><p><tt class="sexp">(<a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPCAP</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>x<sub>1</sub></tt></i> ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>)</tt> ==
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>x<sub>1</sub></tt></i>
 ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>))</tt></p><p>(Actually a bit more efficient that this would have been.)</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="maplap"></a>14.1.1.2. Function <a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPLAP</tt></a></h4></div></div><div></div></div><p>The function <a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPLAP</tt></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCON</tt></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a>:</p><p><tt class="sexp">(<a href="#mapcap" title="14.1.1.1.&#xA0;Function EXT:MAPCAP"><tt class="function">EXT:MAPLAP</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>x<sub>1</sub></tt></i> ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>)</tt> ==
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><tt class="function">APPEND</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPLIST</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>x<sub>1</sub></tt></i>
 ... <i class="replaceable"><tt>x<sub>n</sub></tt></i>))</tt></p><p>(Actually a bit more efficient that this would have been.)</p></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="arrays"></a>Chapter 15. Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/chap-15.html" target="_top">[CLHS-15]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a> can return specialized arrays for the
 <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a>s
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 2)</tt>,
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 4)</tt>,
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt>,
 and, of course, the required specializations <a href="http://www.lisp.org/HyperSpec/Body/typ_nil.html" target="_top"><tt class="classname">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><tt class="classname">BIT</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-elts"></a>15.1. Array Elements
   <a href="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html" target="_top">[CLHS-15.1.1]</a></h2></div></div><div></div></div><div class="table"><a id="array-limit-table"></a><p class="title"><b>Table 15.1. Array limits</b></p><table summary="Array limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">16-bit CPU</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-rank-limit.html" target="_top"><tt class="constant">ARRAY-RANK-LIMIT</tt></a></td><td colspan="3" align="center">2<sup>12</sup> = 4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html" target="_top"><tt class="constant">ARRAY-DIMENSION-LIMIT</tt></a></td><td colspan="2" align="center">2<sup>24</sup> = 16777216</td><td align="center">2<sup>32</sup> = 4294967296</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html" target="_top"><tt class="constant">ARRAY-TOTAL-SIZE-LIMIT</tt></a></td><td colspan="2" align="center">2<sup>24</sup> = 16777216</td><td align="center">2<sup>32</sup> = 4294967296</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that <a href="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html" target="_top"><tt class="constant">ARRAY-DIMENSION-LIMIT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html" target="_top"><tt class="constant">ARRAY-TOTAL-SIZE-LIMIT</tt></a>
 are not fixnums (they are equal to
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_1plcm_1-.html" target="_top"><tt class="function">1+</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><tt class="constant">MOST-POSITIVE-FIXNUM</tt></a>)</tt>),
 contrary to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] Issue <a href="http://www.lisp.org/HyperSpec/Issues/iss014.html" target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-dict"></a>15.2. The Arrays Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html" target="_top">[CLHS-15.2]</a></h2></div></div><div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a> for displaced arrays. </b>An array to which another array is displaced should not be shrunk
 (using <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a>) in such a way that the other array points into
 void space.  This is not checked at the time <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><tt class="function">ADJUST-ARRAY</tt></a> is
 called!</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="strings"></a>Chapter 16. Strings
   <a href="http://www.lisp.org/HyperSpec/Body/chap-16.html" target="_top">[CLHS-16]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></dd></dl></div><p>String comparison is based on the function <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><tt class="function">CHAR&lt;=</tt></a>.  Therefore
 diphthongs do not obey the usual national rules.  Example:
 <tt class="literal">o</tt> &lt; <tt class="literal">oe</tt> &lt;
 <tt class="literal">z</tt> &lt; <tt class="literal">ö</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="string-dict"></a>16.1. The Strings Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html" target="_top">[CLHS-16.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#string-width">16.1.1. Functions on strings</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-width"></a>16.1.1. Functions on strings</h3></div></div><div></div></div><p><b>Function <a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a>. </b><tt class="sexp">(<a href="#string-width" title="16.1.1.&#xA0;Functions on strings"><tt class="function">EXT:STRING-WIDTH</tt></a> <i class="replaceable"><tt>string</tt></i>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <i class="replaceable"><tt>start</tt></i> <i class="replaceable"><tt>end</tt></i>)</tt>
  returns the number of screen columns occupied by <i class="replaceable"><tt>string</tt></i>.
  This is computed as the sum of all <a href="#char-width" title="13.13.&#xA0;Functions on characters"><tt class="function">EXT:CHAR-WIDTH</tt></a>s
  of all of the <i class="replaceable"><tt>string</tt></i>'s characters.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="sequences"></a>Chapter 17. Sequences
   <a href="http://www.lisp.org/HyperSpec/Body/chap-17.html" target="_top">[CLHS-17]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="seq-dict"></a>17.1. The Sequences Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html" target="_top">[CLHS-17.3]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <tt class="function">NREVERSE</tt> &amp; <tt class="function">NRECONC</tt></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <tt class="function">REMOVE</tt> &amp; <tt class="function">DELETE</tt></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <tt class="function">SORT</tt> &amp; <tt class="function">STABLE-SORT</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="seq-macro-ext"></a>17.1.1. Additional Macros</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#doseq">17.1.1.1. Macro <tt class="function">EXT:DOSEQ</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="doseq"></a>17.1.1.1. Macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a></h4></div></div><div></div></div><p>For iteration through a sequence, a macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><tt class="function">DOLIST</tt></a>, may be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_map.html" target="_top"><tt class="function">MAP</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>seqform</tt></i> [<i class="replaceable"><tt>resultform</tt></i>])
  {<i class="replaceable"><tt>declaration</tt></i>}*
  {<i class="replaceable"><tt>tag</tt></i>|<i class="replaceable"><tt>form</tt></i>}*)
</pre></td></tr></table><p><a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><tt class="function">EXT:DOSEQ</tt></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="nreverse-nreconc"></a>17.1.2. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a></h3></div></div><div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> is always <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the argument.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> swaps pairs of elements.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><tt class="function">NREVERSE</tt></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> swaps the first and the last
 element and reverses the list chaining between them.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><tt class="function">NRECONC</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the first argument unless it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case the result is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the second argument.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rem-del"></a>17.1.3. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE-IF</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE-IF-NOT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><tt class="function">REMOVE-DUPLICATES</tt></a> return
 their argument unchanged, if no element has to be removed.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE-IF</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">DELETE-IF-NOT</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><tt class="function">DELETE-DUPLICATES</tt></a>
 destructively modify their argument: If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>,
 the <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> parts are modified.  If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> with
 fill pointer, the fill pointer is lowered and the remaining elements are
 compacted below the new fill pointer.</p><p><a id="count-ansi"></a><b>Variable <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a>. </b>Contrary to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue 283 <a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a>,
 negative <tt class="constant">:COUNT</tt> keyword arguments are not allowed unless you set
 <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> value, in which case “<span class="quote">using a
 negative integer value is functionally equivalent to using a value of
 zero</span>”, as per the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sorting"></a>17.1.4. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> have two additional keywords <tt class="constant">:START</tt>
and <tt class="constant">:END</tt>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> <i class="replaceable"><tt>sequence</tt></i> <i class="replaceable"><tt>predicate</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:KEY</tt> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> <i class="replaceable"><tt>sequence</tt></i> <i class="replaceable"><tt>predicate</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:KEY</tt> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)
</pre></td></tr></table><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">STABLE-SORT</tt></a> are identical.
 They implement the mergesort algorithm.
 Worst case complexity: <tt class="varname">O(n*log(n))</tt> comparisons,
 where <i class="replaceable"><tt>n</tt></i> is the <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> of the subsequence bounded
 by the <tt class="constant">:START</tt> and <tt class="constant">:END</tt> arguments.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="hash"></a>Chapter 18. Hash Tables
   <a href="http://www.lisp.org/HyperSpec/Body/chap-18.html" target="_top">[CLHS-18]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="hash-dict"></a>18.1. The Hash Tables Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html" target="_top">[CLHS-18.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <tt class="function">MAKE-HASH-TABLE</tt></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <tt class="function">HASH-TABLE-TEST</tt></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <tt class="function">EXT:DOHASH</tt></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-hash"></a>18.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> supports additional keywords
 <tt class="constant">:INITIAL-CONTENTS</tt>
 and <tt class="constant">:WEAK</tt>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :test :initial-contents :size
                 :rehash-size :rehash-threshold :weak)
</pre></td></tr></table><p>The <tt class="constant">:INITIAL-CONTENTS</tt> argument is an
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> that is used to initialize the new hash table.
 The <tt class="constant">:REHASH-THRESHOLD</tt> argument is ignored.</p><p>The <tt class="constant">:WEAK</tt> can take the following values:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (default)</td></tr><tr><td><tt class="constant">:KEY</tt></td></tr><tr><td><tt class="constant">:VALUE</tt></td></tr><tr><td><tt class="constant">:EITHER</tt></td></tr><tr><td><tt class="constant">:BOTH</tt></td></tr></table><p>
and specifies whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> is <span class="emphasis"><em>weak</em></span>:
if the key, value, either or both are not accessible for the <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
purposes, i.e., if they are only accessible via weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s
and <a href="#weak" title="29.6.&#xA0;Extensions-1.6. Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>s, it is <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed and removed from the weak
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>.</p><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able predicate <tt class="function">EXT:HASH-TABLE-WEAK-P</tt>
checks whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> is weak.</p><p>Just like <a href="#weak" title="29.6.&#xA0;Extensions-1.6. Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>s, weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s cannot be
printed readably.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defhash"></a>18.1.2. Macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a></h3></div></div><div></div></div><p>You can define a new hash table test using the macro
 <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a>: <tt class="sexp">(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> test-name <i class="replaceable"><tt>test-function</tt></i>
  <i class="replaceable"><tt>hash-function</tt></i>)</tt>, after which <i class="replaceable"><tt>test-name</tt></i>
 can be passed as the <tt class="constant">:TEST</tt> argument to
 <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a>.  E.g.: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> string <a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><tt class="function">STRING=</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a>)
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><tt class="function">MAKE-HASH-TABLE</tt></a> :test 'string)
</pre></td></tr></table><p>
(which is not too useful because it is equivalent to an <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> but less efficient).</p><p>The fundamental requirement is that the <i class="replaceable"><tt>test-function</tt></i> and <i class="replaceable"><tt>hash-function</tt></i> are
 consistent: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <i class="replaceable"><tt>test-function</tt></i> <i class="replaceable"><tt>x</tt></i> <i class="replaceable"><tt>y</tt></i>) ==&gt;
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <i class="replaceable"><tt>hash-function</tt></i> <i class="replaceable"><tt>x</tt></i>) (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <i class="replaceable"><tt>hash-function</tt></i> <i class="replaceable"><tt>y</tt></i>))
 </pre></td></tr></table><p>
 This means that the following definition: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a>) ; <strong>BAD!</strong>
 </pre></td></tr></table><p>
 is <span class="emphasis"><em>not</em></span> correct because <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> 1 1d0)</tt> is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> but <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> 1) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> 1d0))</tt>
 is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.  The correct way is, e.g.: </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">=</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a> (x) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><tt class="function">SXHASH</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> x '<a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>))))
 </pre></td></tr></table><p>
 (note that
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> <i class="replaceable"><tt>x</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>)</tt>
 does <span class="emphasis"><em>not</em></span> cons while
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> <i class="replaceable"><tt>x</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>)</tt>
 does).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ht-test"></a>18.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a></h3></div></div><div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a> returns either one of the four standard
 symbols <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><tt class="function">EQUALP</tt></a>, or, for <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>s
 created with a user-defined <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><tt class="function">HASH-TABLE-TEST</tt></a> (see macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><tt class="function">EXT:DEFINE-HASH-TABLE-TEST</tt></a>),
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> cell <tt class="sexp">(<i class="replaceable"><tt>test-function</tt></i> . <i class="replaceable"><tt>hash-function</tt></i>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dohash"></a>18.1.4. Macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a></h3></div></div><div></div></div><p>For iteration through a <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, a macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><tt class="function">DOLIST</tt></a>, can be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_maphash.html" target="_top"><tt class="function">MAPHASH</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a> (<i class="replaceable"><tt>key-var</tt></i> <i class="replaceable"><tt>value-var</tt></i> <i class="replaceable"><tt>hash-table-form</tt></i> [<i class="replaceable"><tt>resultform</tt></i>])
  {<i class="replaceable"><tt>declaration</tt></i>}*
  {<i class="replaceable"><tt>tag</tt></i>|<i class="replaceable"><tt>form</tt></i>}*)
</pre></td></tr></table><p><a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><tt class="function">EXT:DOHASH</tt></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="filenames"></a>Chapter 19. Filenames
   <a href="http://www.lisp.org/HyperSpec/Body/chap-19.html" target="_top">[CLHS-19]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation.</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
   [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.2. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.3. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.4. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt></dl></dd></dl></div><p>For most operations, pathnames denoting files and pathnames
 denoting directories cannot be used interchangeably.</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>For example, <tt class="filename">#P"foo/bar"</tt> denotes
 the file <tt class="filename">#P"bar"</tt> in the directory <tt class="filename">#P"foo"</tt>,
 while <tt class="filename">#P"foo/bar/"</tt> denotes the subdirectory
 <tt class="filename">#P"bar"</tt> of the directory <tt class="filename">#P"foo"</tt>.
</dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32--><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>  platforms only.</dt><dd>For example, <tt class="filename">#P"foo\\bar"</tt>
 denotes the file <tt class="filename">#P"bar"</tt> in the directory <tt class="filename">#P"foo"</tt>,
 while <tt class="filename">#P"foo\\bar\\"</tt> denotes the subdirectory
 <tt class="filename">#P"bar"</tt> of the directory <tt class="filename">#P"foo"</tt>.
</dd>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32) || defined(UNIX_CYGWIN32)--><dt><a id="device-prefix"></a>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> and
  <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> platforms only.</dt><dd>User variable <strong class="first"><i class="firstterm"><a href="#device-prefix"><tt class="varname">CUSTOM:*DEVICE-PREFIX*</tt></a></i></strong>
  controls translation between <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> pathnames
  (e.g., <tt class="filename">#P"/cygdrive/c/gnu/clisp/"</tt>) and native
  <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> pathnames (e.g., <tt class="filename">#P"C:\\gnu\\clisp\\"</tt>)
  When it is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, no translations occur and the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> port
  will not understand the native paths and the native <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> port will
  not understand the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> paths.
  When its value is a string, it is used by <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> to
  translate into the appropriate platform-specific representation,
  so that on <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a>,
  <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> "c:/gnu/clisp/")</tt>
  returns <tt class="sexp">#P"/cygdrive/c/gnu/clisp/"</tt>,
  while on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
  <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> "/cygdrive/c/gnu/clisp/")</tt>
  returns <tt class="sexp">#P"C:/gnu/clisp/"</tt>.
  The initial value is <tt class="literal">"cygdrive"</tt>, you should edit
  <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> to change it.</dd>
<!--#endif-->
</dl></div><p>This is especially important for the
 <a href="#dir" title="20.1.1.&#xA0;Function DIRECTORY">directory-handling functions</a>.</p><div class="table"><a id="min-filename-syntax-table"></a><p class="title"><b>Table 19.1. The minimum filename syntax that may be used portably</b></p><table summary="The minimum filename syntax that may be used portably" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">pathname</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><tt class="filename">"xxx"</tt></td><td align="center">for a file with name <i class="replaceable"><tt>xxx</tt></i></td></tr><tr><td align="center"><tt class="filename">"xxx.yy"</tt></td><td align="center">for a file with name <i class="replaceable"><tt>xxx</tt></i> and type
   <i class="replaceable"><tt>yy</tt></i></td></tr><tr><td align="center"><tt class="filename">".yy"</tt></td><td align="center">for a pathname with type <i class="replaceable"><tt>yy</tt></i> and no
    name or with name <i class="replaceable"><tt>.yy</tt></i> and no type,
    depending on the value of <a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a>.</td></tr></tbody></table></div><p>Hereby <i class="replaceable"><tt>xxx</tt></i> denotes 1 to 8 characters,
 and <i class="replaceable"><tt>yy</tt></i> denotes 1 to 3 characters, each of
 which being either an alphanumeric character or the underscore
 <span class="keysym">#\_</span>.  Other properties of pathname syntax vary between
 operating systems.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-components"></a>19.1. Pathname Components
   <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html" target="_top">[CLHS-19.2.1]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization.</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues.</a></span></dt></dl></div><p>When a pathname is to be fully specified (no wildcards), that
 means that no <tt class="constant">:WILD</tt>, <tt class="constant">:WILD-INFERIORS</tt> is allowed, no wildcard
 characters are allowed in the strings, and <i class="replaceable"><tt>name</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> may not
 be allowed either.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-dir-canon"></a>19.1.1. Directory canonicalization.</h3></div></div><div></div></div><p>As permitted by the <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> secification, the <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>
 directory component is canonicalized when the pathname is constructed:
 </p><div class="orderedlist"><ol type="1"><li><tt class="filename">""</tt> and
    <tt class="filename">"."</tt> are removed</li><li><tt class="filename">".."</tt>,
    <tt class="filename">"*"</tt>, and <tt class="filename">"**"</tt> are converted
    to <tt class="constant">:UP</tt>, <tt class="constant">:WILD</tt> and <tt class="constant">:WILD-INFERIORS</tt>,
    respectively</li><li>patterns <tt class="filename">foo/../</tt> are
    collapsed</li></ol></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-platform-specific"></a>19.1.2. Platform-specific issues.</h3></div></div><div></div></div>
<!--#ifdef PATHNAME_UNIX--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><i class="replaceable"><tt>host</tt></i></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><i class="replaceable"><tt>device</tt></i></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><tt class="sexp"><i class="replaceable"><tt>directory</tt></i> = (<i class="replaceable"><tt>startpoint</tt></i>
   . <i class="replaceable"><tt>subdirs</tt></i>)</tt></dt><dd><div class="informaltable"><a id="unix-dir-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><i class="replaceable"><tt>startpoint</tt></i></td><td align="center"><tt class="constant">:RELATIVE</tt> | <tt class="constant">:ABSOLUTE</tt></td></tr><tr><td align="center"><i class="replaceable"><tt>subdirs</tt></i></td><td align="center"><tt class="sexp">()</tt> | <tt class="sexp">(<i class="replaceable"><tt>subdir</tt></i>
   . <i class="replaceable"><tt>subdirs</tt></i>)</tt></td></tr><tr><td align="center"><i class="replaceable"><tt>subdir</tt></i></td><td align="center"><tt class="constant">:WILD-INFERIORS</tt></td><td align="center"><tt class="filename">**</tt> or
  <tt class="filename">...</tt>, all subdirectories </td></tr><tr><td align="center"><i class="replaceable"><tt>subdir</tt></i></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
   may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><i class="replaceable"><tt>name</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><i class="replaceable"><tt>type</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><i class="replaceable"><tt>version</tt></i></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (may also be specified as <tt class="constant">:WILD</tt> or
   <tt class="constant">:NEWEST</tt>)</dd></dl></div><p>A <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="unix-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center"><tt class="filename">"server:sub1.typ/sub2.typ/name.typ"</tt></td></tr><tr><td align="center">using defaults:</td><td align="center"><tt class="filename">       "sub1.typ/sub2.typ/name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">                         "name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">       "sub1.typ/**/sub3.typ/x*.lisp"</tt></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div></dd></dl></div>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32)--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><i class="replaceable"><tt>host</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>, wildcard characters may
   occur but do not act as wildcards</dd><dt><i class="replaceable"><tt>device</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <tt class="constant">:WILD</tt> or <tt class="filename">A</tt>|...|<tt class="filename">Z</tt>
 </dd><dt><tt class="sexp"><i class="replaceable"><tt>directory</tt></i> = (<i class="replaceable"><tt>startpoint</tt></i>
   . <i class="replaceable"><tt>subdirs</tt></i>)</tt></dt><dd><div class="informaltable"><a id="win32-dir-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><i class="replaceable"><tt>startpoint</tt></i></td><td align="center"><tt class="constant">:RELATIVE</tt> | <tt class="constant">:ABSOLUTE</tt></td></tr><tr><td align="center"><i class="replaceable"><tt>subdirs</tt></i></td><td align="center"><tt class="sexp">()</tt> | <tt class="sexp">(<i class="replaceable"><tt>subdir</tt></i>
   . <i class="replaceable"><tt>subdirs</tt></i>)</tt></td></tr><tr><td align="center"><i class="replaceable"><tt>subdir</tt></i></td><td align="center"><tt class="constant">:WILD-INFERIORS</tt></td><td align="center"><tt class="filename">**</tt> or
  <tt class="filename">...</tt>, all subdirectories </td></tr><tr><td align="center"><i class="replaceable"><tt>subdir</tt></i></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
   may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><i class="replaceable"><tt>name</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><i class="replaceable"><tt>type</tt></i></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>,
  may contain wildcard characters <tt class="filename">"?"</tt> and
  <tt class="filename">"*"</tt> (may also be specified as <tt class="constant">:WILD</tt>)</dd><dt><i class="replaceable"><tt>version</tt></i></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (may also be specified as <tt class="constant">:WILD</tt> or
   <tt class="constant">:NEWEST</tt>)</dd></dl></div><p>If <i class="replaceable"><tt>host</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <i class="replaceable"><tt>device</tt></i> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>A <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="win32-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center"><tt class="filename">"A:\sub1.typ\sub2.typ\name.typ"</tt></td></tr><tr><td align="center">using defaults:</td><td align="center"><tt class="filename">  "\sub1.typ\sub2.typ\name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">                     "name.typ"</tt></td></tr><tr><td align="center">or</td><td align="center"><tt class="filename">"*:\sub1.typ\**\sub3.typ\x*.lisp"</tt></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div><p>Instead of <tt class="filename">"\"</tt> one may use <tt class="filename">"/"</tt>, as usual for DOS
 calls.</p><p>If <i class="replaceable"><tt>host</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and the <i class="replaceable"><tt>directory</tt></i>'s <i class="replaceable"><tt>startpoint</tt></i>
 is not <tt class="constant">:ABSOLUTE</tt>, <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a>
 <i class="replaceable"><tt>pathname</tt></i>))</tt> will not be the same as <i class="replaceable"><tt>pathname</tt></i>.</p></dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
    platforms only.</dt><dd>The wildcard characters: <tt class="filename">"*"</tt> matches any
 sequence of characters, <tt class="filename">"?"</tt> matches any one character.
 </dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT--><p><a id="name-type-split"></a><b>Name/type namestring split. </b></p><div class="variablelist"><dl><dt>Platform dependent:  <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><p>A filename is split into name and type according to the
 following rule: </p><div class="itemizedlist"><ul type="disc"><li>if there is no <tt class="filename">"."</tt> in the filename, then the
   <i class="replaceable"><tt>name</tt></i> is everything, <i class="replaceable"><tt>type</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>;</li><li>if there is a <tt class="filename">"."</tt>, then <i class="replaceable"><tt>name</tt></i> is the part
   before and <i class="replaceable"><tt>type</tt></i> the part after the last dot.</li><li><p>if the only <tt class="filename">"."</tt> is the first character, then
   the behavior depends on the value of the user variable
    <strong class="first"><i class="firstterm"><a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a></i></strong>
   which can be either
   </p><div class="variablelist"><dl><dt><tt class="constant">:TYPE</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <i class="replaceable"><tt>name</tt></i>, everything after the <tt class="filename">"."</tt>
     is the <i class="replaceable"><tt>type</tt></i>; or</dd><dt><tt class="constant">:NAME</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <i class="replaceable"><tt>type</tt></i>, everything is the
     <i class="replaceable"><tt>name</tt></i></dd></dl></div><p>
   </p></li></ul></div><p>Due to this name/type splitting rule, there are pathnames that
 cannot result from <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a>.
 To get a pathname whose type contains a dot or whose name contains a
 dot and whose type is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> must be used.  Example:
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a> <tt class="constant">:NAME</tt> "foo.bar")</tt>.
 </p></dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="unspecific"></a>19.2. :UNSPECIFIC as a Component Value
 <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-2-2-3.html" target="_top">[CLHS-19.2.2.2.3]</a></h2></div></div><div></div></div><p>The symbol <tt class="constant">:UNSPECIFIC</tt> is not permitted as a
 pathname component for any slot of any pathname.
 It is also illegal to pass it as an argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><tt class="function">MAKE-PATHNAME</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-external-notation"></a>19.3. External notation.</h2></div></div><div></div></div><p>External notation of pathnames (cf. <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a>), of course without spaces, [,],{,}:</p><div class="variablelist">
<!--#ifdef PATHNAME_UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><div class="informaltable"><a id="unix-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ <tt class="filename">"/"</tt> ]</td><td align="center"><tt class="filename">"/"</tt> denotes absolute pathnames</td></tr><tr><td align="center">{ <i class="replaceable"><tt>name</tt></i><tt class="filename">"/"</tt> }</td><td align="center">each one a subdirectory</td></tr><tr><td align="center">[ <i class="replaceable"><tt>name</tt></i> [<tt class="filename">"."</tt><i class="replaceable"><tt>type</tt></i>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
 (consisting of printing <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters, except <tt class="filename">"/"</tt>).</p></dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32--><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="informaltable"><a id="win32-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ [<i class="replaceable"><tt>drivespec</tt></i>] : ]</td><td align="center">a letter <tt class="filename">"*"</tt>|<tt class="filename">a</tt>|...|<tt class="filename">z</tt>|<tt class="filename">A</tt>|...|<tt class="filename">Z</tt></td></tr><tr><td align="center">{ <i class="replaceable"><tt>name</tt></i> [. <i class="replaceable"><tt>type</tt></i>] \ }</td><td align="center">each one a subdirectory, <tt class="filename">"\"</tt> may be
     replaced by <tt class="filename">"/"</tt></td></tr><tr><td align="center">[ <i class="replaceable"><tt>name</tt></i> [. <i class="replaceable"><tt>type</tt></i>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
 (consisting of printing <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters, except <tt class="filename">"/"</tt>,
 <tt class="filename">"\"</tt>, <tt class="filename">":"</tt>).</p></dd>
<!--#endif-->
</dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a> has an optional flag argument: <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><tt class="function">NAMESTRING</tt></a> <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt> returns an external
 notation suitable for passing to the operating system or other
 programs.</p>
<!--#if !defined(USER_HOMEDIR)--><div class="variablelist"><dl><dt>Platform dependent: unknown platforms only.</dt><dd>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_user-homedir-pathname.html" target="_top"><tt class="function">USER-HOMEDIR-PATHNAME</tt></a> is not implemented.
</dd></dl></div>
<!--#endif-->
</div>
<!--#ifdef LOGICAL_PATHNAMES--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="log-path"></a>19.4. Logical Pathnames
   <a href="http://www.lisp.org/HyperSpec/Body/sec_19-3.html" target="_top">[CLHS-19.3]</a></h2></div></div><div></div></div><p>When the argument of the function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html" target="_top"><tt class="function">TRANSLATE-LOGICAL-PATHNAME</tt></a> is
 a string, it is interpreted as a logical pathname string.</p></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="filename-dict"></a>19.5. The Filenames Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html" target="_top">[CLHS-19.4]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <tt class="function">TRANSLATE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#parsename">19.5.2. Function <tt class="function">PARSE-NAMESTRING</tt></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.3. Function <tt class="function">MERGE-PATHNAMES</tt></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.4. Function <tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></span></dt></dl></div><p><a id="path-des"></a><b>Pathname Designators. </b>When <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> is also treated as a
  <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pathname_designator" target="_top">pathname
   designator</a>, namely its <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><tt class="function">SYMBOL-NAME</tt></a> is converted to the
  operating system's preferred pathname case.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a> always returns a physical pathname.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a> does not interpret missing components as
  wild.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="translate-pathname"></a>19.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a> has two additional keywords: <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><tt class="function">TRANSLATE-PATHNAME</tt></a> <i class="replaceable"><tt>source</tt></i>
 <i class="replaceable"><tt>from-wildname</tt></i>
 <i class="replaceable"><tt>to-wildname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:ALL</tt>
 <tt class="constant">:MERGE</tt>)</tt></p><p>If <tt class="constant">:ALL</tt> is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, a list of all resulting
 pathnames, corresponding to all matches of <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><tt class="function">PATHNAME-MATCH-P</tt></a> <i class="replaceable"><tt>source</tt></i>
 <i class="replaceable"><tt>from-wildname</tt></i>)</tt>, is returned.  If
 <tt class="constant">:MERGE</tt> is specified and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, unspecified pieces of
 <i class="replaceable"><tt>to-pathname</tt></i> are not replaced by
 corresponding pieces of <i class="replaceable"><tt>source</tt></i>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="parsename"></a>19.5.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><tt class="function">PARSE-NAMESTRING</tt></a> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
   <i class="replaceable"><tt>host</tt></i> <i class="replaceable"><tt>defaults</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <i class="replaceable"><tt>start</tt></i> <i class="replaceable"><tt>end</tt></i>
   <i class="replaceable"><tt>junk-allowed</tt></i>)</tt>
 returns a logical pathname only if <i class="replaceable"><tt>host</tt></i> is a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#logical_host" target="_top">logical host</a>
 or <i class="replaceable"><tt>host</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <i class="replaceable"><tt>defaults</tt></i> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><tt class="classname">LOGICAL-PATHNAME</tt></a>.
 To construct a logical pathname from a string, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><tt class="function">LOGICAL-PATHNAME</tt></a> can be used.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior of recognizing logical pathnames when
 the <i class="replaceable"><tt>string</tt></i> begins with some alphanumeric characters followed by a
 colon (<span class="keysym">#\:</span>) can be very confusing
 (cf. <tt class="filename">"c:/autoexec.bat"</tt>,
 <tt class="filename">"home:.clisprc"</tt> and
 <tt class="filename">"prep:/pub/gnu"</tt>)
 and therefore is disabled by default.
 To enable the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior, you should set <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathmerge"></a>19.5.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> <i class="replaceable"><tt>pathname</tt></i>
   [<i class="replaceable"><tt>default-pathname</tt></i>])</tt> returns a
   logical pathname only if
 <i class="replaceable"><tt>default-pathname</tt></i> is a logical pathname.
 To construct a logical pathname from a string, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><tt class="function">LOGICAL-PATHNAME</tt></a> can be used.</p><p>When both <i class="replaceable"><tt>pathname</tt></i> and <i class="replaceable"><tt>default-pathname</tt></i>
 are relative pathnames, the behavior depends on <a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>: when it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, then <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> retains its traditional behavior:
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt>
 evaluates to <tt class="filename">#P"x/"</tt></p><p><b>Rationale. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> is used to specify default components for
 pathnames, so there is some analogy between
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b)</tt> and
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b)</tt>.  Obviously, putting in the
 same default a second time should do the same as putting it in once:
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b b)</tt> is the same as
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a> a b)</tt>, so
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b) b)</tt>
 should be the same as
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> a b)</tt>.</p><p>(This question actually does matter because in <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> there is no
 distinction between “<span class="quote">pathnames with defaults merged-in</span>” and
 “<span class="quote">pathnames with defaults not yet applied</span>”.)</p><p>Now, <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a>
 #P"x/" #P"y/") #P"y/")</tt> and <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt> are <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><tt class="function">EQUAL</tt></a>
 in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> (when <a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>), but not in implementations that
 strictly follow the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] spec.  In fact, the above twice-default =
 once-default rule holds for all pathnames in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p><p>Reversely, when <a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 the normal [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior is exhibited:
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><tt class="function">MERGE-PATHNAMES</tt></a> #P"x/" #P"y/")</tt>
 evaluates to <tt class="filename">#P"y/x/"</tt>.</p><p><b>Rationale. </b>“<span class="quote">merge</span>” is <span class="emphasis"><em>merge</em></span> and
 not <span class="emphasis"><em>or</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="load-lpt"></a>19.5.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></h3></div></div><div></div></div><p>When the <i class="replaceable"><tt>host</tt></i> argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a>
is not a defined logical host yet, we proceed as follows:
</p><div class="orderedlist"><ol type="1"><li>If both <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s
  <tt class="envar">LOGICAL_HOST_<i class="replaceable"><tt>host</tt></i>_FROM</tt> and
  <tt class="envar">LOGICAL_HOST_<i class="replaceable"><tt>host</tt></i>_TO</tt> exist, then their values
  define the map of the <i class="replaceable"><tt>host</tt></i>.</li><li>If the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>
  <tt class="envar">LOGICAL_HOST_<i class="replaceable"><tt>host</tt></i></tt> exists, its value is read from,
  and the result is passed to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a>)</tt>.</li><li>Variable <a href="#load-lpt" title="19.5.4.&#xA0;Function LOAD-LOGICAL-PATHNAME-TRANSLATIONS"><tt class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</tt></a> is consulted.
  Its value should be a list of files and/or directories,
  which are searched for in the <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>, just like for <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>.
  When the element is a file, it is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> from,
  <a href="http://www.franz.com/support/documentation/6.0/doc/pathnames.htm#load-logical-pathname-translations-2" target="_top">Allegro CL-style</a>,
  odd objects being host names and even object being their
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a>.
  When the element is a directory, a file, named <tt class="filename"><i class="replaceable"><tt>host</tt></i></tt>
  or <tt class="filename"><i class="replaceable"><tt>host</tt></i>.host</tt>, in that directory, is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a>
  from once, <a href="http://cvs2.cons.org/ftp-area/cmucl/doc/cmu-user/extensions.html#logical-pathnames" target="_top">CMUCL-style</a>,
  the object read being the
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><tt class="function">LOGICAL-PATHNAME-TRANSLATIONS</tt></a> of the <i class="replaceable"><tt>host</tt></i>.</li></ol></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="files"></a>Chapter 20. Files
   <a href="http://www.lisp.org/HyperSpec/Body/chap-20.html" target="_top">[CLHS-20]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="file-dict"></a>20.1. The Files Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html" target="_top">[CLHS-20.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dir">20.1.1. Function <tt class="function">DIRECTORY</tt></a></span></dt></dl></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html" target="_top"><tt class="function">RENAME-FILE</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html" target="_top"><tt class="function">RENAME-FILE</tt></a> always returns a non-logical pathname as
 its first value.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a> cannot be used to check whether a directory exists.
 Use functions <a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> for this.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><tt class="function">FILE-AUTHOR</tt></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><tt class="function">FILE-AUTHOR</tt></a> always returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, because the operating systems
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is ported to do not store a file's author in the file system.
 Some operating systems, such as Unix, have the notion of a file's
 owner, and some other <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> implementations return the user name of the
 file owner.  <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> does not do this, because
 <span class="emphasis"><em>owner</em></span> and <span class="emphasis"><em>author</em></span> are not the
 same; in particular, authorship is preserved by copying, while
 ownership is not.</p><p><a id="probe-dir"></a><b>Function <a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a>. </b><tt class="sexp">(<a href="#probe-dir"><tt class="function">EXT:PROBE-DIRECTORY</tt></a> <i class="replaceable"><tt>pathname</tt></i>)</tt> tests
 whether <i class="replaceable"><tt>pathname</tt></i> exists and is a directory.
 It will, unlike <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><tt class="function">PROBE-FILE</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><tt class="function">TRUENAME</tt></a>, not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>
 if the parent directory of <i class="replaceable"><tt>pathname</tt></i> does not exist.</p><p><a id="del-file"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><tt class="function">DELETE-FILE</tt></a>. </b><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><tt class="function">DELETE-FILE</tt></a> <i class="replaceable"><tt>pathname</tt></i>)</tt> deletes
 the pathname <i class="replaceable"><tt>pathname</tt></i>, not its <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><tt class="function">TRUENAME</tt></a>, and returns the absolute
 pathname it actually removed or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <i class="replaceable"><tt>pathname</tt></i> did not exist.
 When <i class="replaceable"><tt>pathname</tt></i> points to a file which is currently open in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, an
 <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dir"></a>20.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  :FULL :CIRCLE <tt class="constant">:IF-DOES-NOT-EXIST</tt>)</tt> can run in two modes:
</p><div class="itemizedlist"><ul type="disc"><li>If <i class="replaceable"><tt>pathname</tt></i> contains no name or type component, a
  list of all matching directories is produced.
  E.g., <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "/etc/*/")</tt> lists
  all subdirectories in the directory
  <tt class="filename">#P"/etc/"</tt>.</li><li>Otherwise a list of all matching files is returned.
  E.g., <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "/etc/*")</tt> lists all
  regular files in the directory <tt class="filename">#P"/etc/"</tt>.
  If the <tt class="constant">:FULL</tt> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
  additional information is returned: for each matching file you get a
  list of at least four elements <tt class="sexp">(<i class="replaceable"><tt>file-pathname</tt></i>
  <i class="replaceable"><tt>file-truename</tt></i>
  <i class="replaceable"><tt>file-write-date-as-decoded-time</tt></i>
  <i class="replaceable"><tt>file-length</tt></i>)</tt>.</li></ul></div><p>

If you want <span class="emphasis"><em>all</em></span> the files <span class="emphasis"><em>and</em></span>
subdirectories in the current directory, you should use
<tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "*/") (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "*"))</tt>.
If you want all the files and subdirectories in all the subdirectories
under the current directory
(similar to the <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/ls.html" target="_top"><span><b class="command">ls</b></span></a> <tt class="option">-R</tt> <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> command),
use <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><tt class="function">NCONC</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "**/")
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> "**/*"))</tt>.


<!--#ifdef UNIX-->
</p><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>If the <tt class="constant">:CIRCLE</tt> argument is
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the function avoids endless loops that may result from
 symbolic links.</dd></dl></div><p>

<!--#endif-->


The argument <tt class="constant">:IF-DOES-NOT-EXIST</tt> controls the treatment of links
pointing to non-existent files and can take the following values:
</p><div class="variablelist"><dl><dt><tt class="constant">:DISCARD</tt> (default)</dt><dd>discard the bad directory entries
</dd><dt><tt class="constant">:ERROR</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> on bad directory entries
   (this corresponds to the default behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a> in <a href="http://www.cons.org/cmucl" target="_top"><span><b class="command">CMU CL</b></span></a>)
</dd><dt><tt class="constant">:KEEP</tt></dt><dd>keep bad directory entries in the returned list
   (this roughly corresponds to the <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a>
    ... <tt class="constant">:TRUNAMEP</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)</tt> call in <a href="http://www.cons.org/cmucl" target="_top"><span><b class="command">CMU CL</b></span></a>)
</dd><dt><tt class="constant">:IGNORE</tt></dt><dd>Similar to <tt class="constant">:DISCARD</tt>, but also
   do not signal an error when a directory is unaccessible (contrary to
   the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] specification).</dd></dl></div><p>

</p><p><b>Function <tt class="function">EXT:DIR</tt>. </b><tt class="sexp">(<tt class="function">EXT:DIR</tt> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>pathname</tt></i>)</tt> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><tt class="function">DIRECTORY</tt></a>, but displays the pathnames
 instead of returning them. <tt class="sexp">(EXT:DIR)</tt>
 shows the contents of the current directory.</p><p><a id="cd"></a><b>Function <a href="#cd"><tt class="function">EXT:CD</tt></a>. </b><tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a> <i class="replaceable"><tt>pathname</tt></i>)</tt> sets it,
 <tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a>)</tt> returns it.
</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a> [<i class="replaceable"><tt>pathname</tt></i>])</tt>
   manages the current directory.</dd>
<!--#else--><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a> [<i class="replaceable"><tt>pathname</tt></i>])</tt>
   manages the current device and the current directory.
   </dd>
<!--#endif-->
</dl></div><p><b>Function <tt class="function">EXT:DEFAULT-DIRECTORY</tt>. </b><tt class="sexp">(<tt class="function">EXT:DEFAULT-DIRECTORY</tt>)</tt> is
 equivalent to <tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a>)</tt>.  <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<tt class="function">EXT:DEFAULT-DIRECTORY</tt>)
 <i class="replaceable"><tt>pathname</tt></i>)</tt> is equivalent to <tt class="sexp">(<a href="#cd"><tt class="function">EXT:CD</tt></a>
 <i class="replaceable"><tt>pathname</tt></i>)</tt>, except for the return value.</p><p><b>Function <tt class="function">EXT:MAKE-DIR</tt>. </b><tt class="sexp">(<tt class="function">EXT:MAKE-DIR</tt>
 <i class="replaceable"><tt>directory-pathname</tt></i>)</tt>
 creates a new subdirectory.</p><p><b>Function <tt class="function">EXT:DELETE-DIR</tt>. </b><tt class="sexp">(<tt class="function">EXT:DELETE-DIR</tt>
 <i class="replaceable"><tt>directory-pathname</tt></i>)</tt> removes an
 (empty) subdirectory.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="streams"></a>Chapter 21. Streams
   <a href="http://www.lisp.org/HyperSpec/Body/chap-21.html" target="_top">[CLHS-21]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction.</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="streams-interactive"></a>21.1. Interactive Streams
 <a href="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html" target="_top">[CLHS-21.1.1.1.3]</a></h2></div></div><div></div></div><p>Interactive streams are those whose next input might depend on a
 prompt one might output.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="terminal"></a>21.2. Terminal interaction.</h2></div></div><div></div></div>
<!--#ifdef GNU_READLINE--><div class="variablelist"><p class="title"><b><a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a></b></p><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms
    only, and only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built <strong>without</strong> compile-time flag <strong><tt class="option">NO_READLINE</tt></strong>
    (and when <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> is installed on your machine already).</dt><dd>Input through <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> uses the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a>
  library.  Arrow keys can be used to move within the input history.
  The <span class="keysym">#\Tab</span> key completes the <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> name or
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a> that is being typed.
  See <a href="http://cnswww.cns.cwru.edu/~chet/readline/rluserman.html" target="_top">readline user manual</a> for general details and
  <a href="clisp.html#clisp">clisp(1)</a> for <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>-specific extensions.
  The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library is not used if standard input and standard
  output do not both refer to the same terminal.</dd></dl></div>
<!--#endif-->
<!--#if defined(KEYBOARD)--><div class="variablelist"><p class="title"><b>Macro <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a></b></p><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> is not the only stream that
 communicates directly with the user: During execution of the body of a
 <tt class="sexp">(<a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> . <i class="replaceable"><tt>body</tt></i>)</tt> form,
 <strong class="first"><i class="firstterm"><a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a></i></strong> is the stream that reads the
 keystrokes from the keyboard.
 It returns every keystroke in detail, as <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or
 <a href="#input-char" title="13.1.&#xA0;Attributes"><tt class="classname">SYS::INPUT-CHARACTER</tt></a> with the following bits:
</p><div class="variablelist">
<!--#ifdef WIN32--><dl><dt><tt class="constant">:hyper</tt></dt><dd><span class="emphasis"><em>(Platform dependent:
   <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span>
   if a non-standard key.  These keys are:

<!--#ifdef WIN32-->
   <span class="emphasis"><em>[<a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>]:</em></span>
   Function keys, cursor keypads, numeric keypad.

<!--#endif-->

   </dd>
<!--#endif--><dt>slot <i class="replaceable"><tt>key</tt></i></dt><dd><p>the key name, for non-standard keys:
      </p><div class="variablelist">
<!--#if defined(UNIX) || defined(WIN32)--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
         platforms only.</dt><dd><div class="informaltable"><a id="unix-kbd-keys"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><span class="keycode">F1</span>..<span class="keycode">F12</span></td><td align="center"><tt class="constant">:F1</tt>..<tt class="constant">:F12</tt></td></tr><tr><td align="center"><span class="keycode">Insert</span></td><td align="center"><tt class="constant">:Insert</tt></td></tr><tr><td align="center"><span class="keycode">Delete</span></td><td align="center"><tt class="constant">:Delete</tt></td></tr><tr><td align="center"><span class="keycode">Home</span></td><td align="center"><tt class="constant">:Home</tt></td></tr><tr><td align="center"><span class="keycode">End</span></td><td align="center"><tt class="constant">:End</tt></td></tr><tr><td align="center"><span class="keycode">Center</span></td><td align="center"><tt class="constant">:Center</tt></td></tr><tr><td align="center"><span class="keycode">PgUp</span></td><td align="center"><tt class="constant">:PgUp</tt></td></tr><tr><td align="center"><span class="keycode">PgDn</span></td><td align="center"><tt class="constant">:PgDn</tt></td></tr><tr><td align="center">Arrow keys</td><td align="center"><tt class="constant">:Left</tt><tt class="constant">:Right</tt><tt class="constant">:Up</tt><tt class="constant">:Down</tt></td></tr></tbody></table></div></dd>
<!--#endif-->
</dl></div></dd><dt>slot <i class="replaceable"><tt>char</tt></i></dt><dd>the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> code for standard keys
    </dd>
<!--#ifdef WIN32--><dt><tt class="constant">:super</tt></dt><dd><span class="emphasis"><em>(Platform dependent:
     <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span>
  if pressed together with <span><b class="keycap">Shift</b></span> key(s) and if the keystroke would
  have been an other without <span><b class="keycap">Shift</b></span>.</dd>
<!--#endif--><dt><tt class="constant">:control</tt></dt><dd>if pressed together with the <span><b class="keycap">Control</b></span> key.
   </dd>
<!--#ifdef WIN32--><dt><tt class="constant">:meta</tt></dt><dd><span class="emphasis"><em>(Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
    platforms only.)</em></span> if pressed together with the <span><b class="keycap">Alternate</b></span> key.
  </dd>
<!--#endif-->
</dl></div><p>

 This keyboard input is not echoed on the screen.  During execution of a
 <tt class="sexp">(<a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> . <i class="replaceable"><tt>body</tt></i>)</tt> form, no input from
 <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> or any synonymous stream should be requested.</p></dd></dl></div>
<!--#endif-->
<p>See also <a href="#screen" title="30.1.&#xA0;Extensions-2.1. Random Screen Access">Random Screen Access</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="stream-dict"></a>21.3. The Streams Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html" target="_top">[CLHS-21.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <tt class="function">STREAM-ELEMENT-TYPE</tt></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <tt class="function">EXT:MAKE-STREAM</tt></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <tt class="function">READ-BYTE</tt>,
  <tt class="function">EXT:READ-INTEGER</tt> &amp; <tt class="function">EXT:READ-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <tt class="function">WRITE-BYTE</tt>,
  <tt class="function">EXT:WRITE-INTEGER</tt> &amp; <tt class="function">EXT:WRITE-FLOAT</tt></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <tt class="function">FILE-POSITION</tt></a></span></dt><dt><span class="section"><a href="#open">21.3.8. Function  <tt class="function">OPEN</tt></a></span></dt><dt><span class="section"><a href="#close">21.3.9. Function <tt class="function">CLOSE</tt></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.10. Function <tt class="function">OPEN-STREAM-P</tt></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.11. Class <tt class="classname">BROADCAST-STREAM</tt></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.12. Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-eltype"></a>21.3.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a></h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bin-stdio">21.3.1.1. Binary input from <tt class="varname">*STANDARD-INPUT*</tt></a></span></dt></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able. The <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s created by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>, <a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-INPUT-STREAM</tt></a>
  <a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a>, <a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>, <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a>, <a href="#so-connect"><tt class="function">SOCKET:SOCKET-CONNECT</tt></a>
  can be modified, if the old and the new <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>s are either
</p><div class="itemizedlist"><ul type="disc"><li>both equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or
      <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>; or</li><li>both equivalent to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt> or
      <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt>, with the same <i class="replaceable"><tt>n</tt></i>.</li></ul></div><p>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> and <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt> are <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>s, see
 section <a href="#gray" title="29.5.1.&#xA0;Gray streams">"Gray streams"</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bin-stdio"></a>21.3.1.1. Binary input from <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a></h4></div></div><div></div></div><p>Note that you cannot change <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> for some
 built-in streams, such as <a href="#terminal" title="21.2.&#xA0;Terminal interaction.">terminal streams</a>,
 which is normally the value of <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>.
 Since <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a> normally is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><tt class="classname">SYNONYM-STREAM</tt></a> pointing
 to <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>, you cannot use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> in the it.</p><p>Since <a href="http://hoohoo.ncsa.uiuc.edu/cgi/" target="_top">CGI</a>
 (Common Gateway Interface) provides the form data for
 <span><b class="command">METHOD="POST"</b></span> on the stdin,
 and the server will <span class="emphasis"><em>not</em></span> send you an <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> on the end of the data,
 you will need to use
 <tt class="sexp">(<a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a> <tt class="envar">"CONTENT_LENGTH"</tt>)</tt>
 to determine how much data you should read from stdin.
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will detect that stdin is not a terminal and create a regular
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a> which can be passed to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((buf (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><tt class="function">MAKE-ARRAY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><tt class="function">PARSE-INTEGER</tt></a> (<a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a> "CONTENT_LENGTH"))
                       :element-type <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>)))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a> (in (<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> <tt class="constant">:INPUT</tt> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>))
    (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a> buf in))
  buf)
</pre></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-stream"></a>21.3.2. Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a></h3></div></div><div></div></div><p>Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> creates a Lisp stream out of an OS file
 handle: <tt class="sexp">(<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a> <i class="replaceable"><tt>object</tt></i> <tt class="constant">:DIRECTION</tt>
  <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></p><p><i class="replaceable"><tt>object</tt></i> designates an OS handle (a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>),
 and should be one of the following:
 </p><div class="variablelist"><dl><dt>number</dt><dd>denotes the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a> of this value
  </dd><dt><tt class="constant">:INPUT</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> process standard input
  </dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> process standard output
  </dd><dt><tt class="constant">:ERROR</tt></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> process standard error
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a></dt><dd>denotes the handle of this stream, which should be
    a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a> or a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>
  </dd></dl></div><p>The handle is duplicated (with <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html" target="_top"><tt class="function">dup/dup2</tt></a>), so it is safe to <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> returned by <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><tt class="function">EXT:MAKE-STREAM</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-input"></a>21.3.3. Binary input, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>,
  <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> &amp; <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-FLOAT</tt></a></h3></div></div><div></div></div><p>The function <tt class="sexp">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> <i class="replaceable"><tt>stream</tt></i>
    <i class="replaceable"><tt>element-type</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><i class="replaceable"><tt>ENDIANNESS</tt></i></a> <i class="replaceable"><tt>eof-error-p</tt></i> <i class="replaceable"><tt>eof-value</tt></i>)</tt>
 reads a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> from <i class="replaceable"><tt>stream</tt></i>.
 <i class="replaceable"><tt>stream</tt></i> should be a stream with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 <i class="replaceable"><tt>element-type</tt></i> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt>, where
 <i class="replaceable"><tt>n</tt></i> is a multiple of 8.</p><p><tt class="sexp">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-INTEGER</tt></a> <i class="replaceable"><tt>stream</tt></i>
 <i class="replaceable"><tt>element-type</tt></i>)</tt> is like <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>
 <i class="replaceable"><tt>stream</tt></i>)</tt> if <i class="replaceable"><tt>stream</tt></i>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> were set to
 <i class="replaceable"><tt>element-type</tt></i>, except that <i class="replaceable"><tt>stream</tt></i>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> will increase by
 <sup><i class="replaceable"><tt>n</tt></i></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>, this function permits mixed
 character/binary input from a stream.</p><p>The function <tt class="sexp">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt class="function">EXT:READ-FLOAT</tt></a> <i class="replaceable"><tt>stream</tt></i>
    <i class="replaceable"><tt>element-type</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><i class="replaceable"><tt>ENDIANNESS</tt></i></a> <i class="replaceable"><tt>eof-error-p</tt></i> <i class="replaceable"><tt>eof-value</tt></i>)</tt>
 reads a floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>
 binary representation from <i class="replaceable"><tt>stream</tt></i>.
 <i class="replaceable"><tt>stream</tt></i> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 <i class="replaceable"><tt>element-type</tt></i> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>.</p><p><a id="endianness"></a><b>Endianness. </b><a href="#endianness"><i class="replaceable"><tt>ENDIANNESS</tt></i></a> can be <tt class="constant">:LITTLE</tt>
 or <tt class="constant">:BIG</tt>.  The default is
 <tt class="constant">:LITTLE</tt>, which corresponds to the <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>
 behavior in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-output"></a>21.3.4. Binary output, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a>,
  <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a> &amp; <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-FLOAT</tt></a></h3></div></div><div></div></div><p>The function <tt class="sexp">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a>
    <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>element-type</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><i class="replaceable"><tt>ENDIANNESS</tt></i></a>)</tt>
 writes a multi-byte integer to <i class="replaceable"><tt>stream</tt></i>.
 <i class="replaceable"><tt>stream</tt></i> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 <i class="replaceable"><tt>element-type</tt></i> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt>, where
 <i class="replaceable"><tt>n</tt></i> is a multiple of 8.</p><p><tt class="sexp">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-INTEGER</tt></a> <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>stream</tt></i>
 <i class="replaceable"><tt>element-type</tt></i>)</tt> is like <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a>
 <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>stream</tt></i>)</tt> if <i class="replaceable"><tt>stream</tt></i>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 were set to <i class="replaceable"><tt>element-type</tt></i>, except that <i class="replaceable"><tt>stream</tt></i>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> will
 increase by <sup><i class="replaceable"><tt>n</tt></i></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)</tt>, this function permits mixed
  character/binary output to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.</p><p>The function <tt class="sexp">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt class="function">EXT:WRITE-FLOAT</tt></a>
    <i class="replaceable"><tt>float</tt></i> <i class="replaceable"><tt>stream</tt></i>
    <i class="replaceable"><tt>element-type</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#endianness"><i class="replaceable"><tt>ENDIANNESS</tt></i></a>)</tt>
 writes a floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>
 binary representation to <i class="replaceable"><tt>stream</tt></i>.
 <i class="replaceable"><tt>stream</tt></i> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
 <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 <i class="replaceable"><tt>element-type</tt></i> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bulk-io"></a>21.3.5. Bulk Input and Output</h3></div></div><div></div></div><p><a id="read-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a>, the following two
 functions are provided:
</p><div class="variablelist"><dl><dt><a id="rd-by-seq"></a><a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> operations:</dt><dd><p><tt class="sexp">(<a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a> <i class="replaceable"><tt>sequence</tt></i>
   <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt> :NO-HANG)</tt> fills the
   subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s consecutively read from <i class="replaceable"><tt>stream</tt></i>.  It returns the
   index of the first element of <i class="replaceable"><tt>sequence</tt></i> that was not updated (=
   <i class="replaceable"><tt>end</tt></i> or &lt; <i class="replaceable"><tt>end</tt></i> if the <i class="replaceable"><tt>stream</tt></i> reached its end).
   When <tt class="constant">:NO-HANG</tt> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, does not block:
   treat input unavailability as <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>.</p><p>This function is especially efficient if <i class="replaceable"><tt>sequence</tt></i> is a
   <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> and <i class="replaceable"><tt>stream</tt></i> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 </p></dd><dt><a id="rd-ch-seq"></a><a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> operations:</dt><dd><p><tt class="sexp">(<a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a> <i class="replaceable"><tt>sequence</tt></i>
  <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt> fills the
  subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with
  characters consecutively read from <i class="replaceable"><tt>stream</tt></i>.  It returns the index
  of the first element of <i class="replaceable"><tt>sequence</tt></i> that was not updated (= <i class="replaceable"><tt>end</tt></i>
  or &lt; <i class="replaceable"><tt>end</tt></i> if the <i class="replaceable"><tt>stream</tt></i> reached its end).</p><p>This function is especially efficient if <i class="replaceable"><tt>sequence</tt></i> is a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and <tt class="constant">:STREAM</tt> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> stream with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><tt class="classname">STRING-STREAM</tt></a>.
  </p></dd></dl></div><p><a id="write-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>, the following two
functions are provided:
</p><div class="variablelist"><dl><dt><a id="wr-by-seq"></a><a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><tt class="function">WRITE-BYTE</tt></a> operations:</dt><dd><p><tt class="sexp">(<a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> <i class="replaceable"><tt>sequence</tt></i>
  <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt> outputs the
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s of the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by
  <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <tt class="constant">:STREAM</tt>. It returns <i class="replaceable"><tt>sequence</tt></i>.</p><p>This function is especially efficient if <i class="replaceable"><tt>sequence</tt></i> is a
  <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> and <i class="replaceable"><tt>stream</tt></i> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a>
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt>.
 </p></dd><dt><a id="wr-ch-seq"></a><a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a>
  performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a> operations:</dt><dd><p><tt class="sexp">(<a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> <i class="replaceable"><tt>sequence</tt></i>
  <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>  :NO-HANG)</tt> outputs the
  characters of the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by <tt class="constant">:START</tt>
  and <tt class="constant">:END</tt> to <tt class="constant">:STREAM</tt>.
  When <tt class="constant">:NO-HANG</tt> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, does not block.
  Returns two values: <i class="replaceable"><tt>sequence</tt></i> and the index of the first byte that
  was not output.</p><p>This function is especially efficient if <i class="replaceable"><tt>sequence</tt></i> is a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and <tt class="constant">:STREAM</tt> is a <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>
  with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.
  </p></dd></dl></div><p><a id="bulk-io-rationale"></a><b>Rationale. </b>The rationale for <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>, <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>, <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> and
 <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> is that some <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s support both character and binary
 i/o, and when you read into a <a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><tt class="classname">SEQUENCE</tt></a> that can hold both (e.g.,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>) you cannot determine which kind of
 input to use.  In such situation <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><tt class="function">READ-SEQUENCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><tt class="function">WRITE-SEQUENCE</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>, while <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>, <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>, <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a> and
 <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a> work just fine.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="non-block-io"></a>21.3.6. Non-Blocking Input and Output</h3></div></div><div></div></div><p>In addition to the standard functions <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a>, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</p><div class="variablelist"><dl><dt><a id="rcwhp"></a><tt class="sexp">(<a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a>
    <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p><a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> queries the stream's input status.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html" target="_top"><tt class="function">PEEK-CHAR</tt></a> with a
  <i class="replaceable"><tt>peek-type</tt></i> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> will return immediately.
  Otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.  (In the latter case the standard
  <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> function would return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.)</p><p>Note the difference with <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><tt class="function">NOT</tt></a>
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a> <i class="replaceable"><tt>stream</tt></i>))</tt>: When the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>
  returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, whereas <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>Note also that <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> is not a good way to test for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>:
  If <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, this does not mean that the <i class="replaceable"><tt>stream</tt></i> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <i class="replaceable"><tt>stream</tt></i> is already at <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>, or will deliver
  more characters.</p></dd><dt><a id="rbla"></a><tt class="sexp">(<a href="#rbla"><tt class="function">EXT:READ-BYTE-LOOKAHEAD</tt></a>
    <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> result.
   Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is already known to be reached.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
   instead of waiting.</dd><dt><a id="rbwhp"></a><tt class="sexp">(<a href="#rbwhp"><tt class="function">EXT:READ-BYTE-WILL-HANG-P</tt></a>
    <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a> will return immediately.
   Otherwise it returns true.</dd><dt><a id="rbnh"></a><tt class="sexp">(<a href="#rbnh"><tt class="function">EXT:READ-BYTE-NO-HANG</tt></a>
    <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>eof-error-p</tt></i> <i class="replaceable"><tt>eof-value</tt></i>)</tt></dt><dd>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or does <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> handling, like <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>,
   if that would return immediately.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
   instead of waiting.</dd></dl></div></div>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY!= 0))--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-pos"></a>21.3.7. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a></h3></div></div><div></div></div><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
    platforms only.</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><tt class="function">FILE-POSITION</tt></a> works on any <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>.
  When a <span class="keysym">#\Newline</span> is output to (respectively input from) a file stream,
  its file position is increased by 2 since <span class="keysym">#\Newline</span> is encoded as
  <span class="keycode">CR</span>/<span class="keycode">LF</span> in the file.
</dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open"></a>21.3.8. Function  <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a> cannot handle files of size ≥ 4 GB.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a> accepts an additional keyword <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>.</p><div class="variablelist"><p class="title"><b>The acceptable values for the arguments to the
   <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> functions</b></p><dl><dt><a id="eltype"></a><a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a></dt><dd><p>types equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or
    <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt>, <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt>; if the stream is to be
    un<a href="#buffered"><tt class="constant">:BUFFERED</tt></a>, <i class="replaceable"><tt>n</tt></i> must be a multiple of 8.</p><p>If <i class="replaceable"><tt>n</tt></i> is not a multiple of 8, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <i class="replaceable"><tt>n</tt></i>-bit bytes) in the preamble.</p><p>This is done to ensure the input/output consistency:
    suppose you open a file with <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> of <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 3)</tt> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </p></dd><dt><a id="extfmt"></a><a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a></dt><dd><a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>s, (constant) <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s in the
   <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s (denoting <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>-based
   encodings), the symbol <tt class="constant">:DEFAULT</tt>, and the <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a> keywords
   <tt class="constant">:UNIX</tt>, <tt class="constant">:MAC</tt>, <tt class="constant">:DOS</tt>.  The default encoding is <a href="#def-file-enc"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>.
    This argument determines how the lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> data is
   converted to/from the 8-bit bytes that the underlying OS uses.
  </dd><dt><a id="buffered"></a><a href="#buffered"><tt class="constant">:BUFFERED</tt></a></dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, or <tt class="constant">:DEFAULT</tt>.
    Have <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  </p><div class="itemizedlist"><ul type="disc"><li>for functions that create <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s and
    <a href="#pipe" title="30.8.2.&#xA0;Pipes">pipes</a>, <tt class="constant">:DEFAULT</tt> is equivalent to
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; it you are transmitting a lot of data then using buffering
    will significantly speed up your i/o;</li><li>for functions that <a href="#open" title="21.3.8.&#xA0;Function  OPEN">open</a>
    files, <tt class="constant">:DEFAULT</tt> means that buffered file streams will be returned
    for regular files and (on Unix) block-devices, and unbuffered file
    streams for special files.</li></ul></div><p>
  Note that some files, notably those on the <tt class="filename">/proc</tt>
  filesystem (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> argument for them.  Actually, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> detects that
  the file is a <tt class="filename">/proc</tt> file, so that one is covered,
  but there are probably more strange beasts there!
</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="close"></a>21.3.9. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a></h3></div></div><div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>, see section
 <a href="#gray" title="29.5.1.&#xA0;Gray streams">"Gray streams"</a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> ignores its <tt class="constant">:ABORT</tt> argument.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html" target="_top"><tt class="function">GET-OUTPUT-STREAM-STRING</tt></a> returns the same value after
 <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> as it would before it.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> on an already closed <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> does nothing and returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p><p>If you do not <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> your <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> explicitly, it will be
 closed at <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion time automatically.
 This is not recommended though because <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is not deterministic.
 Please use <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a> etc.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open-stream-p"></a>21.3.10. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a></h3></div></div><div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><tt class="classname">GENERIC-FUNCTION</tt></a>, see section
 <a href="#gray" title="29.5.1.&#xA0;Gray streams">"Gray streams"</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="broadcast-stream"></a>21.3.11. Class <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html" target="_top"><tt class="function">INTERACTIVE-STREAM-P</tt></a> return false for
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><tt class="classname">BROADCAST-STREAM</tt></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-buffer"></a>21.3.12. Functions
  <tt class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</tt> and
  <tt class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</tt></h3></div></div><div></div></div><p><tt class="sexp">(EXT:MAKE-BUFFERED-OUTPUT-STREAM <i class="replaceable"><tt>function</tt></i>)</tt>
 returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.
 <i class="replaceable"><tt>function</tt></i> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> expecting one argument, a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><tt class="function">WRITE-CHAR</tt></a> collects the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s in a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, until a
 newline character is written or <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FORCE-OUTPUT</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FINISH-OUTPUT</tt></a> is called.
 Then <i class="replaceable"><tt>function</tt></i> is called with a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a> as argument,
 that contains the characters collected so far.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">CLEAR-OUTPUT</tt></a> dicards the characters collected so far.</p><p><tt class="sexp">(EXT:MAKE-BUFFERED-INPUT-STREAM <i class="replaceable"><tt>function</tt></i>
  <i class="replaceable"><tt>mode</tt></i>)</tt> returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.
 <i class="replaceable"><tt>function</tt></i> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of 0 arguments that returns
 either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (stands for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>) or up to three values
 <i class="replaceable"><tt>string</tt></i>, <i class="replaceable"><tt>start</tt></i>, <i class="replaceable"><tt>end</tt></i>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s of the current <i class="replaceable"><tt>string</tt></i> one
 after another, as delimited by <i class="replaceable"><tt>start</tt></i> and <i class="replaceable"><tt>end</tt></i>, which default to
 <tt class="literal">0</tt> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, respectively.
 When the <i class="replaceable"><tt>string</tt></i> is consumed, <i class="replaceable"><tt>function</tt></i> is called again.
 The <i class="replaceable"><tt>string</tt></i> returned by <i class="replaceable"><tt>function</tt></i> should not be changed,
 otherwise <i class="replaceable"><tt>function</tt></i> should copy the <i class="replaceable"><tt>string</tt></i> with <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><tt class="function">COPY-SEQ</tt></a>
 or <a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><tt class="function">SUBSEQ</tt></a> beforehand.
 <i class="replaceable"><tt>mode</tt></i> determines the behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>
 when the current <i class="replaceable"><tt>string</tt></i> buffer is empty:
 </p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>the stream acts like a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><tt class="classname">FILE-STREAM</tt></a>,
     i.e. <i class="replaceable"><tt>function</tt></i> is called</dd><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>the stream acts like an interactive stream without
     <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a>, i.e. one can assume that further characters will always
     arrive, without calling <i class="replaceable"><tt>function</tt></i></dd><dt><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a></dt><dd>this <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> tells, upon call, if further
     non-empty <i class="replaceable"><tt>string</tt></i>s are to be expected.</dd></dl></div><p>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><tt class="function">CLEAR-INPUT</tt></a> discards the rest of the current <i class="replaceable"><tt>string</tt></i>,
 so <i class="replaceable"><tt>function</tt></i> will be called upon the next <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> operation.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="printer"></a>Chapter 22. Printer
   <a href="http://www.lisp.org/HyperSpec/Body/chap-22.html" target="_top">[CLHS-22]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.2. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.3. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.4. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-dict">22.5. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.2. pathnames</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.3. Miscellaneous Issues</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="multi-rep"></a>22.1. Multiple Possible Textual Representations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html" target="_top">[CLHS-22.1.1.1]</a></h2></div></div><div></div></div><p><a id="pr-closure"></a><b>Variable <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>. </b>An additional variable <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> controls whether compiled and
 interpreted functions (closures) are output in detailed form.
 If <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, compiled closures are output in
 <span class="keysym">#Y</span> syntax which the reader understands.
 <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p><a id="pr-rpars"></a><b>Variable <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a>. </b>An additional variable <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> controls
 the output of the right (closing) parentheses.
 If <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, closing parentheses which do not fit onto
 the same line as the the corresponding opening parenthesis are output
 just below their corresponding opening parenthesis, in the same column.
 <a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p><a id="pr-indent"></a><b>Variable <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a>. </b>An additional variable <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a> controls the indentation of
 lists that span more than one line.
 It specifies by how many characters items within the list will be
 indented relative to the beginning of the list.
 <a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a> is initially set to <tt class="literal">1</tt>.</p><p><a id="ppr-first-newline"></a><b>Variable <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a>. </b>An additional variable <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> controls
 pretty-printing of multi-line objects.
 When <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 and the current line already has some characters on it,
 and the next object will be printed on several lines,
 and it does not start with a <span class="keysym">#\Newline</span>,
 then a <span class="keysym">#\Newline</span> is printed before the object.
 <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> has no effect if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
 <a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-vector"></a>22.2. Printing Other Vectors
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html" target="_top">[CLHS-22.1.3.7]</a></h2></div></div><div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, other vectors are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>, the syntax <tt class="sexp">#(<i class="replaceable"><tt>x<sub>0</sub></tt></i>
 ... <i class="replaceable"><tt>x<sub>n-1</sub></tt></i>)</tt>
 is used.  Otherwise, the syntax <tt class="sexp">#A(<i class="replaceable"><tt>element-type</tt></i>
 <i class="replaceable"><tt>dimensions</tt></i> <i class="replaceable"><tt>contents</tt></i>)</tt> is used.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-array"></a>22.3. Printing Other Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html" target="_top">[CLHS-22.1.3.8]</a></h2></div></div><div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, other arrays are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><tt class="function">ARRAY-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><tt class="classname">T</tt></a>, the syntax <tt class="sexp">#<i class="replaceable"><tt>rank</tt></i>A <i class="replaceable"><tt>contents</tt></i></tt> is
 used.  Otherwise, the syntax <tt class="sexp">#A(<i class="replaceable"><tt>element-type</tt></i>
 <i class="replaceable"><tt>dimensions</tt></i> <i class="replaceable"><tt>contents</tt></i>)</tt> is used.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clpp"></a>22.4. The Lisp Pretty Printer
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2.html" target="_top">[CLHS-22.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#pp-dispatch">22.4.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></div><p>The Lisp Pretty Printer implementation is <span class="emphasis"><em>not</em></span> perfect yet.
 <a href="http://www.lisp.org/HyperSpec/Body/mac_pprint-logical-block.html" target="_top"><tt class="function">PPRINT-LOGICAL-BLOCK</tt></a> does not respect <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html" target="_top"><tt class="varname">*PRINT-LINES*</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pp-dispatch"></a>22.4.1. Pretty Print Dispatch Table
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2-1-4.html" target="_top">[CLHS-22.2.1.4]</a></h3></div></div><div></div></div><p>A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pprint_dispatch_table" target="_top">pprint
 dispatch table</a> is a <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a> of a symbol
 <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><tt class="varname">*PRINT-PPRINT-DISPATCH*</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> which maps types into priorities
 and print functions.
 Their use is strongly discouraged because of the performance issues:
 when <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><tt class="varname">*PRINT-PPRINT-DISPATCH*</tt></a> is non-trivial and <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a>
 is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, printing of every object requires a lookup in the table,
 which entails many calls to <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><tt class="function">TYPEP</tt></a> (which cannot be made fast
 enough).</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-dict"></a>22.5. The Printer Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html" target="_top">[CLHS-22.4]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#format">22.5.1. Function <tt class="function">FORMAT</tt></a></span></dt><dt><span class="section"><a href="#pathprint">22.5.2. pathnames</a></span></dt><dt><span class="section"><a href="#print-misc">22.5.3. Miscellaneous Issues</a></span></dt></dl></div><p><b>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><tt class="function">WRITE-TO-STRING</tt></a>. </b>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">WRITE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><tt class="function">WRITE-TO-STRING</tt></a> have an additional
 keyword argument <tt class="constant">:closure</tt> which is used to bind
 <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="format"></a>22.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a></h3></div></div><div></div></div><p>The additional <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> instruction
 <strong class="first"><i class="firstterm">~!<a id="format-bang" class="indexterm"></a></i></strong>
 is similar to <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-5-4.html" target="_top"><tt class="literal">~/</tt></a>, but avoids putting a function name into a
 string, thus, even if the function is not interned in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a>
 package, you might not need to specify the package explicitly.
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <i class="replaceable"><tt>stream</tt></i> "~args!" <i class="replaceable"><tt>function</tt></i>
  <i class="replaceable"><tt>object</tt></i>)</tt> is equivalent to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a>
  <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>object</tt></i>
  <i class="replaceable"><tt>colon-modifier-p</tt></i>
  <i class="replaceable"><tt>atsign-modifier-p</tt></i>
  <i class="replaceable"><tt>args</tt></i>)</tt>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~R</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><tt class="literal">~:R</tt></a> can output only
 integers in the range <tt class="varname">|n| &lt;
 <i class="replaceable"><tt>10<sup>66</sup></tt></i></tt>.
 The output is in English, according to the American conventions, and
 these conventions are identical to the British conventions only in the
 range <tt class="varname">|n| &lt;
 <i class="replaceable"><tt>10<sup>9</sup></tt></i></tt>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-1-1.html" target="_top"><tt class="literal">~:@C</tt></a> does not output the character itself, only the
 instruction how to type the character.</p><p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, the value of
 <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><tt class="varname">*READ-DEFAULT-FLOAT-FORMAT*</tt></a> does not matter if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a>
 is true.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-6-1.html" target="_top"><tt class="literal">~T</tt></a> can determine the current column of any
 built-in stream.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathprint"></a>22.5.2. pathnames</h3></div></div><div></div></div><p>Pathnames are printed as follows: If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><tt class="varname">*PRINT-ESCAPE*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 only the namestring is printed; otherwise it is printed with
 <tt class="filename">#P""</tt> syntax, as per [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] Issue <a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a>.
 But, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, we are in trouble as
 <tt class="filename">#P""</tt> is ambiguous (which is verboten when
 <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true), while being mandated by the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
 Therefore, in this case, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>'s behavior is determined by the value
 of <a href="#pathprint" title="22.5.2.&#xA0;pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a>: when it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, we print pathnames like this:
<tt class="computeroutput">#-CLISP #P"" #+CLISP #S(PATHNAME ...)</tt>.
 Otherwise, when the variable <a href="#pathprint" title="22.5.2.&#xA0;pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the
 <tt class="filename">#P""</tt> notation is used as per <a href="http://www.lisp.org/HyperSpec/Body/sec_1-5-1-4.html" target="_top">1.5.1.4.1 Resolution of Apparent
 Conflicts in Exceptional Situations</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-misc"></a>22.5.3. Miscellaneous Issues</h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><tt class="varname">*PRINT-CASE*</tt></a> controls the output not only of symbols, but also
 of characters and some <tt class="computeroutput">#&lt;...&gt;</tt>
 objects.</p><p>In the absence of
 <strong class="first"><i class="firstterm"><a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-1-3.html" target="_top"><tt class="function">SYS::WRITE-FLOAT-DECIMAL</tt></a>
  <a id="write-float-decimal" class="indexterm"></a></i></strong>,
 floating point numbers are output in radix 2.  This function is defined
 in <tt class="filename">"floatpri.lisp"</tt> and is not available if you run
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> without a <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a> (which you should never do anyway!)</p><p>If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><tt class="varname">*PRINT-READABLY*</tt></a> is true, <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><tt class="varname">*READ-DEFAULT-FLOAT-FORMAT*</tt></a>
 has no influence on the way floating point numbers are printed.</p><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><tt class="varname">*PRINT-PRETTY*</tt></a> is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> but set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>
 in <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>.  This makes screen output prettier.
 </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="reader"></a>Chapter 23. Reader
   <a href="http://www.lisp.org/HyperSpec/Body/chap-23.html" target="_top">[CLHS-23]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#chario">23.1. characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <tt class="function">READTABLE-CASE</tt></a></span></dt></dl></div><p>This is the list of objects whose external representation cannot
  be meaningfully read in:
</p><div class="table"><a id="unreadable-objects-table"></a><p class="title"><b>Table 23.1. Unreadable objects</b></p><table summary="Unreadable objects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">format</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><tt class="literal">#&lt;<i class="replaceable"><tt>type</tt></i> ...&gt;</tt></td><td align="center">all <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><tt class="classname">STRUCTURE-OBJECT</tt></a>s lacking a keyword constructor</td></tr><tr><td align="center"><tt class="literal">#&lt;ARRAY <i class="replaceable"><tt>type</tt></i> <i class="replaceable"><tt>dimensions</tt></i>&gt;</tt></td><td align="center">all <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a>s except <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>s, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SYSTEM-FUNCTION <i class="replaceable"><tt>name</tt></i>&gt;</tt></td><td align="center">built-in function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a></td></tr><tr><td align="center"><tt class="literal">#&lt;ADD-ON-SYSTEM-FUNCTION
    <i class="replaceable"><tt>name</tt></i>&gt;</tt></td><td align="center">other function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SPECIAL-OPERATOR <i class="replaceable"><tt>name</tt></i>&gt;</tt></td><td align="center">special operator handler</td></tr><tr><td align="center"><tt class="literal">#&lt;COMPILED-CLOSURE <i class="replaceable"><tt>name</tt></i>&gt;</tt></td><td align="center">compiled function, if <a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;CLOSURE <i class="replaceable"><tt>name</tt></i> ...&gt;</tt></td><td align="center">interpreted function</td></tr><tr><td align="center"><tt class="literal">#&lt;FRAME-POINTER #x...&gt;</tt></td><td align="center">pointer to a stack frame</td></tr><tr><td align="center"><tt class="literal">#&lt;DISABLED POINTER&gt;</tt></td><td align="center">frame pointer which has become invalid on exit from the
   corresponding <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;...STREAM...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;PACKAGE <i class="replaceable"><tt>name</tt></i>&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;HASH-TABLE #x...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><tt class="varname">*PRINT-ARRAY*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;READTABLE #x...&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><tt class="classname">READTABLE</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;SYMBOL-MACRO <i class="replaceable"><tt>form</tt></i>&gt;</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> handler</td></tr><tr><td align="center"><tt class="literal">#&lt;MACRO <i class="replaceable"><tt>function</tt></i>&gt;</tt></td><td align="center">macro expander (defined by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> and friends)</td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> #x...&gt;</tt></td><td align="center">foreign pointer <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> #x...&gt;</tt></td><td align="center">foreign address <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>
    <i class="replaceable"><tt>name</tt></i> #x...&gt;</tt></td><td align="center">foreign variable <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;<a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>
    <i class="replaceable"><tt>name</tt></i> #x...&gt;</tt></td><td align="center">foreign function <span class="emphasis"><em>(Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>,
    <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.)</em></span></td></tr><tr><td align="center"><tt class="literal">#&lt;UNBOUND&gt;</tt></td><td align="center">"value" of a symbol without value, "value" of an unsupplied
   optional or keyword argument</td></tr><tr><td align="center"><tt class="literal">#&lt;SPECIAL REFERENCE&gt;</tt></td><td align="center">environment marker for variables declared <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a></td></tr><tr><td align="center"><tt class="literal">#&lt;DOT&gt;</tt></td><td align="center">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result for "."</td></tr><tr><td align="center"><tt class="literal">#&lt;END OF FILE&gt;</tt></td><td align="center">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result, when the end of file is reached
 </td></tr><tr><td align="center"><tt class="literal">#&lt;READ-LABEL ...&gt;</tt></td><td align="center">intermediate <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> result for <tt class="literal">#n#</tt></td></tr><tr><td align="center"><tt class="literal">#&lt;ADDRESS #x...&gt;</tt></td><td align="center">machine address, should not occur</td></tr><tr><td align="center"><tt class="literal">#&lt;SYSTEM-POINTER #x...&gt;</tt></td><td align="center">should not occur</td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="chario"></a>23.1. characters</h2></div></div><div></div></div><p><span class="keysym">#\Code</span> allows input of characters of arbitrary code:
 e.g., <span class="keysym">#\Code231</span> reads as the character
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><tt class="function">CODE-CHAR</tt></a> 231.)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="read-dispatch-ext"></a>23.2. Additional read dispatch macros</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><span class="keysym">#Y</span> is used to read compiled
  functions and to set the current <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>'s <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>.
  </li><li><p><tt class="filename">#""</tt> is used to read pathnames:
  <tt class="filename">#"test.lisp"</tt> is the value of <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><tt class="function">PATHNAME</tt></a> "test.lisp")</tt></p><div class="variablelist">
<!--#if defined(WIN32)--><dl><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd>As in all strings, backslashes must be written twice
  here: <tt class="filename">#"A:\\programs\\test.lisp"</tt>
  </dd>
<!--#endif-->
</dl></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="rt-case"></a>23.3. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a></h2></div></div><div></div></div><p>When the value of <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a>
 <i class="replaceable"><tt>readtable</tt></i>)</tt> is
 <tt class="constant">:INVERT</tt>, it applies to the package name and the
 symbol name of a symbol separately (not to the entire token at once).
 An alternative to the use of <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><tt class="function">READTABLE-CASE</tt></a> is the use of the
 <a href="#make-pack" title="11.4.1.&#xA0;Function MAKE-PACKAGE"><tt class="constant">:CASE-SENSITIVE</tt></a> option of
 <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><tt class="function">MAKE-PACKAGE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a>.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="system"></a>Chapter 24. System Construction
   <a href="http://www.lisp.org/HyperSpec/Body/chap-24.html" target="_top">[CLHS-24]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="system-dict"></a>24.1. The System Construction Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html" target="_top">[CLHS-24.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <tt class="function">COMPILE-FILE</tt></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <tt class="function">COMPILE-FILE-PATHNAME</tt></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <tt class="function">REQUIRE</tt></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <tt class="function">LOAD</tt></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <tt class="varname">*FEATURES*</tt></a></span></dt></dl></div><p>The compiler can be called not only by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a>, but also by the declaration <a href="#compile-decl" title="3.3.1.&#xA0;Additional declarations"><tt class="sexp">(compile)</tt></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compilefile"></a>24.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>
  <i class="replaceable"><tt>input-file</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:OUTPUT-FILE</tt>
  :LISTING <tt class="constant">:WARNINGS</tt> <tt class="constant">:VERBOSE</tt> <tt class="constant">:PRINT</tt> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a>)</tt>
compiles a file to platform-independent bytecode.</p><div class="variablelist"><a id="compile-file-arguments"></a><p class="title"><b>Options for <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a></b></p><dl><dt><i class="replaceable"><tt>input-file</tt></i></dt><dd>should be a <a href="#path-des">pathname designator</a>.
 </dd><dt><tt class="constant">:OUTPUT-FILE</tt></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</dd><dt><tt class="constant">:LISTING</tt></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:WARNINGS</tt></dt><dd>specifies whether warnings should also appear on the
   screen.</dd><dt><tt class="constant">:VERBOSE</tt></dt><dd>specifies whether error messages should also appear
   on the screen.</dd><dt><tt class="constant">:PRINT</tt></dt><dd>specifies whether an indication which forms are
   being compiled should appear on the screen.
</dd></dl></div><p>The variables <strong class="first"><i class="firstterm"><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><tt class="varname">CUSTOM:*COMPILE-WARNINGS*</tt></a></i></strong>,
 <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><tt class="varname">*COMPILE-VERBOSE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><tt class="varname">*COMPILE-PRINT*</tt></a> provide defaults for the
 <tt class="constant">:WARNINGS</tt>, <tt class="constant">:VERBOSE</tt>, <tt class="constant">:PRINT</tt> keyword arguments, respectively,
 and are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> to the values of the arguments, i.e.,
 these arguments are recursive.</p><p>For each input file (default file type: <tt class="filename">#P".lisp"</tt>)
 the following files are generated:
</p><div class="informaltable"><a id="compile-file-new-files-table"></a><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">File</th><th align="center">When</th><th align="center">Default file type</th><th align="center">Contents</th></tr></thead><tbody><tr><td align="center">output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".fas"</tt></td><td align="center">can be loaded using the <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> function</td></tr><tr><td align="center">auxiliary output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a></td><td align="center">used by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> when compiling a <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> form referring
    to the input file</td></tr><tr><td align="center">listing file</td><td align="center">only if <tt class="constant">:LISTING</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".lis"</tt></td><td align="center">disassembly of the output file</td></tr><tr><td align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> output file</td><td align="center">only if <tt class="constant">:OUTPUT-FILE</tt> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="filename">#P".c"</tt></td><td align="center">foreign function interface; this file is deleted if it is
    empty</td></tr></tbody></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you have two files in the same directory
- <tt class="filename">#P"foo.lisp"</tt> and <tt class="filename">#P"foo.c"</tt>,
and you compile the first file with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, the second file will be
<span class="emphasis"><em>clobbered</em></span> if you have any <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms in
the first one!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-file-path"></a>24.1.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file-pathname.html" target="_top"><tt class="function">COMPILE-FILE-PATHNAME</tt></a></h3></div></div><div></div></div><p>The default for the <tt class="constant">:OUTPUT-FILE</tt> argument is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, which means <tt class="filename">#P".fas"</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="require"></a>24.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a></h3></div></div><div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> receives as the optional argument either
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>s: files to be <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>ed
 if the required module is not already present.</p><p>At compile time, <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> <tt class="filename">#P"foo"</tt>)</tt>
forms are treated specially: <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a> is searched for
<tt class="filename">#P"foo.lisp"</tt> <span class="emphasis"><em>and</em></span> <tt class="filename">#P"foo.lib"</tt>.
If the latest such file is a <tt class="filename">#P".lisp"</tt>, it is compiled;
otherwise the <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a> is loaded.</p><p>The <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a> is a “<span class="quote">header</span>” file which contains the
constant, variable, inline and macro definitions necessary for
compilation of the files that <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> this file, but not the function
definitions and calls that are not necessary for that.
Thus it is <span class="emphasis"><em>not</em></span> necessary to either enclose <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> forms in
<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> or to load the required files in the makefiles: if you have
two files, <tt class="filename">#P"foo.lisp"</tt> and <tt class="filename">#P"bar.lisp"</tt>, and the
latter requires the former, you can write in your <tt class="filename">#P"Makefile"</tt>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
all: foo.fas bar.fas

foo.fas: foo.lisp
	clisp -c foo

bar.fas: bar.lisp foo.fas
        clisp -c bar
</pre></td></tr></table><p>
instead of the more cumbersome (and slower, since <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><tt class="filename">#P".lib"</tt></a>s are
usually smaller and load faster that <tt class="filename">#P".fas"</tt>s):
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
bar.fas: bar.lisp foo.fas
        clisp -i foo -c bar
</pre></td></tr></table><p>
Thus, you do not need to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> <tt class="filename">#P"foo"</tt>)</tt>
in order to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>
 <tt class="filename">#P"bar.lisp"</tt>)</tt>.
If memory is tight, and if <tt class="filename">#P"foo.lisp"</tt> contains
only a few inline functions, macros, constants or variables,
this is a space and time saver.
If <tt class="filename">#P"foo.lisp"</tt> does a lot of initializations or side
effects when being loaded, this is important as well.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loadfile"></a>24.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> has four additional keywords <tt class="constant">:ECHO</tt>, <tt class="constant">:COMPILING</tt>,
 <tt class="constant">:EXTRA-FILE-TYPES</tt>, and <tt class="constant">:OBSOLETE-ACTION</tt>.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> <i class="replaceable"><tt>filename</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:VERBOSE</tt>
 <tt class="constant">:PRINT</tt> <tt class="constant">:ECHO</tt> <tt class="constant">:IF-DOES-NOT-EXIST</tt> <tt class="constant">:COMPILING</tt>
 <tt class="constant">:EXTRA-FILE-TYPES</tt> <tt class="constant">:OBSOLETE-ACTION</tt>)</tt></p><div class="variablelist"><dl><dt><tt class="constant">:VERBOSE</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> to emit a short message that a file is
   being loaded.  The default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>, which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
  </dd><dt><tt class="constant">:PRINT</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> to print the value of each form.  The
  default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>, which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
  </dd><dt><tt class="constant">:ECHO</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>causes the input from the file to be echoed to
  <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-OUTPUT*</tt></a> (normally to the screen).  Should
  there be an error in the file, you can see at one glance where it is.
  The default is <strong class="first"><i class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a></i></strong>, which is
  initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:COMPILING</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a></dt><dd>causes each form read to be compiled on the fly.
  The compiled code is executed at once and - in contrast to <a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><tt class="function">COMPILE-FILE</tt></a> - not
  written to a file.
  The default is <strong class="first"><i class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a></i></strong>,
  which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><tt class="constant">:EXTRA-FILE-TYPES</tt> <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a></dt><dd><p>Specifies the additional file types considered for
  loading, in addition to <strong class="first"><i class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*SOURCE-FILE-TYPES*</tt></a></i></strong>
  (which is initially <tt class="sexp">("lisp" "lsp" "cl")</tt>)
  and <strong class="first"><i class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*COMPILED-FILE-TYPES*</tt></a></i></strong>
  (which is initially <tt class="sexp">("fas")</tt>).
  </p><p>When <i class="replaceable"><tt>filename</tt></i> does not spefify a unique file
  (e.g., <i class="replaceable"><tt>filename</tt></i> is <tt class="filename">#P"foo"</tt> and both <tt class="filename">#P"foo.lisp"</tt>
  and <tt class="filename">#P"foo.fas"</tt> are found in the
  <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>), then the <span class="emphasis"><em>newest</em></span> file is loaded.
 </p></dd><dt><tt class="constant">:OBSOLETE-ACTION</tt> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>Specifies the action to take when loading a
   <tt class="filename">#P".fas"</tt> with a different <a href="#bytecode" title="Chapter&#xA0;33.&#xA0;The CLISP bytecode specification">bytecode</a>
   version from the one supported by this <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> version.
   The possible actions are <tt class="constant">:DELETE</tt> to delete the
   <tt class="filename">#P".fas"</tt> and <tt class="constant">:ERROR</tt> to <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
   The default action is to <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a> and <a href="#load-paths">look
   for another matching file</a>.
   If no file can be loaded and <tt class="constant">:IF-DOES-NOT-EXIST</tt> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>ed.
   The default is <strong class="first"><i class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a></i></strong>,
   which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd></dl></div><p>The variables <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-VERBOSE*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><tt class="varname">*LOAD-PRINT*</tt></a>,
<a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a>, <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a>, and <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a> are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> when it
receives a corresponding keyword argument (<tt class="constant">:VERBOSE</tt>, <tt class="constant">:PRINT</tt>,
<tt class="constant">:OBSOLETE-ACTION</tt>, <tt class="constant">:COMPILING</tt>, and <tt class="constant">:ECHO</tt>), i.e., these arguments
are recursive, just like the arguments <tt class="constant">:WARNINGS</tt>, <tt class="constant">:VERBOSE</tt>, and
<tt class="constant">:PRINT</tt> for <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>.</p><p><a id="load-paths"></a><b>Variable <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a>. </b>The variable <a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a> contains a list of directories where the
 files are looked for - in addition to the specified or current
 directory - by <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><tt class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="features"></a>24.1.5. Variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a></h3></div></div><div></div></div><p>The variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> initially contains the following symbols
</p><div class="variablelist"><a id="features-table"></a><p class="title"><b>Default <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a></b></p><dl><dt><tt class="constant">:CLISP</tt></dt><dd>the name of this implementation
</dd><dt><tt class="constant">:ANSI-CL</tt></dt><dd><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#purports_to_conform" target="_top">purports to
    conform</a> to [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><tt class="constant">:COMMON-LISP</tt></dt><dd>required by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><tt class="constant">:INTERPRETER</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> is implemented</dd><dt><tt class="constant">:COMPILER</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> are implemented
</dd>
<!--#ifdef SOCKET_STREAMS--><dt><tt class="constant">:SOCKETS</tt></dt><dd>see <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">Section 30.5, “Extensions-2.5. Socket Streams”</a>
</dd>
<!--#endif-->
<!--#ifdef GENERIC_STREAMS--><dt><tt class="constant">:GENERIC-STREAMS</tt></dt><dd>see <a href="#clos-stream" title="29.5.&#xA0;Extensions-1.5. Defining new kinds of Streams">Section 29.5, “Extensions-1.5. Defining new kinds of Streams”</a>
</dd>
<!--#endif-->
<!--#ifdef LOGICAL_PATHNAMES--><dt><tt class="constant">:LOGICAL-PATHNAMES</tt></dt><dd><a href="#log-path" title="19.4.&#xA0;Logical Pathnames&#10;   [CLHS-19.3]">Logical Pathnames</a>
   are implemented</dd>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI--><dt><tt class="constant">:FFI</tt></dt><dd>if a foreign function interface
   (see <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility">Section 30.3, “Extensions-2.3. The Foreign Function Call Facility”</a>) is supported
   <span class="emphasis"><em>(Platform dependent: many <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
    platforms only)</em></span></dd>
<!--#endif-->
<!--#ifdef GNU_GETTEXT--><dt><tt class="constant">:GETTEXT</tt></dt><dd>if internationalization (see <a href="#i18n" title="29.3.&#xA0;Extensions-1.3. Internationalization">Section 29.3, “Extensions-1.3. Internationalization”</a>)
   using the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> package is supported
   <span class="emphasis"><em>(Platform dependent: most <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms
    only)</em></span></dd>
<!--#endif-->
<!--#ifdef UNICODE--><dt><tt class="constant">:UNICODE</tt></dt><dd>if <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> (ISO 10646) characters are supported
   (see <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a>)</dd>
<!--#endif-->
<dt><tt class="constant">:LOOP</tt></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a> is implemented</dd><dt><tt class="constant">:CLOS</tt></dt><dd><span><b class="command">CLOS</b></span> is implemented</dd><dt><tt class="constant">:WIN32</tt></dt><dd>if <i class="replaceable"><tt>hardware</tt></i> = PC (clone) and <i class="replaceable"><tt>operating system</tt></i> = Win32
  (Windows 95/98/NT/Me/2000/XP)</dd><dt><tt class="constant">:PC386</tt></dt><dd>if <i class="replaceable"><tt>hardware</tt></i> = PC (clone) with a 386/486/586/686/786 CPU
</dd><dt><tt class="constant">:UNIX</tt></dt><dd>if <i class="replaceable"><tt>operating system</tt></i> = Unix (in this case the <i class="replaceable"><tt>hardware</tt></i> is irrelevant!)
</dd><dt><tt class="constant">:CYGWIN</tt></dt><dd>if <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is using the <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>
   compatibility layer on top of <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   (in that case <tt class="constant">:UNIX</tt> is also present)
</dd></dl></div><p>Each <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">module</a> should add the appropriate keyword, e.g.,
 <a href="#syscalls" title="30.2.6.6.&#xA0;System Calls"><tt class="constant">:SYSCALLS</tt></a>,
 <a href="#dir-key" title="30.2.6.2.&#xA0;Directory Access"><tt class="constant">:DIR-KEY</tt></a>,
 <a href="#regexp" title="30.2.6.4.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><tt class="constant">:REGEXP</tt></a>,
 <a href="#pcre" title="30.2.6.5.&#xA0;Perl Compatible Regular Expressions."><tt class="constant">:PCRE</tt></a>, etc.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="environment"></a>Chapter 25. Environment
   <a href="http://www.lisp.org/HyperSpec/Body/chap-25.html" target="_top">[CLHS-25]</a></h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="debugger"></a>25.1. Debugging Utilities
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html" target="_top">[CLHS-25.1.2]</a></h2></div></div><div></div></div><p>The debugger may be invoked through the functions
 <a href="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html" target="_top"><tt class="function">INVOKE-DEBUGGER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><tt class="function">CERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a>.
 The stepper is invoked through the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>.
 Debugger and stepper execute subordinate <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> (called "break loops")
 which are similar to the main <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> except for the
 <a href="#prompt" title="29.8.&#xA0;Extensions-1.8. The Prompt">prompt</a> and the set of available commands.
 Commands must be typed literally, in any case,
 without surrounding quotes or white space.
 Each command has a keyword abbreviation,
 indicated in the second column.</p><div class="table"><a id="debugger-main-deb-step"></a><p class="title"><b>Table 25.1. Commands common to the main loop, the debugger and the stepper</b></p><table summary="Commands common to the main loop, the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Help</b></span></td><td align="center"><span><b class="command">:h</b></span></td><td align="center">prints a list of available commands</td></tr></tbody></table></div><div class="table"><a id="debugger-deb-step"></a><p class="title"><b>Table 25.2. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Abort</b></span></td><td align="center"><span><b class="command">:a</b></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><b class="command">Unwind</b></span></td><td align="center"><span><b class="command">:uw</b></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><b class="command">Quit</b></span></td><td align="center"><span><b class="command">:q</b></span></td><td align="center">quit to the top <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr></tbody></table></div><p>The stack is organized into frames and other stack elements.
 Usually every invocation of an interpreted function and every
 evaluation of an interpreted form corresponds to one stack frame.
 Special forms such as <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a>
 produce special kinds of stack frames.</p><p>In a break loop there is a current stack frame, which is initially
 the most recent stack frame but can be moved using the debugger commands
 <span><b class="command">Up</b></span> and <span><b class="command">Down</b></span>.</p><p>Evaluation of forms in a break loop occurs in the lexical
 environment of the current stack frame but in the dynamic environment
 of the debugger's caller.  This means that to inspect or modify a
 lexical variable all you have to do is to move to the current stack
 frame just below the frame that corresponds to the form or the function
 call that binds that variable.</p><p>There is a current "stack mode" which defines in how much
 detail the stack is shown by the stack related debugger commands.</p><div class="table"><a id="debugger-deb-step-1"></a><p class="title"><b>Table 25.3. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Error</b></span></td><td align="center"><span><b class="command">:e</b></span></td><td align="center">print the last error message.</td></tr><tr><td align="center"><span><b class="command">Inspect</b></span></td><td align="center"><span><b class="command">:i</b></span></td><td align="center">inspect the last error message.</td></tr><tr><td align="center"><span><b class="command">Mode-1</b></span></td><td align="center"><span><b class="command">:m1</b></span></td><td align="center">sets the current mode to 1: all the stack elements are considered.
    This mode works fine for debugging compiled functions.</td></tr><tr><td align="center"><span><b class="command">Mode-2</b></span></td><td align="center"><span><b class="command">:m2</b></span></td><td align="center">sets the current mode to 2: all the frames are considered.
     </td></tr><tr><td align="center"><span><b class="command">Mode-3</b></span></td><td align="center"><span><b class="command">:m3</b></span></td><td align="center">sets the current mode to 3: only lexical frames (frames that
    correspond to special forms that modify the lexical
    environment) are considered.</td></tr><tr><td align="center"><span><b class="command">Mode-4</b></span></td><td align="center"><span><b class="command">:m4</b></span></td><td align="center">sets the current mode to 4 (the default): only <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> and
    <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are considered. Every evaluation of a form in the
    interpreter corresponds to an EVAL frame.</td></tr><tr><td align="center"><span><b class="command">Mode-5</b></span></td><td align="center"><span><b class="command">:m5</b></span></td><td align="center">sets the current mode to 5: only <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are
         considered. Every invocation of an interpreted function
         corresponds to one <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame.</td></tr><tr><td align="center"><span><b class="command">Where</b></span></td><td align="center"><span><b class="command">:w</b></span></td><td align="center">shows the current stack frame.</td></tr><tr><td align="center"><span><b class="command">Up</b></span></td><td align="center"><span><b class="command">:u</b></span></td><td align="center">goes up one frame, i.e., to the caller if in mode-5
    </td></tr><tr><td align="center"><span><b class="command">Down</b></span></td><td align="center"><span><b class="command">:d</b></span></td><td align="center">does down one frame, i.e., to the callee if in mode-5
    </td></tr><tr><td align="center"><span><b class="command">Top</b></span></td><td align="center"><span><b class="command">:t</b></span></td><td align="center">goes to top frame, i.e., to the top-level form if in mode-4
    </td></tr><tr><td align="center"><span><b class="command">Bottom</b></span></td><td align="center"><span><b class="command">:b</b></span></td><td align="center">goes to bottom (most recent) frame, i.e., most probably to the
         form or function that caused the debugger to be entered.
    </td></tr><tr><td align="center"><span><b class="command">Backtrace</b></span></td><td align="center"><span><b class="command">:bt</b></span></td><td align="center">lists the stack in current mode, bottom frame first, top frame
     last.</td></tr><tr><td align="center"><span><b class="command">Backtrace-1</b></span></td><td align="center"><span><b class="command">:bt1</b></span></td><td align="center">lists the stack in mode 1.</td></tr><tr><td align="center"><span><b class="command">Backtrace-2</b></span></td><td align="center"><span><b class="command">:bt2</b></span></td><td align="center">lists the stack in mode 2.</td></tr><tr><td align="center"><span><b class="command">Backtrace-3</b></span></td><td align="center"><span><b class="command">:bt3</b></span></td><td align="center">lists the stack in mode 3.</td></tr><tr><td align="center"><span><b class="command">Backtrace-4</b></span></td><td align="center"><span><b class="command">:bt4</b></span></td><td align="center">lists the stack in mode 4.</td></tr><tr><td align="center"><span><b class="command">Backtrace-5</b></span></td><td align="center"><span><b class="command">:bt5</b></span></td><td align="center">lists the stack in mode 5.</td></tr><tr><td align="center"><span><b class="command">Frame-limit</b></span></td><td align="center"><span><b class="command">:fl</b></span></td><td align="center">set the frame-limit: this many frames will be printed in a
     backtrace at most.</td></tr><tr><td align="center"><span><b class="command">Backtrace-l</b></span></td><td align="center"><span><b class="command">:bl</b></span></td><td align="center">limit of frames to print will be prompted for.</td></tr></tbody></table></div><p>If the current stack frame is an <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame, the
  following commands are available as well:</p><div class="table"><a id="debugger-eval-apply"></a><p class="title"><b>Table 25.4. Commands specific to <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a></b></p><table summary="Commands specific to EVAL/APPLY" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Break+</b></span></td><td align="center"><span><b class="command">:br+</b></span></td><td align="center">sets a breakpoint in the current frame.  When the corresponding
     form or function will be left, the debugger will be entered again, with
     the variable <a href="#trace-val"><tt class="varname">EXT:*TRACE-VALUES*</tt></a> containing a list of its values.</td></tr><tr><td align="center"><span><b class="command">Break-</b></span></td><td align="center"><span><b class="command">:br-</b></span></td><td align="center">removes a breakpoint from the current frame.</td></tr><tr><td align="center"><span><b class="command">Redo</b></span></td><td align="center"><span><b class="command">:rd</b></span></td><td align="center">re-evaluates the corresponding form or function call. This
     command can be used to restart parts of a computation without
     aborting it entirely.</td></tr><tr><td align="center"><span><b class="command">Return</b></span></td><td align="center"><span><b class="command">:rt</b></span></td><td align="center">leaves the current frame.  You will be prompted for the return
     values.</td></tr></tbody></table></div><div class="table"><a id="debugger-deb"></a><p class="title"><b>Table 25.5. Commands specific to the debugger</b></p><table summary="Commands specific to the debugger" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Continue</b></span></td><td align="center"><span><b class="command">:c</b></span></td><td align="center">continues evaluation of the program.</td></tr></tbody></table></div><div class="table"><a id="debugger-step"></a><p class="title"><b>Table 25.6. Commands specific to the stepper</b></p><table summary="Commands specific to the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Step</b></span></td><td align="center"><span><b class="command">:s</b></span></td><td align="center">step into a form: evaluate this form in single step mode
   </td></tr><tr><td align="center"><span><b class="command">Next</b></span></td><td align="center"><span><b class="command">:n</b></span></td><td align="center">step over a form: evaluate this form at once
   </td></tr><tr><td align="center"><span><b class="command">Over</b></span></td><td align="center"><span><b class="command">:o</b></span></td><td align="center">step over this level: evaluate at once up to the next return
   </td></tr><tr><td align="center"><span><b class="command">Continue</b></span></td><td align="center"><span><b class="command">:c</b></span></td><td align="center">switch off single step mode, continue evaluation
   </td></tr></tbody></table></div><p>The stepper is usually used like this: If some form returns a
 strange value or results in an error, call <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>
 <i class="replaceable"><tt>form</tt></i>)</tt> and navigate using the
 commands <span><b class="command">Step</b></span> and <span><b class="command">Next</b></span> until you
 reach the form you regard as responsible.  If you are too fast (execute
 <span><b class="command">Next</b></span> once and get the error), there is no way back;
 you have to restart the entire stepper session.  If you are too slow
 (stepped into a function or a form which certainly is OK), a couple of
 <span><b class="command">Next</b></span> commands or one <span><b class="command">Over</b></span> command
 will help.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="environment-dict"></a>25.2. The Environment Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html" target="_top">[CLHS-25.2]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <tt class="function">DISASSEMBLE</tt></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <tt class="function">EXT:UNCOMPILE</tt></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <tt class="function">DOCUMENTATION</tt></a></span></dt><dt><span class="section"><a href="#trace">25.2.4. Macro <tt class="function">TRACE</tt></a></span></dt><dt><span class="section"><a href="#inspect">25.2.5. Function <tt class="function">INSPECT</tt></a></span></dt><dt><span class="section"><a href="#room">25.2.6. Function <tt class="function">ROOM</tt></a></span></dt><dt><span class="section"><a href="#time">25.2.7. Macro <tt class="function">TIME</tt></a></span></dt><dt><span class="section"><a href="#ed">25.2.8. Function <tt class="function">ED</tt></a></span></dt><dt><span class="section"><a href="#clock">25.2.9. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.10. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.11. Functions <tt class="function">APROPOS</tt> &amp; <tt class="function">APROPOS-LIST</tt></a></span></dt><dt><span class="section"><a href="#dribble">25.2.12. Function <tt class="function">DRIBBLE</tt></a></span></dt><dt><span class="section"><a href="#version">25.2.13. Function <tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></span></dt></dl></div>
<!--#ifdef HAVE_DISASSEMBLER--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="disassemble"></a>25.2.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a></h3></div></div><div></div></div><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a> can disassemble to machine code,
   provided that <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://sources.redhat.com/gdb/" target="_top"><span><b class="command">gdb</b></span></a> is present.
   In that case the argument may be a
   <tt class="classname">EXT:SYSTEM-FUNCTION</tt>, a
   <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>, a special operator indicator,
   a symbol denoting one of these, a number, or a string.
</dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="uncompile"></a>25.2.2. Function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a></h3></div></div><div></div></div><p>The function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a> does the converse of <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><tt class="function">COMPILE</tt></a>: <tt class="sexp">(<a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><tt class="function">EXT:UNCOMPILE</tt></a> <i class="replaceable"><tt>function</tt></i>)</tt> reverts a compiled
 <i class="replaceable"><tt>function</tt></i> (name), that has been entered or loaded in the same session
 and then compiled, back to its interpreted form.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="documentation"></a>25.2.3. Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><tt class="function">DOCUMENTATION</tt></a></h3></div></div><div></div></div><p>No on-line documentation is available for the system functions
 (yet).</p><p><a id="browser"></a><b>Function <tt class="function">EXT:CLHS</tt>. </b>[<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] access is provided via <tt class="sexp">(<tt class="function">EXT:CLHS</tt> <i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
  <a href="#browser"><tt class="constant">:BROWSER</tt></a>)</tt> function, which uses your web browser.
  <i class="replaceable"><tt>browser</tt></i> (defaults to <a href="#browser"><tt class="constant">CUSTOM:*BROWSER*</tt></a>) should be a
  valid keyword in the <a href="#browser"><tt class="constant">CUSTOM:*BROWSERS*</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="trace"></a>25.2.4. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> <i class="replaceable"><tt>function</tt></i> ...)</tt> makes the
 functions <i class="replaceable"><tt>function</tt></i>, ... traced.  <i class="replaceable"><tt>function</tt></i> should be either a symbol or
 a list <tt class="sexp">(<i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
 <tt class="constant">:suppress-if</tt> <tt class="constant">:step-if</tt>
 <tt class="constant">:pre</tt> <tt class="constant">:post</tt>
 <tt class="constant">:pre-break-if</tt> <tt class="constant">:post-break-if</tt>
 <tt class="constant">:pre-print</tt> <tt class="constant">:post-print</tt>
 <tt class="constant">:PRINT</tt>)</tt>, where</p><div class="variablelist"><dl><dt><tt class="constant">:suppress-if</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>no trace output as long as <i class="replaceable"><tt>form</tt></i> is true
  </dd><dt><tt class="constant">:step-if</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>invokes the stepper as soon as <i class="replaceable"><tt>form</tt></i> is true
  </dd><dt><tt class="constant">:pre</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>evaluates <i class="replaceable"><tt>form</tt></i> before calling the function
  </dd><dt><tt class="constant">:post</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>evaluates <i class="replaceable"><tt>form</tt></i> after return from the function
  </dd><dt><tt class="constant">:pre-break-if</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>goes into the break loop before calling the
   function if <i class="replaceable"><tt>form</tt></i> is true</dd><dt><tt class="constant">:post-break-if</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>goes into the break loop after return from the
   function if <i class="replaceable"><tt>form</tt></i> is true</dd><dt><tt class="constant">:pre-print</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>prints the values of <i class="replaceable"><tt>form</tt></i> before calling the
   function</dd><dt><tt class="constant">:post-print</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>prints the values of <i class="replaceable"><tt>form</tt></i> after return from the
   function</dd><dt><tt class="constant">:PRINT</tt> <i class="replaceable"><tt>form</tt></i></dt><dd>prints the values of <i class="replaceable"><tt>form</tt></i> both before calling
   and after return from the function</dd></dl></div><p>In all these forms you can access the following variables:
</p><div class="variablelist"><dl><dt><tt class="varname">EXT:*TRACE-FUNCTION*</tt></dt><dd>the function itself
  </dd><dt><tt class="varname">EXT:*TRACE-ARGS*</tt></dt><dd>the arguments to the function
  </dd><dt><tt class="varname">EXT:*TRACE-FORM*</tt></dt><dd>the function/macro call as form
  </dd><dt><a id="trace-val"></a><a href="#trace-val"><tt class="varname">EXT:*TRACE-VALUES*</tt></a></dt><dd>after return from the function: the list of return
  values from the function call</dd></dl></div><p>
and you can leave the function call with specified values by using
<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><tt class="function">RETURN</tt></a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">UNTRACE</tt></a> are also applicable to functions <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> and to macros, but not to
 locally defined functions and macros.</p><p><a id="trace-indent"></a><b>Variable <a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a>. </b>If you want the <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><tt class="function">TRACE</tt></a> level to be indicated by the indentation
in addition to the printed numbers, set <a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a> to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
Initially it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> since many nested traced calls will easily
exhaust the available line length.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="inspect"></a>25.2.5. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a></h3></div></div><div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> takes a keyword argument
 <tt class="constant">:frontend</tt>, which specifies the way <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will
 interact with the user.</p><div class="variablelist"><p class="title"><b>Available <tt class="constant">:frontend</tt>s for
   <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></b></p><dl><dt><tt class="constant">:tty</tt></dt><dd>The interaction is conducted via the <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>
   stream.  Please use the <b class="userinput"><tt>:h</tt></b> command to get the
   list of all available commands.</dd><dt><tt class="constant">:http</tt></dt><dd><p>A window in your Web browser (specified by the
   <a href="#browser"><tt class="constant">:BROWSER</tt></a> keyword argument) is opened and it is controlled by
   <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> via a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>, using the <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> protocol.
   You should be able to use all the standard browser features.</p><p>Since <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is not multitasking at this time, you will not
   be able to do anything else during an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> session.  Please click on
   the <b class="userinput"><tt>quit</tt></b> link to terminate the session.</p><p>Please be aware though, that once you terminate an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a>
   session, all links in all <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> windows in your browser will become
   obsolete and using them in a new <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><tt class="function">INSPECT</tt></a> session will result in
   unpredictable behavior.</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="room"></a>25.2.6. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a></h3></div></div><div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a> returns two values: the number of bytes
 currently occupied by Lisp objects, and the number of bytes that can be
 allocated before the next regular <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion occurs.</p><p>The function
 <strong class="first"><i class="firstterm"><a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection"><tt class="function">EXT:GC</tt></a>
  <a id="gc-func" class="indexterm"></a></i></strong>
 starts a global <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion and its return value has the same meaning as
 the second value of <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><tt class="function">ROOM</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="time"></a>25.2.7. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a></h3></div></div><div></div></div><p>The timing data printed by the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a> includes:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td>the real time ("wall" time),</td></tr><tr><td>the run time (processor time for this process),</td></tr><tr><td>the number of bytes allocated, and</td></tr><tr><td>the number of <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ions performed, if any.</td></tr></table><p>The macro <strong class="first"><i class="firstterm"><a href="#time" title="25.2.7.&#xA0;Macro TIME"><tt class="function">EXT:TIMES</tt></a></i></strong> (mnemonic: "TIME
 and Space") is like the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a>: <tt class="sexp">(<a href="#time" title="25.2.7.&#xA0;Macro TIME"><tt class="function">EXT:TIMES</tt></a>
  <i class="replaceable"><tt>form</tt></i>)</tt> evaluates the <i class="replaceable"><tt>form</tt></i>, and, as a side effect,
 outputs detailed information about the memory allocations caused by
 this evaluation.  It also prints everything printed by <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><tt class="function">TIME</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ed"></a>25.2.8. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><tt class="function">ED</tt></a></h3></div></div><div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><tt class="function">ED</tt></a> calls the external editor specified by the value
 of <tt class="sexp">(<a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a> "EDITOR")</tt>
 or, failing that, the value of the variable
 <strong class="first"><i class="firstterm"><a href="#ed" title="25.2.8.&#xA0;Function ED"><tt class="varname">CUSTOM:*EDITOR*</tt></a></i></strong> (see <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>).
 If the argument is a function name which was defined in the current
 session (not loaded from a file), the program text to be edited is a
 pretty-printed version (without comments) of the text which was used to
 define the function.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="clock"></a>25.2.9. Clock Time</h3></div></div><div></div></div>
<!--#if !(defined(UNIX) || defined(WIN32))--><div class="variablelist"><a id="default-tz"></a><p class="title"><b>Default Time Zone</b></p><dl><dt>Platform dependent: unknown platforms only.</dt><dd>The variable <strong class="first"><i class="firstterm"><a href="#default-tz"><tt class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</tt></a></i></strong>
   contains the default time zone used by <a href="http://www.lisp.org/HyperSpec/Body/fun_encode-universal-time.html" target="_top"><tt class="function">ENCODE-UNIVERSAL-TIME</tt></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-universal-time.html" target="_top"><tt class="function">DECODE-UNIVERSAL-TIME</tt></a>.  It is initially set to -1
   (which means 1 hour east of Greenwich, i.e., Mid European Time).
</dd></dl></div>
<!--#endif-->
<p>The <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#time_zone" target="_top">time
 zone</a> in a decoded time must not necessarily be an
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>, but (as <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><tt class="classname">RATIONAL</tt></a> number)
 it should be a multiple of <tt class="literal">1/3600</tt>.</p><div class="table"><a id="internal-time-units-table"></a><p class="title"><b>Table 25.7. Time granularity</b></p><table summary="Time granularity" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">platform</th><th align="center"><a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a></th><th align="center"><a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a></th><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_intern_s-per-second.html" target="_top"><tt class="constant">INTERNAL-TIME-UNITS-PER-SECOND</tt></a></td><td align="center">50</td><td align="center">1,000,000</td><td align="center">10,000,000</td><td class="auto-generated"> </td></tr></tbody></table></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-internal-run-time.html" target="_top"><tt class="function">GET-INTERNAL-RUN-TIME</tt></a> returns the amount of run time
 consumed by the current <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> process since its startup.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="machine"></a>25.2.10. Machine</h3></div></div><div></div></div><div class="variablelist">
<!--#ifdef MACHINE_KNOWN--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platform only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a>
   should be defined in a site-specific <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
   The default implementations try to read the value of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>
   <tt class="envar">ORGANIZATION</tt>, and, failing that, call <a href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html" target="_top"><tt class="function">uname</tt></a>.
</dd><dt>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platform only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a>
   should be defined in a site-specific <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
   The default implementations try to read the registry.
</dd>
<!--#else--><dt>Platform dependent: unknown platforms only.</dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-type.html" target="_top"><tt class="function">MACHINE-TYPE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-version.html" target="_top"><tt class="function">MACHINE-VERSION</tt></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><tt class="function">MACHINE-INSTANCE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">SHORT-SITE-NAME</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><tt class="function">LONG-SITE-NAME</tt></a> should be
   defined by every user in his user-specific <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> file.
</dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="apropos"></a>25.2.11. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a></h3></div></div><div></div></div><p>The search performed by <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a> is
 case-insensitive.</p><p><b>Variable <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> print more information about the symbols it
 found by setting <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a> to a list containing some of
<tt class="constant">:FUNCTION</tt>, <tt class="constant">:VARIABLE</tt>,
<tt class="constant">:TYPE</tt>, and <tt class="constant">:CLASS</tt> or just set it to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> to get
all of the values.</p><p><b>Variable <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS-LIST</tt></a> be more flexible in
 their search by setting <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of one
 argument, a pattern (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>), returning a new <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of one
 argument, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> name (also a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>),
 which returns non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> when the symbol name matches the pattern
 for the purposes of <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a>.
 When <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_search.html" target="_top"><tt class="function">SEARCH</tt></a> is used.
 Some <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">module</a>s come with functions which can be used for
 <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>, e.g., <a href="#re-matcher"><tt class="function">REGEXP:REGEXP-MATCHER</tt></a>,
 <tt class="function">WILDCARD:WILDCARD-MATCHER</tt>,
 <a href="#pcre-matcher"><tt class="function">PCRE:PCRE-MATCHER</tt></a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dribble"></a>25.2.12. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><tt class="function">DRIBBLE</tt></a></h3></div></div><div></div></div><p>If <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><tt class="function">DRIBBLE</tt></a> is called with an argument, and dribbling is already
 enabled, a warning is printed, and the new dribbling request is
 ignored.</p><p>Dribbling is implemented via a kind (but <span class="emphasis"><em>not</em></span> <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a>) of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><tt class="classname">TWO-WAY-STREAM</tt></a>, named <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>.
 If you have a <i class="replaceable"><tt>source</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <i class="replaceable"><tt>x</tt></i> and you want all transactions
 (input and output) on <i class="replaceable"><tt>x</tt></i> to be copied to the <i class="replaceable"><tt>target</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> <i class="replaceable"><tt>y</tt></i>,
 you can do
 <a id="dribble-example"></a></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a> *loggable* <i class="replaceable"><tt>x</tt></i>)
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <i class="replaceable"><tt>x</tt></i> (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-synonym-stream.html" target="_top"><tt class="function">MAKE-SYNONYM-STREAM</tt></a> '*loggable*))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> toggle-logging (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> s)
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><tt class="function">MULTIPLE-VALUE-BIND</tt></a> (so ta) (dribble-toggle *loggable* s)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_streamp.html" target="_top"><tt class="function">STREAMP</tt></a> so) (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> *loggable* so))
      ta))
  (toggle-logging <i class="replaceable"><tt>y</tt></i>)     ; start logging
  ...
  (toggle-logging)       ; finish logging
  ...
  (toggle-logging <i class="replaceable"><tt>y</tt></i>)     ; restart logging
  ...
  (toggle-logging)       ; finish logging
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> <i class="replaceable"><tt>y</tt></i>)
 </pre></td></tr></table><div class="variablelist"><dl><dt><a id="drist"></a><tt class="sexp">(<tt class="function">EXT:DRIBBLE-STREAM</tt> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>When <i class="replaceable"><tt>stream</tt></i> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns two values:
    the <i class="replaceable"><tt>source</tt></i> and the <i class="replaceable"><tt>target</tt></i> streams.  Otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
 </dd><dt><a id="drist-p"></a><tt class="sexp">(<tt class="function">EXT:DRIBBLE-STREAM-P</tt> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>When <i class="replaceable"><tt>stream</tt></i> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, otherwise
    returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="drist-so"></a><tt class="sexp">(<tt class="function">EXT:DRIBBLE-STREAM-SOURCE</tt>
     <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>When <i class="replaceable"><tt>stream</tt></i> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns its
    <i class="replaceable"><tt>source</tt></i> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><tt class="classname">TYPE-ERROR</tt></a>.
 </dd><dt><a id="drist-ta"></a><tt class="sexp">(<tt class="function">EXT:DRIBBLE-STREAM-TARGET</tt>
     <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>When <i class="replaceable"><tt>stream</tt></i> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, returns its
    <i class="replaceable"><tt>target</tt></i> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><tt class="classname">TYPE-ERROR</tt></a>.
 </dd><dt><a id="mk-drist"></a><tt class="sexp">(<tt class="function">EXT:MAKE-DRIBBLE-STREAM</tt>
     <i class="replaceable"><tt>source</tt></i> <i class="replaceable"><tt>target</tt></i>)</tt></dt><dd>Create a new <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>.
 </dd><dt><a id="dri-toggle"></a><tt class="sexp">(<tt class="function">EXT:DRIBBLE-TOGGLE</tt> <i class="replaceable"><tt>stream</tt></i>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>pathname</tt></i>)</tt></dt><dd>When <i class="replaceable"><tt>stream</tt></i> is a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> and <i class="replaceable"><tt>pathname</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    writes a dribble termination note to the <i class="replaceable"><tt>stream</tt></i>'s <i class="replaceable"><tt>target</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and returns <i class="replaceable"><tt>stream</tt></i>'s <i class="replaceable"><tt>source</tt></i> and <i class="replaceable"><tt>target</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s;
    when <i class="replaceable"><tt>stream</tt></i> is not a <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> and <i class="replaceable"><tt>pathname</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
    creates a new <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a>, dribbling from <i class="replaceable"><tt>stream</tt></i> to <i class="replaceable"><tt>pathname</tt></i>,
    writes a dribble initialization note to <i class="replaceable"><tt>pathname</tt></i>,
    and return the <a href="#dribble" title="25.2.12.&#xA0;Function DRIBBLE"><tt class="classname">EXT:DRIBBLE-STREAM</tt></a> (the second value is the <i class="replaceable"><tt>target</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>);
    otherwise <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a> that no appropriate action may be taken.
    <i class="replaceable"><tt>pathname</tt></i> may be an open <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> or a <a href="#path-des">pathname designator</a>.
    See <a href="#dribble-example">above</a> for the sample usage.
    See also <tt class="filename">#P"src/dribble.lisp"</tt> in the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
    source tree.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="version"></a>25.2.13. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><tt class="function">LISP-IMPLEMENTATION-VERSION</tt></a> returns
 the numeric version (like <tt class="literal">3.14</tt>), and
 the release date (like <tt class="literal">"1999-07-21"</tt>).
 When running on the same machine on which <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> was built, it appends
  the binary build and <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a> dump date in universal time
  (like <tt class="literal">3141592654</tt>).
 When running on a different machine, it appends the <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><tt class="function">MACHINE-INSTANCE</tt></a>
  of the machine on which it was built.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="glossary"></a>Chapter 26. Glossary
   <a href="http://www.lisp.org/HyperSpec/Body/chap-26.html" target="_top">[CLHS-26]</a></h2></div></div><div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="appendix"></a>Chapter 27. Appendix
   <a href="http://www.lisp.org/HyperSpec/Body/chap-a.html" target="_top">[CLHS-a]</a></h2></div></div><div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="issues"></a>Chapter 28. X3J13 Issue Index
   <a href="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html" target="_top">[CLHS-ic]</a></h2></div></div><div></div></div><p>This is the list of ANSI CL issues and their current status in
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, i.e., whether <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> supports code that makes use of the
 functionality specified by the vote.</p><div class="variablelist"><a id="issues-list"></a><p class="title"><b>X3J13 Issues</b></p><dl><dt><a id="iss001"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss001.html" target="_top">&amp;ENVIRONMENT-BINDING-ORDER:FIRST</a></dt><dd>yes</dd><dt><a id="iss002"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss002.html" target="_top">ACCESS-ERROR-NAME</a></dt><dd>yes</dd><dt><a id="iss003"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss003.html" target="_top">ADJUST-ARRAY-DISPLACEMENT</a></dt><dd>yes</dd><dt><a id="iss004"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss004.html" target="_top">ADJUST-ARRAY-FILL-POINTER</a></dt><dd>yes</dd><dt><a id="iss005"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss005.html" target="_top">ADJUST-ARRAY-NOT-ADJUSTABLE:IMPLICIT-COPY</a></dt><dd>yes</dd><dt><a id="iss006"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss006.html" target="_top">ALLOCATE-INSTANCE:ADD</a></dt><dd>yes</dd><dt><a id="iss007"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss007.html" target="_top">ALLOW-LOCAL-INLINE:INLINE-NOTINLINE</a></dt><dd>yes</dd><dt><a id="iss008"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss008.html" target="_top">ALLOW-OTHER-KEYS-NIL:PERMIT</a></dt><dd>yes</dd><dt><a id="iss009"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss009.html" target="_top">AREF-1D</a></dt><dd>yes</dd><dt><a id="iss010"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss010.html" target="_top">ARGUMENT-MISMATCH-ERROR-AGAIN:CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss011"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss011.html" target="_top">ARGUMENT-MISMATCH-ERROR-MOON:FIX</a></dt><dd>yes</dd><dt><a id="iss012"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss012.html" target="_top">ARGUMENT-MISMATCH-ERROR:MORE-CLARIFICATIONS</a></dt><dd>yes, except for argument list checking in
     <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a> in compiled code (items 11,12)
     </dd><dt><a id="iss013"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss013.html" target="_top">ARGUMENTS-UNDERSPECIFIED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss014"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss014.html" target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a></dt><dd>no</dd><dt><a id="iss015"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss015.html" target="_top">ARRAY-TYPE-ELEMENT-TYPE-SEMANTICS:UNIFY-UPGRADING</a></dt><dd>yes</dd><dt><a id="iss016"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss016.html" target="_top">ASSERT-ERROR-TYPE:ERROR</a></dt><dd>yes</dd><dt><a id="iss017"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss017.html" target="_top">ASSOC-RASSOC-IF-KEY</a></dt><dd>yes</dd><dt><a id="iss018"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss018.html" target="_top">ASSOC-RASSOC-IF-KEY:YES</a></dt><dd>yes</dd><dt><a id="iss019"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss019.html" target="_top">BOA-AUX-INITIALIZATION:ERROR-ON-READ</a></dt><dd>yes</dd><dt><a id="iss020"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss020.html" target="_top">BREAK-ON-WARNINGS-OBSOLETE:REMOVE</a></dt><dd>yes</dd><dt><a id="iss021"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss021.html" target="_top">BROADCAST-STREAM-RETURN-VALUES:CLARIFY-MINIMALLY</a></dt><dd>no</dd><dt><a id="iss022"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss022.html" target="_top">BUTLAST-NEGATIVE:SHOULD-SIGNAL</a></dt><dd>yes</dd><dt><a id="iss023"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss023.html" target="_top">CHANGE-CLASS-INITARGS:PERMIT</a></dt><dd>yes</dd><dt><a id="iss024"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss024.html" target="_top">CHAR-NAME-CASE:X3J13-MAR-91</a></dt><dd>yes</dd><dt><a id="iss025"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss025.html" target="_top">CHARACTER-LOOSE-ENDS:FIX</a></dt><dd>yes</dd><dt><a id="iss026"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss026.html" target="_top">CHARACTER-PROPOSAL:2</a></dt><dd>yes</dd><dt><a id="iss027"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss027.html" target="_top">CHARACTER-PROPOSAL:2-1-1</a></dt><dd>yes</dd><dt><a id="iss028"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss028.html" target="_top">CHARACTER-PROPOSAL:2-1-2</a></dt><dd>yes</dd><dt><a id="iss029"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss029.html" target="_top">CHARACTER-PROPOSAL:2-2-1</a></dt><dd>yes</dd><dt><a id="iss030"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss030.html" target="_top">CHARACTER-PROPOSAL:2-3-1</a></dt><dd>yes</dd><dt><a id="iss031"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss031.html" target="_top">CHARACTER-PROPOSAL:2-3-2</a></dt><dd>yes</dd><dt><a id="iss032"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss032.html" target="_top">CHARACTER-PROPOSAL:2-3-3</a></dt><dd>yes</dd><dt><a id="iss033"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss033.html" target="_top">CHARACTER-PROPOSAL:2-3-4</a></dt><dd>yes</dd><dt><a id="iss034"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss034.html" target="_top">CHARACTER-PROPOSAL:2-3-5</a></dt><dd>yes</dd><dt><a id="iss035"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss035.html" target="_top">CHARACTER-PROPOSAL:2-3-6</a></dt><dd>yes</dd><dt><a id="iss036"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss036.html" target="_top">CHARACTER-PROPOSAL:2-4-1</a></dt><dd>yes</dd><dt><a id="iss037"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss037.html" target="_top">CHARACTER-PROPOSAL:2-4-2</a></dt><dd>yes</dd><dt><a id="iss038"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss038.html" target="_top">CHARACTER-PROPOSAL:2-4-3</a></dt><dd>yes</dd><dt><a id="iss039"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss039.html" target="_top">CHARACTER-PROPOSAL:2-5-2</a></dt><dd>yes</dd><dt><a id="iss040"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss040.html" target="_top">CHARACTER-PROPOSAL:2-5-6</a></dt><dd>yes</dd><dt><a id="iss041"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss041.html" target="_top">CHARACTER-PROPOSAL:2-5-7</a></dt><dd>yes</dd><dt><a id="iss042"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss042.html" target="_top">CHARACTER-PROPOSAL:2-6-1</a></dt><dd>yes</dd><dt><a id="iss043"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss043.html" target="_top">CHARACTER-PROPOSAL:2-6-2</a></dt><dd>yes</dd><dt><a id="iss044"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss044.html" target="_top">CHARACTER-PROPOSAL:2-6-3</a></dt><dd>yes</dd><dt><a id="iss045"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss045.html" target="_top">CHARACTER-PROPOSAL:2-6-5</a></dt><dd>yes</dd><dt><a id="iss046"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss046.html" target="_top">CHARACTER-VS-CHAR:LESS-INCONSISTENT-SHORT</a></dt><dd>yes</dd><dt><a id="iss047"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss047.html" target="_top">CLASS-OBJECT-SPECIALIZER:AFFIRM</a></dt><dd>yes</dd><dt><a id="iss048"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss048.html" target="_top">CLOS-CONDITIONS-AGAIN:ALLOW-SUBSET</a></dt><dd>yes</dd><dt><a id="iss049"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss049.html" target="_top">CLOS-CONDITIONS:INTEGRATE</a></dt><dd>yes</dd><dt><a id="iss050"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss050.html" target="_top">CLOS-ERROR-CHECKING-ORDER:NO-APPLICABLE-METHOD-FIRST</a></dt><dd>yes</dd><dt><a id="iss051"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss051.html" target="_top">CLOS-MACRO-COMPILATION:MINIMAL</a></dt><dd>yes</dd><dt><a id="iss052"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss052.html" target="_top">CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</a></dt><dd>yes</dd><dt><a id="iss053"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss053.html" target="_top">CLOSED-STREAM-OPERATIONS:ALLOW-INQUIRY</a></dt><dd>yes</dd><dt><a id="iss054"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss054.html" target="_top">COERCING-SETF-NAME-TO-FUNCTION:ALL-FUNCTION-NAMES</a></dt><dd>yes</dd><dt><a id="iss055"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss055.html" target="_top">COLON-NUMBER</a></dt><dd>yes</dd><dt><a id="iss056"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss056.html" target="_top">COMMON-FEATURES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss057"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss057.html" target="_top">COMMON-TYPE:REMOVE</a></dt><dd>yes</dd><dt><a id="iss058"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss058.html" target="_top">COMPILE-ARGUMENT-PROBLEMS-AGAIN:FIX</a></dt><dd>yes</dd><dt><a id="iss059"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss059.html" target="_top">COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss060"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss060.html" target="_top">COMPILE-FILE-OUTPUT-FILE-DEFAULTS:INPUT-FILE</a></dt><dd>yes</dd><dt><a id="iss061"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss061.html" target="_top">COMPILE-FILE-PACKAGE</a></dt><dd>yes</dd><dt><a id="iss062"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss062.html" target="_top">COMPILE-FILE-PATHNAME-ARGUMENTS:MAKE-CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss063"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss063.html" target="_top">COMPILE-FILE-SYMBOL-HANDLING:NEW-REQUIRE-CONSISTENCY</a></dt><dd>yes</dd><dt><a id="iss064"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss064.html" target="_top">COMPILED-FUNCTION-REQUIREMENTS:TIGHTEN</a></dt><dd>yes</dd><dt><a id="iss065"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss065.html" target="_top">COMPILER-DIAGNOSTICS:USE-HANDLER</a></dt><dd>no</dd><dt><a id="iss066"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss066.html" target="_top">COMPILER-LET-CONFUSION:ELIMINATE</a></dt><dd>yes</dd><dt><a id="iss067"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss067.html" target="_top">COMPILER-VERBOSITY:LIKE-LOAD</a></dt><dd>yes</dd><dt><a id="iss068"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss068.html" target="_top">COMPILER-WARNING-STREAM</a></dt><dd>yes</dd><dt><a id="iss069"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss069.html" target="_top">COMPLEX-ATAN-BRANCH-CUT:TWEAK</a></dt><dd>yes</dd><dt><a id="iss070"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss070.html" target="_top">COMPLEX-ATANH-BOGUS-FORMULA:TWEAK-MORE</a></dt><dd>yes</dd><dt><a id="iss071"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss071.html" target="_top">COMPLEX-RATIONAL-RESULT:EXTEND</a></dt><dd>yes</dd><dt><a id="iss072"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss072.html" target="_top">COMPUTE-APPLICABLE-METHODS:GENERIC</a></dt><dd>yes</dd><dt><a id="iss073"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss073.html" target="_top">CONCATENATE-SEQUENCE:SIGNAL-ERROR</a></dt><dd>yes</dd><dt><a id="iss074"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss074.html" target="_top">CONDITION-ACCESSORS-SETFABLE:NO</a></dt><dd>yes</dd><dt><a id="iss075"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss075.html" target="_top">CONDITION-RESTARTS:BUGGY</a></dt><dd>yes</dd><dt><a id="iss076"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss076.html" target="_top">CONDITION-RESTARTS:PERMIT-ASSOCIATION</a></dt><dd>yes</dd><dt><a id="iss077"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss077.html" target="_top">CONDITION-SLOTS:HIDDEN</a></dt><dd>yes</dd><dt><a id="iss078"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss078.html" target="_top">CONS-TYPE-SPECIFIER:ADD</a></dt><dd>yes</dd><dt><a id="iss079"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss079.html" target="_top">CONSTANT-CIRCULAR-COMPILATION:YES</a></dt><dd>yes</dd><dt><a id="iss080"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss080.html" target="_top">CONSTANT-COLLAPSING:GENERALIZE</a></dt><dd>yes</dd><dt><a id="iss081"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss081.html" target="_top">CONSTANT-COMPILABLE-TYPES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss082"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss082.html" target="_top">CONSTANT-FUNCTION-COMPILATION:NO</a></dt><dd>no</dd><dt><a id="iss083"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss083.html" target="_top">CONSTANT-MODIFICATION:DISALLOW</a></dt><dd>yes</dd><dt><a id="iss084"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss084.html" target="_top">CONSTANTP-DEFINITION:INTENTIONAL</a></dt><dd>yes</dd><dt><a id="iss085"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss085.html" target="_top">CONSTANTP-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss086"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss086.html" target="_top">CONTAGION-ON-NUMERICAL-COMPARISONS:TRANSITIVE</a></dt><dd>yes</dd><dt><a id="iss087"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss087.html" target="_top">COPY-SYMBOL-COPY-PLIST:COPY-LIST</a></dt><dd>yes</dd><dt><a id="iss088"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss088.html" target="_top">COPY-SYMBOL-PRINT-NAME:EQUAL</a></dt><dd>yes</dd><dt><a id="iss089"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss089.html" target="_top">DATA-IO:ADD-SUPPORT</a></dt><dd>yes</dd><dt><a id="iss090"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss090.html" target="_top">DATA-TYPES-HIERARCHY-UNDERSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss091"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss091.html" target="_top">DEBUGGER-HOOK-VS-BREAK:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss092"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss092.html" target="_top">DECLARATION-SCOPE:NO-HOISTING</a></dt><dd>no</dd><dt><a id="iss093"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss093.html" target="_top">DECLARE-ARRAY-TYPE-ELEMENT-REFERENCES:RESTRICTIVE</a></dt><dd>yes</dd><dt><a id="iss094"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss094.html" target="_top">DECLARE-FUNCTION-AMBIGUITY:DELETE-FTYPE-ABBREVIATION</a></dt><dd>yes</dd><dt><a id="iss095"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss095.html" target="_top">DECLARE-MACROS:FLUSH</a></dt><dd>yes</dd><dt><a id="iss096"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss096.html" target="_top">DECLARE-TYPE-FREE:LEXICAL</a></dt><dd>yes</dd><dt><a id="iss097"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss097.html" target="_top">DECLS-AND-DOC</a></dt><dd>??</dd><dt><a id="iss098"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss098.html" target="_top">DECODE-UNIVERSAL-TIME-DAYLIGHT:LIKE-ENCODE</a></dt><dd>yes</dd><dt><a id="iss099"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss099.html" target="_top">DEFCONSTANT-SPECIAL:NO</a></dt><dd>yes</dd><dt><a id="iss100"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss100.html" target="_top">DEFGENERIC-DECLARE:ALLOW-MULTIPLE</a></dt><dd>yes</dd><dt><a id="iss101"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss101.html" target="_top">DEFINE-COMPILER-MACRO:X3J13-NOV89</a></dt><dd>yes</dd><dt><a id="iss102"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss102.html" target="_top">DEFINE-CONDITION-SYNTAX:INCOMPATIBLY-MORE-LIKE-DEFCLASS+EMPHASIZE-READ-ONLY</a></dt><dd>yes</dd><dt><a id="iss103"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss103.html" target="_top">DEFINE-METHOD-COMBINATION-BEHAVIOR:CLARIFY</a></dt><dd>no</dd><dt><a id="iss104"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss104.html" target="_top">DEFINING-MACROS-NON-TOP-LEVEL:ALLOW</a></dt><dd>yes</dd><dt><a id="iss105"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss105.html" target="_top">DEFMACRO-BLOCK-SCOPE:EXCLUDES-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss106"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss106.html" target="_top">DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION</a></dt><dd>yes</dd><dt><a id="iss107"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss107.html" target="_top">DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss108"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss108.html" target="_top">DEFPACKAGE:ADDITION</a></dt><dd>yes</dd><dt><a id="iss109"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss109.html" target="_top">DEFSTRUCT-CONSTRUCTOR-KEY-MIXTURE:ALLOW-KEY</a></dt><dd>yes</dd><dt><a id="iss110"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss110.html" target="_top">DEFSTRUCT-CONSTRUCTOR-OPTIONS:EXPLICIT</a></dt><dd>yes</dd><dt><a id="iss111"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss111.html" target="_top">DEFSTRUCT-CONSTRUCTOR-SLOT-VARIABLES:NOT-BOUND</a></dt><dd>yes</dd><dt><a id="iss112"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss112.html" target="_top">DEFSTRUCT-COPIER-ARGUMENT-TYPE:RESTRICT</a></dt><dd>yes</dd><dt><a id="iss113"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss113.html" target="_top">DEFSTRUCT-COPIER:ARGUMENT-TYPE</a></dt><dd>yes</dd><dt><a id="iss114"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss114.html" target="_top">DEFSTRUCT-DEFAULT-VALUE-EVALUATION:IFF-NEEDED</a></dt><dd>yes</dd><dt><a id="iss115"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss115.html" target="_top">DEFSTRUCT-INCLUDE-DEFTYPE:EXPLICITLY-UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss116"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss116.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-AGAIN:X3J13-MAR-93</a></dt><dd>yes</dd><dt><a id="iss117"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss117.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES</a></dt><dd>yes</dd><dt><a id="iss118"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss118.html" target="_top">DEFSTRUCT-REDEFINITION:ERROR</a></dt><dd>yes</dd><dt><a id="iss119"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss119.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</a></dt><dd>yes</dd><dt><a id="iss120"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss120.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NUMBER</a></dt><dd>yes</dd><dt><a id="iss121"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss121.html" target="_top">DEFTYPE-DESTRUCTURING:YES</a></dt><dd>yes</dd><dt><a id="iss122"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss122.html" target="_top">DEFTYPE-KEY:ALLOW</a></dt><dd>yes</dd><dt><a id="iss123"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss123.html" target="_top">DEFVAR-DOCUMENTATION:UNEVALUATED</a></dt><dd>yes</dd><dt><a id="iss124"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss124.html" target="_top">DEFVAR-INIT-TIME:NOT-DELAYED</a></dt><dd>yes</dd><dt><a id="iss125"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss125.html" target="_top">DEFVAR-INITIALIZATION:CONSERVATIVE</a></dt><dd>yes</dd><dt><a id="iss126"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss126.html" target="_top">DEPRECATION-POSITION:LIMITED</a></dt><dd>yes</dd><dt><a id="iss127"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss127.html" target="_top">DESCRIBE-INTERACTIVE:NO</a></dt><dd>yes</dd><dt><a id="iss128"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss128.html" target="_top">DESCRIBE-UNDERSPECIFIED:DESCRIBE-OBJECT</a></dt><dd>yes</dd><dt><a id="iss129"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss129.html" target="_top">DESTRUCTIVE-OPERATIONS:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss130"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss130.html" target="_top">DESTRUCTURING-BIND:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss131"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss131.html" target="_top">DISASSEMBLE-SIDE-EFFECT:DO-NOT-INSTALL</a></dt><dd>yes</dd><dt><a id="iss132"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss132.html" target="_top">DISPLACED-ARRAY-PREDICATE:ADD</a></dt><dd>yes</dd><dt><a id="iss133"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss133.html" target="_top">DO-SYMBOLS-BLOCK-SCOPE:ENTIRE-FORM</a></dt><dd>yes</dd><dt><a id="iss134"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss134.html" target="_top">DO-SYMBOLS-DUPLICATES</a></dt><dd>yes</dd><dt><a id="iss135"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss135.html" target="_top">DOCUMENTATION-FUNCTION-BUGS:FIX</a></dt><dd>yes</dd><dt><a id="iss136"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss136.html" target="_top">DOCUMENTATION-FUNCTION-TANGLED:REQUIRE-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss137"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss137.html" target="_top">DOTIMES-IGNORE:X3J13-MAR91</a></dt><dd>yes</dd><dt><a id="iss138"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss138.html" target="_top">DOTTED-LIST-ARGUMENTS:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss139"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss139.html" target="_top">DOTTED-MACRO-FORMS:ALLOW</a></dt><dd>yes</dd><dt><a id="iss140"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss140.html" target="_top">DRIBBLE-TECHNIQUE</a></dt><dd>yes</dd><dt><a id="iss141"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss141.html" target="_top">DYNAMIC-EXTENT-FUNCTION:EXTEND</a></dt><dd>yes</dd><dt><a id="iss142"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss142.html" target="_top">DYNAMIC-EXTENT:NEW-DECLARATION</a></dt><dd>yes</dd><dt><a id="iss143"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss143.html" target="_top">EQUAL-STRUCTURE:MAYBE-STATUS-QUO</a></dt><dd>yes</dd><dt><a id="iss144"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss144.html" target="_top">ERROR-TERMINOLOGY-WARNING:MIGHT</a></dt><dd>yes</dd><dt><a id="iss145"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss145.html" target="_top">EVAL-OTHER:SELF-EVALUATE</a></dt><dd>yes</dd><dt><a id="iss146"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss146.html" target="_top">EVAL-TOP-LEVEL:LOAD-LIKE-COMPILE-FILE</a></dt><dd>yes</dd><dt><a id="iss147"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss147.html" target="_top">EVAL-WHEN-NON-TOP-LEVEL:GENERALIZE-EVAL-NEW-KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss148"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss148.html" target="_top">EVAL-WHEN-OBSOLETE-KEYWORDS:X3J13-MAR-1993</a></dt><dd>no</dd><dt><a id="iss149"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss149.html" target="_top">EVALHOOK-STEP-CONFUSION:FIX</a></dt><dd>yes</dd><dt><a id="iss150"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss150.html" target="_top">EVALHOOK-STEP-CONFUSION:X3J13-NOV-89</a></dt><dd>yes</dd><dt><a id="iss151"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss151.html" target="_top">EXIT-EXTENT-AND-CONDITION-SYSTEM:LIKE-DYNAMIC-BINDINGS</a></dt><dd>yes</dd><dt><a id="iss152"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss152.html" target="_top">EXIT-EXTENT:MINIMAL</a></dt><dd>yes, actually implement MEDIUM
    </dd><dt><a id="iss153"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss153.html" target="_top">EXPT-RATIO:P.211</a></dt><dd>yes</dd><dt><a id="iss154"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss154.html" target="_top">EXTENSIONS-POSITION:DOCUMENTATION</a></dt><dd>yes</dd><dt><a id="iss155"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss155.html" target="_top">EXTERNAL-FORMAT-FOR-EVERY-FILE-CONNECTION:MINIMUM</a></dt><dd>yes</dd><dt><a id="iss156"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss156.html" target="_top">EXTRA-RETURN-VALUES:NO</a></dt><dd>yes</dd><dt><a id="iss157"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss157.html" target="_top">FILE-OPEN-ERROR:SIGNAL-FILE-ERROR</a></dt><dd>yes</dd><dt><a id="iss158"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss158.html" target="_top">FIXNUM-NON-PORTABLE:TIGHTEN-DEFINITION</a></dt><dd>yes</dd><dt><a id="iss159"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss159.html" target="_top">FLET-DECLARATIONS</a></dt><dd>yes</dd><dt><a id="iss160"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss160.html" target="_top">FLET-DECLARATIONS:ALLOW</a></dt><dd>yes</dd><dt><a id="iss161"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss161.html" target="_top">FLET-IMPLICIT-BLOCK:YES</a></dt><dd>yes</dd><dt><a id="iss162"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss162.html" target="_top">FLOAT-UNDERFLOW:ADD-VARIABLES</a></dt><dd>yes</dd><dt><a id="iss163"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss163.html" target="_top">FLOATING-POINT-CONDITION-NAMES:X3J13-NOV-89</a></dt><dd>yes</dd><dt><a id="iss164"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss164.html" target="_top">FORMAT-ATSIGN-COLON</a></dt><dd>yes</dd><dt><a id="iss165"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss165.html" target="_top">FORMAT-COLON-UPARROW-SCOPE</a></dt><dd>yes</dd><dt><a id="iss166"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss166.html" target="_top">FORMAT-COMMA-INTERVAL</a></dt><dd>yes</dd><dt><a id="iss167"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss167.html" target="_top">FORMAT-E-EXPONENT-SIGN:FORCE-SIGN</a></dt><dd>yes</dd><dt><a id="iss168"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss168.html" target="_top">FORMAT-OP-C</a></dt><dd>yes</dd><dt><a id="iss169"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss169.html" target="_top">FORMAT-PRETTY-PRINT:YES</a></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><tt class="literal">~F</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><tt class="literal">~E</tt></a>,
     <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><tt class="literal">~G</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><tt class="literal">~$</tt></a> also bind <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-BASE*</tt></a> to 10 and
     <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><tt class="varname">*PRINT-RADIX*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dd><dt><a id="iss170"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss170.html" target="_top">FORMAT-STRING-ARGUMENTS:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss171"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss171.html" target="_top">FUNCTION-CALL-EVALUATION-ORDER:MORE-UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss172"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss172.html" target="_top">FUNCTION-COMPOSITION:JAN89-X3J13</a></dt><dd>yes</dd><dt><a id="iss173"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss173.html" target="_top">FUNCTION-DEFINITION:JAN89-X3J13</a></dt><dd>yes</dd><dt><a id="iss174"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss174.html" target="_top">FUNCTION-NAME:LARGE</a></dt><dd>yes</dd><dt><a id="iss175"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss175.html" target="_top">FUNCTION-TYPE</a></dt><dd>yes</dd><dt><a id="iss176"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss176.html" target="_top">FUNCTION-TYPE-ARGUMENT-TYPE-SEMANTICS:RESTRICTIVE</a></dt><dd>yes</dd><dt><a id="iss177"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss177.html" target="_top">FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD</a></dt><dd>yes</dd><dt><a id="iss178"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss178.html" target="_top">FUNCTION-TYPE-REST-LIST-ELEMENT:USE-ACTUAL-ARGUMENT-TYPE</a></dt><dd>yes</dd><dt><a id="iss179"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss179.html" target="_top">FUNCTION-TYPE:X3J13-MARCH-88</a></dt><dd>yes</dd><dt><a id="iss180"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss180.html" target="_top">GENERALIZE-PRETTY-PRINTER:UNIFY</a></dt><dd>no</dd><dt><a id="iss181"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a></dt><dd>yes</dd><dt><a id="iss182"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss182.html" target="_top">GENSYM-NAME-STICKINESS:LIKE-TEFLON</a></dt><dd>yes</dd><dt><a id="iss183"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss183.html" target="_top">GENTEMP-BAD-IDEA:DEPRECATE</a></dt><dd>yes</dd><dt><a id="iss184"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss184.html" target="_top">GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD</a></dt><dd>yes</dd><dt><a id="iss185"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss185.html" target="_top">GET-SETF-METHOD-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss186"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss186.html" target="_top">HASH-TABLE-ACCESS:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss187"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss187.html" target="_top">HASH-TABLE-KEY-MODIFICATION:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss188"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss188.html" target="_top">HASH-TABLE-PACKAGE-GENERATORS:ADD-WITH-WRAPPER</a></dt><dd>yes</dd><dt><a id="iss189"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss189.html" target="_top">HASH-TABLE-REHASH-SIZE-INTEGER</a></dt><dd>yes</dd><dt><a id="iss190"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss190.html" target="_top">HASH-TABLE-SIZE:INTENDED-ENTRIES</a></dt><dd>yes</dd><dt><a id="iss191"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss191.html" target="_top">HASH-TABLE-TESTS:ADD-EQUALP</a></dt><dd>yes</dd><dt><a id="iss192"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss192.html" target="_top">IEEE-ATAN-BRANCH-CUT:SPLIT</a></dt><dd>yes</dd><dt><a id="iss193"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss193.html" target="_top">IGNORE-USE-TERMINOLOGY:VALUE-ONLY</a></dt><dd>yes</dd><dt><a id="iss194"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss194.html" target="_top">IMPORT-SETF-SYMBOL-PACKAGE</a></dt><dd>yes</dd><dt><a id="iss195"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss195.html" target="_top">IN-PACKAGE-FUNCTIONALITY:MAR89-X3J13</a></dt><dd>yes</dd><dt><a id="iss196"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss196.html" target="_top">IN-SYNTAX:MINIMAL</a></dt><dd>yes</dd><dt><a id="iss197"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss197.html" target="_top">INITIALIZATION-FUNCTION-KEYWORD-CHECKING</a></dt><dd>yes</dd><dt><a id="iss198"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss198.html" target="_top">ISO-COMPATIBILITY:ADD-SUBSTRATE</a></dt><dd>yes</dd><dt><a id="iss199"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss199.html" target="_top">JUN90-TRIVIAL-ISSUES:11</a></dt><dd>yes</dd><dt><a id="iss200"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss200.html" target="_top">JUN90-TRIVIAL-ISSUES:14</a></dt><dd>yes</dd><dt><a id="iss201"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss201.html" target="_top">JUN90-TRIVIAL-ISSUES:24</a></dt><dd>yes</dd><dt><a id="iss202"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss202.html" target="_top">JUN90-TRIVIAL-ISSUES:25</a></dt><dd>yes</dd><dt><a id="iss203"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss203.html" target="_top">JUN90-TRIVIAL-ISSUES:27</a></dt><dd>yes for <a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><tt class="function">THE</tt></a>, no for <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> (spec not clear)
     </dd><dt><a id="iss204"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss204.html" target="_top">JUN90-TRIVIAL-ISSUES:3</a></dt><dd>yes</dd><dt><a id="iss205"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss205.html" target="_top">JUN90-TRIVIAL-ISSUES:4</a></dt><dd>yes</dd><dt><a id="iss206"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss206.html" target="_top">JUN90-TRIVIAL-ISSUES:5</a></dt><dd>yes</dd><dt><a id="iss207"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss207.html" target="_top">JUN90-TRIVIAL-ISSUES:9</a></dt><dd>yes</dd><dt><a id="iss208"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss208.html" target="_top">KEYWORD-ARGUMENT-NAME-PACKAGE:ANY</a></dt><dd>yes</dd><dt><a id="iss209"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss209.html" target="_top">LAST-N</a></dt><dd>yes</dd><dt><a id="iss210"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss210.html" target="_top">LCM-NO-ARGUMENTS:1</a></dt><dd>yes</dd><dt><a id="iss211"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss211.html" target="_top">LEXICAL-CONSTRUCT-GLOBAL-DEFINITION:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss212"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss212.html" target="_top">LISP-PACKAGE-NAME:COMMON-LISP</a></dt><dd>yes</dd><dt><a id="iss213"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss213.html" target="_top">LISP-SYMBOL-REDEFINITION-AGAIN:MORE-FIXES</a></dt><dd>yes</dd><dt><a id="iss214"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss214.html" target="_top">LISP-SYMBOL-REDEFINITION:MAR89-X3J13</a></dt><dd>yes</dd><dt><a id="iss215"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss215.html" target="_top">LOAD-OBJECTS:MAKE-LOAD-FORM</a></dt><dd>yes</dd><dt><a id="iss216"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss216.html" target="_top">LOAD-TIME-EVAL:R**2-NEW-SPECIAL-FORM</a></dt><dd>obsolete</dd><dt><a id="iss217"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss217.html" target="_top">LOAD-TIME-EVAL:R**3-NEW-SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss218"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss218.html" target="_top">LOAD-TRUENAME:NEW-PATHNAME-VARIABLES</a></dt><dd>yes</dd><dt><a id="iss219"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss219.html" target="_top">LOCALLY-TOP-LEVEL:SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss220"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss220.html" target="_top">LOOP-AND-DISCREPANCY:NO-REITERATION</a></dt><dd>yes</dd><dt><a id="iss221"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss221.html" target="_top">LOOP-FOR-AS-ON-TYPO:FIX-TYPO</a></dt><dd>yes</dd><dt><a id="iss222"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss222.html" target="_top">LOOP-INITFORM-ENVIRONMENT:PARTIAL-INTERLEAVING-VAGUE</a></dt><dd>no</dd><dt><a id="iss223"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss223.html" target="_top">LOOP-MISCELLANEOUS-REPAIRS:FIX</a></dt><dd>yes</dd><dt><a id="iss224"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss224.html" target="_top">LOOP-NAMED-BLOCK-NIL:OVERRIDE</a></dt><dd>yes</dd><dt><a id="iss225"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss225.html" target="_top">LOOP-PRESENT-SYMBOLS-TYPO:FLUSH-WRONG-WORDS</a></dt><dd>yes</dd><dt><a id="iss226"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss226.html" target="_top">LOOP-SYNTAX-OVERHAUL:REPAIR</a></dt><dd>yes</dd><dt><a id="iss227"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss227.html" target="_top">MACRO-AS-FUNCTION:DISALLOW</a></dt><dd>yes</dd><dt><a id="iss228"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss228.html" target="_top">MACRO-DECLARATIONS:MAKE-EXPLICIT</a></dt><dd>yes</dd><dt><a id="iss229"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss229.html" target="_top">MACRO-ENVIRONMENT-EXTENT:DYNAMIC</a></dt><dd>yes</dd><dt><a id="iss230"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss230.html" target="_top">MACRO-FUNCTION-ENVIRONMENT</a></dt><dd>obsolete</dd><dt><a id="iss231"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss231.html" target="_top">MACRO-FUNCTION-ENVIRONMENT:YES</a></dt><dd>yes</dd><dt><a id="iss232"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss232.html" target="_top">MACRO-SUBFORMS-TOP-LEVEL-P:ADD-CONSTRAINTS</a></dt><dd>no</dd><dt><a id="iss233"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss233.html" target="_top">MACROEXPAND-HOOK-DEFAULT:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss234"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss234.html" target="_top">MACROEXPAND-HOOK-INITIAL-VALUE:IMPLEMENTATION-DEPENDENT</a></dt><dd>yes</dd><dt><a id="iss235"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss235.html" target="_top">MACROEXPAND-RETURN-VALUE:TRUE</a></dt><dd>yes</dd><dt><a id="iss236"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss236.html" target="_top">MAKE-LOAD-FORM-CONFUSION:REWRITE</a></dt><dd>yes</dd><dt><a id="iss237"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss237.html" target="_top">MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS</a></dt><dd>yes</dd><dt><a id="iss238"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss238.html" target="_top">MAKE-PACKAGE-USE-DEFAULT:IMPLEMENTATION-DEPENDENT</a></dt><dd>yes</dd><dt><a id="iss239"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss239.html" target="_top">MAP-INTO:ADD-FUNCTION</a></dt><dd>yes</dd><dt><a id="iss240"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss240.html" target="_top">MAPPING-DESTRUCTIVE-INTERACTION:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss241"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss241.html" target="_top">METACLASS-OF-SYSTEM-CLASS:UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss242"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss242.html" target="_top">METHOD-COMBINATION-ARGUMENTS:CLARIFY</a></dt><dd>no</dd><dt><a id="iss243"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss243.html" target="_top">METHOD-INITFORM:FORBID-CALL-NEXT-METHOD</a></dt><dd>no</dd><dt><a id="iss244"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss244.html" target="_top">MUFFLE-WARNING-CONDITION-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss245"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss245.html" target="_top">MULTIPLE-VALUE-SETQ-ORDER:LIKE-SETF-OF-VALUES</a></dt><dd>yes</dd><dt><a id="iss246"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss246.html" target="_top">MULTIPLE-VALUES-LIMIT-ON-VARIABLES:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss247"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss247.html" target="_top">NINTERSECTION-DESTRUCTION</a></dt><dd>yes</dd><dt><a id="iss248"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss248.html" target="_top">NINTERSECTION-DESTRUCTION:REVERT</a></dt><dd>yes</dd><dt><a id="iss249"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss249.html" target="_top">NOT-AND-NULL-RETURN-VALUE:X3J13-MAR-93</a></dt><dd>yes</dd><dt><a id="iss250"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss250.html" target="_top">NTH-VALUE:ADD</a></dt><dd>yes</dd><dt><a id="iss251"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss251.html" target="_top">OPTIMIZE-DEBUG-INFO:NEW-QUALITY</a></dt><dd>yes</dd><dt><a id="iss252"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss252.html" target="_top">PACKAGE-CLUTTER:REDUCE</a></dt><dd>yes</dd><dt><a id="iss253"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss253.html" target="_top">PACKAGE-DELETION:NEW-FUNCTION</a></dt><dd>yes</dd><dt><a id="iss254"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss254.html" target="_top">PACKAGE-FUNCTION-CONSISTENCY:MORE-PERMISSIVE</a></dt><dd>yes</dd><dt><a id="iss255"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss255.html" target="_top">PARSE-ERROR-STREAM:SPLIT-TYPES</a></dt><dd>yes</dd><dt><a id="iss256"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss256.html" target="_top">PATHNAME-COMPONENT-CASE:KEYWORD-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss257"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss257.html" target="_top">PATHNAME-COMPONENT-VALUE:SPECIFY</a></dt><dd>no</dd><dt><a id="iss258"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss258.html" target="_top">PATHNAME-HOST-PARSING:RECOGNIZE-LOGICAL-HOST-NAMES</a></dt><dd>yes when <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    </dd><dt><a id="iss259"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss259.html" target="_top">PATHNAME-LOGICAL:ADD</a></dt><dd>yes</dd><dt><a id="iss260"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss260.html" target="_top">PATHNAME-PRINT-READ:SHARPSIGN-P</a></dt><dd>yes</dd><dt><a id="iss261"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss261.html" target="_top">PATHNAME-STREAM</a></dt><dd>yes</dd><dt><a id="iss262"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss262.html" target="_top">PATHNAME-STREAM:FILES-OR-SYNONYM</a></dt><dd>yes</dd><dt><a id="iss263"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss263.html" target="_top">PATHNAME-SUBDIRECTORY-LIST:NEW-REPRESENTATION</a></dt><dd>yes</dd><dt><a id="iss264"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss264.html" target="_top">PATHNAME-SYMBOL</a></dt><dd>yes when <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
 </dd><dt><a id="iss265"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss265.html" target="_top">PATHNAME-SYNTAX-ERROR-TIME:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss266"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss266.html" target="_top">PATHNAME-UNSPECIFIC-COMPONENT:NEW-TOKEN</a></dt><dd>no</dd><dt><a id="iss267"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss267.html" target="_top">PATHNAME-WILD:NEW-FUNCTIONS</a></dt><dd>yes</dd><dt><a id="iss268"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss268.html" target="_top">PEEK-CHAR-READ-CHAR-ECHO:FIRST-READ-CHAR</a></dt><dd>yes</dd><dt><a id="iss269"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss269.html" target="_top">PLIST-DUPLICATES:ALLOW</a></dt><dd>yes</dd><dt><a id="iss270"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss270.html" target="_top">PRETTY-PRINT-INTERFACE</a></dt><dd>yes</dd><dt><a id="iss271"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss271.html" target="_top">PRINC-READABLY:X3J13-DEC-91</a></dt><dd>yes</dd><dt><a id="iss272"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss272.html" target="_top">PRINT-CASE-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss273"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss273.html" target="_top">PRINT-CASE-PRINT-ESCAPE-INTERACTION:VERTICAL-BAR-RULE-NO-UPCASE</a></dt><dd>yes</dd><dt><a id="iss274"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss274.html" target="_top">PRINT-CIRCLE-SHARED:RESPECT-PRINT-CIRCLE</a></dt><dd>yes</dd><dt><a id="iss275"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss275.html" target="_top">PRINT-CIRCLE-STRUCTURE:USER-FUNCTIONS-WORK</a></dt><dd>yes</dd><dt><a id="iss276"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss277"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss277.html" target="_top">PRINTER-WHITESPACE:JUST-ONE-SPACE</a></dt><dd>yes</dd><dt><a id="iss278"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss278.html" target="_top">PROCLAIM-ETC-IN-COMPILE-FILE:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss279"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss279.html" target="_top">PUSH-EVALUATION-ORDER:FIRST-ITEM</a></dt><dd>yes</dd><dt><a id="iss280"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss280.html" target="_top">PUSH-EVALUATION-ORDER:ITEM-FIRST</a></dt><dd>yes</dd><dt><a id="iss281"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss281.html" target="_top">PUSHNEW-STORE-REQUIRED:UNSPECIFIED</a></dt><dd>yes</dd><dt><a id="iss282"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss282.html" target="_top">QUOTE-SEMANTICS:NO-COPYING</a></dt><dd>yes</dd><dt><a id="iss283"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a></dt><dd>yes, when <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>;
     otherwise negative <tt class="constant">:COUNT</tt> values are not allowed.
     </dd><dt><a id="iss284"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss284.html" target="_top">RANGE-OF-START-AND-END-PARAMETERS:INTEGER-AND-INTEGER-NIL</a></dt><dd>yes</dd><dt><a id="iss285"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss285.html" target="_top">READ-AND-WRITE-BYTES:NEW-FUNCTIONS</a></dt><dd>yes</dd><dt><a id="iss286"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss286.html" target="_top">READ-CASE-SENSITIVITY:READTABLE-KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss287"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss287.html" target="_top">READ-MODIFY-WRITE-EVALUATION-ORDER:DELAYED-ACCESS-STORES</a></dt><dd>no</dd><dt><a id="iss288"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss288.html" target="_top">READ-SUPPRESS-CONFUSING:GENERALIZE</a></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/fun_read-delimited-list.html" target="_top"><tt class="function">READ-DELIMITED-LIST</tt></a> still
     constructs a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a></dd><dt><a id="iss289"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss289.html" target="_top">READER-ERROR:NEW-TYPE</a></dt><dd>yes</dd><dt><a id="iss290"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss290.html" target="_top">REAL-NUMBER-TYPE:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss291"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss291.html" target="_top">RECURSIVE-DEFTYPE:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss292"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss292.html" target="_top">REDUCE-ARGUMENT-EXTRACTION</a></dt><dd>yes</dd><dt><a id="iss293"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss293.html" target="_top">REMF-DESTRUCTION-UNSPECIFIED:X3J13-MAR-89</a></dt><dd>yes</dd><dt><a id="iss294"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dt><dd>yes</dd><dt><a id="iss295"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss295.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-YET-AGAIN:RESTORE-ARGUMENT</a></dt><dd>yes</dd><dt><a id="iss296"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss296.html" target="_top">REQUIRE-PATHNAME-DEFAULTS:ELIMINATE</a></dt><dd>superseded by <a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dd><dt><a id="iss297"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss297.html" target="_top">REST-LIST-ALLOCATION:MAY-SHARE</a></dt><dd>yes</dd><dt><a id="iss298"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss298.html" target="_top">RESULT-LISTS-SHARED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss299"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss299.html" target="_top">RETURN-VALUES-UNSPECIFIED:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss300"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss300.html" target="_top">ROOM-DEFAULT-ARGUMENT:NEW-VALUE</a></dt><dd>yes</dd><dt><a id="iss301"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss301.html" target="_top">SELF-MODIFYING-CODE:FORBID</a></dt><dd>yes</dd><dt><a id="iss302"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss302.html" target="_top">SEQUENCE-TYPE-LENGTH:MUST-MATCH</a></dt><dd>yes</dd><dt><a id="iss303"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss303.html" target="_top">SETF-APPLY-EXPANSION:IGNORE-EXPANDER</a></dt><dd>no</dd><dt><a id="iss304"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss304.html" target="_top">SETF-FIND-CLASS:ALLOW-NIL</a></dt><dd>yes</dd><dt><a id="iss305"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss305.html" target="_top">SETF-FUNCTIONS-AGAIN:MINIMAL-CHANGES</a></dt><dd>yes</dd><dt><a id="iss306"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss306.html" target="_top">SETF-GET-DEFAULT:EVALUATED-BUT-IGNORED</a></dt><dd>yes</dd><dt><a id="iss307"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss307.html" target="_top">SETF-MACRO-EXPANSION:LAST</a></dt><dd>yes</dd><dt><a id="iss308"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss308.html" target="_top">SETF-METHOD-VS-SETF-METHOD:RENAME-OLD-TERMS</a></dt><dd>yes</dd><dt><a id="iss309"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss309.html" target="_top">SETF-MULTIPLE-STORE-VARIABLES:ALLOW</a></dt><dd>yes</dd><dt><a id="iss310"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss310.html" target="_top">SETF-OF-APPLY:ONLY-AREF-AND-FRIENDS</a></dt><dd>yes</dd><dt><a id="iss311"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss311.html" target="_top">SETF-OF-VALUES:ADD</a></dt><dd>yes</dd><dt><a id="iss312"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss312.html" target="_top">SETF-SUB-METHODS:DELAYED-ACCESS-STORES</a></dt><dd>yes</dd><dt><a id="iss313"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss313.html" target="_top">SHADOW-ALREADY-PRESENT</a></dt><dd>yes</dd><dt><a id="iss314"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss314.html" target="_top">SHADOW-ALREADY-PRESENT:WORKS</a></dt><dd>yes</dd><dt><a id="iss315"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a></dt><dd>no</dd><dt><a id="iss316"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss316.html" target="_top">SHARP-O-FOOBAR:CONSEQUENCES-UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss317"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss317.html" target="_top">SHARP-STAR-DELIMITER:NORMAL-DELIMITER</a></dt><dd>yes</dd><dt><a id="iss318"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss318.html" target="_top">SHARPSIGN-PLUS-MINUS-PACKAGE:KEYWORD</a></dt><dd>yes</dd><dt><a id="iss319"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss319.html" target="_top">SLOT-MISSING-VALUES:SPECIFY</a></dt><dd>yes</dd><dt><a id="iss320"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss320.html" target="_top">SLOT-VALUE-METACLASSES:LESS-MINIMAL</a></dt><dd>yes</dd><dt><a id="iss321"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss321.html" target="_top">SPECIAL-FORM-P-MISNOMER:RENAME</a></dt><dd>yes</dd><dt><a id="iss322"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss322.html" target="_top">SPECIAL-TYPE-SHADOWING:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss323"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss323.html" target="_top">STANDARD-INPUT-INITIAL-BINDING:DEFINED-CONTRACTS</a></dt><dd>yes</dd><dt><a id="iss324"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss324.html" target="_top">STANDARD-REPERTOIRE-GRATUITOUS:RENAME</a></dt><dd>yes</dd><dt><a id="iss325"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss325.html" target="_top">STEP-ENVIRONMENT:CURRENT</a></dt><dd>yes</dd><dt><a id="iss326"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss326.html" target="_top">STEP-MINIMAL:PERMIT-PROGN</a></dt><dd>yes</dd><dt><a id="iss327"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss327.html" target="_top">STREAM-ACCESS:ADD-TYPES-ACCESSORS</a></dt><dd>yes</dd><dt><a id="iss328"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss328.html" target="_top">STREAM-CAPABILITIES:INTERACTIVE-STREAM-P</a></dt><dd>yes</dd><dt><a id="iss329"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss329.html" target="_top">STRING-COERCION:MAKE-CONSISTENT</a></dt><dd>yes</dd><dt><a id="iss330"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss330.html" target="_top">STRING-OUTPUT-STREAM-BASHING:UNDEFINED</a></dt><dd>yes</dd><dt><a id="iss331"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss331.html" target="_top">STRUCTURE-READ-PRINT-SYNTAX:KEYWORDS</a></dt><dd>yes</dd><dt><a id="iss332"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss332.html" target="_top">SUBSEQ-OUT-OF-BOUNDS</a></dt><dd>yes</dd><dt><a id="iss333"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss333.html" target="_top">SUBSEQ-OUT-OF-BOUNDS:IS-AN-ERROR</a></dt><dd>yes</dd><dt><a id="iss334"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss334.html" target="_top">SUBSETTING-POSITION:NONE</a></dt><dd>yes</dd><dt><a id="iss335"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss335.html" target="_top">SUBTYPEP-ENVIRONMENT:ADD-ARG</a></dt><dd>yes</dd><dt><a id="iss336"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss336.html" target="_top">SUBTYPEP-TOO-VAGUE:CLARIFY-MORE</a></dt><dd>yes</dd><dt><a id="iss337"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss337.html" target="_top">SXHASH-DEFINITION:SIMILAR-FOR-SXHASH</a></dt><dd>yes</dd><dt><a id="iss338"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss338.html" target="_top">SYMBOL-MACROLET-DECLARE:ALLOW</a></dt><dd>yes</dd><dt><a id="iss339"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss339.html" target="_top">SYMBOL-MACROLET-SEMANTICS:SPECIAL-FORM</a></dt><dd>yes</dd><dt><a id="iss340"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss340.html" target="_top">SYMBOL-MACROLET-TYPE-DECLARATION:NO</a></dt><dd>yes</dd><dt><a id="iss341"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss341.html" target="_top">SYMBOL-MACROS-AND-PROCLAIMED-SPECIALS:SIGNALS-AN-ERROR</a></dt><dd>yes</dd><dt><a id="iss342"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss342.html" target="_top">SYMBOL-PRINT-ESCAPE-BEHAVIOR:CLARIFY</a></dt><dd>yes</dd><dt><a id="iss343"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss343.html" target="_top">SYNTACTIC-ENVIRONMENT-ACCESS:RETRACTED-MAR91</a></dt><dd>yes</dd><dt><a id="iss344"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss344.html" target="_top">TAGBODY-TAG-EXPANSION:NO</a></dt><dd>yes</dd><dt><a id="iss345"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss345.html" target="_top">TAILP-NIL:T</a></dt><dd>yes</dd><dt><a id="iss346"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss346.html" target="_top">TEST-NOT-IF-NOT:FLUSH-ALL</a></dt><dd>yes, but no warning</dd><dt><a id="iss347"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss347.html" target="_top">THE-AMBIGUITY:FOR-DECLARATION</a></dt><dd>yes</dd><dt><a id="iss348"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss348.html" target="_top">THE-VALUES:RETURN-NUMBER-RECEIVED</a></dt><dd>yes</dd><dt><a id="iss349"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss349.html" target="_top">TIME-ZONE-NON-INTEGER:ALLOW</a></dt><dd>yes</dd><dt><a id="iss350"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss350.html" target="_top">TYPE-DECLARATION-ABBREVIATION:ALLOW-ALL</a></dt><dd>no</dd><dt><a id="iss351"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss351.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:TYPE-OF-HANDLES-FLOATS</a></dt><dd>yes</dd><dt><a id="iss352"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss352.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a></dt><dd>yes, except for class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><tt class="classname">METHOD-COMBINATION</tt></a>
     </dd><dt><a id="iss353"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss353.html" target="_top">TYPE-OF-UNDERCONSTRAINED:ADD-CONSTRAINTS</a></dt><dd>yes</dd><dt><a id="iss354"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss354.html" target="_top">TYPE-SPECIFIER-ABBREVIATION:X3J13-JUN90-GUESS</a></dt><dd>yes</dd><dt><a id="iss355"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss355.html" target="_top">UNDEFINED-VARIABLES-AND-FUNCTIONS:COMPROMISE</a></dt><dd>yes</dd><dt><a id="iss356"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss356.html" target="_top">UNINITIALIZED-ELEMENTS:CONSEQUENCES-UNDEFINED</a></dt><dd>yes, could add error checking
     </dd><dt><a id="iss357"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss357.html" target="_top">UNREAD-CHAR-AFTER-PEEK-CHAR:DONT-ALLOW</a></dt><dd>yes</dd><dt><a id="iss358"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss358.html" target="_top">UNSOLICITED-MESSAGES:NOT-TO-SYSTEM-USER-STREAMS</a></dt><dd>yes</dd><dt><a id="iss359"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss359.html" target="_top">VARIABLE-LIST-ASYMMETRY:SYMMETRIZE</a></dt><dd>yes</dd><dt><a id="iss360"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss360.html" target="_top">WITH-ADDED-METHODS:DELETE</a></dt><dd>yes</dd><dt><a id="iss361"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss361.html" target="_top">WITH-COMPILATION-UNIT:NEW-MACRO</a></dt><dd>yes</dd><dt><a id="iss362"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss362.html" target="_top">WITH-OPEN-FILE-DOES-NOT-EXIST:STREAM-IS-NIL</a></dt><dd>yes</dd><dt><a id="iss363"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss363.html" target="_top">WITH-OPEN-FILE-SETQ:EXPLICITLY-VAGUE</a></dt><dd>yes</dd><dt><a id="iss364"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss364.html" target="_top">WITH-OPEN-FILE-STREAM-EXTENT:DYNAMIC-EXTENT</a></dt><dd>yes</dd><dt><a id="iss365"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss365.html" target="_top">WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND</a></dt><dd>yes</dd><dt><a id="iss366"></a><a href="http://www.lisp.org/HyperSpec/Issues/iss366.html" target="_top">WITH-STANDARD-IO-SYNTAX-READTABLE:X3J13-MAR-91</a></dt><dd>yes</dd></dl></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="extensions"></a>Extensions</h1></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#p-indep">29. Extensions-1: Platform independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#image">29.1. Extensions-1.1. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">29.2. Extensions-1.2. Quitting <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#i18n">29.3. Extensions-1.3. Internationalization</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">29.3.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#language">29.3.2. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">29.4. Extensions-1.4. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">29.4.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">29.4.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">29.4.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">29.4.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">29.4.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">29.4.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">29.4.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#clos-stream">29.5. Extensions-1.5. Defining new kinds of Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#gray">29.5.1. Gray streams</a></span></dt><dt><span class="section"><a href="#gstream">29.5.2. Generic streams</a></span></dt></dl></dd><dt><span class="section"><a href="#weak">29.6. Extensions-1.6. Weak Pointers</a></span></dt><dt><span class="section"><a href="#final">29.7. Extensions-1.7. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">29.8. Extensions-1.8. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">29.9. Extensions-1.9. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">29.10. Extensions-1.10. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">29.11. Extensions-1.11. Customizing <span><b class="command">CLISP</b></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">29.12. Extensions-1.12. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#platform">30. Extensions-2: Platform specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">30.1. Extensions-2.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">30.2. Extensions-2.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">30.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinfo">30.2.2. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">30.2.3. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">30.2.4. Example</a></span></dt><dt><span class="section"><a href="#module-tools">30.2.5. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">30.2.6. Modules included in the distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">30.3. Extensions-2.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">30.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">30.3.2. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">30.3.3. The choice of the <span><b class="command">C</b></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">30.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">30.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">30.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">30.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">30.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">30.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">30.4. Extensions-2.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">30.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">30.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">30.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">30.4.4. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">30.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">30.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">30.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">30.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">30.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">30.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">30.5. Extensions-2.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">30.6. Extensions-2.6. Quickstarting delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#app-dev">30.7. Extensions-2.7. Application delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#shell">30.8. Extensions-2.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">30.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">30.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">30.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">30.9. Extensions-2.9. Operating System
  Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">30.10. Extensions-2.10. Other</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="p-indep"></a>Chapter 29. Extensions-1: Platform independent Extensions</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#image">29.1. Extensions-1.1. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">29.2. Extensions-1.2. Quitting <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#i18n">29.3. Extensions-1.3. Internationalization</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">29.3.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#language">29.3.2. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">29.4. Extensions-1.4. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">29.4.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">29.4.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">29.4.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">29.4.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">29.4.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">29.4.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">29.4.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#clos-stream">29.5. Extensions-1.5. Defining new kinds of Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#gray">29.5.1. Gray streams</a></span></dt><dt><span class="section"><a href="#gstream">29.5.2. Generic streams</a></span></dt></dl></dd><dt><span class="section"><a href="#weak">29.6. Extensions-1.6. Weak Pointers</a></span></dt><dt><span class="section"><a href="#final">29.7. Extensions-1.7. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">29.8. Extensions-1.8. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">29.9. Extensions-1.9. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">29.10. Extensions-1.10. Additional Fancy Macros</a></span></dt><dt><span class="section"><a href="#customize">29.11. Extensions-1.11. Customizing <span><b class="command">CLISP</b></span> behavior.</a></span></dt><dt><span class="section"><a href="#code-walk">29.12. Extensions-1.12. Code Walker</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="image"></a>29.1. Extensions-1.1. Saving an Image</h2></div></div><div></div></div><p>The function
  <tt class="sexp">(<tt class="function">EXT:SAVEINITMEM</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> (<i class="replaceable"><tt>filename</tt></i> "lispinit.mem")
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :QUIET :INIT-FUNCTION :LOCKED-PACKAGES :START-PACKAGE)</tt>
saves the running <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>'s memory to the file <i class="replaceable"><tt>filename</tt></i>;
extension <tt class="filename">#P".mem"</tt> is recommended (when <i class="replaceable"><tt>filename</tt></i> does not have an
extension, <tt class="filename">#P".mem"</tt> extension is automatically added).
</p><div class="variablelist"><dl><dt><tt class="constant">:QUIET</tt></dt><dd>If this argument is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the startup
   banner and the good-bye message will be suppressed.
   </dd><dt><tt class="constant">:INIT-FUNCTION</tt></dt><dd><p>This argument specifies a function that will be
   executed at startup of the saved image, before entering the standard
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>; thus, if you want to avoid the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>, you have to call
   <a href="#quit" title="29.2.&#xA0;Extensions-1.2. Quitting CLISP"><tt class="function">EXT:EXIT</tt></a> at the end
   of the init function yourself.</p><p>See <a href="clisp.html#opt-exec-file">the
     manual</a> for passing command line arguments to this function.
 </p></dd><dt><tt class="constant">:LOCKED-PACKAGES</tt></dt><dd>This argument specifies the packages to lock before
   saving the image; this is convenient for application delivery, when
   you do not want your users to mess up your product.
   This argument defaults to <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a>.
   </dd><dt><tt class="constant">:START-PACKAGE</tt></dt><dd>This argument specifies the starting value of
   <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a> in the image being saved, and defaults to the current
   value of <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>.</dd></dl></div><p>
You can use this memory image with the
<a href="clisp.html#opt-memfile"><tt class="option">-M</tt></a>
option.  On <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems, you may compress it with <a href="http://www.gnu.org" target="_top">GNU</a>
<a href="http://www.gzip.org/" target="_top"><span><b class="command">gzip</b></span></a>
to save disk space.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quit"></a>29.2. Extensions-1.2. Quitting <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></h2></div></div><div></div></div><p>The functions <tt class="sexp">(<tt class="function">EXT:EXIT</tt>
 [<i class="replaceable"><tt>errorp</tt></i>])</tt>, <tt class="sexp">(<tt class="function">EXT:QUIT</tt>
 [<i class="replaceable"><tt>errorp</tt></i>])</tt> and <tt class="sexp">(<tt class="function">EXT:BYE</tt>
 [<i class="replaceable"><tt>errorp</tt></i>])</tt> - all synonymous -
 terminate <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.  If <i class="replaceable"><tt>errorp</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> aborts with the supplied numeric error status, i.e.,
 the OS environment is informed that the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> session did not
 succeed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="i18n"></a>29.3. Extensions-1.3. Internationalization</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ggettext">29.3.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#language">29.3.2. The Language</a></span></dt></dl></div><p>"Internationalization" means to prepare a program so that it can
use multiple national languages and national cultural conventions
without requiring further source code changes.  Localization means
providing the data - mostly textual translations - necessary for an
internationalized program to work in a particular language and with
particular cultural conventions.</p><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is internationalized, and is localized for the languages
English, German, French, Spanish, Dutch and Russian.
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> also supports internationalized Lisp programs, through
<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ggettext"></a>29.3.1. The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a></h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#domain">29.3.1.1. Domain</a></span></dt><dt><span class="section"><a href="#category">29.3.1.2. Category</a></span></dt><dt><span class="section"><a href="#i18n-example">29.3.1.3. Example</a></span></dt></dl></div><p><a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> is a set of functions, included in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> or the
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> library, which permit looking up translations of strings
through message catalogs. It is also a set of tools which makes the
translation maintenance easy for the translator and the program
maintainer.</p><p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> functions are available in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> in the
<a href="#i18n" title="29.3.&#xA0;Extensions-1.3. Internationalization"><strong class="package">“<span class="quote">I18N</span>”</strong></a> package, which is <a href="#re-export" title="11.4.2.&#xA0;Function EXT:RE-EXPORT"><tt class="function">EXT:RE-EXPORT</tt></a>ed from the <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>
package.</p><div class="variablelist"><dl><dt><a id="gettext"></a><tt class="sexp">(<a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a>
  <i class="replaceable"><tt>MSGID</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a>)</tt></dt><dd>returns the translation of the message <i class="replaceable"><tt>MSGID</tt></i>,
  in the given <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>, depending on the given <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a>.
  <i class="replaceable"><tt>MSGID</tt></i> should be an <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> string, and is normally the English message.
  </dd><dt><a id="ngettext"></a><tt class="sexp">(<a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a>
  <i class="replaceable"><tt>MSGID</tt></i> <i class="replaceable"><tt>msgid_plural</tt></i>
  <i class="replaceable"><tt>n</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a>)</tt></dt><dd>returns the plural form of the translation for of
   <i class="replaceable"><tt>MSGID</tt></i> and <i class="replaceable"><tt>n</tt></i> in the given <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>, depending on the given
   <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a>.  <i class="replaceable"><tt>MSGID</tt></i> and <i class="replaceable"><tt>msgid_plural</tt></i>
   should be <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> strings, and are normally the English singular and
   English plural variant of the message, respectively.
   </dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="domain"></a>29.3.1.1. Domain</h4></div></div><div></div></div><p>The <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> is a string identifier denoting the program that
is requesting the translation.  The pathname of the message catalog
depends on the <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>: usually it is located at
<tt class="filename">TEXTDOMAINDIR/l/LC_MESSAGES/domain.mo</tt>, where
<i class="replaceable"><tt>l</tt></i> is the ISO 639 code of the language.
The notion of <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> allows several Lisp programs running in the same
image to request translations independently of each other.</p><p><a id="textdomain"></a><b>Function <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>. </b><tt class="sexp">(<a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is a
<a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the default <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>, used when no <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>
argument is passed to the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> and <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a> functions.
It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able.
<tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is usually used
during the startup phase of a program.
Note that the default <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> is not saved in a <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.
The use of <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomain"><tt class="function">I18N:TEXTDOMAIN</tt></a>)</tt> is
recommended only for programs that are so simple that they will never
need more than one <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>.</p><p><a id="textdomaindir"></a><b>Function <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a>. </b><tt class="sexp">(<a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a> <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a>)</tt>
is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the base directory, called
<tt class="filename">TEXTDOMAINDIR</tt> above, where the message
catalogs for the given <a href="#domain" title="29.3.1.1.&#xA0;Domain"><i class="replaceable"><tt>DOMAIN</tt></i></a> are assumed to be installed.
It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able.
<tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a>)</tt> is usually used
during the startup phase of a program, and should be used because only
the program knows where its message catalogs are installed.
Note that the <tt class="filename">TEXTDOMAINDIR</tt>s
are not saved in a <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="category"></a>29.3.1.2. Category</h4></div></div><div></div></div><p>The <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a> argument of the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> and <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a>
functions denotes which locale facet the result should depend on.
The default value is <tt class="constant">:LC_MESSAGES</tt>.
Other possible values are <tt class="constant">:LC_CTYPE</tt>,
<tt class="constant">:LC_TIME</tt>, <tt class="constant">:LC_COLLATE</tt>,
<tt class="constant">:LC_MONETARY</tt>.
The use of these values is useful for users who have a
character/time/collation/money handling set differently from the usual
message handling.
Note that when a <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a> argument is used, the message catalog
location depends on the <a href="#category" title="29.3.1.2.&#xA0;Category"><i class="replaceable"><tt>CATEGORY</tt></i></a>: it will be expected at
<tt class="filename">TEXTDOMAINDIR/ll/category/domain.mo</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="i18n-example"></a>29.3.1.3. Example</h4></div></div><div></div></div><p>A non-internationalized program simulating a restaurant dialogue
might look as follows.</p><div class="example"><a id="i18n-non-i"></a><p class="title"><b>Example 29.1. prog.lisp</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setq n (parse-integer (first <a href="#script-exec"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%" "'Your command, please?', asked the waiter.")

(format t "~@?~%"
          (if (= n 1) "a piece of cake" "~D pieces of cake")
          n)
</pre></td></tr></table></div><p>After being internationalized, all strings are wrapped in
<a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> calls, and <a href="#ngettext"><tt class="function">I18N:NGETTEXT</tt></a> is used for plurals.
Also, <a href="#textdomaindir"><tt class="function">I18N:TEXTDOMAINDIR</tt></a> is assigned a value; in our case, for simplicity,
the current directory.</p><div class="example"><a id="i18n-i"></a><p class="title"><b>Example 29.2. prog.lisp</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setf (textdomain) "prog")
(setf (textdomaindir "prog") "./")

(setq n (parse-integer (first <a href="#script-exec"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%"
          (gettext "'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n)
          n)
</pre></td></tr></table></div><p>For ease of reading, it is customary to define an abbreviation
for the <a href="#gettext"><tt class="function">I18N:GETTEXT</tt></a> function.  An underscore is customary.</p><div class="example"><a id="i18n-i-abbrev"></a><p class="title"><b>Example 29.3. prog.lisp</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(setf (textdomaindir "prog") "./")
(defun _ (msgid) (gettext msgid "prog"))

(setq n (parse-integer (first <a href="#script-exec"><tt class="varname">EXT:*ARGS*</tt></a>)))

(format t "~A~%"
          (_"'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n "prog")
          n)
</pre></td></tr></table></div><p>Now the program's maintainer creates a message catalog template
through the command
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ xgettext -o prog.pot prog.lisp
</pre></td></tr></table><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>xgettext version 0.11 or higher is required here.</p></div><p>The message catalog template looks roughly like this.</p><div class="example"><a id="i18n-pot"></a><p class="title"><b>Example 29.4. prog.pot</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
msgid "'Your command, please?', asked the waiter."
msgstr ""

msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] ""
msgstr[1] ""
</pre></td></tr></table></div><p>Then a French translator creates a French message catalog</p><div class="example"><a id="i18n-fr-po"></a><p class="title"><b>Example 29.5. prog.fr.po</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO-8859-1\n"
"Plural-Forms: nplurals=2; plural=(n &gt; 1);\n"

msgid "'Your command, please?', asked the waiter."
msgstr "«Votre commande, s'il vous plait», dit le garçon."

# Les gateaux allemands sont les meilleurs du monde.
msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] "un morceau de gateau"
msgstr[1] "%d morceaux de gateau"
</pre></td></tr></table></div><p>and sends it to the program's maintainer.</p><p>The program's maintainer compiles the catalog as follows:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ mkdir -p ./fr/LC_MESSAGES
bash$ msgfmt -o ./fr/LC_MESSAGES/prog.mo prog.fr.po
</pre></td></tr></table><p>When a user in a french locale then runs the program

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ clisp prog.lisp 2
</pre></td></tr></table><p>

she will get the output

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
    «Votre commande, s'il vous plait», dit le garçon.
    2 morceaux de gateau
</pre></td></tr></table><p>
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="language"></a>29.3.2. The Language</h3></div></div><div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Note that the facilities described in this section will
  work only for the languages for which <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> itself is already
  localized.</p></div><p>The language <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> uses to communicate with the user can be one of
</p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="constant">ENGLISH</tt></td></tr><tr><td><tt class="constant">DEUTSCH</tt> (i.e., German)</td></tr><tr><td><tt class="constant">FRANÇAIS</tt> (i.e., French)</td></tr><tr><td><tt class="constant">ESPAÑOL</tt> (i.e., Spanish)</td></tr><tr><td><tt class="constant">NEDERLANDS</tt> (i.e., Dutch)</td></tr><tr><td><tt class="constant">РУССКИЙ</tt>
  (i.e. Russian)</td></tr></table><p>This is controlled by the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 <strong class="first"><i class="firstterm"><a href="#language" title="29.3.2.&#xA0;The Language"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a><a id="curr-lang" class="indexterm"></a></i></strong>,
 which can be set at run time as well as using <a href="clisp.html#opt-lang" target="_top"><tt class="option">-L</tt></a> start-up option.
 If you wish to change the
 <a href="clisp.html#opt-locale">locale directory</a>
 at run time too, you can do that by setting <a href="#language" title="29.3.2.&#xA0;The Language"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>
 cell, whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is the language (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>, one of the above),
 and whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> is the new locale directory.</p><p>More languages can be defined through the macro
 <strong class="first"><i class="firstterm"><a href="#deflang"><tt class="function">I18N:DEFLANGUAGE</tt></a><a id="deflang" class="indexterm"></a></i></strong>:
 <tt class="sexp">(<a href="#deflang"><tt class="function">I18N:DEFLANGUAGE</tt></a> <i class="replaceable"><tt>language</tt></i>)</tt>.
 For such an additional language to take effect, you must install the
 corresponding message catalog, or translate the messages yourself,
 using <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> (or <a href="http://www.xemacs.org" target="_top">XEmacs</a>) po-mode.</p><p>This works only for strings.  For arbitrary language-dependent
 Lisp objects, you define one through the macro
 <strong class="first"><i class="firstterm"><a href="#def-i-l"><tt class="function">I18N:DEFINTERNATIONAL</tt></a><a id="def-i-l" class="indexterm"></a></i></strong>:
 <tt class="sexp">(<a href="#def-i-l"><tt class="function">I18N:DEFINTERNATIONAL</tt></a> <i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 (<i class="replaceable"><tt>default-language</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>))</tt> and add
 language-dependent values through the macro
 <strong class="first"><i class="firstterm"><a href="#defloc"><tt class="function">I18N:DEFLOCALIZED</tt></a><a id="defloc" class="indexterm"></a></i></strong>:
 <tt class="sexp">(<a href="#defloc"><tt class="function">I18N:DEFLOCALIZED</tt></a> <i class="replaceable"><tt>symbol</tt></i> <i class="replaceable"><tt>language</tt></i>
  <i class="replaceable"><tt>value-form</tt></i>)</tt>
 (One such form for each language.  Languages without an assigned
 value will be treated like the default-language.)
 You can then access the localized value by calling
 <strong class="first"><i class="firstterm"><a href="#localized"><tt class="function">I18N:LOCALIZED</tt></a><a id="localized" class="indexterm"></a></i></strong>:
 <tt class="sexp">(<a href="#localized"><tt class="function">I18N:LOCALIZED</tt></a> <i class="replaceable"><tt>symbol</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
  <i class="replaceable"><tt>language</tt></i>)</tt></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="encoding"></a>29.4. Extensions-1.4. Encodings</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#encodings-intro">29.4.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">29.4.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">29.4.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">29.4.4. Function <tt class="function">EXT:MAKE-ENCODING</tt>.</a></span></dt><dt><span class="section"><a href="#enc-charset">29.4.5. Function <tt class="function">EXT:ENCODING-CHARSET</tt>.</a></span></dt><dt><span class="section"><a href="#enc-dflt">29.4.6. Default encodings.</a></span></dt><dt><span class="section"><a href="#string-byte">29.4.7. Converting between strings and byte vectors</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="encodings-intro"></a>29.4.1. Introduction</h3></div></div><div></div></div><p>An <span class="emphasis"><em>encoding</em></span> describes the correspondence
 between <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and raw bytes during input/output via
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</p><p>An <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a> is an object composed of the following facets:
</p><div class="variablelist"><dl><dt><a href="#charset" title="29.4.2.&#xA0;Character Sets">character set</a></dt><dd>This denotes both the set of characters that
   can be represented and passed through the I/O channel, and the way
   these characters translate into raw bytes.  In this context, for
   example, "UTF-8" and "UCS-4" are considered different, although they
   can represent the same set of characters.
  </dd><dt><a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a> mode</dt><dd>This denotes the way newline characters are
   represented.</dd></dl></div><p>Encodings are also types.  As such, they represent the set of
 characters encodable in the character set.  In this context, the way
 characters are translated into raw bytes is ignored, and the line
 terminator mode is ignored as well.  <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><tt class="function">TYPEP</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><tt class="function">SUBTYPEP</tt></a> can be used
 on encodings.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="charset"></a>29.4.2. Character Sets</h3></div></div><div></div></div><div class="variablelist">
<!--#ifndef UNICODE--><dl><dt>Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built
  <strong>without</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd>Only one character set is understood: the platform's
 native (8-bit) character set.  See <a href="#characters" title="Chapter&#xA0;13.&#xA0;Characters&#10;   [CLHS-13]">Chapter
 13</a>.</dd>
<!--#else--><dt><a id="charset-symbols"></a>Platform dependent:
  Only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>The following character sets are supported, as values
 of the corresponding (constant) symbol in the <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package:
</p><div class="itemizedlist"><a id="charset-symbol-list"></a><p class="title"><b>Symbols in package <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></b></p><ul type="disc"><li><a id="charset-UCS-2"></a><tt class="literal">UCS-2</tt>
   = <tt class="literal">UNICODE-16</tt> = <tt class="literal">UNICODE-16-BIG-ENDIAN</tt>,
   the 16-bit basic multilingual plane of the <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   Every character is represented as two bytes.</li><li><a id="charset-UNICODE-16-LITTLE-ENDIAN"></a><tt class="literal">UNICODE-16-LITTLE-ENDIAN</tt>
    </li><li><a id="charset-UCS-4"></a><tt class="literal">UCS-4</tt>
   = <tt class="literal">UNICODE-32</tt> = <tt class="literal">UNICODE-32-BIG-ENDIAN</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. Every character is represented as
   four bytes.</li><li><a id="charset-UNICODE-32-LITTLE-ENDIAN"></a><tt class="literal">UNICODE-32-LITTLE-ENDIAN</tt>
 </li><li><a id="charset-UTF-8"></a><tt class="literal">UTF-8</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   Every character is represented as one to four bytes.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves and need one byte per character.
   Most Latin/Greek/Cyrillic/Hebrew characters need two bytes per
   character. Most other characters need three bytes per character,
   and the rarely used remaining characters need four bytes per
   character. This is therefore, in general, the most space-efficient
   encoding of all of Unicode.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-UTF-16"></a><tt class="literal">UTF-16</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. Every character in the 16-bit
   basic multilingual plane is represented as two bytes, and the
   rarely used remaining characters need four bytes per character.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-UTF-7"></a><tt class="literal">UTF-7</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set. This is a stateful 7-bit encoding.
   Not all <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-JAVA"></a><tt class="literal">JAVA</tt>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character set.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> characters represent themselves and need one byte per character.
   All other characters of the basic multilingual plane are represented
   by <tt class="literal">\u<i class="replaceable"><tt>nnnn</tt></i></tt> sequences
   (<i class="replaceable"><tt>nnnn</tt></i> a hexadecimal number)
   and need 6 bytes per character. The remaining characters are represented
   by <tt class="literal">\u<i class="replaceable"><tt>xxxx</tt></i>\u<i class="replaceable"><tt>yyyy</tt></i></tt>
   and need 12 bytes per character. While this encoding is very comfortable
   for editing Unicode files using only <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>-aware tools and editors, it
   cannot faithfully represent all <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> text. Only text which
   does not contain <tt class="literal">\u</tt> (backslash followed by
   lowercase Latin u) can be faithfully represented by this encoding.
 </li><li><a id="charset-ASCII"></a><tt class="literal">ASCII</tt>,
   the well-known US-centric 7-bit character set (American Standard
   Code for Information Interchange - <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>).</li><li><a id="charset-ISO-8859-1"></a><tt class="literal">ISO-8859-1</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Afrikaans, Albanian, Basque, Breton, Catalan,
   Cornish, Danish, Dutch, English, Faeroese, Finnish, French,
   Frisian, Galician, German, Greenlandic, Icelandic, Irish, Italian,
   Latin, Luxemburgish, Norwegian, Portuguese, Raeto-Romanic,
   Scottish, Spanish, and Swedish languages.</li><li><a id="charset-ISO-8859-2"></a><tt class="literal">ISO-8859-2</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Croatian, Czech, German, Hungarian, Polish,
   Slovak, Slovenian, and Sorbian languages. </li><li><a id="charset-ISO-8859-3"></a><tt class="literal">ISO-8859-3</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Esperanto and Maltese languages.</li><li><a id="charset-ISO-8859-4"></a><tt class="literal">ISO-8859-4</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian and Sami (Lappish)
   languages.</li><li><a id="charset-ISO-8859-5"></a><tt class="literal">ISO-8859-5</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Bulgarian, Byelorussian, Macedonian, Russian,
   Serbian, and Ukrainian languages.</li><li><a id="charset-ISO-8859-6"></a><tt class="literal">ISO-8859-6</tt>,
   suitable for the Arabic language.</li><li><a id="charset-ISO-8859-7"></a><tt class="literal">ISO-8859-7</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Greek language.</li><li><a id="charset-ISO-8859-8"></a><tt class="literal">ISO-8859-8</tt>,
      an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Hebrew language (without punctuation).
 </li><li><a id="charset-ISO-8859-9"></a><tt class="literal">ISO-8859-9</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Turkish language.</li><li><a id="charset-ISO-8859-10"></a><tt class="literal">ISO-8859-10</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Icelandic, Inuit (Greenlandic), Latvian,
   Lithuanian, and Sami (Lappish) languages.</li><li><a id="charset-ISO-8859-13"></a><tt class="literal">ISO-8859-13</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian, Polish and Sami
   (Lappish) languages.</li><li><a id="charset-ISO-8859-14"></a><tt class="literal">ISO-8859-14</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Irish Gaelic, Manx Gaelic, Scottish Gaelic, and
   Welsh languages.</li><li><a id="charset-ISO-8859-15"></a><tt class="literal">ISO-8859-15</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the ISO-8859-1 languages, with improvements for
   French, Finnish and the Euro.</li><li><a id="charset-ISO-8859-16"></a><tt class="literal">ISO-8859-16</tt>
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Rumanian language.</li><li><a id="charset-KOI8-R"></a><tt class="literal">KOI8-R</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language (very popular, especially on the
   internet).</li><li><a id="charset-KOI8-U"></a><tt class="literal">KOI8-U</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Ukrainian language (very popular, especially on the
   internet).</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-KOI8-RU"></a><tt class="literal">KOI8-RU</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><tt class="literal">JIS_X0201</tt>,
   a character set for the Japanese language.</li><li><a id="charset-MAC-ARABIC"></a><tt class="literal">MAC-ARABIC</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CENTRAL-EUROPE"></a><tt class="literal">MAC-CENTRAL-EUROPE</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CROATIAN"></a><tt class="literal">MAC-CROATIAN</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CYRILLIC"></a><tt class="literal">MAC-CYRILLIC</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-DINGBAT"></a><tt class="literal">MAC-DINGBAT</tt>,
   a platform specific character set.
 </li><li><a id="charset-MAC-GREEK"></a><tt class="literal">MAC-GREEK</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-HEBREW"></a><tt class="literal">MAC-HEBREW</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ICELAND"></a><tt class="literal">MAC-ICELAND</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMAN"></a><tt class="literal">MAC-ROMAN</tt>
   = <tt class="literal">MACINTOSH</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMANIA"></a><tt class="literal">MAC-ROMANIA</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-SYMBOL"></a><tt class="literal">MAC-SYMBOL</tt>,
   a platform specific character set.</li><li><a id="charset-MAC-THAI"></a><tt class="literal">MAC-THAI</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-TURKISH"></a><tt class="literal">MAC-TURKISH</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-UKRAINE"></a><tt class="literal">MAC-UKRAINE</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437"></a><tt class="literal">CP437</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437-IBM"></a><tt class="literal">CP437-IBM</tt>,
   an IBM variant of <tt class="literal">CP437</tt>.
 </li><li><a id="charset-CP737"></a><tt class="literal">CP737</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP775"></a><tt class="literal">CP775</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Baltic languages.
 </li><li><a id="charset-CP850"></a><tt class="literal">CP850</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852"></a><tt class="literal">CP852</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852-IBM"></a><tt class="literal">CP852-IBM</tt>,
   an IBM variant of <tt class="literal">CP852</tt>.</li><li><a id="charset-CP855"></a><tt class="literal">CP855</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP857"></a><tt class="literal">CP857</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Turkish language.
 </li><li><a id="charset-CP860"></a><tt class="literal">CP860</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Portuguese language.
 </li><li><a id="charset-CP860-IBM"></a><tt class="literal">CP860-IBM</tt>,
   an IBM variant of <tt class="literal">CP860</tt>.
 </li><li><a id="charset-CP861"></a><tt class="literal">CP861</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Icelandic language.
 </li><li><a id="charset-CP861-IBM"></a><tt class="literal">CP861-IBM</tt>,
   an IBM variant of <tt class="literal">CP861</tt>.
 </li><li><a id="charset-CP862"></a><tt class="literal">CP862</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Hebrew language.
 </li><li><a id="charset-CP862-IBM"></a><tt class="literal">CP862-IBM</tt>,
   an IBM variant of <tt class="literal">CP862</tt>.
 </li><li><a id="charset-CP863"></a><tt class="literal">CP863</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP863-IBM"></a><tt class="literal">CP863-IBM</tt>,
   an IBM variant of <tt class="literal">CP863</tt>.
 </li><li><a id="charset-CP864"></a><tt class="literal">CP864</tt>, a DOS oldie,
   meant to be suitable for the Arabic language.
 </li><li><a id="charset-CP864-IBM"></a><tt class="literal">CP864-IBM</tt>,
   an IBM variant of <tt class="literal">CP864</tt>.
 </li><li><a id="charset-CP865"></a><tt class="literal">CP865</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Nordic languages.
 </li><li><a id="charset-CP865-IBM"></a><tt class="literal">CP865-IBM</tt>,
   an IBM variant of <tt class="literal">CP865</tt>.
 </li><li><a id="charset-CP866"></a><tt class="literal">CP866</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP869"></a><tt class="literal">CP869</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP869-IBM"></a><tt class="literal">CP869-IBM</tt>,
   an IBM variant of <tt class="literal">CP869</tt>.
 </li><li><a id="charset-CP874"></a><tt class="literal">CP874</tt>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Thai language.
 </li><li><a id="charset-CP874-IBM"></a><tt class="literal">CP874-IBM</tt>,
   an IBM variant of <tt class="literal">CP874</tt>.
 </li><li><a id="charset-WINDOWS-1250"></a><tt class="literal">WINDOWS-1250</tt>
   = <tt class="literal">CP1250</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-2.
 </li><li><a id="charset-WINDOWS-1251"></a><tt class="literal">WINDOWS-1251</tt>
   = <tt class="literal">CP1251</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-5,
   meant to be suitable for the Russian language.
 </li><li><a id="charset-WINDOWS-1252"></a><tt class="literal">WINDOWS-1252</tt>
   = <tt class="literal">CP1252</tt>,
   a platform specific extension of the ISO-8859-1 character set.
 </li><li><a id="charset-WINDOWS-1253"></a><tt class="literal">WINDOWS-1253</tt>
   = <tt class="literal">CP1253</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-7,
   meant to be suitable for the Greek language.
 </li><li><a id="charset-WINDOWS-1254"></a><tt class="literal">WINDOWS-1254</tt>
   = <tt class="literal">CP1254</tt>,
   a platform specific extension of the ISO-8859-9 character set.
 </li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-WINDOWS-1255"></a><tt class="literal">WINDOWS-1255</tt>
   = <tt class="literal">CP1255</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-8,
   suitable for the Hebrew language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-WINDOWS-1256"></a><tt class="literal">WINDOWS-1256</tt>
   = <tt class="literal">CP1256</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Arabic language.
 </li><li><a id="charset-WINDOWS-1257"></a><tt class="literal">WINDOWS-1257</tt>
   = <tt class="literal">CP1257</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-WINDOWS-1258"></a><tt class="literal">WINDOWS-1258</tt>
   = <tt class="literal">CP1258</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Vietnamese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */--><li><a id="charset-HP-ROMAN8"></a><tt class="literal">HP-ROMAN8</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-NEXTSTEP"></a><tt class="literal">NEXTSTEP</tt>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV--><li><a id="charset-EUC-JP"></a><tt class="literal">EUC-JP</tt>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-SHIFT-JIS"></a><tt class="literal">SHIFT-JIS</tt>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP932"></a><tt class="literal">CP932</tt>,
   a Microsoft variant of <tt class="literal">SHIFT-JIS</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP"></a><tt class="literal">ISO-2022-JP</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-2"></a><tt class="literal">ISO-2022-JP-2</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.3
   or newer or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-1"></a><tt class="literal">ISO-2022-JP-1</tt>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-CN"></a><tt class="literal">EUC-CN</tt>,
   a multibyte character set for simplified Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-HZ"></a><tt class="literal">HZ</tt>,
   a stateful 7-bit multibyte character set for simplified Chinese.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GBK"></a><tt class="literal">GBK</tt>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP936"></a><tt class="literal">CP936</tt>,
   a Microsoft variant of <tt class="literal">GBK</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GB18030"></a><tt class="literal">GB18030</tt>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-TW"></a><tt class="literal">EUC-TW</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5"></a><tt class="literal">BIG5</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP950"></a><tt class="literal">CP950</tt>,
   a Microsoft variant of <tt class="literal">BIG5</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5-HKSCS"></a><tt class="literal">BIG5-HKSCS</tt>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN"></a><tt class="literal">ISO-2022-CN</tt>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN-EXT"></a><tt class="literal">ISO-2022-CN-EXT</tt>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-KR"></a><tt class="literal">EUC-KR</tt>,
   a multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP949"></a><tt class="literal">CP949</tt>,
   a Microsoft variant of <tt class="literal">EUC-KR</tt>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-KR"></a><tt class="literal">ISO-2022-KR</tt>,
   a stateful 7-bit multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-JOHAB"></a><tt class="literal">JOHAB</tt>,
   a multibyte character set for Korean used mostly on <a href="http://www.freedos.org/" target="_top"><strong>DOS</strong></a>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ARMSCII-8"></a><tt class="literal">ARMSCII-8</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Armenian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-ACADEMY"></a><tt class="literal">GEORGIAN-ACADEMY</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-PS"></a><tt class="literal">GEORGIAN-PS</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TIS-620"></a><tt class="literal">TIS-620</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Thai. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-MULELAO-1"></a><tt class="literal">MULELAO-1</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP1133"></a><tt class="literal">CP1133</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-VISCII"></a><tt class="literal">VISCII</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TCVN"></a><tt class="literal">TCVN</tt>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
</ul></div><p>


<!--#ifdef /* HAVE_ICONV */-->
</p><div class="variablelist"><dl><dt><a id="iconv"></a>Platform dependent: Only on <a href="http://www.gnu.org" target="_top">GNU</a> systems
  with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or better and other systems (<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>)
  on which the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> library has been installed</dt><dd><p>The character sets provided by the library function
 <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> can also be used as encodings.  To create such an encoding,
 call <a href="#make-encoding" title="29.4.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> with the character set name (a string) as the
 <tt class="constant">:CHARSET</tt> argument.</p><p>When an <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a> is available both as a <a href="#charset-symbols">built-in</a> and
 through <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>, the <a href="#charset-symbols">built-in</a> is used, because it is more
 efficient and available across all platforms.</p><p>These encodings are not assigned to global variables, since
 there is no portable way to get the list of all character sets
 supported by <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a>.</p><p>On <a href="http://www.gnu.org" target="_top">GNU</a> systems (such as <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> and <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.gnu.org/software/hurd/" target="_top"><strong>Hurd</strong></a>)
 and on systems with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> you get this list by calling the
 <span class="emphasis"><em>program</em></span> <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/iconv.html" target="_top"><span><b class="command">iconv</b></span></a>: <span><b class="command">iconv -l</b></span>.
 </p><p>The reason we use only <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> is
 that the other <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> implementations are broken in various ways and
 we do not want to deal with random <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> crashes caused by those bugs.
 If your system supplies an <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> implementation which passes the
 <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>'s test suite, please report that to <tt class="email">&lt;<a href="mailto:clisp-list@sf.net">clisp-list@sf.net</a>&gt;</tt> and a
 future <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> version will use <a href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html" target="_top"><tt class="function">iconv</tt></a> on your system.</p></dd></dl></div><p>

<!--#endif /* HAVE_ICONV */-->

</p></dd>
<!--#endif /* UNICODE */-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="newline"></a>29.4.3. Line Terminators</h3></div></div><div></div></div><p>The line terminator mode can be one of the following three keywords:
</p><div class="variablelist"><dl><dt><tt class="constant">:UNIX</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">LF</span> character (<span class="keycode">U000A</span>).
</dd><dt><tt class="constant">:MAC</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">CR</span> character (<span class="keycode">U000D</span>).
</dd><dt><tt class="constant">:DOS</tt></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a>
   <span class="keycode">CR</span> followed by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><strong>ASCII</strong></a> <span class="keycode">LF</span>.
</dd></dl></div><p>Windows programs typically use the <tt class="constant">:DOS</tt> line terminator,
 sometimes they also accept <tt class="constant">:UNIX</tt> line terminators or produce
 <tt class="constant">:MAC</tt> line terminators.</p><p>The line terminator mode is relevant only for output (writing to a
 <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a>).  During input, all three kinds of line terminators
 are recognized.  If you do not want this, i.e., if you really want to
 distinguish <span class="keycode">LF</span>, <span class="keycode">CR</span> and <span class="keycode">CR</span>/<span class="keycode">LF</span>, you have to resort to
 binary input (function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>).</p><p>See also <a href="#clhs-newline" title="13.9.&#xA0;Treatment of Newline during Input and Output&#10;   [CLHS-13.1.8]">13.1.8 Treatment of Newline
 during Input and Output</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-encoding"></a>29.4.4. Function <a href="#make-encoding" title="29.4.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a>.</h3></div></div><div></div></div><p>The function
  <tt class="sexp">(<a href="#make-encoding" title="29.4.4.&#xA0;Function EXT:MAKE-ENCODING."><tt class="function">EXT:MAKE-ENCODING</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :CHARSET
     :LINE-TERMINATOR :INPUT-ERROR-ACTION :OUTPUT-ERROR-ACTION)</tt>
 returns an <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>. The <tt class="constant">:CHARSET</tt> argument may be
 an encoding, a string, or <tt class="constant">:DEFAULT</tt>.
 The possible values for the <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a> argument are the
 keywords <tt class="constant">:UNIX</tt>, <tt class="constant">:MAC</tt>, <tt class="constant">:DOS</tt>.</p><p>The <tt class="constant">:INPUT-ERROR-ACTION</tt> argument specifies
 what happens when an invalid byte sequence is encountered while
 converting bytes to characters.  Its value can be <tt class="constant">:ERROR</tt>, <tt class="constant">:IGNORE</tt>
 or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a> character
 <span class="keysym">#\uFFFD</span> is typically used to indicate an error in the
 input sequence.</p><p>The <tt class="constant">:OUTPUT-ERROR-ACTION</tt> argument specifies
 what happens when an invalid character is encountered while converting
 characters to bytes.  Its value can be <tt class="constant">:ERROR</tt>, <tt class="constant">:IGNORE</tt>, a byte to
 be used instead, or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>
 character <span class="keysym">#\uFFFD</span> can be used here only if it is
 encodable in the character set.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-charset"></a>29.4.5. Function <a href="#enc-charset" title="29.4.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a>.</h3></div><div><h4 class="subtitle">Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built
 <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</h4></div></div><div></div></div><p>The function <tt class="sexp">(<a href="#enc-charset" title="29.4.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a> <i class="replaceable"><tt>encoding</tt></i>)</tt>
 returns the charset of the <i class="replaceable"><tt>encoding</tt></i>, as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
 Note that <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><tt class="function">STRING</tt></a> (<a href="#enc-charset" title="29.4.5.&#xA0;Function EXT:ENCODING-CHARSET."><tt class="function">EXT:ENCODING-CHARSET</tt></a>
 <i class="replaceable"><tt>encoding</tt></i>))</tt> is not necessarily a valid MIME name.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-dflt"></a>29.4.6. Default encodings.</h3></div></div><div></div></div><p>Besides every <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> stream containing an encoding,
 the following <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> places contain global <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>s:</p><p><a id="def-file-enc"></a><b>Macro <a href="#def-file-enc"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>. </b>The <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <a href="#def-file-enc"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a> is the encoding used for
 new <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> streams, when no <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> argument was
 specified.</p>
<!--#ifdef UNICODE--><div class="variablelist"><dl><dt>Platform dependent: Only in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> built
  <strong>with</strong> compile-time flag <a href="http://www.unicode.org/" target="_top"><strong>UNICODE</strong></a>.</dt><dd><p>The following are <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> places.</p><div class="variablelist"><dl><dt><a id="path-enc"></a><a href="#path-enc"><tt class="varname">CUSTOM:*PATHNAME-ENCODING*</tt></a></dt><dd>is the encoding used for pathnames in the file
 system. Normally, this is a 1:1 encoding.  Its <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.
 </dd><dt><a id="term-enc"></a><a href="#term-enc"><tt class="varname">CUSTOM:*TERMINAL-ENCODING*</tt></a></dt><dd>is the encoding used for communication with the
  terminal, in particular by <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a>.
 </dd><dt><a id="misc-enc"></a><a href="#misc-enc"><tt class="varname">CUSTOM:*MISC-ENCODING*</tt></a></dt><dd>is the encoding used for access to <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s,
 command line options, and the like.  Its <a href="#newline" title="29.4.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.
 </dd>
<!--#if defined(HAVE_AFFI) || defined(DYNAMIC_FFI)--><dt><a id="foreign-enc"></a><a href="#foreign-enc"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a></dt><dd>is the encoding for characters and strings passed
 through the <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> (some plaforms only).
 Its value must be a 1:1 encoding, i.e., an encoding in which every
 character is represented by one byte.
</dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
<p>The default encoding objects are initialized as described in
 <a href="clisp.html#opt-enc">-Edomain encoding</a></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-byte"></a>29.4.7. Converting between strings and byte vectors</h3></div></div><div></div></div><p>Encodings can also be used to convert directly between strings and
their corresponding byte vector representation according to that encoding.
</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">EXT:CONVERT-STRING-FROM-BYTES</tt>
      <i class="replaceable"><tt>byte-vector</tt></i> <i class="replaceable"><tt>encoding</tt></i>
      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt></dt><dd>converts the subsequence of
  <i class="replaceable"><tt>byte-vector</tt></i> from <i class="replaceable"><tt>start</tt></i> to <i class="replaceable"><tt>end</tt></i> to a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, according to the given <i class="replaceable"><tt>encoding</tt></i>, and returns the
  resulting string.</dd><dt><tt class="sexp">(<tt class="function">EXT:CONVERT-STRING-TO-BYTES</tt>
      <i class="replaceable"><tt>string</tt></i> <i class="replaceable"><tt>encoding</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:START</tt> <tt class="constant">:END</tt>)</tt></dt><dd>converts the subsequence of <i class="replaceable"><tt>string</tt></i> from
  <i class="replaceable"><tt>start</tt></i> to <i class="replaceable"><tt>end</tt></i> to a <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>,
  according to the given <i class="replaceable"><tt>encoding</tt></i>, and returns the resulting byte
  vector.</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clos-stream"></a>29.5. Extensions-1.5. Defining new kinds of Streams</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#gray">29.5.1. Gray streams</a></span></dt><dt><span class="section"><a href="#gstream">29.5.2. Generic streams</a></span></dt></dl></div><p>Two mechanisms are supported for creating new streams with
user-defined behavior:
</p><div class="itemizedlist"><ul type="disc"><li>You can create a new subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a> and define
  methods for the elementary stream operations on it.  These generic
  functions all have a name starting with the prefix "stream-".
  </li><li>You can create a new subclass of
  <tt class="classname">GSTREAM:GENERIC-STREAM-CONTROLLER</tt> and define
  methods for the elementary stream operations on it.  These generic
  functions all have a name starting with the prefix
  "generic-stream-".  The stream itself is a different object, created
  using the function <tt class="function">gstream:make-generic-stream</tt>.
  </li></ul></div><p>The <tt class="classname">FUNDAMENTAL-STREAM</tt> API is based on the
 <a href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail" target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> proposal by David N. Gray and is supported by most <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>
 implementations currently in use.
 The <tt class="classname">GSTREAM:GENERIC-STREAM-CONTROLLER</tt>
 API is <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>-specific and is now obsolete.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gray"></a>29.5.1. Gray streams</h3></div></div><div></div></div><p>This interface permits the definition of new classes of streams,
and programming their behavior by defining methods for the elementary
stream operations.  It is based on the proposal <a href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail" target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> of David
N. Gray to X3J13.</p><p>All symbols defined by this interface, starting with the prefix
 "fundamental-" or "stream-", are exported from the package
 <a href="#gray" title="29.5.1.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a> and re-exported from <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>.</p><div class="variablelist"><p class="title"><b>Defined classes</b></p><dl><dt><a id="fu-st"></a><a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams.
   It is a subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and of <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><tt class="classname">STANDARD-OBJECT</tt></a>.
   Its metaclass is <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><tt class="classname">STANDARD-CLASS</tt></a>.</dd><dt><a id="fu-st-in"></a><a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s.
   It is a subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing input, you have to make it
   a subclass of <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><a id="fu-st-out"></a><a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s.
   It is a subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">OUTPUT-STREAM-P</tt></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing output, you have to make
   it a subclass of <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd><dt><a id="fu-st-char"></a><a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.  It is a subclass of
   <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  It defines a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> that returns
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.</dd><dt><a id="fu-st-bin"></a><a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is a subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.  It is a
   subclass of <a href="#fu-st"><tt class="classname">GRAY:FUNDAMENTAL-STREAM</tt></a>.  When you define a subclass of <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a>,
   you have to provide a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>.
  </dd><dt><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-INPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-OUTPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-BINARY-INPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a href="#fu-st-in"><tt class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd><dt><tt class="classname">GRAY:FUNDAMENTAL-BINARY-OUTPUT-STREAM</tt></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><tt class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a href="#fu-st-out"><tt class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd></dl></div><div class="variablelist"><p class="title"><b>general generic functions defined on streams</b></p><dl><dt><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>
    <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns the stream's element type, normally a
   subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>.</p><p>The method for <a href="#fu-st-char"><tt class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>.
  </p></dd><dt><tt class="sexp">((<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a>)
    <i class="replaceable"><tt>new-element-type</tt></i> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Changes the stream's element type.</p><p>The default method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see <a href="#stream-eltype" title="21.3.1.&#xA0;Function STREAM-ELEMENT-TYPE">setting <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a></a>).</p></dd><dt><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a>
    <i class="replaceable"><tt>stream</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:ABORT</tt>)</tt></dt><dd><p>Closes the stream and flushes any associated buffers.
   </p><p>When you define a primary method on this
    function, do not forget to <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><tt class="function">CALL-NEXT-METHOD</tt></a>.
  </p></dd><dt><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a>
    <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns true before the stream has been closed, and
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> after the stream has been closed.</p><p>You do not need to add methods to this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character input</b></p><dl><dt><a id="st-rc"></a><tt class="sexp">(<a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns and consumes it.  Otherwise returns and consumes the next
   character from the stream. Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-uc"></a><tt class="sexp">(<a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a> <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>char</tt></i>)</tt></dt><dd><p>Pushes <i class="replaceable"><tt>char</tt></i>, which must be the last character
   read from the <i class="replaceable"><tt>stream</tt></i>, back onto the front of the <i class="replaceable"><tt>stream</tt></i>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-rcnh"></a><tt class="sexp">(<a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns a character or <tt class="constant">:EOF</tt>, like <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>, if
   that would return immediately.  If <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>
   The default method simply calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this is sufficient for streams
   whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method never blocks.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-PEEK-CHAR</tt> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns it.  Otherwise returns the next character from the stream,
   avoiding any side effects <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> would do.  Returns <tt class="constant">:EOF</tt> if the
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.</p><p>The default method calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no
   side-effects.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-LISTEN</tt> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>If a character was pushed back using <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>,
   returns it.  Otherwise returns the next character from the stream, if
   already available.  If no character is available immediately, or if
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>The default method calls <a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no
   side-effects.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-CHAR-WILL-HANG-P</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rcnh"><tt class="function">GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a href="#st-uc"><tt class="function">GRAY:STREAM-UNREAD-CHAR</tt></a>; this is
   sufficient for streams whose <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a> method has no side-effects.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see <a href="#rcwhp"><tt class="function">EXT:READ-CHAR-WILL-HANG-P</tt></a>).</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-CHAR-SEQUENCE</tt> <i class="replaceable"><tt>stream</tt></i>
   <i class="replaceable"><tt>sequence</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<i class="replaceable"><tt>start</tt></i> [<i class="replaceable"><tt>end</tt></i>]])</tt></dt><dd><p>Fills the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by
   <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with characters consecutively read from <i class="replaceable"><tt>stream</tt></i>.
   Returns the index of the first element of <i class="replaceable"><tt>sequence</tt></i> that was not
   updated (= <i class="replaceable"><tt>end</tt></i> or &lt; <i class="replaceable"><tt>end</tt></i> if the stream reached its end).</p><p><i class="replaceable"><tt>sequence</tt></i> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
   <i class="replaceable"><tt>start</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to <tt class="literal">0</tt>.
   <i class="replaceable"><tt>end</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <i class="replaceable"><tt>sequence</tt></i>)</tt>.
  </p><p>The default method repeatedly calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this
   is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see
   <a href="#rd-ch-seq"><tt class="function">EXT:READ-CHAR-SEQUENCE</tt></a>).</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-LINE</tt> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Reads a line of characters, and return two values:
   the line (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, without the terminating <span class="keysym">#\Newline</span> character),
   and a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a> value which is true if the line was terminated by
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> instead of <span class="keysym">#\Newline</span>.</p><p>The default method repeatedly calls <a href="#st-rc"><tt class="function">GRAY:STREAM-READ-CHAR</tt></a>; this
   is always sufficient.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-CLEAR-INPUT</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Clears all pending interactive input from the
   <i class="replaceable"><tt>stream</tt></i>, and returns true if some pending input was removed.</p><p>The default method does nothing and returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; this is
   sufficient for non-interactive streams.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character output</b></p><dl><dt><a id="st-wc"></a><tt class="sexp">(<a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a> <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>char</tt></i>)</tt></dt><dd><p>Writes <i class="replaceable"><tt>char</tt></i>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-lc"></a><tt class="sexp">(<a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns the column number where the next character
   would be written (<tt class="literal">0</tt> stands for the first column),
    or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if that is not meaningful for this stream.
   </p><p>You must define a method for this function.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-START-LINE-P</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns true if the next character would be
   written at the start of a new line.</p><p>The default method calls <a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> and compares its result with
   0; this is sufficient for streams whose <a href="#st-lc"><tt class="function">GRAY:STREAM-LINE-COLUMN</tt></a> never returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
  </p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>sequence</tt></i>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<i class="replaceable"><tt>start</tt></i> [<i class="replaceable"><tt>end</tt></i>]])</tt></dt><dd><p>Outputs the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified
   by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <i class="replaceable"><tt>stream</tt></i>.</p><p><i class="replaceable"><tt>sequence</tt></i> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.
   <i class="replaceable"><tt>start</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
   <i class="replaceable"><tt>end</tt></i> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <i class="replaceable"><tt>sequence</tt></i>)</tt>.
  </p><p>The default method repeatedly calls <a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a>; this
   is always sufficient if speed does not matter.
  </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension
   (see <a href="#wr-ch-seq"><tt class="function">EXT:WRITE-CHAR-SEQUENCE</tt></a>).</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-WRITE-STRING</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>string</tt></i>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<i class="replaceable"><tt>start</tt></i> [<i class="replaceable"><tt>end</tt></i>]])</tt></dt><dd><p>Outputs the subsequence of <i class="replaceable"><tt>string</tt></i> specified by
   <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <i class="replaceable"><tt>stream</tt></i>.  Returns <i class="replaceable"><tt>string</tt></i>.</p><p><i class="replaceable"><tt>string</tt></i> is a string.  <i class="replaceable"><tt>start</tt></i> is a nonnegative integer
   and default to 0.  <i class="replaceable"><tt>end</tt></i> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, which stands for <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
   <i class="replaceable"><tt>string</tt></i>)</tt>.</p><p>The default method calls
   <tt class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</tt>;
   this is always sufficient.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-TERPRI</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Outputs a <span class="keysym">#\Newline</span> character.</p><p>The default method calls <a href="#st-wc"><tt class="function">GRAY:STREAM-WRITE-CHAR</tt></a>; this is always
   sufficient.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-FRESH-LINE</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Possibly outputs a <span class="keysym">#\Newline</span> character, so as to ensure
   that the next character would be written at the start of a new line.
   Returns true if it did output a <span class="keysym">#\Newline</span> character.</p><p>The default method calls
   <tt class="function">GRAY:STREAM-START-LINE-P</tt> and then
   <tt class="function">GRAY:STREAM-TERPRI</tt> if necessary; this is always
   sufficient.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-FINISH-OUTPUT</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Ensures that any buffered output has reached its
   destination, and then returns.</p><p>The default method does nothing.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-FORCE-OUTPUT</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Brings any buffered output on its way towards its
   destination, and returns without waiting until it has reached its
   destination.</p><p>The default method does nothing.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-CLEAR-OUTPUT</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Attempts to discard any buffered output which has
   not yet reached its destination.</p><p>The default method does nothing.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-ADVANCE-TO-COLUMN</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>column</tt></i>)</tt></dt><dd><p>Ensures that the next character will be written at
   <i class="replaceable"><tt>column</tt></i> at least.</p><p>The default method outputs an appropriate amount of space
   characters; this is sufficient for non-proportional output.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary input</b></p><dl><dt><a id="st-rb"></a><tt class="sexp">(<a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>Returns and consumes the next integer from the
   stream. Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is reached.</p><p>You must define a method for this function.</p></dd><dt><a id="st-rbla"></a><tt class="sexp">(<a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a> <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> result.  Returns <tt class="constant">:EOF</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><tt class="literal">end-of-stream</tt></a> is already
   known to be reached.  If <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>You must define a method for this function.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see
   <a href="#rbla"><tt class="function">EXT:READ-BYTE-LOOKAHEAD</tt></a>).</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-BYTE-WILL-HANG-P</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a>; this is always sufficient.
   </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see <a href="#rbwhp"><tt class="function">EXT:READ-BYTE-WILL-HANG-P</tt></a>).
 </p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-BYTE-NO-HANG</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd><p>To be called only if <i class="replaceable"><tt>stream</tt></i>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><tt class="function">STREAM-ELEMENT-TYPE</tt></a> is <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <tt class="constant">:EOF</tt>, like <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>, if that would
   return immediately.  If <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>'s value is not available immediately,
   returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> instead of waiting.</p><p>The default method calls <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a> if <a href="#st-rbla"><tt class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a> returns true;
    this is always sufficient.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see <a href="#rbnh"><tt class="function">EXT:READ-BYTE-NO-HANG</tt></a>).
 </p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-READ-BYTE-SEQUENCE</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>sequence</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
                 [<i class="replaceable"><tt>start</tt></i> [<i class="replaceable"><tt>end</tt></i> [<i class="replaceable"><tt>no-hang</tt></i>]]])</tt></dt><dd><p>Fills the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified by
   <tt class="constant">:START</tt> and <tt class="constant">:END</tt> with integers consecutively read from <i class="replaceable"><tt>stream</tt></i>.
   Returns the index of the first element of <i class="replaceable"><tt>sequence</tt></i> that was not
   updated (= <i class="replaceable"><tt>end</tt></i> or &lt; <i class="replaceable"><tt>end</tt></i> if the stream reached its end).</p><p><i class="replaceable"><tt>sequence</tt></i> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.
   <i class="replaceable"><tt>start</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
   <i class="replaceable"><tt>end</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <i class="replaceable"><tt>sequence</tt></i>)</tt>.
  </p><p>The default method repeatedly calls <a href="#st-rb"><tt class="function">GRAY:STREAM-READ-BYTE</tt></a>; this
   is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see
   <a href="#rd-by-seq"><tt class="function">EXT:READ-BYTE-SEQUENCE</tt></a>).</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary output</b></p><dl><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-WRITE-BYTE</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>integer</tt></i>)</tt></dt><dd><p>Writes <i class="replaceable"><tt>integer</tt></i>.</p><p>You must define a method for this function.</p></dd><dt><tt class="sexp">(<tt class="function">GRAY:STREAM-WRITE-BYTE-SEQUENCE</tt>
                 <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>sequence</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
                 [<i class="replaceable"><tt>start</tt></i> [<i class="replaceable"><tt>end</tt></i> [<i class="replaceable"><tt>no-hang</tt></i>]]])</tt></dt><dd><p>Outputs the subsequence of <i class="replaceable"><tt>sequence</tt></i> specified
   by <tt class="constant">:START</tt> and <tt class="constant">:END</tt> to <i class="replaceable"><tt>stream</tt></i></p><p><i class="replaceable"><tt>sequence</tt></i> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s.
   <i class="replaceable"><tt>start</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and defaults to 0.
   <i class="replaceable"><tt>end</tt></i> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   which stands for <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a> <i class="replaceable"><tt>sequence</tt></i>)</tt>.
  </p><p>The default method repeatedly calls
   <tt class="function">GRAY:STREAM-WRITE-BYTE</tt>; this is always
   sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extension (see
   <a href="#wr-by-seq"><tt class="function">EXT:WRITE-BYTE-SEQUENCE</tt></a>).</p></dd></dl></div></div>
<!--#ifdef GENERIC_STREAMS-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gstream"></a>29.5.2. Generic streams</h3></div></div><div></div></div><p>This interface is <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>-specific and now obsolete.  Please use
 the <a href="#gray" title="29.5.1.&#xA0;Gray streams">Gray streams</a> interface instead.</p><p>Generic streams are user programmable streams.
 The programmer interface:</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">gstream:make-generic-stream</tt>
                 <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd>returns a generic stream.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-controller</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>returns a private object to which generic stream
   methods dispatch.  The typical usage is to retrieve the object
   originally provided by the user in
   <tt class="function">gstream:make-generic-stream</tt>.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-p</tt>
                 <i class="replaceable"><tt>stream</tt></i>)</tt></dt><dd>determines whether a stream is a generic stream,
   returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if it is, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> otherwise.
  </dd></dl></div><p>In order to specify the behavior of a generic stream, the user
 must define <span><b class="command">CLOS</b></span> methods on the following <span><b class="command">CLOS</b></span> generic
 functions.  The function
 <tt class="function">gstream:generic-stream-<i class="replaceable"><tt>xyz</tt></i></tt>
 corresponds to the <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> function
 <tt class="function"><i class="replaceable"><tt>xyz</tt></i></tt>.  They all take a
 controller and some number of arguments.</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-read-char</tt>
                 <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd> Returns and consumes the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at
    end of file.  Takes one argument, the controller object.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-peek-char</tt>
                 <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd> Returns the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at end of file.  A
   second value indicates whether the side effects associated with
   consuming the character were executed: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> means that a full
   <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> was done, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> means that no side effects were done.
   Takes one argument, the controller object.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-read-byte</tt>
                 <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd>Returns and consumes the next integer, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> at end
   of file.  Takes one argument, the controller object.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-read-char-will-hang-p</tt>
     <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd>This generic function is used to query the stream's
   input status.  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if
   <tt class="function">gstream:generic-stream-read-char</tt> and
   <tt class="function">gstream:generic-stream-peek-char</tt> will certainly
   return immediately.  Otherwise it returns true.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-write-char</tt>
                 <i class="replaceable"><tt>controller</tt></i> <i class="replaceable"><tt>char</tt></i>)</tt></dt><dd>The first argument is the controller object.
   The second argument is the character to be written.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-write-byte</tt>
                 <i class="replaceable"><tt>controller</tt></i>
                 <i class="replaceable"><tt>by</tt></i>)</tt></dt><dd>The first argument is the controller object.
   The second argument is the integer to be written.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-write-string</tt>
                 <i class="replaceable"><tt>controller</tt></i>
                 <i class="replaceable"><tt>string</tt></i> <i class="replaceable"><tt>start</tt></i> <i class="replaceable"><tt>length</tt></i>)</tt></dt><dd>Writes the subsequence of <i class="replaceable"><tt>string</tt></i> starting from
   <i class="replaceable"><tt>start</tt></i> of length <i class="replaceable"><tt>length</tt></i>.
   The first argument is the controller object.
  </dd><dt><tt class="sexp">(<tt class="function">gstream:generic-stream-clear-input</tt>
                 <i class="replaceable"><tt>controller</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">gstream:generic-stream-clear-output</tt>
     <i class="replaceable"><tt>controller</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">gstream:generic-stream-finish-output</tt>
     <i class="replaceable"><tt>controller</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">gstream:generic-stream-force-output</tt>
     <i class="replaceable"><tt>controller</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">gstream:generic-stream-close</tt>
     <i class="replaceable"><tt>controller</tt></i>)</tt></dt><dd>Take one argument, the controller object.
 </dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="weak"></a>29.6. Extensions-1.6. Weak Pointers</h2></div></div><div></div></div><p>A weak pointer is an object holding a reference to a given object,
 without keeping the latter from being <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">EXT:MAKE-WEAK-POINTER</tt>
   <i class="replaceable"><tt>value</tt></i>)</tt></dt><dd>returns a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> weak pointer referring to
  <i class="replaceable"><tt>value</tt></i>.</dd><dt><tt class="sexp">(<tt class="function">EXT:WEAK-POINTER-P</tt>
   <i class="replaceable"><tt>object</tt></i>)</tt></dt><dd>returns true if the <i class="replaceable"><tt>object</tt></i> is of type
   <a href="#weak" title="29.6.&#xA0;Extensions-1.6. Weak Pointers"><tt class="classname">EXT:WEAK-POINTER</tt></a>.</dd><dt><tt class="sexp">(<tt class="function">EXT:WEAK-POINTER-VALUE</tt>
   <i class="replaceable"><tt>weak-pointer</tt></i>)</tt></dt><dd>returns two values: The original value and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>,
   if the value has not yet been <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able: you can change the value that the weak pointer
   points to.</dd></dl></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> also has <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE">weak</a>
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="final"></a>29.7. Extensions-1.7. Finalization</h2></div></div><div></div></div><p>Calling
 <tt class="sexp">(<a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a> <i class="replaceable"><tt>object</tt></i> <i class="replaceable"><tt>function</tt></i>)</tt>
 has the effect that when the specified object is being <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>object</tt></i>)</tt>
 will be executed.</p><p>Calling
 <tt class="sexp">(<a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a> <i class="replaceable"><tt>object</tt></i> <i class="replaceable"><tt>function</tt></i>
                       <i class="replaceable"><tt>guardian</tt></i>)</tt>
 has a similar effect, but only as long as the
 <i class="replaceable"><tt>guardian</tt></i> has not been <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed:
 when <i class="replaceable"><tt>object</tt></i> is being <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> <i class="replaceable"><tt>function</tt></i> <i class="replaceable"><tt>object</tt></i>
                       <i class="replaceable"><tt>guardian</tt></i>)</tt>
 will be executed.
 If the <i class="replaceable"><tt>guardian</tt></i> is <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed before <i class="replaceable"><tt>object</tt></i>
 is, nothing happens.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The time when “<span class="quote">the <i class="replaceable"><tt>object</tt></i> is being <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed</span>” is
  not defined deterministically.  (Actually, it might possibly never
  occur.)  It denotes a moment at which no references to <i class="replaceable"><tt>object</tt></i>
  exist from other Lisp objects.  When the <i class="replaceable"><tt>function</tt></i> is called,
  <i class="replaceable"><tt>object</tt></i> (and possibly <i class="replaceable"><tt>guardian</tt></i>) enter
  the "arena of live Lisp objects" again.</p></div><p>No finalization request will be executed more than once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="prompt"></a>29.8. Extensions-1.8. The Prompt</h2></div></div><div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> prompt consists of 3 mandatory parts: “<span class="quote">start</span>”,
 “<span class="quote">body</span>”, and “<span class="quote">finish</span>”; and 2 optional parts:
 “<span class="quote">break</span>”, which appears only during
 <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging</a> (after <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a>),
 and “<span class="quote">step</span>”, which appears only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>ping.
 Each part is controlled by a custom variable, which can be either a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> of no arguments returning a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
 (if it is something else - or if the return value was not a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
 - it is printed with <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><tt class="function">PRINC</tt></a>).  In the order of invocation:
 </p><div class="variablelist"><dl><dt><a id="prompt-start"></a><a href="#prompt-start"><tt class="varname">CUSTOM:*PROMPT-START*</tt></a></dt><dd>Defaults to an empty string.
  </dd><dt><a id="prompt-step"></a><a href="#prompt-step"><tt class="varname">CUSTOM:*PROMPT-STEP*</tt></a></dt><dd>Used only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>ping.
     Defaults to <tt class="prompt">"Step n "</tt>,
     where <i class="replaceable"><tt>n</tt></i> is the stepping level as returned by <a href="#step-level"><tt class="function">EXT:STEP-LEVEL</tt></a>.
  </dd><dt><a id="prompt-break"></a><a href="#prompt-break"><tt class="varname">CUSTOM:*PROMPT-BREAK*</tt></a></dt><dd>Used only inside break loop (during debugging).
     Defaults to <tt class="prompt">"Break n "</tt>,
     where <i class="replaceable"><tt>n</tt></i> is the break level as returned by <a href="#break-level"><tt class="function">EXT:BREAK-LEVEL</tt></a>.
  </dd><dt><a id="prompt-body"></a><a href="#prompt-body"><tt class="varname">CUSTOM:*PROMPT-BODY*</tt></a></dt><dd>Defaults to <tt class="prompt">"package[n]"</tt>
     where <i class="replaceable"><tt>package</tt></i> is the shortest (nick)name (as returned by
     <a href="#package-short-name"><tt class="function">EXT:PACKAGE-SHORT-NAME</tt></a>) of the current package <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a>
     if it is <span class="emphasis"><em>not</em></span> the same as it was in the beginning
     (determined by <a href="#prompt-new-package"><tt class="function">EXT:PROMPT-NEW-PACKAGE</tt></a>)
     or if it does not contain symbol <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>,
     (it is assumed that in the latter case you would want to keep in
     mind that your current package is something weird);
     and <i class="replaceable"><tt>n</tt></i> is the index of the current prompt, kept in <a href="#command-index"><tt class="varname">EXT:*COMMAND-INDEX*</tt></a>;
  </dd><dt><a id="prompt-finish"></a><a href="#prompt-finish"><tt class="varname">CUSTOM:*PROMPT-FINISH*</tt></a></dt><dd>Defaults to <tt class="prompt">&gt; </tt>.
</dd></dl></div><p>To facilitate your own custom prompt creation, the following
 functions and variables are available:
 </p><div class="variablelist"><dl><dt><a id="break-level"></a><a href="#break-level"><tt class="function">EXT:BREAK-LEVEL</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> level.
  </dd><dt><a id="step-level"></a><a href="#step-level"><tt class="function">EXT:STEP-LEVEL</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a> level.
  </dd><dt><a id="prompt-new-package"></a><a href="#prompt-new-package"><tt class="function">EXT:PROMPT-NEW-PACKAGE</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><tt class="varname">*PACKAGE*</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
     if the current package is the same as it was initially.
  </dd><dt><a id="package-short-name"></a><a href="#package-short-name"><tt class="function">EXT:PACKAGE-SHORT-NAME</tt></a></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a> takes one argument, a
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><tt class="classname">PACKAGE</tt></a>, and returns its shortest name or nickname.
  </dd><dt><a id="command-index"></a><a href="#command-index"><tt class="varname">EXT:*COMMAND-INDEX*</tt></a></dt><dd>contains the current prompt number;
     it is your responsibility to increment it
     (this variable is bound to 0 before saving the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>).
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ansi"></a>29.9. Extensions-1.9. Maximum ANSI CL compliance</h2></div></div><div></div></div><p>Some [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] features are turned off by default for backwards
 compatibility.
 They can be switched on, all at once, by setting the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 <a href="#ansi" title="29.9.&#xA0;Extensions-1.9. Maximum ANSI CL compliance"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, or they can be switched on individually.
 Setting <a href="#ansi" title="29.9.&#xA0;Extensions-1.9. Maximum ANSI CL compliance"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> implies the following:</p><div class="itemizedlist"><ul type="disc"><li>Setting <a href="#pathprint" title="22.5.2.&#xA0;pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.8.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</li></ul></div><p>Note that if you run <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> with the <a href="clisp.html#opt-ansi" target="_top"><tt class="option">-ansi</tt></a> switch or set
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="#ansi" title="29.9.&#xA0;Extensions-1.9. Maximum ANSI CL compliance"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> and then save <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>,
 then all subsequent invocations of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> with this image
 will be as if with <a href="clisp.html#opt-ansi" target="_top"><tt class="option">-ansi</tt></a>
 (regardless whether you actually supply the <a href="clisp.html#opt-ansi" target="_top"><tt class="option">-ansi</tt></a> switch).
 You can always set the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> <a href="#ansi" title="29.9.&#xA0;Extensions-1.9. Maximum ANSI CL compliance"><tt class="varname">CUSTOM:*ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, or invoke
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> with the <a href="clisp.html#opt-traditional" target="_top"><tt class="option">-traditional</tt></a> switch, reversing the above
 settings, i.e.,</p><div class="itemizedlist"><ul type="disc"><li>Setting <a href="#pathprint" title="22.5.2.&#xA0;pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.8.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="macros3"></a>29.10. Extensions-1.10. Additional Fancy Macros</h2></div></div><div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> comes with some extension macros, mostly defined in the
 file <tt class="filename">macros3.lisp</tt> and loaded from the file
 <tt class="filename">init.lisp</tt> during <span><b class="command">make</b></span>:</p><p><a id="ethe"></a><b>Macro <a href="#ethe"><tt class="function">EXT:ETHE</tt></a>. </b><tt class="sexp">(<a href="#ethe"><tt class="function">EXT:ETHE</tt></a> <i class="replaceable"><tt>value-type</tt></i> <i class="replaceable"><tt>form</tt></i>)</tt>
 enforces a type check in both interpreted and compiled code.
 </p><p><a id="letf"></a><b>Macros <a href="#letf"><tt class="function">EXT:LETF</tt></a> &amp; <a href="#letf"><tt class="function">EXT:LETF*</tt></a>. </b>These macros are similar to <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a>, respectively,
 except that they can bind <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s, even <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s with <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
 Example:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (letf (((values a b) form)) ...)
</pre></td></tr></table><p>

is equivalent to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (multiple-value-bind (a b) form ...)
</pre></td></tr></table><p>

while

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(letf (((first l) 7)) ...)
</pre></td></tr></table><p>

is approximately equivalent to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a> ((#:g1 l) (#:g2 (first #:g1)))
   (<a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (first #:g1) 7) ...)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (first #:g1) #:g2)))
</pre></td></tr></table><p>
</p><p><a id="with-collect"></a><b>Macro <tt class="function">EXT:WITH-COLLECT</tt>. </b>Similar to the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><tt class="function">LOOP</tt></a>'s
 <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1-3.html" target="_top"><tt class="constant">collect</tt></a>
 construct, except that it is looks more "Lispy" and can appear
 arbitrarily deep.  It defines local macros (with <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a>) which
 collect objects given to it into lists, which are then returned as
 <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.  E.g.,

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (ext:with-collect (c0 c1)
   (dotimes (i 10) (if (oddp i) (c0 i) (c1 i))))
</pre></td></tr></table><p>

returns two lists <tt class="sexp">(1 3 5 7 9)</tt> and
<tt class="sexp">(0 2 4 6 8)</tt> as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
</p><p><a id="with-gensyms"></a><b>Macro <tt class="function">EXT:WITH-GENSYMS</tt>. </b>Similar to its namesake from
 <a href="http://www.paulgraham.com/" target="_top">Paul Graham</a>'s book
 <a href="http://www.paulgraham.com/onlisp.html" target="_top">“<span class="quote">On
  Lisp</span>”</a>, this macro is useful for writing other macros:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (with-gensyms ("FOO-" bar baz zot) ...)
</pre></td></tr></table><p>
expands to
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (let ((bar (gensym "FOO-BAR-"))
       (baz (gensym "FOO-BAZ-"))
       (zot (gensym "FOO-ZOT-")))
   ...)
</pre></td></tr></table><p>
</p><p><a id="remove-plist"></a><b>Function <tt class="function">EXT:REMOVE-PLIST</tt>. </b>Similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><tt class="function">REMOVE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_remf.html" target="_top"><tt class="function">REMF</tt></a>, this function removes some
 properties from a property list.  It is non-destructve and thus can be
 used on <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> arguments to remove some keyword parameters, e.g.,
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (defmacro with-foo ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> foo1 foo2) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)
   `(... ,foo1 ... ,foo2 ... ,@body))
 (defmacro with-foo-bar ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> opts <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> bar1 bar2
                          <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>)
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)
   `(with-foo (,@(remove-plist opts :bar1 :bar2)
      ... ,bar1 ... ,bar2 ... ,@body)))
 (defun foo-bar ()
   (with-foo-bar (:bar1 1 :foo2 2) ...))
</pre></td></tr></table><p>
here <tt class="function">WITH-FOO</tt> does not receive the
<tt class="literal">:BAR1 1</tt> argument from <tt class="function">FOO-BAR</tt>.
</p><p><a id="html-http-output"></a><b>Macros <tt class="function">EXT:WITH-HTML-OUTPUT</tt> and
                   <tt class="function">EXT:WITH-HTTP-OUTPUT</tt>. </b>Defined in <tt class="filename">inspect.lisp</tt>, these macros are useful
 for the rudimentary <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> server defined there.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="customize"></a>29.11. Extensions-1.11. Customizing <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> behavior.</h2></div></div><div></div></div><p>The user-customizable variables are located in the package
 <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a> and thus can be listed using
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><tt class="function">APROPOS</tt></a> "" "CUSTOM")</tt>:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="#ansi" title="29.9.&#xA0;Extensions-1.9. Maximum ANSI CL compliance"><tt class="varname">CUSTOM:*ANSI*</tt></a></td><td><tt class="varname">CUSTOM:*APPLYHOOK*</tt></td></tr><tr><td><a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-DO-MORE*</tt></a></td><td><a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*BREAK-ON-WARNINGS*</tt></td><td><a href="#browser"><tt class="constant">CUSTOM:*BROWSER*</tt></a></td></tr><tr><td><a href="#browser"><tt class="constant">CUSTOM:*BROWSERS*</tt></a></td><td><tt class="varname">CUSTOM:*CLHS-ROOT-DEFAULT*</tt></td></tr><tr><td><a href="#fixnum-char-ansi" title="4.8.1.&#xA0;Function COERCE"><tt class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a></td><td><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><tt class="varname">CUSTOM:*COMPILE-WARNINGS*</tt></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*COMPILED-FILE-TYPES*</tt></a></td><td><a href="#language" title="29.3.2.&#xA0;The Language"><tt class="varname">CUSTOM:*CURRENT-LANGUAGE*</tt></a></td></tr><tr><td><a href="#def-file-enc"><tt class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a></td><td><a href="#default-float-format"><tt class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a></td></tr><tr><td><a href="#default-tz"><tt class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</tt></a></td><td><tt class="varname">CUSTOM:*DEFTYPE-DEPTH-LIMIT*</tt></td></tr><tr><td><a href="#device-prefix"><tt class="varname">CUSTOM:*DEVICE-PREFIX*</tt></a></td><td><a href="#ed" title="25.2.8.&#xA0;Function ED"><tt class="varname">CUSTOM:*EDITOR*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*ERROR-HANDLER*</tt></td><td><tt class="varname">CUSTOM:*EVALHOOK*</tt></td></tr><tr><td><a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><tt class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a></td><td><a href="#foreign-enc"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-BROWSER*</tt></td><td><tt class="varname">CUSTOM:*INSPECT-FRONTEND*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-LENGTH*</tt></td><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LENGTH*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LEVEL*</tt></td><td><tt class="varname">CUSTOM:*INSPECT-PRINT-LINES*</tt></td></tr><tr><td><tt class="varname">CUSTOM:*LIB-DIRECTORY*</tt></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-COMPILING*</tt></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-ECHO*</tt></a></td><td><a href="#load-lpt" title="19.5.4.&#xA0;Function LOAD-LOGICAL-PATHNAME-TRANSLATIONS"><tt class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</tt></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</tt></a></td><td><a href="#load-paths"><tt class="varname">CUSTOM:*LOAD-PATHS*</tt></a></td></tr><tr><td><a href="#pathmerge" title="19.5.3.&#xA0;Function MERGE-PATHNAMES"><tt class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a></td><td><a href="#misc-enc"><tt class="varname">CUSTOM:*MISC-ENCODING*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*PACKAGE-TASKS-TREAT-SPECIALLY*</tt></td><td><a href="#parsename" title="19.5.2.&#xA0;Function PARSE-NAMESTRING"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a></td></tr><tr><td><a href="#name-type-split"><tt class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</tt></a></td><td><a href="#path-enc"><tt class="varname">CUSTOM:*PATHNAME-ENCODING*</tt></a></td></tr><tr><td><a href="#ppr-first-newline"><tt class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a></td><td><a href="#pr-closure"><tt class="varname">CUSTOM:*PRINT-CLOSURE*</tt></a></td></tr><tr><td><a href="#pr-indent"><tt class="varname">CUSTOM:*PRINT-INDENT-LISTS*</tt></a></td><td><a href="#pathprint" title="22.5.2.&#xA0;pathnames"><tt class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*PRINT-PRETTY-FILL*</tt></td><td><a href="#pr-rpars"><tt class="varname">CUSTOM:*PRINT-RPARS*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*PRINT-SYMBOLS-LONG*</tt></td><td><a href="#prompt-body"><tt class="varname">CUSTOM:*PROMPT-BODY*</tt></a></td></tr><tr><td><a href="#prompt-break"><tt class="varname">CUSTOM:*PROMPT-BREAK*</tt></a></td><td><a href="#prompt-finish"><tt class="varname">CUSTOM:*PROMPT-FINISH*</tt></a></td></tr><tr><td><a href="#prompt-start"><tt class="varname">CUSTOM:*PROMPT-START*</tt></a></td><td><a href="#prompt-step"><tt class="varname">CUSTOM:*PROMPT-STEP*</tt></a></td></tr><tr><td><a href="#count-ansi"><tt class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><tt class="varname">CUSTOM:*SOURCE-FILE-TYPES*</tt></a></td></tr><tr><td><a href="#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a></td><td><a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><tt class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</tt></a></td></tr><tr><td><a href="#term-enc"><tt class="varname">CUSTOM:*TERMINAL-ENCODING*</tt></a></td><td><a href="#trace-indent"><tt class="varname">CUSTOM:*TRACE-INDENT*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*USER-MAIL-ADDRESS*</tt></td><td><a href="#warn-fpc"><tt class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a></td></tr><tr><td><tt class="varname">CUSTOM:*WITH-HTML-OUTPUT-DOCTYPE*</tt></td><td> </td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Some of these variables are
  platform-specific.</p></div><p>You should set these variables (and do whatever other
 customization you see fit) in the file <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a> in the build
 directory before building <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
 Alternatively, after building <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, or if you are using a binary
 distribution of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, you can modify <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><tt class="filename">#P"config.lisp"</tt></a>, compile and load
 it, and then save the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.
 Finally, you can create an “<span class="quote">RC</span>” (run control) file which
 is loaded whenever <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is started (see the documentation for option
 <a href="clisp.html#opt-norc"><tt class="option">-norc</tt></a>
 in your platform-specific copy of the manual page).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="code-walk"></a>29.12. Extensions-1.12. Code Walker</h2></div></div><div></div></div><p>You can use <tt class="function">EXT:EXPAND-FORM</tt> to expand all
 the macros, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s, etc, in a single form:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
 (expand-form '(macrolet ((bar (x) `(print ,x)))
                 (macrolet ((baz (x) `(bar ,x)))
                   (symbol-macrolet ((z 3))
                     (baz z)))))
</pre></td></tr></table><p>
returns two values:
<tt class="sexp">(locally (print 3))</tt> (the expansion) and
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> (an indicator that some expansion has actually been done).</p><p>This is sometimes called a <span class="emphasis"><em>code walker</em></span>,
 except that the code walker would probably leave the <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><tt class="function">SYMBOL-MACROLET</tt></a> forms intact and just do the expansion.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="platform"></a>Chapter 30. Extensions-2: Platform specific Extensions</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#screen">30.1. Extensions-2.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">30.2. Extensions-2.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">30.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinfo">30.2.2. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">30.2.3. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">30.2.4. Example</a></span></dt><dt><span class="section"><a href="#module-tools">30.2.5. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">30.2.6. Modules included in the distribution.</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">30.3. Extensions-2.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-overview">30.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">30.3.2. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">30.3.3. The choice of the <span><b class="command">C</b></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">30.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">30.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">30.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">30.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">30.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">30.3.9. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">30.4. Extensions-2.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">30.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">30.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">30.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">30.4.4. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">30.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">30.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">30.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">30.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">30.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">30.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">30.5. Extensions-2.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">30.6. Extensions-2.6. Quickstarting delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#app-dev">30.7. Extensions-2.7. Application delivery with <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#shell">30.8. Extensions-2.8. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">30.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">30.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">30.8.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">30.9. Extensions-2.9. Operating System
  Environment.</a></span></dt><dt><span class="section"><a href="#separate-io">30.10. Extensions-2.10. Other</a></span></dt></dl></div>
<!--#if defined(SCREEN)--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="screen"></a>30.1. Extensions-2.1. Random Screen Access</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</h3></div></div><div></div></div><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">SCREEN:MAKE-WINDOW</tt>)</tt></dt><dd>returns a <span class="type">WINDOW-STREAM</span>.
    As long as this stream is open, the terminal is in cbreak/noecho mode.
    <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> should not be used for input or output during this
    time.  (Use <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="function">EXT:WITH-KEYBOARD</tt></a> and <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a> instead.)
  </dd><dt><tt class="sexp">(<tt class="function">SCREEN:WITH-WINDOW</tt> . <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd>binds
    <strong class="first"><i class="firstterm"><a href="#screen" title="30.1.&#xA0;Extensions-2.1. Random Screen Access"><tt class="varname">SCREEN:*WINDOW*</tt></a><a id="scr-win" class="indexterm"></a></i></strong>
    to a <span class="type">WINDOW-STREAM</span> and executes <i class="replaceable"><tt>body</tt></i>.
    The stream is guaranteed to be closed when the body is left.
    During its execution, <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><tt class="varname">*TERMINAL-IO*</tt></a> should not be used, as above.
  </dd><dt><tt class="sexp">(<tt class="function">SCREEN:WINDOW-SIZE</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>returns the window's size, as two values:
   height (= y<sub>max</sub>+1) and width (=
   x<sub>max</sub>+1).
  </dd><dt><tt class="sexp">(<tt class="function">SCREEN:WINDOW-CURSOR-POSITION</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>returns the position of the cursor in the window,
   as two values: line (≥0, ≤y<sub>max</sub>, 0 means
   top), column (≥0, ≤x<sub>max</sub>, 0 means left
   margin).</dd><dt><tt class="sexp">(<tt class="function">SCREEN:SET-WINDOW-CURSOR-POSITION</tt>
      <i class="replaceable"><tt>window-stream</tt></i> <i class="replaceable"><tt>line</tt></i>
      <i class="replaceable"><tt>column</tt></i>)</tt></dt><dd>sets the position of the cursor in the window.
  </dd><dt><tt class="sexp">(<tt class="function">SCREEN:CLEAR-WINDOW</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>clears the window's contents and puts the cursor
    in the upper left corner.</dd><dt><tt class="sexp">(<tt class="function">SCREEN:CLEAR-WINDOW-TO-EOT</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>clears the window's contents from the cursor
    position to the end of window.</dd><dt><tt class="sexp">(<tt class="function">SCREEN:CLEAR-WINDOW-TO-EOL</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>clears the window's contents from the cursor
    position to the end of line.</dd><dt><tt class="sexp">(<tt class="function">SCREEN:DELETE-WINDOW-LINE</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>removes the cursor's line, moves the lines below
    it up by one line and clears the window's last line.
 </dd><dt><tt class="sexp">(<tt class="function">SCREEN:INSERT-WINDOW-LINE</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>inserts a line at the cursor's line, moving the
    lines below it down by one line.</dd><dt><tt class="sexp">(<tt class="function">SCREEN:HIGHLIGHT-ON</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>switches highlighted output on.
 </dd><dt><tt class="sexp">(<tt class="function">SCREEN:HIGHLIGHT-OFF</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>switches highlighted output off.
 </dd><dt><tt class="sexp">(<tt class="function">SCREEN:WINDOW-CURSOR-ON</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>makes the cursor visible, a cursor block in most
    implementations.</dd><dt><tt class="sexp">(<tt class="function">SCREEN:WINDOW-CURSOR-OFF</tt> <i class="replaceable"><tt>window-stream</tt></i>)</tt></dt><dd>makes the cursor invisible, in implementations
    where this is possible.</dd></dl></div></div>
<!--#endif-->
<!--#if defined(UNIX) || defined(WIN32_NATIVE)--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modules"></a>30.2. Extensions-2.2. External Modules</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mod-overview">30.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinfo">30.2.2. Function <tt class="function">EXT:MODULE-INFO</tt></a></span></dt><dt><span class="section"><a href="#mod-dynload">30.2.3. Function <tt class="function">SYS::DYNLOAD-MODULES</tt></a></span></dt><dt><span class="section"><a href="#mod-set-example">30.2.4. Example</a></span></dt><dt><span class="section"><a href="#module-tools">30.2.5. Module tools</a></span></dt><dt><span class="section"><a href="#included-modules">30.2.6. Modules included in the distribution.</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-win32"></a>Modules on <strong>Win32</strong>.</h3><p>Everything described in the section will work verbatim on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
  when using <a href="http://cygwin.com/" target="_top"><strong>Cygwin</strong></a> or <a href="http://www.mingw.org/" target="_top"><strong>MinGW</strong></a>, <span class="emphasis"><em>except</em></span> for one
  thing - you will need to replace the <tt class="filename">run</tt>
  extension in <tt class="filename">lisp.run</tt> with the <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> executable
  extension <tt class="filename">exe</tt>.</p><p>For historical reasons, all examples appear to assume <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> and
  use the <tt class="filename">run</tt> file type (“<span class="quote">extension</span>”)
  for the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> run-time.
  This does <span class="emphasis"><em>not</em></span> mean that they will not work on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-overview"></a>30.2.1. Overview</h3></div></div><div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> has a facility for adding external modules (written in
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, for example).  It is invoked through
 <span><b class="command">clisp-link</b></span>.</p><p>A <strong class="first"><i class="firstterm">module<a id="module" class="indexterm"></a></i></strong> is a
 piece of external code which defines extra Lisp objects, symbols and
 functions.  A module name must consist of the characters
 <tt class="filename">A</tt>-<tt class="filename">Z</tt>,
 <tt class="filename">a</tt>-<tt class="filename">z</tt>, <tt class="filename">_</tt>,
 <tt class="filename">0</tt>-<tt class="filename">9</tt>.
 The module name “<span class="quote">clisp</span>” is reserved.
 Normally a module name is derived from the corresponding file name.</p><p><span><b class="command">clisp-link</b></span> needs a directory containing:
</p><div class="itemizedlist"><ul type="disc"><li><tt class="filename">modules.d</tt></li><li><tt class="filename">modules.c</tt></li><li><tt class="filename">clisp.h</tt></li></ul></div><p>
<span><b class="command">clisp-link</b></span> expects to find these files in a
subdirectory <tt class="filename">linkkit/</tt> of the current directory.
This can be overridden by the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">CLISP_LINKKIT</tt>.</p><p><span><b class="command">clisp-link</b></span> operates on <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="#linkset">linking set</a>s and
 on <a href="#modset">module set</a>s.</p><p><a id="linkset"></a><b><a href="#linkset">linking set</a>. </b>A <strong class="first"><i class="firstterm"><a href="#linkset">linking set</a><a id="linkseti" class="indexterm"></a></i></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><tt class="filename">makevars</tt></dt><dd><p>some <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a> commands, setting the variables
</p><div class="variablelist"><dl><dt><tt class="envar">CC</tt></dt><dd>the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler
   </dd><dt><tt class="envar">CFLAGS</tt></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler, when compiling
   </dd><dt><tt class="envar">CLFLAGS</tt></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler, when linking
   </dd><dt><tt class="envar">LIBS</tt></dt><dd>libraries to use when linking
   </dd><dt><tt class="envar">X_LIBS</tt></dt><dd>additional <a href="http://www.x.org/" target="_top">X Window System</a> libraries to use
   </dd><dt><tt class="envar">RANLIB</tt></dt><dd>the ranlib command
   </dd><dt><tt class="envar">FILES</tt></dt><dd>the list of files needed when linking
   </dd></dl></div></dd><dt><tt class="filename">modules.h</tt></dt><dd>the list of modules contained in this <a href="#linkset">linking set</a>
  </dd><dt><tt class="filename">modules.o</tt></dt><dd>the compiled list of modules contained in this <a href="#linkset">linking set</a>
  </dd><dt>all the <tt class="filename">FILES</tt></dt><dd>listed in <tt class="filename">makevars</tt>
  </dd><dt><tt class="filename">lisp.run</tt></dt><dd>the executable</dd><dt><a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a></dt><dd>the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a></dd></dl></div><p>To run a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> contained in some <a href="#linkset">linking set</a>
 <tt class="filename">dir</tt>, call
 <span><b class="command"><i class="replaceable"><tt>dir</tt></i>/lisp.run -M
 <i class="replaceable"><tt>dir</tt></i>/lispinit.mem</b></span></p><p><a id="modset"></a><b><a href="#modset">module set</a>. </b>A <strong class="first"><i class="firstterm"><a href="#modset">module set</a><a id="modseti" class="indexterm"></a></i></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><span><b class="command">link.sh</b></span></dt><dd>some <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a> commands, which prepare the directory
  before linking, and set the variables <tt class="envar">NEW_FILES</tt>,
  <tt class="envar">NEW_LIBS</tt>, <tt class="envar">NEW_MODULES</tt>, <tt class="envar">TO_LOAD</tt>
  and optionally <tt class="envar">TO_PRELOAD</tt></dd><dt>and any other files</dt><dd>needed by <span><b class="command">link.sh</b></span>
 </dd></dl></div><p>Note that in <span><b class="command">link.sh</b></span> the <a href="#modset">module set</a> directory
 is referred to as <tt class="varname">$modulename/</tt>.</p><div class="variablelist"><dl><dt><tt class="envar">NEW_FILES</tt></dt><dd>the space-separated list of files that
  belong to the <a href="#modset">module set</a> and will belong to every new <a href="#linkset">linking set</a>.
 </dd><dt><tt class="envar">NEW_LIBS</tt></dt><dd>the space-separated list of files or
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler switches that need to be passed to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
  compiler when linking the lisp.run belonging to a new <a href="#linkset">linking set</a>.
 </dd><dt><tt class="envar">NEW_MODULES</tt></dt><dd>the space-separated list of the module names
  belonging to the <a href="#modset">module set</a>.  Normally, every <tt class="filename">#P".c"</tt> file in the
  <a href="#modset">module set</a> defines a module of its own.  The module name is derived
  from the file name.</dd><dt><tt class="envar">TO_LOAD</tt></dt><dd>the space-separated list of Lisp files to load
  before building the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> belonging to a new <a href="#linkset">linking set</a>.
 </dd><dt><tt class="envar">TO_PRELOAD</tt> (optional)</dt><dd>the space-separated list of Lisp files to load
  into an intermediate <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> file, before building the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a>
  belonging to a new <a href="#linkset">linking set</a>.
  This variable is usually used for defining Lisp packages which must be
  present when the new <tt class="filename">#P".c"</tt> files are initialized.  E.g., the
  <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a> functions must reside in already defined packages;
  see <a href="#ex-call-in" title="Example&#xA0;30.9.&#xA0;Calling Lisp from C">the call-in example</a>.
 </dd></dl></div><p>The command <span><b class="command">clisp-link create-module-set
 <i class="replaceable"><tt>module-dir</tt></i>
 <i class="replaceable"><tt>file1.c</tt></i> ...</b></span> creates a <a href="#modset">module set</a>
 in <i class="replaceable"><tt>module-dir</tt></i> which refers (via symbolic
 links) to <i class="replaceable"><tt>file1.c</tt></i> etc.  The files are
 expected to be modules of their own.</p><p>The command <span><b class="command">clisp-link add-module-set
 <i class="replaceable"><tt>module-dir</tt></i>
 <i class="replaceable"><tt>source-dir</tt></i>
 <i class="replaceable"><tt>destination-dir</tt></i></b></span> combines a
 <a href="#linkset">linking set</a> in <i class="replaceable"><tt>source-dir</tt></i> and a module in
 <i class="replaceable"><tt>module-dir</tt></i> to a new <a href="#linkset">linking set</a>, in a
 directory <i class="replaceable"><tt>destination-dir</tt></i> which is newly
 created.</p><p>The command <span><b class="command">clisp-link run <i class="replaceable"><tt>source-dir</tt></i>
 <i class="replaceable"><tt>module-dir</tt></i> ...</b></span> runs the <a href="#linkset">linking set</a>
 in <i class="replaceable"><tt>source-dir</tt></i>, with the module in
 <i class="replaceable"><tt>module-dir</tt></i> loaded.  More than one module can
 be specified.  If <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> has been built with the configuration option
 <tt class="option">--with-dynamic-modules</tt>, the loading will be performed
 through dynamic loading.  Otherwise - this is much slower - a temporary
 <a href="#linkset">linking set</a> will be created and deleted afterwards.  Note that dynamic
 loading does not work on all operating systems, and that
 <tt class="option">--with-dynamic-modules</tt> precludes some efficiency
 optimizations which are enabled by default.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modinfo"></a>30.2.2. Function <a href="#modinfo" title="30.2.2.&#xA0;Function EXT:MODULE-INFO"><tt class="function">EXT:MODULE-INFO</tt></a></h3></div></div><div></div></div><p>Function <tt class="sexp">(<a href="#modinfo" title="30.2.2.&#xA0;Function EXT:MODULE-INFO"><tt class="function">EXT:MODULE-INFO</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>name</tt></i>
  <i class="replaceable"><tt>verbose</tt></i>)</tt> allows one to inquire
 about what modules are available in the currently running image.
 When called without arguments, it returns the list of module names,
 starting with “<span class="quote">clisp</span>”.  When <i class="replaceable"><tt>name</tt></i> is supplied and
 names a module, 3 values are returned - <i class="replaceable"><tt>name</tt></i>,
 <i class="replaceable"><tt>subr-count</tt></i>,
 <i class="replaceable"><tt>object-count</tt></i>.
 When <i class="replaceable"><tt>verbose</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the full list of
 module lisp function names written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> (<span class="type">Subr</span>s) and
 the full list of internal lisp objects available in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> code
 are additionally returned for the total of 5 values.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-dynload"></a>30.2.3. Function <a href="#mod-dynload" title="30.2.3.&#xA0;Function SYS::DYNLOAD-MODULES"><tt class="function">SYS::DYNLOAD-MODULES</tt></a></h3></div><div><h4 class="subtitle">Platform dependent: some <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only, compiled <strong>with</strong>
 compile-time flag <tt class="option">--with-dynamic-modules</tt>.</h4></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that dynamic loading does not work on all operating systems
(<a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> is required), and that <tt class="option">--with-dynamic-modules</tt>
precludes some efficiency optimizations which are on by default.</p></div><p>Function <tt class="sexp">(<a href="#mod-dynload" title="30.2.3.&#xA0;Function SYS::DYNLOAD-MODULES"><tt class="function">SYS::DYNLOAD-MODULES</tt></a> <i class="replaceable"><tt>filename</tt></i>
 ({<i class="replaceable"><tt>name</tt></i>}+))</tt> loads a shared object file or library
 containing a number of named external <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> modules.
 This facility cannot be used to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> and access arbitrary shared
 libraries.</p><p>External modules for <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> are those which contain a
 <tt class="literal">module__<i class="replaceable"><tt>name</tt></i>__subr_tab</tt>, among others.
 This serves to register external functions which operate on
 Lisp-level structures with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p><p>To use <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html" target="_top"><tt class="function">dlopen</tt></a> with modules, you should add
 <tt class="option">-fPIC</tt> to the module's compilation options.
 Something like <span><b class="command">cc -shared -o <i class="replaceable"><tt>name</tt></i>.so <i class="replaceable"><tt>name</tt></i>.o</b></span>
 may be needed to produce the shared object file.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-set-example"></a>30.2.4. Example</h3></div></div><div></div></div><p>To link in the <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> bindings for the <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> operating
 system, the following steps are needed.  (Step 1 and step 2 need not be
 executed in this order.)</p><div class="orderedlist"><ol type="1"><li><p>Create a new <a href="#modset">module set</a>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">$ clisp-link create-module-set linux /<i class="replaceable"><tt>somewhere</tt></i>/bindings/linux.c</pre></td></tr></table><p>

 Modify the newly created <tt class="filename">linux/link.sh</tt> to add
 <tt class="option">-lm</tt>; to the libraries: replace
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">NEW_LIBS="$file_list"</pre></td></tr></table><p>
   with
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">NEW_LIBS="$file_list -lm"</pre></td></tr></table><p>

   Modify the newly created <tt class="filename">linux/link.sh</tt> to load
   <tt class="filename">linux.fas</tt> before saving the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>:
   replace
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">TO_LOAD=''</pre></td></tr></table><p>
   with
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">TO_LOAD='/<i class="replaceable"><tt>somewhere</tt></i>/bindings/linux.fas'</pre></td></tr></table></li><li><p>Compile <tt class="filename">linux.lisp</tt>, creating
  <tt class="filename">linux.c</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">$ clisp -c /<i class="replaceable"><tt>somewhere</tt></i>/bindings/linux.lisp</pre></td></tr></table></li><li><p>Create a new <a href="#linkset">linking set</a>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">$ clisp-link add-module-set linux base base+linux</pre></td></tr></table></li><li><p>Run and try it:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">$ base+linux/lisp.run -M base+linux/lispinit.mem -x '(linux:stat "/tmp")'</pre></td></tr></table></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="module-tools"></a>30.2.5. Module tools</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#modprep">30.2.5.1. Modprep</a></span></dt><dt><span class="section"><a href="#exporting">30.2.5.2. Exporting</a></span></dt></dl></div><p>There are some tools to facilitate easy module writing.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="modprep"></a>30.2.5.1. Modprep</h4></div></div><div></div></div><p>If your module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, you can pre-process your
 sources with <tt class="filename">modprep.lisp</tt> in the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 distribution and define lisp functions with the
 <tt class="function">DEFUN</tt> macro:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
DEFUN(MY-PACKAGE:MY-FUNCTION-NAME, arg1 arg2 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> FOO BAR) {
  if (!boundp(STACK_0)) STACK_0 = fixnum(0); /* BAR */
  if (!boundp(STACK_1)) STACK_1 = fixnum(1); /* FOO */
  pushSTACK(`MY-PACKAGE::SOME-SYMBOL`); /* create a symbol in the package */
  pushSTACK(`#(:THIS :IS :A :VECTOR)`); /* some vector, created once */
  pushSTACK(``MY-PACKAGE::MY-FUNCTION-NAME``); /* double `` means FUNCTION */
  VALUES1(listof(7)); /* cons up a new list and clean up the STACK */
}</pre></td></tr></table><p>
Then <tt class="sexp">(MY-PACKAGE:MY-FUNCTION-NAME 'A 12 :FOO
 T)</tt> will return <tt class="sexp">(A 12 T 0
 MY-PACKAGE::SOME-SYMBOL #(:THIS :IS :A :VECTOR)
 #&lt;ADD-ON-SYSTEM-FUNCTION MY-PACKAGE:MY-FUNCTION-NAME&gt;)</tt>
(assuming you <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><tt class="function">EXPORT</tt></a>ed <tt class="literal">MY-FUNCTION-NAME</tt> from
 <strong class="package">“<span class="quote">MY-PACKAGE</span>”</strong>).</p><p>Another useful macro is <tt class="function">DEFVAR</tt> which lets
 you create a GC-visible object.</p><p>See <tt class="filename">modules/syscalls</tt> and other included
 modules for more examples and file <tt class="filename">modprep.lisp</tt>
 for full documentation.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you manipulate Lisp objects, you need to watch for
  <a href="#gc-safety" title="31.4.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="exporting"></a>30.2.5.2. Exporting</h4></div></div><div></div></div><p>If your module uses <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> to interface to a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> library,
 you might want to make your module package
 <a href="#make-pack" title="11.4.1.&#xA0;Function MAKE-PACKAGE">case-sensitive</a> and use
 <tt class="filename">exporting.lisp</tt> in the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> distribution to
 make all <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms export the symbols they define.
 See <tt class="filename">modules/netica</tt>
 and <tt class="filename">modules/bindings/*</tt> for examples.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="included-modules"></a>30.2.6. Modules included in the distribution.</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#netica">30.2.6.1. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">30.2.6.2. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">30.2.6.3. Berkeley DB access.</a></span></dt><dt><span class="section"><a href="#regexp">30.2.6.4. <span><b class="command">CLISP</b></span> <strong class="package">“<span class="quote">REGEXP</span>”</strong> module</a></span></dt><dt><span class="section"><a href="#pcre">30.2.6.5. Perl Compatible Regular Expressions.</a></span></dt><dt><span class="section"><a href="#syscalls">30.2.6.6. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">30.2.6.7. Oracle Interface</a></span></dt><dt><span class="section"><a href="#fastcgi">30.2.6.8. The FastCGI Interface</a></span></dt></dl></div><p>The following modules come with the distribution of
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>:</p><div class="variablelist"><dl><dt>bindings</dt><dd><p>Call the operating system functions from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
    The following platforms are supported:
   </p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a>/<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a></li><li><a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a></li></ul></div></dd><dt><a href="http://www.cliki.net/CLX" target="_top"><span><b class="command">CLX</b></span></a></dt><dd><p>Call
    <a href="http://www.the-labs.com/X11/XLib-Manual/" target="_top">Xlib</a>
    functions from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.  Two implementations are supplied:
   </p><div class="itemizedlist"><ul type="disc"><li>mit-clx, from MIT
     <a href="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z" target="_top">ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</a>
     - the standard implementation</li><li>new-clx, by <span class="author"><span class="firstname">Gilbert</span> <span class="surname">Baumann</span></span>
      - faster, with additional features, but not quite complete yet.
    </li></ul></div></dd><dt><a href="#oracle" title="30.2.6.7.&#xA0;Oracle Interface">oracle</a></dt><dd>Access
    <a href="http://www.oracle.com/" target="_top">Oracle</a> from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><a href="#fastcgi" title="30.2.6.8.&#xA0;The FastCGI Interface">fastcgi</a></dt><dd>Access
    <a href="http://www.fastcgi.com/" target="_top">FastCGI</a> from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><a href="#netica" title="30.2.6.1.&#xA0;Netica Interface">netica</a></dt><dd>Work with Bayesian belief networks and influence
    diagrams using
    <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica</a>.
 </dd><dt>postgresql</dt><dd>Access
    <a href="http://www.PostgreSQL.org/" target="_top">PostgreSQL</a> from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
  </dd><dt>queens</dt><dd>Compute the number of solutions to the n-queens
    problem on a n*n checkboard (a toy example for the users to
    explore).</dd><dt><a href="#dir-key" title="30.2.6.2.&#xA0;Directory Access">dirkey</a></dt><dd>Directory Access</dd><dt><a href="#berkeley-db" title="30.2.6.3.&#xA0;Berkeley DB access.">berkeley-db</a></dt><dd><a href="http://www.sleepycat.com/docs/index.html" target="_top">Berkeley DB from Sleepycat Software</a>
    interface</dd><dt><a href="#regexp" title="30.2.6.4.&#xA0;CLISP &#x201C;REGEXP&#x201D; module">regexp</a></dt><dd>The <a href="regexp.html" target="_top">POSIX Regular
   Expressions</a> matching, compiling, executing.
 </dd><dt><a href="#pcre" title="30.2.6.5.&#xA0;Perl Compatible Regular Expressions.">pcre</a></dt><dd>The <a href="http://www.pcre.org/" target="_top">Perl
     Compatible Regular Expressions</a> matching, compiling,
    executing.</dd><dt><a href="#syscalls" title="30.2.6.6.&#xA0;System Calls">syscalls</a></dt><dd>Use some system calls in a platform-independent way.
 </dd><dt><a href="wildcard.html" target="_top">wildcard</a></dt><dd>Shell (<a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a>) globbing</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="netica"></a>30.2.6.1. Netica Interface</h4></div></div><div></div></div><p>This is an interface to the
 <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica C API</a>.
 The package <strong class="package">“<span class="quote">NETICA</span>”</strong> is
 <a href="#make-pack" title="11.4.1.&#xA0;Function MAKE-PACKAGE">case-sensitive</a>, you would write
 <tt class="sexp">(netica:GetNodeExpectedUtils_bn ...)</tt>
 when you need to call
 <a href="http://norsys.com/onLineAPIManual/functions/GetNodeExpectedUtils_bn.html" target="_top"><tt class="function">GetNodeExpectedUtils_bn()</tt></a>
</p><p>Additionally, some higher level functionality is available
 (see <tt class="filename">modules/netica/demo.lisp</tt> for a sample
 usage):</p><div class="variablelist"><dl><dt><tt class="sexp">(netica:start-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :license :verbose)</tt></dt><dd>Call
   <a href="http://norsys.com/onLineAPIManual/functions/NewNeticaEnviron_ns.html" target="_top"><tt class="function">NewNeticaEnviron_ns()</tt></a> and
   <a href="http://norsys.com/onLineAPIManual/functions/InitNetica_bn.html" target="_top"><tt class="function">InitNetica_bn()</tt></a>
   and print some statistics; initialize
   <tt class="varname">netica:*env*</tt>.</dd><dt><tt class="sexp">(netica:check-errors <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :clear :severity)</tt></dt><dd>Show and, optionally,
   <a href="http://norsys.com/onLineAPIManual/functions/ClearError_ns.html" target="_top">clear</a>, the errors of
   the given <a href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html" target="_top">severity</a>
   and above.  You should call this function
   after <span class="emphasis"><em>every</em></span> call to a Netica function.
   Every wrapper function in this list calls it, so you do <span class="emphasis"><em>not</em></span> need to
   call it after a call to a wrapper function.
</dd><dt><tt class="sexp">(netica:error-message
   error)</tt></dt><dd>Convert netica error to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> containing
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorCategory_ns.html" target="_top">error category</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html" target="_top">error severity</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorNumber_ns.html" target="_top">error number</a>,
   <a href="http://norsys.com/onLineAPIManual/functions/ErrorMessage_ns.html" target="_top">error message</a>.
</dd><dt><tt class="sexp">(netica:close-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :verbose)</tt></dt><dd>Terminate the netica session.
   Sets <tt class="varname">netica:*env*</tt> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> when it was closed.
</dd><dt><tt class="sexp">(netica:make-net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :name
   :comment :title :env :verbose)</tt></dt><dd>Make a <a href="http://norsys.com/onLineAPIManual/functions/NewNet_bn.html" target="_top">new
    network</a> with a given name,
   <a href="http://norsys.com/onLineAPIManual/functions/SetNetTitle_bn.html" target="_top">title</a> and
   <a href="http://norsys.com/onLineAPIManual/functions/SetNetComment_bn.html" target="_top">comment</a>
   and return it.</dd><dt><tt class="sexp">(netica:net-info net)</tt></dt><dd>Print some information about the net
   (<a href="http://norsys.com/onLineAPIManual/functions/GetNetName_bn.html" target="_top">name</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetTitle_bn.html" target="_top">title</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetComment_bn.html" target="_top">comment</a>,
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetFileName_bn.html" target="_top">file name</a> and
    <a href="http://norsys.com/onLineAPIManual/functions/GetNetNodes_bn.html" target="_top">nodes</a>).
</dd><dt><tt class="sexp">(netica:make-node <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :name :net :kind :levels :states :num-states :title :comment :parents
   :cpt :x :y :env :verbose)</tt></dt><dd>Make a <a href="http://norsys.com/onLineAPIManual/functions/NewNode_bn.html" target="_top">new
    node</a> with the given name and many other parameters.
</dd><dt><tt class="sexp">(netica:node-info node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :header)</tt></dt><dd>Print some information about the node, preceded by
   the header.</dd><dt><tt class="sexp">(netica:get-beliefs node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/GetNodeBeliefs_bn.html" target="_top">Get
    the belief vector</a> for the node.
</dd><dt><tt class="sexp">(netica:enter-finding net node
   state <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/EnterFinding_bn.html" target="_top">Enter a
    finding</a> by
   <a href="http://norsys.com/onLineAPIManual/functions/NodeNamed_bn.html" target="_top">node</a>
   and <a href="http://norsys.com/onLineAPIManual/functions/StateNamed_bn.html" target="_top">state</a>
   names.</dd><dt><tt class="sexp">(netica:save-net net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :file :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/WriteNet_bn.html" target="_top">Write</a>
   a network to a file.</dd><dt><tt class="sexp">(netica:read-net file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :env :verbose)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/ReadNet_bn.html" target="_top">Read</a>
   a network from a file.</dd><dt><tt class="sexp">(netica:with-open-dne-file (var
   file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> opts) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> body)</tt></dt><dd><a href="http://norsys.com/onLineAPIManual/functions/NewStreamFile_ns.html" target="_top">Open
    a netica stream</a>, execute <i class="replaceable"><tt>body</tt></i>,
   <a href="http://norsys.com/onLineAPIManual/functions/DeleteStream_ns.html" target="_top">close the stream</a>
   - just like <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html" target="_top"><tt class="function">WITH-OPEN-FILE</tt></a>.</dd><dt><tt class="varname">netica:*verbose*</tt></dt><dd>The log <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>; the default value for
   the <tt class="literal">:VERBOSE</tt> argument.
</dd><dt><tt class="varname">netica:*license*</tt></dt><dd>The license key provided by
   <a href="http://norsys.com/" target="_top">Norsys</a>; the default value
   for the <tt class="literal">:LICENSE</tt> argument.
</dd><dt><tt class="varname">netica:*env*</tt></dt><dd>The Netica environment object; the default value
   for the <tt class="literal">:ENV</tt> argument.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="dir-key"></a>30.2.6.2. Directory Access</h4></div></div><div></div></div><p>This module provides some directory access from lisp,
 in package <a href="#dir-key" title="30.2.6.2.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>.  3 types of directory keys
 may exist, depending on the compilation environment.</p><div class="variablelist"><a id="dir-key-type"></a><p class="title"><b>valid directory key types</b></p><dl><dt>:win32</dt><dd><a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> registry access
  </dd><dt>:gnome</dt><dd><a href="http://developer.gnome.org/doc/API/libgnome/gnome-gnome-config.html" target="_top">gnome-config</a> access
  </dd><dt>:ldap</dt><dd>LDAP interface via
   <a href="http://www.openldap.org" target="_top">OpenLDAP</a> or compatible
  </dd></dl></div><p>The following functions and macros are exported (please note that
these features are experimental and the API may be modified in the
future).</p><div class="variablelist"><dl><dt><a id="dir-key-open"></a><tt class="sexp">(<a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a>
   <i class="replaceable"><tt>dkey</tt></i> <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:DIRECTION</tt> <tt class="constant">:INPUT</tt>)
   <tt class="constant">:IF-DOES-NOT-EXIST</tt>)</tt></dt><dd>Open the directory key under <i class="replaceable"><tt>dkey</tt></i>, which should
   be either an open directory key or a valid <a href="#dir-key-type">directory key type</a>.
   The meaning of the <tt class="constant">:DIRECTION</tt> and <tt class="constant">:IF-DOES-NOT-EXIST</tt> keyword
   arguments is the same as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>.</dd><dt><a id="dir-key-close"></a><tt class="sexp">(<a href="#dir-key-close"><tt class="function">LDAP:DIR-KEY-CLOSE</tt></a> <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Close the directory key.  The preferred way is to
   use the <a href="#with-dir-key-open"><tt class="function">LDAP:WITH-DIR-KEY-OPEN</tt></a> macro.</dd><dt><a id="with-dir-key-open"></a><tt class="sexp">(<a href="#with-dir-key-open"><tt class="function">LDAP:WITH-DIR-KEY-OPEN</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>dkey</tt></i> <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>
    {<i class="replaceable"><tt>option</tt></i>}*) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd>Open the directory key (by calling <a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a>
   on <i class="replaceable"><tt>dkey</tt></i>, <i class="replaceable"><tt>pathname</tt></i> and <i class="replaceable"><tt>option</tt></i>s), bind it to <i class="replaceable"><tt>variable</tt></i>,
   execute <i class="replaceable"><tt>body</tt></i>, then close it with <a href="#dir-key-close"><tt class="function">LDAP:DIR-KEY-CLOSE</tt></a>.
 </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-TYPE</tt> <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Return the <a href="#dir-key-type">directory key type</a> of the directory key
  </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-PATH</tt>
                <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Return the path of this directory key, which is the
   <i class="replaceable"><tt>pathname</tt></i> argument of <a href="#dir-key-open"><tt class="function">LDAP:DIR-KEY-OPEN</tt></a> if <i class="replaceable"><tt>dkey</tt></i> was a <a href="#dir-key-type">directory key type</a> or the
   concatenation of the <i class="replaceable"><tt>pathname</tt></i> argument and the
   <tt class="function">ldap:dir-key-path</tt> of <i class="replaceable"><tt>dkey</tt></i>.
   </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-DIRECTION</tt> <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>One of <tt class="constant">:INPUT</tt>, <tt class="constant">:OUTPUT</tt> and <tt class="constant">:IO</tt>, indicating
   the permitted operation on this key and its derivatives.
   </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-CLOSED-P</tt> <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Check whether the key has been closed.
   It is not an error to close a closed key.
   </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-SUBKEY-DELETE</tt>
     <i class="replaceable"><tt>dkey</tt></i> <i class="replaceable"><tt>subkey</tt></i>)</tt>
   <tt class="sexp">(<tt class="function">LDAP:DIR-KEY-VALUE-DELETE</tt>
     <i class="replaceable"><tt>dkey</tt></i> <i class="replaceable"><tt>attribute</tt></i>)</tt></dt><dd>Delete the specified subkey or attribute.
  </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-SUBKEY</tt> <i class="replaceable"><tt>dkey</tt></i>)</tt>
  <tt class="sexp">(<tt class="function">LDAP:DIR-KEY-ATTRIBUTES</tt>
                <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Return the list of the subkeys or attributes.
  </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-VALUE</tt> <i class="replaceable"><tt>dkey</tt></i>
    <i class="replaceable"><tt>attribute</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
    <i class="replaceable"><tt>default</tt></i>)</tt></dt><dd>Return the value of the specified attribute,
   similar to <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><tt class="function">GETHASH</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>able just like <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><tt class="function">GETHASH</tt></a>.
   </dd><dt><tt class="sexp">(<tt class="function">LDAP:DIR-KEY-INFO</tt> <i class="replaceable"><tt>dkey</tt></i>)</tt></dt><dd>Return some information about the directory key.
   This is highly platform-dependent and will probably be removed or
   replaced or modified in the future.</dd><dt><a id="with-dir-key-search"></a><tt class="sexp">(<a href="#with-dir-key-search"><tt class="function">LDAP:WITH-DIR-KEY-SEARCH</tt></a> (<i class="replaceable"><tt>key-iter</tt></i>
                 <i class="replaceable"><tt>atribute-iter</tt></i>
                 <i class="replaceable"><tt>dkey</tt></i> <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:scope</tt>)
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd><p>This is the main way to iterate over the subtree
   under the key <i class="replaceable"><tt>dkey</tt></i>+<i class="replaceable"><tt>pathname</tt></i>.</p><p><i class="replaceable"><tt>key-iter</tt></i> is a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> symbol
    and is bound via <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">MACROLET</tt></a> to a macro, each call of which returns
    the next subkey.</p><p><i class="replaceable"><tt>atribute-iter</tt></i> is a symbol and is
    bound, when non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, to a macro, each call of which returns two
   values - the next attribute and its value.</p><p>The <tt class="constant">:scope</tt> keyword argument specifies the
    scope of the search and can be
   </p><div class="variablelist"><dl><dt><tt class="constant">:self</tt></dt><dd>iterate over the key itself
     </dd><dt><tt class="constant">:level</tt></dt><dd>iterate over the children of the key
     </dd><dt><tt class="constant">:tree</tt></dt><dd>iterate over the subtree
     </dd></dl></div><p><a href="#with-dir-key-search"><tt class="function">LDAP:WITH-DIR-KEY-SEARCH</tt></a> is used to implement
    <tt class="function">LDAP:DIR-KEY-VALUES</tt>,
    <tt class="function">LDAP:DIR-KEY-CHILDREN</tt> and
    <tt class="function">LDAP:DIR-KEY-DUMP-TREE</tt> in
    <tt class="filename">dirkey.lisp</tt>.
    </p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="berkeley-db"></a>30.2.6.3. Berkeley DB access.</h4></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bdb-db-environment">30.2.6.3.1. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">30.2.6.3.2. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">30.2.6.3.3. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">30.2.6.3.4. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-bt-rn-config">30.2.6.3.5. Btree/Recno Configuration</a></span></dt><dt><span class="section"><a href="#bdb-hash-q-config">30.2.6.3.6. Hash/Queue Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">30.2.6.3.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">30.2.6.3.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">30.2.6.3.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log-cursor">30.2.6.3.10. Log Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-log-seq">30.2.6.3.11. Log Sequence Numbers</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">30.2.6.3.12. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-transaction">30.2.6.3.13. Transaction Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">30.2.6.3.14. Replication</a></span></dt></dl></div><p>This interface to <a href="http://www.sleepycat.com/docs/index.html" target="_top">Berkeley DB from Sleepycat Software</a> exports almost all
 functions in the official <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> API.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-db-environment"></a>30.2.6.3.1. Database Environment</h5></div></div><div></div></div><div class="variablelist"><dl><dt><tt class="sexp">(BDB:DB-VERSION)</tt></dt><dd>Return version information as 4 values: descriptive
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and 3 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s: major, minor and patch number (<a href="http://www.sleepycat.com/docs/api_c/env_version.html" target="_top"><tt class="function">db_version</tt></a>).
 </dd><dt><tt class="sexp">(BDB:ENV-CREATE <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    :PASSWORD :ENCRYPT :HOST :CLIENT-TIMEOUT :SERVER-TIMEOUT)</tt></dt><dd>Create an environment handle (<a href="http://www.sleepycat.com/docs/api_c/env_create.html" target="_top"><tt class="function">db_env_create</tt></a>),
    possibly connecting to a remote host (<a href="http://www.sleepycat.com/docs/api_c/env_set_rpc_server.html" target="_top"><tt class="function">DB_ENV-&gt;set_rpc_server</tt></a>) and
    possibly using encryption with password (<a href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html" target="_top"><tt class="function">DB_ENV-&gt;set_encrypt</tt></a>).
 </dd><dt><tt class="sexp">(BDB:ENV-CLOSE dbe)</tt></dt><dd>Close an environment (<a href="http://www.sleepycat.com/docs/api_c/env_close.html" target="_top"><tt class="function">DB_ENV-&gt;close</tt></a>).
 </dd><dt><tt class="sexp">(BDB:DBREMOVE dbe file
    database <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :TRANSACTION :AUTO-COMMIT)</tt></dt><dd>Remove a database (<a href="http://www.sleepycat.com/docs/api_c/env_dbremove.html" target="_top"><tt class="function">DB_ENV-&gt;dbremove</tt></a>).
 </dd><dt><tt class="sexp">(BDB:DBREMOVE dbe file
    database newname <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :TRANSACTION :AUTO-COMMIT)</tt></dt><dd>Rename a database (<a href="http://www.sleepycat.com/docs/api_c/env_dbrename.html" target="_top"><tt class="function">DB_ENV-&gt;dbrename</tt></a>).
 </dd><dt><tt class="sexp">(BDB:ENV-OPEN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    :HOME :JOIN :INIT-CDB :INIT-LOCK :INIT-LOG :INIT-MPOOL :INIT-TXN
    :RECOVER :RECOVER-FATAL :USE-ENVIRON :USE-ENVIRON-ROOT :CREATE
    :LOCKDOWN :PRIVATE :SYSTEM-MEM :THREAD :MODE)</tt></dt><dd>Open an environment (<a href="http://www.sleepycat.com/docs/api_c/env_open.html" target="_top"><tt class="function">DB_ENV-&gt;open</tt></a>).
 </dd><dt><tt class="sexp">(BDB:ENV-REMOVE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    :HOME :FORCE :USE-ENVIRON :USE-ENVIRON-ROOT)</tt></dt><dd>Destroy an environment (<a href="http://www.sleepycat.com/docs/api_c/env_remove.html" target="_top"><tt class="function">DB_ENV-&gt;remove</tt></a>).
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-environment-config"></a>30.2.6.3.2. Environment Configuration</h5></div></div><div></div></div><div class="variablelist"><dl><dt><tt class="sexp">(BDB:ENV-SET-OPTIONS dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :DATA-DIR :TMP-DIR :AUTO-COMMIT :CDB-ALLDB :DIRECT-DB
   :DIRECT-LOG :NOLOCKING :NOMMAP :NOPANIC :OVERWRITE :PANIC-ENVIRONMENT
   :REGION-INIT :TXN-NOSYNC :TXN-WRITE-NOSYNC :YIELDCPU :VERB-CHKPOINT
   :VERB-DEADLOCK :VERB-RECOVERY :VERB-REPLICATION :VERB-WAITSFOR
   :VERBOSE)</tt></dt><dd>Set some environment options using <a href="http://www.sleepycat.com/docs/api_c/env_set_flags.html" target="_top"><tt class="function">DB_ENV-&gt;set_flags</tt></a>,
   <a href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html" target="_top"><tt class="function">DB_ENV-&gt;set_verbose</tt></a>, <a href="http://www.sleepycat.com/docs/api_c/env_set_tmp_dir.html" target="_top"><tt class="function">DB_ENV-&gt;set_tmp_dir</tt></a> and <a href="http://www.sleepycat.com/docs/api_c/env_set_data_dir.html" target="_top"><tt class="function">DB_ENV-&gt;set_data_dir</tt></a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-operations"></a>30.2.6.3.3. Database Operations</h5></div></div><div></div></div>
<!--DB->associate Associate a secondary index DB->err Error message with error string DB->errx Error message DB->join Perform a database join on cursors DB->key_range Return estimate of key location DB->verify Verify/salvage a database-->
<div class="variablelist"><dl><dt><tt class="sexp">(BDB:DB-CREATE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :XA)</tt></dt><dd>Create a database handle (<a href="http://www.sleepycat.com/docs/api_c/db_create.html" target="_top"><tt class="function">db_create</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-CLOSE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :NOSYNC)</tt></dt><dd>Close a database (<a href="http://www.sleepycat.com/docs/api_c/db_close.html" target="_top"><tt class="function">DB-&gt;close</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-DEL dbe key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :TRANSACTION :AUTO-COMMIT)</tt></dt><dd>Delete items from a database (<a href="http://www.sleepycat.com/docs/api_c/db_del.html" target="_top"><tt class="function">DB-&gt;del</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-FD db)</tt></dt><dd>Return a file descriptor from a database (<a href="http://www.sleepycat.com/docs/api_c/db_fd.html" target="_top"><tt class="function">DB-&gt;fd</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-GET db key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :CONSUME :CONSUME-WAIT :DIRTY-READ :RMW :TRANSACTION)</tt></dt><dd>Get items from a database (<a href="http://www.sleepycat.com/docs/api_c/db_get.html" target="_top"><tt class="function">DB-&gt;get</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-PUT db key val
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :APPEND :NODUPDATA :NOOVERWRITE :AUTO-COMMIT
   :TRANSACTION)</tt></dt><dd>Store items into a database (<a href="http://www.sleepycat.com/docs/api_c/db_put.html" target="_top"><tt class="function">DB-&gt;put</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-STAT db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :FAST-STAT)</tt></dt><dd>Return database statistics (<a href="http://www.sleepycat.com/docs/api_c/db_get_byteswapped.html" target="_top"><tt class="function">DB-&gt;get_byteswapped</tt></a>,
   <a href="http://www.sleepycat.com/docs/api_c/db_get_type.html" target="_top"><tt class="function">DB-&gt;get_type</tt></a>, <a href="http://www.sleepycat.com/docs/api_c/db_stat.html" target="_top"><tt class="function">DB-&gt;stat</tt></a>).</dd><dt><tt class="sexp">(BDB:DB-OPEN db file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :DATABASE :TYPE :MODE :CREATE :DIRTY-READ :EXCL :NOMMAP :RDONLY
   :THREAD :TRUNCATE :AUTO-COMMIT :TRANSACTION)</tt></dt><dd>Open a database (<a href="http://www.sleepycat.com/docs/api_c/db_open.html" target="_top"><tt class="function">DB-&gt;open</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-SYNC db)</tt></dt><dd>Flush a database to stable storage (<a href="http://www.sleepycat.com/docs/api_c/db_sync.html" target="_top"><tt class="function">DB-&gt;sync</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-TRUNCATE db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :TRANSACTION :AUTO-COMMIT)</tt></dt><dd>Empty a database (<a href="http://www.sleepycat.com/docs/api_c/db_truncate.html" target="_top"><tt class="function">DB-&gt;truncate</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-UPGRADE, db file
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :DUPSORT)</tt></dt><dd>Upgrade a database (<a href="http://www.sleepycat.com/docs/api_c/db_upgrade.html" target="_top"><tt class="function">DB-&gt;upgrade</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-RENAME db file database
   newname)</tt></dt><dd>Rename a database (<a href="http://www.sleepycat.com/docs/api_c/db_rename.html" target="_top"><tt class="function">DB-&gt;rename</tt></a>).
</dd><dt><tt class="sexp">(BDB:DB-REMOVE db file
   database)</tt></dt><dd>Remove a database (<a href="http://www.sleepycat.com/docs/api_c/db_remove.html" target="_top"><tt class="function">DB-&gt;remove</tt></a>).
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-db-config"></a>30.2.6.3.4. Database Configuration</h5></div></div><div></div></div>
<!--DB->set_alloc Set local space allocation functions DB->set_cache_priority Set the database cache priority DB->set_cachesize Set the database cache size DB->set_dup_compare Set a duplicate comparison function DB->set_encrypt Set the database cryptographic key DB->set_errcall Set error message callback DB->set_errfile Set error message FILE DB->set_errpfx Set error message prefix DB->set_feedback Set feedback callback DB->set_flags General database configuration DB->set_lorder Set the database byte order DB->set_pagesize Set the underlying database page size DB->set_paniccall Set panic callback-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-bt-rn-config"></a>30.2.6.3.5. Btree/Recno Configuration</h5></div></div><div></div></div>
<!--DB->set_append_recno Set record append callback DB->set_bt_compare Set a Btree comparison function DB->set_bt_minkey Set the minimum number of keys per Btree page DB->set_bt_prefix Set a Btree prefix comparison function DB->set_re_delim Set the variable-length record delimiter DB->set_re_len Set the fixed-length record length DB->set_re_pad Set the fixed-length record pad byte DB->set_re_source Set the backing Recno text file-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-hash-q-config"></a>30.2.6.3.6. Hash/Queue Configuration</h5></div></div><div></div></div>
<!--DB->set_h_ffactor Set the Hash table density DB->set_h_hash Set a hashing function DB->set_h_nelem Set the Hash table size DB->set_q_extentsize Set Queue database extent size-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-cursor"></a>30.2.6.3.7. Database Cursor Operations</h5></div></div><div></div></div>
<!--DB->cursor Create a cursor handle DBcursor->c_close Close a cursor DBcursor->c_count Return count of duplicates DBcursor->c_del Delete by cursor DBcursor->c_dup Duplicate a cursor DBcursor->c_get, DBcursor->c_pget Retrieve by cursor DBcursor->c_put Store by cursor-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-lock"></a>30.2.6.3.8. Lock Subsystem</h5></div></div><div></div></div>
<!--DB_ENV->set_lk_conflicts Set lock conflicts matrix DB_ENV->set_lk_detect Set automatic deadlock detection DB_ENV->set_lk_max_lockers Set maximum number of lockers DB_ENV->set_lk_max_locks Set maximum number of locks DB_ENV->set_lk_max_objects Set maximum number of lock objects DB_ENV->lock_detect Perform deadlock detection DB_ENV->lock_get Acquire a lock DB_ENV->lock_id Acquire a locker ID DB_ENV->lock_id_free Release a locker ID DB_ENV->lock_put Release a lock DB_ENV->lock_stat Return lock subsystem statistics DB_ENV->lock_vec Acquire/release locks-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-log"></a>30.2.6.3.9. Log Subsystem</h5></div></div><div></div></div>
<!--DB_ENV->set_lg_bsize Set log buffer size DB_ENV->set_lg_dir Set the environment logging directory DB_ENV->set_lg_max Set log file size DB_ENV->set_lg_regionmax Set logging region size DB_ENV->log_archive List log and database files DB_ENV->log_file Map Log Sequence Numbers to log files DB_ENV->log_flush Flush log records DB_ENV->log_put Write a log record DB_ENV->log_stat Return log subsystem statistics-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-log-cursor"></a>30.2.6.3.10. Log Cursor Operations</h5></div></div><div></div></div>
<!--DB_ENV->log_cursor Create a log cursor handle DB_LOGC->close Close a log cursor DB_LOGC->get Retrieve a log record-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-log-seq"></a>30.2.6.3.11. Log Sequence Numbers</h5></div></div><div></div></div>
<!--log_compare Compare two Log Sequence Numbers-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-mem-pool"></a>30.2.6.3.12. Memory Pool Subsystem</h5></div></div><div></div></div>
<!--DB_ENV->set_cachesize Set the environment cache size DB_ENV->set_mp_mmapsize Set maximum mapped-in database file size DB_ENV->memp_register Register input/output functions for a file in a memory pool DB_ENV->memp_stat Return memory pool statistics DB_ENV->memp_sync Flush pages from a memory pool DB_ENV->memp_trickle Trickle flush pages from a memory pool Memory Pool Files DB_ENV->memp_fcreate Open a file in a memory pool DB_MPOOLFILE->close Close a file in a memory pool DB_MPOOLFILE->get Get page from a file in a memory pool DB_MPOOLFILE->open Open a file in a memory pool DB_MPOOLFILE->put Return a page to a memory pool DB_MPOOLFILE->set Set memory pool page status DB_MPOOLFILE->sync Flush pages from a file in a memory pool DB_MPOOLFILE->set_clear_len Set file page bytes to be cleared DB_MPOOLFILE->set_fileid Set file unique identifier DB_MPOOLFILE->set_ftype Set file type DB_MPOOLFILE->set_lsn_offset Set file log-sequence-number offset DB_MPOOLFILE->set_pgcookie Set file cookie for pgin/pgout-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-transaction"></a>30.2.6.3.13. Transaction Subsystem</h5></div></div><div></div></div>
<!--DB_ENV->set_tx_max Set maximum number of transactions DB_ENV->set_tx_timestamp Set recovery timestamp DB_ENV->txn_checkpoint Checkpoint the transaction subsystem DB_ENV->txn_recover Distributed transaction recovery DB_ENV->txn_stat Return transaction subsystem statistics DB_TXN->abort Abort a transaction DB_TXN->commit Commit a transaction DB_TXN->discard Discard a prepared but not resolved transaction handle DB_TXN->id Return a transaction's ID DB_TXN->prepare Prepare a transaction for commit DB_TXN->set_timeout Set transaction timeout-->
<div class="variablelist"><dl><dt><tt class="sexp">(BDB:TXN-BEGIN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :PARENT :DIRTY-READ :NOSYNC :NOWAIT :SYNC)</tt></dt><dd>Begin a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_begin.html" target="_top"><tt class="function">DB_ENV-&gt;txn_begin</tt></a>).
</dd><dt><tt class="sexp">(BDB:TXN-ABORT txn)</tt></dt><dd>Abort a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_abort.html" target="_top"><tt class="function">DB_TXN-&gt;abort</tt></a>).
</dd><dt><tt class="sexp">(BDB:TXN-COMMIT txn <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   :NOSYNC :SYNC)</tt></dt><dd>Commit a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_commit.html" target="_top"><tt class="function">DB_TXN-&gt;commit</tt></a>).
</dd><dt><tt class="sexp">(BDB:TXN-DISCARD txn)</tt></dt><dd>Discard a transaction (<a href="http://www.sleepycat.com/docs/api_c/txn_discard.html" target="_top"><tt class="function">DB_TXN-&gt;discard</tt></a>).
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="bdb-replication"></a>30.2.6.3.14. Replication</h5></div></div><div></div></div>
<!--DB_ENV->set_rep_transport Configure replication transport DB_ENV->rep_elect Hold a replication election DB_ENV->set_rep_limit Limit data sent in response to a single message DB_ENV->rep_process_message Process a replication message DB_ENV->rep_start Configure an environment for replication DB_ENV->rep_stat Replication statistics-->
<div class="variablelist"><dl><dt><tt class="sexp">()</tt></dt><dd></dd></dl></div></div>
<!--<section id="bdb-"><title></title> <variablelist> <varlistentry><term><literal role="sexp">()</literal></term> <listitem><simpara></simpara></listitem></varlistentry> </variablelist> </section>-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="regexp"></a>30.2.6.4. <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="#regexp" title="30.2.6.4.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><strong class="package">“<span class="quote">REGEXP</span>”</strong></a> module</h4></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#re-example">30.2.6.4.1. Example</a></span></dt></dl></div><p>The <a href="#regexp" title="30.2.6.4.&#xA0;CLISP &#x201C;REGEXP&#x201D; module"><strong class="package">“<span class="quote">REGEXP</span>”</strong></a> module implements the
 <a href="regexp.html" target="_top">POSIX regular expressions</a>
by calling the standard <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> system facilities.
The syntax of these <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>s is described in many places,
such as your local <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">regex.h</tt></a> manual and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> info pages.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:REGEXP</tt>.</p><div class="variablelist"><a id="re-api"></a><p class="title"><b>API</b></p><dl><dt><a id="re-match"></a><tt class="sexp">(<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> <i class="replaceable"><tt>pattern</tt></i> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt> <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd><p>This macro returns as first value a <tt class="classname">REGEXP:MATCH</tt> structure
  containing the indices of the start and end of the first match for the
  <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <i class="replaceable"><tt>pattern</tt></i> in <i class="replaceable"><tt>string</tt></i>; or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if there is no match.
  Additionally, a <tt class="classname">REGEXP:MATCH</tt> structure is returned for every matched
  <tt class="literal">"\(...\)"</tt> group in <i class="replaceable"><tt>pattern</tt></i>, in the
  order that the open parentheses appear in <i class="replaceable"><tt>pattern</tt></i>.
  If <i class="replaceable"><tt>start</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the search starts at that index in <i class="replaceable"><tt>string</tt></i>.
  If <i class="replaceable"><tt>end</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, only <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><tt class="function">SUBSEQ</tt></a>
  <i class="replaceable"><tt>string</tt></i> <i class="replaceable"><tt>start</tt></i> <i class="replaceable"><tt>end</tt></i>)</tt> is considered.
  </p><div class="example"><a id="ex-re-match"></a><p class="title"><b>Example 30.1. <a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly.")
     <tt class="sexp">#S(<tt class="classname">REGEXP:MATCH</tt> :START 4 :END 9)</tt>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8)
     <tt class="sexp">#S(<tt class="classname">REGEXP:MATCH</tt> :START 27 :END 32)</tt>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8 :end 30)
     <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    (<a href="#re-match"><tt class="function">REGEXP:MATCH</tt></a> "\\([a-z]*\\)[0-9]*\\(bar\\)" "foo12bar")
     <tt class="sexp">#S(<tt class="classname">REGEXP:MATCH</tt> :START 0 :END 8) ;</tt>
     <tt class="sexp">#S(<tt class="classname">REGEXP:MATCH</tt> :START 0 :END 3) ;</tt>
     <tt class="sexp">#S(<tt class="classname">REGEXP:MATCH</tt> :START 5 :END 8)</tt>
  </pre></td></tr></table></div><p>
</p></dd><dt><a id="re-match-access"></a><tt class="sexp">(<a href="#re-match-access"><tt class="function">REGEXP:MATCH-START</tt></a> <i class="replaceable"><tt>match</tt></i>)</tt><br /><tt class="sexp">(<a href="#re-match-access"><tt class="function">REGEXP:MATCH-END</tt></a> <i class="replaceable"><tt>match</tt></i>)</tt></dt><dd>Return the start and end the <i class="replaceable"><tt>match</tt></i>; <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able.
</dd><dt><a id="re-match-string"></a><tt class="sexp">(<a href="#re-match-string"><tt class="function">REGEXP:MATCH-STRING</tt></a> <i class="replaceable"><tt>string</tt></i> <i class="replaceable"><tt>match</tt></i>)</tt></dt><dd>Extracts the substring of <i class="replaceable"><tt>string</tt></i> corresponding
  to the given pair of start and end indices of <i class="replaceable"><tt>match</tt></i>.
  The result is shared with <i class="replaceable"><tt>string</tt></i>.
  If you want a freshly consed <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>, use <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><tt class="function">COPY-SEQ</tt></a> or
  <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><tt class="function">COERCE</tt></a> (<a href="#re-match-string"><tt class="function">REGEXP:MATCH-STRING</tt></a> ...)
  '<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><tt class="classname">SIMPLE-STRING</tt></a>)</tt>.
</dd><dt><a id="re-regexp-quote"></a><tt class="sexp">(<a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
   <i class="replaceable"><tt>extended</tt></i>)</tt></dt><dd><p>This function returns a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
  that matches exactly <i class="replaceable"><tt>string</tt></i> and nothing else.
  This allows you to request an exact string match when calling a
  function that wants a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>.
  </p><div class="example"><a id="ex-re-quote"></a><p class="title"><b>Example 30.2. <a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a></b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
    (regexp-quote "^The cat$")
     <span class="returnvalue">"\\^The cat\\$"</span>
   </pre></td></tr></table></div><p>
  One use of <a href="#re-regexp-quote"><tt class="function">REGEXP:REGEXP-QUOTE</tt></a> is to combine an exact string match with
  context described as a <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a>.
  When <i class="replaceable"><tt>extended</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, also
  quote <span class="keysym">#\+</span> and <span class="keysym">#\?</span>.
</p></dd><dt><a id="re-regexp-compile"></a><tt class="sexp">(<a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
   <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a>)</tt></dt><dd>Compile the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <i class="replaceable"><tt>string</tt></i> into an
  object suitable for <a href="#re-regexp-exec"><tt class="function">REGEXP:REGEXP-EXEC</tt></a>.</dd><dt><a id="re-regexp-exec"></a><tt class="sexp">(<a href="#re-regexp-exec"><tt class="function">REGEXP:REGEXP-EXEC</tt></a> <i class="replaceable"><tt>pattern</tt></i> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
     (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd><p>Execute the <i class="replaceable"><tt>pattern</tt></i>, which must be a compiled
   <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> returned by <a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a>, against the
   appropriate portion of the <i class="replaceable"><tt>string</tt></i>.</p><p>Negative <i class="replaceable"><tt>end</tt></i> means <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><tt class="function">+</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
    <i class="replaceable"><tt>string</tt></i>) <i class="replaceable"><tt>end</tt></i>)</tt></p><p>Returns <tt class="classname">REGEXP:MATCH</tt> structures as multiple values (one for each
   subexpression which successfully matched and one for the whole pattern),
   unless <tt class="literal">:BOOLEAN</tt> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case
   return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> as an indicator of success, but do not allocate anything.
</p></dd><dt><a id="re-regexp-split"></a><tt class="sexp">(<a href="#re-regexp-split"><tt class="function">REGEXP:REGEXP-SPLIT</tt></a>  <i class="replaceable"><tt>pattern</tt></i> <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
     (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt> <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)</tt></dt><dd>Return a list of substrings of <i class="replaceable"><tt>string</tt></i> (all
  sharing the structure with <i class="replaceable"><tt>string</tt></i>) separated by <i class="replaceable"><tt>pattern</tt></i> (a
  <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html" target="_top">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a return value of <a href="#re-regexp-compile"><tt class="function">REGEXP:REGEXP-COMPILE</tt></a>)
 </dd><dt><a id="re-with-loop-split"></a><tt class="sexp">(<a href="#re-with-loop-split"><tt class="function">REGEXP:WITH-LOOP-SPLIT</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>stream</tt></i> <i class="replaceable"><tt>pattern</tt></i>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (<tt class="constant">:START</tt> 0) <tt class="constant">:END</tt> <a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a> <a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a>)
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd>Read lines from <i class="replaceable"><tt>stream</tt></i>, split them with
  <a href="#re-regexp-split"><tt class="function">REGEXP:REGEXP-SPLIT</tt></a> on <i class="replaceable"><tt>pattern</tt></i>, and bind the resulting list to
  <i class="replaceable"><tt>variable</tt></i>.</dd><dt><a id="re-cflags"></a><a href="#re-cflags"><tt class="constant">:EXTENDED</tt> <tt class="constant">:IGNORE-CASE</tt> <tt class="constant">:NEWLINE</tt> <tt class="constant">:NOSUB</tt></a></dt><dd>These options control compilation of a pattern.
   See <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">regex.h</tt></a> for their meaning.
</dd><dt><a id="re-eflags"></a><a href="#re-eflags"><tt class="constant">:NOTBOL</tt> <tt class="constant">:NOTEOL</tt></a></dt><dd>These options constrol execution of a pattern.
   See <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">regex.h</tt></a> for their meaning.
</dd><dt><a id="re-matcher"></a><a href="#re-matcher"><tt class="function">REGEXP:REGEXP-MATCHER</tt></a></dt><dd>A valid value for <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>.
   This will work only when your <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">locale</a> is <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>
   because <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> uses <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a> internally and POSIX constrains
   <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html" target="_top"><tt class="filename">regex.h</tt></a> to use the current <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html" target="_top">locale</a>.
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="re-example"></a>30.2.6.4.1. Example</h5></div></div><div></div></div><p>The following code computes the number of people who use a
 particular shell:</p><div class="example"><a id="re-example-lisp"></a><p class="title"><b>Example 30.3. shell-count.lisp</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/usr/local/bin/clisp -C
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "REGEXP-TEST" (:use "LISP" "REGEXP"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "REGEXP-TEST")
(let ((h (make-hash-table :test #'equal :size 10)) (n 0))
  (with-open-file (f "/etc/passwd")
    (with-loop-split (s f ":")
      (incf (gethash (seventh s) h 0))))
  (with-hash-table-iterator (i h)
    (loop (multiple-value-bind (r k v) (i)
            (unless r (return))
            (format t "[~d] ~s~30t== ~5:d~%" (incf n) k v)))))
</pre></td></tr></table></div><p>For comparison, the same can be done by the following <a href="http://www.perl.com" target="_top"><span><b class="command">Perl</b></span></a>:</p><div class="example"><a id="re-example-perl"></a><p class="title"><b>Example 30.4. shell-count.perl</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/usr/local/bin/perl -w

use diagnostics;
use strict;

my $IN = $ARGV[0];
open(INF,"&lt; $IN") || die "$0: cannot read file [$IN]: $!\n;";
my %hash;
while (&lt;INF&gt;) {
  chop;
  my @all = split($ARGV[1]);
  my $shell = ($#all &gt;= 6 ? $all[6] : "");
  if ($hash{$shell}) { $hash{$shell} ++; }
  else { $hash{$shell} = 1; }
}
my $ii = 0;
for my $kk (keys(%hash)) {
  print "[",++$ii,"] \"",$kk,"\"  --  ",$hash{$kk},"\n";
}
close(INF);
</pre></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="pcre"></a>30.2.6.5. Perl Compatible Regular Expressions.</h4></div></div><div></div></div><p>This is an interface to <a href="http://www.pcre.org/" target="_top">Perl
  Compatible Regular Expressions</a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:PCRE</tt>.</p><div class="variablelist"><a id="pcre-api"></a><p class="title"><b>PCRE module API</b></p><dl><dt><a id="pcre-version"></a><tt class="sexp">(PCRE:PCRE-VERSION)</tt></dt><dd>Return version information as 3 values: descriptive
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> and 2 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s: major and minor numbers.
 </dd><dt><a id="pcre-config"></a><tt class="sexp">(PCRE:PCRE-CONFIG <i class="replaceable"><tt>type</tt></i>)</tt></dt><dd>Return some information about the PCRE build
    configuration (<i class="replaceable"><tt>type</tt></i> is one of <tt class="literal">:UTF8</tt>
    <tt class="literal">:NEWLINE</tt> <tt class="literal">:LINK-SIZE</tt>
    <tt class="literal">:POSIX-MALLOC-THRESHOLD</tt>
    <tt class="literal">:MATCH-LIMIT</tt>).</dd><dt><a id="pcre-compile"></a><tt class="sexp">(PCRE:PCRE-COMPILE <i class="replaceable"><tt>string</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :STUDY :IGNORE-CASE :MULTILINE :DOTALL :EXTENDED :ANCHORED
    :DOLLAR-ENDONLY :EXTRA :NOTBOL :NOTEOL :UNGREADY :NOTEMPTY
    :NO-AUTO-CAPTURE)</tt></dt><dd>Compile a pattern, optionally study it.
 </dd><dt><a id="pattern-info"></a>
   <tt class="sexp">(PCRE:PATTERN-INFO <i class="replaceable"><tt>pattern</tt></i>
    request)</tt></dt><dd>Return some information about the <i class="replaceable"><tt>pattern</tt></i>,
    such as <tt class="literal">:OPTIONS</tt> <tt class="literal">:SIZE</tt>
    <tt class="literal">:CAPTURECOUNT</tt> <tt class="literal">:BACKREFMAX</tt>
    <tt class="literal">:FIRSTBYTE</tt> <tt class="literal">:FIRSTTABLE</tt>
    <tt class="literal">:LASTLITERAL</tt> <tt class="literal">:NAMEENTRYSIZE</tt>
    <tt class="literal">:NAMECOUNT</tt> <tt class="literal">:NAMETABLE</tt>
    <tt class="literal">:STUDYSIZE</tt>.</dd><dt><a id="pcre-name-to-index"></a><tt class="sexp">(PCRE:PCRE-NAME-TO-INDEX
    <i class="replaceable"><tt>pattern</tt></i> <i class="replaceable"><tt>name</tt></i>)</tt></dt><dd>Convert the name of the sub-pattern to an index in
    the return vector.</dd><dt><a id="pcre-exec"></a><tt class="sexp">(PCRE:PCRE-EXEC <i class="replaceable"><tt>pattern</tt></i> <i class="replaceable"><tt>string</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :BOOLEAN :OFFSET :ANCHORED :NOTBOL :NOTEOL
    :NOTEMPTY)</tt></dt><dd>Execute the compiled <i class="replaceable"><tt>pattern</tt></i> against the
    <i class="replaceable"><tt>string</tt></i> at the given <i class="replaceable"><tt>offset</tt></i> with the given options.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if no matches or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> of <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><tt class="function">LENGTH</tt></a>
    <tt class="literal">CAPTURECOUNT+1</tt> of <span class="type">PCRE:MATCH</span> structures,
    unless <tt class="literal">:BOOLEAN</tt> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, in which case
    return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> as an indicator of success, but do not allocate anything.
 </dd><dt><a id="pcre-match-access"></a><tt class="sexp">(PCRE:MATCH-START <i class="replaceable"><tt>match</tt></i>)</tt><br /><tt class="sexp">(PCRE:MATCH-END <i class="replaceable"><tt>match</tt></i>)</tt></dt><dd>Return the start and end of the <i class="replaceable"><tt>match</tt></i>. <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>-able.
 </dd><dt><a id="match-substring"></a><tt class="sexp">(PCRE:MATCH-SUBSTRING
    <i class="replaceable"><tt>match</tt></i> <i class="replaceable"><tt>string</tt></i>)</tt></dt><dd>Return the substring of <i class="replaceable"><tt>string</tt></i> bounded by <i class="replaceable"><tt>match</tt></i>.
 </dd><dt><a id="match-strings"></a><tt class="sexp">(PCRE:MATCH-STRINGS
    return-vector <i class="replaceable"><tt>string</tt></i>)</tt></dt><dd>Return all substrings for all matches found
    by <tt class="function">PCRE:PCRE-EXEC</tt>.
 </dd><dt><a id="match-string"></a><tt class="sexp">(PCRE:MATCH-STRING return-vector which
    <i class="replaceable"><tt>string</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>pattern</tt></i>)</tt></dt><dd>Return the substring that matches the given sub-pattern.
    If <i class="replaceable"><tt>which</tt></i> is a name of the sub-pattern (as
    opposed to its number), <i class="replaceable"><tt>pattern</tt></i> must be supplied.
 </dd><dt><a id="pcre-matcher"></a><tt class="sexp">(PCRE:PCRE-MATCHER <i class="replaceable"><tt>pattern</tt></i>)</tt></dt><dd>A valid value for <a href="#apropos" title="25.2.11.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><tt class="varname">CUSTOM:*APROPOS-MATCHER*</tt></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="syscalls"></a>30.2.6.6. System Calls</h4></div></div><div></div></div><p>The <a href="#syscalls" title="30.2.6.6.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a> module makes some system calls available from lisp.
 Not all of these system calls are actually POSIX, so this package has a
 nickname <strong class="package">“<span class="quote">OS</span>”</strong>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:SYSCALLS</tt>.</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">POSIX:RESOLVE-HOST-IPADDR</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>host</tt></i>)</tt></dt><dd>Returns the <span class="type">HOSTENT</span> structure (name,
   list of aliases, list of IP addresses as dotted quads (for IPv4) or
   coloned octets (for IPv6), address type - IPv4 or IPv6).
   When <i class="replaceable"><tt>host</tt></i> is omitted or <tt class="constant">:DEFAULT</tt>, return the data for the
   current host. When <i class="replaceable"><tt>host</tt></i> is given and is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, all the
   host database is returned as a list (this would be the contents of the
   <tt class="filename">/etc/hosts</tt> file on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system or
   <tt class="filename">${windir}/system32/etc/hosts</tt> on a Win32 system).
   This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html" target="_top"><tt class="function">gethostbyname</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html" target="_top"><tt class="function">gethostbyaddr</tt></a>.
  </dd><dt><a id="file-stat"></a><tt class="sexp">(<tt class="function">POSIX:FILE-STAT</tt> <i class="replaceable"><tt>pathname</tt></i>
      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>link-p</tt></i>)</tt></dt><dd><p>Return the <span class="type">FILE-STAT</span> structure.
   <i class="replaceable"><tt>pathname</tt></i> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system, meaning <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>).
   The first slot of the structure returned is the string or the
   number on which <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html" target="_top"><tt class="function">stat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html" target="_top"><tt class="function">fstat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html" target="_top"><tt class="function">lstat</tt></a> was called.
   The other slots are numbers, members of the <span class="type">struct stat</span>:
    </p><div class="variablelist"><dl><dt>dev</dt><dd>Device ID of device containing file.
     </dd><dt>ino</dt><dd>File serial number.
     </dd><dt>mode</dt><dd>Mode of file.
     </dd><dt>nlink</dt><dd>Number of hard links to the file.
     </dd><dt>uid</dt><dd>User ID of file.
     </dd><dt>gid</dt><dd>Group ID of file.
     </dd><dt>rdev</dt><dd>Device ID (if file is character or block
        special).</dd><dt>size</dt><dd>For regular files, the file size in bytes.
        For symbolic links, the length in bytes of the pathname contained
        in the symbolic link.
        For a shared memory object, the length in bytes.
        For a typed memory object, the length in bytes.
        For other file types, the use of this field is unspecified.
     </dd><dt>atime</dt><dd>Time of last access (as the number of seconds
        since 1900-01-01).</dd><dt>mtime</dt><dd>Time of last data modification (as the number of
        seconds since 1900-01-01).</dd><dt>ctime</dt><dd>Time of last status change (as the number of
        seconds since 1900-01-01).</dd><dt>blksize</dt><dd>A file system-specific preferred I/O block size
        for this object.  In some file system types, this may vary from
        file to file.</dd><dt>blocks</dt><dd>Number of blocks allocated for this object.
     </dd></dl></div><p>
    All slots are read-only.
   </p><p>If the system does not support a particular
    field (e.g., <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> prior to 2000 does not have hard links), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
    (or the default, like 1 for the number of hard links for old
    <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt><a id="stat-vfs"></a><tt class="sexp">(<tt class="function">POSIX:STAT-VFS</tt>
    <i class="replaceable"><tt>pathname</tt></i>)</tt></dt><dd><p>Return the <span class="type">STAT-VFS</span> structure.
   <i class="replaceable"><tt>pathname</tt></i> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system, meaning <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>).
   The first slot of the structure returned is the string
   or the number on which <a href="http://www.opengroup.org/onlinepubs/007904975/functions/statvfs.html" target="_top"><tt class="function">statvfs</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/fstatvfs.html" target="_top"><tt class="function">fstatvfs</tt></a> was called.
   The other slots are members of the <span class="type">struct statvfs</span>:
   </p><div class="variablelist"><dl><dt>bsize</dt><dd>File system block size.
    </dd><dt>frsize</dt><dd>Fundamental file system block size.
    </dd><dt>blocks</dt><dd>Total number of blocks on file system in units
       of <tt class="literal">frsize</tt>.</dd><dt>bfree</dt><dd>Total number of free blocks.
    </dd><dt>bavail</dt><dd>Number of free blocks available to
       non-privileged processes.</dd><dt>files</dt><dd>Total number of file serial numbers.
    </dd><dt>ffree</dt><dd>Total number of free file serial numbers.
    </dd><dt>favail</dt><dd>Number of file serial numbers available to
       non-privileged processes.</dd><dt>fsid</dt><dd>File system ID.</dd><dt>flag</dt><dd>List of platform-dependent values, such as <tt class="constant">:READ-ONLY</tt>.
    </dd><dt>namemax</dt><dd>Maximum filename length.
   </dd></dl></div><p>
   All slots are read-only.
  </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt><a id="file-info"></a><tt class="sexp">(<tt class="function">OS:FILE-INFO</tt>
    <i class="replaceable"><tt>pathname</tt></i>)</tt></dt><dd><p>Return the <span class="type">FILE-INFO</span> structure.
   <i class="replaceable"><tt>pathname</tt></i> should be a <a href="#path-des">pathname designator</a>. The 8 slots are attributes, ctime,
   atime, wtime, high and low sizes, name and short name.
   </p><p>[<a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="sexp">(<tt class="function">POSIX:USER-DATA</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>user</tt></i>)</tt></dt><dd><p>Return the <span class="type">PASSWD</span> structure (name,
   encoded password, UID, GID, full name, home directory, shell).
   When <i class="replaceable"><tt>user</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return all users.
   When <i class="replaceable"><tt>user</tt></i> is <tt class="constant">:DEFAULT</tt> or
   not supplied, return the information about the current user.
   If the system does not support a particular field (e.g., Win32 does
   not have a concept of a shell), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (or the default, like
   <tt class="filename">c:\command.com</tt> for DOS) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="sexp">(<tt class="function">POSIX:UNAME</tt>)</tt></dt><dd>Return a structure describing the OS, derived from
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html" target="_top"><tt class="function">uname</tt></a>.</dd><dt><tt class="sexp">(<tt class="function">POSIX:SYSCONF</tt>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:CONFSTR</tt>)</tt></dt><dd>Return a structure describing the system
    configuration, derived from <a href="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html" target="_top"><tt class="function">sysconf</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/confstr.html" target="_top"><tt class="function">confstr</tt></a> respectively.
 </dd><dt><tt class="sexp">(<tt class="function">POSIX:LIMITS</tt>)</tt></dt><dd>Return a structure describing the resource limits,
    derived from <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html" target="_top"><tt class="function">getrlimit</tt></a>.</dd><dt><tt class="sexp">(<tt class="function">POSIX:USAGE</tt>)</tt></dt><dd>Return 2 structures describing the resource usage by
    the lisp process and its children, derived from <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html" target="_top"><tt class="function">getrusage</tt></a>.
  </dd><dt><tt class="sexp">(<tt class="function">POSIX:ERF</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:ERFC</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:J0</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:J1</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:JN</tt>
       <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:Y0</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:Y1</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:YN</tt>
       <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:GAMMA</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br /><tt class="sexp">(<tt class="function">POSIX:LGAMMA</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt></dt><dd>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in libm.so.  Please note that these functions do not
   provide lisp-style error handling and precision, and do all the
   computations at the double float level.
 </dd><dt><a id="stream-lock"></a>
   <tt class="sexp">(<tt class="function">POSIX:STREAM-LOCK</tt> <i class="replaceable"><tt>stream</tt></i>
    <i class="replaceable"><tt>lock-p</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    (:BLOCK <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>) (:SHARED <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>) (:START 0) (:END <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>))</tt></dt><dd>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/fcntl.html" target="_top"><tt class="function">fcntl</tt></a> system call.
   It sets or removes a file lock for the (portion of the) file associated
   with <i class="replaceable"><tt>stream</tt></i>, depending on <i class="replaceable"><tt>lock-p</tt></i>.
   When <i class="replaceable"><tt>block</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the call is non-blocking,
   and when the file is already locked, it <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
   When <i class="replaceable"><tt>shared</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   then lock can be shared between several callers.
   Several processes can set a <i class="replaceable"><tt>shared</tt></i>
   (i.e., <span class="emphasis"><em>read</em></span>) lock, but only one can set
   an <span class="emphasis"><em>exclusive</em></span> (i.e., <span class="emphasis"><em>write</em></span>,
   or non-<i class="replaceable"><tt>shared</tt></i>) lock.
 </dd><dt>
   <tt class="sexp">(<tt class="function">POSIX:COPY-FILE</tt>
    <i class="replaceable"><tt>source-path</tt></i>
    <i class="replaceable"><tt>destination-path</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</tt></dt><dd><p>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html" target="_top"><tt class="function">symlink</tt></a>
    (when <i class="replaceable"><tt>method</tt></i> is <tt class="constant">:SYMLINK</tt>),
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/link.html" target="_top"><tt class="function">link</tt></a> (when it is <tt class="constant">:HARDLINK</tt>), and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html" target="_top"><tt class="function">rename</tt></a>
    (when it is <tt class="constant">:RENAME</tt>) system calls, as well as,
    you guessed it, a generic file copy utility
    (when <i class="replaceable"><tt>method</tt></i> is <tt class="constant">:COPY</tt>).
   </p><p>Both <i class="replaceable"><tt>source-path</tt></i> and
    <i class="replaceable"><tt>destination-path</tt></i> may be wild.
 </p></dd><dt>
   <tt class="sexp">(<tt class="function">POSIX:DUPLICATE-HANDLE</tt>
    <i class="replaceable"><tt>fd1</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>fd2</tt></i>)</tt></dt><dd>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html" target="_top"><tt class="function">dup/dup2</tt></a> system calls on
   <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems and to <tt class="function">DuplicateHandle</tt> system
   call on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>.</dd><dt><tt class="sexp">(OS:SHORTCUT-INFO
    <i class="replaceable"><tt>pathname</tt></i>)</tt></dt><dd>Return information about a <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> shortcut
    (<tt class="filename">#P".lnk"</tt>) file contents in a
    <span class="type">SHORTCUT-INFO</span> structure.</dd><dt><tt class="sexp">(OS:MAKE-SHORTCUT
    <i class="replaceable"><tt>pathname</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :WORKING-DIRECTORY :ARGUMENTS :SHOW-COMMAND :ICON
    :DESCRIPTION :HOT-KEY :PATH)</tt></dt><dd>Create (or modify the properties of an existing one)
    a <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> shortcut (<tt class="filename">#P".lnk"</tt>) file.
 </dd><dt><tt class="sexp">(OS:SYSTEM-INFO)</tt></dt><dd>Return <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> system information in a
    <span class="type">SYSTEM-INFO</span> structure.</dd><dt><tt class="sexp">(OS:VERSION)</tt></dt><dd>Return <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> version information in a
    <span class="type">VERSION</span> structure.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="oracle"></a>30.2.6.7. <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h4></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ora-functionality">30.2.6.7.1. Functions and Macros in
  package ORACLE</a></span></dt><dt><span class="section"><a href="#ora-example">30.2.6.7.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">30.2.6.7.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">30.2.6.7.4. Building the Oracle Interface</a></span></dt></dl></div><p>
The <a href="http://www.oracle.com" target="_top">Oracle</a> module allows a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> program to act as client to an
<a href="http://www.oracle.com" target="_top">Oracle</a> database server.  The module includes full
SQL support, transactions (including auto-commit), support for most
<a href="http://www.oracle.com" target="_top">Oracle</a> data types (LONG, BLOB, CLOB, RAW, etc.), automatic conversion
between <a href="http://www.oracle.com" target="_top">Oracle</a> and <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> data types, database connection caching and
retry, concurrent connections to multiple databases, proper handling
of <a href="http://www.oracle.com" target="_top">Oracle</a> errors, and more.  </p><p>The module can be used to build sophisticated <a href="http://www.oracle.com" target="_top">Oracle</a> database
applications in <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:ORACLE</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ora-functionality"></a>30.2.6.7.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></h5></div></div><div></div></div><p>Access to <a href="http://www.oracle.com" target="_top">Oracle</a> is via these functions and macros in
package <strong class="package">“<span class="quote">ORACLE</span>”</strong>.
When any <a href="http://www.oracle.com" target="_top">Oracle</a> function fails, the general Lisp function
<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a> is called, with the condition string set to
include the <a href="http://www.oracle.com" target="_top">Oracle</a> error number, the <a href="http://www.oracle.com" target="_top">Oracle</a> message text,
and other context of the error (e.g., the text and parse location of a
SQL query).</p>
<!--List of functions an macros-->
<div class="variablelist">
<!--CONNECT--><dl><dt><tt class="sexp">(ORACLE:CONNECT
<i class="replaceable"><tt>user</tt></i>
<i class="replaceable"><tt>password</tt></i>
<i class="replaceable"><tt>server</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>schema</tt></i>
<i class="replaceable"><tt>auto-commit</tt></i>
<i class="replaceable"><tt>prefetch-buffer-bytes</tt></i>
<i class="replaceable"><tt>long-len</tt></i>
<i class="replaceable"><tt>truncate-ok</tt></i>)</tt></dt><dd><p>

Connect to an <a href="http://www.oracle.com" target="_top">Oracle</a> database.  All subsequent operations will affect
this database until the next call to <tt class="function">CONNECT</tt>.  A
single program can access different <a href="http://www.oracle.com" target="_top">Oracle</a> schemas concurrently by
repeated calls to <tt class="function">CONNECT</tt>.  Database connections
are cached and re-used: if you call <tt class="function">CONNECT</tt> again
with the same <i class="replaceable"><tt>user</tt></i>,
<i class="replaceable"><tt>schema</tt></i>, and
<i class="replaceable"><tt>server</tt></i>, the previous <a href="http://www.oracle.com" target="_top">Oracle</a> connection will
be re-used.  <tt class="function">CONNECT</tt> may not be called inside
<tt class="function">WITH-TRANSACTION</tt>.

Returns: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if a cached connection was re-used, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if a new
connection was created (and cached).

The meaning of the arguments is as follows:
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Argument</th><th>Meaning</th></tr></thead><tbody><tr><td><i class="replaceable"><tt>user</tt></i></td><td><a href="http://www.oracle.com" target="_top">Oracle</a> user ID</td></tr><tr><td><i class="replaceable"><tt>password</tt></i></td><td>Password for user, or NIL if
<i class="replaceable"><tt>user</tt></i> has no password (!)</td></tr><tr><td><i class="replaceable"><tt>server</tt></i></td><td><a href="http://www.oracle.com" target="_top">Oracle</a> server ID (SID)</td></tr><tr><td><i class="replaceable"><tt>schema</tt></i></td><td><a href="http://www.oracle.com" target="_top">Oracle</a>
default schema (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>).  If null, same as user.  This allows
you to log on with one user's id/password but see the database as if
you were some other user.</td></tr><tr><td><i class="replaceable"><tt>auto-commit</tt></i></td><td>Flag: whether to commit after every operation (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>).
Set this to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if you intend to do transactions and call
<tt class="function">COMMIT</tt> explicitly.  However,
<tt class="function">WITH-TRANSACTION</tt> is probably
easier.</td></tr><tr><td><i class="replaceable"><tt>prefetch-buffer-bytes</tt></i></td><td>Number of bytes to cache from SQL SELECT fetches (default: 64
Kbytes) If you are very short of memory, or have a slow connection to
<a href="http://www.oracle.com" target="_top">Oracle</a>, you can reduce this to 10k or so.  Alternatively, if you
have a fast connection to <a href="http://www.oracle.com" target="_top">Oracle</a> and regularly do large queries, you
can increase throughput by increasing this value.</td></tr><tr><td><i class="replaceable"><tt>long-len</tt></i></td><td>Number
of bytes to fetch for "long" (LONG, [BC]LOB) types.  Long data that
exceeds this size will raise an error, or be truncated depending on
the value of <i class="replaceable"><tt>truncate-ok</tt></i> (below).  Setting
<i class="replaceable"><tt>long-len</tt></i> to zero and
<i class="replaceable"><tt>truncate-ok</tt></i> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
will disable long fetching entirely.  If
<i class="replaceable"><tt>long-len</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or negative, defaults
to 500k bytes.</td></tr><tr><td><i class="replaceable"><tt>truncate-ok</tt></i></td><td>Flag:
if set, allow truncation of LONG columns to
<i class="replaceable"><tt>long-len</tt></i> bytes on fetch; otherwise, fetches
of LONG columns exceeding <i class="replaceable"><tt>long-len</tt></i> bytes
will raise an error.  Default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</td></tr></tbody></table></div><p>
</p></dd>
<!--DISCONNECT--><dt><tt class="sexp">(ORACLE:DISCONNECT)</tt></dt><dd>
Disconnect from the database currently connected.  No more calls can
be made until <tt class="function">CONNECT</tt> is called again.  The
connection is closed and removed from the connection cache.  Does
nothing if there is no connection.  <tt class="function">DISCONNECT</tt>
may not be called inside <tt class="function">WITH-TRANSACTION</tt>.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd>
<!--RUN-SQL--><dt><tt class="sexp">(ORACLE:RUN-SQL
<i class="replaceable"><tt>sql</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>params</tt></i>
<i class="replaceable"><tt>is-select</tt></i>)</tt></dt><dd><p>

Execute a SQL statement.  Must be <tt class="function">CONNECT</tt>ed to a
database.  Returns the number of rows affected by the SQL operation,
for non-SELECT statements, zero for SELECT statements.  For
destructive database operations (INSERT, UPDATE, DELETE), the results
are committed to the database immediately if
<i class="replaceable"><tt>auto-commit</tt></i> when establishing the current
connection; see <tt class="function">CONNECT</tt>.  The meaning of the
arguments is as follows: </p><p>
</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Argument</th><th>Meaning</th></tr></thead><tbody><tr><td><i class="replaceable"><tt>sql</tt></i></td><td>
Text of SQL statement, as a string.  The <i class="replaceable"><tt>sql</tt></i>
statement may contain <a href="http://www.oracle.com" target="_top">Oracle</a> "named
parameters," e.g. ":myparam" whose values will be substituted
from the parameters given in <i class="replaceable"><tt>params</tt></i>.
</td></tr><tr><td><i class="replaceable"><tt>params</tt></i></td><td>
A mapping of the names of the bind-parameters in the query to their
values.  The set of named parameters in the query must match exactly the keys
mapped by <i class="replaceable"><tt>params</tt></i>.  The mapping may be passed as either (1) a hash
table whose keys are the named parameters or (2) a list of pairs,
((name value) (name value) ...).  Parameter values passed from Lisp are converted
to the appropriate <a href="http://www.oracle.com" target="_top">Oracle</a> data types (see <tt class="function">FETCH</tt>).
</td></tr><tr><td><i class="replaceable"><tt>is-select</tt></i></td><td>
Flag: whether the statement is a SELECT query.  You usually do not
need to set this as it is detected by default based on the SQL text.
However, there are situations, such as when a SELECT query begins with
comment, that you need to specify it explicitly.
</td></tr></tbody></table></div><p>
</p></dd>
<!--DO-ROWS--><dt><tt class="sexp">(ORACLE:DO-ROWS
<i class="replaceable"><tt>vars</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a>
<i class="replaceable"><tt>body</tt></i>)</tt></dt><dd><p>
Macro which loops over a SQL SELECT
result, evaluating, for each row in the result, the forms in
<i class="replaceable"><tt>body</tt></i>,
binding symbols given in <i class="replaceable"><tt>vars</tt></i>
to corresponding database columns in the SELECT result.
The argument <i class="replaceable"><tt>vars</tt></i> must be a non-empty list
of symbols matching a subset of the columns of an active SELECT query.
If a SELECT column is an <a href="http://www.oracle.com" target="_top">Oracle</a> expression such as
<tt class="literal">SUBSTR(mycol, 1, 10)</tt>, it is
recommended to use a column alias, e.g., <tt class="literal">SELECT SUBSTR(mycol, 1, 10) AS
myvar</tt>, in which case the column alias will be used as the symbol
bound to the column value.
</p><p>As <tt class="function">DO-ROWS</tt> expands into a <a href="http://www.lisp.org/HyperSpec/Body/mac_docm_dost.html" target="_top"><tt class="function">DO*</tt></a> loop,
it may be terminated prematurely, before all rows are fetched, by
using <a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><tt class="function">RETURN</tt></a> anywhere in <i class="replaceable"><tt>body</tt></i>.
</p><p>
It is allowed to call <tt class="function">CONNECT</tt> in the
<i class="replaceable"><tt>body</tt></i> of the loop, but only to switch the
connection to a database other than the one that was used to
do the SELECT.  This is useful for reading from one database while
writing to another.
</p><p>

In <i class="replaceable"><tt>vars</tt></i>, instead of a single symbol, a pair
(<i class="replaceable"><tt>bound-var</tt></i>
<i class="replaceable"><tt>"column-name"</tt></i>) may be specified, which will
cause values from the SELECTed column or alias ,
<i class="replaceable"><tt>column-name</tt></i>, to be bound to Lisp variable,
<i class="replaceable"><tt>bound-var</tt></i>.  This is for unusual cases where
a Lisp variable cannot be created with the same name as the column (e.g., a
column named "T"), or when it is inconvenient or impossible to alias
the column with <tt class="literal">SELECT ... AS</tt>.

</p></dd>
<!--FETCH--><dt><tt class="sexp">(ORACLE:FETCH
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>result-type</tt></i>)</tt></dt><dd><p>

Fetch a single row of data.  Returns a row of values corresponding to
the columns of an active SELECT statment.  The row data is returned in
one of three different forms, depending on the value of the symbol
<i class="replaceable"><tt>result-type</tt></i>:

</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Value of <i class="replaceable"><tt>result-type</tt></i></th><th>Returned result</th></tr></thead><tbody><tr><td><tt class="classname">ARRAY</tt></td><td>
Values will be returned in an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><tt class="classname">ARRAY</tt></a> with the same number of
columns as in the SELECT statement, in the same order.
This is the default.
</td></tr><tr><td><tt class="classname">PAIRS</tt></td><td>
A list of pairs, <tt class="literal">((column, value) ...)</tt> is be returned.  The
number and order of pairs is the same as the columns in the
SELECT statement.
</td></tr><tr><td><tt class="classname">HASH</tt></td><td>
A <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><tt class="classname">HASH-TABLE</tt></a> whose keys are the column names and whose values
are the column values in the row.  The SELECT columns <span class="emphasis"><em>must
be unique</em></span> and be valid Lisp symbols to use this option. If
you are SELECTing an expression, you probably want to use a column
alias: <tt class="literal">SELECT &lt;expr&gt; AS some_alias ...</tt></td></tr></tbody></table></div><p>

The following data type conversions are done between <a href="http://www.oracle.com" target="_top">Oracle</a> datatypes and
<a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> data types:

</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th><a href="http://www.oracle.com" target="_top">Oracle</a> type</th><th>Converts to/from <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> type</th></tr></thead><tbody><tr><td>Numeric (NUMBER, INTEGER, FLOAT)</td><td>
The appropriate <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> numeric type (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><tt class="classname">BIGNUM</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><tt class="classname">FLOAT</tt></a>)
</td></tr><tr><td>String (CHAR, VARCHAR, VARCHAR2)</td><td>
A <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> string.  Note that CHAR will be padded out to its full, fixed length as
defined in <a href="http://www.oracle.com" target="_top">Oracle</a>; VARCHAR will be a string of variable length.  Also note
that <a href="http://www.oracle.com" target="_top">Oracle</a> has no "zero-length string" value -- it returns the SQL special
value <tt class="constant">NULL</tt> which is converted to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (see below).
</td></tr><tr><td>DATE</td><td>
A string of the form "YYYY-MM-DD HH:MM:SS" where HH is 24-hour form.  If you want
dates formatted differently, convert them to strings in <a href="http://www.oracle.com" target="_top">Oracle</a> using
<tt class="literal">SELECT TO_CHAR(mydate, '<i class="replaceable"><tt>template</tt></i>') AS mydate</tt>; the result will then
be returned as a string, formatted as per <i class="replaceable"><tt>template</tt></i>.
</td></tr><tr><td>RAW, LONG RAW</td><td>
A hexadecimal string, with two hex digits for each byte of <a href="http://www.oracle.com" target="_top">Oracle</a> data.
Note that this means the Lisp string will be twice the size, in bytes, as the <a href="http://www.oracle.com" target="_top">Oracle</a> data.
</td></tr><tr><td>"Large" types (LONG, BLOB, CLOB)</td><td>
A Lisp string of (arbitrary, possibly binary) data.  Note that truncation may
occur; see the <tt class="function">CONNECT</tt> parameters <i class="replaceable"><tt>long-len</tt></i>
and <i class="replaceable"><tt>truncate-ok</tt></i>.
</td></tr><tr><td><tt class="constant">NULL</tt></td><td>
The <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> value <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td></tr></tbody></table></div><p>

</p></dd>
<!--FETCH-ALL--><dt><tt class="sexp">(ORACLE:FETCH-ALL
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>max-rows</tt></i>
<i class="replaceable"><tt>result-type</tt></i>
<i class="replaceable"><tt>item-type</tt></i>)</tt></dt><dd><p>

Fetch some or all the rows from a query and return result as a
sequence of sequences.  Arguments are all optional:
<i class="replaceable"><tt>max-rows</tt></i> limits the result to
that numbers of rows;
<i class="replaceable"><tt>result-type</tt></i> is the type of
sequence of the rows, either
'<tt class="classname">ARRAY</tt> (the default) or
'<tt class="classname">LIST</tt>;
<i class="replaceable"><tt>item-type</tt></i> is the type of
sequence of the column values for each row, either
'<tt class="classname">ARRAY</tt> (the default) or
'<tt class="classname">LIST</tt>.
Each row fetched always contains the full set of column values SELECTed.
</p><p>
<tt class="function">FETCH-ALL</tt> is often useful in conjunction with
<tt class="function">MAP</tt> or <tt class="function">REDUCE</tt> to iterate
over an entire SELECT result to construct a single Lisp value.

</p></dd>
<!--PEEK--><dt><tt class="sexp">(ORACLE:PEEK
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>result-type</tt></i>)</tt></dt><dd>

Peek at next row of data (without fetching it).  Returns a row ala
<tt class="function">FETCH</tt>, except does not advance to the next row.
Repeated calls to <tt class="function">PEEK</tt> will thus return the same
row of data.  Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if at EOF.  If data is available, returns
row data just as <tt class="function">FETCH</tt> (see
<tt class="function">FETCH</tt> for data format and conversions done).
Optional argument <i class="replaceable"><tt>result-type</tt></i> is the type
of sequence of the column values for the returned row, either
'<tt class="classname">ARRAY</tt> (the default) or
'<tt class="classname">LIST</tt>.  <tt class="function">PEEK</tt> is a useful look-ahead
for database reporting functions that may need to "break" on changes in
data to print headers, summaries, etc.
</dd>
<!--COLUMNS--><dt><tt class="sexp">(ORACLE:COLUMNS)</tt></dt><dd><p>
Returns information on the columns of a SELECT result, in the form of an array of
SQLCOL structures, one for each result column in the most
recent SELECT statement.  It is not necessary to have called
<tt class="function">FETCH</tt> before requesting column information on
the query, however the query must have been compiled and executed
with <tt class="function">RUN-SQL</tt>.
Each SQLCOL structure has these slots:
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>SQLCOL Slot Name</th><th>Meaning</th></tr></thead><tbody><tr><td>NAME</td><td>The <a href="http://www.oracle.com" target="_top">Oracle</a> column name or the expression selected.  If the
query used a column alias, <tt class="literal">SELECT <i class="replaceable"><tt>expr</tt></i> AS
<i class="replaceable"><tt>alias</tt></i></tt>, then
<i class="replaceable"><tt>alias</tt></i> will be returned as the column name.
</td></tr><tr><td>TYPE</td><td><a href="http://www.oracle.com" target="_top">Oracle</a> data type (VARCHAR, NUMBER, DATE, ...)</td></tr><tr><td>SIZE</td><td><a href="http://www.oracle.com" target="_top">Oracle</a> data length (useful mostly for character types)</td></tr><tr><td>SCALE</td><td>For numeric types, number of digits to right of decimal</td></tr><tr><td>PRECISION</td><td>For numeric types, total number of significant digits</td></tr><tr><td>NULL_OK</td><td><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <tt class="constant">NULL</tt>s allowed, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <tt class="constant">NULL</tt>s are not allowed.</td></tr></tbody></table></div><p>
To access the values of the SQLCOL structures, use the standard accessor functions, e.g.,
<tt class="literal">(ORACLE:SQLCOL-NAME (elt (ORACLE:COLUMNS) 0))</tt>
</p></dd>
<!--EOF--><dt><tt class="sexp">(ORACLE:EOF)</tt></dt><dd>
Returns EOF status.  A SELECT query cursor is considered at EOF if the next
FETCH would return no data.  Must be connected to a database, and have
an active SELECT statement.
</dd>
<!--INSERT-ROW--><dt><tt class="sexp">(ORACLE:INSERT-ROW
<i class="replaceable"><tt>table</tt></i>
<i class="replaceable"><tt>values</tt></i>)</tt></dt><dd>
Inserts a single row into <i class="replaceable"><tt>table</tt></i>.
Second argument <i class="replaceable"><tt>values</tt></i> is a map of
column names to values: either a hash table whose keys are the column
names, or a list of (name, value) pairs.  Columns missing from the map
will be given the default <a href="http://www.oracle.com" target="_top">Oracle</a> value, or <tt class="constant">NULL</tt>.
Returns the number of rows inserted (i.e., always 1).
</dd>
<!--UPDATE-ROW--><dt><tt class="sexp">(ORACLE:UPDATE-ROW
<i class="replaceable"><tt>table</tt></i>
<i class="replaceable"><tt>condition</tt></i>
<i class="replaceable"><tt>vals</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
<i class="replaceable"><tt>params</tt></i>)</tt></dt><dd>
Updates rows in <i class="replaceable"><tt>table</tt></i>.  Second argument
<i class="replaceable"><tt>condition</tt></i> is a string expression for a WHERE
clause (without the "WHERE") which determines which rows are updated.
Third argument <i class="replaceable"><tt>vals</tt></i> is a map of columns to
be updated to their new values: a hash table whose keys are column
names, or list of (name, value) pairs.  Optional
<i class="replaceable"><tt>params</tt></i> specifies values for named
parameters that may occur in <i class="replaceable"><tt>condition</tt></i>,
e.g., when the condition is a match on a primary key, e.g.: <tt class="literal">"pk_column
= :pk_val"</tt>.  Returns the number of rows updated.
</dd>
<!--ROW-COUNT--><dt><tt class="sexp">(ORACLE:ROW-COUNT)</tt></dt><dd>
For SELECT statements, returns the number of rows
<tt class="function">FETCH</tt>ed (<span class="emphasis"><em>not</em></span>
<tt class="function">PEEK</tt>ed) so far.  For other statements (e.g.,
INSERT, UPDATE, DELETE), returns the number of rows affected by the
last operation (e.g., inserted, updated, deleted).  Must be connected
to a database and have an active SQL statement.
</dd>
<!--WITH-TRANSACTION--><dt><tt class="sexp">(ORACLE:WITH-TRANSACTION
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a>
<i class="replaceable"><tt>body</tt></i>)</tt></dt><dd>

Evaluates the forms in <i class="replaceable"><tt>body</tt></i> atomically as a
database transaction, ensuring that either all the database operations
done in <i class="replaceable"><tt>body</tt></i> complete successfully, or none
of them do.  If pending (un-committed) changes exist when this macro
is entered, they are <span class="emphasis"><em>rolled back</em></span> (undone), so
that the database is affected only by the subsequent updates inside
<i class="replaceable"><tt>body</tt></i>.  Nesting of
<tt class="function">WITH-TRANSACTION</tt> blocks is not allowed and will
raise an error.  There is no effect on the status of
<i class="replaceable"><tt>auto-commit</tt></i> given in
<tt class="function">CONNECT</tt>; it resumes its previous state when the
macro exits.  The value of the <tt class="function">WITH-TRANSACTION</tt>
expression is that of the last form in <i class="replaceable"><tt>body</tt></i>.
</dd>
<!--COMMIT--><dt><tt class="sexp">(ORACLE:COMMIT)</tt></dt><dd>
Commits (makes permanent) any pending changes to the database.  The
<i class="replaceable"><tt>auto-commit</tt></i> parameter to
<tt class="function">CONNECT</tt> must not have been set to use this
function, nor can it be called inside a
<tt class="function">WITH-TRANSACTION</tt> block. Always returns NIL.
</dd>
<!--ROLLBACK--><dt><tt class="sexp">(ORACLE:ROLLBACK)</tt></dt><dd>
Rolls back (undoes and abandons) any pending changes to the database.
The <i class="replaceable"><tt>auto-commit</tt></i> parameter to
<tt class="function">CONNECT</tt> must not have been set to use this
function, nor can it be called inside a
<tt class="function">WITH-TRANSACTION</tt> block. Always returns NIL.
</dd>
<!--AUTO-COMMIT--><dt><tt class="sexp">(ORACLE:AUTO-COMMIT)</tt></dt><dd>
Toggles the state of <i class="replaceable"><tt>auto-commit</tt></i> initially
given to <tt class="function">CONNECT</tt> for the current connection.
With <i class="replaceable"><tt>auto-commit</tt></i> enabled, modifications to
the database are committed (made permanent) after each destructive SQL
operation made with calls to <tt class="function">RUN-SQL</tt>,
<tt class="function">INSERT-ROW</tt>, <tt class="function">UPDATE_ROW</tt>, etc.
With <i class="replaceable"><tt>auto-commit</tt></i> disabled, transactional
integrity is under the programmer's control and is managed either by
(1) explicitly calling <tt class="function">COMMIT</tt> or
<tt class="function">ROLLBACK</tt> to commit or undo the pending
operations, or (2) wrapping code blocks with database operations
inside the <tt class="function">WITH-TRANSACTION</tt> macro.
<tt class="function">AUTO-COMMIT</tt> returns the previous status of
<i class="replaceable"><tt>auto-commit</tt></i>.
<tt class="function">AUTO-COMMIT</tt> may not be called inside
<tt class="function">WITH-TRANSACTION</tt>.
</dd>
<!--=-=-==-=-==-=-==-=-==-=-==-=-= End of functions section-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ora-example"></a>30.2.6.7.2. <a href="http://www.oracle.com" target="_top">Oracle</a> Example</h5></div></div><div></div></div><p>
Below is a simple example script which uses <a href="http://www.oracle.com" target="_top">Oracle</a>'s demo database
schema, <tt class="literal">SCOTT</tt>.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(setf server "orcl") ; Change this to your server's SID
(oracle:connect "scott" "tiger" server)

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "NEWACCT")) '(("acctval" "ACCOUNTING")))

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "ACCOUNTING")) '(("acctval" "NEWACCT")))
</pre></td></tr></table><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ora-config"></a>30.2.6.7.3. <a href="http://www.oracle.com" target="_top">Oracle</a> Configuration</h5></div></div><div></div></div><p>
Obviously, a working <a href="http://www.oracle.com" target="_top">Oracle</a> environment is required.  It is
recommended that you first be able to log on and use the <a href="http://www.oracle.com" target="_top">Oracle</a>
SQL*Plus application to test your environment
<span class="emphasis"><em>before</em></span> attempting <a href="http://www.oracle.com" target="_top">Oracle</a> access via the
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> module.
At a minimum you will need to set environment variables
<tt class="envar">ORACLE_HOME</tt> to the <a href="http://www.oracle.com" target="_top">Oracle</a> base directory and
<tt class="envar">LD_LIBRARY_PATH</tt> to include
<tt class="literal">$<tt class="envar">ORACLE_HOME</tt>/lib</tt> and possibly other
directories.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ora-build"></a>30.2.6.7.4. Building the <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h5></div></div><div></div></div><p>
The module uses the <a href="http://www.oracle.com" target="_top">Oracle</a> Call Interface (<a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a>) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> library.  To
build the module you will need the <a href="http://www.oracle.com" target="_top">Oracle</a> <a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a> headers and link
libraries; as a quick check, make sure you have the file <tt class="filename">oci.h</tt>
somewhere under <tt class="filename">$ORACLE_HOME</tt>,
probably in <tt class="filename">$ORACLE_HOME/rdbms/demo/oci.h</tt>
</p><p>

To build the module into <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, specify
<span><b class="command">./configure ... --with-module=oracle ...</b></span>
at build time.  Thereafter, to
load the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> linking set which contains the module, you need to run
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> as
<span><b class="command">clisp ... -K full ...</b></span>.
You can test that you really have the <a href="http://www.oracle.com" target="_top">Oracle</a>-enabled <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> by
evaluating <tt class="sexp">(describe 'oracle:connect)</tt>
It may be necessary to edit the Makefile in the
<tt class="filename">modules/oracle</tt> subdirectory of the distribution
prior to running <span><b class="command">./configure</b></span>.


</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="fastcgi"></a>30.2.6.8. The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h4></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fcgi-overview">30.2.6.8.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">30.2.6.8.2. Functions in Package FASTCGI</a></span></dt><dt><span class="section"><a href="#fcgi-example">30.2.6.8.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">30.2.6.8.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></div><p>
The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> module speeds up <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> CGI
scripts launched by a Web server.  Working with a
<a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server such as <a href="http://www.apache.org/" target="_top">Apache</a> with
<a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> program using the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol will run many times faster than a conventional CGI program.
The performance improvements stem from the fact that the script's
process remains running across <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> requests, eliminating startup
overhead and allowing for caching of data structures and other resources.  This
is the same approach used is in other languages (e.g., <a href="http://perl.apache.org" target="_top">mod_perl</a> for Perl).  </p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><tt class="varname">*FEATURES*</tt></a> contains the
 symbol <tt class="constant">:FASTCGI</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="fcgi-overview"></a>30.2.6.8.1. Overview of <a href="http://www.fastcgi.com" target="_top">FastCGI</a></h5></div></div><div></div></div><p>
Traditional CGI programs work by doing input/output with the Web
server via the following channels:
</p><div class="orderedlist"><ol type="1"><li>
Examining environment variables; e.g., <tt class="envar">HTTP_USER_AGENT</tt> is the
variable set by the Web server to name the browser used
</li><li>
Reading from standard input.  E.g., to get input data in a "method=POST" request
</li><li>
Writing an <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> response document (usually "Content-type:
text/html") to the standard output, for eventual transmission
back to the browser client
</li><li>
Writing error messages to the standard error, usually captured
by the Web server and logged in its log files.
</li></ol></div><p>
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> involves replacing calls the standard routines to do
the above with calls in the <strong class="package">“<span class="quote">FASTCGI</span>”</strong> package.  These calls will then
work exactly as before when the program is invoked as a CGI, but will
also work when invoked by a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server.
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> programs persist across <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> requests, and thus incur
startup overhead costs only once.  For Lisp Web programs, this overhead
can be substantial: code must be
compiled and loaded, files and databases must be opened, etc.  Further,
because the program stays running from <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> request to <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> request,
it can cache information in memory such as database connections
or large in-memory data structures.

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="fcgi-functionality"></a>30.2.6.8.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></h5></div></div><div></div></div><p>Access to
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> is via these functions in package <strong class="package">“<span class="quote">FASTCGI</span>”</strong>.

</p><div class="variablelist">
<!--IS-CGI--><dl><dt><tt class="sexp">(FASTCGI:IS-CGI)</tt></dt><dd>
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> program has been launched as a traditional
CGI rather than in <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.  In traditional CGI, program I/O is
via operating system environment variables and standard file streams.
Under <a href="http://www.fastcgi.com" target="_top">FastCGI</a>, I/O is done directly with the Web server via
the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> protocol.
</dd>
<!--ACCEPT--><dt>
<tt class="sexp">(FASTCGI:ACCEPT)</tt> <i class="replaceable"><tt>cgi-forms</tt></i>
<tt class="sexp">(FASTCGI:FINISH)</tt>
</dt><dd><p>
In <a href="http://www.fastcgi.com" target="_top">FastCGI</a> mode, the program loops,
<tt class="function">ACCEPT</tt>ing to begin the execution of an <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a>
request, and <tt class="function">FINISH</tt>ing to signal that the script
is finished writing its response to the <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> request.  <tt class="function">ACCEPT</tt>
blocks until the next <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> request comes in, returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if there is
a new request to handle, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if no more <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> requests will
occur, usually because the Web server itself has terminated, in which
case the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> server loop should also exit.
</p><p>
A typical <a href="http://www.fastcgi.com" target="_top">FastCGI</a> top-level server loop looks like:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">    (do ()
	((not (fastcgi:accept)))
	(run-my-script)
        (fastcgi:finish))
</pre></td></tr></table><p>

</p></dd>
<!--GETENV--><dt><tt class="sexp">(FASTCGI:GETENV
<i class="replaceable"><tt>varname</tt></i>)</tt></dt><dd>
Use in place of <a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a> to get the value of the environment variable
named <i class="replaceable"><tt>varname</tt></i>, which should be a string.
Unlike <a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a>, which accesses the actual host operating system environment,
<tt class="function">FASTCGI:GETENV</tt> obtains its environment via
the Web server, over its FastCGI communications channel.
For more information, see the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Web site.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if <i class="replaceable"><tt>varname</tt></i> is not defined in
the operating system environment.  See <a href="http://www.cgi101.com/class/ch3/text.html" target="_top">here</a> for a
list of useful variables.  You must first have called
<tt class="function">ACCEPT</tt> and not yet have called
<tt class="function">FINISH</tt>.  </dd>
<!--WRITE-STDOUT--><dt><tt class="sexp">(FASTCGI:WRITE-STDOUT
<i class="replaceable"><tt>string</tt></i>)</tt></dt><dd>
Use in place of standard Lisp calls which print to standard output
(i.e., as part of the <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> response).
You must first have called <tt class="function">ACCEPT</tt> and not yet have
called <tt class="function">FINISH</tt>.
</dd>
<!--WRITE-STDERR--><dt><tt class="sexp">(FASTCGI:WRITE-STDERR
<i class="replaceable"><tt>string</tt></i>)</tt></dt><dd>
Use in place of standard Lisp calls which print to
standard error. Rather than being part of
the <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> response, data written to standard error are usually
collected by the Web server in its error log.  This is useful
for diagnostic purposes.
</dd>
<!--SLURP-STDIN--><dt><tt class="sexp">(FASTCGI:SLURP-STDIN)</tt></dt><dd>
Reads in the entirety of standard input and returns it as a string.
This is usually done for <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> requests with
<tt class="literal">METHOD="post"</tt>, when the data are passed to the CGI
script via standard input rather than via the environment variable
<tt class="envar">QUERY_STRING</tt>.  There is no way to read standard input
in pieces, which could be a problem, say, for <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a> uploads of very large files.
</dd>
<!--OUT-->
<dt><tt class="sexp">(FASTCGI:OUT
<i class="replaceable"><tt>tree</tt></i>)</tt></dt><dd>
Like <tt class="function">WRITE-STDOUT</tt>, except that
<i class="replaceable"><tt>tree</tt></i>
may be an arbitrarily nested list structure containing (at the leaves)
numbers and strings.  For example,
<tt class="literal">(FASTCGI:OUT '("foo" (" " 10 " " 20)))</tt>
will write the string <tt class="literal">"foo 10 20"</tt>.  This function
is useful when building strings in memory for display.
</dd></dl></div><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="fcgi-example"></a>30.2.6.8.3. <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Example</h5></div></div><div></div></div><p>

Below is a simple example CGI script using <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">#!/usr/local/bin/clisp -q -K full

(defun newline () (format nil "~%"))
(do ((count 1 (1+ count)))
	((not (fastcgi:accept)) nil)

    (fastcgi:out "Content-type: text/plain" (newline) (newline))
    (fastcgi:out
     "I am running in mode: " (if (fastcgi:is-cgi) "CGI" "FastCGI") (newline)
     "This is execution no.: " count (newline)
     "The browser string is '" (fastcgi:getenv "HTTP_USER_AGENT") "'" (newline))

    (fastcgi:finish))
</pre></td></tr></table><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="fcgi-build"></a>30.2.6.8.4. Building and configuring the
  <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h5></div></div><div></div></div><p>
It is necessary to download the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> developers' kit, build it,
and install it, before building <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> with <a href="http://www.fastcgi.com" target="_top">FastCGI</a> support.
You also need to upgrade your Web server to speak the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol.  For <a href="http://www.apache.org/" target="_top">Apache</a> this means building in <a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, either statically
or dynamically, and then adding a line to your <a href="http://www.apache.org/" target="_top">Apache</a> config like:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">    Addhandler fastcgi-script .fcgi
</pre></td></tr></table><p>
After that, you can convert <tt class="filename">foo.cgi</tt> by linking it
to a script names <tt class="filename">foo.fcgi</tt>.  Since a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
script is also a valid CGI script, it can be run unmodified in either
mode.
</p></div></div></div></div>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dffi"></a>30.3. Extensions-2.3. The Foreign Function Call Facility</h2></div><div><h3 class="subtitle">Platform dependent: many <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms
only.</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-overview">30.3.1. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">30.3.2. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">30.3.3. The choice of the <span><b class="command">C</b></span> flavor.</a></span></dt><dt><span class="section"><a href="#dffi-variables">30.3.4. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">30.3.5. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">30.3.6. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">30.3.7. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">30.3.8. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">30.3.9. Examples</a></span></dt></dl></div><p>A foreign function description is written as a Lisp file, and when
 compiled it produces a <tt class="filename">#P".c"</tt> file which is then compiled by the
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler and may be linked together with
 <tt class="filename">lisp.a</tt>.</p><p>All symbols relating to the foreign function interface are
 exported from the package <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.  To use them,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> "FFI")</tt>.</p><p>Special <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms may appear anywhere in the Lisp file.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-overview"></a>30.3.1. Overview</h3></div></div><div></div></div><p>These are the special <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms.  We have taken a pragmatic
 approach: the only foreign languages we support for now are <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
 and ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>.</p><div class="variablelist"><p class="title"><b>special <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms; <i class="replaceable"><tt>name</tt></i> is any Lisp
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>; <i class="replaceable"><tt>c-name</tt></i> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>.</b></p><dl><dt><a id="def-c-type"></a><tt class="sexp">(<a href="#def-c-type"><tt class="function">FFI:DEF-C-TYPE</tt></a> <i class="replaceable"><tt>name</tt></i> <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>This form makes <i class="replaceable"><tt>name</tt></i> a shortcut for <i class="replaceable"><tt>c-type</tt></i>.
   Note that <i class="replaceable"><tt>c-type</tt></i> may already refer to name.
   Forward declarations of types are not possible, however.
</dd><dt><a id="def-c-var"></a><tt class="sexp">(<a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a> <i class="replaceable"><tt>name</tt></i>
   {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd><div class="informaltable"><a id="def-c-var-bnf"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="left"><i class="replaceable"><tt>option</tt></i> ::==</th><th align="left"> </th><th align="left"> </th></tr></thead><tbody><tr><td align="left"> </td><td align="left"> </td><td align="left"><tt class="sexp">(<tt class="constant">:NAME</tt>
   <i class="replaceable"><tt>c-name</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:TYPE</tt>
  <i class="replaceable"><tt>c-type</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:READ-ONLY</tt>
  <i class="replaceable"><tt>boolean</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(:ALLOC
  <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(:LIBRARY
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>)</tt></td></tr></tbody></table></div><p>This form defines a <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>.  <i class="replaceable"><tt>name</tt></i> is the Lisp
 name, a regular Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>.</p><p>The <tt class="constant">:NAME</tt> option specifies the name, as seen from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>,
 as a string.  If not specified, it is derived from the print name of
 the Lisp name.</p><p>The <tt class="constant">:TYPE</tt> option specifies the variable's foreign type.</p><p>If the <tt class="constant">:READ-ONLY</tt> option is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 it will be impossible to change the variable's value from within Lisp
 (using <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> or similar).</p><p>The <tt class="constant">:ALLOC</tt> option can be either <tt class="constant">:NONE</tt>
 or <tt class="constant">:MALLOC-FREE</tt> and defaults to <tt class="constant">:NONE</tt>.  If it is <tt class="constant">:MALLOC-FREE</tt>,
 any values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>, <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a>
 within the foreign value are assumed to be pointers to
 <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>-allocated storage, and when <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> replaces an old value by a
 new one, the old storage is freed using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> and the new storage
 allocated using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>.  If it is <tt class="constant">:NONE</tt>, <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> assumes that the
 pointers point to good storage (not <tt class="constant">NULL</tt>!) and overwrites the old
 values by the new ones.  This is dangerous (just think of overwriting a
 string with a longer one or storing some data in a <tt class="constant">NULL</tt> pointer...)
 and deprecated.</p><p><tt class="constant">:LIBRARY</tt> is the (optional) dynamic library
 which contains the variable.</p></dd><dt><a id="def-call-out"></a><tt class="sexp">(<a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>
              <i class="replaceable"><tt>name</tt></i> {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd><div class="informaltable"><a id="def-call-out-bnf"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="left"><i class="replaceable"><tt>option</tt></i> ::==</th><th align="left"> </th><th align="left"> </th></tr></thead><tbody><tr><td align="left"> </td><td align="left"> </td><td align="left"><tt class="sexp">(<tt class="constant">:NAME</tt>
   <i class="replaceable"><tt>c-name</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:ARGUMENTS</tt>
   {(<i class="replaceable"><tt>argument</tt></i> <i class="replaceable"><tt>c-type</tt></i> [<a href="#param-mode" title="30.3.8.&#xA0;Parameter Mode"><i class="replaceable"><tt>PARAM-MODE</tt></i></a> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>]])}*)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:RETURN-TYPE</tt>
   <i class="replaceable"><tt>c-type</tt></i> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>])</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a>
   <i class="replaceable"><tt>language</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(:BUILT-IN
   <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(:LIBRARY
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>)</tt></td></tr></tbody></table></div><p>This form defines a named call-out function (a foreign function
 called from Lisp: control flow temporarily leaves Lisp).  Any Lisp
 function call to <tt class="function">#'<i class="replaceable"><tt>name</tt></i></tt>
 is redirected to call the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function <i class="replaceable"><tt>c-name</tt></i>.
 <tt class="constant">:LIBRARY</tt> is the (optional) dynamic library which
 contains the function.
 When the function is a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> built-in, the full prototype will be
 output (unless suppressed by <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a>).
</p></dd><dt><a id="def-call-in"></a><tt class="sexp">(<a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>
              <i class="replaceable"><tt>name</tt></i> {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd><div class="informaltable"><a id="def-call-in-bnf"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="left"><i class="replaceable"><tt>option</tt></i> ::==</th><th align="left"> </th><th align="left"> </th></tr></thead><tbody><tr><td align="left"> </td><td align="left"> </td><td align="left"><tt class="sexp">(<tt class="constant">:NAME</tt>
   <i class="replaceable"><tt>c-name</tt></i>)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:ARGUMENTS</tt>
   {(<i class="replaceable"><tt>argument</tt></i> <i class="replaceable"><tt>c-type</tt></i> [<a href="#param-mode" title="30.3.8.&#xA0;Parameter Mode"><i class="replaceable"><tt>PARAM-MODE</tt></i></a> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>]])}*)</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:RETURN-TYPE</tt>
   <i class="replaceable"><tt>c-type</tt></i> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>])</tt></td></tr><tr><td align="left"> </td><td align="left">|</td><td align="left"><tt class="sexp">(<a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a>
   <i class="replaceable"><tt>language</tt></i>)</tt></td></tr></tbody></table></div><p>This form defines a named call-in function (i.e., a Lisp
 function called from the foreign language: control flow temporary
 enters Lisp).  Any <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function call to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function
 <i class="replaceable"><tt>c-name</tt></i> is redirected to call the <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> function
 <tt class="function">#'<i class="replaceable"><tt>name</tt></i></tt>.</p></dd><dt><a id="def-c-call-out"></a><tt class="sexp">(<a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a>
        <i class="replaceable"><tt>name</tt></i> {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd>This is equivalent to <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> with
   <a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <tt class="constant">:STDC</tt>.  <span class="emphasis"><em>deprecated</em></span>.
   </dd><dt><a id="def-c-call-in"></a><tt class="sexp">(<a href="#def-c-call-in"><tt class="function">FFI:DEF-C-CALL-IN</tt></a>
        <i class="replaceable"><tt>name</tt></i> {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd>This is equivalent to <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a> with
   <a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <tt class="constant">:STDC</tt>.  <span class="emphasis"><em>deprecated</em></span>.
   </dd><dt><a id="def-c-struct"></a><tt class="sexp">(<a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a>
   <i class="replaceable"><tt>name</tt></i> (<i class="replaceable"><tt>symbol</tt></i> <i class="replaceable"><tt>c-type</tt></i>)*)</tt></dt><dd><p>This form defines <i class="replaceable"><tt>name</tt></i> to be both a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><tt class="classname">STRUCTURE-CLASS</tt></a> and a foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type with the given slots.
  <i class="replaceable"><tt>name</tt></i> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (structure name) or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> whose <a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><tt class="function">FIRST</tt></a>
  element is the structure name and the <a href="http://www.lisp.org/HyperSpec/Body/acc_rest.html" target="_top"><tt class="function">REST</tt></a> is options.
  Two options are supported at this time:
  </p><div class="variablelist"><a id="def-c-struct-opts"></a><p class="title"><b>Options for <a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a></b></p><dl><dt><a id="def-c-struct-typedef"></a><tt class="constant">:TYPEDEF</tt></dt><dd>means that the name of this structure is a
      <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type defined with <tt class="function">typedef</tt>
      elsewhere.</dd><dt><a id="def-c-struct-external"></a><tt class="constant">:EXTERNAL</tt></dt><dd>means that this structure is defined in a
      <tt class="filename">#P".c"</tt> file that you include with, e.g.,
      <tt class="sexp">(<a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a> "#include &lt;filename.h&gt;")</tt>.
  </dd></dl></div><p>
  These options determine how the struct is written to the <tt class="filename">#P".c"</tt>.
</p></dd><dt><a id="def-c-enum"></a><tt class="sexp">(<a href="#def-c-enum"><tt class="function">FFI:DEF-C-ENUM</tt></a>
   <i class="replaceable"><tt>name</tt></i> {<i class="replaceable"><tt>symbol</tt></i> | (<i class="replaceable"><tt>symbol</tt></i> [<i class="replaceable"><tt>value</tt></i>])}*)</tt></dt><dd><p>This form defines <i class="replaceable"><tt>symbol</tt></i>s
  as constants, similarly to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> declaration <span class="type">enum {
  <i class="replaceable"><tt>symbol</tt></i> [= <i class="replaceable"><tt>value</tt></i>], ... };</span></p><p>You can use
 <tt class="sexp">(<tt class="function">FFI:ENUM-FROM-VALUE</tt> <i class="replaceable"><tt>name</tt></i>
  <i class="replaceable"><tt>value</tt></i>)</tt> and
 <tt class="sexp">(<tt class="function">FFI:ENUM-TO-VALUE</tt> <i class="replaceable"><tt>name</tt></i>
  <i class="replaceable"><tt>symbol</tt></i>)</tt> to convert between the numeric and symbolic
 representations (of course, the latter function boils down to
 <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> plus a check that the <i class="replaceable"><tt>symbol</tt></i> is indeed a constant
 defined in the <a href="#def-c-enum"><tt class="function">FFI:DEF-C-ENUM</tt></a> <i class="replaceable"><tt>name</tt></i>).</p></dd><dt><a id="c-lines"></a><tt class="sexp">(<a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a>
  <i class="replaceable"><tt>format-string</tt></i> {<i class="replaceable"><tt>argument</tt></i>}*)</tt></dt><dd>This form outputs the string <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><tt class="function">FORMAT</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> <i class="replaceable"><tt>format-string</tt></i>
    {<i class="replaceable"><tt>argument</tt></i>}*)</tt> to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> output file.
   This is a rarely needed low-level facility.
 </dd><dt><a id="element"></a><tt class="sexp">(<a href="#element"><tt class="function">FFI:ELEMENT</tt></a>
     <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>index<sub>1</sub></tt></i> ...
     <i class="replaceable"><tt>index<sub>n</sub></tt></i>)</tt></dt><dd>Array element: If <i class="replaceable"><tt>c-place</tt></i> is of foreign type
  <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <i class="replaceable"><tt>c-type</tt></i>
  (<i class="replaceable"><tt>dim<sub>1</sub></tt></i>
  ... <i class="replaceable"><tt>dim<sub>n</sub></tt></i>))</tt>
  and 0 ≤ <i class="replaceable"><tt>index<sub>1</sub></tt></i>
  &lt; <i class="replaceable"><tt>dim<sub>1</sub></tt></i>, ..., 0
  ≤ <i class="replaceable"><tt>index<sub>n</sub></tt></i> &lt;
  <i class="replaceable"><tt>dim<sub>n</sub></tt></i>, this will be
  the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><tt class="function">AREF</tt></a>
  <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>index<sub>1</sub></tt></i>
  ... <i class="replaceable"><tt>index<sub>n</sub></tt></i>)</tt> or
  <tt class="varname"><i class="replaceable"><tt>c-place</tt></i>[<i class="replaceable"><tt>index<sub>1</sub></tt></i>]...[<i class="replaceable"><tt>index<sub>n</sub></tt></i>]</tt>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <i class="replaceable"><tt>c-type</tt></i>.
  If <i class="replaceable"><tt>c-place</tt></i> is of foreign type <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <i class="replaceable"><tt>c-type</tt></i> <i class="replaceable"><tt>dim</tt></i>)</tt> and 0 ≤
  <i class="replaceable"><tt>index</tt></i> &lt; <i class="replaceable"><tt>dim</tt></i>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><tt class="function">AREF</tt></a>
  <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>index</tt></i>)</tt> or
  <tt class="varname"><i class="replaceable"><tt>c-place</tt></i>[<i class="replaceable"><tt>index</tt></i>]</tt>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <i class="replaceable"><tt>c-type</tt></i>.
</dd><dt><a id="deref"></a><tt class="sexp">(<a href="#deref"><tt class="function">FFI:DEREF</tt></a>
                <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd>Dereference pointer: If
  <i class="replaceable"><tt>c-place</tt></i> is of foreign type
  <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> <i class="replaceable"><tt>c-type</tt></i>)</tt> or
  <tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <i class="replaceable"><tt>c-type</tt></i>)</tt>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> the pointer points to.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <i class="replaceable"><tt>c-type</tt></i>.
  For <tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <i class="replaceable"><tt>c-type</tt></i>)</tt>,
  the <i class="replaceable"><tt>c-place</tt></i> may not be <tt class="constant">NULL</tt>.
</dd><dt><a id="slot"></a><tt class="sexp">(<a href="#slot"><tt class="function">FFI:SLOT</tt></a>
       <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>slot-name</tt></i>)</tt></dt><dd>Struct or union component: If <i class="replaceable"><tt>c-place</tt></i> is of
  foreign type <tt class="type">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a> <i class="replaceable"><tt>class</tt></i>
  ... (<i class="replaceable"><tt>slot-name</tt></i> <i class="replaceable"><tt>c-type</tt></i>) ...)</tt> or
  of type <tt class="type">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
  ... (<i class="replaceable"><tt>slot-name</tt></i> <i class="replaceable"><tt>c-type</tt></i>) ...)</tt>,
  this will be of type <i class="replaceable"><tt>c-type</tt></i>.
  </dd><dt><a id="cast"></a><tt class="sexp">(<a href="#cast"><tt class="function">FFI:CAST</tt></a>
           <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>Type change: A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting the same memory
  locations as the original <i class="replaceable"><tt>c-place</tt></i>, but of type <i class="replaceable"><tt>c-type</tt></i>.
 </dd><dt><a id="offset"></a><tt class="sexp">(<a href="#offset"><tt class="function">FFI:OFFSET</tt></a>
           <i class="replaceable"><tt>c-place</tt></i> <i class="replaceable"><tt>offset</tt></i> <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>Type change and displacement: return a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting
  a memory locations displaced from the original <i class="replaceable"><tt>c-place</tt></i> by an
  <i class="replaceable"><tt>offset</tt></i> counted in bytes, with type <i class="replaceable"><tt>c-type</tt></i>.
  This can be used to resize an array, e.g. of <i class="replaceable"><tt>c-type</tt></i>
  <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span> <i class="replaceable"><tt>n</tt></i>)</tt>
  via <tt class="sexp">(<a href="#offset"><tt class="function">FFI:OFFSET</tt></a> <i class="replaceable"><tt>c-place</tt></i> 0
  '(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span> <i class="replaceable"><tt>k</tt></i>))</tt>.
 </dd><dt><a id="c-var-addr"></a><tt class="sexp">(<a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a>
           <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd>Return the address of <i class="replaceable"><tt>c-place</tt></i> as a Lisp object of
  type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>.  This is useful as an argument
  to foreign functions expecting a parameter of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>.
 </dd><dt><a id="c-var-object"></a><tt class="sexp">(<a href="#c-var-object"><tt class="function">FFI:C-VAR-OBJECT</tt></a>
   <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd>Return the <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object underlying the
   <i class="replaceable"><tt>c-place</tt></i>.  This is also an acceptable argument type to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
   declaration.</dd><dt><a id="typeof"></a><tt class="sexp">(<a href="#typeof"><tt class="function">FFI:TYPEOF</tt></a>
    <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd>returns the <i class="replaceable"><tt>c-type</tt></i> corresponding to the <i class="replaceable"><tt>c-place</tt></i>.
</dd><dt><a id="sizeof"></a><tt class="sexp">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <i class="replaceable"><tt>c-type</tt></i>)</tt><br /><tt class="sexp">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type <i class="replaceable"><tt>c-type</tt></i>, measured in bytes.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type of <i class="replaceable"><tt>c-place</tt></i>, measured in bytes.
</p></dd><dt><a id="bitsizeof"></a><tt class="sexp">(<a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a> <i class="replaceable"><tt>c-type</tt></i>)</tt><br /><tt class="sexp">(<a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a> <i class="replaceable"><tt>c-place</tt></i>)</tt></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type <i class="replaceable"><tt>c-type</tt></i>, measured in bits.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type of <i class="replaceable"><tt>c-place</tt></i>, measured in bits.
</p></dd><dt><a id="fa-null"></a><tt class="sexp">(<a href="#fa-null"><tt class="function">FFI:FOREIGN-ADDRESS-NULL</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)</tt></dt><dd>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if the
  <i class="replaceable"><tt>foreign-entity</tt></i> refers to the <tt class="constant">NULL</tt> address (and thus <i class="replaceable"><tt>foreign-entity</tt></i> should
  probably not be passed to most foreign functions).
</dd><dt><a id="faddr-u"></a><tt class="sexp">(<a href="#faddr-u"><tt class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</tt></a>
   <i class="replaceable"><tt>foreign-entity</tt></i>)</tt><br /><tt class="sexp">(<a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a>
   <i class="replaceable"><tt>number</tt></i>)</tt></dt><dd><p><a href="#faddr-u"><tt class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</tt></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>
   address embodied in the Lisp object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>,
   <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>.</p><p><a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a> returns a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>
   object pointing to the given <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> address.
</p></dd><dt><a id="faddr"></a><tt class="sexp">(<a href="#faddr"><tt class="function">FFI:FOREIGN-ADDRESS</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)</tt></dt><dd><p><a href="#faddr"><tt class="function">FFI:FOREIGN-ADDRESS</tt></a> is both a type name and a
   selector/constructor function. It is the Lisp object type
   corresponding to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration, e.g. a
   call-out function with <tt class="sexp">(<tt class="constant">:RETURN-TYPE</tt>
    <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>)</tt> yields a Lisp object of type
   <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>.</p><p>The function extracts the object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>
   living within any <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object.
   If the <i class="replaceable"><tt>foreign-entity</tt></i> already is a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>, it returns it.
   If it is a <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> (e.g. a base foreign library address),
   it encapsulates it into a <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> object, as suitable
   for use with a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration.
   It does not construct addresses out of <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s,
   <a href="#faddr-u"><tt class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</tt></a> must be used for that purpose.
</p></dd><dt><a id="validp"></a><tt class="sexp">(<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)</tt><br /><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#validp"><tt class="function">FFI:VALIDP</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)
    <i class="replaceable"><tt>value</tt></i>)</tt></dt><dd><p>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the <i class="replaceable"><tt>foreign-entity</tt></i>
  (e.g. the Lisp equivalent of a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>) refers to a pointer
  which is invalid because it comes from a previous Lisp session.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if <i class="replaceable"><tt>foreign-entity</tt></i> can be used within the current Lisp process
  (thus it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for all non-foreign arguments).</p><p>You can invalidate a foreign object using
  <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt>.
  You cannot resurrect a zombie, nor can you kill a non-foreign
  object.</p></dd><dt><a id="fptr"></a><tt class="sexp">(<a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)</tt><br /><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>)
   <i class="replaceable"><tt>foreign-pointer</tt></i>)</tt></dt><dd><p><a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a> returns the <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>
   associated with the Lisp object of type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>,
   <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>, <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#fptr"><tt class="function">FFI:FOREIGN-POINTER</tt></a>)</tt>
   changes the <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> associated with the Lisp object of
   type <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a>, <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> or <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> to
   that of the other entity.
   When <i class="replaceable"><tt>foreign-pointer</tt></i> is <tt class="constant">:COPY</tt>, a fresh <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> is allocated.
   <i class="replaceable"><tt>foreign-entity</tt></i> still points to the same object. This is particularly useful
   with <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt>.
</p></dd><dt><a id="foreign-stack"></a><tt class="sexp">(<a href="#foreign-stack"><tt class="function">FFI:WITH-FOREIGN-OBJECT</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>c-type</tt></i>
      [<i class="replaceable"><tt>initarg</tt></i>]) <i class="replaceable"><tt>body</tt></i>)</tt><br /><tt class="sexp">(<a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>c-type</tt></i>
      [<i class="replaceable"><tt>initarg</tt></i>]) <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd><p>These forms allocate space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> execution
  stack, bind respectively a <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object or
  a local <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> to <i class="replaceable"><tt>variable</tt></i> and execute <i class="replaceable"><tt>body</tt></i>.</p><p>When <i class="replaceable"><tt>initarg</tt></i> is not supplied,
  they allocate space only for <tt class="sexp">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a>
  <i class="replaceable"><tt>c-type</tt></i>)</tt> bytes.  This space is filled with zeroes.  E.g.,
  using a <i class="replaceable"><tt>c-type</tt></i> of <a href="#c-string"><span class="type">FFI:C-STRING</span></a> or even <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
  (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint8</span> 32))</tt> (!) both allocate place
  for a single pointer, initialized to <tt class="constant">NULL</tt>.</p><p>When <i class="replaceable"><tt>initarg</tt></i> is supplied, they
  allocate space for an arbitrarily complex set of structures rooted in
  <i class="replaceable"><tt>c-type</tt></i>.  Therefore, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>, <tt class="sexp">#()</tt>
  and <tt class="sexp">""</tt> are your friends for creating a
  pointer to the empty arrays:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-c-var (v '(c-ptr (c-array-max uint8 32)) #())
  (setf (element (deref v) 0) 127) v)</pre></td></tr></table><p>
  <i class="replaceable"><tt>c-type</tt></i> is evaluated, making creation of variable sized buffers easy:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-c-var (fv `(c-array uint8 ,(length my-vector)) my-vector)
  (print fv))</pre></td></tr></table><p>
 </p></dd><dt><a id="foreign-stack-string"></a><tt class="sexp">(<a href="#foreign-stack-string"><tt class="function">FFI:WITH-FOREIGN-STRING</tt></a>
   (<i class="replaceable"><tt>foreign-address</tt></i> <i class="replaceable"><tt>char-count</tt></i>
    <i class="replaceable"><tt>byte-count</tt></i> <i class="replaceable"><tt>string</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <i class="replaceable"><tt>encoding</tt></i> <i class="replaceable"><tt>null-terminated-p</tt></i>
    <i class="replaceable"><tt>start</tt></i> <i class="replaceable"><tt>end</tt></i>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd><p>This forms converts a Lisp <i class="replaceable"><tt>string</tt></i> according to
   the <i class="replaceable"><tt>encoding</tt></i>, allocating space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> execution stack.
   <i class="replaceable"><tt>encoding</tt></i> can be any <a href="#encoding" title="29.4.&#xA0;Extensions-1.4. Encodings"><tt class="classname">EXT:ENCODING</tt></a>, e.g.
   <a href="#charset-UTF-16"><tt class="constant">CHARSET:UTF-16</tt></a>
   or <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>, circumventing the usual 1:1 limit imposed on
   <a href="#foreign-enc"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p><p><i class="replaceable"><tt>body</tt></i> is then executed with the three variables <i class="replaceable"><tt>foreign-address</tt></i>,
   <i class="replaceable"><tt>char-count</tt></i> and
   <i class="replaceable"><tt>byte-count</tt></i> respectively bound to an
   untyped <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> (as known from the <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> foreign
   type specification) pointing to the stack location, the number of
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s of the Lisp <i class="replaceable"><tt>string</tt></i> that were considered and the
   number of <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt> bytes that were allocated for it on the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> stack.</p><p>When <i class="replaceable"><tt>null-terminated-p</tt></i> is true,
   which is the default, a variable number of zero bytes is appended,
   depending on the encoding, e.g. 2 for <a href="#charset-UTF-8"><tt class="constant">CHARSET:UTF-8</tt></a>,
   and accounted for in <i class="replaceable"><tt>byte-count</tt></i>,
   and <i class="replaceable"><tt>char-count</tt></i> is incremented by one.</p><p>The <a href="#faddr"><tt class="classname">FFI:FOREIGN-ADDRESS</tt></a> object bound to <i class="replaceable"><tt>foreign-address</tt></i> is
   invalidated upon the exit from the form.</p><p>A stupid example (a quite costly interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/mblen.html" target="_top"><tt class="function">mblen</tt></a>):
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(with-foreign-string (fv elems bytes string
                      :encoding charset:jis... :null-terminated-p nil
                      :end 5)
 (declare (ignore fv elems))
 (format t "This string would take ~D bytes." bytes))</pre></td></tr></table><p>
</p></dd><dt><a id="c-type-parse"></a><tt class="sexp">(<a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a> <i class="replaceable"><tt>c-type</tt></i>)</tt><br /><tt class="sexp">(<a href="#c-type-parse"><tt class="function">FFI:DEPARSE-C-TYPE</tt></a> <i class="replaceable"><tt>c-type-internal</tt></i>)</tt></dt><dd>Convert between the external (<a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>) and internal
   (<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type representations (used by <a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><tt class="function">DESCRIBE</tt></a>).
</dd><dt><a id="foreign-heap"></a><tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a> <i class="replaceable"><tt>c-type</tt></i>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt><br /><tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> <i class="replaceable"><tt>c-type</tt></i> <i class="replaceable"><tt>contents</tt></i>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt><br /><tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> <i class="replaceable"><tt>foreign-entity</tt></i>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :FULL)</tt><br /><tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:FOREIGN-ALLOCATE</tt></a> <i class="replaceable"><tt>c-type-internal</tt></i>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :INITIAL-CONTENTS <tt class="constant">:COUNT</tt> <tt class="constant">:READ-ONLY</tt>)</tt></dt><dd><p>Macro <a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a> allocates
   <tt class="sexp">(<a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a> <i class="replaceable"><tt>c-type</tt></i>)</tt>
   bytes on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> heap and zeroes them out (like <a href="http://www.opengroup.org/onlinepubs/007904975/functions/calloc.html" target="_top"><tt class="function">calloc</tt></a>).
   When <tt class="constant">:COUNT</tt> is supplied, <i class="replaceable"><tt>c-type</tt></i> is substituted with
   <tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <i class="replaceable"><tt>c-type</tt></i> <i class="replaceable"><tt>count</tt></i>)</tt>,
   except when <i class="replaceable"><tt>c-type</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>, in which case
   <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> <i class="replaceable"><tt>count</tt></i>)</tt>
   is used instead.
   When <tt class="constant">:READ-ONLY</tt> is supplied, the Lisp side is prevented from modifying the
   memory contents.  This can be used as an indication that some foreign
   side is going to fill this memory (e.g. via <a href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html" target="_top"><tt class="function">read</tt></a>).</p><p>Returns a <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> object of the actual <i class="replaceable"><tt>c-type</tt></i>,
   whose address part points to the newly allocated memory.</p><p><a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> will call <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> as many times
   as necessary to build a structure on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> heap of the given
   <i class="replaceable"><tt>c-type</tt></i>, initialized from the given <i class="replaceable"><tt>contents</tt></i>.</p><p>E.g., <tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> '<a href="#c-string"><span class="type">FFI:C-STRING</span></a>
    "ABCDE")</tt> performs 2 allocations: one for a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
   pointer to a string, another for the contents of that string.
   This would be useful in conjunction with a <span class="type">char**</span>
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type declaration.  <tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-SHALLOW</tt></a>
    '<a href="#c-string"><span class="type">FFI:C-STRING</span></a>)</tt> allocates room for a single pointer
   (probably 4 bytes).</p><p><tt class="sexp">(<a href="#foreign-heap"><tt class="function">FFI:ALLOCATE-DEEP</tt></a> '<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>
    "ABCDEF" :count 10)</tt> allocates and initializes room for the
   type <tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> 10)</tt>,
   corresponding to <span class="type">char*</span> or, more specifically,
   <span class="type">char[10]</span> in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>.</p><p>Function <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> deallocates memory at the address
   held by the given <i class="replaceable"><tt>foreign-entity</tt></i>. If <tt class="constant">:FULL</tt> is supplied
   and the argument is of type <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>, recursively frees
   the whole complex stucture pointed to by this variable.</p><p>If given a <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> object that corresponds to a
   <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> callback, deallocates it.  Callbacks are automatically
   created each time you pass a Lisp function via the <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p>Use <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <a href="#validp"><tt class="function">FFI:VALIDP</tt></a>)</tt> to
   disable further references to this address from Lisp.
   This is currently not done automatically.
   If the given pointer is already invalid, <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-FREE</tt></a> (currently)
   signals an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>. This may change to make it easier to integrate
   with <a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a>.</p><p>Function <a href="#foreign-heap"><tt class="function">FFI:FOREIGN-ALLOCATE</tt></a> is a lower-level interface as it
   requires an internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type descriptor as returned by
   <a href="#c-type-parse"><tt class="function">FFI:PARSE-C-TYPE</tt></a>.</p></dd><dt><a id="with-c-place"></a><tt class="sexp">(<a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a> (<i class="replaceable"><tt>variable</tt></i> <i class="replaceable"><tt>foreign-entity</tt></i>)
   <i class="replaceable"><tt>body</tt></i>)</tt></dt><dd><p>Create a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> out of the given <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a>
  object so operations on places (e.g. <a href="#cast"><tt class="function">FFI:CAST</tt></a>, <a href="#deref"><tt class="function">FFI:DEREF</tt></a>, <a href="#slot"><tt class="function">FFI:SLOT</tt></a> etc.) can
  be used within <i class="replaceable"><tt>body</tt></i>.  <a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a> appears as a composition of
  <a href="#foreign-stack"><tt class="function">FFI:WITH-FOREIGN-OBJECT</tt></a> and <a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a>.</p><p>Such a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> can be used to access memory referenced by a <i class="replaceable"><tt>foreign-entity</tt></i>
  object:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">(setq foo (allocate-deep '(c-array uint8 3) rgb))
(with-c-place (place foo) (element place 0))</pre></td></tr></table><p>
</p></dd><dt><a id="ffi-extern-output"></a><a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a><br /><tt class="varname">FFI:*OUTPUT-C-VARIABLES*</tt></dt><dd><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will write the <span class="type">extern</span>
   declarations for foreign functions (defined with <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>) and
   foreign variables (defined with <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>) into the output <tt class="filename">#P".c"</tt>
   (when the Lisp file is compiled with <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a>)
   <span class="emphasis"><em>unless</em></span> these variables are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
   They are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> by default, so the <span class="type">extern</span>
   declarations are <span class="emphasis"><em>not</em></span> written; you are encouraged to use
   <a href="#c-lines"><tt class="function">FFI:C-LINES</tt></a> to include the appropriate <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> headers.
   Set these variables to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> if the headers are not available or
   not usable.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-types"></a>30.3.2. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types</h3></div></div><div></div></div><p>Foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types are used in the <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.
They are <span class="emphasis"><em>not</em></span> regular <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> types or <span><b class="command">CLOS</b></span> classes.</p><p>A <i class="replaceable"><tt>c-type</tt></i> is either a predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type or the name of a
 type defined by <a href="#def-c-type"><tt class="function">FFI:DEF-C-TYPE</tt></a>.</p><div class="variablelist"><p class="title"><b>the predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types (<i class="replaceable"><tt>c-type</tt></i>)</b></p><dl><dt><a id="simple-c-type"></a><i class="replaceable"><tt>simple-c-type</tt></i></dt><dd><p>the simple <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types
  </p><div class="informaltable"><a id="simple-c-type-tab"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Lisp name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> equivalent</th><th align="center">ILU
 equivalent</th><th align="center">Comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><span class="type">void</span></td><td align="center"> </td><td align="center">as a result type only</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><span class="type">int</span></td><td align="center"><span class="type">BOOLEAN</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a></td><td align="center"><span class="type">char</span></td><td align="center"><span class="type">SHORT CHARACTER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">char</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">signed char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uchar</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">short</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ushort</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">int</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">long</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ulong</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a></td><td align="center"><span class="type">unsigned long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint8</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">uint8</span></td><td align="center"><span class="type">BYTE</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint8</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">sint8</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint16</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">uint16</span></td><td align="center"><span class="type">SHORT CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint16</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">sint16</span></td><td align="center"><span class="type">SHORT INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint32</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">uint32</span></td><td align="center"><span class="type">CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint32</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">sint32</span></td><td align="center"><span class="type">INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint64</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 64)</tt></td><td align="center"><span class="type">uint64</span></td><td align="center"><span class="type">LONG CARDINAL</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><span class="type">sint64</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 64)</tt></td><td align="center"><span class="type">sint64</span></td><td align="center"><span class="type">LONG INTEGER</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SINGLE-FLOAT</tt></a></td><td align="center"><span class="type">float</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">DOUBLE-FLOAT</tt></a></td><td align="center"><span class="type">double</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div></dd><dt><a id="c-pointer"></a><a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
   <span class="type">void*</span>, an opaque pointer.
   When used as an argument, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is accepted as a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> and
   treated as <tt class="constant">NULL</tt>; when a function wants to return a <tt class="constant">NULL</tt>
   <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>, it actually returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
</dd><dt><a id="c-string"></a><a href="#c-string"><span class="type">FFI:C-STRING</span></a></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type">char*</span>, a zero-terminated string.  Its Lisp equivalent is
  a string, without the trailing zero character.
 </dd><dt><a id="c-struct"></a><tt class="type">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>
  <i class="replaceable"><tt>class</tt></i> (<i class="replaceable"><tt>ident<sub>1</sub></tt></i>
   <i class="replaceable"><tt>c-type<sub>1</sub></tt></i>) ...
  (<i class="replaceable"><tt>ident<sub>n</sub></tt></i>
   <i class="replaceable"><tt>c-type<sub>n</sub></tt></i>))</tt></dt><dd><p>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
 <span class="type">struct { <i class="replaceable"><tt>c-type<sub>1</sub></tt></i>
 <i class="replaceable"><tt>ident<sub>1</sub></tt></i>; ...;
 <i class="replaceable"><tt>c-type<sub>n</sub></tt></i>
 <i class="replaceable"><tt>ident<sub>n</sub></tt></i>; }</span>.
 Its Lisp equivalent is: if <i class="replaceable"><tt>class</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>, a
 <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>; if <i class="replaceable"><tt>class</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>, a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>;
 if <i class="replaceable"><tt>class</tt></i> is a symbol naming a structure or <span><b class="command">CLOS</b></span> class, an
 instance of this class, with slots of names
 <i class="replaceable"><tt>ident<sub>1</sub></tt></i>, ...,
 <i class="replaceable"><tt>ident<sub>n</sub></tt></i>.</p><p>
 <i class="replaceable"><tt>class</tt></i> may also be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a> (as above) and
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> of <a href="#def-c-struct"><tt class="function">FFI:DEF-C-STRUCT</tt></a> options.
 </p></dd><dt><a id="c-union"></a><tt class="type">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
  (<i class="replaceable"><tt>ident<sub>1</sub></tt></i>
   <i class="replaceable"><tt>c-type<sub>1</sub></tt></i>) ...
  (<i class="replaceable"><tt>ident<sub>n</sub></tt></i>
   <i class="replaceable"><tt>c-type<sub>n</sub></tt></i>))</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type">union { <i class="replaceable"><tt>c-type<sub>1</sub></tt></i>
  <i class="replaceable"><tt>ident<sub>1</sub></tt></i>; ...;
  <i class="replaceable"><tt>c-type<sub>n</sub></tt></i>
  <i class="replaceable"><tt>ident<sub>n</sub></tt></i>;
  }</span>.
  Conversion to and from Lisp assumes that a value is to be viewed as
  being of <i class="replaceable"><tt>c-type<sub>1</sub></tt></i>.
 </dd><dt><a id="c-array"></a><tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <i class="replaceable"><tt>c-type</tt></i> <i class="replaceable"><tt>dim<sub>1</sub></tt></i>)</tt><br /><tt class="type">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <i class="replaceable"><tt>c-type</tt></i> (<i class="replaceable"><tt>dim<sub>1</sub></tt></i> ...
   <i class="replaceable"><tt>dim<sub>n</sub></tt></i>))</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type"><i class="replaceable"><tt>c-type</tt></i> [<i class="replaceable"><tt>dim<sub>1</sub></tt></i>]
  ... [<i class="replaceable"><tt>dim<sub>n</sub></tt></i>]</span>.
  Note that when an array is passed as an argument to a function in
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, it is actually passed as a pointer; you therefore have to
  write <tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> ...))</tt> for this
  argument's type.</dd><dt><a id="c-array-max"></a><tt class="type">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <i class="replaceable"><tt>c-type</tt></i> <i class="replaceable"><tt>maxdimension</tt></i>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type"><i class="replaceable"><tt>c-type</tt></i> [<i class="replaceable"><tt>maxdimension</tt></i>]</span>, an array containing up to
  <i class="replaceable"><tt>maxdimension</tt></i> elements.
  The array is zero-terminated if it contains less than <i class="replaceable"><tt>maxdimension</tt></i> elements.
  Conversion from Lisp of an array with more than <i class="replaceable"><tt>maxdimension</tt></i> elements
  silently ignores the superfluous elements.
  </dd><dt><a id="c-function"></a><tt class="type">(<a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a> (<tt class="constant">:ARGUMENTS</tt>
      {(<i class="replaceable"><tt>argument</tt></i> <i class="replaceable"><tt>a-c-type</tt></i>
        [<a href="#param-mode" title="30.3.8.&#xA0;Parameter Mode"><i class="replaceable"><tt>PARAM-MODE</tt></i></a> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>]])}*)
    (<tt class="constant">:RETURN-TYPE</tt> <i class="replaceable"><tt>r-c-type</tt></i> [<a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a>])
    (<a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> <i class="replaceable"><tt>language</tt></i>))</tt></dt><dd>This type designates a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function that can be
  called according to the given prototype <tt class="sexp">(<i class="replaceable"><tt>r-c-type</tt></i> (*)
  (<i class="replaceable"><tt>a-c-type<sub>1</sub></tt></i>, ...))</tt>.
  Conversion between <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> functions and Lisp functions
  is transparent, and <tt class="constant">NULL</tt>/<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> is recognized and
  accepted.</dd><dt><a id="c-ptr"></a><tt class="type">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
              <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type"><i class="replaceable"><tt>c-type</tt></i> *</span>: a pointer to a single item of the given
  <i class="replaceable"><tt>c-type</tt></i>.</dd><dt><a id="c-ptr-null"></a><tt class="type">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>This type is also equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type"><i class="replaceable"><tt>c-type</tt></i> *</span>: a pointer to a single item of the given
  <i class="replaceable"><tt>c-type</tt></i>, with the exception that <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> <tt class="constant">NULL</tt> corresponds to
  Lisp <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="c-array-ptr"></a><tt class="type">(<a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> <i class="replaceable"><tt>c-type</tt></i>)</tt></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> calls
  <span class="type"><i class="replaceable"><tt>c-type</tt></i> (*)[]</span>: a pointer to a zero-terminated array of
  items of the given <i class="replaceable"><tt>c-type</tt></i>.</dd></dl></div>
<!--#ifdef UNICODE--><p><a href="#foreign-enc"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a> governs conversion for any <i class="replaceable"><tt>c-type</tt></i> involving
 <a href="#c-string"><span class="type">FFI:C-STRING</span></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a> (but not <span class="type">char</span>).</p>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="c-flavor"></a>30.3.3. The choice of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> flavor.</h3></div></div><div></div></div><p><a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a>, <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>, <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> take <a href="#c-flavor" title="30.3.3.&#xA0;The choice of the C flavor."><tt class="constant">:LANGUAGE</tt></a> argument.
The <i class="replaceable"><tt>language</tt></i> is either <tt class="constant">:C</tt> (denotes K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>) or <tt class="constant">:STDC</tt>
(denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>) or <tt class="constant">:STDC-STDCALL</tt> (denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
with the <span class="emphasis"><em>stdcall</em></span> calling convention).
It specifies whether the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function (caller or callee) has been
compiled by a K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler or by an ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler,
and possibly the calling convention.</p><p>The default language is set using the macro
 <tt class="function">FFI:DEFAULT-FOREIGN-LANGUAGE</tt>.
If this macro has not been called in the current
 <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit" target="_top">compilation
unit</a> (usually a file), a warning is issued and
<tt class="constant">:STDC</tt> is used for the rest of the unit.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-variables"></a>30.3.4. Foreign variables</h3></div></div><div></div></div><p>Foreign variables are variables whose storage is allocated in the
 foreign language module.  They can nevertheless be evaluated and
 modified through <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a>, just as normal variables can, except that the
 range of allowed values is limited according to the variable's foreign
 type.  Note that for a foreign variable <i class="replaceable"><tt>x</tt></i> the form <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> <i class="replaceable"><tt>x</tt></i> <i class="replaceable"><tt>x</tt></i>)</tt> is not necessarily true,
 since every time <i class="replaceable"><tt>x</tt></i> is evaluated its foreign value is converted to a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> Lisp value.  Foreign variables are defined using
 <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-places"></a>30.3.5. Operations on foreign places</h3></div></div><div></div></div><p>A <a href="#dffi-variables" title="30.3.4.&#xA0;Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> <i class="replaceable"><tt>name</tt></i> defined by <a href="#def-c-var"><tt class="function">FFI:DEF-C-VAR</tt></a>, <a href="#foreign-stack"><tt class="function">FFI:WITH-C-VAR</tt></a>
 or <a href="#with-c-place"><tt class="function">FFI:WITH-C-PLACE</tt></a> defines a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>,
 i.e., a form which can also be used as argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a>.
 (An "lvalue" in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> terminology.)
 The following operations are available on foreign places:
 <a href="#element"><tt class="function">FFI:ELEMENT</tt></a>, <a href="#deref"><tt class="function">FFI:DEREF</tt></a>, <a href="#slot"><tt class="function">FFI:SLOT</tt></a>, <a href="#cast"><tt class="function">FFI:CAST</tt></a>, <a href="#offset"><tt class="function">FFI:OFFSET</tt></a>, <a href="#c-var-addr"><tt class="function">FFI:C-VAR-ADDRESS</tt></a>,
 <a href="#c-var-object"><tt class="function">FFI:C-VAR-OBJECT</tt></a>, <a href="#typeof"><tt class="function">FFI:TYPEOF</tt></a>, <a href="#sizeof"><tt class="function">FFI:SIZEOF</tt></a>, <a href="#bitsizeof"><tt class="function">FFI:BITSIZEOF</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-functions"></a>30.3.6. Foreign functions</h3></div></div><div></div></div><p>Foreign functions are functions which are defined in the foreign
 language.  There are <span class="emphasis"><em>named foreign functions</em></span>
 (imported via <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a> or created via <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>) and
 <span class="emphasis"><em>anonymous foreign functions</em></span>; they arise through
 conversion of function pointers.</p><p>A <span class="emphasis"><em>"call-out"</em></span> function is a foreign function
 called from Lisp: control flow temporarily leaves Lisp.  A
 <span class="emphasis"><em>"call-in"</em></span> function is a Lisp function called from
 the foreign language: control flow temporary enters Lisp.</p><p>The following forms define foreign functions: <a href="#def-call-in"><tt class="function">FFI:DEF-CALL-IN</tt></a>,
 <a href="#def-call-out"><tt class="function">FFI:DEF-CALL-OUT</tt></a>, <a href="#def-c-call-in"><tt class="function">FFI:DEF-C-CALL-IN</tt></a>, <a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="allocation"></a>30.3.7. Argument and result passing conventions</h3></div></div><div></div></div><p>When passed to and from functions, allocation of arguments and
 results is handled as follows:</p><p>Values of <a href="#simple-c-type"><i class="replaceable"><tt>SIMPLE-C-TYPE</tt></i></a>, <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> are passed on the stack,
 with dynamic extent. The <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is effectively ignored.</p><p>Values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>, <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a>
 need storage.  The <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> specifies the allocation policy:
</p><div class="variablelist"><dl><dt><tt class="constant">:NONE</tt></dt><dd>no storage is allocated.
</dd><dt><tt class="constant">:ALLOCA</tt></dt><dd>allocation of storage on the stack, which has
   dynamic extent.</dd><dt><tt class="constant">:MALLOC-FREE</tt></dt><dd>storage will be allocated via <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and freed via
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a>.</dd></dl></div><p>If no <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is specified, the default <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is
 <tt class="constant">:NONE</tt> for most types, but <tt class="constant">:ALLOCA</tt> for <a href="#c-string"><span class="type">FFI:C-STRING</span></a> and <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> and
 <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> and <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> and for <tt class="constant">:OUT</tt> arguments. [Subject to
 change!]  The <tt class="constant">:MALLOC-FREE</tt> policy provides the ability to pass
 arbitrarily nested structs containing pointers pointing to structs
 ... within a single conversion.</p><div class="variablelist"><dl><dt>For call-out functions:</dt><dd><div class="variablelist"><dl><dt>For arguments passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp allocates the storage using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and
     never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function is supposed to call
     <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> when done with it.</dd><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:ALLOCA</tt>:</dt><dd>Lisp allocates the storage on the stack, with
     dynamic extent.  It is freed when the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function returns.
    </dd><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </dd></dl></div></dd><dt>For results passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> to Lisp:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> on it when done.
    </dd><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp does nothing.
    </dd></dl></div></dd></dl></div></dd><dt>For call-in functions:</dt><dd><div class="variablelist"><dl><dt>For arguments passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> to Lisp:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp calls <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> on it when done.
     </dd><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:ALLOCA</tt> or <tt class="constant">:NONE</tt>:</dt><dd>Lisp does nothing.
     </dd></dl></div></dd><dt>For results passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>:</dt><dd><div class="variablelist"><dl><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:MALLOC-FREE</tt>:</dt><dd>Lisp allocates the storage using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> and
      never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function is supposed to call
      <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a> when done with it.</dd><dt>If <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> is <tt class="constant">:NONE</tt>:</dt><dd>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </dd></dl></div></dd></dl></div></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="ffi-struct-arg"></a>Warning</h3><p>Passing <a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>, <a href="#c-union"><span class="type">FFI:C-UNION</span></a>,
  <a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> values as arguments (not via pointers) is
  only possible to the extent the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler supports it.
  Most <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compilers do it right, but some <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compilers
  (such as <a href="http://gcc.gnu.org/" target="_top"><span><b class="command">gcc</b></span></a> on hppa and <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>) have problems with this.
  The recommended workaround is to pass pointers; this is fully supported.
  See also this <tt class="email">&lt;<a href="mailto:clisp-list@sf.net">clisp-list@sf.net</a>&gt;</tt>
  <a href="http://article.gmane.org/gmane.lisp.clisp.devel/10089" target="_top">message</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="param-mode"></a>30.3.8. Parameter Mode</h3></div></div><div></div></div><p>A function parameter's <a href="#param-mode" title="30.3.8.&#xA0;Parameter Mode"><i class="replaceable"><tt>PARAM-MODE</tt></i></a> may be</p><div class="variablelist"><dl><dt><tt class="constant">:IN</tt> (means: read-only):</dt><dd>The caller passes information to the callee.
  </dd><dt><tt class="constant">:OUT</tt> (means: write-only):</dt><dd>The callee passes information back to the caller on
   return.  When viewed as a Lisp function, there is no Lisp argument
   corresponding to this, instead it means an additional return value.
  </dd><dt><tt class="constant">:IN-OUT</tt> (means: read-write):</dt><dd>Information is passed from the caller to the callee
   and then back to the caller.  When viewed as a Lisp function, the
   <tt class="constant">:OUT</tt> value is returned as an additional multiple value.
  </dd></dl></div><p>The default is <tt class="constant">:IN</tt>.</p><p>[Currently, only <tt class="constant">:IN</tt> is fully implemented.  <tt class="constant">:OUT</tt> works only
 with <a href="#allocation" title="30.3.7.&#xA0;Argument and result passing conventions"><i class="replaceable"><tt>ALLOCATION</tt></i></a> = <tt class="constant">:ALLOCA</tt>.]</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-examples"></a>30.3.9. Examples</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-ex-more">30.3.9.1. More examples</a></span></dt></dl></div><div class="example"><a id="dffi-simple"></a><p class="title"><b>Example 30.5. Simple declarations and access</b></p><p>The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> declaration

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct foo {
    int a;
    struct foo * b[100];
};
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct foo
  (a int)
  (b (c-array (c-ptr foo) 100)))
</pre></td></tr></table><p>The element access

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct foo f;
f.b[7].a
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(declare (type foo f))
(foo-a (aref (foo-b f) 7)) or (slot-value (aref (slot-value f 'b) 7) 'a)
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-var"></a><p class="title"><b>Example 30.6. external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> variable and some accesses</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct bar {
    short x, y;
    char a, b;
    int z;
    struct bar * n;
};

extern struct bar * my_struct;

my_struct-&gt;x++;
my_struct-&gt;a = 5;
my_struct = my_struct-&gt;n;
</pre></td></tr></table><p>

corresponds to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct bar
  (x short)
  (y short)
  (a char)
  (b char) ; or (b character) if it represents a character, not a number
  (z int)
  (n (c-ptr bar)))

(def-c-var my_struct (:type (c-ptr bar)))

(setq my_struct (let ((s my_struct)) (incf (slot-value s 'x)) s))
or (incf (slot my_struct 'x))
(setq my_struct (let ((s my_struct)) (setf (slot-value s 'a) 5) s))
or (setf (slot my_struct 'a) 5)
(setq my_struct (slot-value my_struct 'n))
or (setq my_struct (deref (slot my_struct 'n)))
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-func1"></a><p class="title"><b>Example 30.7. Calling an external function</b></p><p>On ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> systems, <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdlib.h.html" target="_top"><tt class="filename">stdlib.h</tt></a> contains the declarations:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
typedef struct {
  int quot;   /* Quotient */
  int rem;    /* Remainder */
} div_t;
extern div_t div (int numer, int denom);
</pre></td></tr></table><p>

This translates to

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(def-c-struct (div_t :typedef)
  (quot int)
  (rem int))
(default-foreign-language :stdc)
(def-call-out div (:arguments (numer int) (denom int))
  (:return-type div_t))
</pre></td></tr></table><p>

Sample call from within Lisp:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
&gt; (div 20 3)
#S(DIV_T :QUOT 6 :REM 2)
</pre></td></tr></table></div><div class="example"><a id="dffi-extern-func2"></a><p class="title"><b>Example 30.8. Another example for calling an external function</b></p><p>Suppose the following is defined in a file
 <tt class="filename">cfun.c</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
struct cfunr { int x; char *s; };
struct cfunr * cfun (int i,char *s,struct cfunr * r,int a[10]) {
  int j;
  struct cfunr * r2;
  printf("i = %d\n", i);
  printf("s = %s\n", s);
  printf("r-&gt;x = %d\n", r-&gt;x);
  printf("r-&gt;s = %s\n", r-&gt;s);
  for (j = 0; j &lt; 10; j++) printf("a[%d] = %d.\n", j, a[j]);
  r2 = (struct cfunr *) malloc (sizeof (struct cfunr));
  r2-&gt;x = i+5;
  r2-&gt;s = "A C string";
  return r2;
}
</pre></td></tr></table><p>

It is possible to call this function from Lisp using the file
<tt class="filename">callcfun.lisp</tt> (do not call it
<tt class="filename">cfun.lisp</tt> - <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><tt class="function">COMPILE-FILE</tt></a> would overwrite
<tt class="filename">cfun.c</tt>) whose contents is:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "TEST-C-CALL" (:use "LISP" "FFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "TEST-C-CALL")
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-c-struct cfunr (x int) (s c-string))
(default-foreign-language :stdc)
(def-call-out cfun
    (:arguments (i int)
                (s c-string)
                (r (c-ptr cfunr) :in :alloca)
                (a (c-ptr (c-array int 10)) :in :alloca))
  (:return-type (c-ptr cfunr)))
(defun call-cfun ()
  (cfun 5 "A Lisp string" (make-cfunr :x 10 :s "Another Lisp string")
        '#(0 1 2 3 4 5 6 7 8 9)))
</pre></td></tr></table><p>

Use the <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">module</a> facility:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
$ clisp-link create-module-set cfun callcfun.c
$ cc -O -c cfun.c
$ cd cfun
$ ln -s ../cfun.o cfun.o
Add cfun.o to NEW_LIBS and NEW_FILES in link.sh.
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c callcfun.lisp
$ clisp-link add-module-set cfun base base+cfun
$ base+cfun/lisp.run -M base+cfun/lispinit.mem -i callcfun
&gt; (test-c-call::call-cfun)
i = 5
s = A Lisp string
r-&gt;x = 10
r-&gt;s = Another Lisp string
a[0] = 0.
a[1] = 1.
a[2] = 2.
a[3] = 3.
a[4] = 4.
a[5] = 5.
a[6] = 6.
a[7] = 7.
a[8] = 8.
a[9] = 9.
#S(TEST-C-CALL::CFUNR :X 10 :S "A C string")
&gt;
$ rm -r base+cfun
</pre></td></tr></table><p>Note that there is a memory leak here: The return value
<tt class="varname">r2</tt> of <tt class="function">cfun()</tt> is
<a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed but never <a href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html" target="_top"><tt class="function">free</tt></a>d. Specifying
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(:return-type (c-ptr cfunr) :malloc-free)
</pre></td></tr></table><p>
is not an alternative because this would also
<tt class="function">free(r2-&gt;x)</tt> but <tt class="varname">r2-&gt;x</tt> is a
pointer to static data.</p></div><div class="example"><a id="ex-call-in"></a><p class="title"><b>Example 30.9. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a></b></p><p>To sort an array of double-floats using the Lisp function <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><tt class="function">SORT</tt></a>
 instead of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> library function <a href="http://www.opengroup.org/onlinepubs/007904975/functions/qsort.html" target="_top"><tt class="function">qsort</tt></a>, one can use the
 following interface code <tt class="filename">sort1.c</tt>.
 The main problem is to pass a variable-sized array.

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
extern void lispsort_begin (int);
void* lispsort_function;
void lispsort_double (int n, double * array) {
    double * sorted_array;
    int i;
    lispsort_begin(n); /* store #'sort2 in lispsort_function */
    sorted_array = ((double * (*) (double *)) lispsort_function) (array);
    for (i = 0; i &lt; n; i++) array[i] = sorted_array[i];
    free(sorted_array);
}
</pre></td></tr></table><p>

This is accompanied by <tt class="filename">sort2.lisp</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "FFI-TEST" (:use "LISP" "FFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "FFI-TEST")
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-call-in lispsort_begin (:arguments (n int))
  (:return-type nil)
  (:language :stdc))
(def-c-var lispsort_function (:type c-pointer))
(defun lispsort_begin (n)
  (setf (cast lispsort_function
              `(c-function
                 (:arguments (v (c-ptr (c-array double-float ,n))))
                 (:return-type (c-ptr (c-array double-float ,n))
                               :malloc-free)))
        #'sort2))
(defun sort2 (v)
  (declare (type vector v))
  (sort v #'&lt;))
</pre></td></tr></table><p>

To test this, use the following test file <tt class="filename">sorttest.lisp</tt>:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(eval-when (compile) (setq <a href="#ffi-extern-output"><tt class="varname">FFI:*OUTPUT-C-FUNCTIONS*</tt></a> t))
(def-call-out sort10
  (:name "lispsort_double")
  (:language :stdc)
  (:arguments (n int)
              (array (c-ptr (c-array double-float 10)) :in-out)))
</pre></td></tr></table><p>

Now try

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
$ clisp-link create-module-set sort sort2.c sorttest.c
$ cc -O -c sort1.c
$ cd sort
$ ln -s ../sort1.o sort1.o
</pre></td></tr></table><p>

Add <tt class="filename">sort1.o</tt> to <tt class="envar">NEW_LIBS</tt>
and <tt class="envar">NEW_FILES</tt> in <tt class="filename">link.sh</tt>.
Create a file <tt class="filename">package.lisp</tt> containing the
form <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "FFI-TEST" (:use "LISP"
"FFI"))</tt> and add <tt class="filename">package.lisp</tt>
to <tt class="envar">TO_PRELOAD</tt> in <tt class="filename">link.sh</tt>.
Proceed:

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c sort2.lisp sorttest.lisp
$ clisp-link add-module-set sort base base+sort
$ base+sort/lisp.run -M base+sort/lispinit.mem -i sort2 sorttest
&gt; (sort10 10 '#(0.501d0 0.528d0 0.615d0 0.550d0 0.711d0
                0.523d0 0.585d0 0.670d0 0.271d0 0.063d0))
#(0.063d0 0.271d0 0.501d0 0.523d0 0.528d0 0.55d0 0.585d0 0.615d0 0.67d0 0.711d0)
$ rm -r base+sort
</pre></td></tr></table></div><div class="example"><a id="ex-call-in-dll"></a><p class="title"><b>Example 30.10. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> dynamically</b></p><p>Create a dynamic library <tt class="filename">lispdll</tt>
 (<tt class="filename">#P".dll"</tt> on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>,
  <tt class="filename">#P".so"</tt> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>)
  with the following function:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
typedef int (*LispFunc)(int parameter);
int CallInFunc(LispFunc f) {
  return f(5)+11;
}
</pre></td></tr></table><p>
  and call it from Lisp:
  </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(ffi:def-call-out callout
  (:name "CallInFunc")
  (:library "lispdll.dll")
  (:arguments (function-arg
               (ffi:c-function (:arguments (number ffi:int))
                               (:return-type ffi:int) (:language :stdc))))
  (:return-type ffi:int)
  (:language :stdc))
&gt; (defun f (x) (* x 2))
F
&gt; (callout #'f)
21
</pre></td></tr></table></div><div class="example"><a id="dffi-gethostname"></a><p class="title"><b>Example 30.11. Variable size arguments:
  calling <a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostname.html" target="_top"><tt class="function">gethostname</tt></a> from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></b></p><div class="funcsynopsis"><a id="gethostname-synopsis"></a><p><code class="funcdef">int <b class="fsfunc">gethostname</b>(</code><var class="pdparam">name</var>, <var class="pdparam">namelen</var><code>)</code>;<br /><code>char*</code> <code>name</code>;<br /><code>size_t</code> <code>namelen</code>;</p></div><p>
 follows a typical pattern of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> "out"-parameter convention - it
 expects a pointer to a buffer it is going to fill.
 So you must view this parameter as either <tt class="constant">:OUT</tt> or <tt class="constant">:IN-OUT</tt>.
 Additionaly, one must tell the function the size of the buffer.
 Here <i class="replaceable"><tt>namelen</tt></i> is just an <tt class="constant">:IN</tt> parameter.
 Sometimes this will be an <tt class="constant">:IN-OUT</tt> parameter, returning the
 number of bytes actually filled in.</p><p>So <i class="replaceable"><tt>name</tt></i> is actually a pointer to an
 array of up to <i class="replaceable"><tt>namelen</tt></i> characters,
 regardless of what the poor <span class="type">char*</span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> prototype says,
 to be used like a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> <span class="type">string</span> (0-termination).
 <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> specifies that "host names are limited to HOST_NAME_MAX bytes",
 which is, of course, system dependent, but it appears that 256 is a
 common value.</p><p>In the present example, you can use allocation <tt class="constant">:ALLOCA</tt>, like
 you would do in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>: stack-allocate a temporary.</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#def-c-call-out"><tt class="function">FFI:DEF-C-CALL-OUT</tt></a> gethostname
  (:arguments (name (<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> ffi:char 256))
		    <tt class="constant">:OUT</tt> <tt class="constant">:ALLOCA</tt>)
	      (len ffi:int))
  (:return-type ffi:int))

(defun myhostname ()
  (multiple-value-bind (success name)
      ;; <tt class="constant">:OUT</tt> and <tt class="constant">:IN-OUT</tt> parameters are returned as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>
      (gethostname 256)
    (if (zerop success) name
	(error ...)))) ;; <a href="http://www.opengroup.org/onlinepubs/007904975/functions/strerror.html" target="_top"><tt class="function">strerror</tt></a>(<a href="http://www.opengroup.org/onlinepubs/007904975/functions/errno.html" target="_top"><tt class="varname">errno</tt></a>)

(defvar hostname (myhostname))
</pre></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="dffi-ex-more"></a>30.3.9.1. More examples</h4></div></div><div></div></div><p>You can find more information and examples of the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> in the following <tt class="email">&lt;<a href="mailto:clisp-list@sf.net">clisp-list@sf.net</a>&gt;</tt> messages:
 </p><div class="itemizedlist"><ul type="disc"><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/7278" target="_top">"variable size values"</a></li><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/6626" target="_top">"variable length arrays"</a></li></ul></div><p>
</p></div></div></div>
<!--#endif-->
<!--#ifdef HAVE_AFFI--><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="affi"></a>30.4. Extensions-2.4. The Amiga Foreign Function Call Facility</h2></div><div><h3 class="subtitle">Platform dependent: no platform supports this currently.</h3></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#affi-design">30.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">30.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">30.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">30.4.4. (Foreign) <span><b class="command">C</b></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">30.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">30.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">30.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">30.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">30.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">30.4.10. Examples</a></span></dt></dl></div><p><b>Another Foreign Function Interface. </b>All symbols relating to the simple foreign function interface are
 exported from the package <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>. To use them,
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><tt class="function">USE-PACKAGE</tt></a> "AFFI")</tt>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-design"></a>30.4.1. Design issues</h3></div></div><div></div></div><p><a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> was designed to be small in size but powerful enough to
use most library functions.  Lisp files may be compiled to <tt class="filename">#P".fas"</tt>
files without the need to load function definition files at run-time and
without external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> or linker support.
<a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>s can be created, provided that the function libraries are
opened at run-time.</p><p>Therefore, <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> supports only primitive <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types
(integers 8, 16 and 32 bits wide, signed or unsigned, pointers) and
defines no new types or classes.  Foreign functions are not first-class
objects (you can define a λ yourself), name spaces are
separate.</p><p>The <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> does no tracking of resources.  Use <a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-overview"></a>30.4.2. Overview</h3></div></div><div></div></div><p>These are the <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> forms:</p><p><tt class="sexp">(declare-library-base
 <i class="replaceable"><tt>keyword-base</tt></i>
 <i class="replaceable"><tt>library-name</tt></i>)</tt></p><p><tt class="sexp">(require-library-functions
 <i class="replaceable"><tt>library-name</tt></i> [(:import
 {<i class="replaceable"><tt>string-name</tt></i>}*)])</tt></p><p><tt class="sexp">(open-library
 <i class="replaceable"><tt>base-symbol</tt></i>)</tt></p><p><tt class="sexp">(close-library
 <i class="replaceable"><tt>base-symbol</tt></i>)</tt></p><p><tt class="sexp">(with-open-library
 (<i class="replaceable"><tt>base-symbol</tt></i> |
 <i class="replaceable"><tt>library-name</tt></i>)
 {<i class="replaceable"><tt>form</tt></i>}*)</tt></p><p><tt class="sexp">(defflibfun
 <i class="replaceable"><tt>function-name</tt></i>
 <i class="replaceable"><tt>base-symbol</tt></i>
 <i class="replaceable"><tt>offset</tt></i> <i class="replaceable"><tt>mask</tt></i>
 <i class="replaceable"><tt>result-type</tt></i>
 {<i class="replaceable"><tt>argument-type</tt></i>}*)</tt></p><p><tt class="sexp">(declare-library-function
 <i class="replaceable"><tt>function-name</tt></i>
 <i class="replaceable"><tt>library-name</tt></i>
 {<i class="replaceable"><tt>option</tt></i>}*)</tt></p><p><tt class="sexp">(flibcall <i class="replaceable"><tt>function-name</tt></i>
 {<i class="replaceable"><tt>argument</tt></i>}*)</tt></p><p><tt class="sexp">(mlibcall <i class="replaceable"><tt>function-name</tt></i>
 {<i class="replaceable"><tt>argument</tt></i>}*)</tt></p><p><tt class="sexp">(mem-read <i class="replaceable"><tt>address</tt></i>
 <i class="replaceable"><tt>result-type</tt></i>
 [<i class="replaceable"><tt>offset</tt></i>])</tt></p><p><tt class="sexp">(mem-write <i class="replaceable"><tt>address</tt></i>
 <i class="replaceable"><tt>type</tt></i> <i class="replaceable"><tt>value</tt></i> [<i class="replaceable"><tt>offset</tt></i>])</tt></p><p><tt class="sexp">(mem-write-vector
 <i class="replaceable"><tt>address</tt></i> <i class="replaceable"><tt>vector</tt></i>
 [<i class="replaceable"><tt>offset</tt></i>])</tt></p><p><tt class="sexp">(nzero-pointer-p <i class="replaceable"><tt>value</tt></i>)</tt></p><p>Except for <tt class="function">with-open-library</tt>,
<tt class="function">declare-library-function</tt> and
<tt class="function">mlibcall</tt>, all of the above are functions.</p><p>A library contains a collection of functions.  The library is
referred to by a symbol referred as library-base at the <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
level.  This symbol is created in the package <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
The link between this symbol and the OS-level library name is
established by <tt class="function">declare-library-base</tt>.  To avoid
multiple package conflicts, this and only this function requires the
symbol-name to be in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a> package. The function returns the
library-base.</p><p>A library may be opened by <tt class="function">open-library</tt> and
 closed by <tt class="function">close-library</tt>. An opened library must be
 closed. <tt class="function">with-open-library</tt> is provided to
 automatically close the library for you, thus it is much safer to
 use.</p><p>A function is contained in a library.  Every function is referred
to by a symbol.  A function is defined through
<tt class="function">defflibfun</tt> or
<tt class="function">declare-library-function</tt> by giving the function
name, the library-base, an offset into the library, a mask (or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)
for register-based library calls, the result type and all
parameter-types.  <tt class="function">require-library-functions</tt> loads
the complete set of functions defined in a library file. Symbols are
created in the package <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> and imported into the current
package.</p><p><tt class="function">flibcall</tt> and <tt class="function">mlibcall</tt>
call library functions. <tt class="function">mlibcall</tt> is a macro that
does a few checks at macroexpansion time and allows the compiler to
inline the call, not requiring the foreign function to be defined again
at load or execution time. The use of this macro is advertised wherever
possible.</p><p><tt class="function">mem-read</tt> reads an arbitrary address (with
offset for structure references) and returns the given type.</p><p><tt class="function">mem-write</tt> writes an arbitrary
address. <tt class="function">mem-write-vector</tt> copies the content of a
Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> into memory.</p><p><tt class="function">nzero-pointer-p</tt> tests for
non-<tt class="constant">NULL</tt> pointers in all recognized representations
(<a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><tt class="classname">NULL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-libs"></a>30.4.3. Foreign Libraries</h3></div></div><div></div></div><p><tt class="function">declare-library-base</tt> ought to be wrapped in an
<tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> (compile eval load) ...)</tt>
form and come before any function is referenced, because the library
base symbol must be known.</p><p><tt class="function">open-library</tt> tries to open the library
referenced by the base symbol.  Therefore it must have been preceded
with <tt class="function">declare-library-base</tt>.  The call returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
on failure. <tt class="function">open-library</tt> calls nest.  Every
successful call must be matched by <tt class="function">close-library</tt>.
<tt class="function">with-open-library</tt> does this for you and also allows
you to specify the library by name, provided that its base has been
declared.  It is recommended to use this macro and to reference the
library by name.</p><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will not close libraries for you at program exit.  [A
previous version did so but now <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> is a module and there are no
module exit functions.]  Programmers, watch
<tt class="function">AFFI::*LIBRARIES-ALIST*</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-types"></a>30.4.4. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types</h3></div></div><div></div></div><p>The following foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> types are used in <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
They are <span class="emphasis"><em>not</em></span> regular <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> types or <span><b class="command">CLOS</b></span> classes.
</p><div class="informaltable"><a id="affi-types-tab"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"><a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> equivalent</th><th align="center">Comment</th><td class="auto-generated"> </td></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><span class="type">void</span></td><td align="center">as a result type for functions only</td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">4</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">unsigned long</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">2</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">unsigned short</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">1</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">unsigned char</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-4</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 32)</tt></td><td align="center"><span class="type">long</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-2</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 16)</tt></td><td align="center"><span class="type">short</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">-1</span></td><td align="center"><tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><tt class="classname">SIGNED-BYTE</tt></a> 8)</tt></td><td align="center"><span class="type">signed char</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">0</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><tt class="classname">BOOLEAN</tt></a></td><td align="center"><span class="type">BOOL</span></td><td align="center">as a result type for functions only</td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">*</span></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="constant">:EXTERNAL</tt></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><tt class="constant">:IO</tt></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td><td class="auto-generated"> </td></tr></tbody></table></div><p>Objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> are copied and passed
<tt class="constant">NULL</tt>-terminated on the execution stack.  On return, a Lisp string is
allocated and filled from the address returned (unless <tt class="constant">NULL</tt>).
Functions with <tt class="constant">:IO</tt> parameters are passed the address of the Lisp
string or unsigned byte vector. These are not <tt class="constant">NULL</tt>-terminated!
This is useful for functions like like <a href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html" target="_top"><tt class="function">read</tt></a> which
do not need an array at a constant address longer than the dynamic
extent of the call (it is dangerous to define callback functions with
<tt class="constant">:IO</tt> (or <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>) type parameters).
Arguments of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a> and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> are always
acceptable where a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="constant">:IO</tt> type is specified.</p>
<!--#ifdef UNICODE--><p>See also <a href="#foreign-enc"><tt class="varname">CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p>
<!--#endif-->
<p>To meet the design goals, predefined types and objects were
used. As such, pointers were represented as integers. Now that there is
the <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> type, both representations may be used on input.
The pointer type should be therefore considered as opaque.
Use <tt class="function">nzero-pointer-p</tt> for <tt class="constant">NULL</tt> tests.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-functions"></a>30.4.5. Foreign functions</h3></div></div><div></div></div><p>Foreign Functions are declared either through
<tt class="function">defflibfun</tt> or
<tt class="function">declare-library-function</tt>.  The former is closer to
the low-level implementation of the interface, the latter is closer to
the other <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p><tt class="function">defflibfun</tt> requires the library base symbol
and register mask to be specified,
<tt class="function">declare-library-function</tt> requires the library name
and computes the mask from the declaration of the arguments.</p><p>The value of mask is implementation-dependent.</p><p>The <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> type <tt class="literal">0</tt> is only acceptable as a
function result type and yields either <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>. The difference
between <tt class="function">*</tt> and <tt class="constant">:EXTERNAL</tt> is the following:
<tt class="function">*</tt> uses integers, <tt class="constant">:EXTERNAL</tt> uses
<a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a> as function result-type (except from <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> for a
<tt class="constant">NULL</tt> pointer) and refuses objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or
<tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt> as input.  Thus <tt class="constant">:EXTERNAL</tt> provides some security
on the input and the ability to use <a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a> for resource-tracking on
the output side.</p><p><tt class="sexp">(declare-library-function <i class="replaceable"><tt>name</tt></i>
 <i class="replaceable"><tt>library-name</tt></i> {<i class="replaceable"><tt>option</tt></i>}*)</tt>

</p><div class="variablelist"><dl><dt><i class="replaceable"><tt>option</tt></i> ::==</dt><dd><div class="informaltable"><a id="affi-dec-lib-fun-opt-bnf"></a><table border="1"><colgroup><col /><col /><col /></colgroup><tbody><tr><td align="left"> </td><td align="left"><tt class="sexp">(:offset
    <i class="replaceable"><tt>library-offset</tt></i>)</tt></td><td class="auto-generated"> </td></tr><tr><td align="left">|</td><td align="left"><tt class="sexp">(<tt class="constant">:ARGUMENTS</tt>
    {(<i class="replaceable"><tt>argument</tt></i> <i class="replaceable"><tt><a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</tt></i>
      <i class="replaceable"><tt>register</tt></i>)}*)</tt></td><td class="auto-generated"> </td></tr><tr><td align="left">|</td><td align="left"><tt class="sexp">(:return-type
    <i class="replaceable"><tt><a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</tt></i>)</tt></td><td class="auto-generated"> </td></tr></tbody></table></div></dd><dt><i class="replaceable"><tt>register</tt></i> ::==</dt><dd><tt class="constant">:d0</tt> | <tt class="constant">:d1</tt>
 | ... | <tt class="constant">:d7</tt> | <tt class="constant">:a0</tt> | ... |
 <tt class="constant">:a6</tt></dd></dl></div><p>

declares a named library function for further reference through
<tt class="function">flibcall</tt> and <tt class="function">mlibcall</tt>.</p><p><tt class="function">mlibcall</tt> should be the preferred way of
calling foreign functions (when they are known at compile-time) as
macroexpansion-time checks may be performed and the call can be sort of
inlined.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-memory-access"></a>30.4.6. Memory access</h3></div></div><div></div></div><p><tt class="sexp">(affi:mem-read <i class="replaceable"><tt>address</tt></i>
<i class="replaceable"><tt>type</tt></i>
<i class="replaceable"><tt>offset</tt></i>)</tt> can read 8, 16 and 32 bit
signed or unsigned integers (<a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> types <span class="type">-4</span>,
<span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>, <span class="type">2</span>,
<span class="type">4</span>), a pointer (<span class="type">*</span>), a <tt class="constant">NULL</tt>-terminated
string (<span class="type">string</span>) or, if the type argument is of type
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>, it can fill this vector.
<tt class="constant">:EXTERNAL</tt> is not an acceptable type as no object can be created by
using <tt class="function">affi:mem-read</tt>.</p><p><tt class="sexp">(affi:mem-write
<i class="replaceable"><tt>address</tt></i> <i class="replaceable"><tt>type</tt></i> <i class="replaceable"><tt>value</tt></i>
[<i class="replaceable"><tt>offset</tt></i>])</tt> writes integers (<a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
type <span class="type">-4</span>, <span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>,
<span class="type">2</span> and <span class="type">4</span>) or pointer values (type
<span class="type">*</span>), but not vectors to the specified memory address.</p><p><tt class="sexp">(affi:mem-write-vector
<i class="replaceable"><tt>address</tt></i> <i class="replaceable"><tt>vector</tt></i>
[<i class="replaceable"><tt>offset</tt></i>])</tt> can write memory from the
given vector (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8))</tt>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-func-def"></a>30.4.7. Function Definition Files</h3></div></div><div></div></div><p><tt class="function">affi:require-library-functions</tt> will <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><tt class="function">REQUIRE</tt></a> a
file of name derived from thelibrary name and with type
<tt class="filename">affi</tt>. It may be used to import all names into the
current package or only a given subset identified by string names, using
the <tt class="constant">:import</tt> keyword (recommended use).
Some definition files for standard Amiga libraries are provided.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;30.12.&#xA0;Using a predefined library function file">example 1</a> below.</p><p>As <tt class="function">affi:require-library-functions</tt> loads a
global file which you, the programmer, may have not defined, you may
consider declaring every function yourself to be certain what the return
and argument types are.
See <a href="#affi-ex-4-sample" title="Example&#xA0;30.15.&#xA0;Some sample function definitions">example 4</a> below.</p><p>The file <tt class="filename">read-fd.lisp</tt> defines the function
<tt class="function">make-partial-fd-file</tt> with which the provided
<tt class="filename">.affi</tt> files have been prepared from the original
Amiga FD files (located in the directory <tt class="filename">FD:</tt>).
They must still be edited as the function cannot know whether a function
accepts a <tt class="function">*</tt>, <tt class="constant">:IO</tt>,
<tt class="function">string</tt> or <tt class="constant">:EXTERNAL</tt> argument and because files
in <tt class="filename">FD:</tt> only contain a register specification, not
the width of integer arguments (<tt class="literal">-4</tt>,
<tt class="literal">-2</tt>, <tt class="literal">-1</tt>, <tt class="literal">1</tt>,
<tt class="literal">2</tt>, or <tt class="literal">4</tt>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-hints"></a>30.4.8. Hints</h3></div></div><div></div></div><p>By using appropriate <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> forms for
<tt class="function">affi:declare-library-base</tt> and
<tt class="function">affi:require-library-functions</tt> and not using
<tt class="function">affi:flibcall</tt>, it is possible to write code that
only loads library function definition files at compile-time.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;30.12.&#xA0;Using a predefined library function file">example 1</a> below.</p><p>Do not rely on <a href="#final" title="29.7.&#xA0;Extensions-1.7. Finalization"><tt class="function">EXT:FINALIZE</tt></a> to free resources for you, as <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
does not call finalizers when it exits, use <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-caveats"></a>30.4.9. Caveats</h3></div></div><div></div></div><p>You can consider the library bases being symbols in need of being
imported from the package <a href="#affi" title="30.4.&#xA0;Extensions-2.4. The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> originating from a brain-damage, causing
the usual symbol headaches when using foreign functions calls within
macros.  Luckily, even if the high-level interface (or its
implementation in <tt class="filename">affi1.lisp</tt>) were to change, the
low-level part (<tt class="filename">affi.d</tt>) should remain untouched as
all it knows are <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><tt class="classname">INTEGER</tt></a>s and <a href="#fptr"><tt class="classname">FFI:FOREIGN-POINTER</tt></a>s, no <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><tt class="classname">SYMBOL</tt></a>s.
The difficulty is just to get the library base value at run-time.
Feel free to suggest enhancements to this facility!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-examples"></a>30.4.10. Examples</h3></div><div><h4 class="subtitle">NB: These examples are somewhat specific to the Amiga.</h4></div></div><div></div></div><div class="example"><a id="affi-ex-1-predefined"></a><p class="title"><b>Example 30.12. Using a predefined library function file</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

;; SysBase is the conventional name for exec.library
;; It is only enforced by the file loaded by REQUIRE-LIBRARY-FUNCTIONS
(eval-when (compile eval load)
  (declare-library-base :SysBase "exec.library")) ;keyword avoids name conflicts

;; using only MLIBCALL allows not to load definitions at load-time
(eval-when (compile eval)
  (require-library-functions "exec.library"
    :import '("FindTask")))

(with-open-library ("exec.library")
  (print (mlibcall FindTask 0)))
</pre></td></tr></table><p>

This file can be used in interpreted and compiled mode.
Compiled, it will have inlined the library function calls.
</p></div><div class="example"><a id="affi-ex-2-flibcall"></a><p class="title"><b>Example 30.13. Using flibcall</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  ;; keyword avoids name conflicts
  (declare-library-base :SysBase "exec.library"))

;; The load situation permits the use of flibcall
(eval-when (eval compile load)
  (require-library-functions "exec.library"))

(unless (open-library 'SysBase) (error "No library for SysBase"))
(flibcall (if t 'FindTask 'Debug) 0)
(close-library 'SysBase)
</pre></td></tr></table></div><div class="example"><a id="affi-ex-3-dynamic"></a><p class="title"><b>Example 30.14. Be fully dynamic, defining library bases ourselves</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><tt class="function">DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><tt class="function">IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  (defvar mylib (declare-library-base :foobase "foo.library")))
(eval-when (eval compile load)          ;eval allows mlibcall, load flibcall
  (defflibfun 'foo1 mylib -30 '#xA '* 'string)
  (defflibfun 'foo2 mylib -36 '#x21 0 * 4))

(defun foo (name)
  (when (open-library mylib)
    (list (mlibcall foo1 name) (flibcall 'foo2 name 123213))
    (close-library mylib)))
</pre></td></tr></table></div><div class="example"><a id="affi-ex-4-sample"></a><p class="title"><b>Example 30.15. Some sample function definitions</b></p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(defflibfun 'FindTask 'SysBase -294 #xA '* 'string)
(eval-library-function FindTask "exec.library"
  (:offset -294)
  (:return-type *)
  (:arguments
   (name   string   :A1)))
(declare-library-function NameFromLock "dos.library"
  (:offset -402)
  (:return-type 0)
  (:arguments
   (lock   4   :D1)
   (buffer :io :D2)
   (len    4   :D3)))

(eval-when (compile eval)
  (defconstant GVF_LOCAL_ONLY (ash 1 9))
  (defflibfun 'SetVar 'DosBase -900 #x5432 0 'string 'string -4 4))
(defun setvar (name value)
  (with-open-library (DosBase)
    ;; length of -1 means find length of <tt class="constant">NULL</tt>-terminated-string
    (mlibcall SetVar name value -1 GVF_LOCAL_ONLY)))
</pre></td></tr></table></div></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="socket"></a>30.5. Extensions-2.5. Socket Streams</h2></div><div><h3 class="subtitle">Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</h3></div></div><div></div></div>
<!--#ifdef SOCKET_STREAMS--><div class="variablelist"><dl><dt><a id="sose"></a><tt class="sexp">(<a href="#sose"><tt class="function">SOCKET:SOCKET-SERVER</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
                 [<i class="replaceable"><tt>port-or-socket</tt></i>])</tt></dt><dd>This function creates a socket an binds a port to
    the socket.  The server exists to watch for client connect attempts.
    The optional argument is either a port (positive <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>) or a
    <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> (from whose peer the connections will be made).
 </dd><dt><a id="sose-close"></a><tt class="sexp">(<a href="#sose-close"><tt class="function">SOCKET:SOCKET-SERVER-CLOSE</tt></a>
                 <i class="replaceable"><tt>socket-server</tt></i>)</tt></dt><dd>Closes down the server socket.
    <a href="#close" title="21.3.9.&#xA0;Function CLOSE">Just like streams</a>,
    <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>s are closed at <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.  You should not rely on
    this however, because <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion times are not deterministic.
 </dd><dt><a id="sose-hopo"></a><tt class="sexp">(<a href="#sose-hopo"><tt class="function">SOCKET:SOCKET-SERVER-HOST</tt></a> <i class="replaceable"><tt>socket-server</tt></i>)</tt><br /><tt class="sexp">(<a href="#sose-hopo"><tt class="function">SOCKET:SOCKET-SERVER-PORT</tt></a> <i class="replaceable"><tt>socket-server</tt></i>)</tt></dt><dd>Returns the host mask indicating which hosts can
    connect to this server and the port which was bound using <a href="#sose"><tt class="function">SOCKET:SOCKET-SERVER</tt></a>.
 </dd><dt><a id="so-wait"></a><tt class="sexp">(<a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a>
    <i class="replaceable"><tt>socket-server</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#timeout-opt">[<i class="replaceable"><tt>seconds</tt></i> [<i class="replaceable"><tt>microseconds</tt></i>]]</a>)</tt></dt><dd>Wait for a fixed time for a
    connection on the <i class="replaceable"><tt>socket-server</tt></i> (a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>).
    Without a timeout argument, <a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a> blocks indefinitely.
    When timeout is zero, poll.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> when a connection is available (i.e., <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a> will
    not block) and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> on timeout.</dd><dt><a id="so-accept"></a><tt class="sexp">(<a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a>
    <i class="replaceable"><tt>socket-server</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>
    <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a>)</tt></dt><dd>Creates the server-side two-way
   stream for the connection.
   Waits for an attempt to connect to the server for no more than
   <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a> seconds (which may be a non-negative real number or a
   list <tt class="sexp">(sec usec)</tt> or a pair
   <tt class="sexp">(sec . usec)</tt>).
   <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a> if no connection is made in that time.
  </dd><dt><a id="so-connect"></a><tt class="sexp">(<a href="#so-connect"><tt class="function">SOCKET:SOCKET-CONNECT</tt></a>
    <i class="replaceable"><tt>port</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> [<i class="replaceable"><tt>host</tt></i>] <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a> <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a>)</tt></dt><dd>Attempts to create a client-side two-way
   <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>.  Blocks until the server accepts the connection, for
   no more than <a href="#timeout-k"><tt class="constant">:TIMEOUT</tt></a> seconds.  If it is 0, returns immediately
   and (probably) blocks on the next i/o operation (you can use
   <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> to check whether it will actually block).
  </dd><dt><a id="so-status"></a><tt class="sexp">(<a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a>
                 <i class="replaceable"><tt>socket-stream-or-list</tt></i>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="#timeout-opt">[<i class="replaceable"><tt>seconds</tt></i> [<i class="replaceable"><tt>microseconds</tt></i>]]</a>)</tt></dt><dd><p>Checks whether it is possible to read from or write
   to a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> or whether a connection is available on a
   <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a> without blocking.</p><p>For the cognoscenti: this is the interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/select.html" target="_top"><tt class="function">select</tt></a>, so
   it will work for any <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> which is based on a
   <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>, e.g., <a href="#open" title="21.3.8.&#xA0;Function  OPEN">file</a>/<a href="#pipe" title="30.8.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams">socket</a> and <a href="#terminal" title="21.2.&#xA0;Terminal interaction."><tt class="varname">EXT:*KEYBOARD-INPUT*</tt></a>.</p><p>This is similar to
    <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>, which checks only one <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and only for input, and
    <a href="#so-wait"><tt class="function">SOCKET:SOCKET-WAIT</tt></a>, which works only with <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>s.</p><p>We define “<span class="quote">status</span>” for a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a> or a
    <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> to be <tt class="constant">:ERROR</tt> if any i/o operation will cause an
    error.</p><p>Additionally, for a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a>, we define
    “<span class="quote">status</span>” to be <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> if a connection is available, i.e.,
    is <a href="#so-accept"><tt class="function">SOCKET:SOCKET-ACCEPT</tt></a> will not block, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> otherwise.</p><p>Additionally, for a <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>, we define
    “<span class="quote">status</span>” in the given <i class="replaceable"><tt>direction</tt></i> (one of <tt class="constant">:INPUT</tt>,
    <tt class="constant">:OUTPUT</tt>, and <tt class="constant">:IO</tt>) to be
    </p><div class="variablelist"><a id="so-status-values"></a><p class="title"><b>Possible status values for various directions:</b></p><dl><dt><tt class="constant">:INPUT</tt> status:</dt><dd><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>reading will block
        </dd><dt><tt class="constant">:INPUT</tt></dt><dd>some input is available
        </dd><dt><tt class="constant">:EOF</tt></dt><dd>the stream has reached its end
       </dd></dl></div></dd><dt><tt class="constant">:OUTPUT</tt> status:</dt><dd><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></dt><dd>writing will block
        </dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>output to the stream will not block
       </dd></dl></div></dd><dt><tt class="constant">:IO</tt> status:</dt><dd><div class="informaltable"><a id="so-status-i-o"></a><table border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th rowspan="2" align="center" valign="bottom">output status</th><th colspan="3" align="center">input status</th></tr><tr><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></th><th align="center"><tt class="constant">:INPUT</tt></th><th align="center"><tt class="constant">:EOF</tt></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a></td><td align="center"><tt class="constant">:INPUT</tt></td><td align="center"><tt class="constant">:EOF</tt></td></tr><tr><td align="center"><tt class="constant">:OUTPUT</tt></td><td align="center"><tt class="constant">:OUTPUT</tt></td><td align="center"><tt class="constant">:IO</tt></td><td align="center"><tt class="constant">:APPEND</tt></td></tr></tbody></table></div></dd></dl></div><div class="variablelist"><p class="title"><b>Possible values of
     <i class="replaceable"><tt>socket-stream-or-list</tt></i>:</b></p><dl><dt><a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a> or <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-SERVER</tt></a></dt><dd>Returns the appropriate status, as defined
       above (<tt class="constant">:IO</tt> status for <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>)
    </dd><dt><tt class="sexp">(<a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>
       . <i class="replaceable"><tt>direction</tt></i>)</tt></dt><dd>Return the status in the specified direction
    </dd><dt>a list of the above</dt><dd>Return a list of values, one for each element of the
       argument list (a la <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><tt class="function">MAPCAR</tt></a>)</dd></dl></div><p>If you want to avoid <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>ing up a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> list, you can
    make the elements of <i class="replaceable"><tt>socket-stream-or-list</tt></i>
    to be <tt class="sexp">(<i class="replaceable"><tt>socket-stream</tt></i> <i class="replaceable"><tt>direction</tt></i> .
     <i class="replaceable"><tt>x</tt></i>)</tt> or <tt class="sexp">(<i class="replaceable"><tt>socket-server</tt></i> . <i class="replaceable"><tt>x</tt></i>)</tt>.
    Then <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> will destructively modify its argument and replace
    <i class="replaceable"><tt>x</tt></i> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> with the status and return the modified list.
    You can pass this modified list to <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> again.</p><p>The optional arguments specify the timeout. <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> means
    wait forever, <tt class="literal">0</tt> means poll.</p><p>The second value returned is the number of objects with
    non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> status, i.e., “<span class="quote">actionable</span>” objects.
    <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> returns either due to a timeout or when this number is
    positive, i.e., if the timeout was <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> and <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> did
    return, then the second value is positive.</p></dd><dt><a id="sost-hopo"></a><tt class="sexp">(<a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-HOST</tt></a> <i class="replaceable"><tt>socket-stream</tt></i>)</tt><br /><tt class="sexp">(<a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-PORT</tt></a> <i class="replaceable"><tt>socket-stream</tt></i>)</tt></dt><dd>These two functions return information about the
    <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>.</dd><dt><a id="service-port"></a><tt class="sexp">(<a href="#service-port"><tt class="function">SOCKET:SOCKET-SERVICE-PORT</tt></a>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>service-name</tt></i>
                 (<i class="replaceable"><tt>protocol</tt></i> "tcp"))</tt></dt><dd>A convenience function for looking up a port given
   the service name.  It returns the servent struct as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>
   (name, list of aliases, port, protocol) for the given
   <i class="replaceable"><tt>service-name</tt></i> and
   <i class="replaceable"><tt>protocol</tt></i>, or all services as the list of
   <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> 4)</tt>
   if <i class="replaceable"><tt>service-name</tt></i> is not given or is
   <tt class="constant">:DEFAULT</tt> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</dd><dt><a id="sost-peer"></a><tt class="sexp">(<a href="#sost-peer"><tt class="function">SOCKET:SOCKET-STREAM-PEER</tt></a>
    <i class="replaceable"><tt>socket-stream</tt></i> [<i class="replaceable"><tt>do-not-resolve-p</tt></i>])</tt></dt><dd><p>Given a socket stream, this function returns the
   name of the host on the opposite side of the connection and its port
   number; the server-side can use this to see who connected.</p><p>When the optional second argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the hostname
   resolution is disabled and just the IP address is returned, without
   the <span class="acronym">FQDN</span> (Fully Qualified Domain Name).
   </p></dd><dt><a id="sost-local"></a><tt class="sexp">(<a href="#sost-local"><tt class="function">SOCKET:SOCKET-STREAM-LOCAL</tt></a>
    <i class="replaceable"><tt>socket-stream</tt></i> [<i class="replaceable"><tt>do-not-resolve-p</tt></i>])</tt></dt><dd>The dual to <a href="#sost-peer"><tt class="function">SOCKET:SOCKET-STREAM-PEER</tt></a> - same information,
   host name and port number, but for the local host.
   The difference from <a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-HOST</tt></a> and <a href="#sost-hopo"><tt class="function">SOCKET:SOCKET-STREAM-PORT</tt></a> is that this function
   asks the OS (and thus returns the correct trusted values) while the
   other two are just accessors to the internal data structure, and
   basically return the arguments given to the function which created
   the <i class="replaceable"><tt>socket-stream</tt></i>.</dd><dt><a id="sost-shut"></a><tt class="sexp">(<a href="#sost-shut"><tt class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</tt></a>
    <i class="replaceable"><tt>socket-stream</tt></i> <i class="replaceable"><tt>direction</tt></i>)</tt></dt><dd><p>Some Internet protocols, such as <a href="http://www.w3.org/Protocols/" target="_top"><span><b class="command">HTTP</b></span></a>, provide for
   closing the connection in one <i class="replaceable"><tt>direction</tt></i> using <a href="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html" target="_top"><tt class="function">shutdown</tt></a>.
   This function provides an interface to this <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system call.
   <i class="replaceable"><tt>direction</tt></i> should be <tt class="constant">:INPUT</tt> or <tt class="constant">:OUTPUT</tt>.
   Note that you should still call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><tt class="function">CLOSE</tt></a> after you are done with your
   <i class="replaceable"><tt>socket-stream</tt></i>; this is best accomplished by using <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><tt class="function">WITH-OPEN-STREAM</tt></a>.</p><p>All <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s are <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s (i.e., both <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
   and <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">OUTPUT-STREAM-P</tt></a> return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for them).
   <a href="#sost-shut"><tt class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</tt></a> <span class="emphasis"><em>breaks</em></span> this and turns its argument
   stream into an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (if <i class="replaceable"><tt>direction</tt></i> is <tt class="constant">:OUTPUT</tt>) or <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (if
   <i class="replaceable"><tt>direction</tt></i> is <tt class="constant">:INPUT</tt>).
    Thus, the following important invariant is preserved: whenever
   </p><div class="itemizedlist"><ul type="disc"><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is open
    (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><tt class="function">OPEN-STREAM-P</tt></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>) and</li><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><tt class="function">INPUT-STREAM-P</tt></a>
     returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</li></ul></div><p>
   the <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> can be read from (e.g., with <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><tt class="function">READ-BYTE</tt></a>).
 </p></dd><dt><a id="so-opt"></a><tt class="sexp">(<a href="#so-opt"><tt class="function">SOCKET:SOCKET-OPTIONS</tt></a>
    <i class="replaceable"><tt>socket-server</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> {<i class="replaceable"><tt>option</tt></i>}*)</tt></dt><dd>Query and, optionally, set socket options using
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html" target="_top"><tt class="function">getsockopt</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html" target="_top"><tt class="function">setsockopt</tt></a>.
   An <i class="replaceable"><tt>option</tt></i> is a keyword, optionally followed by the new value.
   When the new value is not supplied, <a href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html" target="_top"><tt class="function">setsockopt</tt></a> is not called.
   For each option the old (or current, if new value was not supplied)
   value is returned. E.g., <tt class="sexp">(<a href="#so-opt"><tt class="function">SOCKET:SOCKET-OPTIONS</tt></a> <i class="replaceable"><tt>socket-server</tt></i>
   :SO-LINGER 1 :SO-RCVLOWAT)</tt> returns 2 values: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the old
   value of the <tt class="constant">:SO-LINGER</tt> option, and 1, the
   current value of the <tt class="constant">:SO-RCVLOWAT</tt> option.
  </dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quickstart"></a>30.6. Extensions-2.6. Quickstarting delivery with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></h2></div></div><div></div></div><p>This section describes four ways to turn <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> programs into
 executable programs, which can be started as quickly as executables
 written in other languages.</p><div class="variablelist"><dl><dt><a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a></dt><dd><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> can act as a script interpreter.
  </dd><dt>Desktop environments such as <a href="http://www.kde.org" target="_top">KDE</a>, <a href="http://www.gnome.org" target="_top">GNOME</a>, or Windows.</dt><dd>Files created with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> can be associated with
   the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> executables so that clicking on them would make <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
   execute the appropriate code.</dd><dt><a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> kernel with
               <tt class="option">CONFIG_BINFMT_MISC=y</tt></dt><dd>Associate the extensions <tt class="filename">#P".fas"</tt>
   and <tt class="filename">#P".lisp"</tt> with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>; then you can make the
   files executable and run them from the command line.
  </dd></dl></div><p>These four techniques apply to a single <tt class="filename">#P".lisp"</tt> or <tt class="filename">#P".fas"</tt> file.
 If your application is made up of several <tt class="filename">#P".lisp"</tt> or <tt class="filename">#P".fas"</tt> files,
 you can simply concatenate them (using <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/cat.html" target="_top"><span><b class="command">cat</b></span></a>) into one file;
 the techniques then apply to that concatenated file.</p><div class="variablelist">
<!--#ifdef UNIX--><dl><dt><a id="quickstart-unix"></a>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><p>On Unix, a text file (<tt class="filename">#P".fas"</tt> or <tt class="filename">#P".lisp"</tt>) can be
 made executable by adding a first line of the form
 </p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">#!<i class="replaceable"><tt>interpreter</tt></i> [<i class="replaceable"><tt>interpreter-arguments</tt></i>]</pre></td></tr></table><p>
 and using <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/chmod.html" target="_top"><span><b class="command">chmod</b></span></a> to make the script executable.
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> can be used as a script interpreter under the following
 circumstances:</p><div class="itemizedlist"><ul type="disc"><li>The <i class="replaceable"><tt>interpreter</tt></i> must be the full pathname of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
 The recommended path is <tt class="filename">/usr/local/bin/clisp</tt>,
 and if <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is actually installed elsewhere, making
 <tt class="filename">/usr/local/bin/clisp</tt> be a symbolic link to the
 real <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</li><li>The <i class="replaceable"><tt>interpreter</tt></i> must be a real executable, not a script.
 Unfortunately, in the binary distributions of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> on Solaris,
 <span><b class="command">clisp</b></span> is a shell script because a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> compiler cannot be
 assumed to be installed on this platform.  If you do have a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
 compiler installed, build <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> from the source yourself;
 <span><b class="command">make install</b></span> will install <span><b class="command">clisp</b></span> as a real
 executable.</li><li><p>On some platforms, the first line which specifies the
 interpreter is limited in length:
   </p><div class="itemizedlist"><ul type="circle"><li>max. 32 characters on SunOS 4,</li><li>max. 80 characters on HP-UX,</li><li>max. 127 characters on <a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a>.</li></ul></div><p>
   Characters exceeding this limit are simply cut off by the system.
   At least 128 characters are accepted on Solaris, IRIX, AIX, OSF/1.
   There is no workaround: You have to keep the interpreter pathname
   and arguments short.</p></li><li>On Solaris and HP-UX, only the first
 <i class="replaceable"><tt>interpreter-arg</tt></i> is passed to the
 <i class="replaceable"><tt>interpreter</tt></i>.  In order to pass more than one option (for example,
 <tt class="option">-Msomewhere.mem</tt> and <tt class="option">-C</tt>) to <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>,
 separate them by hard spaces (ISO Latin-1 character 160) instead of
 normal spaces.  (But the separator between <i class="replaceable"><tt>interpreter</tt></i> and <i class="replaceable"><tt>interpreter-arguments</tt></i>
 must still be a normal space!) <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will split the <i class="replaceable"><tt>interpreter-arguments</tt></i> at
 hard spaces and at normal spaces.</li></ul></div><p><a id="script-exec"></a><b>Script execution. </b></p><div class="itemizedlist"><ul type="disc"><li>The script should contain Lisp
   forms, except in the <tt class="literal">#!</tt> line.</li><li>The file is loaded normally, through the function
   <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> (in particular, the name of the script file, which
   is <tt class="envar">$0</tt> in <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a>, can be found in <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><tt class="varname">*LOAD-TRUENAME*</tt></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><tt class="varname">*LOAD-PATHNAME*</tt></a>).</li><li>Before it is loaded, the variable <a href="#script-exec"><tt class="varname">EXT:*ARGS*</tt></a> is bound
   to a list of strings, representing the arguments given to the Lisp
   script (i.e., <tt class="envar">$1</tt> in <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a> becomes <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> <a href="#script-exec"><tt class="varname">EXT:*ARGS*</tt></a>)</tt> etc).</li><li><a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-INPUT*</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*STANDARD-OUTPUT*</tt></a> are
   bound, as usual, to the Unix standard input and output.
   <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*ERROR-OUTPUT*</tt></a> is bound to the Unix error output.</li><li>Continuable errors will be turned to warnings
   (using <a href="#appease-cerrors"><tt class="function">EXT:APPEASE-CERRORS</tt></a>).</li><li>Non-continuable errors and
   <span><b class="keycap">Control</b></span>-<span class="keysym">C</span> interrupts will
   terminate the execution of the Lisp script with an error status
   (using <a href="#exit-on-error"><tt class="function">EXT:EXIT-ON-ERROR</tt></a>).</li><li>If you wish the script's contents to be compiled
  during loading, add
  <a href="clisp.html#opt-load-comp"><tt class="option">-C</tt></a>
  to the <i class="replaceable"><tt>interpreter-arguments</tt></i>.</li></ul></div><p>
 See also <a href="clisp.html#opt-exec-file">the manual</a>.
</p><p><a id="script-bad"></a><b>If nothing works. </b>Another, quite inferior, alternative is to put the following into
 a file:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#!/bin/sh
exec clisp &lt;&lt;EOF
(lisp-form)
(another-lisp-form)
(yet-another-lisp-form)
EOF
</pre></td></tr></table><p>
The problem with this approach is that the return values of each form
will be printed to the standard output.  Another problem is that no user
input will be available.</p></dd>
<!--#endif-->
<!--#ifdef WIN32--><dt><a id="quickstart-win32"></a>Platform dependent: <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><p>There are two different ways to make <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 "executables" for Windows platforms.</p><div class="itemizedlist"><ul type="disc"><li>Associate the <tt class="filename">#P".mem"</tt> extension with
   <span><b class="command">c:\clisp\lisp.exe -B c:\clisp -M %s</b></span>.
  </li><li>Associate the <tt class="filename">#P".fas"</tt> extension with
   <span><b class="command">c:\clisp\lisp.exe -B c:\clisp -M c:\clisp\lispinit.mem
    -i %s</b></span>.
    Alternatively, you may want to have a function
    <tt class="function">main</tt> in your <tt class="filename">#P".fas"</tt> files and associate
    the <tt class="filename">#P".fas"</tt> extension with <span><b class="command">c:\clisp\lisp.exe -B
    c:\clisp -M c:\clisp\lispinit.mem -i %s -x (main)</b></span>.
  </li></ul></div><p>Then clicking on the compiled lisp file (with <tt class="filename">#P".fas"</tt>
 extension) will load the file (thus executing all the code in the
 file), while the clicking on a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a> (with <tt class="filename">#P".mem"</tt>
 extension) will start clisp with the given <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.</p><p>Note that <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is distributed with a file
 <tt class="filename">install.bat</tt>, which creates a file
 <tt class="filename">clisp.lnk</tt> on your desktop and also associates
 <tt class="filename">#P".fas"</tt>, <tt class="filename">#P".lisp"</tt>, and <tt class="filename">#P".mem"</tt> files with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</p></dd>
<!--#endif-->
<dt><a id="quickstart-linux"></a>Platform dependent: <a href="http://www.linux.org/" target="_top"><strong>Linux</strong></a> platforms only.</dt><dd><p>You have to build your kernel with
 <tt class="option">CONFIG_BINFMT_MISC=y</tt> and
 <tt class="option">CONFIG_PROC_FS=y</tt>.  Then you will have a
 <tt class="filename">/proc/sys/fs/binfmt_misc/</tt> directory and you will
 be able to do (as <tt class="literal">root</tt>; you might want to put
 these lines into <tt class="filename">/etc/rc.d/rc.local</tt>):

</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash# echo ":CLISP:E::fas::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
bash# echo ":CLISP:E::lisp::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
</pre></td></tr></table><p>Then you can do the following:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ cat &lt;&lt; EOF &gt; hello.lisp
(print "hello, world!")
EOF
bash$ clisp -c hello.lisp

Compiling file hello.lisp ...

Compilation of file hello.lisp is finished.
0 errors, 0 warnings
bash$ chmod +x hello.fas
bash$ hello.fas

"hello, world!"
bash$
</pre></td></tr></table><p>Please read
 <tt class="filename">/usr/src/linux/Documentation/binfmt_misc.txt</tt> for
 details.</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="app-dev"></a>30.7. Extensions-2.7. Application delivery with <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></h2></div></div><div></div></div><p>Some ways of packaging <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> programs are discussed in the
 section <a href="#quickstart" title="30.6.&#xA0;Extensions-2.6. Quickstarting delivery with CLISP">Quickstarting delivery with
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></a>.</p><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> is
 <a href="http://www.gnu.org/philosophy/free-sw.html" target="_top">Free
  Software</a>, covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, with special
 terms governing the distribution of applications that run in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
 The precise terms can be found in the <tt class="filename">COPYRIGHT</tt>
 file contained in the source and binary distributions of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.  Here
 is an informal clarification what these terms mean in practice.  Please
 refer to the said <tt class="filename">COPYRIGHT</tt> file when in
 doubt.</p><p>In many cases, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> does not force an application to be covered
 by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. Nevertheless, we encourage you to release your software
 under an open source license. The benefits of such a license for
 your users are numerous, in particular they are free to modify the
 application when their needs/requirements change, and they are free to
 recompile the application when they upgrade their machine or operating
 system.</p><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> extensions, i.e. programs which need to access
 non-portable <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> internal symbols (in the packages <a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a>,
 <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>, <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, ...), must be covered by <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a> as
 well.</p><p>Other programs running in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> have to or need not to be placed
 under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, depending on their distribution form:

</p><div class="itemizedlist"><ul type="disc"><li>Programs distributed as Lisp source or <tt class="filename">#P".fas"</tt>
   files can be distributed without restrictions coming from <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.
 </li><li>Programs distributed as <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>s can be
  distributed only if accompanied with the non-<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> <tt class="filename">#P".fas"</tt> files
  which make up the <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>, and a <tt class="filename">#P"Makefile"</tt> for rebuilding the
  <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.</li><li>If you need to distribute a modified <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
  executable (for example, incorporating additional <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">module</a>s written
  in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>), you must distribute its full source under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
  If you are not satisfied with this, you can instead put the additional
  <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">module</a>s into a separate (non-<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>) program, with which your Lisp
  program will communicate via <a href="#socket" title="30.5.&#xA0;Extensions-2.5. Socket Streams"><tt class="classname">SOCKET:SOCKET-STREAM</tt></a>s.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="shell"></a>30.8. Extensions-2.8. Shell, Pipes and Printing</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#exec">30.8.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">30.8.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">30.8.3. Printing</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="exec"></a>30.8.1. Shell</h3></div></div><div></div></div><div class="variablelist">
<!--#ifdef UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><tt class="sexp">(<a href="#exec" title="30.8.1.&#xA0;Shell"><tt class="function">EXT:EXECUTE</tt></a> <i class="replaceable"><tt>program</tt></i>
       <i class="replaceable"><tt>arg<sub>1</sub></tt></i>
       <i class="replaceable"><tt>arg<sub>2</sub></tt></i> ...)</tt>
   executes an external program.
   Its name is <i class="replaceable"><tt>program</tt></i> (a full pathname).
   It is given the strings <i class="replaceable"><tt>arg<sub>1</sub></tt></i>,
   <i class="replaceable"><tt>arg<sub>2</sub></tt></i>, ... as arguments.
 </dd>
<!--#endif-->
<!--#ifdef HAVE_SHELL--><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><tt class="sexp">(<a href="#exec" title="30.8.1.&#xA0;Shell"><tt class="function">EXT:SHELL</tt></a> [<i class="replaceable"><tt>command</tt></i>])</tt>
   calls the operating system's shell. <tt class="sexp">(<a href="#exec" title="30.8.1.&#xA0;Shell"><tt class="function">EXT:SHELL</tt></a>)</tt> calls the shell for interactive use.
   <tt class="sexp">(<a href="#exec" title="30.8.1.&#xA0;Shell"><tt class="function">EXT:SHELL</tt></a> <i class="replaceable"><tt>command</tt></i>)</tt> calls the shell
   only for execution of the one given <i class="replaceable"><tt>command</tt></i>.
 </dd>
<!--#endif-->
<!--#ifdef PIPES2--><dt><a id="run-prog"></a>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   platforms only.</dt><dd><p>The functions <a href="#run-prog"><tt class="function">EXT:RUN-SHELL-COMMAND</tt></a> and <a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> are the
   general interface to <a href="#exec" title="30.8.1.&#xA0;Shell"><tt class="function">EXT:SHELL</tt></a> and the above:</p><p><tt class="sexp">(<a href="#run-prog"><tt class="function">EXT:RUN-SHELL-COMMAND</tt></a> <i class="replaceable"><tt>command</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:INPUT</tt> <tt class="constant">:OUTPUT</tt> <tt class="constant">:IF-OUTPUT-EXISTS</tt> <tt class="constant">:WAIT</tt>)</tt>
   runs a shell command (including shell built-in commands,
   like <span><b class="command">DIR</b></span> on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>
   and <span><b class="command">for/do/done</b></span> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>).</p><p><tt class="sexp">(<a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> <i class="replaceable"><tt>program</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
    <tt class="constant">:ARGUMENTS</tt> <tt class="constant">:INPUT</tt> <tt class="constant">:OUTPUT</tt> <tt class="constant">:IF-OUTPUT-EXISTS</tt> <tt class="constant">:WAIT</tt>)</tt>
   runs an external program.</p><div class="variablelist"><dl><dt><i class="replaceable"><tt>command</tt></i></dt><dd><p>the shell command.</p>
<!--#ifdef UNIX--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd>The shell the command is passed to is the value
       of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">SHELL</tt>, which normally is <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a>.
       The command should be a “<span class="quote">simple command</span>”;
       a “<span class="quote">command list</span>” should be enclosed in "{
       ... ; }" (for <a href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html" target="_top"><span><b class="command">/bin/sh</b></span></a>) or "( ... )" (for <tt class="filename">/bin/csh</tt>).
     </dd></dl></div>
<!--#endif-->
</dd><dt><i class="replaceable"><tt>program</tt></i></dt><dd>the program.  The directories listed in the
     <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a> <tt class="envar">PATH</tt> will be searched for it.
    </dd><dt><tt class="constant">:ARGUMENTS</tt></dt><dd>a list of arguments (strings) that are given to the
     program.</dd><dt><tt class="constant">:INPUT</tt></dt><dd>where the program's input is to come from: either
     <tt class="constant">:TERMINAL</tt> (the standard input, default) or
     <tt class="constant">:STREAM</tt> (a Lisp stream to be created) or
     a pathname (an input file) or
     <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (no input at all).</dd><dt><tt class="constant">:OUTPUT</tt></dt><dd>where the program's output is to be sent to: either
     <tt class="constant">:TERMINAL</tt> (the standard output, default) or
     <tt class="constant">:STREAM</tt> (a Lisp stream to be created) or
     a pathname (an output file) or
     <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (ignore the output).</dd><dt><tt class="constant">:IF-OUTPUT-EXISTS</tt></dt><dd>what to do if the <tt class="constant">:OUTPUT</tt> file already exists.
     The possible values are <tt class="constant">:OVERWRITE</tt>, <tt class="constant">:APPEND</tt>, <tt class="constant">:ERROR</tt>,
     with the same meaning as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><tt class="function">OPEN</tt></a>. The default is <tt class="constant">:OVERWRITE</tt>.
    </dd><dt><tt class="constant">:WAIT</tt></dt><dd>whether to wait for program termination or not
     (this is useful when no i/o to the process is needed);
     the default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, i.e., synchronous execution.
    </dd>
<!--#ifdef UNIX--><dt><tt class="constant">:MAY-EXEC</tt></dt><dd>pass <span><b class="command">exec</b></span> to the underlying
    shell (<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> only).</dd>
<!--#endif-->
<!--#ifdef WIN32--><dt><tt class="constant">:INDIRECTP</tt></dt><dd>use a shell to run the command, e.g.,
    <tt class="sexp">(<a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> "dir" :indirectp <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt>
    will run the shell built-in command <span><b class="command">DIR</b></span>.
    (<a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> only).</dd>
<!--#endif-->
</dl></div><p>If <tt class="constant">:STREAM</tt> was specified for <tt class="constant">:INPUT</tt> or <tt class="constant">:OUTPUT</tt>, a Lisp
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> is returned.
 If <tt class="constant">:STREAM</tt> was specified for both <tt class="constant">:INPUT</tt> and <tt class="constant">:OUTPUT</tt>, three
 Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>s are returned, as for the function <a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>.
 This use of <a href="#run-prog"><tt class="function">EXT:RUN-PROGRAM</tt></a> can cause
 <a href="#deadlock">deadlocks</a>, see <a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>.</p></dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pipe"></a>30.8.2. Pipes</h3></div></div><div></div></div>
<!--#ifdef PIPES--><div class="variablelist"><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a>, <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a> platforms only.</dt><dd><div class="variablelist"><dl><dt><tt class="sexp">(<a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-INPUT-STREAM</tt></a>
    <i class="replaceable"><tt>command</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will supply the output
  from the execution of the given operating system command.
  </dd><dt><tt class="sexp">(<a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a>
   <i class="replaceable"><tt>command</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will pass its output as
   input to the execution of the given operating system command.
  </dd>
<!--#ifdef PIPES2--><dt><tt class="sexp">(<a href="#pipe" title="30.8.2.&#xA0;Pipes"><tt class="function">EXT:MAKE-PIPE-IO-STREAM</tt></a>
   <i class="replaceable"><tt>command</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> <a href="#eltype"><tt class="constant">:ELEMENT-TYPE</tt></a> <a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a> <a href="#buffered"><tt class="constant">:BUFFERED</tt></a>)</tt></dt><dd><p>returns three values.
  The first value is a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that will simultaneously pass its output
  as input to the execution of the given operating system command and
  supply the output from this command as input.
  The second and third value will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> and the <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a> that
  make up the <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, respectively.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Note that these three streams must be closed
   individually.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="deadlock"></a>Warning</h3><p>Note that improper use of this function
   can lead to <span class="emphasis"><em>deadlocks</em></span>.
   Use it at your own risk!</p><p>A deadlock occurs if the command and your Lisp program either
   both try to read from each other at the same time or both try to
   write to each other at the same time.</p><p>To avoid deadlocks, it is recommended that you fix a
   protocol between the command and your program and avoid any hidden
   buffering: use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><tt class="function">READ-CHAR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><tt class="function">READ-CHAR-NO-HANG</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><tt class="function">LISTEN</tt></a>,
   <a href="#so-status"><tt class="function">SOCKET:SOCKET-STATUS</tt></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><tt class="function">READ-LINE</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><tt class="function">READ</tt></a> on the input side, and
   complete every output operation by a <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><tt class="function">FINISH-OUTPUT</tt></a>.
   The same precautions must apply to the called command as well.
</p></div></dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="hardcopy"></a>30.8.3. Printing</h3></div></div><div></div></div><p>The macro
 <strong class="first"><i class="firstterm"><a href="#hardcopy" title="30.8.3.&#xA0;Printing"><tt class="function">EXT:WITH-OUTPUT-TO-PRINTER</tt></a><a id="with-print" class="indexterm"></a></i></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(<a href="#hardcopy" title="30.8.3.&#xA0;Printing"><tt class="function">EXT:WITH-OUTPUT-TO-PRINTER</tt></a> (<i class="replaceable"><tt>variable</tt></i> [<a href="#extfmt"><tt class="constant">:EXTERNAL-FORMAT</tt></a>])
  {<i class="replaceable"><tt>declaration</tt></i>}*
  {<i class="replaceable"><tt>form</tt></i>}*)
</pre></td></tr></table><p>
 binds the variable <i class="replaceable"><tt>variable</tt></i> to an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>
 that sends its output to the printer.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="getenv"></a>30.9. Extensions-2.9. Operating System
  Environment.</h2></div></div><div></div></div><p>Most modern operating systems support <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s that associate
 strings (“<span class="quote">variables</span>”) with other strings
 (“<span class="quote">values</span>”).  These variables are somewhat similar to the
 <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><tt class="literal">SPECIAL</tt></a> variables in <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>: their values are inherited by the
 processes from their parent process.</p><p>You can access your OS <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s using the function
<tt class="sexp">(<a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>string</tt></i>)</tt>,
where <i class="replaceable"><tt>string</tt></i> is the name of the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>.
When <i class="replaceable"><tt>string</tt></i> is omitted or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, all the <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s and their values
are returned in an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</p><p>You can change the value of existing <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html" target="_top">environment variable</a>s or create new
 ones using <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="#getenv" title="30.9.&#xA0;Extensions-2.9. Operating System&#10;  Environment."><tt class="function">EXT:GETENV</tt></a>
 <i class="replaceable"><tt>string</tt></i>) <i class="replaceable"><tt>new-value</tt></i>)</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="separate-io"></a>30.10. Extensions-2.10. Other</h2></div></div><div></div></div><div class="variablelist">
<!--#ifdef UNIX--><dl><dt>Platform dependent: <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> platforms only.</dt><dd><p>When running under the <a href="http://www.x.org/" target="_top">X Window System</a>, you can create
  a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, which uses a new dedicated xterm, using the function
  <strong class="first"><i class="firstterm"><a href="#separate-io" title="30.10.&#xA0;Extensions-2.10. Other"><tt class="function">EXT:MAKE-XTERM-IO-STREAM</tt></a><a id="mk-xterm" class="indexterm"></a></i></strong>:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*ERROR-OUTPUT*</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><tt class="function">SETQ</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><tt class="varname">*DEBUG-IO*</tt></a>
      (<a href="#separate-io" title="30.10.&#xA0;Extensions-2.10. Other"><tt class="function">EXT:MAKE-XTERM-IO-STREAM</tt></a>)))
</pre></td></tr></table></dd>
<!--#endif-->
</dl></div></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="internals"></a>Internals of the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> Implementation</h1></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#gc">31. Overview of <span><b class="command">CLISP</b></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">31.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">31.2. Lisp objects in <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#memory-models">31.3. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">31.4. The burden of garbage-collection upon the rest of <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">31.5. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">32. Extending <span><b class="command">CLISP</b></span>.</a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">32.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">32.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">32.3. Recompilation.</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">33. The <span><b class="command">CLISP</b></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">33.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">33.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">33.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">33.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">33.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">33.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">33.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">33.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">33.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">33.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">33.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">33.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">33.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">33.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">33.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">33.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">33.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">33.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">33.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">33.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">33.5.17. Shortcut instructions</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gc"></a>Chapter 31. Overview of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>'s Garbage Collection</h2></div><div><h3 class="subtitle"><i>These are internals, which are of interest only to the
  <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> developers.
  If you are not subscribed to <tt class="email">&lt;<a href="mailto:clisp-devel@sf.net">clisp-devel@sf.net</a>&gt;</tt>,
  this chapter is probably not for you.</i></h3></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#internals-intro">31.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">31.2. Lisp objects in <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#memory-models">31.3. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">31.4. The burden of garbage-collection upon the rest of <span><b class="command">CLISP</b></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">31.5. Foreign Pointers</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="internals-intro"></a>31.1. Introduction</h2></div></div><div></div></div><p>Knowing that most <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a> implementations are buggy and/or slow,
and because <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> needs to perform garbage collection, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> has its
own memory management subsystem in
files <tt class="filename">#P"spvw*.d"</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lisp-obj-in-c"></a>31.2. Lisp objects in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></h2></div></div><div></div></div><div class="itemizedlist"><p class="title"><b>Three kinds of storage are distinguished:</b></p><ul type="disc"><li><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> data (the "heap"), i.e. storage which contains
  Lisp objects and is managed by the garbage collector.</li><li><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> stack (called <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>), contains <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
  objects</li><li><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> data (including program text, data,
  <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed memory)</li></ul></div><p>A <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> object is one word, containing a tag
 (partial type information) and either immediate data
 (e.g. <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><tt class="classname">SHORT-FLOAT</tt></a>s) or a pointer to storage.
Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> data have tag = <tt class="literal">machine_type</tt> = 0,
pointers to <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> stack have tag = <tt class="literal">system_type</tt>,
most other pointers point to <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> data.</p><p>Let us turn to these <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects that consume regular <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
memory.  Every <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> object has a size which is determined when the
object is allocated (using one of the <tt class="function">allocate_*()</tt>
routines). The size can be computed from the type tag and - if necessary
- the length field of the object's header. The length field always
contains the number of elements of the object. The number of bytes is
given by the function <tt class="function">objsize()</tt>.</p><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects which contain exactly 2 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects
(i.e. <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><tt class="classname">COMPLEX</tt></a> numbers, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><tt class="classname">RATIO</tt></a>s) are
stored in a separate area and occupy 2 words each.
All other <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects have "varying length" (more precisely,
not a fixed length) and include a word for garbage collection purposes
at their beginning.</p><p>The garbage collector is invoked by
 <tt class="function">allocate_*()</tt> calls according to certain heuristics.
It marks all objects which are "live" (may be reached from the "roots"),
compacts these objects and unmarks them.  Non-live objects are lost;
their storage is reclaimed.</p><p>2-pointer objects are compacted by a simple hole-filling
algorithm: fill the left-most object into the right-most hole, and so
on, until the objects are contiguous at the right and the hole is
contiguous at the left.</p><p>Variable-length objects are compacted by sliding them down (their
address decreases).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="memory-models"></a>31.3. Memory Models</h2></div></div><div></div></div><p>There are 6 memory models. Which one is used, depends on the
operating system and is determined at build time.</p><div class="variablelist"><p class="title"><b>Memory Models</b></p><dl><dt>SPVW_MIXED_BLOCKS_OPPOSITE</dt><dd><p>The heap consists of one block of fixed length
  (allocated at startup).
  The variable-length objects are allocated from the left, the 2-pointer
  objects are allocated from the right.
  There is a hole between them.
  When the hole shrinks to 0, <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> is invoked.
  <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> slides the variable-length objects to the left and concentrates
  the 2-pointer objects at the right end of the block again.
  When no more room is available, some reserve area beyond the right end
  of the block is halved, and the 2-pointer objects are moved to the
  right accordingly.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Simple management.
    </dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(-)</dt><dd>The total heap size is limited.
    </dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_BLOCKS_OPPOSITE &amp; TRIVIALMAP_MEMORY</dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  The former one has a hole to the right and is extensible to the right,
  the latter one has a hole to the left and is extensible to the left.
  Similar to the previous model, except that the hole is unmapped.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(*)</dt><dd>Works only when SINGLEMAP_MEMORY is
     possible as well.</dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_BLOCKS_STAGGERED &amp; TRIVIALMAP_MEMORY</dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  Both have a hole to the right, but are extensible to the right.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No fragmentation at all.
    </dd><dt>(*)</dt><dd>Works only when SINGLEMAP_MEMORY is
     possible as well.</dd></dl></div><p>
 </p></dd><dt>SPVW_MIXED_PAGES</dt><dd><p>The heap consists of many small pages (usually around 8 KB).
  There are two kinds of pages: one for 2-pointer objects, one for
  variable-length objects.
  The set of all pages of a fixed kind is called a "Heap".
  Each page has its hole (free space) at its end.
  For every heap, the pages are kept sorted according to the size of
  their hole, using AVL trees.
  Garbage collection is invoked when the used space has grown by 25%
  since the last GC; until that point new pages are allocated from the
  operating system.
  The GC compacts the data in each page separately:
  data is moved to the left. Emptied pages are given back to the OS.
  If the holes then make up more than 25% of the occupied storage, a
  second GC turn moves objects across pages, from nearly empty ones to
  nearly full ones, with the aim to free as many pages as possible.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(-)</dt><dd>every allocation requires AVL tree operations,
     thus slower</dd><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>Works on operating systems which do not provide
     large contiguous areas.</dd></dl></div><p>
 </p></dd><dt>SPVW_PURE_PAGES</dt><dd><p>Just like SPVW_MIXED_PAGES, except that every page
  contains data of only a single type tag, i.e. there is a Heap for
  every type tag.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(-)</dt><dd>every allocation requires AVL tree operations,
     thus slower</dd><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>Works on operating systems which do not provide
     large contiguous areas.</dd><dt>(-)</dt><dd>More fragmentation because objects of different
    type never fit into the same page.</dd></dl></div></dd><dt>SPVW_PURE_BLOCKS</dt><dd><p>There is a big block of storage for each type tag.
  Each of these blocks has its data to the left and the hole to the
  right, but these blocks are extensible to the right (because there is
  enough room between them).
  A garbage collection is triggered when the allocation amount since the
  last GC reaches 50% of the amount of used space at the last GC, but at
  least 512 KB.
  The garbage collection cleans up each block separately: data is moved left.
  </p><div class="variablelist"><p class="title"><b>overview</b></p><dl><dt>(+)</dt><dd>Total heap size grows depending on the
     application's needs.</dd><dt>(+)</dt><dd>No 16 MB total size limit.
    </dd><dt>(*)</dt><dd>Works only in combination with SINGLEMAP_MEMORY.
    </dd></dl></div><p>
 </p></dd></dl></div><p>In page based memory models, an object larger than a page is the
only object carried by its pages.
There are no small objects in pages belonging to a big object.</p><p>The following combinations of memory model and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/mmap.html" target="_top"><tt class="function">mmap</tt></a> tricks are
possible (the number indicates the order in which the respective models
have been developed):</p><div class="table"><a id="mem-models-comb-typecodes"></a><p class="title"><b>Table 31.1. Memory models with TYPECODES</b></p><table summary="Memory models with TYPECODES" border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">no MAP_MEMORY</th><th align="center">TRIVIALMAP_MEMORY</th><th align="center">SINGLEMAP_MEMORY</th><th align="center">MULTIMAP_MEMORY</th><th align="center">GENERATIONAL_GC</th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">1</td><td align="center">10</td><td align="center"> </td><td align="center">2</td><td align="center">9</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">7</td><td align="center"> </td><td align="center"> </td><td align="center">8</td></tr><tr><td align="center">SPVW_PURE_BLOCKS</td><td align="center"> </td><td align="center"> </td><td align="center">5</td><td align="center"> </td><td align="center">6</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">3</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">SPVW_PURE_PAGES</td><td align="center">4</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><div class="table"><a id="mem-models-comb-no-typecodes"></a><p class="title"><b>Table 31.2. Memory models with no TYPECODES</b></p><table summary="Memory models with no TYPECODES" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">no MAP_MEMORY</th><th align="center">TRIVIALMAP_MEMORY</th><th align="center">GENERATIONAL_GC</th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">*</td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">*</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gc-safety"></a>31.4. The burden of <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion upon the rest of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a></h2></div></div><div></div></div><p>Every subroutine marked with <span class="emphasis"><em>can trigger GC</em></span>
may invoke <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>.
<a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> moves all the <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects and updates the pointers.
But the <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> looks only on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> and not in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
variables. (Anything else would not be portable.)
Therefore at every "unsafe" point, i.e. every call to such a subroutine,
all the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> variables of type <span class="type">object</span>
<span class="emphasis"><em>MUST BE ASSUMED TO BECOME GARBAGE</em></span>.
(Except for <span class="type">object</span>s that are known to be unmovable,
 e.g. immediate data or <span class="type">Subr</span>s.)
Pointers inside <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> data (e.g. to the characters of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a>
or to the elements of a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>) become
<span class="emphasis"><em>INVALID</em></span> as well.</p><p>The workaround is usually to allocate all the needed <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> data
first and do the rest of the computation with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> variables,
without calling unsafe routines, and without worrying about <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>.</p><p>Run-time GC-safety checking is available when you build <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 with a C++ compiler, e.g.:
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="screen">
bash$ CC=g++ ./configure --with-debug build-g-gxx
</pre></td></tr></table><p>
When built like this, <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> will abort when you reference GC-unsafe
data after an allocation (which could have triggered a <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion),
and <a href="http://sources.redhat.com/gdb/" target="_top"><span><b class="command">gdb</b></span></a> will pinpoint the trouble spot.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="foreign-pointers"></a>31.5. Foreign Pointers</h2></div></div><div></div></div><p>Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> functions and to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html" target="_top"><tt class="function">malloc</tt></a>ed data can be
hidden in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects of type machine_type; <a href="#gc" title="Chapter&#xA0;31.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> will not modify its
value.  But one should not dare to assume that a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> stack pointer
or the address of a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function in a shared library satisfies the
same requirements.</p><p>If another pointer is to be viewed as a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> object, it is best
to box it, e.g. in a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><tt class="classname">SIMPLE-BIT-VECTOR</tt></a> or in an
<span class="type">Fpointer</span> (using <tt class="function">allocate_fpointer()</tt>.)</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="extend"></a>Chapter 32. Extending <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>.</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#add-fun">32.1. Adding a built-in function.</a></span></dt><dt><span class="section"><a href="#add-var">32.2. Adding a built-in variable.</a></span></dt><dt><span class="section"><a href="#recompile">32.3. Recompilation.</a></span></dt></dl></div><div class="epigraph"><p><a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> is a <span class="emphasis"><em>programmable</em></span>
  programming language</p><div class="attribution"><span>--<span class="attribution"><a href="http://www.franz.com/~jkf/" target="_top">John
  Foderaro</a></span></span></div></div><p><a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> can be easily extended the same way any other <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>
 implementation can: create a lisp file with your variables, functions,
 macros, etc.; <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><tt class="function">LOAD</tt></a> it into a running <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, and save the
 <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image">memory image</a>.</p><p>This method does not work when you need to use some functionality
 not available in <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>, e.g., you want to call a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function.
 You are urged to use <a href="#modules" title="30.2.&#xA0;Extensions-2.2. External Modules">External Modules</a>
 instead of adding built-in function.
 Note that <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> comes with an <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> which allows you to access
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> libraries in an easy way (including creating
 <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a>s dynamically).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-fun"></a>32.1. Adding a built-in function.</h2></div></div><div></div></div><p>In the rare cases when you really need to modify <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
 internals and add a truly built-in function, you should read the
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> sources for inspiration and enlightenment, choose a file where
 your brand-new built-in function should go to, and then ...
 </p><div class="itemizedlist"><ul type="disc"><li>add the <tt class="function">LISPFUN</tt>
    form and the implementation there;</li><li>add the <tt class="function">LISPFUN</tt> header to
    file <tt class="filename">#P"subr.d"</tt>;</li><li>declare the function name in file
    <tt class="filename">#P"constsym.d"</tt> in the appropriate package
    (probably <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>, if there is no specific package);
  </li><li>if your function accepts keyword arguments,
    then an appropriate pair of forms must be added
    to <tt class="filename">#P"subrkw.d"</tt> and you must make sure that the
    keyword symbols are declared in <tt class="filename">#P"constsym.d"</tt>;
  </li><li>export your function name from the appropriate
    package in file <tt class="filename">#P"init.lisp"</tt>;</li><li>when you are done, you should run <span><b class="command">make
     check-sources</b></span> in your build directory: this will check
    that the definitions (source files) and the declarations
    (<tt class="filename">#P"subr.d"</tt>, <tt class="filename">#P"subrkw.d"</tt>
    and <tt class="filename">#P"fsubr.d"</tt>) are in sync.</li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Be very careful with the <span class="emphasis"><em>GC-unsafe</em></span>
  functions!  Always remember about <a href="#gc-safety" title="31.4.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>!</p></div><p>These instructions are intentionally terse - you are encouraged
 to use <a href="#dffi" title="30.3.&#xA0;Extensions-2.3. The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> instead of adding built-ins directly.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-var"></a>32.2. Adding a built-in variable.</h2></div></div><div></div></div><p>If you must be able to access the variable in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> code,
 follow these steps:
 </p><div class="itemizedlist"><ul type="disc"><li>declare the variable name
    in <tt class="filename">#P"constsym.d"</tt> in the appropriate package
    (probably <a href="#customize" title="29.11.&#xA0;Extensions-1.11. Customizing CLISP behavior."><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>, if there is no specific package);
  </li><li>add a <tt class="function">define_variable()</tt> call
    in function <tt class="function">init_symbol_values()</tt>
    in file <tt class="filename">#P"spvw.d"</tt>;</li><li>export your variable name from the appropriate
    package in file <tt class="filename">#P"init.lisp"</tt>;
</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="recompile"></a>32.3. Recompilation.</h2></div></div><div></div></div><p><span class="emphasis"><em>Any</em></span> change that forces <span><b class="command">make</b></span>
 to remake <tt class="filename">#P"lisp.run"</tt>, will force recompilation
 of all <tt class="filename">#P".lisp"</tt> files and re-dumping of <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a>, which may be
 time-consuming.  This is not always necessary, depending on what kind
 of change you introduced.</p><p>On the other hand, if you change any of the following files:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><tt class="filename">#P"constobj.d"</tt></td></tr><tr><td><tt class="filename">#P"constsym.d"</tt></td></tr><tr><td><tt class="filename">#P"fsubr.d"</tt></td></tr><tr><td><tt class="filename">#P"subr.d"</tt></td></tr><tr><td><tt class="filename">#P"subrkw.d"</tt></td></tr></table><p>
 your <a href="#image" title="29.1.&#xA0;Extensions-1.1. Saving an Image"><tt class="filename">#P"lispinit.mem"</tt></a> will <span class="emphasis"><em>have</em></span> to be re-dumped.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="byte-version"></a>Warning</h3><p>If you change the signature of any
 system function mentioned in the <tt class="varname">FUNTAB</tt> arrays in
 file <tt class="filename">#P"eval.d"</tt>, all the <tt class="filename">#P".fas"</tt> files will
 become obsolete and will need to be recompiled.
 You will need to add a note to that effect to
 the <tt class="filename">#P"NEWS"</tt> file
 and augment the object <tt class="literal">version</tt> in
 file <tt class="filename">#P"constsym.d"</tt>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="bytecode"></a>Chapter 33. The <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> bytecode specification</h2></div><div><h3 class="subtitle"><i>Last modified: 19 September 1998.</i></h3></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#byte-intro">33.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">33.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">33.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">33.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">33.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">33.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">33.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">33.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">33.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">33.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">33.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">33.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">33.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">33.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">33.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">33.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">33.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">33.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">33.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">33.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">33.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">33.5.17. Shortcut instructions</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="byte-intro"></a>33.1. Introduction</h2></div></div><div></div></div><p>The <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> compiler compiles <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> programs into instruction codes
for a virtual processor.  This bytecode is optimized for saving space in
the most common cases of <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> programs.  The main advantages/drawbacks
of this approach, compared to native code compilation, are:
</p><div class="itemizedlist"><ul type="disc"><li>Bytecode compiled programs are a lot smaller than
  when compiled to native code.  This results in better use of CPU
  caches, and in less virtual memory paging. Users perceive this as good
  responsiveness.</li><li>Maximum execution speed (throughput in tight loops)
   is limited.</li><li>Since no bytecode instructions are provided for
   "unsafe" operations (like unchecked array accesses, or "fast"
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>), programs run with all safety checks enabled even when
   compiled.</li><li>Execution speed of a program can easily be
   understood by looking at the output of the <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><tt class="function">DISASSEMBLE</tt></a> function.
   A rule of thumb is that every elementary instruction costs 1 time
   unit, whereas a function call costs 3 to 4 time units.
  </li><li>Needing to do no type inference, the compiler is
   pretty straightforward and fast.  As a consequence, the definition of
   <span><b class="command">CLOS</b></span> generic functions, which needs to compile small pieces of
   generated code, is not perceived to be slow.</li><li>The compiler is independent from the hardware CPU.
   Different back-ends, one for each hardware CPU, are not needed.  As a
   consequence, the compiler is fairly small (and would have been easily
   maintainable if it were written in a less kludgey way...), and it is
   impossible for the compiler writer to introduce CPU dependent bugs.
 </li></ul></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="vm"></a>33.2. The virtual machine</h2></div></div><div></div></div><p>The bytecode can be thought of as being interpreted by a virtual
processor.  The engine which actually interprets the bytecode (the
"implementation of the virtual machine") is actually a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>
function, but it could as well be a just-in-time compiler which
translates a function's bytecode into hardware CPU instructions the
first time said function is called.</p><p>The virtual machine is a stack machine with two stacks:
</p><div class="variablelist"><dl><dt><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a></dt><dd>a stack for <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects and frames
   (“<span class="quote">Lisp stack</span>”).</dd><dt><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a></dt><dd>a stack for other data and pointers
   (“<span class="quote">Program stack</span>”).</dd></dl></div><p>This two-stack architecture permits to save an unlimited number of
<a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> (needed for handling of <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>),
without consing.  Also, in a world with a compacting no-ambiguous-roots
garbage collector, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> must only hold <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects, and <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> can
hold all the other data belonging to a frame, which would not fit into
<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> without tagging/untagging overhead.</p><p>The scope of <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> and <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> is only valid for a given function
invocation.  Whereas the amount of <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> space needed for executing a
function (excluding other function calls) is unlimited, the amount of
<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> space needed is known a priori, at compile time.  When a function
is called, no relation is specified between the caller's <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> and the
callee's <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and between the caller's <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> and the callee's <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>.
The bytecode is designed so that outgoing arguments on the caller's
<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> can be shared by the caller's incoming arguments area (on the
callee's <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>), but a virtual machine implementation may also copy
outgoing arguments to incoming arguments instead of sharing them.</p><p>The virtual machine has a special data structure,
<tt class="literal">values</tt>, containing the "top of stack", specially
adapted to <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>:
</p><div class="variablelist"><dl><dt><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a></dt><dd>an unsigned integer.
  </dd><dt><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a></dt><dd>the first value, a <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> object.
  If <tt class="literal"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a></tt> = 0, this is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
  </dd><dt><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_space</tt></a></dt><dd>all values except the first one, an array of <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
  objects.</dd></dl></div><p>The contents of <tt class="literal">values</tt> is short-lived.
It does not survive a function call, not even a garbage collection.</p><p>The interpretation of some bytecode instructions depends on a
constant, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.  This is a CPU-dependent number, the value of
<tt class="varname">SYSTEM::*JMPBUF-SIZE*</tt>.  In <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a>, it is defined as
<tt class="literal">ceiling(sizeof(jmp_buf),sizeof(void*))</tt>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="comp-fun"></a>33.3. The structure of compiled functions</h2></div></div><div></div></div><p>A compiled function consists of two objects: The function itself,
containing the references to all <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects needed for the bytecode,
and a byte vector containing only immediate data, including the bytecode
proper.</p><p>Typically, the byte vector is about twice as large as the function
vector.  The separation thus helps the garbage collector (since the byte
vector does not need to be scanned for pointers).</p><p>A function looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type <tt class="literal">Cclosure</tt>):
</p><div class="variablelist"><dl><dt><a id="func-name"></a>name</dt><dd>This is the name of the function, normally a symbol
   or a list of the form <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt>.
   It is used for printing the function and for error messages.
   This field is immutable.</dd><dt><a id="func-codevec"></a><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a></dt><dd>This is the byte-code vector, a <tt class="type">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html" target="_top"><tt class="classname">SIMPLE-ARRAY</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><tt class="classname">UNSIGNED-BYTE</tt></a> 8) (*))</tt>.
   This field is immutable.</dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[]</dt><dd>The remaining fields in the function object are
   references to other <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> objects.  These references are immutable,
   which is why they are called "constants".  (The referenced <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a>
   objects can be mutable objects, such as <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a>es or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><tt class="classname">VECTOR</tt></a>s,
   however.)</dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">The Exception to the Immutability Rule</h3><p>When a generic function's dispatch code is installed, the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a>
  and <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a> fields are destructively modified.</p></div><p>Some of the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a> can play special roles.
 A function looks like this, in more detail:
</p><div class="variablelist"><dl><dt>name</dt><dd>see <a href="#func-name">above</a>.
 </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a></dt><dd>see <a href="#func-codevec">above</a>.
 </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>*</dt><dd>At most one object, representing the closed-up
   variables, representing the variables of the lexical environment in
   which this function was defined.  It is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a>, which
   looks like this: <tt class="sexp">#(<i class="replaceable"><tt>next</tt></i>
   <i class="replaceable"><tt>value<sub>1</sub></tt></i> ...
   <i class="replaceable"><tt>value<sub>n</sub></tt></i>)</tt>
   where <i class="replaceable"><tt>value<sub>1</sub></tt></i>, ...,
   <i class="replaceable"><tt>value<sub>n</sub></tt></i>
   are the values of the closed-up variables, and
   <i class="replaceable"><tt>next</tt></i> is either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> having the same structure.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>*</dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> tags of the lexical environment in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> part: either a frame pointer to the block frame, or <tt class="literal">#&lt;DISABLED&gt;</tt>.
   The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is the block's name, only for error message purposes.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a>*</dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags of the lexical environment in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><tt class="classname">CONS</tt></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a> part: either a frame pointer to the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, or
   <tt class="literal">#&lt;DISABLED&gt;</tt> if the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> has already been left.  The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a> is a
   <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> containing the names of the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> tags, only
   for the error message purposes.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a>*</dt><dd>If the function was defined with a <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>
   containing <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>, here come the symbols ("keywords"), in their
   correct order.  They are used by the interpreter during function call.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">other-const</tt></a>*</dt><dd>Other objects needed by the function's bytecode.
  </dd></dl></div><p>
</p><p>If <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a> are all absent,
the function is called <span class="emphasis"><em>autonomous</em></span>.
This is the case if the function does not refer to lexical variables,
blocks or tags defined in compile code outside of the function.
In particular, it is the case if the function is defined in a null
lexical environment.</p><p>If some <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, or <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a> are
present, the function (a "closure") is created at runtime.
The compiler only generates a prototype, containing <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> values
instead of each <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">block-const</tt></a>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">tagbody-const</tt></a>.
At runtime, a function is created by copying this prototype and
replacing the <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> values by the definitive ones.</p><p>The list <tt class="sexp">(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a>*
<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">other-const</tt></a>*)</tt> normally does not contain duplicates, because
the compiler removes duplicates when possible.  (Duplicates can occur
nevertheless, through the use of <a href="http://www.lisp.org/HyperSpec/Body/speope_load-time-value.html" target="_top"><tt class="function">LOAD-TIME-VALUE</tt></a>.)</p><p>The <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">codevec</tt></a> looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> type <tt class="literal">Codevec</tt>):
</p><div class="variablelist"><dl><dt><tt class="literal">spdepth_1</tt> (2 bytes)</dt><dd>The 1st part of the maximal <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> depth.
  </dd><dt><tt class="literal">spdepth_jmpbufsize</tt> (2 bytes)</dt><dd>The <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> part of the maximal <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> depth.
   The maximal <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> depth (precomputed by the compiler) is given by
   <tt class="literal">spdepth_1 + spdepth_jmpbufsize * <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a></tt>.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> (2 bytes)</dt><dd>Number of required parameters.
  </dd><dt><tt class="literal">numopt</tt> (2 bytes)</dt><dd>Number of optional parameters.
  </dd><dt><a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a> (1 byte)</dt><dd><div class="variablelist"><dl><dt>bit 0</dt><dd>set if the function has an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> parameter
    </dd><dt>bit 7</dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters
    </dd><dt>bit 6</dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a>
    </dd><dt>bit 4</dt><dd>set if the function is a generic function
    </dd><dt>bit 3</dt><dd>set if the function is a generic function and its
     effective method shall be returned (instead of being executed)
    </dd></dl></div></dd><dt><tt class="literal">signature</tt> (1 byte)</dt><dd>An abbreviation code depending on
    <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>, <tt class="literal">numopt</tt>, <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a>.
    It is used for speeding up the function
    call.</dd><dt><tt class="literal">numkey</tt> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)</dt><dd>The number of <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters.
   </dd><dt><tt class="literal">keyconsts</tt> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>)</dt><dd>The offset of the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">keyword-const</tt></a> in the function.
   </dd><dt><tt class="literal">byte</tt>* (any number of bytes)</dt><dd>The bytecode instructions.
   </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-struct"></a>33.4. The general structure of the instructions</h2></div></div><div></div></div><p>All instructions consist of one byte, denoting the opcode, and
some number of operands.</p><p>The conversion from a byte (in the range 0..255) to the opcode is
performed by lookup in the table contained in the file
<tt class="filename">#P"bytecode.d"</tt>.</p><p>There are the following types of operands, denoted by different
letters:
</p><div class="variablelist"><dl><dt><i class="replaceable"><tt>k</tt></i>, <i class="replaceable"><tt>n</tt></i>, <i class="replaceable"><tt>m</tt></i>, <i class="replaceable"><tt>l</tt></i></dt><dd>A (nonnegative) numeric operand.
   The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value (7 bits).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
   together form the value (15 bits).
  </dd><dt><i class="replaceable"><tt>b</tt></i></dt><dd>A (nonnegative) 1-byte operand.
   The next byte is read and is the value.
  </dd><dt><i class="replaceable"><tt>label</tt></i></dt><dd>A label operand.
   A signed numeric operand is read: The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value
    (7 bits, sign-extended).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
    together form the value (15 bits, sign-extended).
   If the latter 15-bit result is zero, then four more bytes are read
    and put together (32 bits, sign-extended).
   Finally, the bytecode pointer for the target is computed as the
   current bytecode pointer (pointing after the operand just read), plus
   the signed numeric operand.
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-set"></a>33.5. The instruction set</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="#instr-const">33.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">33.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">33.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">33.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">33.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">33.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">33.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">33.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">33.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">33.5.10. Instructions for
   <tt class="function">BLOCK</tt> and <tt class="function">RETURN-FROM</tt></a></span></dt><dt><span class="section"><a href="#instr-tagbody">33.5.11. Instructions for <tt class="function">TAGBODY</tt> and <tt class="function">GO</tt></a></span></dt><dt><span class="section"><a href="#instr-catch">33.5.12. Instructions for <tt class="function">CATCH</tt> and <tt class="function">THROW</tt></a></span></dt><dt><span class="section"><a href="#instr-unwind">33.5.13. Instructions for <tt class="function">UNWIND-PROTECT</tt></a></span></dt><dt><span class="section"><a href="#instr-handler">33.5.14. Instructions for <tt class="function">HANDLER-BIND</tt></a></span></dt><dt><span class="section"><a href="#instr-inline">33.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">33.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">33.5.17. Shortcut instructions</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-const"></a>33.5.1. Instructions for constants</h3></div></div><div></div></div><div class="informaltable"><a id="instr-const-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(PUSH-NIL <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Push <i class="replaceable"><tt>n</tt></i><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>s into the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center"><i class="replaceable"><tt>n</tt></i> times do: *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Load the function's <i class="replaceable"><tt>n</tt></i>th constant into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>],
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-lex-var"></a>33.5.2. Instructions for lexical variables</h3></div></div><div></div></div><div class="informaltable"><a id="instr-lex-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Load a directly accessible local variable into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(LOADI <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Load an indirectly accessible local variable into values.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
              <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+ <i class="replaceable"><tt>n</tt></i>),
              <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(LOADC <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Load a closed-up variable, defined in the same function and
             directly accessible, into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>),1+<i class="replaceable"><tt>m</tt></i>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(LOADV <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Load a closed-up variable, defined in an outer function,
             into values.</td><td align="center"><i class="replaceable"><tt>v</tt></i> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>,
             <i class="replaceable"><tt>m</tt></i> times do: <i class="replaceable"><tt>v</tt></i> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>v</tt></i>,0),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>v</tt></i>,<i class="replaceable"><tt>m</tt></i>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(LOADIC <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Load a closed-up variable, defined in the same function and
             indirectly accessible, into values.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+<i class="replaceable"><tt>n</tt></i>),1+<i class="replaceable"><tt>m</tt></i>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Store values into a directly accessible local variable.</td><td align="center">*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(STOREI <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Store values into an indirectly accessible local variable.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
              *(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+ <i class="replaceable"><tt>n</tt></i>) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
              <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(STOREC <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Store values into a closed-up variable, defined in the same
             function and directly accessible.</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>),1+m) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(STOREV <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Store values into a closed-up variable, defined in an outer
             function.</td><td align="center"><i class="replaceable"><tt>v</tt></i> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a>,
             <i class="replaceable"><tt>m</tt></i> times do: <i class="replaceable"><tt>v</tt></i> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>v</tt></i>,0),
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>v</tt></i>,<i class="replaceable"><tt>m</tt></i>) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(STOREIC <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Store values into a closed-up variable, defined in the same
             function and indirectly accessible.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+<i class="replaceable"><tt>n</tt></i>),1+<i class="replaceable"><tt>m</tt></i>) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-dyn-var"></a>33.5.3. Instructions for dynamic variables</h3></div></div><div></div></div><div class="informaltable"><a id="instr-dyn-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(GETVALUE
             <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Load a symbol's value into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := symbol-value(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>]),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(SETVALUE
             <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Store values into a symbol's value.</td><td align="center">symbol-value(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>]) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(BIND
             <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Bind a symbol dynamically.</td><td align="center">Bind the value of the symbol
             <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] to <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             implicitly <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= 3,
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(UNBIND1)</tt></td><td align="center">Dissolve one binding frame.</td><td align="center">Unbind the binding frame <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> is pointing to,
             implicitly <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 3</td></tr><tr><td align="center"><tt class="sexp">(UNBIND
             <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Dissolve <i class="replaceable"><tt>n</tt></i> binding frames.</td><td align="center"><i class="replaceable"><tt>n</tt></i> times do:
              Unbind the binding frame <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> is pointing to, thereby
              incrementing <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             Thus, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 1+2*<i class="replaceable"><tt>n</tt></i></td></tr><tr><td align="center"><tt class="sexp">(PROGV)</tt></td><td align="center">Bind a set of symbols dynamically to a set of values.</td><td align="center"><i class="replaceable"><tt>symbols</tt></i> := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             build a single binding frame binding the symbols in
             <i class="replaceable"><tt>symbols</tt></i> to the values in <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             values undefined</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-stack"></a>33.5.4. Instructions for stack operations</h3></div></div><div></div></div><div class="informaltable"><a id="instr-stack-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(PUSH)</tt></td><td align="center">Push one object onto the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center">*--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(POP)</tt></td><td align="center">Pop one object from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(SKIP <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Restore a previous <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> pointer.
             Remove <i class="replaceable"><tt>n</tt></i> objects from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> + <i class="replaceable"><tt>n</tt></i></td></tr><tr><td align="center"><tt class="sexp">(SKIPI <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Restore a previous <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> pointer. Remove an unknown
             number of objects from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>+1,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> + <i class="replaceable"><tt>n</tt></i></td></tr><tr><td align="center"><tt class="sexp">(SKIPSP <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i>)</tt></td><td align="center">Restore a previous <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> pointer.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-jump"></a>33.5.5. Instructions for control flow, jumps</h3></div></div><div></div></div><div class="informaltable"><a id="instr-jump-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(SKIP&amp;RET <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Clean up the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and return from the function.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>,
            return from the function, returning values.</td></tr><tr><td align="center"><tt class="sexp">(SKIP&amp;RETGF <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Clean up the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and return from the generic
             function.</td><td align="center">If bit 3 is set in the function's <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">flags</tt></a>,
                then <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1,
                     and return from the function.
             Otherwise: if the current function has no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> argument,
                then <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>,
                     apply <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> to the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> arguments
                           still on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and
                           return from the function.
                Else <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a>-1,
                     apply <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> to the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">numreq</tt></a> arguments and the
                           <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> argument, all still on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and
                           return from the function.</td></tr><tr><td align="center"><tt class="sexp">(JMP <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>.</td><td align="center">PC := <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is true.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, PC := <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is false.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, PC := <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(JMPIF1 <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i> and forget secondary values,
             if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is true.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
                <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(JMPIFNOT1 <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i> and forget secondary values,
             if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is false.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
                <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(JMPIFATOM <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not a cons.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not a cons, PC := <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFCONSP <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is a cons.</td><td align="center">If <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is a cons, PC := <i class="replaceable"><tt>label</tt></i>.
                values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFEQ <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to the top-of-stack.</td><td align="center">If eq(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++), PC := <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFNOTEQ <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>
             to the top-of-stack.</td><td align="center">If not eq(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++), PC := <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFEQTO <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>,
             if the top-of-stack is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> to a constant.</td><td align="center">If eq(*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>]), PC := <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFNOTEQTO <i class="replaceable"><tt>n</tt></i>
             <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if the top-of-stack is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>
             to a constant.</td><td align="center">If not eq(*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>]), PC := <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPHASH <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Table-driven jump, depending on <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td><td align="center">Lookup <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> in the hash table <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>].
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>,
             jump to it: PC := PC + value.  Else jump to <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPHASHV <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Table-driven jump, depending on <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>,
             inside a generic function.</td><td align="center">Lookup <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> in the hash table <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[0],<i class="replaceable"><tt>n</tt></i>).
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>,
             jump to it: PC := PC + value.  Else jump to <i class="replaceable"><tt>label</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JSR <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Subroutine call.</td><td align="center">*--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := function. Then start interpreting the
             bytecode at <i class="replaceable"><tt>label</tt></i>, with values undefined.
             When a <tt class="sexp">(RET)</tt> is encountered,
             program execution is resumed at the instruction after
             <tt class="sexp">(JSR <i class="replaceable"><tt>label</tt></i>)</tt>.</td></tr><tr><td align="center"><tt class="sexp">(JMPTAIL <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>
             <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Tail subroutine call.</td><td align="center"><i class="replaceable"><tt>n</tt></i><a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><tt class="function">&gt;=</tt></a><i class="replaceable"><tt>m</tt></i>.
             The <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> frame of size <i class="replaceable"><tt>n</tt></i> is reduced to size <i class="replaceable"><tt>m</tt></i>:
             {*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-<i class="replaceable"><tt>m</tt></i>), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1)} :=
               {*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>m</tt></i>-1)}.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += n-m.
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := function.
             Then jump to <i class="replaceable"><tt>label</tt></i>, with values undefined.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-env"></a>33.5.6. Instructions for lexical environment,
   creation of closures</h3></div></div><div></div></div><div class="informaltable"><a id="instr-env-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(VENV)</tt></td><td align="center">Load the <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">venv-const</tt></a> into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[0], <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(MAKE-VECTOR1&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> used for closed-up variables.</td><td align="center"><i class="replaceable"><tt>v</tt></i> := new <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> of size <i class="replaceable"><tt>n</tt></i>+1.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>v</tt></i>,0) := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <i class="replaceable"><tt>v</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(COPY-CLOSURE <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Create a closure by copying the prototype and filling in
             the lexical environment.</td><td align="center"><i class="replaceable"><tt>f</tt></i> := copy-function(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>m</tt></i>]).
             For <i class="replaceable"><tt>i</tt></i>=0,..,<i class="replaceable"><tt>n</tt></i>-1:
                 <i class="replaceable"><tt>f</tt></i>_<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[i] := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1-<i class="replaceable"><tt>i</tt></i>).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <i class="replaceable"><tt>f</tt></i>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-funcall"></a>33.5.7. Instructions for function calls</h3></div></div><div></div></div><div class="informaltable"><a id="instr-funcall-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(CALL <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a constant function with <i class="replaceable"><tt>k</tt></i> arguments.</td><td align="center">The function <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] is called
             with the arguments *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>k</tt></i>-1), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>k</tt></i>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALL0 <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a constant function with 0 arguments.</td><td align="center">The function <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] is called with 0 arguments.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALL1 <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a constant function with 1 argument.</td><td align="center">The function <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] is called with one argument *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 1. The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALL2 <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a constant function with 2 arguments.</td><td align="center">The function <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] is called
             with two arguments *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+1) and *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 2. The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALLS1 <i class="replaceable"><tt>b</tt></i>)</tt></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTAB[<i class="replaceable"><tt>b</tt></i>].
             The right number of arguments is already on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALLS2 <i class="replaceable"><tt>b</tt></i>)</tt></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTAB[256+<i class="replaceable"><tt>b</tt></i>].
             The right number of arguments is already on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALLSR <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>b</tt></i>)</tt></td><td align="center">Calls a system function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a>.</td><td align="center">Calls the system function FUNTABR[<i class="replaceable"><tt>b</tt></i>].
             The minimum number of arguments is already on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             and <i class="replaceable"><tt>m</tt></i> additional arguments as well.
             The arguments are removed from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALLC)</tt></td><td align="center">Calls a computed compiled function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             The right number of arguments is already on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
              parameters).
             The arguments are removed from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(CALLCKEY)</tt></td><td align="center">Calls a computed compiled function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             The right number of arguments is already on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (including <tt class="literal">#&lt;UNBOUND&gt;</tt>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
              or <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> parameters).
             The arguments are removed from the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(FUNCALL <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a computed function.</td><td align="center">Calls the function *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>)
             with the arguments *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>+1.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(APPLY <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Calls a computed function with an unknown number of
             arguments.</td><td align="center">Calls the function *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>)
             with the arguments *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0)
             and a list of additional arguments <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>+1.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-optkey"></a>33.5.8. Instructions for optional
  and keyword parameters</h3></div></div><div></div></div><div class="informaltable"><a id="instr-optkey-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(PUSH-UNBOUND <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Push <i class="replaceable"><tt>n</tt></i><tt class="literal">#&lt;UNBOUND&gt;</tt>s into the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center"><i class="replaceable"><tt>n</tt></i> times do: *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(UNLIST <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Destructure a proper <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</td><td align="center">0 ≤ <i class="replaceable"><tt>m</tt></i> ≤ <i class="replaceable"><tt>n</tt></i>.
             <i class="replaceable"><tt>n</tt></i> times do: *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>).
             During the last <i class="replaceable"><tt>m</tt></i> iterations, the list <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>
             may already have reached its end;
             in this case, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             At the end, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(UNLIST* <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center">Destructure a proper or dotted <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a>.</td><td align="center">0 ≤ <i class="replaceable"><tt>m</tt></i> ≤ <i class="replaceable"><tt>n</tt></i>, <i class="replaceable"><tt>n</tt></i> &gt; 0.
             <i class="replaceable"><tt>n</tt></i> times do: *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>).
             During the last <i class="replaceable"><tt>m</tt></i> iterations, the list <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>
             may already have reached its end;
             in this case, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <tt class="literal">#&lt;UNBOUND&gt;</tt>.
             At the end, after <i class="replaceable"><tt>n</tt></i><a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>s, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(JMPIFBOUNDP <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump to <i class="replaceable"><tt>label</tt></i>, if a local variable is not unbound.</td><td align="center">If *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>) is not <tt class="literal">#&lt;UNBOUND&gt;</tt>,
                <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>), <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, PC := <i class="replaceable"><tt>label</tt></i>.
             Else: values undefined.</td></tr><tr><td align="center"><tt class="sexp">(BOUNDP <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values, depending on whether a local
             variable is bound.</td><td align="center">If *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>) is not <tt class="literal">#&lt;UNBOUND&gt;</tt>,
                <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.
             Else: <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(UNBOUND-&gt;NIL <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">If a local variable is unbound, assign a default value
             <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> to it.</td><td align="center">If *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>) is <tt class="literal">#&lt;UNBOUND&gt;</tt>,
             *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>) := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-mulval"></a>33.5.9. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-mulval-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(VALUES0)</tt></td><td align="center">Load no values into values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 0</td></tr><tr><td align="center"><tt class="sexp">(VALUES1)</tt></td><td align="center">Forget secondary values.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>-TO-MV <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Pop the first <i class="replaceable"><tt>n</tt></i> objects from <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> into values.</td><td align="center">Load values(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1),...,*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0)) into
             values. <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(MV-TO-<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>)</tt></td><td align="center">Save values on <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center">Push the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> values onto the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (in order: <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> comes first).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(NV-TO-<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Save <i class="replaceable"><tt>n</tt></i> values on <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.</td><td align="center">Push the first <i class="replaceable"><tt>n</tt></i> values onto the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>
             (in order: <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> comes first).
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= <i class="replaceable"><tt>n</tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(MV-TO-LIST)</tt></td><td align="center">Convert <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a> into a list.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := list of values, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1</td></tr><tr><td align="center"><tt class="sexp">(LIST-TO-MV)</tt></td><td align="center">Convert a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><tt class="classname">LIST</tt></a> into <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.</td><td align="center">Call the function <a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> with <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> as argument.
             The returned values go into values.</td></tr><tr><td align="center"><tt class="sexp">(MVCALLP)</tt></td><td align="center">Start a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><tt class="function">MULTIPLE-VALUE-CALL</tt></a> invocation.</td><td align="center">*--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>. *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td></tr><tr><td align="center"><tt class="sexp">(MVCALL)</tt></td><td align="center">Finish a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><tt class="function">MULTIPLE-VALUE-CALL</tt></a> invocation.</td><td align="center">newSTACK := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>++.
             Call the function *(newSTACK-1), passing it
             *(newSTACK-2), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0) as arguments.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := newSTACK.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-block"></a>33.5.10. Instructions for
   <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><tt class="function">RETURN-FROM</tt></a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-block-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(BLOCK-OPEN <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= 3, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
   The topmost (third) object in the block frame is
   <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>],frame-pointer) (its <i class="replaceable"><tt>block-cons</tt></i>).
   Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><tt class="function">RETURN-FROM</tt></a> to this frame, execution will continue at <i class="replaceable"><tt>label</tt></i>.
   values undefined.</td></tr><tr><td align="center"><tt class="sexp">(BLOCK-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 3,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>. Mark the <i class="replaceable"><tt>block-cons</tt></i> as invalid.</td></tr><tr><td align="center"><tt class="sexp">(RETURN-FROM <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> whose <i class="replaceable"><tt>block-cons</tt></i> is given.</td><td align="center"><i class="replaceable"><tt>block-cons</tt></i> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>block-cons</tt></i>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>block-cons</tt></i>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr><tr><td align="center"><tt class="sexp">(RETURN-FROM-I <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><tt class="function">BLOCK</tt></a> whose <i class="replaceable"><tt>block-cons</tt></i> is indirectly accessible.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <i class="replaceable"><tt>block-cons</tt></i> := *(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+<i class="replaceable"><tt>n</tt></i>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>block-cons</tt></i>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>block-cons</tt></i>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-tagbody"></a>33.5.11. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><tt class="function">GO</tt></a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-tagbody-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(TAGBODY-OPEN <i class="replaceable"><tt>m</tt></i>
             <i class="replaceable"><tt>label<sub>1</sub></tt></i> ...
             <i class="replaceable"><tt>label<sub>n</sub></tt></i>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame.</td><td align="center">Fetch <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>m</tt></i>], this is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><tt class="classname">SIMPLE-VECTOR</tt></a> with
             <i class="replaceable"><tt>n</tt></i> elements, then decode <i class="replaceable"><tt>n</tt></i> label operands.
             Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= 3+<i class="replaceable"><tt>n</tt></i>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> -= 1+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             The third object in the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame is
             <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>(<a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>m</tt></i>],frame-pointer) (the <i class="replaceable"><tt>tagbody-cons</tt></i>)
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><tt class="function">GO</tt></a> to tag <i class="replaceable"><tt>label</tt></i> of this frame, execution
             will continue at
              <i class="replaceable"><tt>label<sub>l</sub></tt></i>.
             values undefined</td></tr><tr><td align="center"><tt class="sexp">(TAGBODY-CLOSE-NIL)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame, and load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> into values.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 3+<i class="replaceable"><tt>m</tt></i>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 1+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Mark the <i class="replaceable"><tt>tagbody-cons</tt></i> as invalid.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(TAGBODY-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 3+<i class="replaceable"><tt>m</tt></i>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 1+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Mark the <i class="replaceable"><tt>tagbody-cons</tt></i> as invalid.</td></tr><tr><td align="center"><tt class="sexp">(GO <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> whose <i class="replaceable"><tt>tagbody-cons</tt></i> is given.</td><td align="center"><i class="replaceable"><tt>tagbody-cons</tt></i> := <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>tagbody-cons</tt></i>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>tagbody-cons</tt></i>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(GO-I <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><tt class="function">TAGBODY</tt></a> whose <i class="replaceable"><tt>tagbody-cons</tt></i> is indirectly
             accessible.</td><td align="center"><i class="replaceable"><tt>k</tt></i> := <i class="replaceable"><tt>k<sub>1</sub></tt></i> + <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a> * <i class="replaceable"><tt>k<sub>2</sub></tt></i>,
             <i class="replaceable"><tt>tagbody-cons</tt></i> := *(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>+<i class="replaceable"><tt>k</tt></i>)+<i class="replaceable"><tt>n</tt></i>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>tagbody-cons</tt></i>) = <tt class="literal">#&lt;DISABLED&gt;</tt>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<i class="replaceable"><tt>tagbody-cons</tt></i>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <i class="replaceable"><tt>label</tt></i>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-catch"></a>33.5.12. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><tt class="function">THROW</tt></a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-catch-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(CATCH-OPEN <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame, with <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> as tag.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= 3, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><tt class="function">THROW</tt></a> to this tag execution continues at
             <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(CATCH-CLOSE)</tt></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 3, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.</td></tr><tr><td align="center"><tt class="sexp">(THROW)</tt></td><td align="center">Non-local exit to a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame.</td><td align="center"><i class="replaceable"><tt>tag</tt></i> := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++.
             Search the innermost <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a> frame with tag
             <i class="replaceable"><tt>tag</tt></i> on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, unwind the
             stack up to it, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-unwind"></a>33.5.13. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-unwind-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(UNWIND-PROTECT-OPEN
             <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame.</td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= 2, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> -= 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             When the stack will be unwound by a non-local exit,
             values will be saved on <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, and execution will be
             transferred to <i class="replaceable"><tt>label</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(UNWIND-PROTECT-NORMAL-EXIT)</tt></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame, and start the cleanup
             code.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 2, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := 0, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := 0, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             Save the values on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.</td></tr><tr><td align="center"><tt class="sexp">(UNWIND-PROTECT-CLOSE)</tt></td><td align="center">Terminate the cleanup code.</td><td align="center">newSTACK := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>++. Load
             values(*(newSTACK-1), ..., *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0)) into values.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := newSTACK. SPword1 := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>++, SPword2 := *<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>++.
             Continue depending on SPword1 and SPword2.
             If both are 0, simply continue execution.
             If SPword2 is 0 but SPword1 is nonzero, interpret it as a
             label and jump to it.</td></tr><tr><td align="center"><tt class="sexp">(UNWIND-PROTECT-CLEANUP)</tt></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame, and execute the cleanup
             code like a subroutine call.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> frame at <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>,
             get <i class="replaceable"><tt>label</tt></i> out of the frame.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 2, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> += 2+<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">jmpbufsize</tt></a>.
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := 0, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := PC, *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>.
             Save the values on the <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> -= <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a>.
             PC := <i class="replaceable"><tt>label</tt></i>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-handler"></a>33.5.14. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><tt class="function">HANDLER-BIND</tt></a></h3></div></div><div></div></div><div class="informaltable"><a id="instr-handler-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(HANDLER-OPEN <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Create a handler frame.</td><td align="center">Create a handler frame, using <a href="#comp-fun" title="33.3.&#xA0;The structure of compiled functions"><tt class="literal">consts</tt></a>[<i class="replaceable"><tt>n</tt></i>] which
             contains the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> types, the corresponding labels and
             the current <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> depth (= function entry <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> - current <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a>).
             </td></tr><tr><td align="center"><tt class="sexp">(HANDLER-BEGIN&amp;PUSH)</tt></td><td align="center">Start a handler.</td><td align="center">Restore the same <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">SP</tt></a> state as after the HANDLER-OPEN.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><tt class="classname">CONDITION</tt></a> that was passed to the handler,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.
             *--<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> := <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-inline"></a>33.5.15. Instructions for some inlined
  functions</h3></div></div><div></div></div><div class="informaltable"><a id="instr-inline-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(NOT)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><tt class="function">NOT</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := not(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(EQ)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := eq(*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(CAR)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CAR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(CDR)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><tt class="function">CDR</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>), <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(CONS)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><tt class="function">CONS</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := cons(*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(SYMBOL-FUNCTION)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a>(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(SVREF)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(*<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>++,<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(SVSET)</tt></td><td align="center">Inlined call to <tt class="function">SYSTEM::SVSTORE</tt>.</td><td align="center"><i class="replaceable"><tt>arg1</tt></i> := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+1),
             <i class="replaceable"><tt>arg2</tt></i> := *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0), <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += 2.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><tt class="function">SVREF</tt></a>(<i class="replaceable"><tt>arg2</tt></i>,<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>) :=
                  <i class="replaceable"><tt>arg1</tt></i>.
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <i class="replaceable"><tt>arg1</tt></i>,
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1.</td></tr><tr><td align="center"><tt class="sexp">(LIST <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST</tt></a>(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1),...,*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0)),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>.</td></tr><tr><td align="center"><tt class="sexp">(LIST* <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST*</tt></a>.</td><td align="center"><a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><tt class="function">LIST*</tt></a>(*(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+<i class="replaceable"><tt>n</tt></i>-1),...,
                                     *(<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a>+0),<a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">value1</tt></a>),
             <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="varname">mv_count</tt></a> := 1, <a href="#vm" title="33.2.&#xA0;The virtual machine"><tt class="literal">STACK</tt></a> += <i class="replaceable"><tt>n</tt></i>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-combo"></a>33.5.16. Combined instructions</h3></div></div><div></div></div><p>The most frequent short sequences of instructions have an
equivalent combined instruction.  They are only present for space and
speed optimization. The only exception is
<tt class="sexp">FUNCALL&amp;SKIP&amp;RETGF</tt>, which is needed for
generic functions.</p><div class="informaltable"><a id="instr-combo-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">equivalent</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(NIL&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(NIL) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(T&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(T) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CONST&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOADI&amp;PUSH <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOADI <i class="replaceable"><tt>k<sub>1</sub></tt></i> <i class="replaceable"><tt>k<sub>2</sub></tt></i> <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOADC&amp;PUSH <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOADC <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOADV&amp;PUSH <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOADV <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>m</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(POP&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(POP) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(GETVALUE&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(GETVALUE <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(JSR&amp;PUSH <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(JSR <i class="replaceable"><tt>label</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(COPY-CLOSURE&amp;PUSH <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(COPY-CLOSURE <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL&amp;PUSH <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL1&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL1 <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL2&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL2 <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS1&amp;PUSH <i class="replaceable"><tt>b</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS1 <i class="replaceable"><tt>b</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS2&amp;PUSH <i class="replaceable"><tt>b</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS2 <i class="replaceable"><tt>b</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLSR&amp;PUSH <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLSR <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLC&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(CALLC) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLCKEY&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(CALLCKEY) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(FUNCALL&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(FUNCALL <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(APPLY&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(APPLY <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CAR&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(CAR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CDR&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(CDR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CONS&amp;PUSH)</tt></td><td align="center"><tt class="sexp">(CONS) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LIST&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LIST <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LIST*&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LIST* <i class="replaceable"><tt>n</tt></i>) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(NIL&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(NIL) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(T&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(T) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;STOREC <i class="replaceable"><tt>k</tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>k</tt></i>) (STOREC <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>m</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS1&amp;STORE <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS1 <i class="replaceable"><tt>b</tt></i>) (STORE <i class="replaceable"><tt>k</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS2&amp;STORE <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS2 <i class="replaceable"><tt>b</tt></i>) (STORE <i class="replaceable"><tt>k</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLSR&amp;STORE <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLSR <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>) (STORE <i class="replaceable"><tt>k</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;CDR&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CDR) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;CONS&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>+1) (CONS) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;INC&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CALL1 #'1+) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;DEC&amp;STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CALL1 #'1-) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;CAR&amp;STORE <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>m</tt></i>) (CAR) (STORE <i class="replaceable"><tt>n</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL1&amp;JMPIF <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL1 <i class="replaceable"><tt>n</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL1&amp;JMPIFNOT <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL1 <i class="replaceable"><tt>n</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL2&amp;JMPIF <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL2 <i class="replaceable"><tt>n</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALL2&amp;JMPIFNOT <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALL2 <i class="replaceable"><tt>n</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS1&amp;JMPIF <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS1 <i class="replaceable"><tt>b</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS1&amp;JMPIFNOT <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS1 <i class="replaceable"><tt>b</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS2&amp;JMPIF <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS2 <i class="replaceable"><tt>b</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLS2&amp;JMPIFNOT <i class="replaceable"><tt>b</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLS2 <i class="replaceable"><tt>b</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLSR&amp;JMPIF <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLSR <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(CALLSR&amp;JMPIFNOT <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(CALLSR <i class="replaceable"><tt>m</tt></i> <i class="replaceable"><tt>n</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;JMPIF <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (JMPIF <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;JMPIFNOT <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>label</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (JMPIFNOT <i class="replaceable"><tt>label</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;CAR&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CAR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;CDR&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CDR) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;INC&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CALL1 #'1+) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;DEC&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>) (CALL1 #'1-) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CONST&amp;SYMBOL-FUNCTION <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>) (SYMBOL-FUNCTION)</tt></td></tr><tr><td align="center"><tt class="sexp">(CONST&amp;SYMBOL-FUNCTION&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>) (SYMBOL-FUNCTION) (PUSH)</tt></td></tr><tr><td align="center"><tt class="sexp">(CONST&amp;SYMBOL-FUNCTION&amp;STORE <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>) (SYMBOL-FUNCTION) (STORE <i class="replaceable"><tt>k</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(APPLY&amp;SKIP&amp;RET <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(APPLY <i class="replaceable"><tt>n</tt></i>) (SKIP&amp;RET <i class="replaceable"><tt>k</tt></i>)</tt></td></tr><tr><td align="center"><tt class="sexp">(FUNCALL&amp;SKIP&amp;RETGF <i class="replaceable"><tt>n</tt></i> <i class="replaceable"><tt>k</tt></i>)</tt></td><td align="center"><tt class="sexp">(FUNCALL <i class="replaceable"><tt>n</tt></i>) (SKIP&amp;RETGF <i class="replaceable"><tt>k</tt></i>)</tt></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-shortcut"></a>33.5.17. Shortcut instructions</h3></div></div><div></div></div><p>There are special one-byte instructions (without explicit
operands) for the following frequent instructions:</p><div class="informaltable"><a id="instr-shortcut-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">operand range</th></tr></thead><tbody><tr><td align="center"><tt class="sexp">(LOAD <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">0 ≤ <i class="replaceable"><tt>n</tt></i> &lt; 15</td></tr><tr><td align="center"><tt class="sexp">(LOAD&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">0 ≤ <i class="replaceable"><tt>n</tt></i> &lt; 25</td></tr><tr><td align="center"><tt class="sexp">(CONST <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">0 ≤ <i class="replaceable"><tt>n</tt></i> &lt; 21</td></tr><tr><td align="center"><tt class="sexp">(CONST&amp;PUSH <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">0 ≤ <i class="replaceable"><tt>n</tt></i> &lt; 30</td></tr><tr><td align="center"><tt class="sexp">(STORE <i class="replaceable"><tt>n</tt></i>)</tt></td><td align="center">0 ≤ <i class="replaceable"><tt>n</tt></i> &lt; 8</td></tr></tbody></table></div></div></div></div></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gfdl"></a>Appendix A. GNU Free Documentation License</h2></div><div><h3 class="subtitle"><i>Version 1.2, November 2002</i></h3></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#gfdl-0">A.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">A.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">A.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">A.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">A.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">A.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">A.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">A.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">A.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">A.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">A.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">A.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></div><div class="blockquote"><a id="fsf-copyright"></a><blockquote class="blockquote"><p>Copyright (C) 2000,2001,2002  Free Software Foundation, Inc.
59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.</p></blockquote></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-0"></a>A.1. PREAMBLE</h2></div></div><div></div></div><p>The purpose of this License is to make a manual, textbook, or
other functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it, with
or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</p><p>This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft license
designed for free software.</p><p>We have designed this License in order to use it for manuals for
free software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals; it
can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-1"></a>A.2. APPLICABILITY AND DEFINITIONS</h2></div></div><div></div></div><p><a id="gfdl-doc"></a>This License applies to any manual or other work, in
any medium, that contains a notice placed by the copyright holder saying
it can be distributed under the terms of this License.  Such a notice
grants a world-wide, royalty-free license, unlimited in duration, to use
that work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission under
copyright law.</p><p><a id="gfdl-mod-ver"></a>A "Modified Version" of the Document means any
work containing the Document or a portion of it, either copied verbatim,
or with modifications and/or translated into another language.</p><p><a id="gfdl-secnd-sect"></a>A "Secondary Section" is a named appendix or
a front-matter section of the Document that deals exclusively with the
relationship of the publishers or authors of the Document to the
Document's overall subject (or to related matters) and contains nothing
that could fall directly within that overall subject.  (Thus, if the
Document is in part a textbook of mathematics, a Secondary Section may
not explain any mathematics.)  The relationship could be a matter of
historical connection with the subject or with related matters, or of
legal, commercial, philosophical, ethical or political position
regarding them.</p><p><a id="gfdl-inv-sect"></a>The "Invariant Sections" are certain Secondary
Sections whose titles are designated, as being those of Invariant
Sections, in the notice that says that the Document is released under
this License.  If a section does not fit the above definition of
Secondary then it is not allowed to be designated as Invariant.  The
Document may contain zero Invariant Sections.  If the Document does not
identify any Invariant Sections then there are none.</p><p><a id="gfdl-cov-text"></a>The "Cover Texts" are certain short passages of
text that are listed, as Front-Cover Texts or Back-Cover Texts, in the
notice that says that the Document is released under this License.  A
Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at
most 25 words.</p><p><a id="gfdl-transparent"></a>A "Transparent" copy of the Document means a
machine-readable copy, represented in a format whose specification is
available to the general public, that is suitable for revising the
document straightforwardly with generic text editors or (for images
composed of pixels) generic paint programs or (for drawings) some widely
available drawing editor, and that is suitable for input to text
formatters or for automatic translation to a variety of formats suitable
for input to text formatters.  A copy made in an otherwise Transparent
file format whose markup, or absence of markup, has been arranged to
thwart or discourage subsequent modification by readers is not
Transparent.  An image format is not Transparent if used for any
substantial amount of text.  A copy that is not "Transparent" is called
"Opaque".</p><p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML or
XML using a publicly available DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</p><p><a id="gfdl-title-page"></a>The "Title Page" means, for a printed book,
the title page itself, plus such following pages as are needed to hold,
legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title
Page" means the text near the most prominent appearance of the work's
title, preceding the beginning of the body of the text.</p><p><a id="gfdl-entitled"></a>A section "Entitled XYZ" means a named subunit
of the Document whose title either is precisely XYZ or contains XYZ in
parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as
"Acknowledgements", "Dedications", "Endorsements", or "History".)  To
"Preserve the Title" of such a section when you modify the Document
means that it remains a section "Entitled XYZ" according to this
definition.</p><p>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-2"></a>A.3. VERBATIM COPYING</h2></div></div><div></div></div><p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p><p>You may also lend copies, under the same conditions stated above,
and you may publicly display copies.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-3"></a>A.4. COPYING IN QUANTITY</h2></div></div><div></div></div><p>If you publish printed copies (or copies in media that commonly
have printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover.  Both covers must also clearly and legibly identify you as the
publisher of these copies.  The front cover must present the full title
with all words of the title equally prominent and visible.  You may add
other material on the covers in addition.  Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</p><p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</p><p>If you publish or distribute Opaque copies of the Document
numbering more than 100, you must either include a machine-readable
Transparent copy along with each Opaque copy, or state in or with each
Opaque copy a computer-network location from which the general
network-using public has access to download using public-standard
network protocols a complete Transparent copy of the Document, free of
added material.  If you use the latter option, you must take reasonably
prudent steps, when you begin distribution of Opaque copies in quantity,
to ensure that this Transparent copy will remain thus accessible at the
stated location until at least one year after the last time you
distribute an Opaque copy (directly or through your agents or retailers)
of that edition to the public.</p><p>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-4"></a>A.5. MODIFICATIONS</h2></div></div><div></div></div><p>You may copy and distribute a Modified Version of the Document
under the conditions of sections 2 and 3 above, provided that you
release the Modified Version under precisely this License, with the
Modified Version filling the role of the Document, thus licensing
distribution and modification of the Modified Version to whoever
possesses a copy of it.  In addition, you must do these things in the
Modified Version:</p><div class="orderedlist"><a id="gfdl-modif-cond"></a><ol type="A"><li>Use in the Title Page (and on the covers, if any) a
  title distinct from that of the Document, and from those of previous
  versions (which should, if there were any, be listed in the History
  section of the Document).  You may use the same title as a previous
  version if the original publisher of that version gives permission.
</li><li>List on the Title Page, as authors, one or more
  persons or entities responsible for authorship of the modifications in
  the Modified Version, together with at least five of the principal
  authors of the Document (all of its principal authors, if it has fewer
  than five), unless they release you from this requirement.
</li><li>State on the Title page the name of the publisher of
  the Modified Version, as the publisher.</li><li>Preserve all the copyright notices of the Document.
</li><li>Add an appropriate copyright notice for your
  modifications adjacent to the other copyright notices.
</li><li>Include, immediately after the copyright notices, a
  license notice giving the public permission to use the Modified
  Version under the terms of this License, in the form shown in the
  <a href="#gfdl-addendum" title="A.12.&#xA0;ADDENDUM: How to use this License for&#10;  your documents">Addendum</a> below.
</li><li>Preserve in that license notice the full lists of
  Invariant Sections and required Cover Texts given in the Document's
  license notice.</li><li>Include an unaltered copy of this License.
</li><li>Preserve the section Entitled "History", Preserve its
  Title, and add to it an item stating at least the title, year, new
  authors, and publisher of the Modified Version as given on the Title
  Page.  If there is no section Entitled "History" in the Document,
  create one stating the title, year, authors, and publisher of the
  Document as given on its Title Page, then add an item describing the
  Modified Version as stated in the previous sentence.
</li><li>Preserve the network location, if any, given in the
  Document for public access to a Transparent copy of the Document, and
  likewise the network locations given in the Document for previous
  versions it was based on.  These may be placed in the "History"
  section.  You may omit a network location for a work that was
  published at least four years before the Document itself, or if the
  original publisher of the version it refers to gives permission.
</li><li>For any section Entitled "Acknowledgements" or
  "Dedications", Preserve the Title of the section, and preserve in the
  section all the substance and tone of each of the contributor
  acknowledgements and/or dedications given therein.
</li><li>Preserve all the Invariant Sections of the Document,
  unaltered in their text and in their titles.  Section numbers or the
  equivalent are not considered part of the section titles.
</li><li>Delete any section Entitled "Endorsements".
  Such a section may not be included in the Modified Version.
</li><li>Do not retitle any existing section to be Entitled
  "Endorsements" or to conflict in title with any Invariant Section.
</li><li>Preserve any Warranty Disclaimers.
</li></ol></div><p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.</p><p>You may add a section Entitled "Endorsements", provided it
contains nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.</p><p>You may add a passage of up to five words as a Front-Cover Text,
and a passage of up to 25 words as a Back-Cover Text, to the end of the
list of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity.  If the Document already includes
a cover text for the same cover, previously added by you or by
arrangement made by the same entity you are acting on behalf of, you may
not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.</p><p>The author(s) and publisher(s) of the Document do not by this
License give permission to use their names for publicity for or to
assert or imply endorsement of any Modified Version.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-5"></a>A.6. COMBINING DOCUMENTS</h2></div></div><div></div></div><p>You may combine the Document with other documents released under
this License, under the terms defined in <a href="#gfdl-4" title="A.5.&#xA0;MODIFICATIONS">section
4</a> above for modified versions, provided that you include in the
combination all of the Invariant Sections of all of the original
documents, unmodified, and list them all as Invariant Sections of your
combined work in its license notice, and that you preserve all their
Warranty Disclaimers.</p><p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number.  Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</p><p>In the combination, you must combine any sections Entitled
"History" in the various original documents, forming one section
Entitled "History"; likewise combine any sections Entitled
"Acknowledgements", and any sections Entitled "Dedications".  You must
delete all sections Entitled "Endorsements".</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-6"></a>A.7. COLLECTIONS OF DOCUMENTS</h2></div></div><div></div></div><p>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</p><p>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-7"></a>A.8. AGGREGATION WITH INDEPENDENT WORKS</h2></div></div><div></div></div><p>A compilation of the Document or its derivatives with other
separate and independent documents or works, in or on a volume of a
storage or distribution medium, is called an "aggregate" if the
copyright resulting from the compilation is not used to limit the legal
rights of the compilation's users beyond what the individual works
permit.  When the Document is included in an aggregate, this License does
not apply to the other works in the aggregate which are not themselves
derivative works of the Document.</p><p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form.  Otherwise
they must appear on printed covers that bracket the whole
aggregate.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-8"></a>A.9. TRANSLATION</h2></div></div><div></div></div><p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</p><p>If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual
title.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-9"></a>A.10. TERMINATION</h2></div></div><div></div></div><p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided for under this License.  Any other attempt
to copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this License
will not have their licenses terminated so long as such parties remain
in full compliance.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-10"></a>A.11. FUTURE REVISIONS OF THIS LICENSE</h2></div></div><div></div></div><p>The Free Software Foundation may publish new, revised versions of
the GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
http://www.gnu.org/copyleft/.</p><p>Each version of the License is given a distinguishing version
number.  If the Document specifies that a particular numbered version of
this License "or any later version" applies to it, you have the option
of following the terms and conditions either of that specified version
or of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-addendum"></a>A.12. ADDENDUM: How to use this License for
  your documents</h2></div></div><div></div></div><p>To use this License in a document you have written, include a copy
of the License in the document and put the following copyright and
license notices just after the title page:</p><div class="blockquote"><a id="copyright-sample"></a><blockquote class="blockquote"><p>
    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.2
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".
</p></blockquote></div><p>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the "with...Texts." line with this:</p><div class="blockquote"><a id="inv-cover-sample"></a><blockquote class="blockquote"><p>
    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.
</p></blockquote></div><p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</p><p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</p></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="idx"></a>Index</h2></div></div><div></div></div><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>*CURRENT-LANGUAGE*
 , <a href="#language">The Language</a></dt><dt>*WINDOW*
    , <a href="#screen">Extensions-2.1. Random Screen Access</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>CLASS-FINALIZED-P
 , <a href="#def-class">Defining Classes
  [CLHS-4.3.2]</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>DEFINTERNATIONAL
 , <a href="#language">The Language</a></dt><dt>DEFLANGUAGE
 , <a href="#language">The Language</a></dt><dt>DEFLOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>FINALIZE-INHERITANCE
 , <a href="#def-class">Defining Classes
  [CLHS-4.3.2]</a></dt><dt>FORMAT</dt><dd><dl><dt>~!, <a href="#format">Function FORMAT</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GC
 , <a href="#room">Function ROOM</a></dt><dt>GENERIC-FLET
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt><dt>GENERIC-LABELS
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>linking set, <a href="#mod-overview">Overview</a></dt><dt>LOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MAKE-XTERM-IO-STREAM
  , <a href="#separate-io">Extensions-2.10. Other</a></dt><dt>METHOD-CALL-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>
    METHOD-CALL-TYPE-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>module, <a href="#mod-overview">Overview</a></dt><dt>module set, <a href="#mod-overview">Overview</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NO-PRIMARY-METHOD
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>SYMBOL-MACRO-EXPAND
 , <a href="#def-sym-mac">Macro DEFINE-SYMBOL-MACRO</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>WITH-OUTPUT-TO-PRINTER
 , <a href="#hardcopy">Printing</a></dt><dt>WITHOUT-PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt><dt>WRITE-FLOAT-DECIMAL
 , <a href="#print-misc">Miscellaneous Issues</a></dt></dl></div></div></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a id="references"></a>References</h2></div></div><div></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-books"></a>Books</h3><div class="biblioentry"><a id="CLtL1"></a><p>[<span class="abbrev">CLtL1</span>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="citetitle"><i class="citetitle">Common Lisp: the Language (1st Edition)</i>. </span><span class="pubdate">1984. </span><span class="pagenums">465. </span><span class="isbn">0-201-10088-6. </span><span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="CLtL2"></a><p>[<span class="abbrev">CLtL2</span>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="citetitle"><i class="citetitle"><a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/cltl2.html" target="_top">Common Lisp: the Language (2nd Edition)</a></i>. </span><span class="pubdate">1990. </span><span class="pagenums">1032. </span><span class="isbn">0-201-10088-6. </span><span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="amop"></a><p>[<span class="abbrev">Metaobject Protocol</span>] AMOP<span class="authorgroup"><span class="firstname">Gregor</span> <span class="surname">Kiczales</span>, <span class="firstname">Jim</span> <span class="surname">des Rivieres</span>, and <span class="firstname">Daniel G.</span> <span class="surname">Bobrow</span>. </span><span class="citetitle"><i class="citetitle"><a href="http://www.lisp.org/mop" target="_top">The Art of the Metaobject Protocol</a></i>. </span><span class="pubdate">1991. </span><span class="pagenums">335. </span><span class="isbn">0-262-61074-4. </span><span class="publisher"><span class="publishername"><a href="http://www-mitpress.mit.edu" target="_top">MIT
      Press</a>. </span></span></p></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-ansi"></a>ANSI standard documents</h3><div class="biblioentry"><a id="ansi-cl"></a><p>[<span class="abbrev">ANSI CL standard</span>] ANSI CL<span class="pubdate">1994. </span><span class="citetitle"><i class="citetitle">ANSI Common Lisp standard X3.226-1994 -
       <a href="http://www.ncits.org/tc_home/j13sd4.htm" target="_top">Information
       Technology - Programming Language - Common Lisp</a></i>. </span></p></div><div class="biblioentry"><a id="CLHS"></a><p>[<span class="abbrev">Common Lisp HyperSpec</span>] CLHS<span class="citetitle"><i class="citetitle"><a href="http://www.lisp.org/HyperSpec/FrontMatter/" target="_top">Common Lisp HyperSpec</a></i>. </span></p></div></div></div></div></body></html>
