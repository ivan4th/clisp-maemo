<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Implementation Notes for GNU CLISP.</title>
<link rel="stylesheet" href="impnotes.css" type="text/css" />
<meta name="generator" content="DocBook XSL Stylesheets V1.44" />
<meta name="keywords" content="Lisp, Common Lisp, CLISP" />
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="book" id="d0e2">
<div class="titlepage">
<div>
<h1 class="title"><a id="d0e2" name="d0e2" />Implementation Notes for <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>.</h1>
</div>

<div>
<h3 class="author" />
<h3 class="author">Dr. Bruno Haible</h3>

<h3 class="author">Dr. Sam Steingold</h3>
</div>

<div>
<div class="legalnotice">
<p>These notes are covered by the <a href="http://www.gnu.org"
target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html"
target="_top">GFDL</a>:</p>

<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or any
later version published by the Free Software Foundation; with the
Invariant Sections being this section [FIXME], with the Front-Cover Texts
being this section [FIXME], and with the Back-Cover Texts being this
section [FIXME]. A copy of the license is not yet [FIXME] included in the
section entitled "GNU Free Documentation License".</p>
</div>
</div>

<hr />
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#preface"><span class="inlinemediaobject"><img
src="clisp.png" height="48" width="48"
alt="[CLISP icon]" /></span></a></dt>

<dt>I. <a href="#clhs-chapters">Chapters or the [<a href="#CLHS">Common
Lisp HyperSpec</a>]</a></dt>

<dd>
<dl>
<dt>1. <a href="#intro">Introduction [CLHS-1]</a></dt>

<dd>
<dl>
<dt><a href="#spec-symb">Special Symbols [CLHS-1.4.1.3]</a></dt>

<dt><a href="#error-terms">Error Terminology [CLHS-1.4.2]</a></dt>

<dt><a href="#class-prec">Class Precedence Lists [CLHS-1.4.4.5]</a></dt>

<dt><a href="#cl-symb">Symbols in the Package &ldquo;COMMON-LISP&rdquo;
[CLHS-1.9]</a></dt>
</dl>
</dd>

<dt>2. <a href="#syntax">Syntax [CLHS-2]</a></dt>

<dd>
<dl>
<dt><a href="#tokens">Symbols as Tokens [CLHS-2.3.4]</a></dt>

<dt><a href="#valid-patterns">Valid Patterns for Tokens
[CLHS-2.3.5]</a></dt>

<dt><a href="#double-quote">Double-Quote [CLHS-2.4.5]</a></dt>

<dt><a href="#backquote">Backquote [CLHS-2.4.6]</a></dt>

<dt><a href="#sharpsign">Sharpsign [CLHS-2.4.8]</a></dt>
</dl>
</dd>

<dt>3. <a href="#eval">Evaluation and Compilation [CLHS-3]</a></dt>

<dd>
<dl>
<dt><a href="#evaluation">Evaluation [CLHS-3.1]</a></dt>

<dd>
<dl>
<dt><a href="#eval-environ">Introduction to Environments
[CLHS-3.1.1]</a></dt>
</dl>
</dd>

<dt><a href="#compilation">Compilation [CLHS-3.2]</a></dt>

<dd>
<dl>
<dt><a href="#compiler-terms">Compiler Terminology [CLHS-3.2.1]</a></dt>

<dt><a href="#compiler-macros">Compiler Macros [CLHS-3.2.2.1]</a></dt>

<dt><a href="#similarity">Definition of Similarity
[CLHS-3.2.4.2.2]</a></dt>
</dl>
</dd>

<dt><a href="#declarations">Declarations [CLHS-3.3]</a></dt>

<dd>
<dl>
<dt><a href="#compile-decl">Additional declarations</a></dt>
</dl>
</dd>

<dt><a href="#lalist">Lambda Lists [CLHS-3.4]</a></dt>

<dd>
<dl>
<dt><a href="#boa-lalist">Boa Lambda Lists [CLHS-3.4.6]</a></dt>
</dl>
</dd>

<dt><a href="#eval-comp">The Evaluation and Compilation Dictionary
[CLHS-3.8]</a></dt>

<dd>
<dl>
<dt><a href="#spec-decl">Declaration <tt>SPECIAL</tt></a></dt>

<dt><a href="#eval-when">Macro <tt>EVAL-WHEN</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>4. <a href="#types-classes">Types and Classes [CLHS-4]</a></dt>

<dd>
<dl>
<dt><a href="#types">Types [CLHS-4.2]</a></dt>

<dd>
<dl>
<dt><a href="#type-spec">Type Specifiers [CLHS-4.2.3]</a></dt>
</dl>
</dd>

<dt><a href="#classes">Classes [CLHS-4.3]</a></dt>

<dt><a href="#clos-diff">Deviations from [<a href="#ansi-cl">ANSI CL
standard</a>]</a></dt>

<dt><a href="#metaclasses">Standard Metaclasses [CLHS-4.3.1.1]</a></dt>

<dt><a href="#def-class">Defining Classes [CLHS-4.3.2]</a></dt>

<dt><a href="#redef-class">Redefining Classes [CLHS-4.3.6]</a></dt>

<dt><a href="#type-class-int">Integrating Types and Classes
[CLHS-4.3.7]</a></dt>

<dt><a href="#type-class-dict">The Types and Classes Dictionary
[CLHS-4.4]</a></dt>

<dd>
<dl>
<dt><a href="#fixnum-char-ansi">Function <tt>COERCE</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>5. <a href="#data">Data and Control Flow [CLHS-5]</a></dt>

<dd>
<dl>
<dt><a href="#flow-dict">The Data and Control Flow Dictionary
[CLHS-5.3]</a></dt>

<dd>
<dl>
<dt><a href="#fcase">Macro <tt>EXT:FCASE</tt></a></dt>

<dt><a href="#eq">Function <tt>EQ</tt></a></dt>

<dt><a href="#sym-fun">Function <tt>SYMBOL-FUNCTION</tt></a></dt>

<dt><a href="#setf">Macro <tt>SETF</tt></a></dt>

<dt><a href="#func">Special Operator <tt>FUNCTION</tt></a></dt>

<dt><a href="#def-sym-mac">Macro <tt>DEFINE-SYMBOL-MACRO</tt></a></dt>

<dt><a href="#lambda">Macro <tt>LAMBDA</tt></a></dt>

<dt><a href="#defun">Macros <tt>DEFUN</tt> &amp;
<tt>DEFMACRO</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>6. <a href="#iteration">Iteration [CLHS-6]</a></dt>

<dt>7. <a href="#objects">Objects [CLHS-7]</a></dt>

<dt>8. <a href="#structures">Structures [CLHS-8]</a></dt>

<dt>9. <a href="#conditions">Conditions [CLHS-9]</a></dt>

<dd>
<dl>
<dt><a href="#cond-nl">Embedded Newlines in Condition Reports
[CLHS-9.1.3.1.3]</a></dt>

<dt><a href="#cond-dict">The Conditions Dictionary [CLHS-9.2.]</a></dt>
</dl>
</dd>

<dt>10. <a href="#symbols">Symbols [CLHS-10]</a></dt>

<dt>11. <a href="#packages">Packages [CLHS-11]</a></dt>

<dd>
<dl>
<dt><a href="#clupack">The COMMON-LISP-USER Package
[CLHS-11.1.2.2]</a></dt>

<dt><a href="#imppack">Implementation-Defined Packages
[CLHS-11.1.2.4]</a></dt>

<dt><a href="#pack-dict">The Packages Dictionary [CLHS-11.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-pack">Function <tt>MAKE-PACKAGE</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>12. <a href="#numbers">Numbers [CLHS-12]</a></dt>

<dd>
<dl>
<dt><a href="#num-types">Numeric Types</a></dt>

<dt><a href="#num-concepts">Number Concepts [CLHS-12.1]</a></dt>

<dd>
<dl>
<dt><a href="#byte-type">Byte Operations on Integers
[CLHS-12.1.1.3.2]</a></dt>

<dt><a href="#float-subst">Rule of Float Substitutability
[CLHS-12.1.3.3]</a></dt>

<dt><a href="#float-comp">Floating-point Computations
[CLHS-12.1.4]</a></dt>

<dt><a href="#complex-comp">Complex Computations [CLHS-12.1.5]</a></dt>

<dt><a href="#complex-rational">Rule of Canonical Representation for
Complex Rationals [CLHS-12.1.5.3]</a></dt>
</dl>
</dd>

<dt><a href="#num-dict">The Numbers Dictionary [CLHS-12.2]</a></dt>

<dd>
<dl>
<dt><a href="#int-func-ext">Additional Integer Functions</a></dt>

<dt><a href="#float-notes">Floating Point</a></dt>

<dt><a href="#float-decode">Float Decoding [CLHS]</a></dt>

<dt><a href="#bool-ops">Boolean Operations [CLHS]</a></dt>

<dt><a href="#fixnum-lim">Fixnum Limits [CLHS]</a></dt>

<dt><a href="#float-lim">Float Limits [CLHS]</a></dt>

<dt><a href="#float-invalid-op">Condition
<tt>FLOATING-POINT-INVALID-OPERATION</tt></a></dt>

<dt><a href="#float-inexact">Condition
<tt>FLOATING-POINT-INEXACT</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>13. <a href="#characters">Characters [CLHS-13]</a></dt>

<dd>
<dl>
<dt><a href="#input-char">Attributes</a></dt>

<dt><a href="#char-script">Character Scripts [CLHS-13.1.2.1]</a></dt>

<dt><a href="#char-attrib">Character Attributes [CLHS-13.1.3]</a></dt>

<dt><a href="#graph-char">Graphic Characters [CLHS-13.1.4.1]</a></dt>

<dt><a href="#alpha-char">Alphabetic Characters [CLHS-13.1.4.2]</a></dt>

<dt><a href="#char-ext">Case of Implementation-Defined Characters
[CLHS-13.1.4.3.4]</a></dt>

<dt><a href="#num-char">Numeric Characters [CLHS-13.1.4.4]</a></dt>

<dt><a href="#char-ord">Ordering of Characters [CLHS-13.1.6]</a></dt>

<dt><a href="#clhs-newline">Treatment of Newline during Input and Output
[CLHS-13.1.8]</a></dt>

<dt><a href="#char-int">Character Encodings [CLHS-13.1.9]</a></dt>

<dt><a href="#script-ext">Documentation of Implementation-Defined Scripts
[CLHS-13.1.10]</a></dt>

<dt><a href="#char-dict">The Characters Dictionary [CLHS-13.2]</a></dt>

<dt><a href="#char-width">Functions on characters</a></dt>

<dt><a href="#char-platform-dep">platform-dependent characters</a></dt>

<dt><a href="#char-bits">Obsolete Constants</a></dt>
</dl>
</dd>

<dt>14. <a href="#conses">Conses [CLHS-14]</a></dt>

<dd>
<dl>
<dt><a href="#cons-dict">The Conses Dictionary [CLHS-14.2]</a></dt>

<dd>
<dl>
<dt><a href="#map-func">Functions <tt>MAPCAR</tt>, <tt>MAPCAN</tt>,
<tt>MAPLIST</tt>, <tt>MAPCON</tt>, ...</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>15. <a href="#arrays">Arrays [CLHS-15]</a></dt>

<dd>
<dl>
<dt><a href="#array-elts">Array Elements [CLHS-15.1.1]</a></dt>

<dt><a href="#array-dict">The Arrays Dictionary [CLHS-15.2]</a></dt>
</dl>
</dd>

<dt>16. <a href="#strings">Strings [CLHS-16]</a></dt>

<dd>
<dl>
<dt><a href="#string-dict">The Strings Dictionary [CLHS-16.2]</a></dt>

<dd>
<dl>
<dt><a href="#string-width">Functions on strings</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>17. <a href="#sequences">Sequences [CLHS-17]</a></dt>

<dd>
<dl>
<dt><a href="#seq-dict">The Sequences Dictionary [CLHS-17.3.]</a></dt>

<dd>
<dl>
<dt><a href="#seq-macro-ext">Additional Macros</a></dt>

<dt><a href="#nreverse-nreconc">Functions <tt>NREVERSE</tt> &amp;
<tt>NRECONC</tt></a></dt>

<dt><a href="#rem-del">Functions <tt>REMOVE</tt> &amp;
<tt>DELETE</tt></a></dt>

<dt><a href="#sorting">Functions <tt>SORT</tt> &amp;
<tt>STABLE-SORT</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>18. <a href="#hash">Hash Tables [CLHS-18]</a></dt>

<dd>
<dl>
<dt><a href="#hash-dict">The Hash Tables Dictionary [CLHS-18.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-hash">Function <tt>MAKE-HASH-TABLE</tt></a></dt>

<dt><a href="#hash-ext">Additional Macros</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>19. <a href="#filenames">Filenames [CLHS-19]</a></dt>

<dd>
<dl>
<dt><a href="#path-components">Pathname Components [CLHS-19.2.1]</a></dt>

<dt><a href="#path-external-notation">External notation.</a></dt>

<dt><a href="#log-path">Logical Pathnames [CLHS-19.3]</a></dt>

<dt><a href="#filename-dict">The Filenames Dictionary [CLHS-19.4]</a></dt>

<dd>
<dl>
<dt><a href="#parsename">Function <tt>PARSE-NAMESTRING</tt></a></dt>

<dt><a href="#pathmerge">Function <tt>MERGE-PATHNAMES</tt></a></dt>

<dt><a href="#load-lpt">Function
<tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>20. <a href="#files">Files [CLHS-20]</a></dt>

<dd>
<dl>
<dt><a href="#file-dict">The Files Dictionary [CLHS-20.2]</a></dt>

<dd>
<dl>
<dt><a href="#dir">Function <tt>DIRECTORY</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>21. <a href="#streams">Streams [CLHS-21]</a></dt>

<dd>
<dl>
<dt><a href="#streams-interactive">Interactive Streams
[CLHS-21.1.1.1.3]</a></dt>

<dt><a href="#terminal">Terminal interaction.</a></dt>

<dt><a href="#stream-dict">The Streams Dictionary [CLHS-21.2.]</a></dt>

<dd>
<dl>
<dt><a href="#stream-eltype">Function
<tt>STREAM-ELEMENT-TYPE</tt></a></dt>

<dt><a href="#bin-input">Binary input, <tt>READ-BYTE</tt>,
<tt>EXT:READ-INTEGER</tt> &amp; <tt>EXT:READ-FLOAT</tt></a></dt>

<dt><a href="#bin-output">Binary output, <tt>WRITE-BYTE</tt>,
<tt>EXT:WRITE-INTEGER</tt> &amp; <tt>EXT:WRITE-FLOAT</tt></a></dt>

<dt><a href="#read-seq">Function <tt>READ-SEQUENCE</tt></a></dt>

<dt><a href="#write-seq">Function <tt>WRITE-SEQUENCE</tt></a></dt>

<dt><a href="#file-pos">Function <tt>FILE-POSITION</tt></a></dt>

<dt><a href="#open">Function <tt>OPEN</tt></a></dt>

<dt><a href="#close">Function <tt>CLOSE</tt></a></dt>

<dt><a href="#broadcast-stream">Class <tt>BROADCAST-STREAM</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>22. <a href="#printer">Printer [CLHS-22]</a></dt>

<dd>
<dl>
<dt><a href="#multi-rep">Multiple Possible Textual Representations
[CLHS-22.1.1.1]</a></dt>

<dt><a href="#print-vector">Printing Other Vectors
[CLHS-22.1.3.7]</a></dt>

<dt><a href="#print-array">Printing Other Arrays [CLHS-22.1.3.8]</a></dt>

<dt><a href="#clpp">The Lisp Pretty Printer [CLHS-22.2]</a></dt>

<dd>
<dl>
<dt><a href="#pp-dispatch">Pretty Print Dispatch Table
[CLHS-22.2.1.4]</a></dt>
</dl>
</dd>

<dt><a href="#print-dict">The Printer Dictionary [CLHS-22.4]</a></dt>

<dd>
<dl>
<dt><a href="#format">Function <tt>FORMAT</tt></a></dt>

<dt><a href="#pathprint">pathnames</a></dt>

<dt><a href="#print-misc">Miscellaneous Issues</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>23. <a href="#reader">Reader [CLHS-23]</a></dt>

<dd>
<dl>
<dt><a href="#chario">characters</a></dt>

<dt><a href="#read-dispatch-ext">Additional read dispatch macros</a></dt>

<dt><a href="#rt-case">Function <tt>READTABLE-CASE</tt></a></dt>

<dt><a href="#listen">Functions <tt>LISTEN</tt>,
<tt>READ-CHAR-NO-HANG</tt></a></dt>

<dt><a href="#read-byte">Function <tt>READ-BYTE</tt></a></dt>
</dl>
</dd>

<dt>24. <a href="#system">System Construction [CLHS-24]</a></dt>

<dd>
<dl>
<dt><a href="#system-dict">The System Construction Dictionary
[CLHS-24.2]</a></dt>

<dd>
<dl>
<dt><a href="#compilefile">Function <tt>COMPILE-FILE</tt></a></dt>

<dt><a href="#compile-file-path">Function
<tt>COMPILE-FILE-PATHNAME</tt></a></dt>

<dt><a href="#require">Function <tt>REQUIRE</tt></a></dt>

<dt><a href="#loadfile">Function <tt>LOAD</tt></a></dt>

<dt><a href="#features">Variable <tt>*FEATURES*</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>25. <a href="#environment">Environment [CLHS-25]</a></dt>

<dd>
<dl>
<dt><a href="#debugger">Debugging Utilities [CLHS-25.1.2]</a></dt>

<dt><a href="#environment-dict">The Environment Dictionary
[CLHS-25.2]</a></dt>

<dd>
<dl>
<dt><a href="#disassemble">Function <tt>DISASSEMBLE</tt></a></dt>

<dt><a href="#uncompile">Function <tt>EXT:UNCOMPILE</tt></a></dt>

<dt><a href="#documentation">Function <tt>DOCUMENTATION</tt></a></dt>

<dt><a href="#trace">Macro <tt>TRACE</tt></a></dt>

<dt><a href="#inspect">Function <tt>INSPECT</tt></a></dt>

<dt><a href="#space">Macro <tt>EXT:SPACE</tt></a></dt>

<dt><a href="#room">Function <tt>ROOM</tt></a></dt>

<dt><a href="#time">Macro <tt>TIME</tt></a></dt>

<dt><a href="#ed">Function <tt>ED</tt></a></dt>

<dt><a href="#clock">Clock Time</a></dt>

<dt><a href="#machine">Machine</a></dt>

<dt><a href="#apropos">Functions <tt>APROPOS</tt> &amp;
<tt>APROPOS-LIST</tt></a></dt>

<dt><a href="#dribble">Function <tt>DRIBBLE</tt></a></dt>

<dt><a href="#version">Function
<tt>LISP-IMPLEMENTATION-VERSION</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>26. <a href="#glossary">Glossary [CLHS-26]</a></dt>

<dt>27. <a href="#appendix">Appendix [CLHS-a]</a></dt>

<dt>28. <a href="#issues">X3J13 Issue Index [CLHS-ic]</a></dt>
</dl>
</dd>

<dt>II. <a href="#internals">Internals of the <b>CLISP</b>
Implementation</a></dt>

<dd>
<dl>
<dt>29. <a href="#gc">Overview of <b>CLISP</b>'s Garbage
Collection</a></dt>

<dd>
<dl>
<dt><a href="#internals-intro">Introduction</a></dt>

<dt><a href="#lisp-obj-in-c">Lisp objects in <b>CLISP</b></a></dt>

<dt><a href="#memory-models">Memory Models</a></dt>

<dt><a href="#gc-safety">The burden of garbage-collection upon the rest of
<b>CLISP</b>:</a></dt>

<dt><a href="#foreign-pointers">Foreign Pointers</a></dt>
</dl>
</dd>

<dt>30. <a href="#bytecode">The <b>CLISP</b> bytecode
specification</a></dt>

<dd>
<dl>
<dt><a href="#byte-intro">Introduction</a></dt>

<dt><a href="#vm">The virtual machine</a></dt>

<dt><a href="#comp-fun">The structure of compiled functions</a></dt>

<dt><a href="#intr-struct">The general structure of the
instructions</a></dt>

<dt><a href="#intr-set">The instruction set</a></dt>

<dd>
<dl>
<dt><a href="#instr-const">Instructions for constants</a></dt>

<dt><a href="#instr-lex-var">Instructions for lexical variables</a></dt>

<dt><a href="#instr-dyn-var">Instructions for dynamic variables</a></dt>

<dt><a href="#instr-stack">Instructions for stack operations</a></dt>

<dt><a href="#instr-jump">Instructions for control flow, jumps</a></dt>

<dt><a href="#instr-env">Instructions for lexical environment, creation of
closures</a></dt>

<dt><a href="#instr-funcall">Instructions for function calls</a></dt>

<dt><a href="#instr-optkey">Instructions for optional and keyword
parameters</a></dt>

<dt><a href="#instr-mulval">Instructions for multiple values</a></dt>

<dt><a href="#instr-block">Instructions for <tt>BLOCK</tt> and
<tt>RETURN-FROM</tt></a></dt>

<dt><a href="#instr-tagbody">Instructions for <tt>TAGBODY</tt> and
<tt>GO</tt></a></dt>

<dt><a href="#instr-catch">Instructions for <tt>CATCH</tt> and
<tt>THROW</tt></a></dt>

<dt><a href="#instr-unwind">Instructions for
<tt>UNWIND-PROTECT</tt></a></dt>

<dt><a href="#instr-handler">Instructions for
<tt>HANDLER-BIND</tt></a></dt>

<dt><a href="#instr-inline">Instructions for some inlined
functions</a></dt>

<dt><a href="#instr-combo">Combined instructions</a></dt>

<dt><a href="#instr-shortcut">Shortcut instructions</a></dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>

<dt>III. <a href="#extensions">Extensions</a></dt>

<dd>
<dl>
<dt>31. <a href="#p-indep">Extensions-1: Platform independent
Extensions</a></dt>

<dd>
<dl>
<dt><a href="#image">Extensions-1.1. Saving an Image</a></dt>

<dt><a href="#quit">Extensions-1.2. Quitting <b>CLISP</b></a></dt>

<dt><a href="#i18n">Extensions-1.3. Internationalization</a></dt>

<dd>
<dl>
<dt><a href="#ggettext">The GNU gettext</a></dt>

<dt><a href="#language">The Language</a></dt>
</dl>
</dd>

<dt><a href="#encoding">Extensions-1.4. Encodings</a></dt>

<dd>
<dl>
<dt><a href="#encodings-intro">Introduction</a></dt>

<dt><a href="#charset">Character Sets</a></dt>

<dt><a href="#newline">Line Terminators</a></dt>

<dt><a href="#make-encoding">Function <tt>EXT:MAKE-ENCODING</tt></a></dt>

<dt><a href="#string-byte">Converting between strings and byte
vectors</a></dt>
</dl>
</dd>

<dt><a href="#clos-stream">Extensions-1.5. Defining new kinds of
Streams</a></dt>

<dd>
<dl>
<dt><a href="#gray">Gray streams</a></dt>

<dt><a href="#gstream">Generic streams</a></dt>
</dl>
</dd>

<dt><a href="#weak">Extensions-1.6. Weak Pointers</a></dt>

<dt><a href="#final">Extensions-1.7. Finalization</a></dt>

<dt><a href="#prompt">Extensions-1.8. The Prompt</a></dt>

<dt><a href="#ansi">Extensions-1.9. Maximum ANSI CL compliance</a></dt>

<dt><a href="#macros3">Extensions-1.10. Additional Fancy Macros</a></dt>

<dt><a href="#customize">Extensions-1.11. Customizing <b>CLISP</b>
behavior.</a></dt>
</dl>
</dd>

<dt>32. <a href="#platform">Extensions-2: Platform specific
Extensions</a></dt>

<dd>
<dl>
<dt><a href="#screen">Extensions-2.1. Random Screen Access</a></dt>

<dt><a href="#modules">Extensions-2.2. External Modules</a></dt>

<dd>
<dl>
<dt><a href="#mod-set-example">Example</a></dt>

<dt><a href="#included-modules">Modules included in the
distribution.</a></dt>
</dl>
</dd>

<dt><a href="#dffi">Extensions-2.3. The Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#dffi-overview">Overview</a></dt>

<dt><a href="#dffi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#c-flavor">The choice of the <b>C</b> flavor.</a></dt>

<dt><a href="#dffi-variables">Foreign variables</a></dt>

<dt><a href="#dffi-places">Operations on foreign places</a></dt>

<dt><a href="#dffi-functions">Foreign functions</a></dt>

<dt><a href="#allocation">Argument and result passing conventions</a></dt>

<dt><a href="#dffi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#affi">Extensions-2.4. The Amiga Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#affi-design">Design issues</a></dt>

<dt><a href="#affi-overview">Overview</a></dt>

<dt><a href="#affi-libs">Foreign Libraries</a></dt>

<dt><a href="#affi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#affi-functions">Foreign functions</a></dt>

<dt><a href="#affi-memory-access">Memory access</a></dt>

<dt><a href="#affi-func-def">Function Definition Files</a></dt>

<dt><a href="#affi-hints">Hints</a></dt>

<dt><a href="#affi-caveats">Caveats</a></dt>

<dt><a href="#affi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#rexx">Extensions-2.5. ARexx</a></dt>

<dt><a href="#socket">Extensions-2.6. Socket Streams</a></dt>

<dt><a href="#syscalls">Extensions-2.7. System Calls</a></dt>

<dt><a href="#quickstart">Extensions-2.8. Quickstarting delivery with
<b>CLISP</b></a></dt>

<dt><a href="#app-dev">Extensions-2.9. Application delivery with
<b>CLISP</b></a></dt>

<dt><a href="#shell">Extensions-2.10. Shell, Pipes and Printing</a></dt>

<dd>
<dl>
<dt><a href="#exec">Shell</a></dt>

<dt><a href="#pipe">Pipes</a></dt>

<dt><a href="#hardcopy">Printing</a></dt>
</dl>
</dd>

<dt><a href="#dir-key">Extensions-2.11. Directory Access</a></dt>

<dt><a href="#other">Extensions-2.12. Other</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt><a href="#references">References</a></dt>
</dl>
</div>

<div id="preface" class="preface">
<div class="titlepage">
<div>
<h2 class="title"><a id="preface" name="preface" /><span
class="inlinemediaobject"><img src="clisp.png" height="48" width="48"
alt="[CLISP icon]" /></span></h2>
</div>

<div>
<h3 class="subtitle"><i>Last modified: 2001-11-29</i></h3>
</div>
</div>

<p>These notes discuss the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> implementation of <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> by</p>

<blockquote class="blockquote">
<div class="address">Dr&nbsp;Bruno&nbsp;Haible
<br />
&nbsp;Louisenstra&szlig;e&nbsp;103
<br />
&nbsp;Bad&nbsp;Homburg
<br />
&nbsp;D-61348&nbsp;Germany
<br />
&nbsp;<a href="http://clisp.cons.org/~haible"
target="_top">http://clisp.cons.org/~haible</a>
<br />
</div>
</blockquote>

and 

<blockquote class="blockquote">
<div class="address">Dr&nbsp;Michael&nbsp;Stoll
<br />
&nbsp;Westerwaldweg&nbsp;22
<br />
&nbsp;Remagen-Oberwinter
<br />
&nbsp;D-53424&nbsp;Germany
<br />
&nbsp;<a href="http://www.math.uni-duesseldorf.de/home/stoll"
target="_top">http://www.math.uni-duesseldorf.de/home/stoll</a>
<br />
</div>
</blockquote>

The current maintainers are 

<blockquote class="blockquote">
<div class="address">Dr&nbsp;Bruno&nbsp;Haible</div>
</blockquote>

and 

<blockquote class="blockquote">
<div class="address">Dr&nbsp;Sam&nbsp;Steingold
<br />
&nbsp;<tt>&lt;<a
href="mailto:sds@clisp.cons.org">sds@clisp.cons.org</a>&gt;</tt>
<br />
&nbsp;<a href="http://clisp.cons.org/~sds"
target="_top">http://clisp.cons.org/~sds</a></div>
</blockquote>


<br />
<br />
<p>This implementation is mostly conforming to the [<a
href="#ansi-cl">ANSI CL standard</a>] available on-line as the [<a
href="#CLHS">Common Lisp HyperSpec</a>] (but the printed ANSI document
remains the authoritative source of information). [<a href="#ansi-cl">ANSI
CL standard</a>] supersedes the earlier specifications [<a
href="#CLtL1">CLtL1</a>] and [<a href="#CLtL2">CLtL2</a>].</p>

<p>The first part of these notes is indexed in parallel to the [<a
href="#CLHS">Common Lisp HyperSpec</a>] and documents the differences
between the <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
implementation of <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> and the [<a href="#ansi-cl">ANSI CL standard</a>].</p>

<p>The second part documents the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ion
(for developers only) and the bytecodes generated by the compiler (i.e.,
what is printer by <a
href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
target="_top"><tt>DISASSEMBLE</tt></a>).</p>

<p>The third part documents the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extensions.</p>
</div>

<dl>
<dt><a href="#clhs-chapters">Chapters of the [<a href="#CLHS">Common Lisp
HyperSpec</a>] <a
href="http://www.lisp.org/HyperSpec/FrontMatter/Chapter-Index.html"
target="_top">[CLHS]</a></a></dt>

<dt><a href="#intro">Introduction <a
href="http://www.lisp.org/HyperSpec/Body/chap-1.html"
target="_top">[CLHS-1]</a></a></dt>

<dt><a href="#syntax">Syntax <a
href="http://www.lisp.org/HyperSpec/Body/chap-2.html"
target="_top">[CLHS-2]</a></a></dt>

<dt><a href="#eval">Evaluation and Compilation <a
href="http://www.lisp.org/HyperSpec/Body/chap-3.html"
target="_top">[CLHS-3]</a></a></dt>

<dt><a href="#types-classes">Types and Classes <a
href="http://www.lisp.org/HyperSpec/Body/chap-4.html"
target="_top">[CLHS-4]</a></a></dt>

<dt><a href="#data">Data and Control Flow <a
href="http://www.lisp.org/HyperSpec/Body/chap-5.html"
target="_top">[CLHS-5]</a></a></dt>

<dt><a href="#iteration">Iteration <a
href="http://www.lisp.org/HyperSpec/Body/chap-6.html"
target="_top">[CLHS-6]</a></a></dt>

<dt><a href="#objects">Objects <a
href="http://www.lisp.org/HyperSpec/Body/chap-7.html"
target="_top">[CLHS-7]</a></a></dt>

<dt><a href="#structures">Structures <a
href="http://www.lisp.org/HyperSpec/Body/chap-8.html"
target="_top">[CLHS-8]</a></a></dt>

<dt><a href="#conditions">Conditions <a
href="http://www.lisp.org/HyperSpec/Body/chap-9.html"
target="_top">[CLHS-9]</a></a></dt>

<dt><a href="#symbols">Symbols <a
href="http://www.lisp.org/HyperSpec/Body/chap-10.html"
target="_top">[CLHS-10]</a></a></dt>

<dt><a href="#packages">Packages <a
href="http://www.lisp.org/HyperSpec/Body/chap-11.html"
target="_top">[CLHS-11]</a></a></dt>

<dt><a href="#numbers">Numbers <a
href="http://www.lisp.org/HyperSpec/Body/chap-12.html"
target="_top">[CLHS-12]</a></a></dt>

<dt><a href="#characters">Characters <a
href="http://www.lisp.org/HyperSpec/Body/chap-13.html"
target="_top">[CLHS-13]</a></a></dt>

<dt><a href="#conses">Conses <a
href="http://www.lisp.org/HyperSpec/Body/chap-14.html"
target="_top">[CLHS-14]</a></a></dt>

<dt><a href="#arrays">Arrays <a
href="http://www.lisp.org/HyperSpec/Body/chap-15.html"
target="_top">[CLHS-15]</a></a></dt>

<dt><a href="#strings">Strings <a
href="http://www.lisp.org/HyperSpec/Body/chap-16.html"
target="_top">[CLHS-16]</a></a></dt>

<dt><a href="#sequences">Sequences <a
href="http://www.lisp.org/HyperSpec/Body/chap-17.html"
target="_top">[CLHS-17]</a></a></dt>

<dt><a href="#hash">Hash Tables <a
href="http://www.lisp.org/HyperSpec/Body/chap-18.html"
target="_top">[CLHS-18]</a></a></dt>

<dt><a href="#filenames">Filenames <a
href="http://www.lisp.org/HyperSpec/Body/chap-19.html"
target="_top">[CLHS-19]</a></a></dt>

<dt><a href="#files">Files <a
href="http://www.lisp.org/HyperSpec/Body/chap-20.html"
target="_top">[CLHS-20]</a></a></dt>

<dt><a href="#streams">Streams <a
href="http://www.lisp.org/HyperSpec/Body/chap-21.html"
target="_top">[CLHS-21]</a></a></dt>

<dt><a href="#printer">Printer <a
href="http://www.lisp.org/HyperSpec/Body/chap-22.html"
target="_top">[CLHS-22]</a></a></dt>

<dt><a href="#reader">Reader <a
href="http://www.lisp.org/HyperSpec/Body/chap-23.html"
target="_top">[CLHS-23]</a></a></dt>

<dt><a href="#system">System Construction <a
href="http://www.lisp.org/HyperSpec/Body/chap-24.html"
target="_top">[CLHS-24]</a></a></dt>

<dt><a href="#environment">Environment <a
href="http://www.lisp.org/HyperSpec/Body/chap-25.html"
target="_top">[CLHS-25]</a></a></dt>

<dt><a href="#glossary">Glossary <a
href="http://www.lisp.org/HyperSpec/Body/chap-26.html"
target="_top">[CLHS-26]</a></a></dt>

<dt><a href="#appendix">Appendix <a
href="http://www.lisp.org/HyperSpec/Body/chap-a.html"
target="_top">[CLHS-a]</a></a></dt>

<dt><a href="#issues">X3J13 Issue Index <a
href="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html"
target="_top">[CLHS-ic]</a></a></dt>

<dt><a href="#internals">Internals of the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> Implementation</a></dt>

<dt><a href="#extensions">Extensions</a></dt>

<dd>
<dl>
<dt><a href="#p-indep">[Platform-independent Extensions]</a></dt>

<dt><a href="#image">[Saving an Image]</a></dt>

<dt><a href="#quit">[Quitting Lisp]</a></dt>

<dt><a href="#i18n">[Internationalization]</a></dt>

<dt><a href="#encoding">[Encodings]</a></dt>

<dt><a href="#clos-stream">[Defining new kinds of Streams]</a></dt>

<dt><a href="#weak">[Weak Pointers]</a></dt>

<dt><a href="#final">[Finalization]</a></dt>

<dt><a href="#prompt">[The Prompt]</a></dt>

<dt><a href="#ansi">[Maximum ANSI CL compliance]</a></dt>

<dt><a href="#macros3">[Additional Fancy Macros]</a></dt>

<dt><a href="#platform">[Platform-specific Extensions]</a></dt>

<dt><a href="#screen">[Random Screen Access]</a></dt>

<dt><a href="#modules">[External Modules]</a></dt>

<dt><a href="#dffi">[The Foreign Function Call Facility]</a></dt>

<dt><a href="#affi">[The Amiga Foreign Function Facility]</a></dt>

<dt><a href="#rexx">[ARexx]</a></dt>

<dt><a href="#socket">[Socket Streams]</a></dt>

<dt><a href="#syscalls">[System Calls]</a></dt>

<dt><a href="#quickstart">[Quickstarting CLISP programs]</a></dt>

<dt><a href="#app-dev">[Application delivery with CLISP]</a></dt>

<dt><a href="#shell">[Shell, Pipes and Printing]</a></dt>

<dt><a href="#dir-key">[Directory Access]</a></dt>

<dt><a href="#other">[Other]</a></dt>
</dl>
</dd>
</dl>

<div class="part" id="clhs-chapters">
<div class="titlepage">
<div>
<h1 class="title"><a id="clhs-chapters" name="clhs-chapters" />Chapters or
the [<a href="#CLHS">Common Lisp HyperSpec</a>]</h1>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt>1. <a href="#intro">Introduction [CLHS-1]</a></dt>

<dd>
<dl>
<dt><a href="#spec-symb">Special Symbols [CLHS-1.4.1.3]</a></dt>

<dt><a href="#error-terms">Error Terminology [CLHS-1.4.2]</a></dt>

<dt><a href="#class-prec">Class Precedence Lists [CLHS-1.4.4.5]</a></dt>

<dt><a href="#cl-symb">Symbols in the Package &ldquo;COMMON-LISP&rdquo;
[CLHS-1.9]</a></dt>
</dl>
</dd>

<dt>2. <a href="#syntax">Syntax [CLHS-2]</a></dt>

<dd>
<dl>
<dt><a href="#tokens">Symbols as Tokens [CLHS-2.3.4]</a></dt>

<dt><a href="#valid-patterns">Valid Patterns for Tokens
[CLHS-2.3.5]</a></dt>

<dt><a href="#double-quote">Double-Quote [CLHS-2.4.5]</a></dt>

<dt><a href="#backquote">Backquote [CLHS-2.4.6]</a></dt>

<dt><a href="#sharpsign">Sharpsign [CLHS-2.4.8]</a></dt>
</dl>
</dd>

<dt>3. <a href="#eval">Evaluation and Compilation [CLHS-3]</a></dt>

<dd>
<dl>
<dt><a href="#evaluation">Evaluation [CLHS-3.1]</a></dt>

<dd>
<dl>
<dt><a href="#eval-environ">Introduction to Environments
[CLHS-3.1.1]</a></dt>
</dl>
</dd>

<dt><a href="#compilation">Compilation [CLHS-3.2]</a></dt>

<dd>
<dl>
<dt><a href="#compiler-terms">Compiler Terminology [CLHS-3.2.1]</a></dt>

<dt><a href="#compiler-macros">Compiler Macros [CLHS-3.2.2.1]</a></dt>

<dt><a href="#similarity">Definition of Similarity
[CLHS-3.2.4.2.2]</a></dt>
</dl>
</dd>

<dt><a href="#declarations">Declarations [CLHS-3.3]</a></dt>

<dd>
<dl>
<dt><a href="#compile-decl">Additional declarations</a></dt>
</dl>
</dd>

<dt><a href="#lalist">Lambda Lists [CLHS-3.4]</a></dt>

<dd>
<dl>
<dt><a href="#boa-lalist">Boa Lambda Lists [CLHS-3.4.6]</a></dt>
</dl>
</dd>

<dt><a href="#eval-comp">The Evaluation and Compilation Dictionary
[CLHS-3.8]</a></dt>

<dd>
<dl>
<dt><a href="#spec-decl">Declaration <tt>SPECIAL</tt></a></dt>

<dt><a href="#eval-when">Macro <tt>EVAL-WHEN</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>4. <a href="#types-classes">Types and Classes [CLHS-4]</a></dt>

<dd>
<dl>
<dt><a href="#types">Types [CLHS-4.2]</a></dt>

<dd>
<dl>
<dt><a href="#type-spec">Type Specifiers [CLHS-4.2.3]</a></dt>
</dl>
</dd>

<dt><a href="#classes">Classes [CLHS-4.3]</a></dt>

<dt><a href="#clos-diff">Deviations from [<a href="#ansi-cl">ANSI CL
standard</a>]</a></dt>

<dt><a href="#metaclasses">Standard Metaclasses [CLHS-4.3.1.1]</a></dt>

<dt><a href="#def-class">Defining Classes [CLHS-4.3.2]</a></dt>

<dt><a href="#redef-class">Redefining Classes [CLHS-4.3.6]</a></dt>

<dt><a href="#type-class-int">Integrating Types and Classes
[CLHS-4.3.7]</a></dt>

<dt><a href="#type-class-dict">The Types and Classes Dictionary
[CLHS-4.4]</a></dt>

<dd>
<dl>
<dt><a href="#fixnum-char-ansi">Function <tt>COERCE</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>5. <a href="#data">Data and Control Flow [CLHS-5]</a></dt>

<dd>
<dl>
<dt><a href="#flow-dict">The Data and Control Flow Dictionary
[CLHS-5.3]</a></dt>

<dd>
<dl>
<dt><a href="#fcase">Macro <tt>EXT:FCASE</tt></a></dt>

<dt><a href="#eq">Function <tt>EQ</tt></a></dt>

<dt><a href="#sym-fun">Function <tt>SYMBOL-FUNCTION</tt></a></dt>

<dt><a href="#setf">Macro <tt>SETF</tt></a></dt>

<dt><a href="#func">Special Operator <tt>FUNCTION</tt></a></dt>

<dt><a href="#def-sym-mac">Macro <tt>DEFINE-SYMBOL-MACRO</tt></a></dt>

<dt><a href="#lambda">Macro <tt>LAMBDA</tt></a></dt>

<dt><a href="#defun">Macros <tt>DEFUN</tt> &amp;
<tt>DEFMACRO</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>6. <a href="#iteration">Iteration [CLHS-6]</a></dt>

<dt>7. <a href="#objects">Objects [CLHS-7]</a></dt>

<dt>8. <a href="#structures">Structures [CLHS-8]</a></dt>

<dt>9. <a href="#conditions">Conditions [CLHS-9]</a></dt>

<dd>
<dl>
<dt><a href="#cond-nl">Embedded Newlines in Condition Reports
[CLHS-9.1.3.1.3]</a></dt>

<dt><a href="#cond-dict">The Conditions Dictionary [CLHS-9.2.]</a></dt>
</dl>
</dd>

<dt>10. <a href="#symbols">Symbols [CLHS-10]</a></dt>

<dt>11. <a href="#packages">Packages [CLHS-11]</a></dt>

<dd>
<dl>
<dt><a href="#clupack">The COMMON-LISP-USER Package
[CLHS-11.1.2.2]</a></dt>

<dt><a href="#imppack">Implementation-Defined Packages
[CLHS-11.1.2.4]</a></dt>

<dt><a href="#pack-dict">The Packages Dictionary [CLHS-11.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-pack">Function <tt>MAKE-PACKAGE</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>12. <a href="#numbers">Numbers [CLHS-12]</a></dt>

<dd>
<dl>
<dt><a href="#num-types">Numeric Types</a></dt>

<dt><a href="#num-concepts">Number Concepts [CLHS-12.1]</a></dt>

<dd>
<dl>
<dt><a href="#byte-type">Byte Operations on Integers
[CLHS-12.1.1.3.2]</a></dt>

<dt><a href="#float-subst">Rule of Float Substitutability
[CLHS-12.1.3.3]</a></dt>

<dt><a href="#float-comp">Floating-point Computations
[CLHS-12.1.4]</a></dt>

<dt><a href="#complex-comp">Complex Computations [CLHS-12.1.5]</a></dt>

<dt><a href="#complex-rational">Rule of Canonical Representation for
Complex Rationals [CLHS-12.1.5.3]</a></dt>
</dl>
</dd>

<dt><a href="#num-dict">The Numbers Dictionary [CLHS-12.2]</a></dt>

<dd>
<dl>
<dt><a href="#int-func-ext">Additional Integer Functions</a></dt>

<dt><a href="#float-notes">Floating Point</a></dt>

<dt><a href="#float-decode">Float Decoding [CLHS]</a></dt>

<dt><a href="#bool-ops">Boolean Operations [CLHS]</a></dt>

<dt><a href="#fixnum-lim">Fixnum Limits [CLHS]</a></dt>

<dt><a href="#float-lim">Float Limits [CLHS]</a></dt>

<dt><a href="#float-invalid-op">Condition
<tt>FLOATING-POINT-INVALID-OPERATION</tt></a></dt>

<dt><a href="#float-inexact">Condition
<tt>FLOATING-POINT-INEXACT</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>13. <a href="#characters">Characters [CLHS-13]</a></dt>

<dd>
<dl>
<dt><a href="#input-char">Attributes</a></dt>

<dt><a href="#char-script">Character Scripts [CLHS-13.1.2.1]</a></dt>

<dt><a href="#char-attrib">Character Attributes [CLHS-13.1.3]</a></dt>

<dt><a href="#graph-char">Graphic Characters [CLHS-13.1.4.1]</a></dt>

<dt><a href="#alpha-char">Alphabetic Characters [CLHS-13.1.4.2]</a></dt>

<dt><a href="#char-ext">Case of Implementation-Defined Characters
[CLHS-13.1.4.3.4]</a></dt>

<dt><a href="#num-char">Numeric Characters [CLHS-13.1.4.4]</a></dt>

<dt><a href="#char-ord">Ordering of Characters [CLHS-13.1.6]</a></dt>

<dt><a href="#clhs-newline">Treatment of Newline during Input and Output
[CLHS-13.1.8]</a></dt>

<dt><a href="#char-int">Character Encodings [CLHS-13.1.9]</a></dt>

<dt><a href="#script-ext">Documentation of Implementation-Defined Scripts
[CLHS-13.1.10]</a></dt>

<dt><a href="#char-dict">The Characters Dictionary [CLHS-13.2]</a></dt>

<dt><a href="#char-width">Functions on characters</a></dt>

<dt><a href="#char-platform-dep">platform-dependent characters</a></dt>

<dt><a href="#char-bits">Obsolete Constants</a></dt>
</dl>
</dd>

<dt>14. <a href="#conses">Conses [CLHS-14]</a></dt>

<dd>
<dl>
<dt><a href="#cons-dict">The Conses Dictionary [CLHS-14.2]</a></dt>

<dd>
<dl>
<dt><a href="#map-func">Functions <tt>MAPCAR</tt>, <tt>MAPCAN</tt>,
<tt>MAPLIST</tt>, <tt>MAPCON</tt>, ...</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>15. <a href="#arrays">Arrays [CLHS-15]</a></dt>

<dd>
<dl>
<dt><a href="#array-elts">Array Elements [CLHS-15.1.1]</a></dt>

<dt><a href="#array-dict">The Arrays Dictionary [CLHS-15.2]</a></dt>
</dl>
</dd>

<dt>16. <a href="#strings">Strings [CLHS-16]</a></dt>

<dd>
<dl>
<dt><a href="#string-dict">The Strings Dictionary [CLHS-16.2]</a></dt>

<dd>
<dl>
<dt><a href="#string-width">Functions on strings</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>17. <a href="#sequences">Sequences [CLHS-17]</a></dt>

<dd>
<dl>
<dt><a href="#seq-dict">The Sequences Dictionary [CLHS-17.3.]</a></dt>

<dd>
<dl>
<dt><a href="#seq-macro-ext">Additional Macros</a></dt>

<dt><a href="#nreverse-nreconc">Functions <tt>NREVERSE</tt> &amp;
<tt>NRECONC</tt></a></dt>

<dt><a href="#rem-del">Functions <tt>REMOVE</tt> &amp;
<tt>DELETE</tt></a></dt>

<dt><a href="#sorting">Functions <tt>SORT</tt> &amp;
<tt>STABLE-SORT</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>18. <a href="#hash">Hash Tables [CLHS-18]</a></dt>

<dd>
<dl>
<dt><a href="#hash-dict">The Hash Tables Dictionary [CLHS-18.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-hash">Function <tt>MAKE-HASH-TABLE</tt></a></dt>

<dt><a href="#hash-ext">Additional Macros</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>19. <a href="#filenames">Filenames [CLHS-19]</a></dt>

<dd>
<dl>
<dt><a href="#path-components">Pathname Components [CLHS-19.2.1]</a></dt>

<dt><a href="#path-external-notation">External notation.</a></dt>

<dt><a href="#log-path">Logical Pathnames [CLHS-19.3]</a></dt>

<dt><a href="#filename-dict">The Filenames Dictionary [CLHS-19.4]</a></dt>

<dd>
<dl>
<dt><a href="#parsename">Function <tt>PARSE-NAMESTRING</tt></a></dt>

<dt><a href="#pathmerge">Function <tt>MERGE-PATHNAMES</tt></a></dt>

<dt><a href="#load-lpt">Function
<tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>20. <a href="#files">Files [CLHS-20]</a></dt>

<dd>
<dl>
<dt><a href="#file-dict">The Files Dictionary [CLHS-20.2]</a></dt>

<dd>
<dl>
<dt><a href="#dir">Function <tt>DIRECTORY</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>21. <a href="#streams">Streams [CLHS-21]</a></dt>

<dd>
<dl>
<dt><a href="#streams-interactive">Interactive Streams
[CLHS-21.1.1.1.3]</a></dt>

<dt><a href="#terminal">Terminal interaction.</a></dt>

<dt><a href="#stream-dict">The Streams Dictionary [CLHS-21.2.]</a></dt>

<dd>
<dl>
<dt><a href="#stream-eltype">Function
<tt>STREAM-ELEMENT-TYPE</tt></a></dt>

<dt><a href="#bin-input">Binary input, <tt>READ-BYTE</tt>,
<tt>EXT:READ-INTEGER</tt> &amp; <tt>EXT:READ-FLOAT</tt></a></dt>

<dt><a href="#bin-output">Binary output, <tt>WRITE-BYTE</tt>,
<tt>EXT:WRITE-INTEGER</tt> &amp; <tt>EXT:WRITE-FLOAT</tt></a></dt>

<dt><a href="#read-seq">Function <tt>READ-SEQUENCE</tt></a></dt>

<dt><a href="#write-seq">Function <tt>WRITE-SEQUENCE</tt></a></dt>

<dt><a href="#file-pos">Function <tt>FILE-POSITION</tt></a></dt>

<dt><a href="#open">Function <tt>OPEN</tt></a></dt>

<dt><a href="#close">Function <tt>CLOSE</tt></a></dt>

<dt><a href="#broadcast-stream">Class <tt>BROADCAST-STREAM</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>22. <a href="#printer">Printer [CLHS-22]</a></dt>

<dd>
<dl>
<dt><a href="#multi-rep">Multiple Possible Textual Representations
[CLHS-22.1.1.1]</a></dt>

<dt><a href="#print-vector">Printing Other Vectors
[CLHS-22.1.3.7]</a></dt>

<dt><a href="#print-array">Printing Other Arrays [CLHS-22.1.3.8]</a></dt>

<dt><a href="#clpp">The Lisp Pretty Printer [CLHS-22.2]</a></dt>

<dd>
<dl>
<dt><a href="#pp-dispatch">Pretty Print Dispatch Table
[CLHS-22.2.1.4]</a></dt>
</dl>
</dd>

<dt><a href="#print-dict">The Printer Dictionary [CLHS-22.4]</a></dt>

<dd>
<dl>
<dt><a href="#format">Function <tt>FORMAT</tt></a></dt>

<dt><a href="#pathprint">pathnames</a></dt>

<dt><a href="#print-misc">Miscellaneous Issues</a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>23. <a href="#reader">Reader [CLHS-23]</a></dt>

<dd>
<dl>
<dt><a href="#chario">characters</a></dt>

<dt><a href="#read-dispatch-ext">Additional read dispatch macros</a></dt>

<dt><a href="#rt-case">Function <tt>READTABLE-CASE</tt></a></dt>

<dt><a href="#listen">Functions <tt>LISTEN</tt>,
<tt>READ-CHAR-NO-HANG</tt></a></dt>

<dt><a href="#read-byte">Function <tt>READ-BYTE</tt></a></dt>
</dl>
</dd>

<dt>24. <a href="#system">System Construction [CLHS-24]</a></dt>

<dd>
<dl>
<dt><a href="#system-dict">The System Construction Dictionary
[CLHS-24.2]</a></dt>

<dd>
<dl>
<dt><a href="#compilefile">Function <tt>COMPILE-FILE</tt></a></dt>

<dt><a href="#compile-file-path">Function
<tt>COMPILE-FILE-PATHNAME</tt></a></dt>

<dt><a href="#require">Function <tt>REQUIRE</tt></a></dt>

<dt><a href="#loadfile">Function <tt>LOAD</tt></a></dt>

<dt><a href="#features">Variable <tt>*FEATURES*</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>25. <a href="#environment">Environment [CLHS-25]</a></dt>

<dd>
<dl>
<dt><a href="#debugger">Debugging Utilities [CLHS-25.1.2]</a></dt>

<dt><a href="#environment-dict">The Environment Dictionary
[CLHS-25.2]</a></dt>

<dd>
<dl>
<dt><a href="#disassemble">Function <tt>DISASSEMBLE</tt></a></dt>

<dt><a href="#uncompile">Function <tt>EXT:UNCOMPILE</tt></a></dt>

<dt><a href="#documentation">Function <tt>DOCUMENTATION</tt></a></dt>

<dt><a href="#trace">Macro <tt>TRACE</tt></a></dt>

<dt><a href="#inspect">Function <tt>INSPECT</tt></a></dt>

<dt><a href="#space">Macro <tt>EXT:SPACE</tt></a></dt>

<dt><a href="#room">Function <tt>ROOM</tt></a></dt>

<dt><a href="#time">Macro <tt>TIME</tt></a></dt>

<dt><a href="#ed">Function <tt>ED</tt></a></dt>

<dt><a href="#clock">Clock Time</a></dt>

<dt><a href="#machine">Machine</a></dt>

<dt><a href="#apropos">Functions <tt>APROPOS</tt> &amp;
<tt>APROPOS-LIST</tt></a></dt>

<dt><a href="#dribble">Function <tt>DRIBBLE</tt></a></dt>

<dt><a href="#version">Function
<tt>LISP-IMPLEMENTATION-VERSION</tt></a></dt>
</dl>
</dd>
</dl>
</dd>

<dt>26. <a href="#glossary">Glossary [CLHS-26]</a></dt>

<dt>27. <a href="#appendix">Appendix [CLHS-a]</a></dt>

<dt>28. <a href="#issues">X3J13 Issue Index [CLHS-ic]</a></dt>
</dl>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="intro" name="intro" />Chapter 1. Introduction
[CLHS-1]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#spec-symb">Special Symbols [CLHS-1.4.1.3]</a></dt>

<dt><a href="#error-terms">Error Terminology [CLHS-1.4.2]</a></dt>

<dt><a href="#class-prec">Class Precedence Lists [CLHS-1.4.4.5]</a></dt>

<dt><a href="#cl-symb">Symbols in the Package &ldquo;COMMON-LISP&rdquo;
[CLHS-1.9]</a></dt>
</dl>
</div>

<div class="section"><a id="spec-symb" name="spec-symb" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="spec-symb"
name="spec-symb" />Special Symbols <a
href="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html"
target="_top">[CLHS-1.4.1.3]</a></h2>
</div>
</div>

<p>The final delimiter of an interactive stream: On <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, the user has to type Control-D at
the beginning of a line. On <a href="http://www.freedos.org/"
target="_top"><span class="strong"><i>DOS</i></span></a> or <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, the user has to type Control-Z,
followed by <b>Return</b>. This final delimiter is never actually seen by
programs; no need to test for #\^D or #\^Z - use <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
target="_top"><tt>READ-CHAR-NO-HANG</tt></a> to check for end of stream.
Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html"
target="_top"><tt>CLEAR-INPUT</tt></a> on the stream removes the
<tt>end-of-stream</tt> state, thus making it available for further
input.</p>

<p>A newline character can be entered by the user by pressing the
<b>Newline</b> key or, on the numeric keypad, the <b>Enter</b> key.</p>
</div>

<div class="section"><a id="error-terms" name="error-terms" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="error-terms"
name="error-terms" />Error Terminology <a
href="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html"
target="_top">[CLHS-1.4.2]</a></h2>
</div>
</div>

<p>Safety settings are ignored; therefore where the standard uses the
phrase &ldquo;should signal an error&rdquo;, an <a
href="http://www.lisp.org/HyperSpec/Body/fun_error.html"
target="_top"><tt>ERROR</tt></a> is signaled.</p>
</div>

<div class="section"><a id="class-prec" name="class-prec" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="class-prec"
name="class-prec" />Class Precedence Lists <a
href="http://www.lisp.org/HyperSpec/Body/sec_1-4-4-5.html"
target="_top">[CLHS-1.4.4.5]</a></h2>
</div>
</div>

<p>The class precedence lists of the system classes <a
href="http://www.lisp.org/HyperSpec/Body/syscla_class.html"
target="_top"><tt>CLASS</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html"
target="_top"><tt>BUILT-IN-CLASS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
target="_top"><tt>STRUCTURE-CLASS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
target="_top"><tt>STANDARD-CLASS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html"
target="_top"><tt>STANDARD-METHOD</tt></a> contain the class <a
href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
target="_top"><tt>STRUCTURE-OBJECT</tt></a> instead of the class <a
href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
target="_top"><tt>STANDARD-OBJECT</tt></a>.</p>
</div>

<div class="section"><a id="cl-symb" name="cl-symb" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="cl-symb"
name="cl-symb" />Symbols in the Package <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_1-9.html"
target="_top">[CLHS-1.9]</a></h2>
</div>
</div>

<p>The 11 symbols missing from the <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> package (out of 978 specified
by the [<a href="#ansi-cl">ANSI CL standard</a>]):</p>

<table class="simplelist" border="0" summary="Simple list">
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
target="_top"><tt>CALL-METHOD</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html"
target="_top"><tt>CHANGE-CLASS</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html"
target="_top"><tt>DEFINE-METHOD-COMBINATION</tt></a></td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/fun_ensure-ge_ric-function.html"
target="_top"><tt>ENSURE-GENERIC-FUNCTION</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html"
target="_top"><tt>INVALID-METHOD-ERROR</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html"
target="_top"><tt>MAKE-INSTANCES-OBSOLETE</tt></a></td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
target="_top"><tt>MAKE-METHOD</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html"
target="_top"><tt>METHOD-COMBINATION-ERROR</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
target="_top"><tt>METHOD-COMBINATION</tt></a></td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html"
target="_top"><tt>UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html"
target="_top"><tt>UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a></td>
<td>&nbsp;</td>
</tr>
</table>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="syntax" name="syntax" />Chapter 2. Syntax
[CLHS-2]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#tokens">Symbols as Tokens [CLHS-2.3.4]</a></dt>

<dt><a href="#valid-patterns">Valid Patterns for Tokens
[CLHS-2.3.5]</a></dt>

<dt><a href="#double-quote">Double-Quote [CLHS-2.4.5]</a></dt>

<dt><a href="#backquote">Backquote [CLHS-2.4.6]</a></dt>

<dt><a href="#sharpsign">Sharpsign [CLHS-2.4.8]</a></dt>
</dl>
</div>

<div class="section"><a id="tokens" name="tokens" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="tokens"
name="tokens" />Symbols as Tokens <a
href="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html"
target="_top">[CLHS-2.3.4]</a></h2>
</div>
</div>

<p>A "reserved token", i.e., a <a
href="http://www.lisp.org/HyperSpec/Body/glo_t.html#token"
target="_top">token</a> that has potential number syntax but cannot be
interpreted as a number, is interpreted as symbol when being read.</p>

<p>When creating a symbol from a token, no character attributes are
removed.</p>
</div>

<div class="section"><a id="valid-patterns" name="valid-patterns" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="valid-patterns"
name="valid-patterns" />Valid Patterns for Tokens <a
href="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html"
target="_top">[CLHS-2.3.5]</a></h2>
</div>
</div>

<p>When a token with package markers is read, then no checking is done
whether the package part and the symbol-name part do not have number
syntax. (What's the purpose of this check?) So we consider tokens like
USER:: or :1 or LISP::4711 or 21:3 as symbols.</p>
</div>

<div class="section"><a id="double-quote" name="double-quote" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="double-quote"
name="double-quote" />Double-Quote <a
href="http://www.lisp.org/HyperSpec/Body/sec_2-4-5.html"
target="_top">[CLHS-2.4.5]</a></h2>
</div>
</div>

<p>When a string is read, no character attributes are removed.</p>
</div>

<div class="section"><a id="backquote" name="backquote" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="backquote"
name="backquote" />Backquote <a
href="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html"
target="_top">[CLHS-2.4.6]</a></h2>
</div>
</div>

<p>The backquote read macro also works when nested. Example:</p>

<div class="informalexample" id="d0e637"><a id="d0e637" name="d0e637" />
<pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a> ``(,#'(<a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a> () ',a) ,#'(<a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a> `(list #'(<a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a> () ',a) #'(<a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a> () ',b)))
 = (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a> (list 'list (list 'function (list 'lambda nil (list 'quote a)))
                     (list 'function (list 'lambda nil (list 'quote b)))))
</pre>
</div>


<br />
<br />
<p>Multiple backquote combinations like <tt>,,@</tt> or <tt>,@,@</tt> are
not implemented. Their use would be confusing anyway.</p>
</div>

<div class="section"><a id="sharpsign" name="sharpsign" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="sharpsign"
name="sharpsign" />Sharpsign <a
href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html"
target="_top">[CLHS-2.4.8]</a></h2>
</div>
</div>

<p>Reader macros are also defined for the following:</p>

<div class="table">
<p><a id="d0e683" name="d0e683" /><b>Table 2.1. Additional reader
macros</b></p>

<table summary="Additional reader macros" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>Macro</th>
<th>Meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td>#,</td>
<td>load-time evaluation</td>
</tr>

<tr>
<td>#Y</td>
<td>function objects and file <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>s</td>
</tr>

<tr>
<td>#""</td>
<td>pathname</td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="eval" name="eval" />Chapter 3. Evaluation and
Compilation [CLHS-3]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#evaluation">Evaluation [CLHS-3.1]</a></dt>

<dd>
<dl>
<dt><a href="#eval-environ">Introduction to Environments
[CLHS-3.1.1]</a></dt>
</dl>
</dd>

<dt><a href="#compilation">Compilation [CLHS-3.2]</a></dt>

<dd>
<dl>
<dt><a href="#compiler-terms">Compiler Terminology [CLHS-3.2.1]</a></dt>

<dt><a href="#compiler-macros">Compiler Macros [CLHS-3.2.2.1]</a></dt>

<dt><a href="#similarity">Definition of Similarity
[CLHS-3.2.4.2.2]</a></dt>
</dl>
</dd>

<dt><a href="#declarations">Declarations [CLHS-3.3]</a></dt>

<dd>
<dl>
<dt><a href="#compile-decl">Additional declarations</a></dt>
</dl>
</dd>

<dt><a href="#lalist">Lambda Lists [CLHS-3.4]</a></dt>

<dd>
<dl>
<dt><a href="#boa-lalist">Boa Lambda Lists [CLHS-3.4.6]</a></dt>
</dl>
</dd>

<dt><a href="#eval-comp">The Evaluation and Compilation Dictionary
[CLHS-3.8]</a></dt>

<dd>
<dl>
<dt><a href="#spec-decl">Declaration <tt>SPECIAL</tt></a></dt>

<dt><a href="#eval-when">Macro <tt>EVAL-WHEN</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<p>All the functions built by <a
href="http://www.lisp.org/HyperSpec/Body/speope_function.html"
target="_top"><tt>FUNCTION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
target="_top"><tt>COMPILE</tt></a> and the like are atoms. There are
built-in functions written in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, compiled functions (both of type <a
href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html"
target="_top"><tt>COMPILED-FUNCTION</tt></a>) and interpreted functions
(of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
target="_top"><tt>FUNCTION</tt></a>).</p>

<div class="section"><a id="evaluation" name="evaluation" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="evaluation"
name="evaluation" />Evaluation <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-1.html"
target="_top">[CLHS-3.1]</a></h2>
</div>
</div>

<div class="section"><a id="eval-environ" name="eval-environ" />
<div class="titlepage">
<div>
<h3 class="title"><a id="eval-environ" name="eval-environ" />Introduction
to Environments <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1.html"
target="_top">[CLHS-3.1.1]</a></h3>
</div>
</div>

<p><a id="the-env" name="the-env" /><b><a
href="#the-env"><tt>EXT:THE-ENVIRONMENT</tt></a>.&nbsp;</b> As in Scheme,
the macro <tt>(<a href="#the-env"><tt>EXT:THE-ENVIRONMENT</tt></a>)</tt>
returns the current lexical environment. This works only in interpreted
code and is not compilable!</p>

<p><a id="eval-env" name="eval-env" /><b><tt>(EXT:EVAL-ENV
<i><tt>form</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a>
<i><tt>env</tt></i>)</tt>.&nbsp;</b> evaluates a form in a given lexical
environment, just as if the form had been a part of the program that the
environment came from.</p>
</div>
</div>

<div class="section"><a id="compilation" name="compilation" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="compilation"
name="compilation" />Compilation <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-2.html"
target="_top">[CLHS-3.2]</a></h2>
</div>
</div>

<div class="section"><a id="compiler-terms" name="compiler-terms" />
<div class="titlepage">
<div>
<h3 class="title"><a id="compiler-terms" name="compiler-terms" />Compiler
Terminology <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-1.html"
target="_top">[CLHS-3.2.1]</a></h3>
</div>
</div>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> compiles
to platform-independent <a href="#bytecode"
title="Chapter 30. The CLISP bytecode specification">byte-code</a>.</p>
</div>

<div class="section"><a id="compiler-macros" name="compiler-macros" />
<div class="titlepage">
<div>
<h3 class="title"><a id="compiler-macros"
name="compiler-macros" />Compiler Macros <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-2-2-1.html"
target="_top">[CLHS-3.2.2.1]</a></h3>
</div>
</div>

<p>Compiler macros are expanded in the compiled code only, and ignored by
the interpreter.</p>
</div>

<div class="section"><a id="similarity" name="similarity" />
<div class="titlepage">
<div>
<h3 class="title"><a id="similarity" name="similarity" />Definition of
Similarity <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-2-2.html"
target="_top">[CLHS-3.2.4.2.2]</a></h3>
</div>
</div>

<p>Hash tables are <a
href="http://www.lisp.org/HyperSpec/Body/glo_e.html#externalizable_object"
target="_top">externalizable object</a>s.</p>
</div>
</div>

<div class="section"><a id="declarations" name="declarations" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="declarations"
name="declarations" />Declarations <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-3.html"
target="_top">[CLHS-3.3]</a></h2>
</div>
</div>

<p>The declarations <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/dec_type.html"
target="_top"><tt>TYPE</tt></a> <i><tt>type</tt></i>
<i><tt>variable</tt></i> ...)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html"
target="_top"><tt>FTYPE</tt></a> <i><tt>type</tt></i>
<i><tt>function</tt></i> ...)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html"
target="_top"><tt>OPTIMIZE</tt></a> (<i><tt>quality</tt></i>
<i><tt>value</tt></i>) ...)</tt> are ignored by the interpreter and the
compiler.</p>

<p>The [<a href="#ansi-cl">ANSI CL standard</a>] declaration <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html"
target="_top"><tt>OPTIMIZE</tt></a> (debug ...))</tt> is legal.</p>

<p>The [<a href="#ansi-cl">ANSI CL standard</a>] declaration <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/dec_ignorecm_ignorable.html"
target="_top"><tt>IGNORABLE</tt></a> <i><tt>variable</tt></i> ...)</tt>
affects the variable binding for the variable <i><tt>variable</tt></i>.
The compiler will not warn about the variable, regardless whether it is
used or not.</p>

<div class="section"><a id="compile-decl" name="compile-decl" />
<div class="titlepage">
<div>
<h3 class="title"><a id="compile-decl" name="compile-decl" />Additional
declarations</h3>
</div>
</div>

<p>The declaration <tt>(compile)</tt> has the effect that the current form
is compiled prior to execution. Examples:</p>

<pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
target="_top"><tt>LOCALLY</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/sym_declare.html"
target="_top"><tt>DECLARE</tt></a> (compile)) <i><tt>form</tt></i>)
</pre>

executes a compiled version of form.
<br />
<br />
<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET</tt></a> ((x 0))
  (<a
href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
target="_top"><tt>FLET</tt></a> ((inc () (<a
href="http://www.lisp.org/HyperSpec/Body/sym_declare.html"
target="_top"><tt>DECLARE</tt></a> (compile)) (<a
href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html"
target="_top"><tt>INCF</tt></a> x))
         (dec () (<a
href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html"
target="_top"><tt>DECF</tt></a> x)))
    (<a href="http://www.lisp.org/HyperSpec/Body/acc_values.html"
target="_top"><tt>VALUES</tt></a> #'inc #'dec)))
</pre>

returns two functions. The first is compiled and increments
<i><tt>x</tt></i>, the second is interpreted (slower) and decrements the
same <i><tt>x</tt></i>.
<br />
<br />
<p>The type assertion <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/speope_the.html"
target="_top"><tt>THE</tt></a> <i><tt>value-type</tt></i>
<i><tt>form</tt></i>)</tt> enforces a type check in interpreted code. No
type check is done in compiled code. See also the <a
href="#ethe"><tt>EXT:ETHE</tt></a> macro.</p>
</div>
</div>

<div class="section"><a id="lalist" name="lalist" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="lalist"
name="lalist" />Lambda Lists <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4.html"
target="_top">[CLHS-3.4]</a></h2>
</div>
</div>

<div class="section"><a id="boa-lalist" name="boa-lalist" />
<div class="titlepage">
<div>
<h3 class="title"><a id="boa-lalist" name="boa-lalist" />Boa Lambda Lists
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html"
target="_top">[CLHS-3.4.6]</a></h3>
</div>
</div>

<p>The initial value of an <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;AUX</tt></a> variable in a boa <a href="#lalist"
title="Lambda Lists
 [CLHS-3.4]">lambda list</a> is the value of the corresponding slot's
initial form.</p>
</div>
</div>

<div class="section"><a id="eval-comp" name="eval-comp" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="eval-comp"
name="eval-comp" />The Evaluation and Compilation Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-8.html"
target="_top">[CLHS-3.8]</a></h2>
</div>
</div>

<div class="section"><a id="spec-decl" name="spec-decl" />
<div class="titlepage">
<div>
<h3 class="title"><a id="spec-decl" name="spec-decl" />Declaration <a
href="http://www.lisp.org/HyperSpec/Body/dec_special.html"
target="_top"><tt>SPECIAL</tt></a></h3>
</div>
</div>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html"
target="_top"><tt>PROCLAIM</tt></a> '(<a
href="http://www.lisp.org/HyperSpec/Body/dec_special.html"
target="_top"><tt>SPECIAL</tt></a> <i><tt>variable</tt></i>))</tt>
declarations may not be undone. The same holds for <a
href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
target="_top"><tt>DEFVAR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
target="_top"><tt>DEFPARAMETER</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
target="_top"><tt>DEFCONSTANT</tt></a> declarations.</p>

<p>It is an error if a <a
href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
target="_top"><tt>DEFCONSTANT</tt></a> variable is bound at the moment the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
target="_top"><tt>DEFCONSTANT</tt></a> is executed, but <a
href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
target="_top"><tt>DEFCONSTANT</tt></a> does not check this.</p>

<p>Constants may not be bound dynamically or lexically.</p>
</div>

<div class="section"><a id="eval-when" name="eval-when" />
<div class="titlepage">
<div>
<h3 class="title"><a id="eval-when" name="eval-when" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
target="_top"><tt>EVAL-WHEN</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
target="_top"><tt>EVAL-WHEN</tt></a> also accepts the situations <tt>(not
eval)</tt> and <tt>(not compile)</tt>.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="types-classes" name="types-classes" />Chapter 4.
Types and Classes [CLHS-4]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#types">Types [CLHS-4.2]</a></dt>

<dd>
<dl>
<dt><a href="#type-spec">Type Specifiers [CLHS-4.2.3]</a></dt>
</dl>
</dd>

<dt><a href="#classes">Classes [CLHS-4.3]</a></dt>

<dt><a href="#clos-diff">Deviations from [<a href="#ansi-cl">ANSI CL
standard</a>]</a></dt>

<dt><a href="#metaclasses">Standard Metaclasses [CLHS-4.3.1.1]</a></dt>

<dt><a href="#def-class">Defining Classes [CLHS-4.3.2]</a></dt>

<dt><a href="#redef-class">Redefining Classes [CLHS-4.3.6]</a></dt>

<dt><a href="#type-class-int">Integrating Types and Classes
[CLHS-4.3.7]</a></dt>

<dt><a href="#type-class-dict">The Types and Classes Dictionary
[CLHS-4.4]</a></dt>

<dd>
<dl>
<dt><a href="#fixnum-char-ansi">Function <tt>COERCE</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="types" name="types" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="types" name="types" />Types
<a href="http://www.lisp.org/HyperSpec/Body/sec_4-2.html"
target="_top">[CLHS-4.2]</a></h2>
</div>
</div>

<div class="section"><a id="type-spec" name="type-spec" />
<div class="titlepage">
<div>
<h3 class="title"><a id="type-spec" name="type-spec" />Type Specifiers <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-2-3.html"
target="_top">[CLHS-4.2.3]</a></h3>
</div>
</div>

<p>The general form of the <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> type specifier is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <i><tt>type-of-real-part</tt></i>
<i><tt>type-of-imaginary-part</tt></i>)</tt>. The type specifier <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <i><tt>type</tt></i>)</tt> is
equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <i><tt>type</tt></i>
<i><tt>type</tt></i>)</tt>.</p>

<p>The [<a href="#ansi-cl">ANSI CL standard</a>] type specifier <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
target="_top"><tt>REAL</tt></a> <i><tt>low</tt></i>
<i><tt>high</tt></i>)</tt> denotes the real numbers between
<i><tt>low</tt></i> and <i><tt>high</tt></i>.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/mac_deftype.html"
target="_top"><tt>DEFTYPE</tt></a> <a href="#lalist" title="Lambda Lists
 [CLHS-3.4]">lambda list</a>s are subject to destructuring (nested <a
href="#lalist" title="Lambda Lists
 [CLHS-3.4]">lambda list</a>s are allowed, as in <a
href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
target="_top"><tt>DEFMACRO</tt></a>) and may contain a <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;WHOLE</tt></a> marker, but not an <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;ENVIRONMENT</tt></a> marker.</p>

<p><b><tt>(</tt>ext:type-expand</b> <i><tt>typespec</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>once-p</tt></i>).&nbsp;If
<i><tt>typespec</tt></i> is a user-defined type, this will expand it
recursively until it is no longer a user-defined type (unless
<i><tt>once-p</tt></i> is supplied and non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>). Two values are returned - the expansion
and an indicator (<a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>) of whether the original
<i><tt>typespec</tt></i> was a user-defined type.</p>

<div class="itemizedlist">
<p><b>The possible results of <a
href="http://www.lisp.org/HyperSpec/Body/fun_type-of.html"
target="_top"><tt>TYPE-OF</tt></a></b></p>

<ul>
<li><a id="d0e1210" name="d0e1210" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a></li>

<li><a id="d0e1215" name="d0e1215" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
target="_top"><tt>SYMBOL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
target="_top"><tt>NULL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
target="_top"><tt>BOOLEAN</tt></a></li>

<li><a id="d0e1228" name="d0e1228" /><a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html"
target="_top"><tt>BIGNUM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
target="_top"><tt>RATIONAL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a></li>

<li><a id="d0e1261" name="d0e1261" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html"
target="_top"><tt>BASE-CHAR</tt></a></li>

<li><a id="d0e1270" name="d0e1270" /><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
target="_top"><tt>ARRAY</tt></a> <i><tt>element-type</tt></i>
<i><tt>dimensions</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html"
target="_top"><tt>SIMPLE-ARRAY</tt></a> <i><tt>element-type</tt></i>
<i><tt>dimensions</tt></i>)</tt></li>

<li><a id="d0e1297" name="d0e1297" /><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> <i><tt>size</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a> <i><tt>size</tt></i>)</tt></li>

<li><a id="d0e1322" name="d0e1322" /><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> <i><tt>size</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a> <i><tt>size</tt></i>)</tt></li>

<li><a id="d0e1343" name="d0e1343" /><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_base-string.html"
target="_top"><tt>BASE-STRING</tt></a> <i><tt>size</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-base-string.html"
target="_top"><tt>SIMPLE-BASE-STRING</tt></a>
<i><tt>size</tt></i>)</tt></li>

<li><a id="d0e1364" name="d0e1364" /><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html"
target="_top"><tt>BIT-VECTOR</tt></a> <i><tt>size</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html"
target="_top"><tt>SIMPLE-BIT-VECTOR</tt></a>
<i><tt>size</tt></i>)</tt></li>

<li><a id="d0e1385" name="d0e1385" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
target="_top"><tt>FUNCTION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html"
target="_top"><tt>COMPILED-FUNCTION</tt></a></li>

<li><a id="d0e1394" name="d0e1394" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
target="_top"><tt>FILE-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
target="_top"><tt>SYNONYM-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
target="_top"><tt>BROADCAST-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html"
target="_top"><tt>CONCATENATED-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html"
target="_top"><tt>TWO-WAY-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html"
target="_top"><tt>ECHO-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
target="_top"><tt>STRING-STREAM</tt></a></li>

<li><a id="d0e1427" name="d0e1427" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
target="_top"><tt>PACKAGE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
target="_top"><tt>HASH-TABLE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html"
target="_top"><tt>READTABLE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
target="_top"><tt>PATHNAME</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
target="_top"><tt>LOGICAL-PATHNAME</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html"
target="_top"><tt>RANDOM-STATE</tt></a>, <a href="#byte-type"
title="Byte Operations on Integers
 [CLHS-12.1.1.3.2]">BYTE</a></li>

<li><a id="d0e1456" name="d0e1456" /><tt>special-operator</tt>,
<tt>load-time-eval</tt>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a>, <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>,
<tt>FFI:FOREIGN-POINTER</tt>, <tt>foreign-address</tt>,
<tt>foreign-variable</tt>, <tt>foreign-function</tt></li>

<li><a id="d0e1483" name="d0e1483" /><a href="#weak"
title="Extensions-1.6. Weak Pointers"><tt>EXT:WEAK-POINTER</tt></a>, <a
href="#reader" title="Chapter 23. Reader
 [CLHS-23]"><tt>read-label</tt></a>, <a href="#reader"
title="Chapter 23. Reader
 [CLHS-23]"><tt>frame-pointer</tt></a>, <tt>system-internal</tt></li>

<li><a id="d0e1499" name="d0e1499" /><tt>address</tt> (should not
occur)</li>

<li><a id="d0e1504" name="d0e1504" />any other symbol (structure types or
<b>CLOS</b> classes)</li>

<li><a id="d0e1510" name="d0e1510" />a class (<b>CLOS</b> classes without
proper name)</li>
</ul>
</div>
</div>
</div>

<div class="section"><a id="classes" name="classes" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="classes"
name="classes" />Classes <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3.html"
target="_top">[CLHS-4.3]</a></h2>
</div>
</div>

<p>The <b>CLOS</b> symbols are <a
href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a>ed from the package <a href="#classes"
title="Classes
 [CLHS-4.3]">&ldquo;CLOS&rdquo;</a>. <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> uses (as in <a
href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
target="_top"><tt>USE-PACKAGE</tt></a>) <a href="#classes" title="Classes
 [CLHS-4.3]">&ldquo;CLOS&rdquo;</a> and <a href="#re-export"
title="Function EXT:RE-EXPORT"><tt>EXT:RE-EXPORT</tt></a>s all its
exported symbols. Since the default <tt>:USE</tt> argument to <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
target="_top"><tt>MAKE-PACKAGE</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> (see <a href="#make-pack"
title="Function MAKE-PACKAGE">here</a>), the <b>CLOS</b> symbols are
normally visible in all user packages. If you do not want them (for
example, if you want to use the <a
href="ftp://clisp.cons.org/pub/lisp/clisp/packages/pcl.sept92f.clisp.tar.gz"
 target="_top">PCL</a> implementation of <b>CLOS</b> instead of the native
one), do the following:</p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "CL-NO-CLOS" (:use "CL"))
(<a
href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html"
target="_top"><tt>DO-EXTERNAL-SYMBOLS</tt></a> (<i><tt>symbol</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a>)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_shadow.html"
target="_top"><tt>SHADOW</tt></a> <i><tt>symbol</tt></i> "CL-NO-CLOS"))
(<a
href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html"
target="_top"><tt>DO-SYMBOLS</tt></a> (<i><tt>symbol</tt></i> "CL-NO-CLOS")
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a> <i><tt>symbol</tt></i> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "CL-NO-CLOS")
(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> "pcl") ; or whatever
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "MY-USER" (:use "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "MY-USER")
;; your code which uses PCL goes here
</pre>

.
<br />
<br />
</div>

<div class="section"><a id="clos-diff" name="clos-diff" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="clos-diff"
name="clos-diff" />Deviations from [<a href="#ansi-cl">ANSI CL
standard</a>]</h2>
</div>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
target="_top"><tt>DEFCLASS</tt></a>.&nbsp;</b> It <span
class="emphasis"><i>is</i></span> required that the superclasses of a
class be defined before the <a
href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
target="_top"><tt>DEFCLASS</tt></a> form for the class is evaluated.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
target="_top"><tt>DEFCLASS</tt></a> supports the option
<tt>:METACLASS</tt> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
target="_top"><tt>STRUCTURE-CLASS</tt></a>. This option is necessary in
order to define a subclass of a <a
href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
target="_top"><tt>DEFSTRUCT</tt></a>-defined structure type using <a
href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
target="_top"><tt>DEFCLASS</tt></a> instead of <a
href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
target="_top"><tt>DEFSTRUCT</tt></a>.</p>

<p>When <a
href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
target="_top"><tt>CALL-NEXT-METHOD</tt></a> is called with arguments, the
rule that the ordered set of applicable methods must be the same as for
the original arguments is enforced by the implementation only in
interpreted code.</p>

<p>There is a generic function <span
class="strong"><i><tt>CLOS:NO-PRIMARY-METHOD</tt></i></span> (similar to
<a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html"
target="_top"><tt>NO-APPLICABLE-METHOD</tt></a>) which is called when a
generic function of the class <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html"
target="_top"><tt>STANDARD-GENERIC-FUNCTION</tt></a> is invoked and no
primary method on that generic function is applicable.</p>

<p><span class="strong"><i><tt>clos:generic-flet</tt></i></span> and <span
class="strong"><i><tt>clos:generic-labels</tt></i></span> are implemented
as macros, not as special operators. They are not imported into the
packages <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">&ldquo;COMMON-LISP-USER&rdquo;</a> and <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> because of the [<a
href="#ansi-cl">ANSI CL standard</a>] issue <a
href="http://www.lisp.org/HyperSpec/Issues/iss181.html"
target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a>.</p>

<p>The function <a
href="http://www.lisp.org/HyperSpec/Body/fun_ensure-ge_ric-function.html"
target="_top"><tt>ENSURE-GENERIC-FUNCTION</tt></a> is not implemented.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html"
target="_top"><tt>ADD-METHOD</tt></a> can put methods into other generic
functions than the one the method came from.</p>

<p><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html"
target="_top"><tt>PRINT-OBJECT</tt></a> is only called on objects of type
<a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
target="_top"><tt>STANDARD-OBJECT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
target="_top"><tt>STRUCTURE-OBJECT</tt></a>. It is not called on other
objects, like <a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a>es and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
target="_top"><tt>NUMBER</tt></a>s, due to the performance concerns.</p>

<p><a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html"
target="_top"><tt>DOCUMENTATION</tt></a> still has the [<a
href="#CLtL1">CLtL1</a>] implementation.</p>
</div>

<div class="section"><a id="metaclasses" name="metaclasses" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="metaclasses"
name="metaclasses" />Standard Metaclasses <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html"
target="_top">[CLHS-4.3.1.1]</a></h2>
</div>
</div>

<p>Among those classes listed in <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html#classtypecorrespondence"
 target="_top">Figure 4-8</a>, only the following are instances of <a
href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html"
target="_top"><tt>BUILT-IN-CLASS</tt></a>:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e1772" name="d0e1772" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
target="_top"><tt>T</tt></a></li>

<li><a id="d0e1777" name="d0e1777" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a></li>

<li><a id="d0e1782" name="d0e1782" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
target="_top"><tt>NUMBER</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
target="_top"><tt>REAL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
target="_top"><tt>FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
target="_top"><tt>RATIONAL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
target="_top"><tt>RATIO</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></li>

<li><a id="d0e1812" name="d0e1812" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html"
target="_top"><tt>SEQUENCE</tt></a></li>

<li><a id="d0e1817" name="d0e1817" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
target="_top"><tt>ARRAY</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html"
target="_top"><tt>BIT-VECTOR</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a></li>

<li><a id="d0e1834" name="d0e1834" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
target="_top"><tt>LIST</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a></li>

<li><a id="d0e1843" name="d0e1843" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
target="_top"><tt>SYMBOL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
target="_top"><tt>NULL</tt></a></li>

<li><a id="d0e1852" name="d0e1852" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
target="_top"><tt>FUNCTION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
target="_top"><tt>GENERIC-FUNCTION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html"
target="_top"><tt>STANDARD-GENERIC-FUNCTION</tt></a></li>

<li><a id="d0e1865" name="d0e1865" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
target="_top"><tt>HASH-TABLE</tt></a></li>

<li><a id="d0e1870" name="d0e1870" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
target="_top"><tt>PACKAGE</tt></a></li>

<li><a id="d0e1875" name="d0e1875" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
target="_top"><tt>PATHNAME</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
target="_top"><tt>LOGICAL-PATHNAME</tt></a></li>

<li><a id="d0e1885" name="d0e1885" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html"
target="_top"><tt>RANDOM-STATE</tt></a></li>

<li><a id="d0e1890" name="d0e1890" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html"
target="_top"><tt>READTABLE</tt></a></li>

<li><a id="d0e1895" name="d0e1895" /><a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
target="_top"><tt>BROADCAST-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html"
target="_top"><tt>CONCATENATED-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html"
target="_top"><tt>ECHO-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
target="_top"><tt>STRING-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
target="_top"><tt>FILE-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
target="_top"><tt>SYNONYM-STREAM</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html"
target="_top"><tt>TWO-WAY-STREAM</tt></a></li>
</ul>
</div>


<br />
<br />
</div>

<div class="section"><a id="def-class" name="def-class" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="def-class"
name="def-class" />Defining Classes <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html"
target="_top">[CLHS-4.3.2]</a></h2>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
target="_top"><tt>DEFCLASS</tt></a> supports the <tt>:METACLASS</tt>
option. Possible values are <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
target="_top"><tt>STANDARD-CLASS</tt></a> (the default) and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
target="_top"><tt>STRUCTURE-CLASS</tt></a> (which creates structure
classes, like <a
href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
target="_top"><tt>DEFSTRUCT</tt></a> does).</p>
</div>

<div class="section"><a id="redef-class" name="redef-class" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="redef-class"
name="redef-class" />Redefining Classes <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html"
target="_top">[CLHS-4.3.6]</a></h2>
</div>
</div>

<p>Redefining classes is not supported. The function <a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html"
target="_top"><tt>UPDATE-INSTANCE-FOR-REDEFINED-CLASS</tt></a> is not
implemented.</p>
</div>

<div class="section"><a id="type-class-int" name="type-class-int" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="type-class-int"
name="type-class-int" />Integrating Types and Classes <a
href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html"
target="_top">[CLHS-4.3.7]</a></h2>
</div>
</div>

<p>The class <a
href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
target="_top"><tt>METHOD-COMBINATION</tt></a> is not implemented.</p>
</div>

<div class="section"><a id="type-class-dict" name="type-class-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="type-class-dict"
name="type-class-dict" />The Types and Classes Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html"
target="_top">[CLHS-4.4]</a></h2>
</div>
</div>

<div class="section"><a id="fixnum-char-ansi" name="fixnum-char-ansi" />
<div class="titlepage">
<div>
<h3 class="title"><a id="fixnum-char-ansi"
name="fixnum-char-ansi" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a> is not a <a
href="http://www.lisp.org/HyperSpec/Body/glo_c.html#character_designator"
target="_top">character designator</a> in [<a href="#ansi-cl">ANSI CL
standard</a>], although <a
href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> provides an obvious venue to <a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a> a <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a> to a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>. When <a href="#fixnum-char-ansi"
title="Function COERCE"><tt>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a>s <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>s to <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>s via <a
href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a>. When <a href="#fixnum-char-ansi"
title="Function COERCE"><tt>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> is
non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>s cannot be <a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a>d to <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>s.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="data" name="data" />Chapter 5. Data and Control
Flow [CLHS-5]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#flow-dict">The Data and Control Flow Dictionary
[CLHS-5.3]</a></dt>

<dd>
<dl>
<dt><a href="#fcase">Macro <tt>EXT:FCASE</tt></a></dt>

<dt><a href="#eq">Function <tt>EQ</tt></a></dt>

<dt><a href="#sym-fun">Function <tt>SYMBOL-FUNCTION</tt></a></dt>

<dt><a href="#setf">Macro <tt>SETF</tt></a></dt>

<dt><a href="#func">Special Operator <tt>FUNCTION</tt></a></dt>

<dt><a href="#def-sym-mac">Macro <tt>DEFINE-SYMBOL-MACRO</tt></a></dt>

<dt><a href="#lambda">Macro <tt>LAMBDA</tt></a></dt>

<dt><a href="#defun">Macros <tt>DEFUN</tt> &amp;
<tt>DEFMACRO</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="flow-dict" name="flow-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="flow-dict"
name="flow-dict" />The Data and Control Flow Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html"
target="_top">[CLHS-5.3]</a></h2>
</div>
</div>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html"
target="_top"><tt>DESTRUCTURING-BIND</tt></a>.&nbsp;</b> does not perform
full error checking.</p>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
target="_top"><tt>PROG1</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
target="_top"><tt>PROG2</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_and.html"
target="_top"><tt>AND</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_or.html"
target="_top"><tt>OR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html"
target="_top"><tt>PSETQ</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
target="_top"><tt>WHEN</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
target="_top"><tt>UNLESS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_cond.html"
target="_top"><tt>COND</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
target="_top"><tt>CASE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
target="_top"><tt>MULTIPLE-VALUE-LIST</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html"
target="_top"><tt>MULTIPLE-VALUE-BIND</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html"
target="_top"><tt>MULTIPLE-VALUE-SETQ</tt></a>.&nbsp;</b> are implemented
as special operators and, as such, are rather efficient.</p>

<div class="section"><a id="fcase" name="fcase" />
<div class="titlepage">
<div>
<h3 class="title"><a id="fcase" name="fcase" />Macro
<tt>EXT:FCASE</tt></h3>
</div>
</div>

<p>This macro allows specifying the test for <a
href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
target="_top"><tt>CASE</tt></a>, e.g.,</p>

<pre class="programlisting">
(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</pre>

is the same as 

<pre class="programlisting">
(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</pre>


<br />
<br />
</div>

<div class="section"><a id="eq" name="eq" />
<div class="titlepage">
<div>
<h3 class="title"><a id="eq" name="eq" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> compares <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>s and <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>s as <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a> does. No unnecessary copies are made of <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>s and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
target="_top"><tt>NUMBER</tt></a>s. Nevertheless, one should use <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a> as it is more portable across <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a>
implementations.</p>

<p><tt>(let ((x y)) (eq x x))</tt> always returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, regardless of <i><tt>y</tt></i>.</p>
</div>

<div class="section"><a id="sym-fun" name="sym-fun" />
<div class="titlepage">
<div>
<h3 class="title"><a id="sym-fun" name="sym-fun" />Function <a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a></h3>
</div>
</div>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a> <i><tt>symbol</tt></i>)
<i><tt>object</tt></i>)</tt> requires <i><tt>object</tt></i> to be either
a function, a <a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a> return value or a <a
href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
target="_top">lambda expression</a>. The <a
href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
target="_top">lambda expression</a> is thereby immediately converted to a
<a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
target="_top"><tt>FUNCTION</tt></a>.</p>
</div>

<div class="section"><a id="setf" name="setf" />
<div class="titlepage">
<div>
<h3 class="title"><a id="setf" name="setf" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a></h3>
</div>
</div>

<p>Additional places:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e2247" name="d0e2247" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a> #'<i><tt>symbol</tt></i> ...)
<i><tt>object</tt></i>)</tt> and <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a> '<i><tt>symbol</tt></i> ...)
<i><tt>object</tt></i>)</tt> are equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<i><tt>symbol</tt></i> ...)
<i><tt>object</tt></i>)</tt>.</dd>

<dt><a id="d0e2301" name="d0e2301" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
target="_top"><tt>PROGN</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
target="_top"><tt>PROGN</tt></a> <i><tt>form</tt></i> ...
<i><tt>place</tt></i>) <i><tt>object</tt></i>)</tt></dd>

<dt><a id="d0e2329" name="d0e2329" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
target="_top"><tt>LOCALLY</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
target="_top"><tt>LOCALLY</tt></a> <i><tt>declaration</tt></i> ...
<i><tt>form</tt></i> ... <i><tt>place</tt></i>)
<i><tt>object</tt></i>)</tt></dd>

<dt><a id="d0e2360" name="d0e2360" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/speope_if.html"
target="_top"><tt>IF</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/speope_if.html"
target="_top"><tt>IF</tt></a> <i><tt>condition</tt></i>
<i><tt>place1</tt></i> <i><tt>place2</tt></i>)
<i><tt>object</tt></i>)</tt></dd>

<dt><a id="d0e2391" name="d0e2391" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
target="_top"><tt>GET-DISPATCH-MACRO-CHARACTER</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
target="_top"><tt>GET-DISPATCH-MACRO-CHARACTER</tt></a> ...) ...)</tt>
calls <a
href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
target="_top"><tt>SET-DISPATCH-MACRO-CHARACTER</tt></a>.</dd>

<dt><a id="d0e2414" name="d0e2414" /><span class="term"><a
href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>:</span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>)
<i><tt>digits</tt></i>)</tt> sets the default mantissa length of long
floats to <i><tt>digits</tt></i> bits.</dd>

<dt><a id="d0e2440" name="d0e2440" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
target="_top"><tt>VALUES-LIST</tt></a></span></dt>

<dd><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
target="_top"><tt>VALUES-LIST</tt></a> <i><tt>list</tt></i>)
<i><tt>form</tt></i>)</tt> is equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
target="_top"><tt>VALUES-LIST</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <i><tt>list</tt></i> (<a
href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
target="_top"><tt>MULTIPLE-VALUE-LIST</tt></a>
<i><tt>form</tt></i>)))</tt></dd>
</dl>
</div>


<br />
<br />
<p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> markers in <a
href="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html"
target="_top"><tt>DEFSETF</tt></a> <a href="#lalist" title="Lambda Lists
 [CLHS-3.4]">lambda list</a>s are supported, but the corresponding
keywords must appear literally in the program text.</p>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
target="_top"><tt>GET-SETF-EXPANSION</tt></a> <i><tt>form</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>env</tt></i>)</tt>,
<tt>(EXT:GET-SETF-METHOD <i><tt>form</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>env</tt></i>)</tt>, and
<tt>(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <i><tt>form</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>env</tt></i>)</tt> receive
as optional argument <i><tt>env</tt></i> the environment necessary for
macro expansions. In <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html"
target="_top"><tt>DEFINE-SETF-EXPANDER</tt></a> and
<tt>EXT:DEFINE-SETF-METHOD</tt> <a href="#lalist" title="Lambda Lists
 [CLHS-3.4]">lambda list</a>s, one can specify <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;ENVIRONMENT</tt></a> and a variable, which will be
bound to the environment. This environment should be passed to all calls
of <a
href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
target="_top"><tt>GET-SETF-EXPANSION</tt></a>,
<tt>EXT:GET-SETF-METHOD</tt> and
<tt>EXT:GET-SETF-METHOD-MULTIPLE-VALUE</tt>. If this is done, even local
macros will be interpreted as places correctly.</p>

<p>Attempts to modify read-only data will signal an error. Program text
and quoted constants loaded from files are considered read-only data. This
check is only performed for strings, not for conses, other kinds of
arrays, and user-defined data types.</p>

<p>See also the <a href="#letf"><tt>EXT:LETF</tt></a> and <a
href="#letf"><tt>EXT:LETF*</tt></a> macros.</p>
</div>

<div class="section"><a id="func" name="func" />
<div class="titlepage">
<div>
<h3 class="title"><a id="func" name="func" />Special Operator <a
href="http://www.lisp.org/HyperSpec/Body/speope_function.html"
target="_top"><tt>FUNCTION</tt></a></h3>
</div>
</div>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/speope_function.html"
target="_top"><tt>FUNCTION</tt></a> <i><tt>symbol</tt></i>)</tt> returns
the local function definition established by <a
href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
target="_top"><tt>FLET</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
target="_top"><tt>LABELS</tt></a>, if it exists, otherwise the global
function definition.</p>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html"
target="_top"><tt>SPECIAL-OPERATOR-P</tt></a> <i><tt>symbol</tt></i>)</tt>
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>. If it returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, then <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a> <i><tt>symbol</tt></i>)</tt>
returns the (useless) special operator handler.</p>
</div>

<div class="section"><a id="def-sym-mac" name="def-sym-mac" />
<div class="titlepage">
<div>
<h3 class="title"><a id="def-sym-mac" name="def-sym-mac" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>DEFINE-SYMBOL-MACRO</tt></a></h3>
</div>
</div>

<p>The macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>DEFINE-SYMBOL-MACRO</tt></a> establishes <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a>s with global scope (as opposed to
<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a>s defined with <a
href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html"
target="_top"><tt>SYMBOL-MACROLET</tt></a>, which have local scope):
<tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>DEFINE-SYMBOL-MACRO</tt></a> <i><tt>symbol</tt></i>
<i><tt>expansion</tt></i>)</tt>.</p>

<p>The function <span
class="strong"><i><tt>EXT:SYMBOL-MACRO-EXPAND</tt></i></span> tests for a
<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a>: If <i><tt>symbol</tt></i> is
defined as a <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a>, <tt>(EXT:SYMBOL-MACRO-EXPAND
<i><tt>symbol</tt></i>)</tt> returns two values, <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> and the expansion, otherwise it returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_boundp.html"
target="_top"><tt>BOUNDP</tt></a> on a symbol defined as a <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</p>

<p>Calling <a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html"
target="_top"><tt>SYMBOL-VALUE</tt></a> on a symbol defined as a <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> returns the value of the
expansion. Calling <a
href="http://www.lisp.org/HyperSpec/Body/fun_set.html"
target="_top"><tt>SET</tt></a> on a symbol defined as a <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> calls <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> on the expansion.</p>

<p>Calling <a
href="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html"
target="_top"><tt>MAKUNBOUND</tt></a> on a symbol defined as a <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> removes the <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> definition.</p>
</div>

<div class="section"><a id="lambda" name="lambda" />
<div class="titlepage">
<div>
<h3 class="title"><a id="lambda" name="lambda" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a></h3>
</div>
</div>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html"
target="_top"><tt>LAMBDA-LIST-KEYWORDS</tt></a>.&nbsp;</b> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;ALLOW-OTHER-KEYS</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;AUX</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;BODY</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;WHOLE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;ENVIRONMENT</tt></a>)</tt></p>

<div class="table">
<p><a id="d0e2803" name="d0e2803" /><b>Table 5.1. Platform
dependent</b></p>

<table summary="Platform dependent" border="1">
<colgroup>
<col align="center" />
<col align="center" />
<col align="center" />
<col align="center" /></colgroup>

<thead>
<tr>
<th>CPU type</th>
<th>16-bit CPU</th>
<th>32-bit CPU</th>
<th>64-bit CPU</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html"
target="_top"><tt>CALL-ARGUMENTS-LIMIT</tt></a></td>
<td>2<sup>16</sup>=65536</td>
<td colspan="2" align="center">2<sup>32</sup>=4294967296</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html"
target="_top"><tt>MULTIPLE-VALUES-LIMIT</tt></a></td>
<td colspan="3" align="center">2<sup>7</sup>=128</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html"
target="_top"><tt>LAMBDA-PARAMETERS-LIMIT</tt></a></td>
<td>2<sup>16</sup>=65536</td>
<td colspan="2" align="center">2<sup>32</sup>=4294967296</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="defun" name="defun" />
<div class="titlepage">
<div>
<h3 class="title"><a id="defun" name="defun" />Macros <a
href="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
target="_top"><tt>DEFUN</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
target="_top"><tt>DEFMACRO</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
target="_top"><tt>DEFUN</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
target="_top"><tt>DEFMACRO</tt></a> are allowed in non-toplevel positions.
As an example, consider the old ([<a href="#CLtL1">CLtL1</a>]) definition
of <a href="http://www.lisp.org/HyperSpec/Body/fun_gensym.html"
target="_top"><tt>GENSYM</tt></a>:</p>

<pre class="programlisting">
(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&amp;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</pre>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="iteration" name="iteration" />Chapter 6.
Iteration [CLHS-6]</h2>
</div>
</div>

<p>No notes.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="objects" name="objects" />Chapter 7. Objects
[CLHS-7]</h2>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/sec_7-2.html"
target="_top">Changing the class of a given instance</a> is not supported.
The functions <a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html"
target="_top"><tt>CHANGE-CLASS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html"
target="_top"><tt>UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html"
target="_top"><tt>MAKE-INSTANCES-OBSOLETE</tt></a> are not
implemented.</p>

<p>Only the <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html"
target="_top"><tt>STANDARD</tt></a> method combination is implemented.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-3.html"
target="_top">User-defined method combination</a> is not supported. The
macros <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html"
target="_top"><tt>DEFINE-METHOD-COMBINATION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
target="_top"><tt>CALL-METHOD</tt></a> and the functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html"
target="_top"><tt>INVALID-METHOD-ERROR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html"
target="_top"><tt>METHOD-COMBINATION-ERROR</tt></a> are not
implemented.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="structures" name="structures" />Chapter 8.
Structures [CLHS-8]</h2>
</div>
</div>

<p>The <tt>:PRINT-FUNCTION</tt> option should contain a <a
href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
target="_top">lambda expression</a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
target="_top"><tt>LAMBDA</tt></a> (structure stream depth) (declare
(ignore depth)) ...)</tt> This <a
href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
target="_top">lambda expression</a> names a function whose task is to
output the external representation of structure onto the stream. This may
be done by outputting text onto the stream using <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
target="_top"><tt>WRITE-CHAR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html"
target="_top"><tt>WRITE-STRING</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRIN1</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINC</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PPRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> and the like. The following rules must
be obeyed:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e3001" name="d0e3001" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
target="_top"><tt>*PRINT-ESCAPE*</tt></a> must be respected.</li>

<li><a id="d0e3008" name="d0e3008" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
target="_top"><tt>*PRINT-PRETTY*</tt></a> should not and cannot be
respected, since the pretty-print mechanism is not accessible from
outside.</li>

<li><a id="d0e3015" name="d0e3015" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html"
target="_top"><tt>*PRINT-CIRCLE*</tt></a> need not be respected. This is
managed by the system. (But the print-circle mechanism handles only those
objects that are (direct or indirect) components of structure.)</li>

<li><a id="d0e3022" name="d0e3022" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
target="_top"><tt>*PRINT-LEVEL*</tt></a> is respected by <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRIN1</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINC</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PPRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instructions <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html"
target="_top"><tt>~A</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html"
target="_top"><tt>~S</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html"
target="_top"><tt>~W</tt></a>, and <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instructions <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
target="_top"><tt>~R</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html"
target="_top"><tt>~D</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html"
target="_top"><tt>~B</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html"
target="_top"><tt>~O</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html"
target="_top"><tt>~X</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
target="_top"><tt>~F</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
target="_top"><tt>~E</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
target="_top"><tt>~G</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
target="_top"><tt>~$</tt></a> with not-numerical arguments. Therefore the
print-level mechanism works automatically if only these functions are used
for outputting objects and if they are not called on objects with nesting
level &gt; 1. (The print-level mechanism does not recognize how many
parentheses you have output. It only counts how many times it was called
recursively.)</li>

<li><a id="d0e3105" name="d0e3105" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
target="_top"><tt>*PRINT-LENGTH*</tt></a> must be respected, especially if
you are outputting an arbitrary number of components.</li>

<li><a id="d0e3112" name="d0e3112" />The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> must be respected. Remember
that the values of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
target="_top"><tt>*PRINT-ESCAPE*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
target="_top"><tt>*PRINT-LEVEL*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
target="_top"><tt>*PRINT-LENGTH*</tt></a> are ignored if <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true. The value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is respected by <a
href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html"
target="_top"><tt>PRINT-UNREADABLE-OBJECT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRIN1</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINC</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PPRINT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instructions <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html"
target="_top"><tt>~A</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html"
target="_top"><tt>~S</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html"
target="_top"><tt>~W</tt></a>, and <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instructions <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
target="_top"><tt>~R</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html"
target="_top"><tt>~D</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html"
target="_top"><tt>~B</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html"
target="_top"><tt>~O</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html"
target="_top"><tt>~X</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
target="_top"><tt>~F</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
target="_top"><tt>~E</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
target="_top"><tt>~G</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
target="_top"><tt>~$</tt></a> with not-numerical arguments. Therefore <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> will be respected
automatically if only these functions are used for printing objects.</li>

<li><a id="d0e3223" name="d0e3223" />You need not worry about the values
of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
target="_top"><tt>*PRINT-BASE*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
target="_top"><tt>*PRINT-RADIX*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html"
target="_top"><tt>*PRINT-CASE*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-gensymst.html"
target="_top"><tt>*PRINT-GENSYM*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
target="_top"><tt>*PRINT-ARRAY*</tt></a>, <a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a>, <a
href="#pr-rpars"><tt>CUSTOM:*PRINT-RPARS*</tt></a>, <a
href="#pr-indent"><tt>CUSTOM:*PRINT-INDENT-LISTS*</tt></a>.</li>
</ul>
</div>

<p>The <tt>:INHERIT</tt> option is exactly like <tt>:INCLUDE</tt> except
that it does not create new accessors for the inherited slots.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="conditions" name="conditions" />Chapter 9.
Conditions [CLHS-9]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#cond-nl">Embedded Newlines in Condition Reports
[CLHS-9.1.3.1.3]</a></dt>

<dt><a href="#cond-dict">The Conditions Dictionary [CLHS-9.2.]</a></dt>
</dl>
</div>

<p>When an error occurred, you are in a break loop. You can evaluate forms
as usual. The <b>help</b> command (or help key if there is one) lists the
available <a href="#debugger" title="Debugging Utilities
 [CLHS-25.1.2]">debugging commands</a>.</p>

<p><b><tt>EXT:MUFFLE-CERRORS</tt>.&nbsp;</b> The macro
<tt>(</tt>EXT:MUFFLE-CERRORS {<i><tt>form</tt></i>}*) executes the
<i><tt>form</tt></i>s. When a continuable error occurs, no message is
printed. Instead, the <a
href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html"
target="_top"><tt>CONTINUE</tt></a> restart is invoked.</p>

<p><b><tt>EXT:APPEASE-CERRORS</tt>.&nbsp;</b> The macro
<tt>(</tt>EXT:APPEASE-CERRORS {<i><tt>form</tt></i>}*) executes the
<i><tt>form</tt></i>s. When a continuable error occurs, the error is
printed as a warning and the <a
href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html"
target="_top"><tt>CONTINUE</tt></a> restart is invoked.</p>

<p><b><tt>EXT:EXIT-ON-ERROR</tt>.&nbsp;</b> The macro
<tt>(</tt>EXT:EXIT-ON-ERROR {<i><tt>form</tt></i>}*) executes the
<i><tt>form</tt></i>s. When a non-continuable error or a Control-C
interrupt occurs, the error is printed and <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> terminates with an error status.</p>

<p><b><tt>EXT:WITH-RESTARTS</tt>.&nbsp;</b> The macro
<tt>EXT:WITH-RESTARTS</tt> is like <a
href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a>, except that the forms are
specified after the restart clauses instead of before them, and the
restarts created are not implicitly associated to any condition.
<tt>(</tt>EXT:WITH-RESTARTS ({<tt>restart-clause</tt>}*)
{<i><tt>form</tt></i>}*) is therefore equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
target="_top"><tt>PROGN</tt></a> {<i><tt>form</tt></i>}*)
{<tt>restart-clause</tt>}*)</tt>.</p>

<div class="section"><a id="cond-nl" name="cond-nl" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="cond-nl"
name="cond-nl" />Embedded Newlines in Condition Reports <a
href="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html"
target="_top">[CLHS-9.1.3.1.3]</a></h2>
</div>
</div>

<p>The error message prefix for the first line is "*** - ". There is no
prefix for subsequent error lines. The aesthetics of condition reports
containing an object, which requires newlines when pretty printing is
enabled, is undefined.</p>
</div>

<div class="section"><a id="cond-dict" name="cond-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="cond-dict"
name="cond-dict" />The Conditions Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html"
target="_top">[CLHS-9.2.]</a></h2>
</div>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a>.&nbsp;</b> In <a
href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a> clauses the argument list can also
be specified after the keyword/value pairs instead of before them. The
syntax therefore is</p>

<div class="variablelist">
<p><b><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a> <i><tt>form</tt></i>
{<tt>restart-clause</tt>}*)</tt></b></p>

<dl>
<dt><a id="d0e3430" name="d0e3430" /><span
class="term"><tt>restart-clause</tt> ::==</span></dt>

<dd>
<pre class="programlisting">
   (<tt>restart-name</tt> <i><tt>arglist</tt></i>
    {<tt>keyword-value</tt>}* {<i><tt>form</tt></i>}*) |
   (<tt>restart-name</tt> {<tt>keyword-value</tt>}*
    <i><tt>arglist</tt></i> {<i><tt>form</tt></i>}*)
</pre>
</dd>
</dl>
</div>


<br />
<br />
<p><b><a
href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html"
target="_top"><tt>COMPUTE-RESTARTS</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html"
target="_top"><tt>COMPUTE-RESTARTS</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_find-restart.html"
target="_top"><tt>FIND-RESTART</tt></a> behave as specified in [<a
href="#ansi-cl">ANSI CL standard</a>]: If the optional condition argument
is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, only restarts associated with that
condition and restarts associated to no condition at all are considered.
Therefore the effect of associating a restart to a condition is not to
activate it, but to hide it from other conditions. This makes the syntax
dependent implicit association performed by <a
href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
target="_top"><tt>RESTART-CASE</tt></a> nearly obsolete.</p>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="symbols" name="symbols" />Chapter 10. Symbols
[CLHS-10]</h2>
</div>
</div>

<p>No notes.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="packages" name="packages" />Chapter 11. Packages
[CLHS-11]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#clupack">The COMMON-LISP-USER Package
[CLHS-11.1.2.2]</a></dt>

<dt><a href="#imppack">Implementation-Defined Packages
[CLHS-11.1.2.4]</a></dt>

<dt><a href="#pack-dict">The Packages Dictionary [CLHS-11.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-pack">Function <tt>MAKE-PACKAGE</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="variablelist">
<p><b>The [<a href="#ansi-cl">ANSI CL standard</a>] packages present in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a></b></p>

<dl>
<dt><a id="d0e3511" name="d0e3511" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a></span></dt>

<dd>with the nicknames <span class="strong"><i><tt>"CL"</tt></i></span>
and <span class="strong"><i><tt>"LISP"</tt></i></span></dd>

<dt><a id="d0e3527" name="d0e3527" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">&ldquo;COMMON-LISP-USER&rdquo;</a></span></dt>

<dd>with the nicknames <span
class="strong"><i><tt>"CL-USER"</tt></i></span> and <span
class="strong"><i><tt>"USER"</tt></i></span></dd>

<dt><a id="d0e3543" name="d0e3543" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html"
target="_top">&ldquo;KEYWORD&rdquo;</a></span></dt>

<dd>with the nickname <span class="strong"><i><tt>""</tt></i></span></dd>
</dl>
</div>

<p>The package <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a>s only those symbols from the [<a
href="#ansi-cl">ANSI CL standard</a>] that are actually implemented.</p>

<div class="section"><a id="clupack" name="clupack" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="clupack" name="clupack" />The
COMMON-LISP-USER Package <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">[CLHS-11.1.2.2]</a></h2>
</div>
</div>

<p>The <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">&ldquo;COMMON-LISP-USER&rdquo;</a> package uses the <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a> and <a
href="#ext-pac">&ldquo;EXT&rdquo;</a> packages.</p>
</div>

<div class="section"><a id="imppack" name="imppack" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="imppack"
name="imppack" />Implementation-Defined Packages <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html"
target="_top">[CLHS-11.1.2.4]</a></h2>
</div>
</div>

<p>The following additional packages exist:</p>

<div class="variablelist">
<p><b>Implementation-Defined Packages</b></p>

<dl>
<dt><a id="d0e3598" name="d0e3598" /><span class="term"><a href="#classes"
title="Classes
 [CLHS-4.3]">&ldquo;CLOS&rdquo;</a></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a>s all <b>CLOS</b> specific symbols,
including some <a href="#clos-diff"
title="Deviations from [ANSI CL standard]">additional symbols</a>.</dd>

<dt><a id="d0e3615" name="d0e3615" /><span
class="term">&ldquo;SYSTEM&rdquo;</span></dt>

<dd>has the nicknames <span class="strong"><i>&ldquo;SYS&rdquo;</i></span>
and <span class="strong"><i>&ldquo;COMPILER&rdquo;</i></span>, and has no
<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a>ed symbols. It defines many system
internals.</dd>

<dt><a id="ext-pac" name="ext-pac" /><span
class="term">&ldquo;EXT&rdquo;</span></dt>

<dd>is the umbrella package for all extensions: it imports and <a
href="#re-export"
title="Function EXT:RE-EXPORT"><tt>EXT:RE-EXPORT</tt></a>s all the
external symbols in all <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extensions, so a simple <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
target="_top"><tt>USE-PACKAGE</tt></a> "EXT")</tt> is enough to make all
the extensions available in the current package. This package uses
packages (in addition to <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a>): <a href="#dir-key"
title="Extensions-2.11. Directory Access">&ldquo;LDAP&rdquo;</a> <a
href="#syscalls"
title="Extensions-2.7. System Calls">&ldquo;POSIX&rdquo;</a> <a
href="#socket"
title="Extensions-2.6. Socket Streams">&ldquo;SOCKET&rdquo;</a> <a
href="#gstream" title="Generic streams">&ldquo;GSTREAM&rdquo;</a> <a
href="#gray" title="Gray streams">&ldquo;GRAY&rdquo;</a> <a href="#i18n"
title="Extensions-1.3. Internationalization">&ldquo;I18N&rdquo;</a> <a
href="#customize"
title="Extensions-1.11. Customizing CLISP behavior.">&ldquo;CUSTOM&rdquo;</a>.</dd>

<dt><a id="d0e3688" name="d0e3688" /><span class="term"><a
href="#encoding"
title="Extensions-1.4. Encodings">&ldquo;CHARSET&rdquo;</a></span></dt>

<dd>defines and <a
href="http://www.lisp.org/HyperSpec/Body/fun_export.html"
target="_top"><tt>EXPORT</tt></a>s some character sets, for use with <a
href="#make-encoding"
title="Function EXT:MAKE-ENCODING"><tt>EXT:MAKE-ENCODING</tt></a> and as
<a href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> argument.</dd>

<dt><a id="d0e3708" name="d0e3708" /><span class="term"><a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a></span></dt>

<dd>implements the <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">foreign
function interface</a>. Some platforms only.</dd>

<dt><a id="d0e3719" name="d0e3719" /><span class="term"><a href="#screen"
title="Extensions-2.1. Random Screen Access">&ldquo;SCREEN&rdquo;</a></span></dt>

<dd>defines an API for <a href="#screen"
title="Extensions-2.1. Random Screen Access">random screen access</a>.
Some platforms only.</dd>
</dl>
</div>

<p>All pre-existing packages except <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">&ldquo;COMMON-LISP-USER&rdquo;</a> belong to the
implementation, in the sense that doing side-effects on them or on their
symbols causes undefined behavior.</p>
</div>

<div class="section"><a id="pack-dict" name="pack-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="pack-dict"
name="pack-dict" />The Packages Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html"
target="_top">[CLHS-11.2.]</a></h2>
</div>
</div>

<div class="section"><a id="make-pack" name="make-pack" />
<div class="titlepage">
<div>
<h3 class="title"><a id="make-pack" name="make-pack" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
target="_top"><tt>MAKE-PACKAGE</tt></a></h3>
</div>
</div>

<p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
target="_top"><tt>MAKE-PACKAGE</tt></a>, the default value of the
<tt>:USE</tt> argument is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
target="_top">&ldquo;COMMON-LISP&rdquo;</a>)</tt>.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
target="_top"><tt>MAKE-PACKAGE</tt></a> accepts a keyword argument
<tt>:CASE-SENSITIVE</tt>. Similarly, <a
href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> accepts an option
<tt>:CASE-SENSITIVE</tt>. When its value is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the package will be case sensitive, i.e.,
the reader will not case-convert symbol names before looking them up or
creating them in this package. The package names are still subject to
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
target="_top"><tt>READTABLE-CASE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/var_streadtablest.html"
target="_top"><tt>*READTABLE*</tt></a>)</tt>, though.</p>

<div class="section"><a id="re-export" name="re-export" />
<div class="titlepage">
<div>
<h4 class="title"><a id="re-export" name="re-export" />Function <a
href="#re-export"
title="Function EXT:RE-EXPORT"><tt>EXT:RE-EXPORT</tt></a></h4>
</div>
</div>

<p>The function <tt>(<a href="#re-export"
title="Function EXT:RE-EXPORT"><tt>EXT:RE-EXPORT</tt></a>
<i><tt>FROM-PACK</tt></i> <i><tt>TO-PACK</tt></i>)</tt> re-exports all
external symbols from <i><tt>FROM-PACK</tt></i> also from
<i><tt>TO-PACK</tt></i>, provided it already uses
<i><tt>FROM-PACK</tt></i>; and signals an error otherwise.</p>
</div>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="numbers" name="numbers" />Chapter 12. Numbers
[CLHS-12]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#num-types">Numeric Types</a></dt>

<dt><a href="#num-concepts">Number Concepts [CLHS-12.1]</a></dt>

<dd>
<dl>
<dt><a href="#byte-type">Byte Operations on Integers
[CLHS-12.1.1.3.2]</a></dt>

<dt><a href="#float-subst">Rule of Float Substitutability
[CLHS-12.1.3.3]</a></dt>

<dt><a href="#float-comp">Floating-point Computations
[CLHS-12.1.4]</a></dt>

<dt><a href="#complex-comp">Complex Computations [CLHS-12.1.5]</a></dt>

<dt><a href="#complex-rational">Rule of Canonical Representation for
Complex Rationals [CLHS-12.1.5.3]</a></dt>
</dl>
</dd>

<dt><a href="#num-dict">The Numbers Dictionary [CLHS-12.2]</a></dt>

<dd>
<dl>
<dt><a href="#int-func-ext">Additional Integer Functions</a></dt>

<dt><a href="#float-notes">Floating Point</a></dt>

<dt><a href="#float-decode">Float Decoding [CLHS]</a></dt>

<dt><a href="#bool-ops">Boolean Operations [CLHS]</a></dt>

<dt><a href="#fixnum-lim">Fixnum Limits [CLHS]</a></dt>

<dt><a href="#float-lim">Float Limits [CLHS]</a></dt>

<dt><a href="#float-invalid-op">Condition
<tt>FLOATING-POINT-INVALID-OPERATION</tt></a></dt>

<dt><a href="#float-inexact">Condition
<tt>FLOATING-POINT-INEXACT</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="num-types" name="num-types" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="num-types"
name="num-types" />Numeric Types</h2>
</div>
</div>

<p>The type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
target="_top"><tt>NUMBER</tt></a> is the disjoint union of the types <a
href="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
target="_top"><tt>REAL</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/glo_e.html#exhaustive_partition"
target="_top">&ldquo;exhaustive partition&rdquo;</a>)</p>

<p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
target="_top"><tt>REAL</tt></a> is the disjoint union of the types <a
href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
target="_top"><tt>RATIONAL</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
target="_top"><tt>FLOAT</tt></a>.</p>

<p>The type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
target="_top"><tt>RATIONAL</tt></a> is the disjoint union of the types <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
target="_top"><tt>RATIO</tt></a>.</p>

<p>The type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> is the disjoint union of the types <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html"
target="_top"><tt>BIGNUM</tt></a>.</p>

<p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
target="_top"><tt>FLOAT</tt></a> is the disjoint union of the types <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a>.</p>
</div>

<div class="section"><a id="num-concepts" name="num-concepts" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="num-concepts"
name="num-concepts" />Number Concepts <a
href="http://www.lisp.org/HyperSpec/Body/sec_12-1.html"
target="_top">[CLHS-12.1]</a></h2>
</div>
</div>

<div class="section"><a id="byte-type" name="byte-type" />
<div class="titlepage">
<div>
<h3 class="title"><a id="byte-type" name="byte-type" />Byte Operations on
Integers <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html"
target="_top">[CLHS-12.1.1.3.2]</a></h3>
</div>
</div>

<p>Byte specifiers are objects of built-in type <a href="#byte-type"
title="Byte Operations on Integers
 [CLHS-12.1.1.3.2]">BYTE</a>, not <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>s.</p>
</div>

<div class="section"><a id="float-subst" name="float-subst" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-subst" name="float-subst" />Rule of Float
Substitutability <a
href="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html"
target="_top">[CLHS-12.1.3.3]</a></h3>
</div>
</div>

<p>When a mathematical function may return an exact (rational) or inexact
(floating-point) result, it always returns the exact result.</p>
</div>

<div class="section"><a id="float-comp" name="float-comp" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-comp" name="float-comp" />Floating-point
Computations <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html"
target="_top">[CLHS-12.1.4]</a></h3>
</div>
</div>

<p>There are four floating point types: <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a>:</p>

<div class="table">
<p><a id="d0e3963" name="d0e3963" /><b>Table 12.1. floating point
types</b></p>

<table summary="floating point types" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>type</th>
<th>sign</th>
<th>mantissa</th>
<th>exponent</th>
<th>comment</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a></td>
<td>1 bit</td>
<td>16+1 bits</td>
<td>8 bits</td>
<td>immediate</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a></td>
<td>1 bit</td>
<td>23+1 bits</td>
<td>8 bits</td>
<td>IEEE format</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a></td>
<td>1 bit</td>
<td>52+1 bits</td>
<td>11 bits</td>
<td>IEEE format</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a></td>
<td>1 bit</td>
<td>&gt;=64 bits</td>
<td>32 bits</td>
<td>variable length</td>
</tr>
</tbody>
</table>
</div>

<p>The single and double float formats are those of the IEEE standard
(1981), except that <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> does not support features like <tt>+0</tt>,
<tt>-0</tt>, <tt>+inf</tt>, <tt>-inf</tt>, gradual underflow,
<tt>NaN</tt>, etc. (<a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> does not make use of these features.) This is why <a
href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
target="_top"><tt>*FEATURES*</tt></a> does not contain the
<tt>:IEEE-FLOATING-POINT</tt> keyword.</p>

<p><a id="lfd" name="lfd" />Long floats have variable mantissa length,
which is a multiple of 16 (or 32, depending on the word size of the
processor). The default length used when long floats are read is given by
the place <tt>(<a href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>. It
can be set by <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>) <i><tt>n</tt></i>)</tt>,
where <i><tt>n</tt></i> is a positive integer. E.g., <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<a
href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>) 3322)</tt> sets the
default precision of long floats to 1000 decimal digits.</p>

<div class="section"><a id="flocont" name="flocont" />
<div class="titlepage">
<div>
<h4 class="title"><a id="flocont" name="flocont" />Rule of Float Precision
Contagion <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
target="_top">[CLHS-12.1.4.4]</a></h4>
</div>
</div>

<p>The floating point contagion is controlled by the variable <a
href="#flocont" title="Rule of Float Precision Contagion
 [CLHS-12.1.4.4]"><tt>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a>.
When it is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, contagion is done as per the [<a
href="#ansi-cl">ANSI CL standard</a>]: <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a>.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e4137" name="d0e4137" /><span
class="term">Rationale:</span></dt>

<dd>See it pragmatically: save what you can and let others worry about the
rest.</dd>

<dt><a id="d0e4143" name="d0e4143" /><span class="term">Brief:</span></dt>

<dd><a href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a>
knows the number's precision, not accuracy, so preserving the precision
can be accomplished reliably, while anything relating to the accuracy is
just a speculation - only the user (programmer) knows what it is in each
case.</dd>

<dt><a id="d0e4152" name="d0e4152" /><span
class="term">Detailed:</span></dt>

<dd>A float is an approximation of a real number. One can think of it as a
random variable with the mean equal to itself and standard deviation equal
to half the last significant digit. E.g., <tt>1.5</tt> is actually
<tt>1.5+-0.05</tt>. Consider adding <tt>1.5</tt> and <tt>1.75</tt>. [<a
href="#ansi-cl">ANSI CL standard</a>] requires that <tt>(+ 1.5 1.75)</tt>
return <tt>3.25</tt>, while traditional <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> would return <tt>3.3</tt>. The implied
random variables are: <tt>3.25+-0.005</tt> and <tt>3.3+-0.05</tt>. Note
that the traditional <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> way <span class="strong"><i>does</i></span>
lie about the mean: the mean <span class="strong"><i>is</i></span>
<tt>3.25</tt> and nothing else, while the standard way <span
class="strong"><i>could</i></span> be lying about the deviation
(accuracy): if the implied accuracy of <tt>1.5 (0.05)</tt> is its actual
accuracy, then the accuracy of the result cannot be smaller that that.
Therefore, since <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> has no way of knowing the actual accuracy, [<a
href="#ansi-cl">ANSI CL standard</a>] (and all the other standard
engineering programming languages, like <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, FORTRAN etc) decides that keeping the accuracy
correct is the business of the programmer, while the language should
preserve what it can - the precision.</dd>

<dt><a id="d0e4224" name="d0e4224" /><span
class="term">Experience:</span></dt>

<dd>Rounding errors accumulate, and if a computation is conducted with
insufficient precision, an outright incorrect result can be returned.
(E.g., <tt>E(x<sup>2</sup>) - E(x)<sup>2</sup></tt> can be negative!) The
user should not mix floats of different precision (that's what <a
href="#warn-fpc"><tt>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is
for), but one should not be penalized for this too harshly.</dd>
</dl>
</div>

<p>When <a href="#flocont" title="Rule of Float Precision Contagion
 [CLHS-12.1.4.4]"><tt>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> is
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the traditional <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> method is
used, namely the result of an arithmetic operation whose arguments are of
different float types is rounded to the float format of the shortest
(least precise) of the arguments: <a
href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
target="_top"><tt>RATIONAL</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a> &rarr; <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SHORT-FLOAT</tt></a> (in contrast to <a
href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
target="_top">12.1.4.4 Rule of Float Precision Contagion</a>!)</p>

<div class="variablelist">
<dl>
<dt><a id="d0e4280" name="d0e4280" /><span
class="term">Rationale:</span></dt>

<dd>See it mathematically. Add intervals: <tt>{1.0 &plusmn; 1e-8} + {1.0
&plusmn; 1e-16} = {2.0 &plusmn; 1e-8}</tt>. So, if we add <tt>1.0s0</tt>
and <tt>1.0d0</tt>, we should get <tt>2.0s0</tt>.</dd>

<dt><a id="d0e4298" name="d0e4298" /><span class="term">Brief:</span></dt>

<dd>Do not suggest accuracy of a result by giving it a precision that is
greater than its accuracy.</dd>

<dt><a id="d0e4304" name="d0e4304" /><span
class="term">Example:</span></dt>

<dd><tt>(- (+ 1.7 <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a>) <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a>)</tt> should not return
<tt>1.700000726342836417234L0</tt>, it should return <tt>1.7f0</tt> (or
<tt>1.700001f0</tt> if there were rounding errors).</dd>

<dt><a id="d0e4329" name="d0e4329" /><span
class="term">Experience:</span></dt>

<dd>If in a computation using thousands of short floats, a long float
(like <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a>) happens to be used, the long precision
should not propagate throughout all the intermediate values. Otherwise,
the long result would look precise, but its accuracy is only that of a
short float; furthermore much computation time would be lost by
calculating with long floats when only short floats would be needed.</dd>
</dl>
</div>

<p><a id="warn-fpc" name="warn-fpc" /><b><a
href="#warn-fpc"><tt>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a>.&nbsp;</b>
If the variable <a
href="#warn-fpc"><tt>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</tt></a> is
non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, a warning is emitted for every coercion
involving different floating-point types.</p>
</div>
</div>

<div class="section"><a id="complex-comp" name="complex-comp" />
<div class="titlepage">
<div>
<h3 class="title"><a id="complex-comp" name="complex-comp" />Complex
Computations <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html"
target="_top">[CLHS-12.1.5]</a></h3>
</div>
</div>

<p>Complex numbers can have a real part and an imaginary part of different
types. For example, <tt>(sqrt -9.0)</tt> evaluates to the number <tt>#C(0
3.0)</tt>, which has a real part of exactly <tt>0</tt>, not only
<tt>0.0</tt> (which would mean "approximately 0").</p>

<p>The type specifier for this is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a>)</tt>, and <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <tt>type-of-real-part</tt>
<tt>type-of-imaginary-part</tt>)</tt> in general.</p>

<p>The type specifier <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <i><tt>type</tt></i>)</tt> is
equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> <i><tt>type</tt></i>
<i><tt>type</tt></i>)</tt>.</p>
</div>

<div class="section"><a id="complex-rational" name="complex-rational" />
<div class="titlepage">
<div>
<h3 class="title"><a id="complex-rational" name="complex-rational" />Rule
of Canonical Representation for Complex Rationals <a
href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html"
target="_top">[CLHS-12.1.5.3]</a></h3>
</div>
</div>

<p>Complex numbers can have a real part and an imaginary part of different
types. If the imaginary part is <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a> to <tt>0</tt>, the number is automatically
converted to a real number.</p>

<p>This has the advantage that <tt>(let ((x (sqrt -9.0))) (* x x))</tt> -
instead of evaluating to <tt>#C(-9.0 0.0)</tt>, with <i><tt>x</tt></i> =
<tt>#C(0.0 3.0)</tt> - evaluates to <tt>#C(-9.0 0)</tt> = <tt>-9.0</tt>,
with <i><tt>x</tt></i> = <tt>#C(0 3.0)</tt>.</p>
</div>
</div>

<div class="section"><a id="num-dict" name="num-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="num-dict"
name="num-dict" />The Numbers Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html"
target="_top">[CLHS-12.2]</a></h2>
</div>
</div>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html"
target="_top"><tt>UPGRADED-COMPLEX-PART-TYPE</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html"
target="_top"><tt>UPGRADED-COMPLEX-PART-TYPE</tt></a> always returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, since a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> number in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> can always
have <a
href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html"
target="_top"><tt>REALPART</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html"
target="_top"><tt>IMAGPART</tt></a> of any type.</p>

<p><a id="default-float-format" name="default-float-format" /><b><a
href="#default-float-format"><tt>CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>.&nbsp;</b>
When rational numbers are to be converted to floats (due to <a
href="http://www.lisp.org/HyperSpec/Body/fun_float.html"
target="_top"><tt>FLOAT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html"
target="_top"><tt>SQRT</tt></a> or a transcendental function), the result
type is given by the variable <a
href="#default-float-format"><tt>CUSTOM:*DEFAULT-FLOAT-FORMAT*</tt></a>.</p>

<p><a id="no-underflow" name="no-underflow" /><b><a
href="#no-underflow"><tt>EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a>.&nbsp;</b>
The macro <tt>(<a
href="#no-underflow"><tt>EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</tt></a>
{<i><tt>form</tt></i>}*)</tt> executes the <i><tt>form</tt></i>s, with
errors of type <a
href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html"
target="_top"><tt>FLOATING-POINT-UNDERFLOW</tt></a> inhibited. Floating
point operations will silently return zero instead of signalling an error
of type <a
href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html"
target="_top"><tt>FLOATING-POINT-UNDERFLOW</tt></a>.</p>

<div class="section"><a id="int-func-ext" name="int-func-ext" />
<div class="titlepage">
<div>
<h3 class="title"><a id="int-func-ext" name="int-func-ext" />Additional
Integer Functions</h3>
</div>
</div>

<p><b><tt>ext:!</tt>&nbsp;</b> <tt>(</tt>ext:! <i><tt>n</tt></i>) returns
the factorial of <i><tt>n</tt></i>, <i><tt>n</tt></i> being a nonnegative
<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>.</p>

<p><b><tt>ext:exquo</tt>.&nbsp;</b> <tt>(</tt>ext:exquo <i><tt>x</tt></i>
<i><tt>y</tt></i>) returns the integer quotient <tt>x/y</tt> of two
integers <i><tt>x</tt></i>,<i><tt>y</tt></i>, and signals an error when
the quotient is not integer. (This is more efficient than <a
href="http://www.lisp.org/HyperSpec/Body/fun_sl.html"
target="_top"><tt>/</tt></a>.)</p>

<p><b><tt>ext:xgcd</tt>.&nbsp;</b> <tt>(</tt>ext:xgcd
<i><tt>x<sub>1</sub></tt></i> ... <i><tt>x<sub>n</sub></tt></i>) returns
the values <i><tt>l</tt></i>, <i><tt>k<sub>1</sub></tt></i>, ...,
<i><tt>k<sub>n</sub></tt></i>, where <i><tt>l</tt></i> is the greatest
common divisor of the integers <i><tt>x<sub>1</sub></tt></i>, ...,
<i><tt>x<sub>n</sub></tt></i>, and <i><tt>k<sub>1</sub></tt></i>, ...,
<i><tt>k<sub>n</sub></tt></i> are the integer coefficients such that</p>

<pre class="programlisting">
 <i><tt>l</tt></i> = (<a
href="http://www.lisp.org/HyperSpec/Body/fun_gcd.html"
target="_top"><tt>GCD</tt></a> <i><tt>x<sub>1</sub></tt></i> ... <i><tt>x<sub>n</sub></tt></i>)
   = (+ (* <i><tt>k<sub>1</sub></tt></i> <i><tt>x<sub>1</sub></tt></i>) ... (* <i><tt>k<sub>n</sub></tt></i> <i><tt>x<sub>n</sub></tt></i>))
</pre>


<br />
<br />
</div>

<div class="section"><a id="float-notes" name="float-notes" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-notes" name="float-notes" />Floating
Point</h3>
</div>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html"
target="_top"><tt>EXPT</tt></a>.&nbsp;</b> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html"
target="_top"><tt>EXPT</tt></a> <i><tt>base</tt></i>
<i><tt>exponent</tt></i>)</tt> is not very precise if
<i><tt>exponent</tt></i> has a large absolute value.</p>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_log.html"
target="_top"><tt>LOG</tt></a>.&nbsp;</b> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_log.html"
target="_top"><tt>LOG</tt></a> <i><tt>number</tt></i>
<i><tt>base</tt></i>)</tt> signals an error if <tt><i><tt>base</tt></i> =
1</tt>.</p>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a>.&nbsp;</b> The value of <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a> is a <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>LONG-FLOAT</tt></a> with the precision given by <tt>(<a
href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>)</tt>. When this precision
is changed, the value of <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a> is automatically recomputed. Therefore <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a> is a variable, not a constant.</p>
</div>

<div class="section"><a id="float-decode" name="float-decode" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-decode" name="float-decode" />Float
Decoding <a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
target="_top">[CLHS]</a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
target="_top"><tt>FLOAT-RADIX</tt></a> always returns <tt>2</tt>.</p>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
target="_top"><tt>FLOAT-DIGITS</tt></a> <i><tt>number</tt></i>
<i><tt>digits</tt></i>)</tt> coerces <i><tt>number</tt></i> (a real
number) to a floating point number with at least <i><tt>digits</tt></i>
mantissa digits. The following holds:</p>

<pre class="programlisting">
 (&gt;= (<a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
target="_top"><tt>FLOAT-DIGITS</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
target="_top"><tt>FLOAT-DIGITS</tt></a> <i><tt>number</tt></i> <i><tt>digits</tt></i>)) <i><tt>digits</tt></i>)
</pre>


<br />
<br />
</div>

<div class="section"><a id="bool-ops" name="bool-ops" />
<div class="titlepage">
<div>
<h3 class="title"><a id="bool-ops" name="bool-ops" />Boolean Operations <a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top">[CLHS]</a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e4843" name="d0e4843" /><b>Table 12.2. Boolean
Operations</b></p>

<table summary="Boolean Operations" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>constant</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-CLR</tt></a></td>
<td>0</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-SET</tt></a></td>
<td>15</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-1</tt></a></td>
<td>10</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-2</tt></a></td>
<td>12</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-C1</tt></a></td>
<td>5</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-C2</tt></a></td>
<td>3</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-AND</tt></a></td>
<td>8</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-IOR</tt></a></td>
<td>14</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-XOR</tt></a></td>
<td>6</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-EQV</tt></a></td>
<td>9</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-NAND</tt></a></td>
<td>7</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-NOR</tt></a></td>
<td>1</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-ANDC1</tt></a></td>
<td>4</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-ANDC2</tt></a></td>
<td>2</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-ORC1</tt></a></td>
<td>13</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
target="_top"><tt>BOOLE-ORC2</tt></a></td>
<td>11</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="fixnum-lim" name="fixnum-lim" />
<div class="titlepage">
<div>
<h3 class="title"><a id="fixnum-lim" name="fixnum-lim" />Fixnum Limits <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
target="_top">[CLHS]</a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e4971" name="d0e4971" /><b>Table 12.3. Platform
dependent</b></p>

<table summary="Platform dependent" border="1">
<colgroup>
<col align="center" />
<col align="center" />
<col align="center" />
<col align="center" /></colgroup>

<thead>
<tr>
<th>CPU type</th>
<th>16-bit CPU</th>
<th>32-bit CPU</th>
<th>64-bit CPU</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
target="_top"><tt>MOST-POSITIVE-FIXNUM</tt></a></td>
<td colspan="2" align="center">2<sup>24</sup>-1 = 16777215</td>
<td>2<sup>32</sup>-1 = 4294967295</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
target="_top"><tt>MOST-NEGATIVE-FIXNUM</tt></a></td>
<td colspan="2" align="center">-2<sup>24</sup> = -16777216</td>
<td>-2<sup>32</sup> = -4294967296</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="float-lim" name="float-lim" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-lim" name="float-lim" />Float Limits <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top">[CLHS]</a></h3>
</div>
</div>

<p>Together with <a
href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a>, the other long float constants <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>LEAST-NEGATIVE-LONG-FLOAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>LEAST-POSITIVE-LONG-FLOAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>LEAST-POSITIVE-NORMALIZED-LONG-FLOAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html"
target="_top"><tt>LONG-FLOAT-EPSILON</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html"
target="_top"><tt>LONG-FLOAT-NEGATIVE-EPSILON</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>MOST-NEGATIVE-LONG-FLOAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
target="_top"><tt>MOST-POSITIVE-LONG-FLOAT</tt></a> are recomputed
whenever <tt>(<a href="#lfd"><tt>EXT:LONG-FLOAT-DIGITS</tt></a>)</tt> is
<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>ed. They are variables, not constants.</p>
</div>

<div class="section"><a id="float-invalid-op" name="float-invalid-op" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-invalid-op"
name="float-invalid-op" />Condition <a
href="http://www.lisp.org/HyperSpec/Body/contyp_floati_id-operation.html"
target="_top"><tt>FLOATING-POINT-INVALID-OPERATION</tt></a></h3>
</div>
</div>

<p>This condition is never signaled by <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>.</p>
</div>

<div class="section"><a id="float-inexact" name="float-inexact" />
<div class="titlepage">
<div>
<h3 class="title"><a id="float-inexact" name="float-inexact" />Condition
<a
href="http://www.lisp.org/HyperSpec/Body/contyp_floati_oint-inexact.html"
target="_top"><tt>FLOATING-POINT-INEXACT</tt></a></h3>
</div>
</div>

<p>This condition is never signaled by <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="characters" name="characters" />Chapter 13.
Characters [CLHS-13]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#input-char">Attributes</a></dt>

<dt><a href="#char-script">Character Scripts [CLHS-13.1.2.1]</a></dt>

<dt><a href="#char-attrib">Character Attributes [CLHS-13.1.3]</a></dt>

<dt><a href="#graph-char">Graphic Characters [CLHS-13.1.4.1]</a></dt>

<dt><a href="#alpha-char">Alphabetic Characters [CLHS-13.1.4.2]</a></dt>

<dt><a href="#char-ext">Case of Implementation-Defined Characters
[CLHS-13.1.4.3.4]</a></dt>

<dt><a href="#num-char">Numeric Characters [CLHS-13.1.4.4]</a></dt>

<dt><a href="#char-ord">Ordering of Characters [CLHS-13.1.6]</a></dt>

<dt><a href="#clhs-newline">Treatment of Newline during Input and Output
[CLHS-13.1.8]</a></dt>

<dt><a href="#char-int">Character Encodings [CLHS-13.1.9]</a></dt>

<dt><a href="#script-ext">Documentation of Implementation-Defined Scripts
[CLHS-13.1.10]</a></dt>

<dt><a href="#char-dict">The Characters Dictionary [CLHS-13.2]</a></dt>

<dt><a href="#char-width">Functions on characters</a></dt>

<dt><a href="#char-platform-dep">platform-dependent characters</a></dt>

<dt><a href="#char-bits">Obsolete Constants</a></dt>
</dl>
</div>

<p>The characters are ordered according to a superset of the ASCII
encoding.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e5107" name="d0e5107" /><span class="term">Platform
dependent: only in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> built <span
class="strong"><i>with</i></span> the compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>More precisely, <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> uses the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set (ISO 10646, also
known as UCS-2).</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e5135" name="d0e5135" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms only,
and only in <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
built <span class="strong"><i>without</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>
<p><a id="d0e5157" name="d0e5157" />More precisely, <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> uses the IBM
PC character set (code page 437):</p>

<div class="table">
<p><a id="d0e5164" name="d0e5164" /><b>Table 13.1. the IBM PC character
set (code page 437)</b></p>

<table summary="the IBM PC character set (code page 437)" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>&nbsp;</th>
<th>#x0</th>
<th>#x1</th>
<th>#x2</th>
<th>#x3</th>
<th>#x4</th>
<th>#x5</th>
<th>#x6</th>
<th>#x7</th>
<th>#x8</th>
<th>#x9</th>
<th>#xA</th>
<th>#xB</th>
<th>#xC</th>
<th>#xD</th>
<th>#xE</th>
<th>#xF</th>
</tr>
</thead>

<tbody>
<tr>
<td>#x00</td>
<td>**</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>&para;</td>
<td>&sect;</td>
</tr>

<tr>
<td>#x10</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>**</td>
<td>**</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#x20</td>
<td>&nbsp;</td>
<td>!</td>
<td>"</td>
<td>#</td>
<td>$</td>
<td>%</td>
<td>&amp;</td>
<td>'</td>
<td>(</td>
<td>)</td>
<td>*</td>
<td>+</td>
<td>,</td>
<td>-</td>
<td>.</td>
<td>/</td>
</tr>

<tr>
<td>#x30</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>:</td>
<td>;</td>
<td>&lt;</td>
<td>=</td>
<td>&gt;</td>
<td>?</td>
</tr>

<tr>
<td>#x40</td>
<td>@</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>E</td>
<td>F</td>
<td>G</td>
<td>H</td>
<td>I</td>
<td>J</td>
<td>K</td>
<td>L</td>
<td>M</td>
<td>N</td>
<td>O</td>
</tr>

<tr>
<td>#x50</td>
<td>P</td>
<td>Q</td>
<td>R</td>
<td>S</td>
<td>T</td>
<td>U</td>
<td>V</td>
<td>W</td>
<td>X</td>
<td>Y</td>
<td>Z</td>
<td>[</td>
<td>\</td>
<td>]</td>
<td>^</td>
<td>_</td>
</tr>

<tr>
<td>#x60</td>
<td>`</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
<td>f</td>
<td>g</td>
<td>h</td>
<td>i</td>
<td>j</td>
<td>k</td>
<td>l</td>
<td>m</td>
<td>n</td>
<td>o</td>
</tr>

<tr>
<td>#x70</td>
<td>p</td>
<td>q</td>
<td>r</td>
<td>s</td>
<td>t</td>
<td>u</td>
<td>v</td>
<td>w</td>
<td>x</td>
<td>y</td>
<td>z</td>
<td>{</td>
<td>|</td>
<td>}</td>
<td>~</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#x80</td>
<td>&Ccedil;</td>
<td>&uuml;</td>
<td>&eacute;</td>
<td>&acirc;</td>
<td>&auml;</td>
<td>&agrave;</td>
<td>&aring;</td>
<td>&ccedil;</td>
<td>&ecirc;</td>
<td>&euml;</td>
<td>&egrave;</td>
<td>&iuml;</td>
<td>&icirc;</td>
<td>&igrave;</td>
<td>&Auml;</td>
<td>&Aring;</td>
</tr>

<tr>
<td>#x90</td>
<td>&Eacute;</td>
<td>&aelig;</td>
<td>&AElig;</td>
<td>&ocirc;</td>
<td>&ouml;</td>
<td>&ograve;</td>
<td>&ucirc;</td>
<td>&ugrave;</td>
<td>&yuml;</td>
<td>&Ouml;</td>
<td>&Uuml;</td>
<td>&cent;</td>
<td>&pound;</td>
<td>&yen;</td>
<td>&#8359;</td>
<td>&fnof;</td>
</tr>

<tr>
<td>#xA0</td>
<td>&aacute;</td>
<td>&iacute;</td>
<td>&oacute;</td>
<td>&uacute;</td>
<td>&ntilde;</td>
<td>&Ntilde;</td>
<td>&ordf;</td>
<td>&ordm;</td>
<td>&iquest;</td>
<td>&#8976;</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/fun_not.html"
target="_top"><tt>NOT</tt></a></td>
<td>&frac12;</td>
<td>&frac14;</td>
<td>&iexcl;</td>
<td>&laquo;</td>
<td>&raquo;</td>
</tr>

<tr>
<td>#xB0</td>
<td>&#9617;</td>
<td>&#9618;</td>
<td>&#9619;</td>
<td>&#9474;</td>
<td>&#9508;</td>
<td>&#9569;</td>
<td>&#9570;</td>
<td>&#9558;</td>
<td>&#9557;</td>
<td>&#9571;</td>
<td>&#9553;</td>
<td>&#9559;</td>
<td>&#9565;</td>
<td>&#9564;</td>
<td>&#9563;</td>
<td>&#9488;</td>
</tr>

<tr>
<td>#xC0</td>
<td>&#9492;</td>
<td>&#9524;</td>
<td>&#9516;</td>
<td>&#9500;</td>
<td>&#9472;</td>
<td>&#9532;</td>
<td>&#9566;</td>
<td>&#9567;</td>
<td>&#9562;</td>
<td>&#9556;</td>
<td>&#9577;</td>
<td>&#9574;</td>
<td>&#9568;</td>
<td>&#9552;</td>
<td>&#9580;</td>
<td>&#9575;</td>
</tr>

<tr>
<td>#xD0</td>
<td>&#9576;</td>
<td>&#9572;</td>
<td>&#9573;</td>
<td>&#9561;</td>
<td>&#9560;</td>
<td>&#9554;</td>
<td>&#9555;</td>
<td>&#9563;</td>
<td>&#9562;</td>
<td>&#9496;</td>
<td>&#9484;</td>
<td>&#9608;</td>
<td>&#9604;</td>
<td>&#9612;</td>
<td>&#9616;</td>
<td>&#9600;</td>
</tr>

<tr>
<td>#xE0</td>
<td>&alpha;</td>
<td>&szlig;</td>
<td>&Gamma;</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
target="_top"><tt>PI</tt></a></td>
<td>&Sigma;</td>
<td>&sigma;</td>
<td>&micro;</td>
<td>&tau;</td>
<td>&Phi;</td>
<td>&Theta;</td>
<td>&Omega;</td>
<td>&delta;</td>
<td>&infin;</td>
<td>&phi;</td>
<td>&#8714;</td>
<td>&cap;</td>
</tr>

<tr>
<td>#xF0</td>
<td>&equiv;</td>
<td>&plusmn;</td>
<td>&ge;</td>
<td>&le;</td>
<td>&#8992;</td>
<td>&#8993;</td>
<td>&divide;</td>
<td>&#8781;</td>
<td>&deg;</td>
<td>&#8729;</td>
<td>&middot;</td>
<td>&radic;</td>
<td>&#8319;</td>
<td>&sup2;</td>
<td>&#9632;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

Here ** are control characters, not graphic characters. (The characters
left blank here cannot be represented in this character set). 
<br />
<br />
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e5751" name="d0e5751" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> (except <a
href="http://www.next.com/" target="_top"><span
class="strong"><i>NeXTstep</i></span></a>), <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a>, <a
href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only, and only in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> built <span
class="strong"><i>without</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>
<p><a id="d0e5785" name="d0e5785" />More precisely, <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> uses the ISO
Latin-1 (ISO 8859-1) character set:</p>

<div class="table">
<p><a id="d0e5792" name="d0e5792" /><b>Table 13.2. the ISO Latin-1 (ISO
8859-1) character set</b></p>

<table summary="the ISO Latin-1 (ISO 8859-1) character set" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>&nbsp;</th>
<th>#x0</th>
<th>#x1</th>
<th>#x2</th>
<th>#x3</th>
<th>#x4</th>
<th>#x5</th>
<th>#x6</th>
<th>#x7</th>
<th>#x8</th>
<th>#x9</th>
<th>#xA</th>
<th>#xB</th>
<th>#xC</th>
<th>#xD</th>
<th>#xE</th>
<th>#xF</th>
</tr>
</thead>

<tbody>
<tr>
<td>#x00</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
</tr>

<tr>
<td>#x10</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
</tr>

<tr>
<td>#x20</td>
<td>&nbsp;</td>
<td>!</td>
<td>"</td>
<td>#</td>
<td>$</td>
<td>%</td>
<td>&amp;</td>
<td>'</td>
<td>(</td>
<td>)</td>
<td>*</td>
<td>+</td>
<td>,</td>
<td>-</td>
<td>.</td>
<td>/</td>
</tr>

<tr>
<td>#x30</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>:</td>
<td>;</td>
<td>&lt;</td>
<td>=</td>
<td>&gt;</td>
<td>?</td>
</tr>

<tr>
<td>#x40</td>
<td>@</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>E</td>
<td>F</td>
<td>G</td>
<td>H</td>
<td>I</td>
<td>J</td>
<td>K</td>
<td>L</td>
<td>M</td>
<td>N</td>
<td>O</td>
</tr>

<tr>
<td>#x50</td>
<td>P</td>
<td>Q</td>
<td>R</td>
<td>S</td>
<td>T</td>
<td>U</td>
<td>V</td>
<td>W</td>
<td>X</td>
<td>Y</td>
<td>Z</td>
<td>[</td>
<td>\</td>
<td>]</td>
<td>^</td>
<td>_</td>
</tr>

<tr>
<td>#x60</td>
<td>`</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
<td>f</td>
<td>g</td>
<td>h</td>
<td>i</td>
<td>j</td>
<td>k</td>
<td>l</td>
<td>m</td>
<td>n</td>
<td>o</td>
</tr>

<tr>
<td>#x70</td>
<td>p</td>
<td>q</td>
<td>r</td>
<td>s</td>
<td>t</td>
<td>u</td>
<td>v</td>
<td>w</td>
<td>x</td>
<td>y</td>
<td>z</td>
<td>{</td>
<td>|</td>
<td>}</td>
<td>~</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#x80</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#x90</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#xA0</td>
<td>&nbsp;</td>
<td>&iexcl;</td>
<td>&cent;</td>
<td>&pound;</td>
<td>&curren;</td>
<td>&yen;</td>
<td>&brvbar;</td>
<td>&sect;</td>
<td>&uml;</td>
<td>&copy;</td>
<td>&ordf;</td>
<td>&laquo;</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/fun_not.html"
target="_top"><tt>NOT</tt></a></td>
<td>&shy;</td>
<td>&reg;</td>
<td>&macr;</td>
</tr>

<tr>
<td>#xB0</td>
<td>&deg;</td>
<td>&plusmn;</td>
<td>&sup2;</td>
<td>&sup3;</td>
<td>&acute;</td>
<td>&micro;</td>
<td>&para;</td>
<td>&middot;</td>
<td>&cedil;</td>
<td>&sup1;</td>
<td>&ordm;</td>
<td>&raquo;</td>
<td>&frac14;</td>
<td>&frac12;</td>
<td>&frac34;</td>
<td>&iquest;</td>
</tr>

<tr>
<td>#xC0</td>
<td>&Agrave;</td>
<td>&Aacute;</td>
<td>&Acirc;</td>
<td>&Atilde;</td>
<td>&Auml;</td>
<td>&Aring;</td>
<td>&AElig;</td>
<td>&Ccedil;</td>
<td>&Egrave;</td>
<td>&Eacute;</td>
<td>&Ecirc;</td>
<td>&Euml;</td>
<td>&Igrave;</td>
<td>&Iacute;</td>
<td>&Icirc;</td>
<td>&Iuml;</td>
</tr>

<tr>
<td>#xD0</td>
<td>&ETH;</td>
<td>&Ntilde;</td>
<td>&Ograve;</td>
<td>&Oacute;</td>
<td>&Ocirc;</td>
<td>&Otilde;</td>
<td>&Ouml;</td>
<td>&times;</td>
<td>&Oslash;</td>
<td>&Ugrave;</td>
<td>&Uacute;</td>
<td>&Ucirc;</td>
<td>&Uuml;</td>
<td>&Yacute;</td>
<td>&THORN;</td>
<td>&szlig;</td>
</tr>

<tr>
<td>#xE0</td>
<td>&agrave;</td>
<td>&aacute;</td>
<td>&acirc;</td>
<td>&atilde;</td>
<td>&auml;</td>
<td>&aring;</td>
<td>&aelig;</td>
<td>&ccedil;</td>
<td>&egrave;</td>
<td>&eacute;</td>
<td>&ecirc;</td>
<td>&euml;</td>
<td>&igrave;</td>
<td>&iacute;</td>
<td>&icirc;</td>
<td>&iuml;</td>
</tr>

<tr>
<td>#xF0</td>
<td>&eth;</td>
<td>&ntilde;</td>
<td>&ograve;</td>
<td>&oacute;</td>
<td>&ocirc;</td>
<td>&otilde;</td>
<td>&ouml;</td>
<td>&divide;</td>
<td>&oslash;</td>
<td>&ugrave;</td>
<td>&uacute;</td>
<td>&ucirc;</td>
<td>&uuml;</td>
<td>&yacute;</td>
<td>&thorn;</td>
<td>&yuml;</td>
</tr>
</tbody>
</table>
</div>

Here ** are control characters, not graphic characters. (The characters
left blank here cannot be represented in this character set). 
<br />
<br />
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e6365" name="d0e6365" /><span class="term">Platform
dependent: <a href="http://www.next.com/" target="_top"><span
class="strong"><i>NeXTstep</i></span></a> platforms only, and only in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> built <span
class="strong"><i>without</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>
<p><a id="d0e6383" name="d0e6383" />More precisely, <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> uses the <a
href="http://www.next.com/" target="_top"><span
class="strong"><i>NeXTstep</i></span></a> character set:</p>

<div class="table">
<p><a id="d0e6394" name="d0e6394" /><b>Table 13.3. the <a
href="http://www.next.com/" target="_top"><span
class="strong"><i>NeXTstep</i></span></a> character set</b></p>

<table summary="the NeXTstep character set" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>&nbsp;</th>
<th>#x0</th>
<th>#x1</th>
<th>#x2</th>
<th>#x3</th>
<th>#x4</th>
<th>#x5</th>
<th>#x6</th>
<th>#x7</th>
<th>#x8</th>
<th>#x9</th>
<th>#xA</th>
<th>#xB</th>
<th>#xC</th>
<th>#xD</th>
<th>#xE</th>
<th>#xF</th>
</tr>
</thead>

<tbody>
<tr>
<td>#x00</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
</tr>

<tr>
<td>#x10</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
<td>**</td>
</tr>

<tr>
<td>#x20</td>
<td>&nbsp;</td>
<td>!</td>
<td>"</td>
<td>#</td>
<td>$</td>
<td>%</td>
<td>&amp;</td>
<td>'</td>
<td>(</td>
<td>)</td>
<td>*</td>
<td>+</td>
<td>,</td>
<td>-</td>
<td>.</td>
<td>/</td>
</tr>

<tr>
<td>#x30</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>:</td>
<td>;</td>
<td>&lt;</td>
<td>=</td>
<td>&gt;</td>
<td>?</td>
</tr>

<tr>
<td>#x40</td>
<td>@</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>E</td>
<td>F</td>
<td>G</td>
<td>H</td>
<td>I</td>
<td>J</td>
<td>K</td>
<td>L</td>
<td>M</td>
<td>N</td>
<td>O</td>
</tr>

<tr>
<td>#x50</td>
<td>P</td>
<td>Q</td>
<td>R</td>
<td>S</td>
<td>T</td>
<td>U</td>
<td>V</td>
<td>W</td>
<td>X</td>
<td>Y</td>
<td>Z</td>
<td>[</td>
<td>\</td>
<td>]</td>
<td>^</td>
<td>_</td>
</tr>

<tr>
<td>#x60</td>
<td>`</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
<td>f</td>
<td>g</td>
<td>h</td>
<td>i</td>
<td>j</td>
<td>k</td>
<td>l</td>
<td>m</td>
<td>n</td>
<td>o</td>
</tr>

<tr>
<td>#x70</td>
<td>p</td>
<td>q</td>
<td>r</td>
<td>s</td>
<td>t</td>
<td>u</td>
<td>v</td>
<td>w</td>
<td>x</td>
<td>y</td>
<td>z</td>
<td>{</td>
<td>|</td>
<td>}</td>
<td>~</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>#x80</td>
<td>&nbsp;</td>
<td>&Agrave;</td>
<td>&Aacute;</td>
<td>&Acirc;</td>
<td>&Atilde;</td>
<td>&Auml;</td>
<td>&Aring;</td>
<td>&Ccedil;</td>
<td>&Egrave;</td>
<td>&Eacute;</td>
<td>&Ecirc;</td>
<td>&Euml;</td>
<td>&Igrave;</td>
<td>&Iacute;</td>
<td>&Icirc;</td>
<td>&Iuml;</td>
</tr>

<tr>
<td>#x90</td>
<td>&ETH;</td>
<td>&Ntilde;</td>
<td>&Ograve;</td>
<td>&Oacute;</td>
<td>&Ocirc;</td>
<td>&Otilde;</td>
<td>&Ouml;</td>
<td>&Ugrave;</td>
<td>&Uacute;</td>
<td>&Ucirc;</td>
<td>&Uuml;</td>
<td>&Yacute;</td>
<td>&THORN;</td>
<td>&micro;</td>
<td>&times;</td>
<td>&divide;</td>
</tr>

<tr>
<td>#xA0</td>
<td>&copy;</td>
<td>&iexcl;</td>
<td>&cent;</td>
<td>&pound;</td>
<td>&frasl;</td>
<td>&yen;</td>
<td>&fnof;</td>
<td>&sect;</td>
<td>&curren;</td>
<td>&rsquo;</td>
<td>&ldquo;</td>
<td>&laquo;</td>
<td>&lsaquo;</td>
<td>&rsaquo;</td>
<td>&#64257;</td>
<td>&#64258;</td>
</tr>

<tr>
<td>#xB0</td>
<td>&reg;</td>
<td>&ndash;</td>
<td>&dagger;</td>
<td>&Dagger;</td>
<td>&middot;</td>
<td>&brvbar;</td>
<td>&para;</td>
<td>&bull;</td>
<td>&sbquo;</td>
<td>&bdquo;</td>
<td>&rdquo;</td>
<td>&raquo;</td>
<td>&hellip;</td>
<td>&permil;</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/fun_not.html"
target="_top"><tt>NOT</tt></a></td>
<td>&iquest;</td>
</tr>

<tr>
<td>#xC0</td>
<td>&sup1;</td>
<td>&#715;</td>
<td>&acute;</td>
<td>^</td>
<td>&tilde;</td>
<td>&macr;</td>
<td>&#728;</td>
<td>&#729;</td>
<td>&uml;</td>
<td>&sup2;</td>
<td>&#730;</td>
<td>&cedil;</td>
<td>&sup3;</td>
<td>&#733;</td>
<td>&#731;</td>
<td>&#711;</td>
</tr>

<tr>
<td>#xD0</td>
<td>&mdash;</td>
<td>&plusmn;</td>
<td>&frac14;</td>
<td>&frac12;</td>
<td>&frac34;</td>
<td>&agrave;</td>
<td>&aacute;</td>
<td>&acirc;</td>
<td>&atilde;</td>
<td>&auml;</td>
<td>&aring;</td>
<td>&ccedil;</td>
<td>&egrave;</td>
<td>&eacute;</td>
<td>&ecirc;</td>
<td>&euml;</td>
</tr>

<tr>
<td>#xE0</td>
<td>&igrave;</td>
<td>&AElig;</td>
<td>&iacute;</td>
<td>&ordf;</td>
<td>&icirc;</td>
<td>&iuml;</td>
<td>&eth;</td>
<td>&ntilde;</td>
<td>&#321;</td>
<td>&Oslash;</td>
<td>&OElig;</td>
<td>&ordm;</td>
<td>&ograve;</td>
<td>&oacute;</td>
<td>&ocirc;</td>
<td>&otilde;</td>
</tr>

<tr>
<td>#xF0</td>
<td>&ouml;</td>
<td>&aelig;</td>
<td>&ugrave;</td>
<td>&uacute;</td>
<td>&ucirc;</td>
<td>&#305;</td>
<td>&uuml;</td>
<td>&yacute;</td>
<td>&#322;</td>
<td>&oslash;</td>
<td>&oelig;</td>
<td>&szlig;</td>
<td>&thorn;</td>
<td>&yuml;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

Here ** are control characters, not graphic characters. (The characters
left blank here cannot be represented in this character set). 
<br />
<br />
</dd>
</dl>
</div>

<div class="table">
<p><a id="d0e6999" name="d0e6999" /><b>Table 13.4. The following are
standard characters:</b></p>

<table summary="The following are standard characters:" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\Space</td>
<td>#x20</td>
</tr>

<tr>
<td>#\Newline</td>
<td>#x0A</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e7024" name="d0e7024" /><b>Table 13.5. The following are
semi-standard characters:</b></p>

<table summary="The following are semi-standard characters:" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\Backspace</td>
<td>#x08</td>
</tr>

<tr>
<td>#\Tab</td>
<td>#x09</td>
</tr>

<tr>
<td>#\Linefeed</td>
<td>#x0A</td>
</tr>

<tr>
<td>#\Page</td>
<td>#x0C</td>
</tr>

<tr>
<td>#\Return</td>
<td>#x0D</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e7071" name="d0e7071" /><b>Table 13.6. Platform dependent: <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</b></p>

<table summary="Platform dependent: DOS, OS/2, Win32
 platforms only." border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\Rubout</td>
<td>#x08</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e7103" name="d0e7103" /><b>Table 13.7. Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a>, <a
href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</b></p>

<table summary="Platform dependent: UNIX, Amiga, Acorn
 platforms only." border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\Rubout</td>
<td>#x7F</td>
</tr>
</tbody>
</table>
</div>

<p>#\Newline is the <a href="#newline" title="Line Terminators">line
terminator</a>.</p>

<div class="table">
<p><a id="d0e7141" name="d0e7141" /><b>Table 13.8. Additional Named
Characters</b></p>

<table summary="Additional Named Characters" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\Null</td>
<td>#x00</td>
</tr>

<tr>
<td>#\Bell</td>
<td>#x07</td>
</tr>

<tr>
<td>#\Escape</td>
<td>#x1B</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e7173" name="d0e7173" /><b>Table 13.9. Additional syntax for
characters with code from #x00 to #x1F:</b></p>

<table summary="Additional syntax for characters with code from
 #x00 to #x1F:" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>character</th>
<th>code</th>
</tr>
</thead>

<tbody>
<tr>
<td>#\^@</td>
<td>#x00</td>
</tr>

<tr>
<td>#\^A &hellip; #\^Z</td>
<td>#x01 &hellip; #x1A</td>
</tr>

<tr>
<td>#\^[</td>
<td>#x1B</td>
</tr>

<tr>
<td>#\^\</td>
<td>#x1C</td>
</tr>

<tr>
<td>#\^]</td>
<td>#x1D</td>
</tr>

<tr>
<td>#\^^</td>
<td>#x1E</td>
</tr>

<tr>
<td>#\^_</td>
<td>#x1F</td>
</tr>
</tbody>
</table>
</div>

<p>See also the section <a href="#chario" title="characters">Character
I/O</a>.</p>

<div class="section"><a id="input-char" name="input-char" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="input-char"
name="input-char" />Attributes</h2>
</div>
</div>

<p>Characters do not have the [<a href="#CLtL1">CLtL1</a>] font and bits
attributes. For backward compatibility, there is a class <a
href="#input-char" title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>
representing either a character with font and bits, or a keystroke. The
following functions work with objects of types <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> and <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>. Note that <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
target="_top"><tt>EQUAL</tt></a> cannot be used to compare objects of type
<a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e7284" name="d0e7284" /><span
class="term"><tt>ext:char-font-limit</tt> = 16</span></dt>

<dd>The system uses only font 0.</dd>

<dt><a id="d0e7292" name="d0e7292" /><span
class="term"><tt>ext:char-bits-limit</tt> = 16</span></dt>

<dd>
<div class="table">
<p><a id="d0e7298" name="d0e7298" /><b>Table 13.10. The following bits are
defined:</b></p>

<table summary="The following bits are defined:" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>:CONTROL</tt></td>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-CONTROL-BIT</tt></a></td>
</tr>

<tr>
<td><tt>:META</tt></td>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-META-BIT</tt></a></td>
</tr>

<tr>
<td><tt>:SUPER</tt></td>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-SUPER-BIT</tt></a></td>
</tr>

<tr>
<td><tt>:HYPER</tt></td>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-HYPER-BIT</tt></a></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e7341" name="d0e7341" /><span
class="term"><tt>(</tt>ext:char-font</span> <i><tt>object</tt></i>)</dt>

<dd>returns the font of a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>.</dd>

<dt><a id="d0e7363" name="d0e7363" /><span
class="term"><tt>(</tt>ext:char-bits</span> <i><tt>object</tt></i>)</dt>

<dd>returns the bits of a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>.</dd>

<dt><a id="d0e7385" name="d0e7385" /><span
class="term"><tt>(</tt>ext:make-char</span> <i><tt>char</tt></i>
[<i><tt>bits</tt></i> [<i><tt>font</tt></i>]])</dt>

<dd>returns a new <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a>, or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if such a character cannot be created.</dd>

<dt><a id="d0e7412" name="d0e7412" /><span
class="term"><tt>(</tt>ext:char-bit</span> <i><tt>object</tt></i>
<i><tt>name</tt></i>)</dt>

<dd>returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if the named bit is set in
<i><tt>object</tt></i>, else <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="d0e7439" name="d0e7439" /><span
class="term"><tt>(</tt>ext:set-char-bit</span> <i><tt>object</tt></i>
<i><tt>name</tt></i> <i><tt>newvalue</tt></i>)</dt>

<dd>returns a new <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a> with the named bit
set or unset, depending on the boolean <i><tt>newvalue</tt></i>.</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e7467" name="d0e7467" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a> platforms
only.</span></dt>

<dd>The system itself uses this <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a> type only to mention
special keys and <b>Control</b>/<b>Alternate</b>/<b>Shift</b> key status
on return from <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a> <a href="#terminal"
title="Terminal interaction."><tt>EXT:*KEYBOARD-INPUT*</tt></a>)</tt>.</dd>
</dl>
</div>
</div>

<div class="section"><a id="char-script" name="char-script" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-script"
name="char-script" />Character Scripts <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html"
target="_top">[CLHS-13.1.2.1]</a></h2>
</div>
</div>

<p>The only defined character script is the type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> itself.</p>
</div>

<div class="section"><a id="char-attrib" name="char-attrib" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-attrib"
name="char-attrib" />Character Attributes <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html"
target="_top">[CLHS-13.1.3]</a></h2>
</div>
</div>

<p>Characters have no implementation-defined attributes. All characters
are simple characters.</p>
</div>

<div class="section"><a id="graph-char" name="graph-char" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="graph-char"
name="graph-char" />Graphic Characters <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html"
target="_top">[CLHS-13.1.4.1]</a></h2>
</div>
</div>

<p>The graphic characters are those <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> characters
which are defined by the <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> standard,
excluding the ranges U0000 &hellip; U001F and U007F &hellip; U009F.</p>
</div>

<div class="section"><a id="alpha-char" name="alpha-char" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="alpha-char"
name="alpha-char" />Alphabetic Characters <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html"
target="_top">[CLHS-13.1.4.2]</a></h2>
</div>
</div>

<p>The alphabetic characters are those <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> characters
which are defined as letters by the <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> standard.</p>
</div>

<div class="section"><a id="char-ext" name="char-ext" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-ext"
name="char-ext" />Case of Implementation-Defined Characters <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html"
target="_top">[CLHS-13.1.4.3.4]</a></h2>
</div>
</div>

<p>The characters with case are those <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> characters
<i><tt>c</tt></i>, for which the upper case mapping <i><tt>uc</tt></i> and
the lower case mapping <i><tt>lc</tt></i> have the following
properties:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e7599" name="d0e7599" /><i><tt>uc</tt></i> and
<i><tt>lc</tt></i> are different</li>

<li><a id="d0e7607" name="d0e7607" /><i><tt>c</tt></i> is one of
<i><tt>uc</tt></i> and <i><tt>lc</tt></i></li>

<li><a id="d0e7617" name="d0e7617" />the upper case mapping of
<i><tt>uc</tt></i> and of <i><tt>lc</tt></i> is <i><tt>uc</tt></i></li>

<li><a id="d0e7628" name="d0e7628" />the lower case mapping of
<i><tt>uc</tt></i> and of <i><tt>lc</tt></i> is <i><tt>lc</tt></i></li>
</ul>
</div>


<br />
<br />
<p>The titlecase property of <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> characters
has no equivalent in <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a>.</p>
</div>

<div class="section"><a id="num-char" name="num-char" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="num-char"
name="num-char" />Numeric Characters <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html"
target="_top">[CLHS-13.1.4.4]</a></h2>
</div>
</div>

<p>The numeric characters are those <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> characters
which are defined as digits by the <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> standard.</p>
</div>

<div class="section"><a id="char-ord" name="char-ord" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-ord"
name="char-ord" />Ordering of Characters <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html"
target="_top">[CLHS-13.1.6]</a></h2>
</div>
</div>

<p>The characters are ordered according to their <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> code.</p>
</div>

<div class="section"><a id="clhs-newline" name="clhs-newline" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="clhs-newline"
name="clhs-newline" />Treatment of Newline during Input and Output <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html"
target="_top">[CLHS-13.1.8]</a></h2>
</div>
</div>

<p>Newlines are written according to the stream's <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>, see the
function <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-external-format.html"
target="_top"><tt>STREAM-EXTERNAL-FORMAT</tt></a> and the description of
<a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>s, in
particular, <a href="#newline" title="Line Terminators">line
terminator</a>s. The default behavior is as follows:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e7699" name="d0e7699" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>When writing to a file, #\Newline is converted to CR/LF. (This is the
usual convention on <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>.) For example, #\Return+#\Newline is
written as CR/CR/LF.</dd>
</dl>
</div>

<p>When reading from a file, CR/LF is converted to #\Newline (the usual
convention on <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>), and CR not followed by LF is
converted to #\Newline as well (the usual conversion on MacOS, also used
by some programs on <a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>).</p>
</div>

<div class="section"><a id="char-int" name="char-int" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-int"
name="char-int" />Character Encodings <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html"
target="_top">[CLHS-13.1.9]</a></h2>
</div>
</div>

<p>The integer returned by <a
href="http://www.lisp.org/HyperSpec/Body/fun_char-int.html"
target="_top"><tt>CHAR-INT</tt></a> is the same as the character's
code.</p>
</div>

<div class="section"><a id="script-ext" name="script-ext" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="script-ext"
name="script-ext" />Documentation of Implementation-Defined Scripts <a
href="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html"
target="_top">[CLHS-13.1.10]</a></h2>
</div>
</div>

<p>See the description of <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>s.</p>
</div>

<div class="section"><a id="char-dict" name="char-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-dict"
name="char-dict" />The Characters Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html"
target="_top">[CLHS-13.2]</a></h2>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html"
target="_top"><tt>CHAR-CODE</tt></a> takes values from 0 (inclusive) to <a
href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
target="_top"><tt>CHAR-CODE-LIMIT</tt></a> (exclusive), i.e., the
implementation supports exactly <a
href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
target="_top"><tt>CHAR-CODE-LIMIT</tt></a> characters.</p>

<div class="table">
<p><a id="d0e7814" name="d0e7814" /><b>Table 13.11. Platform
dependent</b></p>

<table summary="Platform dependent" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>binaries built</th>
<th><span class="strong"><i>without</i></span><a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> support</th>
<th><span class="strong"><i>with</i></span><a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> support</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
target="_top"><tt>CHAR-CODE-LIMIT</tt></a></td>
<td>2<sup>8</sup> = 256</td>
<td>2<sup>16</sup> = 65536</td>
</tr>
</tbody>
</table>
</div>

<p>The types <tt>ext:string-char</tt> and <a
href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html"
target="_top"><tt>BASE-CHAR</tt></a> are equivalent to <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</p>

<p>The graphic characters have been described above.</p>

<p>The standard characters are #\Newline and the graphic characters with a
code between 32 and 126 (inclusive).</p>

<p>The alphabetic characters are these characters:</p>

<div class="literallayout"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ABCDEFGHIJKLMNOPQRSTUVWXYZ
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abcdefghijklmnopqrstuvwxyz
<br />
</div>

and the international alphabetic characters from the character set: 

<div class="literallayout"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&Ccedil;&uuml;&eacute;&acirc;&auml;&agrave;&aring;&ccedil;&ecirc;&euml;&egrave;&iuml;&icirc;&igrave;&Auml;&Aring;&Eacute;&aelig;&AElig;&ocirc;&ouml;&ograve;&ucirc;&ugrave;&yuml;&Ouml;&Uuml;&szlig;&aacute;&iacute;&oacute;&uacute;&ntilde;&Ntilde;&ordf;&ordm;&atilde;&otilde;&Oslash;&oslash;&Agrave;&Atilde;&Otilde;&nbsp;etc.
<br />
</div>


<br />
<br />
<p>The functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-EQUAL</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-NOT-EQUAL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-LESSP</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-GREATERP</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-NOT-GREATERP</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR-NOT-LESSP</tt></a> ignore bits and font attributes
of their arguments.</p>
</div>

<div class="section"><a id="char-width" name="char-width" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-width"
name="char-width" />Functions on characters</h2>
</div>
</div>

<p><b><tt>(<a href="#char-width"
title="Functions on characters"><tt>EXT:CHAR-WIDTH</tt></a>
<i><tt>char</tt></i>)</tt>.&nbsp;</b> returns the number of screen columns
occupied by <i><tt>char</tt></i>. This is 0 for non-spacing characters
(such as control characters and many combining characters), 2 for
double-width East Asian characters, and 1 for all other characters. See
also function <a href="#string-width"
title="Functions on strings"><tt>EXT:STRING-WIDTH</tt></a>.</p>
</div>

<div class="section"><a id="char-platform-dep" name="char-platform-dep" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-platform-dep"
name="char-platform-dep" />platform-dependent characters</h2>
</div>
</div>

<p>The characters that are not graphic chars and the space character have
names:</p>

<div class="table">
<p><a id="d0e7934" name="d0e7934" /><b>Table 13.12. Platform dependent: <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</b></p>

<table summary="Platform dependent: Amiga platforms only." border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>code</th>
<th>char</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x00)</tt></td>
<td>#\Null</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x01)</tt></td>
<td>#\Code1</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x02)</tt></td>
<td>#\Code2</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x03)</tt></td>
<td>#\Code3</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x04)</tt></td>
<td>#\Code4</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x05)</tt></td>
<td>#\Code5</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x06)</tt></td>
<td>#\Code6</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x07)</tt></td>
<td>#\Bell</td>
<td>#\Bel</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x08)</tt></td>
<td>#\Backspace</td>
<td>#\Bs</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x09)</tt></td>
<td>#\Tab</td>
<td>#\Ht</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0A)</tt></td>
<td>#\Newline</td>
<td>#\Linefeed</td>
<td>#\Lf</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0B)</tt></td>
<td>#\Vt</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0C)</tt></td>
<td>#\Page</td>
<td>#\Ff</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0D)</tt></td>
<td>#\Return</td>
<td>#\Cr</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0E)</tt></td>
<td>#\So</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0F)</tt></td>
<td>#\Si</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x10)</tt></td>
<td>#\Code16</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x11)</tt></td>
<td>#\Code17</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x12)</tt></td>
<td>#\Code18</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x13)</tt></td>
<td>#\Code19</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x14)</tt></td>
<td>#\Code20</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x15)</tt></td>
<td>#\Code21</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x16)</tt></td>
<td>#\Code22</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x17)</tt></td>
<td>#\Code23</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x18)</tt></td>
<td>#\Code24</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x19)</tt></td>
<td>#\Code25</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1A)</tt></td>
<td>#\Code26</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1B)</tt></td>
<td>#\Escape</td>
<td>#\Esc</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1C)</tt></td>
<td>#\Code28</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1D)</tt></td>
<td>#\Code29</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1E)</tt></td>
<td>#\Code30</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1F)</tt></td>
<td>#\Code31</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x20)</tt></td>
<td>#\Space</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x7F)</tt></td>
<td>#\Rubout</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x9B)</tt></td>
<td>#\Csi</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e8360" name="d0e8360" /><b>Table 13.13. Platform dependent: <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</b></p>

<table summary="Platform dependent: DOS, OS/2, Win32
 platforms only." border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>code</th>
<th>char</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x00)</tt></td>
<td>#\Null</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x07)</tt></td>
<td>#\Bell</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x08)</tt></td>
<td>#\Backspace</td>
<td>#\Rubout</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x09)</tt></td>
<td>#\Tab</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0A)</tt></td>
<td>#\Newline</td>
<td>#\Linefeed</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0B)</tt></td>
<td>#\Code11</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0C)</tt></td>
<td>#\Page</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0D)</tt></td>
<td>#\Return</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1A)</tt></td>
<td>#\Code26</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1B)</tt></td>
<td>#\Escape</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x20)</tt></td>
<td>#\Space</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e8512" name="d0e8512" /><b>Table 13.14. Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a>, platforms
only.</b></p>

<table summary="Platform dependent: UNIX, Acorn,
 platforms only." border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>code</th>
<th>char</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x00)</tt></td>
<td>#\Null</td>
<td>#\Nul</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x01)</tt></td>
<td>#\Soh</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x02)</tt></td>
<td>#\Stx</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x03)</tt></td>
<td>#\Etx</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x04)</tt></td>
<td>#\Eot</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x05)</tt></td>
<td>#\Enq</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x06)</tt></td>
<td>#\Ack</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x07)</tt></td>
<td>#\Bell</td>
<td>#\Bel</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x08)</tt></td>
<td>#\Backspace</td>
<td>#\Bs</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x09)</tt></td>
<td>#\Tab</td>
<td>#\Ht</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0A)</tt></td>
<td>#\Newline</td>
<td>#\Nl</td>
<td>#\Linefeed</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0B)</tt></td>
<td>#\Vt</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0C)</tt></td>
<td>#\Page</td>
<td>#\Np</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0D)</tt></td>
<td>#\Return</td>
<td>#\Cr</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0E)</tt></td>
<td>#\So</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x0F)</tt></td>
<td>#\Si</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x10)</tt></td>
<td>#\Dle</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x11)</tt></td>
<td>#\Dc1</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x12)</tt></td>
<td>#\Dc2</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x13)</tt></td>
<td>#\Dc3</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x14)</tt></td>
<td>#\Dc4</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x15)</tt></td>
<td>#\Nak</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x16)</tt></td>
<td>#\Syn</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x17)</tt></td>
<td>#\Etb</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x18)</tt></td>
<td>#\Can</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x19)</tt></td>
<td>#\Em</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1A)</tt></td>
<td>#\Sub</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1B)</tt></td>
<td>#\Escape</td>
<td>#\Esc</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1C)</tt></td>
<td>#\Fs</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1D)</tt></td>
<td>#\Gs</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1E)</tt></td>
<td>#\Rs</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x1F)</tt></td>
<td>#\Us</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x20)</tt></td>
<td>#\Space</td>
<td>#\Sp</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> #x7F)</tt></td>
<td>#\Rubout</td>
<td>#\Delete</td>
<td>#\Del</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="char-bits" name="char-bits" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="char-bits"
name="char-bits" />Obsolete Constants</h2>
</div>
</div>

<div class="table">
<p><a id="d0e8945" name="d0e8945" /><b>Table 13.15. obsolete
constants</b></p>

<table summary="obsolete constants" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>constant</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-CONTROL-BIT</tt></a></td>
<td>1</td>
</tr>

<tr>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-META-BIT</tt></a></td>
<td>2</td>
</tr>

<tr>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-SUPER-BIT</tt></a></td>
<td>4</td>
</tr>

<tr>
<td><a href="#char-bits"
title="Obsolete Constants"><tt>EXT:CHAR-HYPER-BIT</tt></a></td>
<td>8</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="conses" name="conses" />Chapter 14. Conses
[CLHS-14]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#cons-dict">The Conses Dictionary [CLHS-14.2]</a></dt>

<dd>
<dl>
<dt><a href="#map-func">Functions <tt>MAPCAR</tt>, <tt>MAPCAN</tt>,
<tt>MAPLIST</tt>, <tt>MAPCON</tt>, ...</a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="cons-dict" name="cons-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="cons-dict"
name="cons-dict" />The Conses Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html"
target="_top">[CLHS-14.2]</a></h2>
</div>
</div>

<div class="section"><a id="map-func" name="map-func" />
<div class="titlepage">
<div>
<h3 class="title"><a id="map-func" name="map-func" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCAR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCAN</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPLIST</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCON</tt></a>, ...</h3>
</div>
</div>

<div class="section"><a id="mapcap" name="mapcap" />
<div class="titlepage">
<div>
<h4 class="title"><a id="mapcap" name="mapcap" />Function <a
href="#mapcap" title="Function EXT:MAPCAP"><tt>EXT:MAPCAP</tt></a></h4>
</div>
</div>

<p>The function <a href="#mapcap"
title="Function EXT:MAPCAP"><tt>EXT:MAPCAP</tt></a> is like <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCAN</tt></a>, except that it concatenates the
resulting lists with <a
href="http://www.lisp.org/HyperSpec/Body/fun_append.html"
target="_top"><tt>APPEND</tt></a> instead of <a
href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
target="_top"><tt>NCONC</tt></a>:</p>

<p><tt>(<a href="#mapcap"
title="Function EXT:MAPCAP"><tt>EXT:MAPCAP</tt></a>
<i><tt>function</tt></i> <i><tt>x<sub>1</sub></tt></i> ...
<i><tt>x<sub>n</sub></tt></i>)</tt> == <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> #'<a
href="http://www.lisp.org/HyperSpec/Body/fun_append.html"
target="_top"><tt>APPEND</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCAR</tt></a> <i><tt>function</tt></i>
<i><tt>x<sub>1</sub></tt></i> ... <i><tt>x<sub>n</sub></tt></i>))</tt></p>

<p>(Actually a bit more efficient that this would have been.)</p>
</div>

<div class="section"><a id="maplap" name="maplap" />
<div class="titlepage">
<div>
<h4 class="title"><a id="maplap" name="maplap" />Function <a
href="#mapcap" title="Function EXT:MAPCAP"><tt>EXT:MAPLAP</tt></a></h4>
</div>
</div>

<p>The function <a href="#mapcap"
title="Function EXT:MAPCAP"><tt>EXT:MAPLAP</tt></a> is like <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCON</tt></a>, except that it concatenates the
resulting lists with <a
href="http://www.lisp.org/HyperSpec/Body/fun_append.html"
target="_top"><tt>APPEND</tt></a> instead of <a
href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
target="_top"><tt>NCONC</tt></a>:</p>

<p><tt>(<a href="#mapcap"
title="Function EXT:MAPCAP"><tt>EXT:MAPLAP</tt></a>
<i><tt>function</tt></i> <i><tt>x<sub>1</sub></tt></i> ...
<i><tt>x<sub>n</sub></tt></i>)</tt> == <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> #'<a
href="http://www.lisp.org/HyperSpec/Body/fun_append.html"
target="_top"><tt>APPEND</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPLIST</tt></a> <i><tt>function</tt></i>
<i><tt>x<sub>1</sub></tt></i> ... <i><tt>x<sub>n</sub></tt></i>))</tt></p>

<p>(Actually a bit more efficient that this would have been.)</p>
</div>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="arrays" name="arrays" />Chapter 15. Arrays
[CLHS-15]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#array-elts">Array Elements [CLHS-15.1.1]</a></dt>

<dt><a href="#array-dict">The Arrays Dictionary [CLHS-15.2]</a></dt>
</dl>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
target="_top"><tt>MAKE-ARRAY</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
target="_top"><tt>MAKE-ARRAY</tt></a> can return specialized arrays for
the <a
href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
target="_top"><tt>ARRAY-ELEMENT-TYPE</tt></a>s <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 2)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 4)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 16)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 32)</tt>, and, of course, <a
href="http://www.lisp.org/HyperSpec/Body/typ_bit.html"
target="_top"><tt>BIT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</p>

<div class="section"><a id="array-elts" name="array-elts" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="array-elts"
name="array-elts" />Array Elements <a
href="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html"
target="_top">[CLHS-15.1.1]</a></h2>
</div>
</div>

<div class="table">
<p><a id="d0e9228" name="d0e9228" /><b>Table 15.1. Platform
dependent</b></p>

<table summary="Platform dependent" border="1">
<colgroup>
<col align="center" />
<col align="center" />
<col align="center" />
<col align="center" /></colgroup>

<thead>
<tr>
<th>CPU type</th>
<th>16-bit CPU</th>
<th>32-bit CPU</th>
<th>64-bit CPU</th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_array-rank-limit.html"
target="_top"><tt>ARRAY-RANK-LIMIT</tt></a></td>
<td colspan="2" align="center">2<sup>16</sup> = 65536</td>
<td>2<sup>32</sup> = 4294967296</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html"
target="_top"><tt>ARRAY-DIMENSION-LIMIT</tt></a></td>
<td colspan="2" align="center">2<sup>24</sup> = 16777216</td>
<td>2<sup>32</sup> = 4294967296</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html"
target="_top"><tt>ARRAY-TOTAL-SIZE-LIMIT</tt></a></td>
<td colspan="2" align="center">2<sup>24</sup> = 16777216</td>
<td>2<sup>32</sup> = 4294967296</td>
</tr>
</tbody>
</table>
</div>

<p>Note that these constants are not fixnums, contrary to the [<a
href="#ansi-cl">ANSI CL standard</a>] Issue <a
href="http://www.lisp.org/HyperSpec/Issues/iss014.html"
target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a>.</p>
</div>

<div class="section"><a id="array-dict" name="array-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="array-dict"
name="array-dict" />The Arrays Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html"
target="_top">[CLHS-15.2]</a></h2>
</div>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
target="_top"><tt>ADJUST-ARRAY</tt></a> for displaced arrays.&nbsp;</b> An
array to which another array is displaced should not be shrunk (using <a
href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
target="_top"><tt>ADJUST-ARRAY</tt></a>) in such a way that the other
array points into void space. This is not checked at the time <a
href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
target="_top"><tt>ADJUST-ARRAY</tt></a> is called!</p>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="strings" name="strings" />Chapter 16. Strings
[CLHS-16]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#string-dict">The Strings Dictionary [CLHS-16.2]</a></dt>

<dd>
<dl>
<dt><a href="#string-width">Functions on strings</a></dt>
</dl>
</dd>
</dl>
</div>

<p>String comparison is based on the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
target="_top"><tt>CHAR&lt;=</tt></a>. Therefore diphthongs do not obey the
usual national rules. Example: <tt>o</tt> &lt; <tt>oe</tt> &lt; <tt>z</tt>
&lt; <tt>&ouml;</tt>.</p>

<div class="section"><a id="string-dict" name="string-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="string-dict"
name="string-dict" />The Strings Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html"
target="_top">[CLHS-16.2]</a></h2>
</div>
</div>

<div class="section"><a id="string-width" name="string-width" />
<div class="titlepage">
<div>
<h3 class="title"><a id="string-width" name="string-width" />Functions on
strings</h3>
</div>
</div>

<p><b><tt>(<a href="#string-width"
title="Functions on strings"><tt>EXT:STRING-WIDTH</tt></a>
<i><tt>string</tt></i>)</tt>.&nbsp;</b> returns the number of screen
columns occupied by <i><tt>string</tt></i>. This is computed as the sum of
all <a href="#char-width"
title="Functions on characters"><tt>EXT:CHAR-WIDTH</tt></a>s of all of the
<i><tt>string</tt></i>'s characters.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="sequences" name="sequences" />Chapter 17.
Sequences [CLHS-17]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#seq-dict">The Sequences Dictionary [CLHS-17.3.]</a></dt>

<dd>
<dl>
<dt><a href="#seq-macro-ext">Additional Macros</a></dt>

<dt><a href="#nreverse-nreconc">Functions <tt>NREVERSE</tt> &amp;
<tt>NRECONC</tt></a></dt>

<dt><a href="#rem-del">Functions <tt>REMOVE</tt> &amp;
<tt>DELETE</tt></a></dt>

<dt><a href="#sorting">Functions <tt>SORT</tt> &amp;
<tt>STABLE-SORT</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="seq-dict" name="seq-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="seq-dict"
name="seq-dict" />The Sequences Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html"
target="_top">[CLHS-17.3.]</a></h2>
</div>
</div>

<div class="section"><a id="seq-macro-ext" name="seq-macro-ext" />
<div class="titlepage">
<div>
<h3 class="title"><a id="seq-macro-ext" name="seq-macro-ext" />Additional
Macros</h3>
</div>
</div>

<div class="section"><a id="doseq" name="doseq" />
<div class="titlepage">
<div>
<h4 class="title"><a id="doseq" name="doseq" />Macro <a href="#doseq"
title="Macro EXT:DOSEQ"><tt>EXT:DOSEQ</tt></a></h4>
</div>
</div>

<p>For iteration through a sequence, a macro <a href="#doseq"
title="Macro EXT:DOSEQ"><tt>EXT:DOSEQ</tt></a>, similar to <a
href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html"
target="_top"><tt>DOLIST</tt></a>, may be used instead of <a
href="http://www.lisp.org/HyperSpec/Body/fun_map.html"
target="_top"><tt>MAP</tt></a>:</p>

<pre class="programlisting">
(<a href="#doseq"
title="Macro EXT:DOSEQ"><tt>EXT:DOSEQ</tt></a> (<i><tt>variable</tt></i> <i><tt>seqform</tt></i> [<i><tt>resultform</tt></i>])
  {<i><tt>declaration</tt></i>}*
  {<i><tt>tag</tt></i>|<i><tt>form</tt></i>}*)
</pre>

<p><a href="#doseq" title="Macro EXT:DOSEQ"><tt>EXT:DOSEQ</tt></a> forms
are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form"
target="_top">&ldquo;iteration forms&rdquo;</a>.</p>
</div>
</div>

<div class="section"><a id="nreverse-nreconc" name="nreverse-nreconc" />
<div class="titlepage">
<div>
<h3 class="title"><a id="nreverse-nreconc"
name="nreverse-nreconc" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
target="_top"><tt>NREVERSE</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
target="_top"><tt>NRECONC</tt></a></h3>
</div>
</div>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
target="_top"><tt>NREVERSE</tt></a>.&nbsp;</b> The result of <a
href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
target="_top"><tt>NREVERSE</tt></a> is always <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to the argument. <a
href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
target="_top"><tt>NREVERSE</tt></a> on a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> swaps pairs of elements. <a
href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
target="_top"><tt>NREVERSE</tt></a> on a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
target="_top"><tt>LIST</tt></a> swaps the first and the last element and
reverses the list chaining between them.</p>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
target="_top"><tt>NRECONC</tt></a>.&nbsp;</b> The result of <a
href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
target="_top"><tt>NRECONC</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to the first argument unless it is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, in which case the result is <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to the second argument.</p>
</div>

<div class="section"><a id="rem-del" name="rem-del" />
<div class="titlepage">
<div>
<h3 class="title"><a id="rem-del" name="rem-del" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>REMOVE</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>DELETE</tt></a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>REMOVE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>REMOVE-IF</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>REMOVE-IF-NOT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html"
target="_top"><tt>REMOVE-DUPLICATES</tt></a> return their argument
unchanged, if no element has to be removed.</p>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>DELETE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>DELETE-IF</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
target="_top"><tt>DELETE-IF-NOT</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html"
target="_top"><tt>DELETE-DUPLICATES</tt></a> destructively modify their
argument: If the argument is a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
target="_top"><tt>LIST</tt></a>, the <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a> parts are modified. If the argument is a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> with fill pointer, the fill pointer is
lowered and the remaining elements are compacted below the new fill
pointer.</p>

<p><a id="count-ansi" name="count-ansi" /><b><a
href="#count-ansi"><tt>CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a>.&nbsp;</b>
Contrary to the [<a href="#ansi-cl">ANSI CL standard</a>] issue 283 <a
href="http://www.lisp.org/HyperSpec/Issues/iss283.html"
target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a>, negative
<tt>:COUNT</tt> keyword arguments are not allowed unless you set <a
href="#count-ansi"><tt>CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to a non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> value, in hich case &ldquo;using a negative
integer value is functionally equivalent to using a value of zero&rdquo;,
as per the [<a href="#ansi-cl">ANSI CL standard</a>] issue.</p>
</div>

<div class="section"><a id="sorting" name="sorting" />
<div class="titlepage">
<div>
<h3 class="title"><a id="sorting" name="sorting" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>SORT</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>STABLE-SORT</tt></a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>SORT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>STABLE-SORT</tt></a> have two additional keywords
<tt>:START</tt> and <tt>:END</tt>:</p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>SORT</tt></a> <i><tt>sequence</tt></i> <i><tt>predicate</tt></i> <a
 href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:KEY</tt> <tt>:START</tt> <tt>:END</tt>)
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>STABLE-SORT</tt></a> <i><tt>sequence</tt></i> <i><tt>predicate</tt></i> <a
 href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:KEY</tt> <tt>:START</tt> <tt>:END</tt>)
</pre>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>SORT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
target="_top"><tt>STABLE-SORT</tt></a> are identical. They implement the
mergesort algorithm. Worst case complexity: <tt>O(n*log(n))</tt>
comparisons, where <i><tt>n</tt></i> is the <a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> of the subsequence bounded by the
<tt>:START</tt> and <tt>:END</tt> arguments.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="hash" name="hash" />Chapter 18. Hash Tables
[CLHS-18]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#hash-dict">The Hash Tables Dictionary [CLHS-18.2.]</a></dt>

<dd>
<dl>
<dt><a href="#make-hash">Function <tt>MAKE-HASH-TABLE</tt></a></dt>

<dt><a href="#hash-ext">Additional Macros</a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="hash-dict" name="hash-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="hash-dict"
name="hash-dict" />The Hash Tables Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html"
target="_top">[CLHS-18.2.]</a></h2>
</div>
</div>

<div class="section"><a id="make-hash" name="make-hash" />
<div class="titlepage">
<div>
<h3 class="title"><a id="make-hash" name="make-hash" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
target="_top"><tt>MAKE-HASH-TABLE</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
target="_top"><tt>MAKE-HASH-TABLE</tt></a> has an additional keyword
<tt>:initial-contents</tt>:</p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
target="_top"><tt>MAKE-HASH-TABLE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :test :initial-contents :size
                 :rehash-size :rehash-threshold)
</pre>

<p>The <tt>:initial-contents</tt> argument is an <a
href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
target="_top">alist</a> that is used to initialize the new hash table. The
<tt>:rehash-threshold</tt> argument is ignored.</p>
</div>

<div class="section"><a id="hash-ext" name="hash-ext" />
<div class="titlepage">
<div>
<h3 class="title"><a id="hash-ext" name="hash-ext" />Additional
Macros</h3>
</div>
</div>

<div class="section"><a id="dohash" name="dohash" />
<div class="titlepage">
<div>
<h4 class="title"><a id="dohash" name="dohash" />Macro <a href="#dohash"
title="Macro EXT:DOHASH"><tt>EXT:DOHASH</tt></a></h4>
</div>
</div>

<p>For iteration through a hash table, a macro <a href="#dohash"
title="Macro EXT:DOHASH"><tt>EXT:DOHASH</tt></a> similar to <a
href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html"
target="_top"><tt>DOLIST</tt></a>, can be used instead of <a
href="http://www.lisp.org/HyperSpec/Body/fun_maphash.html"
target="_top"><tt>MAPHASH</tt></a>:</p>

<pre class="programlisting">
(<a href="#dohash"
title="Macro EXT:DOHASH"><tt>EXT:DOHASH</tt></a> (<i><tt>key-var</tt></i> <i><tt>value-var</tt></i> <i><tt>hash-table-form</tt></i> [<i><tt>resultform</tt></i>])
  {<i><tt>declaration</tt></i>}*
  {<i><tt>tag</tt></i>|<i><tt>form</tt></i>}*)
</pre>

<p><a href="#dohash" title="Macro EXT:DOHASH"><tt>EXT:DOHASH</tt></a>
forms are <a
href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form"
target="_top">&ldquo;iteration forms&rdquo;</a>.</p>
</div>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="filenames" name="filenames" />Chapter 19.
Filenames [CLHS-19]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#path-components">Pathname Components [CLHS-19.2.1]</a></dt>

<dt><a href="#path-external-notation">External notation.</a></dt>

<dt><a href="#log-path">Logical Pathnames [CLHS-19.3]</a></dt>

<dt><a href="#filename-dict">The Filenames Dictionary [CLHS-19.4]</a></dt>

<dd>
<dl>
<dt><a href="#parsename">Function <tt>PARSE-NAMESTRING</tt></a></dt>

<dt><a href="#pathmerge">Function <tt>MERGE-PATHNAMES</tt></a></dt>

<dt><a href="#load-lpt">Function
<tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<p>For most operations, pathnames denoting files and pathnames denoting
directories cannot be used interchangeably.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e9805" name="d0e9805" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>For example, <tt>#p"FOO/BAR"</tt> denotes the file <tt>BAR</tt> in the
directory <tt>FOO</tt>, while <tt>#p"FOO/BAR/"</tt> denotes the
subdirectory <tt>BAR</tt> of the directory <tt>FOO</tt>.</dd>

<dt><a id="d0e9839" name="d0e9839" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>For example, <tt>#p"FOO\\BAR"</tt> denotes the file <tt>BAR</tt> in
the directory <tt>FOO</tt>, while <tt>#p"FOO\\BAR\\"</tt> denotes the
subdirectory <tt>BAR</tt> of the directory <tt>FOO</tt>.</dd>

<dt><a id="d0e9877" name="d0e9877" /><span class="term">Platform
dependent: <a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</span></dt>

<dd>For example, <tt>#p"FOO.BAR"</tt> denotes the file <tt>FOO</tt> in the
directory <tt>BAR</tt>, while <tt>#p"FOO.BAR."</tt> denotes the
subdirectory <tt>BAR</tt> of the directory <tt>FOO</tt>.</dd>
</dl>
</div>

<p>This is especially important for the functions <a href="#dir"
title="Function DIRECTORY"><tt>directory</tt>, <tt>ext:dir</tt>,
<tt>ext:cd</tt>, <tt>ext:make-dir</tt>, <tt>ext:delete-dir</tt></a>.</p>

<div class="table">
<p><a id="d0e9924" name="d0e9924" /><b>Table 19.1. The minimum filename
syntax that may be used portably</b></p>

<table summary="The minimum filename syntax that may be used
 portably" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>pathname</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>xxx</tt></td>
<td>for a file with name <i><tt>xxx</tt></i></td>
</tr>

<tr>
<td><tt>xxx.yy</tt></td>
<td>for a file with name <i><tt>xxx</tt></i> and type
<i><tt>yy</tt></i></td>
</tr>

<tr>
<td><tt>.yy</tt></td>
<td>for a pathname with type <i><tt>yy</tt></i> and no name specified</td>
</tr>
</tbody>
</table>
</div>

<p>Hereby <i><tt>xxx</tt></i> denotes 1 to 8 characters, and
<i><tt>yy</tt></i> denotes 1 to 3 characters, each of which being either
an alphanumeric character or the underscore #\_. Other properties of
pathname syntax vary between operating systems.</p>

<div class="section"><a id="path-components" name="path-components" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="path-components"
name="path-components" />Pathname Components <a
href="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html"
target="_top">[CLHS-19.2.1]</a></h2>
</div>
</div>

<p>When a pathname is to be fully specified (no wildcards), that means
that no <tt>:WILD</tt>, <tt>:WILD-INFERIORS</tt> is allowed, no wildcard
characters are allowed in the strings, and <i><tt>name</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> may not be allowed either.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e10000" name="d0e10000" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>
<div class="variablelist">
<p><b>Pathname components</b></p>

<dl>
<dt><a id="d0e10011" name="d0e10011" /><span
class="term"><i><tt>host</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e10021" name="d0e10021" /><span
class="term"><i><tt>device</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a></dd>

<dt><a id="d0e10034" name="d0e10034" /><span
class="term"><i><tt>directory</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e10039" name="d0e10039" /><b>Table 19.2.
<tt>(<i><tt>startpoint</tt></i> . <i><tt>subdirs</tt></i>)</tt></b></p>

<table summary="(startpoint
 . subdirs)" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>element</th>
<th>values</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><i><tt>startpoint</tt></i></td>
<td><tt>:RELATIVE</tt> | <tt>:ABSOLUTE</tt></td>
</tr>

<tr>
<td><i><tt>subdirs</tt></i></td>
<td><tt>()</tt> | <tt>(<i><tt>subdir</tt></i> .
<i><tt>subdirs</tt></i>)</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:WILD-INFERIORS</tt></td>
<td><tt>**</tt> or <tt>...</tt>, all subdirectories</td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</td>
<td>&nbsp;</td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:PARENT</tt></td>
<td><tt>/</tt> instead of <tt>subdir/</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e10131" name="d0e10131" /><span
class="term"><i><tt>name</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10154" name="d0e10154" /><span
class="term"><i><tt>type</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10177" name="d0e10177" /><span
class="term"><i><tt>version</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (may also be specified as <tt>:WILD</tt> or
<tt>:NEWEST</tt>)</dd>
</dl>
</div>

<p>Constraint: <i><tt>startpoint</tt></i> = <tt>:RELATIVE</tt> only if
<i><tt>device</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>. If the device is specified, the pathname
must be absolute!</p>

<p>An <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> filename is <a
href="#name-type-split">split into name and type</a>.</p>

<p>Case is ignored in the strings on comparison. No case conversions are
performed.</p>

<div class="table">
<p><a id="pathnames-externally-amiga"
name="pathnames-externally-amiga" /><b>Table 19.3. filename
notations</b></p>

<table summary="filename notations" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>External notation:</td>
<td><tt>dev:sub1.typ/sub2.typ/name.typ</tt></td>
</tr>

<tr>
<td>using defaults:</td>
<td><tt>sub1.typ/sub2.typ/name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>sub1.typ/**/sub3.typ/x*.lisp</tt></td>
</tr>

<tr>
<td>or similar.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

<div class="variablelist">
<p><b>Formal specification of the external notation</b></p>

<dl>
<dt><a id="d0e10256" name="d0e10256" /><span class="term">ch
::==</span></dt>

<dd>any character except ':','/' and '*','?'</dd>

<dt><a id="d0e10262" name="d0e10262" /><span class="term">name
::==</span></dt>

<dd>{ch}+</dd>

<dt><a id="d0e10268" name="d0e10268" /><span class="term">device
::==</span></dt>

<dd>
<p><a id="d0e10271" name="d0e10271" />[ &lt;empty&gt; | ':' | name ':'
]</p>

<div class="table">
<p><a id="d0e10274" name="d0e10274" /><b>Table 19.4.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>empty</td>
<td>current device, relative to current directory</td>
</tr>

<tr>
<td>':'</td>
<td>current device, absolute (relative to root for disks)</td>
</tr>

<tr>
<td>name ':'</td>
<td>specified device, absolute (relative to root for disks)</td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</dd>

<dt><a id="d0e10293" name="d0e10293" /><span class="term">subdir
::==</span></dt>

<dd>
<p><a id="d0e10296" name="d0e10296" />[ &lt;empty&gt; | name ]</p>

<div class="table">
<p><a id="d0e10299" name="d0e10299" /><b>Table 19.5.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>empty</td>
<td>parent directory</td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</dd>

<dt><a id="d0e10308" name="d0e10308" /><span class="term">pathname
::==</span></dt>

<dd>device { subdir '/' }* name</dd>
</dl>
</div>

<div class="table">
<p><a id="d0e10314" name="d0e10314" /><b>Table 19.6. Examples</b></p>

<table summary="Examples" border="1">
<colgroup>
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>String</th>
<th>Device</th>
<th>Directory</th>
<th>our pathname</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>'c:foo'</tt></td>
<td>'C'</td>
<td><tt>device-&gt;foo</tt></td>
<td><tt>"c"</tt> (<tt>:ABSOLUTE</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>'c:foo/'</tt></td>
<td>'C'</td>
<td><tt>device-&gt;foo</tt></td>
<td><tt>"c"</tt> (<tt>:ABSOLUTE</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>'c:foo/bar'</tt></td>
<td>'C'</td>
<td><tt>device-&gt;foo-&gt;bar</tt></td>
<td><tt>"c"</tt> (<tt>:ABSOLUTE</tt><tt>"foo" "bar"</tt>)</td>
</tr>

<tr>
<td><tt>'c:/foo'</tt></td>
<td>'C'</td>
<td><tt>device-&gt;up-&gt;foo</tt></td>
<td><tt>"c"</tt> (<tt>:ABSOLUTE</tt><tt>:PARENT</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>'c:'</tt></td>
<td>'C'</td>
<td><tt>device</tt></td>
<td><tt>"c"</tt> (<tt>:ABSOLUTE</tt>)</td>
</tr>

<tr>
<td><tt>:foo</tt></td>
<td>current</td>
<td><tt>device-&gt;root-&gt;foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (<tt>:ABSOLUTE</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>foo</tt></td>
<td>current</td>
<td><tt>device-&gt;foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (<tt>:RELATIVE</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>'/foo'</tt></td>
<td>current</td>
<td><tt>device-&gt;up-&gt;foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>
(<tt>:RELATIVE</tt><tt>:PARENT</tt><tt>"foo"</tt>)</td>
</tr>

<tr>
<td><tt>'//foo/bar'</tt></td>
<td>current</td>
<td><tt>device-&gt;up-&gt;up-&gt;foo-&gt;bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>
(<tt>:RELATIVE</tt><tt>:PARENT</tt><tt>:PARENT</tt><tt>"foo"
"bar"</tt>)</td>
</tr>

<tr>
<td><tt>\</tt></td>
<td>current</td>
<td><tt>device</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (<tt>:RELATIVE</tt>)</td>
</tr>
</tbody>
</table>
</div>

<p>Appending a <tt>/</tt> to a path string that is non-empty and does not
end with <tt>:</tt> or <tt>/</tt> does not change its meaning. This
<tt>/</tt> must be appended before another non-empty component can be
appended. But appending a <tt>/</tt> to a path string that is empty or
ends with <tt>:</tt> or <tt>/</tt> means going up to the parent
directory!</p>

<p>We interpret any path string that is empty or ends with <tt>:</tt> or
<tt>/</tt> as pathname of a directory (with both <i><tt>name</tt></i> and
<i><tt>type</tt></i> being <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>).</p>
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e10562" name="d0e10562" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd>
<div class="variablelist">
<p><b>Pathname components</b></p>

<dl>
<dt><a id="d0e10573" name="d0e10573" /><span
class="term"><i><tt>host</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e10583" name="d0e10583" /><span
class="term"><i><tt>device</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e10593" name="d0e10593" /><span
class="term"><i><tt>directory</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e10598" name="d0e10598" /><b>Table 19.7.
<tt>(<i><tt>startpoint</tt></i> . <i><tt>subdirs</tt></i>)</tt></b></p>

<table summary="(startpoint
 . subdirs)" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>element</th>
<th>values</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><i><tt>startpoint</tt></i></td>
<td><tt>:RELATIVE</tt> | <tt>:ABSOLUTE</tt></td>
</tr>

<tr>
<td><i><tt>subdirs</tt></i></td>
<td><tt>()</tt> | <tt>(<i><tt>subdir</tt></i> .
<i><tt>subdirs</tt></i>)</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:WILD-INFERIORS</tt></td>
<td><tt>**</tt> or <tt>...</tt>, all subdirectories</td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e10677" name="d0e10677" /><span
class="term"><i><tt>name</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10700" name="d0e10700" /><span
class="term"><i><tt>type</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10723" name="d0e10723" /><span
class="term"><i><tt>version</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (may also be specified as <tt>:WILD</tt> or
<tt>:NEWEST</tt>)</dd>
</dl>
</div>

<p>A <a href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a> filename is <a
href="#name-type-split">split into name and type</a>.</p>

<div class="table">
<p><a id="d0e10749" name="d0e10749" /><b>Table 19.8. filename
notations</b></p>

<table summary="filename notations" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>External notation:</td>
<td><tt>server:sub1.typ/sub2.typ/name.typ</tt></td>
</tr>

<tr>
<td>using defaults:</td>
<td><tt>sub1.typ/sub2.typ/name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>sub1.typ/**/sub3.typ/x*.lisp</tt></td>
</tr>

<tr>
<td>or similar.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e10785" name="d0e10785" /><span class="term">Platform
dependent: <a href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a> platforms only.</span></dt>

<dd>
<div class="variablelist">
<p><b>Pathname components</b></p>

<dl>
<dt><a id="d0e10796" name="d0e10796" /><span
class="term"><i><tt>host</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e10806" name="d0e10806" /><span
class="term"><i><tt>device</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <tt>:WILD</tt> or
<tt>A</tt>|...|<tt>Z</tt></dd>

<dt><a id="d0e10825" name="d0e10825" /><span
class="term"><i><tt>directory</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e10830" name="d0e10830" /><b>Table 19.9.
<tt>(<i><tt>startpoint</tt></i> . <i><tt>subdirs</tt></i>)</tt></b></p>

<table summary="(startpoint
 . subdirs)" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>element</th>
<th>values</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><i><tt>startpoint</tt></i></td>
<td><tt>:RELATIVE</tt> | <tt>:ABSOLUTE</tt></td>
</tr>

<tr>
<td><i><tt>subdirs</tt></i></td>
<td><tt>()</tt> | <tt>(<i><tt>subdir</tt></i> .
<i><tt>subdirs</tt></i>)</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:WILD-INFERIORS</tt></td>
<td><tt>**</tt> or <tt>...</tt>, all subdirectories</td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e10909" name="d0e10909" /><span
class="term"><i><tt>name</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10932" name="d0e10932" /><span
class="term"><i><tt>type</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e10955" name="d0e10955" /><span
class="term"><i><tt>version</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (may also be specified as <tt>:WILD</tt> or
<tt>:NEWEST</tt>)</dd>
</dl>
</div>

<p>An <a href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a> filename is <a
href="#name-type-split">split into name and type</a>.</p>

<div class="table">
<p><a id="d0e10981" name="d0e10981" /><b>Table 19.10. filename
notations</b></p>

<table summary="filename notations" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>External notation:</td>
<td><tt>A:\sub1.typ\sub2.typ\name.typ</tt></td>
</tr>

<tr>
<td>using defaults:</td>
<td><tt>\sub1.typ\sub2.typ\name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>*:\sub1.typ\**\sub3.typ\x*.lisp</tt></td>
</tr>

<tr>
<td>or similar.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

<p>Instead of <tt>\</tt> one may use <tt>/</tt>, as usual for DOS
calls.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e11025" name="d0e11025" /><span class="term">Platform
dependent: <a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>
<div class="variablelist">
<p><b>Pathname components</b></p>

<dl>
<dt><a id="d0e11036" name="d0e11036" /><span
class="term"><i><tt>host</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, wildcard characters may occur
but don't act as wildcards</dd>

<dt><a id="d0e11050" name="d0e11050" /><span
class="term"><i><tt>device</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <tt>:WILD</tt> or
<tt>A</tt>|...|<tt>Z</tt></dd>

<dt><a id="d0e11069" name="d0e11069" /><span
class="term"><i><tt>directory</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e11074" name="d0e11074" /><b>Table 19.11.
<tt>(<i><tt>startpoint</tt></i> . <i><tt>subdirs</tt></i>)</tt></b></p>

<table summary="(startpoint
 . subdirs)" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>element</th>
<th>values</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><i><tt>startpoint</tt></i></td>
<td><tt>:RELATIVE</tt> | <tt>:ABSOLUTE</tt></td>
</tr>

<tr>
<td><i><tt>subdirs</tt></i></td>
<td><tt>()</tt> | <tt>(<i><tt>subdir</tt></i> .
<i><tt>subdirs</tt></i>)</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:WILD-INFERIORS</tt></td>
<td><tt>**</tt> or <tt>...</tt>, all subdirectories</td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e11153" name="d0e11153" /><span
class="term"><i><tt>name</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e11176" name="d0e11176" /><span
class="term"><i><tt>type</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt> and <tt>*</tt> (may also be specified as <tt>:WILD</tt>)</dd>

<dt><a id="d0e11199" name="d0e11199" /><span
class="term"><i><tt>version</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (may also be specified as <tt>:WILD</tt> or
<tt>:NEWEST</tt>)</dd>
</dl>
</div>

<p>If <i><tt>host</tt></i> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <i><tt>device</tt></i> must be <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p>A <a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> filename is <a
href="#name-type-split">split into name and type</a>.</p>

<div class="table">
<p><a id="d0e11241" name="d0e11241" /><b>Table 19.12. filename
notations</b></p>

<table summary="filename notations" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>External notation:</td>
<td><tt>A:\sub1.typ\sub2.typ\name.typ</tt></td>
</tr>

<tr>
<td>using defaults:</td>
<td><tt>\sub1.typ\sub2.typ\name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>name.typ</tt></td>
</tr>

<tr>
<td>or</td>
<td><tt>*:\sub1.typ\**\sub3.typ\x*.lisp</tt></td>
</tr>

<tr>
<td>or similar.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

<p>Instead of <tt>\</tt> one may use <tt>/</tt>, as usual for DOS
calls.</p>

<p>If <i><tt>host</tt></i> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and the <i><tt>directory</tt></i>'s
<i><tt>startpoint</tt></i> is not <tt>:ABSOLUTE</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
target="_top"><tt>NAMESTRING</tt></a> <i><tt>pathname</tt></i>))</tt> will
not be the same as <i><tt>pathname</tt></i>.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e11320" name="d0e11320" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>The wildcard characters: <tt>*</tt> matches any sequence of
characters, <tt>?</tt> matches any one character.</dd>
</dl>
</div>

<div class="variablelist"><a id="name-type-split"
name="name-type-split" />
<dl>
<dt><a id="d0e11351" name="d0e11351" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>
<p><a id="d0e11370" name="d0e11370" />A filename is split into name and
type according to the following rule:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e11374" name="d0e11374" />if there is no <tt>.</tt> in the
filename, then the <i><tt>name</tt></i> is everything,
<i><tt>type</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>;</li>

<li><a id="d0e11390" name="d0e11390" />if there is a <tt>.</tt>, then
<i><tt>name</tt></i> is the part before and <i><tt>type</tt></i> the part
after the last dot.</li>
</ul>
</div>


<br />
<br />
<p>Due to this name/type splitting rule, there are pathnames that cannot
result from <a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a>. To get a pathname whose type
contains a dot or whose name contains a dot and whose type is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
target="_top"><tt>MAKE-PATHNAME</tt></a> must be used. Example: <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
target="_top"><tt>MAKE-PATHNAME</tt></a> :name ".profile")</tt>.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e11426" name="d0e11426" /><span class="term">Platform
dependent: <a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</span></dt>

<dd>
<p>RISC OS provides several file systems as standard (ADFS, IDEFS, NetFS,
RamFS, NetPrint) and support for extra file systems (DOSFS, ResourceFS and
DeviceFS).</p>

<p>A module called FileSwitch is at the center of all file system
operation in RISC OS. FileSwitch provides a common core of functions used
by all file systems. It only provides the parts of these services that are
device independent. The device dependent services that control the
hardware are provided by separate modules, which are the actual file
systems. FileSwitch keeps track of active file systems and switches
between them as necessary.</p>

<p>One of the file system modules that RISC OS provides is FileCore. It
takes the normal calls that FileSwitch sends to a file system module, and
converts them to a simpler set of calls to modules that control the
hardware. Unlike FileSwitch it creates a fresh instantiation of itself for
each module that it supports. Using FileCore to build file system modules
imposes a more rigid structure on it, as more of the file system is
predefined.</p>

<p>As well as standard file systems, FileSwitch supports image file
systems. These provide facilities for RISC OS to handle media in foreign
formats, and to support `image files' (or partitions) in those formats.
Rather than accessing the hardware directly they rely on standard RISC OS
file systems to do so. DOSFS is an example of an image file system used to
handle DOS format discs.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e11443" name="d0e11443" /><span
class="term">Terminology</span></dt>

<dd>A pathname may include a file system name, a special field, a media
name (e.g., a disc name), directory name(s), and the name of the object
itself; each of these parts of a pathname is known as an `element' of the
pathname.</dd>

<dt><a id="d0e11449" name="d0e11449" /><span
class="term">Filenames</span></dt>

<dd>
<p>Filename `elements' may be up to ten characters in length on
FileCore-based file systems and on NetFS. These characters may be digits
or letters. FileSwitch makes no distinction between upper and lower case,
although file systems can do so. As a general rule, you should not use
top-bit-set characters in filenames, although some file systems (such as
FileCore-based ones) support them. Other characters may be used provided
they do not have a special significance. Those that do are listed
below:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e11456" name="d0e11456" /><span
class="term"><tt>.</tt></span></dt>

<dd>Separates directory specifications, e.g., <tt>$.fred</tt></dd>

<dt><a id="d0e11465" name="d0e11465" /><span
class="term"><tt>:</tt></span></dt>

<dd>Introduces a drive or disc specification, e.g., <tt>:0</tt>,
<tt>:bigdisc</tt>. It also marks the end of a file system name, e.g.,
<tt>adfs:</tt></dd>

<dt><a id="d0e11480" name="d0e11480" /><span
class="term"><tt>*</tt></span></dt>

<dd>Acts as a `wildcard' to match zero or more characters.</dd>

<dt><a id="d0e11487" name="d0e11487" /><span
class="term"><tt>#</tt></span></dt>

<dd>Acts as a `wildcard' to match any single character.</dd>

<dt><a id="d0e11494" name="d0e11494" /><span
class="term"><tt>$</tt></span></dt>

<dd>is the name of the root directory of the disc.</dd>

<dt><a id="d0e11501" name="d0e11501" /><span
class="term"><tt>&amp;</tt></span></dt>

<dd>is the user root directory (URD)</dd>

<dt><a id="d0e11508" name="d0e11508" /><span
class="term"><tt>@</tt></span></dt>

<dd>is the currently selected directory (CSD)</dd>

<dt><a id="d0e11515" name="d0e11515" /><span
class="term"><tt>^</tt></span></dt>

<dd>is the `parent' directory</dd>

<dt><a id="d0e11522" name="d0e11522" /><span
class="term"><tt>%</tt></span></dt>

<dd>is the currently selected library (CSL)</dd>

<dt><a id="d0e11529" name="d0e11529" /><span
class="term"><tt>\</tt></span></dt>

<dd>is the previously selected directory (PSD)</dd>
</dl>
</div>
</dd>

<dt><a id="d0e11536" name="d0e11536" /><span
class="term">Directories</span></dt>

<dd>
<p>The root directory, <tt>$</tt>, forms the top of the directory
hierarchy of the media which contains the CSD. <tt>$</tt> does not have a
parent directory, trying to access its parent will just access <tt>$</tt>.
Each directory name is separated by a <tt>.</tt> character. For
example:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e11555" name="d0e11555" /><tt>$.Documents.Memos</tt></li>

<li><a id="d0e11560" name="d0e11560" /><tt>%.cc</tt></li>
</ul>
</div>
</dd>

<dt><a id="d0e11564" name="d0e11564" /><span class="term">File
Systems</span></dt>

<dd>
<p>Files may also be accessed on file systems other than the current one
by prefixing the filename with a file system specification. A file system
name may appear between <tt>-</tt> characters, or suffixed by a
<tt>:</tt>, though the latter is advised since <tt>-</tt> can also be used
to introduce a parameter on a command line, or as part of a file name. For
example:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e11580" name="d0e11580" /><tt>-net-$.SystemMesg</tt></li>

<li><a id="d0e11585" name="d0e11585" /><tt>adfs:%.aasm</tt></li>
</ul>
</div>
</dd>

<dt><a id="d0e11589" name="d0e11589" /><span class="term">Special
Fields</span></dt>

<dd>
<p>Special fields are used to supply more information to the file system
than you can using standard path names; for example NetFS and NetPrint use
them to specify server addresses or names. They are introduced by a
<tt>#</tt> character; a variety of syntaxes are possible:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e11599" name="d0e11599" />
<tt>net#MJHardy::disc1.mike</tt></li>

<li><a id="d0e11604" name="d0e11604" /> <tt>#MJHardy::disc1.mike</tt></li>

<li><a id="d0e11609" name="d0e11609" />
<tt>-net#MJHardy-:disc1.mike</tt></li>

<li><a id="d0e11614" name="d0e11614" />
<tt>-#MJHardy-:disc1.mike</tt></li>
</ul>
</div>

<p>The special fields here are all MJHardy, and give the name of the
fileserver to use. Special fields may use any character except for control
characters, double quote '"', solidus '|' and space. If a special field
contains a hyphen you may only use the first two syntaxes given above.</p>
</dd>

<dt><a id="d0e11621" name="d0e11621" /><span
class="term"><tt>File$Path</tt> and <tt>Run$Path</tt></span></dt>

<dd>
<p>These two special variables control exactly where a file will be looked
for, according to the operation being performed on it.</p>

<div class="table">
<p><a id="d0e11631" name="d0e11631" /><b>Table 19.13.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>name</th>
<th>purpose</th>
</tr>
</thead>

<tbody>
<tr>
<td>File$Path</td>
<td>for read operations</td>
</tr>

<tr>
<td>Run$Path</td>
<td>for execute operations</td>
</tr>
</tbody>
</table>
</div>

<p>The contents of each variable should expand to a list or prefixes,
separated by commas. When a read operation is performed then the prefixes
in <tt>File$Path</tt> are used in the order in which they are listed. The
first object that matches is used, whether it be a file or directory.
Similarly any execute operation uses the prefixes in Run$Path. These
search paths are only used when the pathname does not contain an explicit
file system reference, e.g., executing <tt>adfs:file</tt> will not use
<tt>Run$Path</tt>.</p>
</dd>

<dt><a id="d0e11662" name="d0e11662" /><span class="term">Other path
variables</span></dt>

<dd>
<p><a id="d0e11665" name="d0e11665" />You can set up other path variables
and use them as pseudo file systems. For example if you typed:</p>

<div class="literallayout">
<b><tt>*Set&nbsp;Source$Path&nbsp;adfs:$.src.,adfs:$.public.src.</tt></b></div>

, you could then refer to the pseudo file system as <tt>Source:</tt> or
(less preferable) as <tt>-Source-</tt>. These path variables work in the
same was as <tt>File$Path</tt> and <tt>Run$Path</tt>.
<br />
<br />
<p>NOTE: Path variables are not implemented in this version of <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>. A workaround
for this is to use "&lt;Foo$Path&gt;" instead of "Foo:" until they are
made available.</p>
</dd>

<dt><a id="pathnames-externally-acorn"
name="pathnames-externally-acorn" /><span class="term">from Lisp-string
notation to internal representation</span></dt>

<dd>
<p><span class="emphasis"><i>No</i></span> swapping. <tt>foo.lisp</tt>
means file type <tt>lisp</tt> and file name <tt>foo</tt>. This is
pseudo-BNF:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e11708" name="d0e11708" /><span class="term">legal character
::==</span></dt>

<dd>any ISO latin-1 graphic character &ge; ' ' except '.' ':' '*' '#' '$'
'&amp;' '@' '^' '%' '\' '?'</dd>

<dt><a id="d0e11714" name="d0e11714" /><span class="term">extended legal
character ::==</span></dt>

<dd>any ISO latin-1 graphic character &ge; ' ' except ':' '"' '|'</dd>

<dt><a id="d0e11720" name="d0e11720" /><span class="term">legal-wild char
::==</span></dt>

<dd>legal char | '*' | '#' | '?'</dd>

<dt><a id="d0e11726" name="d0e11726" /><span class="term">host
::==</span></dt>

<dd>'-' { extended legal char except '-' }+ '-' | { extended legal char
except '-' } { extended legal char }* ':' | empty</dd>

<dt><a id="d0e11732" name="d0e11732" /><span class="term">device
::==</span></dt>

<dd>':' { legal char }+ '.' | empty</dd>

<dt><a id="d0e11738" name="d0e11738" /><span class="term">directory
::==</span></dt>

<dd>
<p><a id="d0e11741" name="d0e11741" /> { '$' | '&amp;' | '@' | '%' | '\' }
'.' { subdirectory }* | { subdirectory }+ | empty</p>

<div class="table">
<p><a id="d0e11744" name="d0e11744" /><b>Table 19.14.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>'$' -&gt;</td>
<td><tt>:ABSOLUTE</tt><tt>:ROOT</tt></td>
</tr>

<tr>
<td>'&amp;' -&gt;</td>
<td><tt>:ABSOLUTE</tt><tt>:HOME</tt></td>
</tr>

<tr>
<td>'@' -&gt;</td>
<td><tt>:ABSOLUTE</tt><tt>:CURRENT</tt></td>
</tr>

<tr>
<td>'%' -&gt;</td>
<td><tt>:ABSOLUTE</tt><tt>:LIBRARY</tt></td>
</tr>

<tr>
<td>'\' -&gt;</td>
<td><tt>:ABSOLUTE</tt><tt>:PRECIOUS</tt></td>
</tr>

<tr>
<td>else</td>
<td><tt>:RELATIVE</tt></td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</dd>

<dt><a id="d0e11794" name="d0e11794" /><span class="term">subdirectory
::==</span></dt>

<dd>
<p><a id="d0e11797" name="d0e11797" />{ '^' | { legal-wild char }+ }
'.'</p>

<div class="table">
<p><a id="d0e11800" name="d0e11800" /><b>Table 19.15.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>'^' -&gt;</td>
<td><tt>:PARENT</tt></td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</dd>

<dt><a id="d0e11810" name="d0e11810" /><span class="term">filename
::==</span></dt>

<dd>{ { legal-wild char }+ | empty }</dd>

<dt><a id="d0e11816" name="d0e11816" /><span class="term">filetype
::==</span></dt>

<dd>{ '.' { legal-wild char }+ | empty }</dd>

<dt><a id="d0e11822" name="d0e11822" /><span class="term">pathname
::==</span></dt>

<dd>host device directory filename filetype</dd>
</dl>
</div>

<div class="table">
<p><a id="d0e11828" name="d0e11828" /><b>Table 19.16. Examples</b></p>

<table summary="Examples" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>String</th>
<th>Hostname</th>
<th>Device</th>
<th>Directory</th>
<th>Name</th>
<th>Type</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>-net-$.SystemMesg</tt></td>
<td><tt>net</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>SystemMesg</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>net#MJHardy::disc1.mike</tt></td>
<td><tt>net#MJHardy</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>mike</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>#MJHardy::disc1.mike</tt></td>
<td><tt>#MJHardy</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>mike</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>-net#MJHardy-:disc1.mike</tt></td>
<td><tt>net#MJHardy</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>mike</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>-#MJHardy-:disc1.mike</tt></td>
<td><tt>#MJHardy</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>mike</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>@.foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:CURRENT</tt>)</td>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE)</td>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>^.</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE <tt>:PARENT</tt>)</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>@.^.</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:CURRENT</tt> <tt>:PARENT</tt>)</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>foo.bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE)</td>
<td><tt>foo</tt></td>
<td><tt>bar</tt></td>
</tr>

<tr>
<td><tt>foo.bar.baz</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE "foo")</td>
<td><tt>bar</tt></td>
<td><tt>baz</tt></td>
</tr>

<tr>
<td><tt>foo.bar.</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE "foo" "bar")</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>foo.@.</tt></td>
<td>illegal</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e12176" name="d0e12176" /><span class="term">From internal
representation to RISCOS string</span></dt>

<dd>
<p>with swapping <span class="emphasis"><i>only</i></span> of name/type
components.</p>

<div class="table">
<p><a id="d0e12185" name="d0e12185" /><b>Table 19.17.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>Hostname</th>
<th>Device</th>
<th>Directory</th>
<th>Name</th>
<th>Type</th>
<th>RISCOS String</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>net</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>net::disc1.$.foo</tt></td>
</tr>

<tr>
<td><tt>net#MJ</tt></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt> "foo")</td>
<td><tt>bar</tt></td>
<td><tt>baz</tt></td>
<td><tt>net#MJ::disc1.$.foo.baz.bar</tt></td>
</tr>

<tr>
<td><tt>adfs</tt></td>
<td><tt>4</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt> "foo" "bar")</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>adfs::4.$.foo.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt> "foo")</td>
<td><tt>bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>:disc1.$.foo.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:ABSOLUTE <tt>:CURRENT</tt>)</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td>illegal here</td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>disc1</tt></td>
<td><tt>(</tt>:RELATIVE)</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>:disc1.</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>disc1</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>:disc1.</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:ROOT</tt>)</td>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>$.foo</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:CURRENT</tt>)</td>
<td><tt>foo</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>@.foo</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE)</td>
<td><tt>foo</tt></td>
<td><tt>bar</tt></td>
<td><tt>bar.foo</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE "foo")</td>
<td><tt>bar</tt></td>
<td><tt>baz</tt></td>
<td><tt>foo.baz.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:LIBRARY</tt>)</td>
<td><tt>bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>%.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:ABSOLUTE <tt>:LIBRARY</tt> "foo")</td>
<td><tt>bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>%.foo.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE)</td>
<td><tt>foo</tt></td>
<td><tt>bar</tt></td>
<td><tt>bar.foo</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE "foo")</td>
<td><tt>bar</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>foo.bar</tt></td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>(</tt>:RELATIVE "foo")</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>bar</tt></td>
<td>illegal here</td>
</tr>
</tbody>
</table>
</div>

<p>That is, the RISCOS string is the flattening-concatenation of</p>

<pre class="programlisting">
  (append
    (if (null hostname) "" (append hostname ":"))
    (if (null device) "" (append ":" device "."))
    (case (pop directory)
      (:absolute (case (pop directory)
                         (:root "$.")
                         (:home "&amp;.")
                         (:current "@.")
                         (:library "%.")
                         (:previous "\\.")))
      (:relative ""))
    (mapcar (lambda (subdir) (append subdir ".")) directory)
    (if (null name)
        (if (null type) "" (error "type with name illegal here"))
        (if (null type)
            name
            (append type "." name))))
</pre>
</dd>

<dt><a id="d0e12620" name="d0e12620" /><span class="term">internal
representation</span></dt>

<dd>
<div class="variablelist">
<p><b>Pathname components</b></p>

<dl>
<dt><a id="d0e12627" name="d0e12627" /><span
class="term"><i><tt>host</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a></dd>

<dt><a id="d0e12640" name="d0e12640" /><span
class="term"><i><tt>device</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a></dd>

<dt><a id="d0e12653" name="d0e12653" /><span
class="term"><i><tt>directory</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e12658" name="d0e12658" /><b>Table 19.18.
<tt>(<i><tt>startpoint</tt></i> . <i><tt>subdirs</tt></i>)</tt></b></p>

<table summary="(startpoint
 . subdirs)" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>element</th>
<th>values</th>
</tr>
</thead>

<tbody>
<tr>
<td><i><tt>startpoint</tt></i></td>
<td><tt>:RELATIVE</tt> | <tt>:ABSOLUTE</tt><i><tt>anchor</tt></i></td>
</tr>

<tr>
<td><i><tt>anchor</tt></i></td>
<td><tt>:ROOT</tt> | <tt>:HOME</tt> | <tt>:CURRENT</tt> |
<tt>:LIBRARY</tt> | <tt>:PRECIOUS</tt></td>
</tr>

<tr>
<td><i><tt>subdirs</tt></i></td>
<td><tt>()</tt> | <tt>(<i><tt>subdir</tt></i> .
<i><tt>subdirs</tt></i>)</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><tt>:PARENT</tt></td>
</tr>

<tr>
<td><i><tt>subdir</tt></i></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt>,<tt>#</tt> and <tt>*</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e12747" name="d0e12747" /><span
class="term"><i><tt>name</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, may contain wildcard characters
<tt>?</tt>,<tt>#</tt> and <tt>*</tt> (may also be specified as
<tt>:WILD</tt>)</dd>

<dt><a id="d0e12773" name="d0e12773" /><span
class="term"><i><tt>type</tt></i></span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>, may contain wildcard characters
<tt>?</tt>,<tt>#</tt> and <tt>*</tt> (may also be specified as
<tt>:WILD</tt>)</dd>

<dt><a id="d0e12799" name="d0e12799" /><span
class="term"><i><tt>version</tt></i></span></dt>

<dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (may also be specified as <tt>:WILD</tt> or
<tt>:NEWEST</tt>)</dd>
</dl>
</div>

<p>Constraint: <i><tt>startpoint</tt></i> is not <tt>:ABSOLUTE</tt>
<tt>:ROOT</tt> only if device is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>. If the device is specified, the pathname
must be <tt>:ABSOLUTE</tt> <tt>:ROOT</tt>.</p>

<p>The wildcard characters: <tt>*</tt> matches any sequence of characters,
<tt>'#'</tt> or <tt>?</tt> matches any one character.</p>

<p>Due to the name/type swapping rule, there are pathnames that cannot
result from <a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a>. To get a pathname whose type
is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
target="_top"><tt>MAKE-PATHNAME</tt></a> must be used. Example: <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
target="_top"><tt>MAKE-PATHNAME</tt></a> :directory "!Clisp." :name
"README")</tt>.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="path-external-notation"
name="path-external-notation" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="path-external-notation"
name="path-external-notation" />External notation.</h2>
</div>
</div>

<p>External notation of pathnames (cf. <a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
target="_top"><tt>NAMESTRING</tt></a>), of course without spaces,
[,],{,}:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e12885" name="d0e12885" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a> platforms only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e12893" name="d0e12893" /><b>Table 19.19.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>[ [drivespec] : ]</td>
<td>a letter
<tt>*</tt>|<tt>a</tt>|...|<tt>z</tt>|<tt>A</tt>|...|<tt>Z</tt></td>
</tr>

<tr>
<td>{ name [. type] \ }</td>
<td>each one a subdirectory, <tt>\</tt> may be replaced by <tt>/</tt></td>
</tr>

<tr>
<td>[ name [. type] ]</td>
<td>filename with type (extension)</td>
</tr>
</tbody>
</table>
</div>

<p>Name and type may be character sequences of any <a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> (consisting of alphanumeric characters
and <tt>-</tt>, <tt>_</tt>). They are shortened to 8 (respectively 3)
characters and converted to upper case. A single <tt>*</tt> is allowed for
<tt>:WILD</tt>.</p>
</dd>

<dt><a id="d0e12951" name="d0e12951" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>see <a href="#pathnames-externally-amiga"
title="Table 19.3. filename notations">above</a>.</dd>

<dt><a id="d0e12966" name="d0e12966" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e12974" name="d0e12974" /><b>Table 19.20.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>[ <tt>/</tt> ]</td>
<td><tt>/</tt> denotes absolute pathnames</td>
</tr>

<tr>
<td>{ <i><tt>name</tt></i><tt>/</tt> }</td>
<td>each one a subdirectory</td>
</tr>

<tr>
<td>[ <i><tt>name</tt></i> [<tt>.</tt><i><tt>type</tt></i>] ]</td>
<td>filename with type (extension)</td>
</tr>
</tbody>
</table>
</div>

<p>Name and type may be character sequences of any <a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> (consisting of printing ASCII
characters, except <tt>/</tt>).</p>
</dd>

<dt><a id="d0e13022" name="d0e13022" /><span class="term">Platform
dependent: <a href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e13034" name="d0e13034" /><b>Table 19.21.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<tbody>
<tr>
<td>[ [<i><tt>drivespec</tt></i>] : ]</td>
<td>a letter
<tt>*</tt>|<tt>a</tt>|...|<tt>z</tt>|<tt>A</tt>|...|<tt>Z</tt></td>
</tr>

<tr>
<td>{ <i><tt>name</tt></i> [. <i><tt>type</tt></i>] \ }</td>
<td>each one a subdirectory, <tt>\</tt> may be replaced by <tt>/</tt></td>
</tr>

<tr>
<td>[ <i><tt>name</tt></i> [. <i><tt>type</tt></i>] ]</td>
<td>filename with type (extension)</td>
</tr>
</tbody>
</table>
</div>

<p>Name and type may be character sequences of any <a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> (consisting of printing ASCII
characters, except <tt>/</tt>, <tt>\</tt>, <tt>:</tt>).</p>
</dd>

<dt><a id="d0e13104" name="d0e13104" /><span class="term">Platform
dependent: <a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</span></dt>

<dd>see <a href="#pathnames-externally-acorn">above</a>.</dd>
</dl>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
target="_top"><tt>NAMESTRING</tt></a> has an optional flag argument:
<tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
target="_top"><tt>NAMESTRING</tt></a> <i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>)</tt> returns an external notation suitable
for passing to the operating system or other programs.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e13139" name="d0e13139" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>The function <a
href="http://www.lisp.org/HyperSpec/Body/fun_user-homedir-pathname.html"
target="_top"><tt>USER-HOMEDIR-PATHNAME</tt></a> is not implemented.</dd>

<dt><a id="d0e13162" name="d0e13162" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms
only.</span></dt>

<dd>
<p><a id="d0e13173" name="d0e13173" />If you really need that function,
you might define it like this:</p>

<pre class="programlisting">
(defun user-homedir-pathname (&amp;optional host)
  (declare (ignore host))
  (or (system::getenv "HOME") "\\"))
</pre>


<br />
<br />
</dd>
</dl>
</div>
</div>

<div class="section"><a id="log-path" name="log-path" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="log-path"
name="log-path" />Logical Pathnames <a
href="http://www.lisp.org/HyperSpec/Body/sec_19-3.html"
target="_top">[CLHS-19.3]</a></h2>
</div>
</div>

<p>When the argument of the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html"
target="_top"><tt>TRANSLATE-LOGICAL-PATHNAME</tt></a> is a string, it is
interpreted as a logical pathname string.</p>
</div>

<div class="section"><a id="filename-dict" name="filename-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="filename-dict"
name="filename-dict" />The Filenames Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html"
target="_top">[CLHS-19.4]</a></h2>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html"
target="_top"><tt>PATHNAME</tt></a> always returns a physical
pathname.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html"
target="_top"><tt>PATHNAME-MATCH-P</tt></a> does not interpret missing
components as wild.</p>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html"
target="_top"><tt>TRANSLATE-PATHNAME</tt></a> has two additional keywords:
<tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html"
target="_top"><tt>TRANSLATE-PATHNAME</tt></a> <i><tt>source</tt></i>
<i><tt>from-wildname</tt></i> <i><tt>to-wildname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:ALL</tt>
<tt>:MERGE</tt>)</tt></p>

<p>If <tt>:ALL</tt> is specified and non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, a list of all resulting pathnames,
corresponding to all matches of <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html"
target="_top"><tt>PATHNAME-MATCH-P</tt></a> <i><tt>source</tt></i>
<i><tt>from-wildname</tt></i>)</tt>, is returned. If <tt>:MERGE</tt> is
specified and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, unspecified pieces of
<i><tt>to-pathname</tt></i> are not replaced by corresponding pieces of
<i><tt>source</tt></i>.</p>

<div class="section"><a id="parsename" name="parsename" />
<div class="titlepage">
<div>
<h3 class="title"><a id="parsename" name="parsename" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a></h3>
</div>
</div>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
target="_top"><tt>PARSE-NAMESTRING</tt></a> <i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>host</tt></i>
<i><tt>defaults</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <i><tt>start</tt></i>
<i><tt>end</tt></i> <i><tt>junk-allowed</tt></i>)</tt> returns a logical
pathname only if <i><tt>host</tt></i> is a <a
href="http://www.lisp.org/HyperSpec/Body/glo_l.html#logical_host"
target="_top">logical host</a> or <i><tt>host</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and <i><tt>defaults</tt></i> is a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
target="_top"><tt>LOGICAL-PATHNAME</tt></a>. To construct a logical
pathname from a string, the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html"
target="_top"><tt>LOGICAL-PATHNAME</tt></a> can be used.</p>

<p>The ANSI-mandated behavior of recognizing logical pathnames when the
<i><tt>string</tt></i> begins with some alphanumeric characters followed
by a colon (#\:) is very confusing (cf. <tt>"c:/autoexec.bat"</tt>,
<tt>"home:.clisprc"</tt> and <tt>"prep:/pub/gnu"</tt>) and therefore
disabled by default. To enable the ANSI standard behavior, you should set
<a href="#parsename"
title="Function PARSE-NAMESTRING"><tt>CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a>
to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>
</div>

<div class="section"><a id="pathmerge" name="pathmerge" />
<div class="titlepage">
<div>
<h3 class="title"><a id="pathmerge" name="pathmerge" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a></h3>
</div>
</div>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> <i><tt>pathname</tt></i>
[<i><tt>default-pathname</tt></i>])</tt> returns a logical pathname only
if <i><tt>default-pathname</tt></i> is a logical pathname. To construct a
logical pathname from a string, the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html"
target="_top"><tt>LOGICAL-PATHNAME</tt></a> can be used.</p>

<p>When both <i><tt>pathname</tt></i> and <i><tt>default-pathname</tt></i>
are relative pathnames, the behavior depends on <a href="#pathmerge"
title="Function MERGE-PATHNAMES"><tt>CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>:
when it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, then <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> retains its traditional behavior: <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> #p"x/" #p"y/")</tt> evaluates
to <tt>#p"x/"</tt></p>

<p><span class="emphasis"><i>Rationale</i></span>: <a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> is used to specify default
components for pathnames, so there is some analogy between <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> a b)</tt> and <tt>(or a
b)</tt>. Obviously putting in the same default a second time should do the
same as putting it in once: <tt>(or a b b)</tt> is the same as <tt>(or a
b)</tt>, so <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> a b) b)</tt> should be the same
as <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> a b)</tt>.</p>

<p>(This question actually matters because in <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> there is
no distinction between &ldquo;pathnames with defaults merged-in&rdquo; and
&ldquo;pathnames with defaults not yet applied&rdquo;.)</p>

<p>Now, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> '#p"x/" '#p"y/") '#p"y/")</tt>
and <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> '#p"x/" '#p"y/")</tt> are <a
href="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
target="_top"><tt>EQUAL</tt></a> in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> (when <a href="#pathmerge"
title="Function MERGE-PATHNAMES"><tt>CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>
is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>), but not in implementations that strictly
follow the [<a href="#ansi-cl">ANSI CL standard</a>] spec. In fact, the
above twice-default = once-default rule holds for all pathnames in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>.</p>

<p>When <a href="#pathmerge"
title="Function MERGE-PATHNAMES"><tt>CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>
is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the normal [<a href="#ansi-cl">ANSI CL
standard</a>] behavior is exhibited: <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
target="_top"><tt>MERGE-PATHNAMES</tt></a> #p"x/" #p"y/")</tt> evaluates
to <tt>#p"y/x/"</tt></p>

<p>The rationale is that &ldquo;merge&rdquo; is <span
class="emphasis"><i>merge</i></span> and not <span
class="emphasis"><i>or</i></span>.</p>
</div>

<div class="section"><a id="load-lpt" name="load-lpt" />
<div class="titlepage">
<div>
<h3 class="title"><a id="load-lpt" name="load-lpt" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
target="_top"><tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a></h3>
</div>
</div>

<p>When the <i><tt>host</tt></i> argument to <a
href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
target="_top"><tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a> is not a
defined logical host yet, we proceed as follows:</p>

<div class="orderedlist">
<ol type="1">
<li><a id="d0e13566" name="d0e13566" />If both environment variables
<tt>LOGICAL_HOST_<i><tt>host</tt></i>_FROM</tt> and
<tt>LOGICAL_HOST_<i><tt>host</tt></i>_TO</tt> exist, then they define the
map of the <i><tt>host</tt></i>.</li>

<li><a id="d0e13584" name="d0e13584" />If the environment variable
<tt>LOGICAL_HOST_<i><tt>host</tt></i></tt> exists, its value is read from,
and the result is passed to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
target="_top"><tt>LOGICAL-PATHNAME-TRANSLATIONS</tt></a>)</tt>.</li>

<li><a id="d0e13603" name="d0e13603" />Variable <a href="#load-lpt"
title="Function LOAD-LOGICAL-PATHNAME-TRANSLATIONS"><tt>CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</tt></a>
is consulted. Its value should be a list of files and/or directories,
which are searched for in the <a
href="#load-paths"><tt>CUSTOM:*LOAD-PATHS*</tt></a>, just like for <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a>. When the element is a file, it is <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> from, <a
href="http://www.franz.com/support/documentation/6.0/doc/pathnames.htm#load-logical-pathname-translations-2"
 target="_top">Allegro CL-style</a>, odd objects being host names and even
object being their <a
href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
target="_top"><tt>LOGICAL-PATHNAME-TRANSLATIONS</tt></a>. When the element
is a directory, a file, named <tt><i><tt>host</tt></i></tt> or
<tt><i><tt>host</tt></i>.host</tt>, in that directory, is <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> from once, <a
href="http://cvs2.cons.org/ftp-area/cmucl/doc/cmu-user/extensions.html#logical-pathnames"
 target="_top">CMUCL-style</a>, the object read being the <a
href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
target="_top"><tt>LOGICAL-PATHNAME-TRANSLATIONS</tt></a> of the
<i><tt>host</tt></i>.</li>
</ol>
</div>


<br />
<br />
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="files" name="files" />Chapter 20. Files
[CLHS-20]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#file-dict">The Files Dictionary [CLHS-20.2]</a></dt>

<dd>
<dl>
<dt><a href="#dir">Function <tt>DIRECTORY</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="file-dict" name="file-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="file-dict"
name="file-dict" />The Files Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html"
target="_top">[CLHS-20.2]</a></h2>
</div>
</div>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html"
target="_top"><tt>RENAME-FILE</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html"
target="_top"><tt>RENAME-FILE</tt></a> always returns a non-logical
pathname as its first value.</p>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
target="_top"><tt>PROBE-FILE</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
target="_top"><tt>PROBE-FILE</tt></a> cannot be used to check whether a
directory exists. Use the function <a
href="#probe-dir"><tt>EXT:PROBE-DIRECTORY</tt></a> or the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
target="_top"><tt>DIRECTORY</tt></a> for this purpose.</p>

<p><b><a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html"
target="_top"><tt>FILE-AUTHOR</tt></a>.&nbsp;</b> <a
href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html"
target="_top"><tt>FILE-AUTHOR</tt></a> always returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, because the operating systems <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is ported to
do not store a file's author in the file system. Some operating systems,
such as Unix, have the notion of a file's owner, and some other <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a>
implementations return the user name of the file owner. <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> does not do
this, because <span class="emphasis"><i>owner</i></span> and <span
class="emphasis"><i>author</i></span> are not the same; in particular,
authorship is preserved by copying, while ownership is not.</p>

<p><a id="probe-dir" name="probe-dir" /><b><a
href="#probe-dir"><tt>EXT:PROBE-DIRECTORY</tt></a>.&nbsp;</b> <tt>(<a
href="#probe-dir"><tt>EXT:PROBE-DIRECTORY</tt></a>
<i><tt>pathname</tt></i>)</tt> tests whether <i><tt>pathname</tt></i>
exists and is a directory. It will, unlike <a
href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
target="_top"><tt>PROBE-FILE</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_truename.html"
target="_top"><tt>TRUENAME</tt></a>, not signal an error if the parent
directory of <i><tt>pathname</tt></i> does not exist.</p>

<div class="section"><a id="dir" name="dir" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dir" name="dir" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
target="_top"><tt>DIRECTORY</tt></a></h3>
</div>
</div>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
target="_top"><tt>DIRECTORY</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :full :circle)</tt> can run in two
modes:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e13778" name="d0e13778" />If <i><tt>pathname</tt></i>
contains no name or type component, a list of all matching directories is
produced.</li>

<li><a id="d0e13784" name="d0e13784" />Otherwise a list of all matching
files is returned. If the <tt>:full</tt> argument is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, this contains additional information: for
each matching file you get a list of at least four elements
<tt>(<i><tt>file-pathname</tt></i> <i><tt>file-truename</tt></i>
<i><tt>file-write-date-as-decoded-time</tt></i>
<i><tt>file-length</tt></i>)</tt>.</li>
</ul>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e13813" name="d0e13813" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd>If the <tt>:circle</tt> argument is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the function avoids endless loops that may
result from symbolic links.</dd>
</dl>
</div>


<br />
<br />
<p><b><tt>ext:dir</tt>.&nbsp;</b> <tt>(</tt>ext:dir <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>pathname</tt></i>) is like
<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
target="_top"><tt>DIRECTORY</tt></a>, but displays the pathnames instead
of returning them. <tt>(ext:dir)</tt> shows the contents of the current
directory.</p>

<div class="variablelist"><a id="cd" name="cd" />
<p><b><a href="#cd"><tt>EXT:CD</tt></a></b></p>

<dl>
<dt><a id="d0e13863" name="d0e13863" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd><tt>(<a href="#cd"><tt>EXT:CD</tt></a>
[<i><tt>pathname</tt></i>])</tt> manages the current directory.</dd>

<dt><a id="d0e13887" name="d0e13887" /><span class="term">Platform
dependent: <a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</span></dt>

<dd><tt>(<a href="#cd"><tt>EXT:CD</tt></a>
[<i><tt>pathname</tt></i>])</tt> manages the current host, current device
and the current directory.</dd>

<dt><a id="d0e13907" name="d0e13907" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd><tt>(<a href="#cd"><tt>EXT:CD</tt></a>
[<i><tt>pathname</tt></i>])</tt> manages the current device and the
current directory.</dd>
</dl>
</div>

<p><b><a href="#cd"><tt>EXT:CD</tt></a>.&nbsp;</b> <tt>(<a
href="#cd"><tt>EXT:CD</tt></a> <i><tt>pathname</tt></i>)</tt> sets it,
<tt>(<a href="#cd"><tt>EXT:CD</tt></a>)</tt> returns it.</p>

<p><b><tt>ext:default-directory</tt>.&nbsp;</b>
<tt>(</tt>ext:default-directory) is equivalent to <tt>(<a
href="#cd"><tt>EXT:CD</tt></a>)</tt>. <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (<tt>ext:default-directory</tt>)
<i><tt>pathname</tt></i>)</tt> is equivalent to <tt>(<a
href="#cd"><tt>EXT:CD</tt></a> <i><tt>pathname</tt></i>)</tt>, except for
the return value.</p>

<p><b><tt>ext:make-dir</tt>.&nbsp;</b> <tt>(</tt>ext:make-dir
<i><tt>directory-pathname</tt></i>) creates a new subdirectory.</p>

<p><b><tt>ext:delete-dir</tt>.&nbsp;</b> <tt>(</tt>ext:delete-dir
<i><tt>directory-pathname</tt></i>) removes an (empty) subdirectory.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="streams" name="streams" />Chapter 21. Streams
[CLHS-21]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#streams-interactive">Interactive Streams
[CLHS-21.1.1.1.3]</a></dt>

<dt><a href="#terminal">Terminal interaction.</a></dt>

<dt><a href="#stream-dict">The Streams Dictionary [CLHS-21.2.]</a></dt>

<dd>
<dl>
<dt><a href="#stream-eltype">Function
<tt>STREAM-ELEMENT-TYPE</tt></a></dt>

<dt><a href="#bin-input">Binary input, <tt>READ-BYTE</tt>,
<tt>EXT:READ-INTEGER</tt> &amp; <tt>EXT:READ-FLOAT</tt></a></dt>

<dt><a href="#bin-output">Binary output, <tt>WRITE-BYTE</tt>,
<tt>EXT:WRITE-INTEGER</tt> &amp; <tt>EXT:WRITE-FLOAT</tt></a></dt>

<dt><a href="#read-seq">Function <tt>READ-SEQUENCE</tt></a></dt>

<dt><a href="#write-seq">Function <tt>WRITE-SEQUENCE</tt></a></dt>

<dt><a href="#file-pos">Function <tt>FILE-POSITION</tt></a></dt>

<dt><a href="#open">Function <tt>OPEN</tt></a></dt>

<dt><a href="#close">Function <tt>CLOSE</tt></a></dt>

<dt><a href="#broadcast-stream">Class <tt>BROADCAST-STREAM</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="streams-interactive"
name="streams-interactive" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="streams-interactive"
name="streams-interactive" />Interactive Streams <a
href="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html"
target="_top">[CLHS-21.1.1.1.3]</a></h2>
</div>
</div>

<p>Interactive streams are those whose next input might depend on a prompt
one might output.</p>
</div>

<div class="section"><a id="terminal" name="terminal" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="terminal"
name="terminal" />Terminal interaction.</h2>
</div>
</div>

<div class="variablelist">
<p><b><a href="http://www.gnu.org" target="_top">GNU</a> <a
href="ftp://ftp.gnu.org/gnu/readline/" target="_top">readline</a></b></p>

<dl>
<dt><a id="d0e14050" name="d0e14050" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms only,
and only in <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
built <span class="strong"><i>without</i></span> compile-time flag <span
class="strong"><i><tt>NO_READLINE</tt></i></span>.</span></dt>

<dd>Input through <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> uses the <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="ftp://ftp.gnu.org/gnu/readline/" target="_top">readline</a> library.
Arrow keys can be used to move within the input history. The Tab key
completes the symbol's name that is being typed. See <a
href="clreadline.html" target="_top">clreadline.html</a> or <a
href="clreadline.dvi" target="_top">clreadline.dvi</a> for a complete
description of the key bindings. The <a href="http://www.gnu.org"
target="_top">GNU</a> <a href="ftp://ftp.gnu.org/gnu/readline/"
target="_top">readline</a> library is not used if standard input and
standard output do not both refer to the same terminal.</dd>
</dl>
</div>

<div class="variablelist">
<p><b><a href="#terminal"
title="Terminal interaction."><tt>EXT:WITH-KEYBOARD</tt></a></b></p>

<dl>
<dt><a id="d0e14108" name="d0e14108" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>
<p><a id="d0e14135" name="d0e14135" /><a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> is not the only stream that
communicates directly with the user: During execution of the body of a
<tt>(<a href="#terminal"
title="Terminal interaction."><tt>EXT:WITH-KEYBOARD</tt></a> .
<i><tt>body</tt></i>)</tt> form, <span class="strong"><i><a
href="#terminal"
title="Terminal interaction."><tt>EXT:*KEYBOARD-INPUT*</tt></a></i></span>
is the stream that reads the keystrokes from the keyboard. It returns
every keystroke in detail, as <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <a href="#input-char"
title="Attributes"><tt>SYS::INPUT-CHARACTER</tt></a> with the following
bits:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e14166" name="d0e14166" /><span
class="term"><tt>:hyper</tt></span></dt>

<dd><span class="emphasis"><i>(Platform dependent: <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a> platforms
only.)</i></span> if a non-standard key. These keys are: Function keys,
cursor keypads, numeric keypad <span class="emphasis"><i>(Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only)</i></span>.
Function keys, cursor keypad <span class="emphasis"><i>(Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only)</i></span>.</dd>

<dt><a id="d0e14222" name="d0e14222" /><span class="term">slot
<i><tt>key</tt></i></span></dt>

<dd>
<p><a id="d0e14227" name="d0e14227" />the key name, for non-standard
keys:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e14232" name="d0e14232" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms
only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e14244" name="d0e14244" /><b>Table 21.1.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td>F1..F12</td>
<td><tt>:F1</tt>..<tt>:F12</tt></td>
</tr>

<tr>
<td>Insert</td>
<td><tt>:Insert</tt></td>
</tr>

<tr>
<td>Delete</td>
<td><tt>:Delete</tt></td>
</tr>

<tr>
<td>Home</td>
<td><tt>:Home</tt></td>
</tr>

<tr>
<td>End</td>
<td><tt>:End</tt></td>
</tr>

<tr>
<td>PgUp</td>
<td><tt>:PgUp</tt></td>
</tr>

<tr>
<td>PgDn</td>
<td><tt>:PgDn</tt></td>
</tr>

<tr>
<td>Arrow keys</td>
<td><tt>:Left</tt><tt>:Right</tt><tt>:Up</tt><tt>:Down</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e14323" name="d0e14323" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e14335" name="d0e14335" /><b>Table 21.2.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td>F1..F12</td>
<td><tt>:F1</tt>..<tt>:F12</tt></td>
</tr>

<tr>
<td>Insert</td>
<td><tt>:Insert</tt></td>
</tr>

<tr>
<td>Delete</td>
<td><tt>:Delete</tt></td>
</tr>

<tr>
<td>Home</td>
<td><tt>:Home</tt></td>
</tr>

<tr>
<td>End</td>
<td><tt>:End</tt></td>
</tr>

<tr>
<td>Center</td>
<td><tt>:Center</tt></td>
</tr>

<tr>
<td>PgUp</td>
<td><tt>:PgUp</tt></td>
</tr>

<tr>
<td>PgDn</td>
<td><tt>:PgDn</tt></td>
</tr>

<tr>
<td>Arrow keys</td>
<td><tt>:Left</tt><tt>:Right</tt><tt>:Up</tt><tt>:Down</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e14421" name="d0e14421" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>
<div class="table">
<p><a id="d0e14429" name="d0e14429" /><b>Table 21.3.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>

<tbody>
<tr>
<td>F1..F10</td>
<td><tt>:F1</tt>..<tt>:F10</tt></td>
</tr>

<tr>
<td>Help</td>
<td><tt>:Help</tt></td>
</tr>

<tr>
<td>Arrow keys</td>
<td><tt>:Left</tt><tt>:Right</tt><tt>:Up</tt><tt>:Down</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e14472" name="d0e14472" /><span class="term">slot
<i><tt>char</tt></i></span></dt>

<dd>the ASCII code for standard keys</dd>

<dt><a id="d0e14481" name="d0e14481" /><span
class="term"><tt>:super</tt></span></dt>

<dd><span class="emphasis"><i>(Platform dependent: <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a> platforms
only.)</i></span> if pressed together with <b>Shift</b> key(s) and if the
keystroke would have been an other without <b>Shift</b>.</dd>

<dt><a id="d0e14513" name="d0e14513" /><span
class="term"><tt>:control</tt></span></dt>

<dd>if pressed together with the <b>Control</b> key.</dd>

<dt><a id="d0e14524" name="d0e14524" /><span
class="term"><tt>:meta</tt></span></dt>

<dd><span class="emphasis"><i>(Platform dependent: <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.)</i></span> if
pressed together with the <b>Alternate</b> key.</dd>
</dl>
</div>

This keyboard input is not echoed on the screen. During execution of a
<tt>(<a href="#terminal"
title="Terminal interaction."><tt>EXT:WITH-KEYBOARD</tt></a> .
<i><tt>body</tt></i>)</tt> form, no input from <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> or any synonymous stream should
be requested.
<br />
<br />
</dd>
</dl>
</div>

<p>See also <a href="#screen"
title="Extensions-2.1. Random Screen Access">Random Screen Access</a>.</p>
</div>

<div class="section"><a id="stream-dict" name="stream-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="stream-dict"
name="stream-dict" />The Streams Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html"
target="_top">[CLHS-21.2.]</a></h2>
</div>
</div>

<div class="section"><a id="stream-eltype" name="stream-eltype" />
<div class="titlepage">
<div>
<h3 class="title"><a id="stream-eltype" name="stream-eltype" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>able. The <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> of <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>s created by the functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a>, <a href="#pipe"
title="Pipes"><tt>EXT:MAKE-PIPE-INPUT-STREAM</tt></a> <a href="#pipe"
title="Pipes"><tt>EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a>, <a href="#pipe"
title="Pipes"><tt>EXT:MAKE-PIPE-IO-STREAM</tt></a>, <a
href="#so-accept"><tt>SOCKET:SOCKET-ACCEPT</tt></a>, <a
href="#so-connect"><tt>SOCKET:SOCKET-CONNECT</tt></a> can be modified, if
the old and the new <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>s are either</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e14627" name="d0e14627" />both equivalent to <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>; or</li>

<li><a id="d0e14648" name="d0e14648" />both equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt> or
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt>, with the
same <i><tt>n</tt></i>.</li>
</ul>
</div>


<br />
<br />
<p>Note that you cannot change <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> for some built-in streams,
such as terminal streams (which is normally the value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a>).</p>
</div>

<div class="section"><a id="bin-input" name="bin-input" />
<div class="titlepage">
<div>
<h3 class="title"><a id="bin-input" name="bin-input" />Binary input, <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a>, <a href="#bin-input"
title="Binary input, READ-BYTE,
 EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt>EXT:READ-INTEGER</tt></a>
&amp; <a href="#bin-input" title="Binary input, READ-BYTE,
 EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt>EXT:READ-FLOAT</tt></a></h3>
</div>
</div>

<p>The function <tt>(<a href="#bin-input" title="Binary input, READ-BYTE,
 EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt>EXT:READ-INTEGER</tt></a>
<i><tt>stream</tt></i> <i><tt>element-type</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a
href="#endianness"><i><tt>ENDIANNESS</tt></i></a>
<i><tt>eof-error-p</tt></i> <i><tt>eof-value</tt></i>)</tt> reads a
multi-byte <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> from <i><tt>stream</tt></i>.
<i><tt>stream</tt></i> should be a stream with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.
<i><tt>element-type</tt></i> should be a type equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt>, where
<i><tt>n</tt></i> is a multiple of 8.</p>

<p><tt>(<a href="#bin-input" title="Binary input, READ-BYTE,
 EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt>EXT:READ-INTEGER</tt></a>
<i><tt>stream</tt></i> <i><tt>element-type</tt></i>)</tt> is like <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a> <i><tt>stream</tt></i>)</tt> if
<i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> were set to
<i><tt>element-type</tt></i>, except that <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
target="_top"><tt>FILE-POSITION</tt></a> will increase by
<sup><i><tt>n</tt></i></sup>/<sub>8</sub> instead of 1.</p>

<p><a id="endianness" name="endianness" /><a
href="#endianness"><i><tt>ENDIANNESS</tt></i></a> can be <tt>:little</tt>
or <tt>:big</tt>. The default is <tt>:little</tt>, which corresponds to
the <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a> behavior in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>.</p>

<p>Together with <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>)</tt>, this function
permits mixed character/binary input from a stream.</p>

<p>The function <tt>(<a href="#bin-input" title="Binary input, READ-BYTE,
 EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><tt>EXT:READ-FLOAT</tt></a>
<i><tt>stream</tt></i> <i><tt>element-type</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a
href="#endianness"><i><tt>ENDIANNESS</tt></i></a>
<i><tt>eof-error-p</tt></i> <i><tt>eof-value</tt></i>)</tt> reads a
floating-point number in IEEE binary representation from
<i><tt>stream</tt></i>. <i><tt>stream</tt></i> should be a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.
<i><tt>element-type</tt></i> should be a type equivalent to <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a>.</p>
</div>

<div class="section"><a id="bin-output" name="bin-output" />
<div class="titlepage">
<div>
<h3 class="title"><a id="bin-output" name="bin-output" />Binary output, <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
target="_top"><tt>WRITE-BYTE</tt></a>, <a href="#bin-output"
title="Binary output, WRITE-BYTE,
 EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt>EXT:WRITE-INTEGER</tt></a>
&amp; <a href="#bin-output" title="Binary output, WRITE-BYTE,
 EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt>EXT:WRITE-FLOAT</tt></a></h3>
</div>
</div>

<p>The function <tt>(<a href="#bin-output"
title="Binary output, WRITE-BYTE,
 EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt>EXT:WRITE-INTEGER</tt></a>
<i><tt>integer</tt></i> <i><tt>stream</tt></i>
<i><tt>element-type</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a
href="#endianness"><i><tt>ENDIANNESS</tt></i></a>)</tt> writes a
multi-byte integer to <i><tt>stream</tt></i>. <i><tt>stream</tt></i>
should be a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.
<i><tt>element-type</tt></i> should be a type equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt>, where
<i><tt>n</tt></i> is a multiple of 8.</p>

<p><tt>(<a href="#bin-output" title="Binary output, WRITE-BYTE,
 EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt>EXT:WRITE-INTEGER</tt></a>
<i><tt>integer</tt></i> <i><tt>stream</tt></i>
<i><tt>element-type</tt></i>)</tt> is like <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
target="_top"><tt>WRITE-BYTE</tt></a> <i><tt>integer</tt></i>
<i><tt>stream</tt></i>)</tt> if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> were set to
<i><tt>element-type</tt></i>, except that <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
target="_top"><tt>FILE-POSITION</tt></a> will increase by
<sup><i><tt>n</tt></i></sup>/<sub>8</sub> instead of 1.</p>

<p>Together with <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>)</tt>, this function
permits mixed character/binary output to a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>.</p>

<p>The function <tt>(<a href="#bin-output"
title="Binary output, WRITE-BYTE,
 EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><tt>EXT:WRITE-FLOAT</tt></a>
<i><tt>float</tt></i> <i><tt>stream</tt></i> <i><tt>element-type</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a
href="#endianness"><i><tt>ENDIANNESS</tt></i></a>)</tt> writes a
floating-point number in IEEE binary representation to
<i><tt>stream</tt></i>. <i><tt>stream</tt></i> should be a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.
<i><tt>element-type</tt></i> should be a type equivalent to <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a>.</p>
</div>

<div class="section"><a id="read-seq" name="read-seq" />
<div class="titlepage">
<div>
<h3 class="title"><a id="read-seq" name="read-seq" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
target="_top"><tt>READ-SEQUENCE</tt></a></h3>
</div>
</div>

<p>In addition to <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
target="_top"><tt>READ-SEQUENCE</tt></a>, the following two functions are
provided:</p>

<div class="variablelist">
<dl>
<dt><a id="rd-by-seq" name="rd-by-seq" /><span class="term"><a
href="#rd-by-seq"><tt>EXT:READ-BYTE-SEQUENCE</tt></a> performs multiple <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a> operations:</span></dt>

<dd>
<p><tt>(<a href="#rd-by-seq"><tt>EXT:READ-BYTE-SEQUENCE</tt></a>
<i><tt>sequence</tt></i> <i><tt>stream</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</tt>
fills the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> with <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>s consecutively read from
<i><tt>stream</tt></i>. It returns the index of the first element of
<i><tt>sequence</tt></i> that was not updated (= <i><tt>end</tt></i> or
&lt; <i><tt>end</tt></i> if the <i><tt>stream</tt></i> reached its
end).</p>

<p>This function is especially efficient if <i><tt>sequence</tt></i> is a
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt> and
<i><tt>stream</tt></i> is a <a href="#open"
title="Function OPEN">file</a>/<a href="#pipe" title="Pipes">pipe</a>/<a
href="#socket" title="Extensions-2.6. Socket Streams">socket</a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.</p>
</dd>

<dt><a id="rd-ch-seq" name="rd-ch-seq" /><span class="term"><a
href="#rd-ch-seq"><tt>EXT:READ-CHAR-SEQUENCE</tt></a> performs multiple <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a> operations:</span></dt>

<dd>
<p><tt>(<a href="#rd-ch-seq"><tt>EXT:READ-CHAR-SEQUENCE</tt></a>
<i><tt>sequence</tt></i> <i><tt>stream</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</tt>
fills the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> with characters consecutively read from
<i><tt>stream</tt></i>. It returns the index of the first element of
<i><tt>sequence</tt></i> that was not updated (= <i><tt>end</tt></i> or
&lt; <i><tt>end</tt></i> if the <i><tt>stream</tt></i> reached its
end).</p>

<p>This function is especially efficient if <i><tt>sequence</tt></i> is a
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> and <tt>:STREAM</tt> is a <a
href="#open" title="Function OPEN">file</a>/<a href="#pipe"
title="Pipes">pipe</a>/<a href="#socket"
title="Extensions-2.6. Socket Streams">socket</a> stream with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or an <a
href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
target="_top">input</a> <a
href="http://www.lisp.org/HyperSpec/Body/glo_s.html#string_stream"
target="_top">string stream</a>.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="write-seq" name="write-seq" />
<div class="titlepage">
<div>
<h3 class="title"><a id="write-seq" name="write-seq" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
target="_top"><tt>WRITE-SEQUENCE</tt></a></h3>
</div>
</div>

<p>In addition to <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
target="_top"><tt>WRITE-SEQUENCE</tt></a>, the following two functions are
provided:</p>

<div class="variablelist">
<dl>
<dt><a id="wr-by-seq" name="wr-by-seq" /><span class="term"><a
href="#wr-by-seq"><tt>EXT:WRITE-BYTE-SEQUENCE</tt></a> performs multiple
<a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
target="_top"><tt>WRITE-BYTE</tt></a> operations:</span></dt>

<dd>
<p><tt>(<a href="#wr-by-seq"><tt>EXT:WRITE-BYTE-SEQUENCE</tt></a>
<i><tt>sequence</tt></i> <tt>:STREAM</tt> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</tt>
outputs the <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>s of the subsequence of
<i><tt>sequence</tt></i> specified by <tt>:START</tt> and <tt>:END</tt> to
<tt>:STREAM</tt>. It returns <i><tt>sequence</tt></i>.</p>

<p>This function is especially efficient if <i><tt>sequence</tt></i> is a
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt> and
<i><tt>stream</tt></i> is a <a href="#open"
title="Function OPEN">file</a>/<a href="#pipe" title="Pipes">pipe</a>/<a
href="#socket" title="Extensions-2.6. Socket Streams">socket</a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt>.</p>
</dd>

<dt><a id="wr-ch-seq" name="wr-ch-seq" /><span class="term"><a
href="#wr-ch-seq"><tt>EXT:WRITE-CHAR-SEQUENCE</tt></a> performs multiple
<a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
target="_top"><tt>WRITE-CHAR</tt></a> operations:</span></dt>

<dd>
<p><tt>(<a href="#wr-ch-seq"><tt>EXT:WRITE-CHAR-SEQUENCE</tt></a>
<i><tt>sequence</tt></i> <tt>:STREAM</tt> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</tt>
outputs the characters of the subsequence of <i><tt>sequence</tt></i>
specified by <tt>:START</tt> and <tt>:END</tt> to <tt>:STREAM</tt>. It
returns <i><tt>sequence</tt></i>.</p>

<p>This function is especially efficient if <i><tt>sequence</tt></i> is a
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> and <tt>:STREAM</tt> is a <a
href="#open" title="Function OPEN">file</a>/<a href="#pipe"
title="Pipes">pipe</a>/<a href="#socket"
title="Extensions-2.6. Socket Streams">socket</a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="file-pos" name="file-pos" />
<div class="titlepage">
<div>
<h3 class="title"><a id="file-pos" name="file-pos" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
target="_top"><tt>FILE-POSITION</tt></a></h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e15528" name="d0e15528" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
target="_top"><tt>FILE-POSITION</tt></a> works on any buffered file
stream. When a #\Newline is output to (respectively input from) a file
stream, its file position is increased by 2 since #\Newline is encoded as
CR/LF in the file.</dd>
</dl>
</div>
</div>

<div class="section"><a id="open" name="open" />
<div class="titlepage">
<div>
<h3 class="title"><a id="open" name="open" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a> cannot handle files of size &ge; 4 GB.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a> accepts three additional keywords: <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a>, <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a>, <a
href="#buffered"><tt>:BUFFERED</tt></a>.</p>

<div class="variablelist">
<p><b>The acceptable values for the <a href="#open"
title="Function OPEN">file</a>/<a href="#pipe" title="Pipes">pipe</a>/<a
href="#socket" title="Extensions-2.6. Socket Streams">socket</a>
functions</b></p>

<dl>
<dt><a id="eltype" name="eltype" /><span class="term"><a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a></span></dt>

<dd>types equivalent to <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt>, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> <i><tt>n</tt></i>)</tt>; if the
stream is to be unbuffered, <i><tt>n</tt></i> must be a multiple of
8.</dd>

<dt><a id="extfmt" name="extfmt" /><span class="term"><a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a></span></dt>

<dd><a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>s, (constant)
<a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
target="_top"><tt>SYMBOL</tt></a>s in the <a href="#encoding"
title="Extensions-1.4. Encodings">&ldquo;CHARSET&rdquo;</a> package, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a>s (denoting <a
href="#iconv"><tt>iconv()</tt></a>-based encodings), the symbol
<tt>:DEFAULT</tt>, and the <a href="#newline"
title="Line Terminators">line terminator</a> keywords <tt>:UNIX</tt>,
<tt>:MAC</tt>, <tt>:DOS</tt>. The default encoding is <a
href="#def-file-enc"><tt>CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>.</dd>

<dt><a id="buffered" name="buffered" /><span class="term"><a
href="#buffered"><tt>:BUFFERED</tt></a></span></dt>

<dd>
<p><a id="d0e15688" name="d0e15688" /><a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, or <tt>:DEFAULT</tt>.</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e15702" name="d0e15702" />for functions that create <a
href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>s
and <a href="#pipe" title="Pipes">pipes</a>, <tt>:DEFAULT</tt> is
equivalent to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>;</li>

<li><a id="d0e15719" name="d0e15719" />for functions that <a href="#open"
title="Function OPEN">open</a> files, <tt>:DEFAULT</tt> means that
buffered file streams will be returned for regular files and (on Unix)
block-devices, and unbuffered file streams for special files.</li>
</ul>
</div>


<br />
<br />
</dd>
</dl>
</div>
</div>

<div class="section"><a id="close" name="close" />
<div class="titlepage">
<div>
<h3 class="title"><a id="close" name="close" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_close.html"
target="_top"><tt>CLOSE</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html"
target="_top"><tt>CLOSE</tt></a> ignores its <tt>:ABORT</tt> argument.</p>
</div>

<div class="section"><a id="broadcast-stream" name="broadcast-stream" />
<div class="titlepage">
<div>
<h3 class="title"><a id="broadcast-stream" name="broadcast-stream" />Class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
target="_top"><tt>BROADCAST-STREAM</tt></a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
target="_top"><tt>INPUT-STREAM-P</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html"
target="_top"><tt>INTERACTIVE-STREAM-P</tt></a> return false for <a
href="http://www.lisp.org/HyperSpec/Body/glo_b.html#broadcast_stream"
target="_top">broadcast streams</a>.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="printer" name="printer" />Chapter 22. Printer
[CLHS-22]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#multi-rep">Multiple Possible Textual Representations
[CLHS-22.1.1.1]</a></dt>

<dt><a href="#print-vector">Printing Other Vectors
[CLHS-22.1.3.7]</a></dt>

<dt><a href="#print-array">Printing Other Arrays [CLHS-22.1.3.8]</a></dt>

<dt><a href="#clpp">The Lisp Pretty Printer [CLHS-22.2]</a></dt>

<dd>
<dl>
<dt><a href="#pp-dispatch">Pretty Print Dispatch Table
[CLHS-22.2.1.4]</a></dt>
</dl>
</dd>

<dt><a href="#print-dict">The Printer Dictionary [CLHS-22.4]</a></dt>

<dd>
<dl>
<dt><a href="#format">Function <tt>FORMAT</tt></a></dt>

<dt><a href="#pathprint">pathnames</a></dt>

<dt><a href="#print-misc">Miscellaneous Issues</a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="multi-rep" name="multi-rep" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="multi-rep"
name="multi-rep" />Multiple Possible Textual Representations <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html"
target="_top">[CLHS-22.1.1.1]</a></h2>
</div>
</div>

<p><a id="pr-closure" name="pr-closure" /><b><a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a>.&nbsp;</b> An
additional variable <a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a> controls whether
compiled and interpreted functions (closures) are output in detailed form.
If <a href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, compiled closures are output in #Y syntax
which the reader understands. <a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a> is initially set to
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p><a id="pr-rpars" name="pr-rpars" /><b><a
href="#pr-rpars"><tt>CUSTOM:*PRINT-RPARS*</tt></a>.&nbsp;</b> An
additional variable <a href="#pr-rpars"><tt>CUSTOM:*PRINT-RPARS*</tt></a>
controls the output of the right (closing) parentheses. If <a
href="#pr-rpars"><tt>CUSTOM:*PRINT-RPARS*</tt></a> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, closing parentheses which do not fit onto
the same line as the the corresponding opening parenthesis are output just
below their corresponding opening parenthesis, in the same column. <a
href="#pr-rpars"><tt>CUSTOM:*PRINT-RPARS*</tt></a> is initially set to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p><a id="pr-indent" name="pr-indent" /><b><a
href="#pr-indent"><tt>CUSTOM:*PRINT-INDENT-LISTS*</tt></a>.&nbsp;</b> An
additional variable <a
href="#pr-indent"><tt>CUSTOM:*PRINT-INDENT-LISTS*</tt></a> controls the
indentation of lists that span more than one line. It specifies by how
many characters items within the list will be indented relative to the
beginning of the list. <a
href="#pr-indent"><tt>CUSTOM:*PRINT-INDENT-LISTS*</tt></a> is initially
set to <tt>1</tt>.</p>

<p><a id="ppr-first-newline" name="ppr-first-newline" /><b><a
href="#ppr-first-newline"><tt>CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a>.&nbsp;</b>
An additional variable <a
href="#ppr-first-newline"><tt>CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a>
controls pretty-printing of multi-line objects. When <a
href="#ppr-first-newline"><tt>CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is
non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, and the current line already has some
characters on it, and the next object will be printed on several lines,
and it does not start with a #\Newline, then a #\Newline is printed before
the object. <a
href="#ppr-first-newline"><tt>CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> has
no effect if <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
target="_top"><tt>*PRINT-PRETTY*</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>. <a
href="#ppr-first-newline"><tt>CUSTOM:*PPRINT-FIRST-NEWLINE*</tt></a> is
initially set to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</p>
</div>

<div class="section"><a id="print-vector" name="print-vector" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="print-vector"
name="print-vector" />Printing Other Vectors <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html"
target="_top">[CLHS-22.1.3.7]</a></h2>
</div>
</div>

<p>When <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true, other vectors are
written as follows: if the <a
href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
target="_top"><tt>ARRAY-ELEMENT-TYPE</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
target="_top"><tt>T</tt></a>, the syntax
<tt>#(<i><tt>x<sub>0</sub></tt></i> ...
<i><tt>x<sub>n-1</sub></tt></i>)</tt> is used. Otherwise, the syntax
<tt>#A(<i><tt>element-type</tt></i> <i><tt>dimensions</tt></i>
<i><tt>contents</tt></i>)</tt> is used.</p>
</div>

<div class="section"><a id="print-array" name="print-array" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="print-array"
name="print-array" />Printing Other Arrays <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html"
target="_top">[CLHS-22.1.3.8]</a></h2>
</div>
</div>

<p>When <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true, other arrays are
written as follows: if the <a
href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
target="_top"><tt>ARRAY-ELEMENT-TYPE</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
target="_top"><tt>T</tt></a>, the syntax <tt>#<i><tt>rank</tt></i>A
<i><tt>contents</tt></i></tt> is used. Otherwise, the syntax
<tt>#A(<i><tt>element-type</tt></i> <i><tt>dimensions</tt></i>
<i><tt>contents</tt></i>)</tt> is used.</p>
</div>

<div class="section"><a id="clpp" name="clpp" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="clpp" name="clpp" />The Lisp
Pretty Printer <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2.html"
target="_top">[CLHS-22.2]</a></h2>
</div>
</div>

<p>The Lisp Pretty Printer implementation is <span
class="emphasis"><i>not</i></span> perfect yet. <a
href="http://www.lisp.org/HyperSpec/Body/mac_pprint-logical-block.html"
target="_top"><tt>PPRINT-LOGICAL-BLOCK</tt></a> does not respect <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html"
target="_top"><tt>*PRINT-LINES*</tt></a>.</p>

<div class="section"><a id="pp-dispatch" name="pp-dispatch" />
<div class="titlepage">
<div>
<h3 class="title"><a id="pp-dispatch" name="pp-dispatch" />Pretty Print
Dispatch Table <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-2-1-4.html"
target="_top">[CLHS-22.2.1.4]</a></h3>
</div>
</div>

<p>A <a
href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pprint_dispatch_table"
target="_top">pprint dispatch table</a> is a <a
href="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
target="_top"><tt>CONS</tt></a> of a symbol <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html"
target="_top"><tt>*PRINT-PPRINT-DISPATCH*</tt></a> an <a
href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
target="_top">alist</a> which maps types into priorities and print
functions. Their use is strongly discouraged because of the performance
issues: when <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html"
target="_top"><tt>*PRINT-PPRINT-DISPATCH*</tt></a> is non-trivial and <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
target="_top"><tt>*PRINT-PRETTY*</tt></a> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, printing of every object requires a lookup
in the table, which entails many calls to <a
href="http://www.lisp.org/HyperSpec/Body/fun_typep.html"
target="_top"><tt>TYPEP</tt></a> (which cannot be made fast enough).</p>
</div>
</div>

<div class="section"><a id="print-dict" name="print-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="print-dict"
name="print-dict" />The Printer Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html"
target="_top">[CLHS-22.4]</a></h2>
</div>
</div>

<p><b><a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html"
target="_top"><tt>WRITE-TO-STRING</tt></a>.&nbsp;</b> The functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html"
target="_top"><tt>WRITE-TO-STRING</tt></a> have an additional keyword
argument <tt>:closure</tt> which is used to bind <a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a>.</p>

<div class="section"><a id="format" name="format" />
<div class="titlepage">
<div>
<h3 class="title"><a id="format" name="format" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a></h3>
</div>
</div>

<p>The <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instruction <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html"
target="_top"><tt>~W</tt></a> is similar to <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html"
target="_top"><tt>~A</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html"
target="_top"><tt>~S</tt></a>, but avoids binding of <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
target="_top"><tt>*PRINT-ESCAPE*</tt></a>. <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <i><tt>stream</tt></i> "~W"
<i><tt>object</tt></i>)</tt> is equivalent to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>WRITE</tt></a> <i><tt>object</tt></i> <tt>:STREAM</tt>
<i><tt>stream</tt></i>)</tt>.</p>

<p>The <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> instruction <span
class="strong"><i><tt>~!</tt></i></span> is similar to <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-5-4.html"
target="_top"><tt>~/</tt></a>, but avoids putting a function name into a
string. Thus, even if the function is not interned in the <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
target="_top">&ldquo;COMMON-LISP-USER&rdquo;</a> package, you might not
need to specify the package.</p>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <i><tt>stream</tt></i> "~args!"
<i><tt>function</tt></i> <i><tt>object</tt></i>)</tt> is equivalent to
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a> <i><tt>function</tt></i>
<i><tt>stream</tt></i> <i><tt>object</tt></i>
<i><tt>colon-modifier-p</tt></i> <i><tt>atsign-modifier-p</tt></i>
<i><tt>args</tt></i>)</tt>.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
target="_top"><tt>~R</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
target="_top"><tt>~:R</tt></a> can output only integers in the range
<tt>|n| &lt; <i><tt>10<sup>66</sup></tt></i></tt>. The output is in
English, according to the American conventions, and these conventions are
identical to the British conventions only in the range <tt>|n| &lt;
<i><tt>10<sup>9</sup></tt></i></tt>.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-1-1.html"
target="_top"><tt>~:@C</tt></a> does not output the character itself, only
the instruction how to type the character.</p>

<p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
target="_top"><tt>~E</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
target="_top"><tt>~G</tt></a>, the value of <a
href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html"
target="_top"><tt>*READ-DEFAULT-FLOAT-FORMAT*</tt></a> does not matter if
<a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true.</p>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-6-1.html"
target="_top"><tt>~T</tt></a> can determine the current column of any
built-in stream.</p>
</div>

<div class="section"><a id="pathprint" name="pathprint" />
<div class="titlepage">
<div>
<h3 class="title"><a id="pathprint" name="pathprint" />pathnames</h3>
</div>
</div>

<p>Pathnames are printed as follows: If <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
target="_top"><tt>*PRINT-ESCAPE*</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, only the namestring is printed; otherwise
it is printed with <tt>#P""</tt> syntax, as per [<a href="#ansi-cl">ANSI
CL standard</a>] Issue <a
href="http://www.lisp.org/HyperSpec/Issues/iss276.html"
target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a>. But, if <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true, we are in trouble as
<tt>#P""</tt> is ambiguous (which is verboten when <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true), while being mandated
by the [<a href="#ansi-cl">ANSI CL standard</a>]. Therefore, in this case,
<a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>'s behavior
is determined by the value of <a href="#pathprint"
title="pathnames"><tt>CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a>: when it is
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, we print pathnames like this: <tt>#-CLISP
#P"" #+CLISP #S(PATHNAME ...)</tt>. Otherwise, when the variable <a
href="#pathprint"
title="pathnames"><tt>CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the <tt>#P""</tt> notation is used as per
<a href="http://www.lisp.org/HyperSpec/Body/sec_1-5-1-4.html"
target="_top">1.5.1.4.1 Resolution of Apparent Conflicts in Exceptional
Situations</a>.</p>
</div>

<div class="section"><a id="print-misc" name="print-misc" />
<div class="titlepage">
<div>
<h3 class="title"><a id="print-misc" name="print-misc" />Miscellaneous
Issues</h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html"
target="_top"><tt>*PRINT-CASE*</tt></a> controls the output not only of
symbols, but also of characters and some <tt>#&lt;...&gt;</tt>
objects.</p>

<p>In the absence of <span
class="strong"><i><tt>sys::write-float-decimal</tt></i></span>, floating
point numbers are output in radix 2. This function is defined in
<tt>floatpri.lisp</tt> and is not available if you run <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> without a <a
href="#image" title="Extensions-1.1. Saving an Image">memory image</a>
(which you should never do anyway!)</p>

<p>If <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a> is true, <a
href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html"
target="_top"><tt>*READ-DEFAULT-FLOAT-FORMAT*</tt></a> has no influence on
the way floating point numbers are printed.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e16358" name="d0e16358" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a> platforms
only.</span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
target="_top"><tt>*PRINT-PRETTY*</tt></a> is initially <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> but set to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> in <tt>config.lisp</tt>. This makes screen
output prettier.</dd>

<dt><a id="d0e16399" name="d0e16399" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
target="_top"><tt>*PRINT-PRETTY*</tt></a> is initially <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> but set to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> in <tt>config.lisp</tt>. This makes
unbuffered screen output both much faster and prettier.</dd>
</dl>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
target="_top"><tt>*PRINT-ARRAY*</tt></a> is initially set to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="reader" name="reader" />Chapter 23. Reader
[CLHS-23]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#chario">characters</a></dt>

<dt><a href="#read-dispatch-ext">Additional read dispatch macros</a></dt>

<dt><a href="#rt-case">Function <tt>READTABLE-CASE</tt></a></dt>

<dt><a href="#listen">Functions <tt>LISTEN</tt>,
<tt>READ-CHAR-NO-HANG</tt></a></dt>

<dt><a href="#read-byte">Function <tt>READ-BYTE</tt></a></dt>
</dl>
</div>

<p>This is the list of objects whose external representation cannot be
meaningfully read in:</p>

<div class="table">
<p><a id="d0e16440" name="d0e16440" /><b>Table 23.1. unreadable
objects</b></p>

<table summary="unreadable objects" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>format</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>#&lt;<i><tt>type</tt></i> ...&gt;</tt></td>
<td>all structures lacking a keyword constructor</td>
</tr>

<tr>
<td><tt>#&lt;ARRAY <i><tt>type</tt></i>
<i><tt>dimensions</tt></i>&gt;</tt></td>
<td>all arrays except strings, if <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
target="_top"><tt>*PRINT-ARRAY*</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>#&lt;SYSTEM-FUNCTION <i><tt>name</tt></i>&gt;</tt></td>
<td>built-in function written in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a></td>
</tr>

<tr>
<td><tt>#&lt;ADD-ON-SYSTEM-FUNCTION <i><tt>name</tt></i>&gt;</tt></td>
<td>other function written in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a></td>
</tr>

<tr>
<td><tt>#&lt;SPECIAL-OPERATOR <i><tt>name</tt></i>&gt;</tt></td>
<td>special operator handler</td>
</tr>

<tr>
<td><tt>#&lt;COMPILED-CLOSURE <i><tt>name</tt></i>&gt;</tt></td>
<td>compiled function, if <a
href="#pr-closure"><tt>CUSTOM:*PRINT-CLOSURE*</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>#&lt;CLOSURE <i><tt>name</tt></i> ...&gt;</tt></td>
<td>interpreted function</td>
</tr>

<tr>
<td><tt>#&lt;FRAME-POINTER #x...&gt;</tt></td>
<td>pointer to a stack frame</td>
</tr>

<tr>
<td><tt>#&lt;DISABLED POINTER&gt;</tt></td>
<td>frame pointer which has become invalid on exit from the corresponding
<a href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a></td>
</tr>

<tr>
<td><tt>#&lt;...-STREAM ...&gt;</tt></td>
<td>stream</td>
</tr>

<tr>
<td><tt>#&lt;PACKAGE <i><tt>name</tt></i>&gt;</tt></td>
<td>package</td>
</tr>

<tr>
<td><tt>#&lt;HASH-TABLE #x...&gt;</tt></td>
<td>hash table, if <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
target="_top"><tt>*PRINT-ARRAY*</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
</tr>

<tr>
<td><tt>#&lt;READTABLE #x...&gt;</tt></td>
<td>readtable</td>
</tr>

<tr>
<td><tt>#&lt;SYMBOL-MACRO <i><tt>form</tt></i>&gt;</tt></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> handler</td>
</tr>

<tr>
<td><tt>#&lt;FOREIGN-POINTER #x...&gt;</tt></td>
<td>foreign pointer <span class="emphasis"><i>(Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.)</i></span></td>
</tr>

<tr>
<td><tt>#&lt;FOREIGN-ADDRESS #x...&gt;</tt></td>
<td>foreign address <span class="emphasis"><i>(Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.)</i></span></td>
</tr>

<tr>
<td><tt>#&lt;FOREIGN-VARIABLE <i><tt>name</tt></i> #x...&gt;</tt></td>
<td>foreign variable <span class="emphasis"><i>(Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.)</i></span></td>
</tr>

<tr>
<td><tt>#&lt;FOREIGN-FUNCTION <i><tt>name</tt></i> #x...&gt;</tt></td>
<td>foreign function <span class="emphasis"><i>(Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.)</i></span></td>
</tr>

<tr>
<td><tt>#&lt;UNBOUND&gt;</tt></td>
<td>"value" of a symbol without value, "value" of an unsupplied optional
or keyword argument</td>
</tr>

<tr>
<td><tt>#&lt;SPECIAL REFERENCE&gt;</tt></td>
<td>environment marker for variables declared <a
href="http://www.lisp.org/HyperSpec/Body/dec_special.html"
target="_top"><tt>SPECIAL</tt></a></td>
</tr>

<tr>
<td><tt>#&lt;DOT&gt;</tt></td>
<td>internal <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> result for "."</td>
</tr>

<tr>
<td><tt>#&lt;END OF FILE&gt;</tt></td>
<td>internal <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> result, when the end of file is
reached</td>
</tr>

<tr>
<td><tt>#&lt;READ-LABEL ...&gt;</tt></td>
<td>intermediate <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> result for <tt>#n#</tt></td>
</tr>

<tr>
<td><tt>#&lt;ADDRESS #x...&gt;</tt></td>
<td>machine address, should not occur</td>
</tr>

<tr>
<td><tt>#&lt;SYSTEM-POINTER #x...&gt;</tt></td>
<td>should not occur</td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
<div class="section"><a id="chario" name="chario" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="chario"
name="chario" />characters</h2>
</div>
</div>

<p>#\Code allows input of characters of arbitrary code: e.g., #\Code231
reads as the character <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
target="_top"><tt>CODE-CHAR</tt></a> 231.)</tt>.</p>
</div>

<div class="section"><a id="read-dispatch-ext" name="read-dispatch-ext" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="read-dispatch-ext"
name="read-dispatch-ext" />Additional read dispatch macros</h2>
</div>
</div>

<div class="itemizedlist">
<ul>
<li><a id="d0e16760" name="d0e16760" />#Y is used to read compiled
functions and to set the current input stream's <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>.</li>

<li><a id="d0e16769" name="d0e16769" />
<p><tt>#""</tt> is used to read pathnames: <tt>#"test.lisp"</tt> is the
value of <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html"
target="_top"><tt>PATHNAME</tt></a> "test.lisp")</tt></p>

<div class="variablelist">
<dl>
<dt><a id="d0e16785" name="d0e16785" /><span class="term">Platform
dependent: <a href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>As in all strings, backslashes must be written twice here:
<tt>#"A:\\programs\\test.lisp"</tt></dd>

<dt><a id="d0e16808" name="d0e16808" /><span class="term">Platform
dependent: <a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a> platforms only.</span></dt>

<dd>As in all strings, backslashes must be written twice here:
<tt>#"\\.test.lisp"</tt></dd>
</dl>
</div>
</li>
</ul>
</div>
</div>

<div class="section"><a id="rt-case" name="rt-case" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="rt-case"
name="rt-case" />Function <a
href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
target="_top"><tt>READTABLE-CASE</tt></a></h2>
</div>
</div>

<p>When the value of <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
target="_top"><tt>READTABLE-CASE</tt></a> <i><tt>readtable</tt></i>)</tt>
is <tt>:invert</tt>, it applies to the package name and the symbol name of
a symbol separately (not to the entire token at once). An alternative to
the use of <a
href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
target="_top"><tt>READTABLE-CASE</tt></a> is the use of the
<tt>:CASE-SENSITIVE</tt> option to <a
href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
target="_top"><tt>MAKE-PACKAGE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a>.</p>
</div>

<div class="section"><a id="listen" name="listen" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="listen"
name="listen" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
target="_top"><tt>READ-CHAR-NO-HANG</tt></a></h2>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="rcwhp" name="rcwhp" /><span class="term"><tt>(<a
href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p><a href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a> queries the
stream's input status. It returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html"
target="_top"><tt>PEEK-CHAR</tt></a> with a <i><tt>peek-type</tt></i> of
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> will return immediately. Otherwise it
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>. (In the latter case the standard <a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a> function would return <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.)</p>

<p>Note the difference with <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_not.html"
target="_top"><tt>NOT</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a> <i><tt>stream</tt></i>))</tt>: When the
<tt>end-of-stream</tt> is reached, <a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a> returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, whereas <a
href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p>Note also that <a href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a>
is not a good mean to test for <tt>end-of-stream</tt>: If <a
href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a> returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, this does not mean that the
<i><tt>stream</tt></i> will deliver more characters. It only means that it
is not known at this moment whether the <i><tt>stream</tt></i> is already
at <tt>end-of-stream</tt>, or will deliver more characters.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="read-byte" name="read-byte" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="read-byte"
name="read-byte" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a></h2>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="rbla" name="rbla" /><span class="term"><tt>(<a
href="#rbla"><tt>EXT:READ-BYTE-LOOKAHEAD</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a> would return immediately with an <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> result. Returns <tt>:EOF</tt> if the
<tt>end-of-stream</tt> is already known to be reached. If <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a>'s value is not available immediately,
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> instead of waiting.</dd>

<dt><a id="d0e17050" name="d0e17050" /><span
class="term"><tt>(</tt>EXT:READ-BYTE-WILL-HANG-P</span>
<i><tt>stream</tt></i>)</dt>

<dd>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a> will return immediately. Otherwise it
returns true.</dd>

<dt><a id="d0e17092" name="d0e17092" /><span
class="term"><tt>(</tt>EXT:READ-BYTE-NO-HANG</span> <i><tt>stream</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>eof-error-p</tt></i>
<i><tt>eof-value</tt></i>)</dt>

<dd>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns an <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> or does <tt>end-of-stream</tt>
handling, like <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a>, if that would return immediately. If
<a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a>'s value is not available immediately,
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> instead of waiting.</dd>
</dl>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="system" name="system" />Chapter 24. System
Construction [CLHS-24]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#system-dict">The System Construction Dictionary
[CLHS-24.2]</a></dt>

<dd>
<dl>
<dt><a href="#compilefile">Function <tt>COMPILE-FILE</tt></a></dt>

<dt><a href="#compile-file-path">Function
<tt>COMPILE-FILE-PATHNAME</tt></a></dt>

<dt><a href="#require">Function <tt>REQUIRE</tt></a></dt>

<dt><a href="#loadfile">Function <tt>LOAD</tt></a></dt>

<dt><a href="#features">Variable <tt>*FEATURES*</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="system-dict" name="system-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="system-dict"
name="system-dict" />The System Construction Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html"
target="_top">[CLHS-24.2]</a></h2>
</div>
</div>

<p>The compiler can be called not only by the functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
target="_top"><tt>COMPILE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
target="_top"><tt>DISASSEMBLE</tt></a>, but also by the declaration <a
href="#compile-decl"
title="Additional declarations"><tt>(compile)</tt></a>.</p>

<div class="section"><a id="compilefile" name="compilefile" />
<div class="titlepage">
<div>
<h3 class="title"><a id="compilefile" name="compilefile" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a></h3>
</div>
</div>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a> <i><tt>input-file</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :output-file :listing
<tt>:WARNINGS</tt> <tt>:VERBOSE</tt> <tt>:PRINT</tt>)</tt> compiles a file
to platform-independent bytecode.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e17214" name="d0e17214" /><span
class="term"><i><tt>input-file</tt></i></span></dt>

<dd>should be a pathname/string/symbol.</dd>

<dt><a id="d0e17221" name="d0e17221" /><span
class="term"><tt>:output-file</tt></span></dt>

<dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> or a pathname/string/symbol or an
output-stream. The default is <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</dd>

<dt><a id="d0e17240" name="d0e17240" /><span
class="term"><tt>:listing</tt></span></dt>

<dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> or a pathname/string/symbol or an
output-stream. The default is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="d0e17259" name="d0e17259" /><span
class="term"><tt>:WARNINGS</tt></span></dt>

<dd>specifies whether warnings should also appear on the screen.</dd>

<dt><a id="d0e17266" name="d0e17266" /><span
class="term"><tt>:VERBOSE</tt></span></dt>

<dd>specifies whether error messages should also appear on the
screen.</dd>

<dt><a id="d0e17273" name="d0e17273" /><span
class="term"><tt>:PRINT</tt></span></dt>

<dd>specifies whether an indication which forms are being compiled should
appear on the screen.</dd>
</dl>
</div>

<p>The variables <span
class="strong"><i><tt>custom:*compile-warnings*</tt></i></span>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html"
target="_top"><tt>*COMPILE-VERBOSE*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html"
target="_top"><tt>*COMPILE-PRINT*</tt></a> provide defaults for the
<tt>:WARNINGS</tt>, <tt>:VERBOSE</tt>, <tt>:PRINT</tt> keyword arguments,
respectively. For each input file (default file type: <tt>lisp</tt>) the
following files are generated:</p>

<div class="table">
<p><a id="d0e17306" name="d0e17306" /><b>Table 24.1.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>File</th>
<th>When</th>
<th>Default file type</th>
<th>Contents</th>
</tr>
</thead>

<tbody>
<tr>
<td>output file</td>
<td>only if <tt>:output-file</tt> is not <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>fas</tt></td>
<td>can be loaded using the <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> function</td>
</tr>

<tr>
<td>auxiliary output file</td>
<td>only if <tt>:output-file</tt> is not <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>#p".lib"</tt></td>
<td>used by <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a> when compiling a <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a> form referring to the input file</td>
</tr>

<tr>
<td>listing file</td>
<td>only if <tt>:listing</tt> is not <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>#p".lis"</tt></td>
<td>disassembly of the output file</td>
</tr>

<tr>
<td><a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> output file</td>
<td>only if <tt>:output-file</tt> is not <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><tt>#p".c"</tt></td>
<td>foreign function interface; this file is deleted if it is empty</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="compile-file-path" name="compile-file-path" />
<div class="titlepage">
<div>
<h3 class="title"><a id="compile-file-path"
name="compile-file-path" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file-pathname.html"
target="_top"><tt>COMPILE-FILE-PATHNAME</tt></a></h3>
</div>
</div>

<p>The default for the <tt>:output-file</tt> argument is <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, which means <tt>fas</tt>.</p>
</div>

<div class="section"><a id="require" name="require" />
<div class="titlepage">
<div>
<h3 class="title"><a id="require" name="require" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a></h3>
</div>
</div>

<p>The function <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a> receives as the optional argument
either a pathname or a list of pathnames: files to be loaded if the
required module is not already in memory.</p>
</div>

<div class="section"><a id="loadfile" name="loadfile" />
<div class="titlepage">
<div>
<h3 class="title"><a id="loadfile" name="loadfile" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a></h3>
</div>
</div>

<p><a href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> has two additional keywords <tt>:ECHO</tt>
and <tt>:COMPILING</tt>.</p>

<p><tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> <i><tt>filename</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:VERBOSE</tt> <tt>:PRINT</tt>
<tt>:ECHO</tt> <tt>:IF-DOES-NOT-EXIST</tt> <tt>:COMPILING</tt>)</tt></p>

<div class="variablelist">
<dl>
<dt><a id="d0e17476" name="d0e17476" /><span
class="term"><tt>:VERBOSE</tt> <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a></span></dt>

<dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> to emit a short message that a file is
being loaded. The default is <a
href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
target="_top"><tt>*LOAD-VERBOSE*</tt></a>, which is initially <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</dd>

<dt><a id="d0e17499" name="d0e17499" /><span class="term"><tt>:PRINT</tt>
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a></span></dt>

<dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> to print the value of each form. The
default is <a
href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
target="_top"><tt>*LOAD-PRINT*</tt></a>, which is initially <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="d0e17522" name="d0e17522" /><span class="term"><tt>:ECHO</tt>
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a></span></dt>

<dd>causes the input from the file to be echoed to <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*STANDARD-OUTPUT*</tt></a> (normally to the screen).
Should there be an error in the file, you can see at one glance where it
is. The default is <span
class="strong"><i><tt>custom:*load-echo*</tt></i></span>, which is
initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="d0e17545" name="d0e17545" /><span
class="term"><tt>:COMPILING</tt> <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a></span></dt>

<dd>causes each form read to be compiled on the fly. The compiled code is
executed at once and - in contrast to <a href="#compilefile"
title="Function COMPILE-FILE"><tt>compile-file</tt></a> - not written to a
file. The default is <span
class="strong"><i><tt>custom:*load-compiling*</tt></i></span>, which is
initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>
</dl>
</div>

<p><a id="load-paths" name="load-paths" /><b><a
href="#load-paths"><tt>CUSTOM:*LOAD-PATHS*</tt></a>.&nbsp;</b> The
variable <a href="#load-paths"><tt>CUSTOM:*LOAD-PATHS*</tt></a> contains a
list of directories where the files are looked for - in addition to the
specified or current directory - by <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
target="_top"><tt>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</tt></a>.</p>
</div>

<div class="section"><a id="features" name="features" />
<div class="titlepage">
<div>
<h3 class="title"><a id="features" name="features" />Variable <a
href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
target="_top"><tt>*FEATURES*</tt></a></h3>
</div>
</div>

<p>The variable <a
href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
target="_top"><tt>*FEATURES*</tt></a> initially contains the symbols</p>

<div class="table">
<p><a id="d0e17607" name="d0e17607" /><b>Table 24.2.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>keyword</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>:CLISP</tt></td>
<td>the name of this implementation</td>
</tr>

<tr>
<td><tt>:ANSI-CL</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:COMMON-LISP</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:INTERPRETER</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:COMPILER</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:SOCKETS</tt></td>
<td>see <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>s</td>
</tr>

<tr>
<td><tt>:GENERIC-STREAMS</tt></td>
<td>see <a href="#clos-stream"
title="Extensions-1.5. Defining new kinds of Streams">Defining new kinds
of Streams</a></td>
</tr>

<tr>
<td><tt>:SYSCALLS</tt></td>
<td>see <a href="#syscalls" title="Extensions-2.7. System Calls">System
Calls</a></td>
</tr>

<tr>
<td><tt>:DIR-KEY</tt></td>
<td>see <a href="#dir-key"
title="Extensions-2.11. Directory Access">Directory Access</a></td>
</tr>

<tr>
<td><tt>:LOGICAL-PATHNAMES</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:FFI</tt></td>
<td>if a foreign function interface (see <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>)
is supported <span class="emphasis"><i>(Platform dependent: many <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only)</i></span></td>
</tr>

<tr>
<td><tt>:GETTEXT</tt></td>
<td>if internationalization (see <a href="#i18n"
title="Extensions-1.3. Internationalization">&ldquo;I18N&rdquo;</a>) using
the <a href="http://www.gnu.org" target="_top">GNU</a><a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a> package is supported <span
class="emphasis"><i>(Platform dependent: most <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a> platforms only)</i></span></td>
</tr>

<tr>
<td><tt>:UNICODE</tt></td>
<td>if Unicode (ISO 10646) characters are supported (see <a
href="#encoding"
title="Extensions-1.4. Encodings">&ldquo;CHARSET&rdquo;</a>)</td>
</tr>

<tr>
<td><tt>:LOOP</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:CLOS</tt></td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:AMIGA</tt></td>
<td>if <i><tt>hardware</tt></i> = Amiga and <i><tt>operating
system</tt></i> = Exec/AmigaDOS</td>
</tr>

<tr>
<td><tt>:DOS</tt></td>
<td>if <i><tt>hardware</tt></i> = PC (clone) and <i><tt>operating
system</tt></i> = DOS</td>
</tr>

<tr>
<td><tt>:OS/2</tt></td>
<td>if <i><tt>hardware</tt></i> = PC (clone) and <i><tt>operating
system</tt></i> = OS/2</td>
</tr>

<tr>
<td><tt>:WIN32</tt></td>
<td>if <i><tt>hardware</tt></i> = PC (clone) and <i><tt>operating
system</tt></i> = Win32 (Windows 95/98/NT/Me/2000)</td>
</tr>

<tr>
<td><tt>:PC386</tt></td>
<td>if <i><tt>hardware</tt></i> = PC (clone) with a 386/486/586/686
CPU</td>
</tr>

<tr>
<td><tt>:UNIX</tt></td>
<td>if <i><tt>operating system</tt></i> = Unix (in this case the
<i><tt>hardware</tt></i> is irrelevant!)</td>
</tr>
</tbody>
</table>
</div>


<br />
<br />
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="environment" name="environment" />Chapter 25.
Environment [CLHS-25]</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#debugger">Debugging Utilities [CLHS-25.1.2]</a></dt>

<dt><a href="#environment-dict">The Environment Dictionary
[CLHS-25.2]</a></dt>

<dd>
<dl>
<dt><a href="#disassemble">Function <tt>DISASSEMBLE</tt></a></dt>

<dt><a href="#uncompile">Function <tt>EXT:UNCOMPILE</tt></a></dt>

<dt><a href="#documentation">Function <tt>DOCUMENTATION</tt></a></dt>

<dt><a href="#trace">Macro <tt>TRACE</tt></a></dt>

<dt><a href="#inspect">Function <tt>INSPECT</tt></a></dt>

<dt><a href="#space">Macro <tt>EXT:SPACE</tt></a></dt>

<dt><a href="#room">Function <tt>ROOM</tt></a></dt>

<dt><a href="#time">Macro <tt>TIME</tt></a></dt>

<dt><a href="#ed">Function <tt>ED</tt></a></dt>

<dt><a href="#clock">Clock Time</a></dt>

<dt><a href="#machine">Machine</a></dt>

<dt><a href="#apropos">Functions <tt>APROPOS</tt> &amp;
<tt>APROPOS-LIST</tt></a></dt>

<dt><a href="#dribble">Function <tt>DRIBBLE</tt></a></dt>

<dt><a href="#version">Function
<tt>LISP-IMPLEMENTATION-VERSION</tt></a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="debugger" name="debugger" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="debugger"
name="debugger" />Debugging Utilities <a
href="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html"
target="_top">[CLHS-25.1.2]</a></h2>
</div>
</div>

<p>The debugger may be invoked through the functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html"
target="_top"><tt>INVOKE-DEBUGGER</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_break.html"
target="_top"><tt>BREAK</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
target="_top"><tt>SIGNAL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_error.html"
target="_top"><tt>ERROR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html"
target="_top"><tt>CERROR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_warn.html"
target="_top"><tt>WARN</tt></a>. The stepper is invoked through the macro
<a href="http://www.lisp.org/HyperSpec/Body/mac_step.html"
target="_top"><tt>STEP</tt></a> . Debugger and stepper execute subordinate
<a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
target="_top">read-eval-print loop</a> (called "break loops") which are
similar to the main <a
href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
target="_top">read-eval-print loop</a> except for the prompt and the set
of available commands. Commands must be typed literally, without
surrounding quotes or white space. Each command has a keyword
abbreviation, indicated in the second column.</p>

<div class="table">
<p><a id="d0e17874" name="d0e17874" /><b>Table 25.1. Commands common to
the main loop, the debugger and the stepper</b></p>

<table summary="Commands common to the main loop, the debugger and
 the stepper" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Help</b></td>
<td><b>:h</b></td>
<td>prints a list of available commands</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e17896" name="d0e17896" /><b>Table 25.2. Commands common to
the debugger and the stepper</b></p>

<table summary="Commands common to the debugger and the
 stepper" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Abort</b></td>
<td><b>:a</b></td>
<td>abort to the next most recent <a
href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
target="_top">read-eval-print loop</a></td>
</tr>

<tr>
<td><b>Unwind</b></td>
<td><b>:uw</b></td>
<td>abort to the next most recent <a
href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
target="_top">read-eval-print loop</a></td>
</tr>
</tbody>
</table>
</div>

<p>The stack is organized into frames and other stack elements. Usually
every invocation of an interpreted function and every evaluation of an
interpreted form corresponds to one stack frame. Special forms such as <a
href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> produce special kinds of stack
frames.</p>

<p>In a break loop there is a current stack frame, which is initially the
most recent stack frame but can be moved using the debugger commands
<b>Up</b> and <b>Down</b>.</p>

<p>Evaluation of forms in a break loop occurs in the lexical environment
of the current stack frame but in the dynamic environment of the
debugger's caller. This means that to inspect or modify a lexical variable
all you have to do is to move to the current stack frame just below the
frame that corresponds to the form or the function call that binds that
variable.</p>

<p>There is a current "stack mode" which defines in how much detail the
stack is shown by the stack related debugger commands.</p>

<div class="table">
<p><a id="d0e17961" name="d0e17961" /><b>Table 25.3. Commands common to
the debugger and the stepper</b></p>

<table summary="Commands common to the debugger and the
 stepper" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Error</b></td>
<td><b>:e</b></td>
<td>print the last error message.</td>
</tr>

<tr>
<td><b>Mode-1</b></td>
<td><b>:m1</b></td>
<td>sets the current mode to 1: all the stack elements are considered.
This mode is fine for debugging compiled functions.</td>
</tr>

<tr>
<td><b>Mode-2</b></td>
<td><b>:m2</b></td>
<td>sets the current mode to 2: all the frames are considered.</td>
</tr>

<tr>
<td><b>Mode-3</b></td>
<td><b>:m3</b></td>
<td>sets the current mode to 3: only lexical frames (frames that
correspond to special forms that modify the lexical environment) are
considered.</td>
</tr>

<tr>
<td><b>Mode-4</b></td>
<td><b>:m4</b></td>
<td>sets the current mode to 4 (the default): only <a
href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> frames are considered. Every evaluation
of a form in the interpreter corresponds to an EVAL frame.</td>
</tr>

<tr>
<td><b>Mode-5</b></td>
<td><b>:m5</b></td>
<td>sets the current mode to 5: only <a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> frames are considered. Every invocation
of an interpreted function corresponds to one <a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> frame.</td>
</tr>

<tr>
<td><b>Where</b></td>
<td><b>:w</b></td>
<td>shows the current stack frame.</td>
</tr>

<tr>
<td><b>Up</b></td>
<td><b>:u</b></td>
<td>goes up one frame, i.e., to the caller if in mode-5</td>
</tr>

<tr>
<td><b>Down</b></td>
<td><b>:d</b></td>
<td>does down one frame, i.e., to the callee if in mode-5</td>
</tr>

<tr>
<td><b>Top</b></td>
<td><b>:t</b></td>
<td>goes to top frame, i.e., to the top-level form if in mode-4</td>
</tr>

<tr>
<td><b>Bottom</b></td>
<td><b>:b</b></td>
<td>goes to bottom (most recent) frame, i.e., most probably to the form or
function that caused the debugger to be entered.</td>
</tr>

<tr>
<td><b>Backtrace</b></td>
<td><b>:bt</b></td>
<td>lists the stack in current mode, bottom frame first, top frame
last.</td>
</tr>

<tr>
<td><b>Backtrace-1</b></td>
<td><b>:bt1</b></td>
<td>lists the stack in mode 1.</td>
</tr>

<tr>
<td><b>Backtrace-2</b></td>
<td><b>:bt2</b></td>
<td>lists the stack in mode 2.</td>
</tr>

<tr>
<td><b>Backtrace-3</b></td>
<td><b>:bt3</b></td>
<td>lists the stack in mode 3.</td>
</tr>

<tr>
<td><b>Backtrace-4</b></td>
<td><b>:bt4</b></td>
<td>lists the stack in mode 4.</td>
</tr>

<tr>
<td><b>Backtrace-5</b></td>
<td><b>:bt5</b></td>
<td>lists the stack in mode 5.</td>
</tr>

<tr>
<td><b>Frame-limit</b></td>
<td><b>:fl</b></td>
<td>set the frame-limit: this many frames will be printed in a backtrace
at most.</td>
</tr>

<tr>
<td><b>Backtrace-l</b></td>
<td><b>:bl</b></td>
<td>limit of frames to print will be prompted for.</td>
</tr>
</tbody>
</table>
</div>

<p>If the current stack frame is an <a
href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> frame, the following commands are
available as well:</p>

<div class="table">
<p><a id="d0e18171" name="d0e18171" /><b>Table 25.4. <a
href="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
target="_top"><tt>EVAL</tt></a>/<a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a>-specific commands</b></p>

<table summary="EVAL/APPLY-specific commands" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Break+</b></td>
<td><b>:br+</b></td>
<td>sets a breakpoint in the current frame. When the corresponding form or
function will be left, the debugger will be entered again, with the
variable <a href="#trace-val"><tt>EXT:*TRACE-VALUES*</tt></a> containing a
list of its values.</td>
</tr>

<tr>
<td><b>Break-</b></td>
<td><b>:br-</b></td>
<td>removes a breakpoint from the current frame.</td>
</tr>

<tr>
<td><b>Redo</b></td>
<td><b>:rd</b></td>
<td>re-evaluates the corresponding form or function call. This command can
be used to restart parts of a computation without aborting it
entirely.</td>
</tr>

<tr>
<td><b>Return</b></td>
<td><b>:rt</b></td>
<td>leaves the current frame. You will be prompted for the return
values.</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e18231" name="d0e18231" /><b>Table 25.5. Commands specific to
the debugger</b></p>

<table summary="Commands specific to the debugger" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Continue</b></td>
<td><b>:c</b></td>
<td>continues evaluation of the program.</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e18253" name="d0e18253" /><b>Table 25.6. Commands specific to
the stepper</b></p>

<table summary="Commands specific to the stepper" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>command</th>
<th>abbreviation</th>
<th>operation</th>
</tr>
</thead>

<tbody>
<tr>
<td><b>Step</b></td>
<td><b>:s</b></td>
<td>step into a form: evaluate this form in single step mode</td>
</tr>

<tr>
<td><b>Next</b></td>
<td><b>:n</b></td>
<td>step over a form: evaluate this form at once</td>
</tr>

<tr>
<td><b>Over</b></td>
<td><b>:o</b></td>
<td>step over this level: evaluate at once up to the next return</td>
</tr>

<tr>
<td><b>Continue</b></td>
<td><b>:c</b></td>
<td>switch off single step mode, continue evaluation</td>
</tr>
</tbody>
</table>
</div>

<p>The stepper is usually used like this: If some form returns a strange
value or results in an error, call <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_step.html"
target="_top"><tt>STEP</tt></a> <i><tt>form</tt></i>)</tt> and navigate
using the commands <b>Step</b> and <b>Next</b> until you reach the form
you regard as responsible. If you are too fast (execute <b>Next</b> once
and get the error), there is no way back; you have to restart the entire
stepper session. If you are too slow (stepped into a function or a form
which certainly is OK), a couple of <b>Next</b> commands or one
<b>Over</b> command will help.</p>
</div>

<div class="section"><a id="environment-dict" name="environment-dict" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="environment-dict"
name="environment-dict" />The Environment Dictionary <a
href="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html"
target="_top">[CLHS-25.2]</a></h2>
</div>
</div>

<div class="section"><a id="disassemble" name="disassemble" />
<div class="titlepage">
<div>
<h3 class="title"><a id="disassemble" name="disassemble" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
target="_top"><tt>DISASSEMBLE</tt></a></h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e18342" name="d0e18342" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd><a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
target="_top"><tt>DISASSEMBLE</tt></a> can disassemble to machine code,
provided that <a href="http://www.gnu.org" target="_top">GNU</a> gdb is
present. In that case the argument may be a <tt>system-function</tt>, a
<tt>foreign-function</tt>, a special operator indicator, a symbol denoting
one of these, a number, or a string.</dd>
</dl>
</div>
</div>

<div class="section"><a id="uncompile" name="uncompile" />
<div class="titlepage">
<div>
<h3 class="title"><a id="uncompile" name="uncompile" />Function <a
href="#uncompile"
title="Function EXT:UNCOMPILE"><tt>EXT:UNCOMPILE</tt></a></h3>
</div>
</div>

<p>The function <a href="#uncompile"
title="Function EXT:UNCOMPILE"><tt>EXT:UNCOMPILE</tt></a> does the
converse of <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
target="_top"><tt>COMPILE</tt></a>: <tt>(<a href="#uncompile"
title="Function EXT:UNCOMPILE"><tt>EXT:UNCOMPILE</tt></a>
<i><tt>function</tt></i>)</tt> reverts a compiled <i><tt>function</tt></i>
(name), that has been entered or loaded in the same session and then
compiled, back to its interpreted form.</p>
</div>

<div class="section"><a id="documentation" name="documentation" />
<div class="titlepage">
<div>
<h3 class="title"><a id="documentation" name="documentation" />Function <a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html"
target="_top"><tt>DOCUMENTATION</tt></a></h3>
</div>
</div>

<p>No on-line documentation is available for the system functions (yet).
<a
href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html"
target="_top"><tt>DOCUMENTATION</tt></a> still has the [<a
href="#CLtL1">CLtL1</a>] implementation.</p>

<p><a id="browser" name="browser" /><b><tt>ext:clhs</tt>.&nbsp;</b> [<a
href="#CLHS">Common Lisp HyperSpec</a>] access is provided via
<tt>(</tt>ext:clhs <i><tt>symbol</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:browser</tt>) function, which
uses your web browser. <i><tt>browser</tt></i> should be a valid keyword
in the <tt>custom:*browsers*</tt> <a
href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
target="_top">alist</a>.</p>
</div>

<div class="section"><a id="trace" name="trace" />
<div class="titlepage">
<div>
<h3 class="title"><a id="trace" name="trace" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
target="_top"><tt>TRACE</tt></a></h3>
</div>
</div>

<p><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
target="_top"><tt>TRACE</tt></a> <i><tt>function</tt></i> ...)</tt> makes
the functions <i><tt>function</tt></i>, ... traced.
<i><tt>function</tt></i> should be either a symbol or a list
<tt>(<i><tt>symbol</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:suppress-if</tt>
<tt>:step-if</tt> <tt>:pre</tt> <tt>:post</tt> <tt>:pre-break-if</tt>
<tt>:post-break-if</tt> <tt>:pre-print</tt> <tt>:post-print</tt>
<tt>:PRINT</tt>)</tt>, where</p>

<div class="variablelist">
<dl>
<dt><a id="d0e18505" name="d0e18505" /><span
class="term"><tt>:suppress-if</tt> <i><tt>form</tt></i></span></dt>

<dd>no trace output as long as <i><tt>form</tt></i> is true</dd>

<dt><a id="d0e18518" name="d0e18518" /><span
class="term"><tt>:step-if</tt> <i><tt>form</tt></i></span></dt>

<dd>invokes the stepper as soon as <i><tt>form</tt></i> is true</dd>

<dt><a id="d0e18531" name="d0e18531" /><span class="term"><tt>:pre</tt>
<i><tt>form</tt></i></span></dt>

<dd>evaluates <i><tt>form</tt></i> before calling the function</dd>

<dt><a id="d0e18544" name="d0e18544" /><span class="term"><tt>:post</tt>
<i><tt>form</tt></i></span></dt>

<dd>evaluates <i><tt>form</tt></i> after return from the function</dd>

<dt><a id="d0e18557" name="d0e18557" /><span
class="term"><tt>:pre-break-if</tt> <i><tt>form</tt></i></span></dt>

<dd>goes into the break loop before calling the function if
<i><tt>form</tt></i> is true</dd>

<dt><a id="d0e18570" name="d0e18570" /><span
class="term"><tt>:post-break-if</tt> <i><tt>form</tt></i></span></dt>

<dd>goes into the break loop after return from the function if
<i><tt>form</tt></i> is true</dd>

<dt><a id="d0e18583" name="d0e18583" /><span
class="term"><tt>:pre-print</tt> <i><tt>form</tt></i></span></dt>

<dd>prints the values of <i><tt>form</tt></i> before calling the
function</dd>

<dt><a id="d0e18596" name="d0e18596" /><span
class="term"><tt>:post-print</tt> <i><tt>form</tt></i></span></dt>

<dd>prints the values of <i><tt>form</tt></i> after return from the
function</dd>

<dt><a id="d0e18609" name="d0e18609" /><span class="term"><tt>:PRINT</tt>
<i><tt>form</tt></i></span></dt>

<dd>prints the values of <i><tt>form</tt></i> both before calling and
after return from the function</dd>
</dl>
</div>

<p>In all these forms you can access the following variables:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e18625" name="d0e18625" /><span
class="term"><tt>EXT:*TRACE-FUNCTION*</tt></span></dt>

<dd>the function itself</dd>

<dt><a id="d0e18632" name="d0e18632" /><span
class="term"><tt>EXT:*TRACE-ARGS*</tt></span></dt>

<dd>the arguments to the function</dd>

<dt><a id="d0e18639" name="d0e18639" /><span
class="term"><tt>EXT:*TRACE-FORM*</tt></span></dt>

<dd>the function/macro call as form</dd>

<dt><a id="trace-val" name="trace-val" /><span class="term"><a
href="#trace-val"><tt>EXT:*TRACE-VALUES*</tt></a></span></dt>

<dd>after return from the function: the list of return values from the
function call</dd>
</dl>
</div>

and you can leave the function call with specified values by using <a
href="http://www.lisp.org/HyperSpec/Body/mac_return.html"
target="_top"><tt>RETURN</tt></a>.
<br />
<br />
<p><a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
target="_top"><tt>TRACE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
target="_top"><tt>UNTRACE</tt></a> are also applicable to functions
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <i><tt>symbol</tt></i>)</tt> and to
macros, but not to locally defined functions and macros.</p>
</div>

<div class="section"><a id="inspect" name="inspect" />
<div class="titlepage">
<div>
<h3 class="title"><a id="inspect" name="inspect" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a></h3>
</div>
</div>

<p>The function <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> takes a keyword argument
<tt>:frontend</tt>, which specifies the way <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> will interact
with the user.</p>

<div class="variablelist">
<p><b>Available <tt>:frontend</tt>s for <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a></b></p>

<dl>
<dt><a id="d0e18710" name="d0e18710" /><span
class="term"><tt>:tty</tt></span></dt>

<dd>The interaction is conducted via the <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> stream. Please use the
<b><tt>:h</tt></b> command to get the list of all available commands.</dd>

<dt><a id="d0e18724" name="d0e18724" /><span
class="term"><tt>:http</tt></span></dt>

<dd>
<p>A window in your Web browser (specified by the <a
href="#browser"><tt>:BROWSER</tt></a> keyword argument) is opened and it
is controlled by <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> via a <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>,
using the HTTP protocol. You should be able to use all the standard
browser features.</p>

<p>Since <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is
not multitasking at this time, you will not be able to do anything else
during an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> session. Please click on the
<b><tt>quit</tt></b> link to terminate the session.</p>

<p>Please be aware though, that once you terminate an <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> session, all links in all <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> windows in your browser will become
obsolete and using them in a new <a
href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
target="_top"><tt>INSPECT</tt></a> session will result in unpredictable
behavior.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="space" name="space" />
<div class="titlepage">
<div>
<h3 class="title"><a id="space" name="space" />Macro <a href="#space"
title="Macro EXT:SPACE"><tt>EXT:SPACE</tt></a></h3>
</div>
</div>

<p>The macro <a href="#space"
title="Macro EXT:SPACE"><tt>EXT:SPACE</tt></a> is like the macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_time.html"
target="_top"><tt>TIME</tt></a>: <tt>(<a href="#space"
title="Macro EXT:SPACE"><tt>EXT:SPACE</tt></a> <i><tt>form</tt></i>)</tt>
evaluates the <i><tt>form</tt></i>, and, as a side effect, outputs
information about the memory allocations caused by this evaluation. It
also prints everything printed by <a href="#time"
title="Macro TIME"><tt>TIME</tt></a>.</p>
</div>

<div class="section"><a id="room" name="room" />
<div class="titlepage">
<div>
<h3 class="title"><a id="room" name="room" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_room.html"
target="_top"><tt>ROOM</tt></a></h3>
</div>
</div>

<p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html"
target="_top"><tt>ROOM</tt></a> returns two values: the number of bytes
currently occupied by Lisp objects, and the number of bytes that can be
allocated before the next regular <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ion
occurs.</p>

<p>The function <span class="strong"><i><tt>EXT:GC</tt></i></span> starts
a global <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ion
and its return value has the same meaning as the second value of <a
href="http://www.lisp.org/HyperSpec/Body/fun_room.html"
target="_top"><tt>ROOM</tt></a>.</p>
</div>

<div class="section"><a id="time" name="time" />
<div class="titlepage">
<div>
<h3 class="title"><a id="time" name="time" />Macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_time.html"
target="_top"><tt>TIME</tt></a></h3>
</div>
</div>

<p>The timing data printed by the macro <a
href="http://www.lisp.org/HyperSpec/Body/mac_time.html"
target="_top"><tt>TIME</tt></a> includes: The real time (elapsed time),
the run time (processor time for this process), the number of bytes
allocated (use the <a href="#space"
title="Macro EXT:SPACE"><tt>EXT:SPACE</tt></a> macro for more detailed
analysis), and the number of <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ions
performed, if any.</p>
</div>

<div class="section"><a id="ed" name="ed" />
<div class="titlepage">
<div>
<h3 class="title"><a id="ed" name="ed" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_ed.html"
target="_top"><tt>ED</tt></a></h3>
</div>
</div>

<p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html"
target="_top"><tt>ED</tt></a> calls the external editor specified by the
variable <span class="strong"><i><tt>CUSTOM:*EDITOR*</tt></i></span> (see
<tt>config.lisp</tt>). If the argument is a function name which was
defined in the current session (not loaded from a file), the program text
to be edited is a pretty-printed version (without comments) of the text
which was used to define the function.</p>
</div>

<div class="section"><a id="clock" name="clock" />
<div class="titlepage">
<div>
<h3 class="title"><a id="clock" name="clock" />Clock Time</h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e18874" name="d0e18874" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms
only.</span></dt>

<dd>The variable <span
class="strong"><i><tt>CUSTOM:*DEFAULT-TIME-ZONE*</tt></i></span> contains
the default time zone used by <a
href="http://www.lisp.org/HyperSpec/Body/fun_encode-universal-time.html"
target="_top"><tt>ENCODE-UNIVERSAL-TIME</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_decode-universal-time.html"
target="_top"><tt>DECODE-UNIVERSAL-TIME</tt></a>. It is initially set to
-1 (which means 1 hour east of Greenwich, i.e., Mid European Time).</dd>
</dl>
</div>

<p>The <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#time_zone"
target="_top">time zone</a> in a decoded time must not necessarily be an
integer, but (as float or rational number) it should be a multiple of
<tt>1/3600</tt>.</p>

<div class="table">
<p><a id="d0e18917" name="d0e18917" /><b>Table 25.7. Platform
dependent</b></p>

<table summary="Platform dependent" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>platform</th>
<th><a href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a>, <a href="http://www.freedos.org/"
target="_top"><span class="strong"><i>DOS</i></span></a>, <a
href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a></th>
<th><a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a></th>
<th><a href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a></th>
<th><a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a></th>
</tr>
</thead>

<tbody>
<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/convar_intern_s-per-second.html"
target="_top"><tt>INTERNAL-TIME-UNITS-PER-SECOND</tt></a></td>
<td>100</td>
<td>50</td>
<td>1,000,000</td>
<td>10,000,000</td>
</tr>
</tbody>
</table>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_get-internal-run-time.html"
target="_top"><tt>GET-INTERNAL-RUN-TIME</tt></a> returns the amount of run
time consumed by the current <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> process since its startup.</p>
</div>

<div class="section"><a id="machine" name="machine" />
<div class="titlepage">
<div>
<h3 class="title"><a id="machine" name="machine" />Machine</h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e18977" name="d0e18977" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>The functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
target="_top"><tt>SHORT-SITE-NAME</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
target="_top"><tt>LONG-SITE-NAME</tt></a> should be defined in a
site-specific <tt>config.lisp</tt> file.</dd>

<dt><a id="d0e19003" name="d0e19003" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a> platforms
only.</span></dt>

<dd>The functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_machine-type.html"
target="_top"><tt>MACHINE-TYPE</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_machine-version.html"
target="_top"><tt>MACHINE-VERSION</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html"
target="_top"><tt>MACHINE-INSTANCE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
target="_top"><tt>SHORT-SITE-NAME</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
target="_top"><tt>LONG-SITE-NAME</tt></a> should be defined by every user
in his user-specific <tt>config.lisp</tt> file.</dd>
</dl>
</div>
</div>

<div class="section"><a id="apropos" name="apropos" />
<div class="titlepage">
<div>
<h3 class="title"><a id="apropos" name="apropos" />Functions <a
href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
target="_top"><tt>APROPOS</tt></a> &amp; <a
href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
target="_top"><tt>APROPOS-LIST</tt></a></h3>
</div>
</div>

<p>The search performed by <a
href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
target="_top"><tt>APROPOS</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
target="_top"><tt>APROPOS-LIST</tt></a> is case-insensitive.</p>
</div>

<div class="section"><a id="dribble" name="dribble" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dribble" name="dribble" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html"
target="_top"><tt>DRIBBLE</tt></a></h3>
</div>
</div>

<p>If <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html"
target="_top"><tt>DRIBBLE</tt></a> is called with an argument, and
dribbling is already enabled, a warning is printed, and the new dribbling
request is ignored.</p>
</div>

<div class="section"><a id="version" name="version" />
<div class="titlepage">
<div>
<h3 class="title"><a id="version" name="version" />Function <a
href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html"
target="_top"><tt>LISP-IMPLEMENTATION-VERSION</tt></a></h3>
</div>
</div>

<p><a
href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html"
target="_top"><tt>LISP-IMPLEMENTATION-VERSION</tt></a> returns the numeric
version (like <tt>3.14</tt>), and the release date (like
<tt>"1999-07-21"</tt>). When running on the same machine on which <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> was built, it
appends the binary build and <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a> dump date in
universal time (like <tt>3141592654</tt>). When running on a different
machine, it appends the <a
href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html"
target="_top"><tt>MACHINE-INSTANCE</tt></a> of the machine on which it was
built.</p>
</div>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="glossary" name="glossary" />Chapter 26. Glossary
[CLHS-26]</h2>
</div>
</div>

<p>No notes.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="appendix" name="appendix" />Chapter 27. Appendix
[CLHS-a]</h2>
</div>
</div>

<p>No notes.</p>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="issues" name="issues" />Chapter 28. X3J13 Issue
Index [CLHS-ic]</h2>
</div>
</div>

<p>This is the list of ANSI CL issues and their current status in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>, i.e., whether
<a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> supports
code that makes use of the functionality specified by the vote.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e19142" name="d0e19142" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss001.html"
target="_top">&amp;ENVIRONMENT-BINDING-ORDER:FIRST</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19149" name="d0e19149" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss002.html"
target="_top">ACCESS-ERROR-NAME</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19156" name="d0e19156" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss003.html"
target="_top">ADJUST-ARRAY-DISPLACEMENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19163" name="d0e19163" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss004.html"
target="_top">ADJUST-ARRAY-FILL-POINTER</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19170" name="d0e19170" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss005.html"
target="_top">ADJUST-ARRAY-NOT-ADJUSTABLE:IMPLICIT-COPY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19177" name="d0e19177" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss006.html"
target="_top">ALLOCATE-INSTANCE:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19184" name="d0e19184" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss007.html"
target="_top">ALLOW-LOCAL-INLINE:INLINE-NOTINLINE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19191" name="d0e19191" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss008.html"
target="_top">ALLOW-OTHER-KEYS-NIL:PERMIT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19198" name="d0e19198" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss009.html"
target="_top">AREF-1D</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19205" name="d0e19205" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss010.html"
target="_top">ARGUMENT-MISMATCH-ERROR-AGAIN:CONSISTENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19212" name="d0e19212" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss011.html"
target="_top">ARGUMENT-MISMATCH-ERROR-MOON:FIX</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19219" name="d0e19219" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss012.html"
target="_top">ARGUMENT-MISMATCH-ERROR:MORE-CLARIFICATIONS</a></span></dt>

<dd>yes, except for argument list checking in <a
href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
target="_top"><tt>CALL-NEXT-METHOD</tt></a> in compiled code (items
11,12)</dd>

<dt><a id="d0e19230" name="d0e19230" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss013.html"
target="_top">ARGUMENTS-UNDERSPECIFIED:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19237" name="d0e19237" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss014.html"
target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19244" name="d0e19244" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss015.html"
target="_top">ARRAY-TYPE-ELEMENT-TYPE-SEMANTICS:UNIFY-UPGRADING</a></span></dt>

<dd>yes for arrays, no for complex numbers</dd>

<dt><a id="d0e19251" name="d0e19251" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss016.html"
target="_top">ASSERT-ERROR-TYPE:ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19258" name="d0e19258" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss017.html"
target="_top">ASSOC-RASSOC-IF-KEY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19265" name="d0e19265" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss018.html"
target="_top">ASSOC-RASSOC-IF-KEY:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19272" name="d0e19272" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss019.html"
target="_top">BOA-AUX-INITIALIZATION:ERROR-ON-READ</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19279" name="d0e19279" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss020.html"
target="_top">BREAK-ON-WARNINGS-OBSOLETE:REMOVE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19286" name="d0e19286" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss021.html"
target="_top">BROADCAST-STREAM-RETURN-VALUES:CLARIFY-MINIMALLY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19293" name="d0e19293" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss022.html"
target="_top">BUTLAST-NEGATIVE:SHOULD-SIGNAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19300" name="d0e19300" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss023.html"
target="_top">CHANGE-CLASS-INITARGS:PERMIT</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19307" name="d0e19307" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss024.html"
target="_top">CHAR-NAME-CASE:X3J13-MAR-91</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19314" name="d0e19314" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss025.html"
target="_top">CHARACTER-LOOSE-ENDS:FIX</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19321" name="d0e19321" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss026.html"
target="_top">CHARACTER-PROPOSAL:2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19328" name="d0e19328" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss027.html"
target="_top">CHARACTER-PROPOSAL:2-1-1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19335" name="d0e19335" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss028.html"
target="_top">CHARACTER-PROPOSAL:2-1-2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19342" name="d0e19342" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss029.html"
target="_top">CHARACTER-PROPOSAL:2-2-1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19349" name="d0e19349" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss030.html"
target="_top">CHARACTER-PROPOSAL:2-3-1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19356" name="d0e19356" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss031.html"
target="_top">CHARACTER-PROPOSAL:2-3-2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19363" name="d0e19363" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss032.html"
target="_top">CHARACTER-PROPOSAL:2-3-3</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19370" name="d0e19370" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss033.html"
target="_top">CHARACTER-PROPOSAL:2-3-4</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19377" name="d0e19377" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss034.html"
target="_top">CHARACTER-PROPOSAL:2-3-5</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19384" name="d0e19384" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss035.html"
target="_top">CHARACTER-PROPOSAL:2-3-6</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19391" name="d0e19391" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss036.html"
target="_top">CHARACTER-PROPOSAL:2-4-1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19398" name="d0e19398" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss037.html"
target="_top">CHARACTER-PROPOSAL:2-4-2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19405" name="d0e19405" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss038.html"
target="_top">CHARACTER-PROPOSAL:2-4-3</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19412" name="d0e19412" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss039.html"
target="_top">CHARACTER-PROPOSAL:2-5-2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19419" name="d0e19419" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss040.html"
target="_top">CHARACTER-PROPOSAL:2-5-6</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19426" name="d0e19426" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss041.html"
target="_top">CHARACTER-PROPOSAL:2-5-7</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19433" name="d0e19433" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss042.html"
target="_top">CHARACTER-PROPOSAL:2-6-1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19440" name="d0e19440" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss043.html"
target="_top">CHARACTER-PROPOSAL:2-6-2</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19447" name="d0e19447" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss044.html"
target="_top">CHARACTER-PROPOSAL:2-6-3</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19454" name="d0e19454" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss045.html"
target="_top">CHARACTER-PROPOSAL:2-6-5</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19461" name="d0e19461" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss046.html"
target="_top">CHARACTER-VS-CHAR:LESS-INCONSISTENT-SHORT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19468" name="d0e19468" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss047.html"
target="_top">CLASS-OBJECT-SPECIALIZER:AFFIRM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19475" name="d0e19475" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss048.html"
target="_top">CLOS-CONDITIONS-AGAIN:ALLOW-SUBSET</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19482" name="d0e19482" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss049.html"
target="_top">CLOS-CONDITIONS:INTEGRATE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19489" name="d0e19489" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss050.html"
target="_top">CLOS-ERROR-CHECKING-ORDER:NO-APPLICABLE-METHOD-FIRST</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19496" name="d0e19496" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss051.html"
target="_top">CLOS-MACRO-COMPILATION:MINIMAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19503" name="d0e19503" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss052.html"
target="_top">CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19510" name="d0e19510" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss053.html"
target="_top">CLOSED-STREAM-OPERATIONS:ALLOW-INQUIRY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19517" name="d0e19517" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss054.html"
target="_top">COERCING-SETF-NAME-TO-FUNCTION:ALL-FUNCTION-NAMES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19524" name="d0e19524" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss055.html"
target="_top">COLON-NUMBER</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19531" name="d0e19531" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss056.html"
target="_top">COMMON-FEATURES:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19538" name="d0e19538" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss057.html"
target="_top">COMMON-TYPE:REMOVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19545" name="d0e19545" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss058.html"
target="_top">COMPILE-ARGUMENT-PROBLEMS-AGAIN:FIX</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19552" name="d0e19552" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss059.html"
target="_top">COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19559" name="d0e19559" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss060.html"
target="_top">COMPILE-FILE-OUTPUT-FILE-DEFAULTS:INPUT-FILE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19566" name="d0e19566" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss061.html"
target="_top">COMPILE-FILE-PACKAGE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19573" name="d0e19573" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss062.html"
target="_top">COMPILE-FILE-PATHNAME-ARGUMENTS:MAKE-CONSISTENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19580" name="d0e19580" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss063.html"
target="_top">COMPILE-FILE-SYMBOL-HANDLING:NEW-REQUIRE-CONSISTENCY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19587" name="d0e19587" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss064.html"
target="_top">COMPILED-FUNCTION-REQUIREMENTS:TIGHTEN</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19594" name="d0e19594" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss065.html"
target="_top">COMPILER-DIAGNOSTICS:USE-HANDLER</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19601" name="d0e19601" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss066.html"
target="_top">COMPILER-LET-CONFUSION:ELIMINATE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19608" name="d0e19608" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss067.html"
target="_top">COMPILER-VERBOSITY:LIKE-LOAD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19615" name="d0e19615" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss068.html"
target="_top">COMPILER-WARNING-STREAM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19622" name="d0e19622" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss069.html"
target="_top">COMPLEX-ATAN-BRANCH-CUT:TWEAK</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19629" name="d0e19629" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss070.html"
target="_top">COMPLEX-ATANH-BOGUS-FORMULA:TWEAK-MORE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19636" name="d0e19636" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss071.html"
target="_top">COMPLEX-RATIONAL-RESULT:EXTEND</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19643" name="d0e19643" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss072.html"
target="_top">COMPUTE-APPLICABLE-METHODS:GENERIC</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19650" name="d0e19650" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss073.html"
target="_top">CONCATENATE-SEQUENCE:SIGNAL-ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19657" name="d0e19657" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss074.html"
target="_top">CONDITION-ACCESSORS-SETFABLE:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19664" name="d0e19664" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss075.html"
target="_top">CONDITION-RESTARTS:BUGGY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19671" name="d0e19671" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss076.html"
target="_top">CONDITION-RESTARTS:PERMIT-ASSOCIATION</a></span></dt>

<dd>yes, except for (6)</dd>

<dt><a id="d0e19678" name="d0e19678" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss077.html"
target="_top">CONDITION-SLOTS:HIDDEN</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19685" name="d0e19685" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss078.html"
target="_top">CONS-TYPE-SPECIFIER:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19692" name="d0e19692" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss079.html"
target="_top">CONSTANT-CIRCULAR-COMPILATION:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19699" name="d0e19699" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss080.html"
target="_top">CONSTANT-COLLAPSING:GENERALIZE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19706" name="d0e19706" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss081.html"
target="_top">CONSTANT-COMPILABLE-TYPES:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19713" name="d0e19713" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss082.html"
target="_top">CONSTANT-FUNCTION-COMPILATION:NO</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19720" name="d0e19720" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss083.html"
target="_top">CONSTANT-MODIFICATION:DISALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19727" name="d0e19727" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss084.html"
target="_top">CONSTANTP-DEFINITION:INTENTIONAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19734" name="d0e19734" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss085.html"
target="_top">CONSTANTP-ENVIRONMENT:ADD-ARG</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19741" name="d0e19741" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss086.html"
target="_top">CONTAGION-ON-NUMERICAL-COMPARISONS:TRANSITIVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19748" name="d0e19748" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss087.html"
target="_top">COPY-SYMBOL-COPY-PLIST:COPY-LIST</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19755" name="d0e19755" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss088.html"
target="_top">COPY-SYMBOL-PRINT-NAME:EQUAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19762" name="d0e19762" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss089.html"
target="_top">DATA-IO:ADD-SUPPORT</a></span></dt>

<dd>yes for <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
target="_top"><tt>*PRINT-READABLY*</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/var_stread-evalst.html"
target="_top"><tt>*READ-EVAL*</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_with-stan_rd-io-syntax.html"
target="_top"><tt>WITH-STANDARD-IO-SYNTAX</tt></a>, no for everything
else</dd>

<dt><a id="d0e19781" name="d0e19781" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss090.html"
target="_top">DATA-TYPES-HIERARCHY-UNDERSPECIFIED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19788" name="d0e19788" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss091.html"
target="_top">DEBUGGER-HOOK-VS-BREAK:CLARIFY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19795" name="d0e19795" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss092.html"
target="_top">DECLARATION-SCOPE:NO-HOISTING</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19802" name="d0e19802" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss093.html"
target="_top">DECLARE-ARRAY-TYPE-ELEMENT-REFERENCES:RESTRICTIVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19809" name="d0e19809" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss094.html"
target="_top">DECLARE-FUNCTION-AMBIGUITY:DELETE-FTYPE-ABBREVIATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19816" name="d0e19816" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss095.html"
target="_top">DECLARE-MACROS:FLUSH</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19823" name="d0e19823" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss096.html"
target="_top">DECLARE-TYPE-FREE:LEXICAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19830" name="d0e19830" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss097.html"
target="_top">DECLS-AND-DOC</a></span></dt>

<dd>??</dd>

<dt><a id="d0e19837" name="d0e19837" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss098.html"
target="_top">DECODE-UNIVERSAL-TIME-DAYLIGHT:LIKE-ENCODE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19844" name="d0e19844" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss099.html"
target="_top">DEFCONSTANT-SPECIAL:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19851" name="d0e19851" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss100.html"
target="_top">DEFGENERIC-DECLARE:ALLOW-MULTIPLE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19858" name="d0e19858" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss101.html"
target="_top">DEFINE-COMPILER-MACRO:X3J13-NOV89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19865" name="d0e19865" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss102.html"
target="_top">DEFINE-CONDITION-SYNTAX:INCOMPATIBLY-MORE-LIKE-DEFCLASS+EMPHASIZE-READ-ONLY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19872" name="d0e19872" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss103.html"
target="_top">DEFINE-METHOD-COMBINATION-BEHAVIOR:CLARIFY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19879" name="d0e19879" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss104.html"
target="_top">DEFINING-MACROS-NON-TOP-LEVEL:ALLOW</a></span></dt>

<dd>no</dd>

<dt><a id="d0e19886" name="d0e19886" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss105.html"
target="_top">DEFMACRO-BLOCK-SCOPE:EXCLUDES-BINDINGS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19893" name="d0e19893" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss106.html"
target="_top">DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19900" name="d0e19900" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss107.html"
target="_top">DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19907" name="d0e19907" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss108.html"
target="_top">DEFPACKAGE:ADDITION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19914" name="d0e19914" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss109.html"
target="_top">DEFSTRUCT-CONSTRUCTOR-KEY-MIXTURE:ALLOW-KEY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19921" name="d0e19921" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss110.html"
target="_top">DEFSTRUCT-CONSTRUCTOR-OPTIONS:EXPLICIT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19928" name="d0e19928" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss111.html"
target="_top">DEFSTRUCT-CONSTRUCTOR-SLOT-VARIABLES:NOT-BOUND</a></span></dt>

<dd>no (furthermore it gets hairy when applied to <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html" target="_top">BOA
constructors</a>)</dd>

<dt><a id="d0e19938" name="d0e19938" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss112.html"
target="_top">DEFSTRUCT-COPIER-ARGUMENT-TYPE:RESTRICT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19945" name="d0e19945" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss113.html"
target="_top">DEFSTRUCT-COPIER:ARGUMENT-TYPE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19952" name="d0e19952" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss114.html"
target="_top">DEFSTRUCT-DEFAULT-VALUE-EVALUATION:IFF-NEEDED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19959" name="d0e19959" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss115.html"
target="_top">DEFSTRUCT-INCLUDE-DEFTYPE:EXPLICITLY-UNDEFINED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19966" name="d0e19966" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss116.html"
target="_top">DEFSTRUCT-PRINT-FUNCTION-AGAIN:X3J13-MAR-93</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19973" name="d0e19973" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss117.html"
target="_top">DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19980" name="d0e19980" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss118.html"
target="_top">DEFSTRUCT-REDEFINITION:ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19987" name="d0e19987" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss119.html"
target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e19994" name="d0e19994" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss120.html"
target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NUMBER</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20001" name="d0e20001" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss121.html"
target="_top">DEFTYPE-DESTRUCTURING:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20008" name="d0e20008" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss122.html"
target="_top">DEFTYPE-KEY:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20015" name="d0e20015" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss123.html"
target="_top">DEFVAR-DOCUMENTATION:UNEVALUATED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20022" name="d0e20022" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss124.html"
target="_top">DEFVAR-INIT-TIME:NOT-DELAYED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20029" name="d0e20029" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss125.html"
target="_top">DEFVAR-INITIALIZATION:CONSERVATIVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20036" name="d0e20036" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss126.html"
target="_top">DEPRECATION-POSITION:LIMITED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20043" name="d0e20043" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss127.html"
target="_top">DESCRIBE-INTERACTIVE:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20050" name="d0e20050" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss128.html"
target="_top">DESCRIBE-UNDERSPECIFIED:DESCRIBE-OBJECT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20057" name="d0e20057" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss129.html"
target="_top">DESTRUCTIVE-OPERATIONS:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20064" name="d0e20064" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss130.html"
target="_top">DESTRUCTURING-BIND:NEW-MACRO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20071" name="d0e20071" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss131.html"
target="_top">DISASSEMBLE-SIDE-EFFECT:DO-NOT-INSTALL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20078" name="d0e20078" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss132.html"
target="_top">DISPLACED-ARRAY-PREDICATE:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20085" name="d0e20085" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss133.html"
target="_top">DO-SYMBOLS-BLOCK-SCOPE:ENTIRE-FORM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20092" name="d0e20092" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss134.html"
target="_top">DO-SYMBOLS-DUPLICATES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20099" name="d0e20099" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss135.html"
target="_top">DOCUMENTATION-FUNCTION-BUGS:FIX</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20106" name="d0e20106" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss136.html"
target="_top">DOCUMENTATION-FUNCTION-TANGLED:REQUIRE-ARGUMENT</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20113" name="d0e20113" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss137.html"
target="_top">DOTIMES-IGNORE:X3J13-MAR91</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20120" name="d0e20120" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss138.html"
target="_top">DOTTED-LIST-ARGUMENTS:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20127" name="d0e20127" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss139.html"
target="_top">DOTTED-MACRO-FORMS:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20134" name="d0e20134" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss140.html"
target="_top">DRIBBLE-TECHNIQUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20141" name="d0e20141" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss141.html"
target="_top">DYNAMIC-EXTENT-FUNCTION:EXTEND</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20148" name="d0e20148" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss142.html"
target="_top">DYNAMIC-EXTENT:NEW-DECLARATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20155" name="d0e20155" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss143.html"
target="_top">EQUAL-STRUCTURE:MAYBE-STATUS-QUO</a></span></dt>

<dd>no for <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html"
target="_top"><tt>EQUALP</tt></a> on <a href="#hash"
title="Chapter 18. Hash Tables
 [CLHS-18]">hash tables</a>, yes for everything else</dd>

<dt><a id="d0e20169" name="d0e20169" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss144.html"
target="_top">ERROR-TERMINOLOGY-WARNING:MIGHT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20176" name="d0e20176" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss145.html"
target="_top">EVAL-OTHER:SELF-EVALUATE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20183" name="d0e20183" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss146.html"
target="_top">EVAL-TOP-LEVEL:LOAD-LIKE-COMPILE-FILE</a></span></dt>

<dd>yes, except maybe if <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> <a href="#loadfile"
title="Function LOAD"><tt>:COMPILING</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a></dd>

<dt><a id="d0e20202" name="d0e20202" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss147.html"
target="_top">EVAL-WHEN-NON-TOP-LEVEL:GENERALIZE-EVAL-NEW-KEYWORDS</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20209" name="d0e20209" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss148.html"
target="_top">EVAL-WHEN-OBSOLETE-KEYWORDS:X3J13-MAR-1993</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20216" name="d0e20216" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss149.html"
target="_top">EVALHOOK-STEP-CONFUSION:FIX</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20223" name="d0e20223" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss150.html"
target="_top">EVALHOOK-STEP-CONFUSION:X3J13-NOV-89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20230" name="d0e20230" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss151.html"
target="_top">EXIT-EXTENT-AND-CONDITION-SYSTEM:LIKE-DYNAMIC-BINDINGS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20237" name="d0e20237" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss152.html"
target="_top">EXIT-EXTENT:MINIMAL</a></span></dt>

<dd>yes, actually implement MEDIUM</dd>

<dt><a id="d0e20244" name="d0e20244" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss153.html"
target="_top">EXPT-RATIO:P.211</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20251" name="d0e20251" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss154.html"
target="_top">EXTENSIONS-POSITION:DOCUMENTATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20258" name="d0e20258" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss155.html"
target="_top">EXTERNAL-FORMAT-FOR-EVERY-FILE-CONNECTION:MINIMUM</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20265" name="d0e20265" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss156.html"
target="_top">EXTRA-RETURN-VALUES:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20272" name="d0e20272" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss157.html"
target="_top">FILE-OPEN-ERROR:SIGNAL-FILE-ERROR</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20279" name="d0e20279" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss158.html"
target="_top">FIXNUM-NON-PORTABLE:TIGHTEN-DEFINITION</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20286" name="d0e20286" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss159.html"
target="_top">FLET-DECLARATIONS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20293" name="d0e20293" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss160.html"
target="_top">FLET-DECLARATIONS:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20300" name="d0e20300" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss161.html"
target="_top">FLET-IMPLICIT-BLOCK:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20307" name="d0e20307" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss162.html"
target="_top">FLOAT-UNDERFLOW:ADD-VARIABLES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20314" name="d0e20314" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss163.html"
target="_top">FLOATING-POINT-CONDITION-NAMES:X3J13-NOV-89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20321" name="d0e20321" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss164.html"
target="_top">FORMAT-ATSIGN-COLON</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20328" name="d0e20328" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss165.html"
target="_top">FORMAT-COLON-UPARROW-SCOPE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20335" name="d0e20335" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss166.html"
target="_top">FORMAT-COMMA-INTERVAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20342" name="d0e20342" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss167.html"
target="_top">FORMAT-E-EXPONENT-SIGN:FORCE-SIGN</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20349" name="d0e20349" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss168.html"
target="_top">FORMAT-OP-C</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20356" name="d0e20356" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss169.html"
target="_top">FORMAT-PRETTY-PRINT:YES</a></span></dt>

<dd>yes, except that <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
target="_top"><tt>~F</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
target="_top"><tt>~E</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
target="_top"><tt>~G</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
target="_top"><tt>~$</tt></a> also bind <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
target="_top"><tt>*PRINT-BASE*</tt></a> to 10 and <a
href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
target="_top"><tt>*PRINT-RADIX*</tt></a> to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e20390" name="d0e20390" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss170.html"
target="_top">FORMAT-STRING-ARGUMENTS:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20397" name="d0e20397" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss171.html"
target="_top">FUNCTION-CALL-EVALUATION-ORDER:MORE-UNSPECIFIED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20404" name="d0e20404" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss172.html"
target="_top">FUNCTION-COMPOSITION:JAN89-X3J13</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20411" name="d0e20411" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss173.html"
target="_top">FUNCTION-DEFINITION:JAN89-X3J13</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20418" name="d0e20418" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss174.html"
target="_top">FUNCTION-NAME:LARGE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20425" name="d0e20425" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss175.html"
target="_top">FUNCTION-TYPE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20432" name="d0e20432" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss176.html"
target="_top">FUNCTION-TYPE-ARGUMENT-TYPE-SEMANTICS:RESTRICTIVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20439" name="d0e20439" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss177.html"
target="_top">FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20446" name="d0e20446" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss178.html"
target="_top">FUNCTION-TYPE-REST-LIST-ELEMENT:USE-ACTUAL-ARGUMENT-TYPE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20453" name="d0e20453" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss179.html"
target="_top">FUNCTION-TYPE:X3J13-MARCH-88</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20460" name="d0e20460" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss180.html"
target="_top">GENERALIZE-PRETTY-PRINTER:UNIFY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20467" name="d0e20467" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss181.html"
target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20474" name="d0e20474" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss182.html"
target="_top">GENSYM-NAME-STICKINESS:LIKE-TEFLON</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20481" name="d0e20481" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss183.html"
target="_top">GENTEMP-BAD-IDEA:DEPRECATE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20488" name="d0e20488" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss184.html"
target="_top">GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20495" name="d0e20495" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss185.html"
target="_top">GET-SETF-METHOD-ENVIRONMENT:ADD-ARG</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20502" name="d0e20502" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss186.html"
target="_top">HASH-TABLE-ACCESS:X3J13-MAR-89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20509" name="d0e20509" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss187.html"
target="_top">HASH-TABLE-KEY-MODIFICATION:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20516" name="d0e20516" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss188.html"
target="_top">HASH-TABLE-PACKAGE-GENERATORS:ADD-WITH-WRAPPER</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20523" name="d0e20523" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss189.html"
target="_top">HASH-TABLE-REHASH-SIZE-INTEGER</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20530" name="d0e20530" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss190.html"
target="_top">HASH-TABLE-SIZE:INTENDED-ENTRIES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20537" name="d0e20537" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss191.html"
target="_top">HASH-TABLE-TESTS:ADD-EQUALP</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20544" name="d0e20544" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss192.html"
target="_top">IEEE-ATAN-BRANCH-CUT:SPLIT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20551" name="d0e20551" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss193.html"
target="_top">IGNORE-USE-TERMINOLOGY:VALUE-ONLY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20558" name="d0e20558" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss194.html"
target="_top">IMPORT-SETF-SYMBOL-PACKAGE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20565" name="d0e20565" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss195.html"
target="_top">IN-PACKAGE-FUNCTIONALITY:MAR89-X3J13</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20572" name="d0e20572" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss196.html"
target="_top">IN-SYNTAX:MINIMAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20579" name="d0e20579" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss197.html"
target="_top">INITIALIZATION-FUNCTION-KEYWORD-CHECKING</a></span></dt>

<dd>??</dd>

<dt><a id="d0e20586" name="d0e20586" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss198.html"
target="_top">ISO-COMPATIBILITY:ADD-SUBSTRATE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20593" name="d0e20593" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss199.html"
target="_top">JUN90-TRIVIAL-ISSUES:11</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20600" name="d0e20600" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss200.html"
target="_top">JUN90-TRIVIAL-ISSUES:14</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20607" name="d0e20607" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss201.html"
target="_top">JUN90-TRIVIAL-ISSUES:24</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20614" name="d0e20614" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss202.html"
target="_top">JUN90-TRIVIAL-ISSUES:25</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20621" name="d0e20621" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss203.html"
target="_top">JUN90-TRIVIAL-ISSUES:27</a></span></dt>

<dd>yes for <a href="http://www.lisp.org/HyperSpec/Body/speope_the.html"
target="_top"><tt>THE</tt></a>, no for <a
href="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
target="_top"><tt>APPLY</tt></a> (spec not clear)</dd>

<dt><a id="d0e20636" name="d0e20636" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss204.html"
target="_top">JUN90-TRIVIAL-ISSUES:3</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20643" name="d0e20643" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss205.html"
target="_top">JUN90-TRIVIAL-ISSUES:4</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20650" name="d0e20650" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss206.html"
target="_top">JUN90-TRIVIAL-ISSUES:5</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20657" name="d0e20657" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss207.html"
target="_top">JUN90-TRIVIAL-ISSUES:9</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20664" name="d0e20664" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss208.html"
target="_top">KEYWORD-ARGUMENT-NAME-PACKAGE:ANY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20671" name="d0e20671" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss209.html"
target="_top">LAST-N</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20678" name="d0e20678" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss210.html"
target="_top">LCM-NO-ARGUMENTS:1</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20685" name="d0e20685" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss211.html"
target="_top">LEXICAL-CONSTRUCT-GLOBAL-DEFINITION:UNDEFINED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20692" name="d0e20692" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss212.html"
target="_top">LISP-PACKAGE-NAME:COMMON-LISP</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20699" name="d0e20699" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss213.html"
target="_top">LISP-SYMBOL-REDEFINITION-AGAIN:MORE-FIXES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20706" name="d0e20706" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss214.html"
target="_top">LISP-SYMBOL-REDEFINITION:MAR89-X3J13</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20713" name="d0e20713" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss215.html"
target="_top">LOAD-OBJECTS:MAKE-LOAD-FORM</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20720" name="d0e20720" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss216.html"
target="_top">LOAD-TIME-EVAL:R**2-NEW-SPECIAL-FORM</a></span></dt>

<dd>obsolete</dd>

<dt><a id="d0e20727" name="d0e20727" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss217.html"
target="_top">LOAD-TIME-EVAL:R**3-NEW-SPECIAL-FORM</a></span></dt>

<dd>yes, except for macro expansion at compile time</dd>

<dt><a id="d0e20734" name="d0e20734" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss218.html"
target="_top">LOAD-TRUENAME:NEW-PATHNAME-VARIABLES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20741" name="d0e20741" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss219.html"
target="_top">LOCALLY-TOP-LEVEL:SPECIAL-FORM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20748" name="d0e20748" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss220.html"
target="_top">LOOP-AND-DISCREPANCY:NO-REITERATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20755" name="d0e20755" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss221.html"
target="_top">LOOP-FOR-AS-ON-TYPO:FIX-TYPO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20762" name="d0e20762" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss222.html"
target="_top">LOOP-INITFORM-ENVIRONMENT:PARTIAL-INTERLEAVING-VAGUE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20769" name="d0e20769" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss223.html"
target="_top">LOOP-MISCELLANEOUS-REPAIRS:FIX</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20776" name="d0e20776" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss224.html"
target="_top">LOOP-NAMED-BLOCK-NIL:OVERRIDE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20783" name="d0e20783" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss225.html"
target="_top">LOOP-PRESENT-SYMBOLS-TYPO:FLUSH-WRONG-WORDS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20790" name="d0e20790" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss226.html"
target="_top">LOOP-SYNTAX-OVERHAUL:REPAIR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20797" name="d0e20797" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss227.html"
target="_top">MACRO-AS-FUNCTION:DISALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20804" name="d0e20804" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss228.html"
target="_top">MACRO-DECLARATIONS:MAKE-EXPLICIT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20811" name="d0e20811" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss229.html"
target="_top">MACRO-ENVIRONMENT-EXTENT:DYNAMIC</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20818" name="d0e20818" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss230.html"
target="_top">MACRO-FUNCTION-ENVIRONMENT</a></span></dt>

<dd>obsolete</dd>

<dt><a id="d0e20825" name="d0e20825" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss231.html"
target="_top">MACRO-FUNCTION-ENVIRONMENT:YES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20832" name="d0e20832" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss232.html"
target="_top">MACRO-SUBFORMS-TOP-LEVEL-P:ADD-CONSTRAINTS</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20839" name="d0e20839" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss233.html"
target="_top">MACROEXPAND-HOOK-DEFAULT:EXPLICITLY-VAGUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20846" name="d0e20846" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss234.html"
target="_top">MACROEXPAND-HOOK-INITIAL-VALUE:IMPLEMENTATION-DEPENDENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20853" name="d0e20853" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss235.html"
target="_top">MACROEXPAND-RETURN-VALUE:TRUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20860" name="d0e20860" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss236.html"
target="_top">MAKE-LOAD-FORM-CONFUSION:REWRITE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20867" name="d0e20867" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss237.html"
target="_top">MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20874" name="d0e20874" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss238.html"
target="_top">MAKE-PACKAGE-USE-DEFAULT:IMPLEMENTATION-DEPENDENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20881" name="d0e20881" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss239.html"
target="_top">MAP-INTO:ADD-FUNCTION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20888" name="d0e20888" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss240.html"
target="_top">MAPPING-DESTRUCTIVE-INTERACTION:EXPLICITLY-VAGUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20895" name="d0e20895" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss241.html"
target="_top">METACLASS-OF-SYSTEM-CLASS:UNSPECIFIED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20902" name="d0e20902" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss242.html"
target="_top">METHOD-COMBINATION-ARGUMENTS:CLARIFY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20909" name="d0e20909" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss243.html"
target="_top">METHOD-INITFORM:FORBID-CALL-NEXT-METHOD</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20916" name="d0e20916" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss244.html"
target="_top">MUFFLE-WARNING-CONDITION-ARGUMENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20923" name="d0e20923" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss245.html"
target="_top">MULTIPLE-VALUE-SETQ-ORDER:LIKE-SETF-OF-VALUES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20930" name="d0e20930" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss246.html"
target="_top">MULTIPLE-VALUES-LIMIT-ON-VARIABLES:UNDEFINED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20937" name="d0e20937" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss247.html"
target="_top">NINTERSECTION-DESTRUCTION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20944" name="d0e20944" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss248.html"
target="_top">NINTERSECTION-DESTRUCTION:REVERT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20951" name="d0e20951" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss249.html"
target="_top">NOT-AND-NULL-RETURN-VALUE:X3J13-MAR-93</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20958" name="d0e20958" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss250.html"
target="_top">NTH-VALUE:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20965" name="d0e20965" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss251.html"
target="_top">OPTIMIZE-DEBUG-INFO:NEW-QUALITY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20972" name="d0e20972" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss252.html"
target="_top">PACKAGE-CLUTTER:REDUCE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e20979" name="d0e20979" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss253.html"
target="_top">PACKAGE-DELETION:NEW-FUNCTION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20986" name="d0e20986" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss254.html"
target="_top">PACKAGE-FUNCTION-CONSISTENCY:MORE-PERMISSIVE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e20993" name="d0e20993" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss255.html"
target="_top">PARSE-ERROR-STREAM:SPLIT-TYPES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21000" name="d0e21000" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss256.html"
target="_top">PATHNAME-COMPONENT-CASE:KEYWORD-ARGUMENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21007" name="d0e21007" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss257.html"
target="_top">PATHNAME-COMPONENT-VALUE:SPECIFY</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21014" name="d0e21014" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss258.html"
target="_top">PATHNAME-HOST-PARSING:RECOGNIZE-LOGICAL-HOST-NAMES</a></span></dt>

<dd>yes when <a href="#parsename"
title="Function PARSE-NAMESTRING"><tt>CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a>
is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></dd>

<dt><a id="d0e21029" name="d0e21029" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss259.html"
target="_top">PATHNAME-LOGICAL:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21036" name="d0e21036" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss260.html"
target="_top">PATHNAME-PRINT-READ:SHARPSIGN-P</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21043" name="d0e21043" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss261.html"
target="_top">PATHNAME-STREAM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21050" name="d0e21050" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss262.html"
target="_top">PATHNAME-STREAM:FILES-OR-SYNONYM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21057" name="d0e21057" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss263.html"
target="_top">PATHNAME-SUBDIRECTORY-LIST:NEW-REPRESENTATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21064" name="d0e21064" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss264.html"
target="_top">PATHNAME-SYMBOL</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21071" name="d0e21071" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss265.html"
target="_top">PATHNAME-SYNTAX-ERROR-TIME:EXPLICITLY-VAGUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21078" name="d0e21078" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss266.html"
target="_top">PATHNAME-UNSPECIFIC-COMPONENT:NEW-TOKEN</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21085" name="d0e21085" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss267.html"
target="_top">PATHNAME-WILD:NEW-FUNCTIONS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21092" name="d0e21092" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss268.html"
target="_top">PEEK-CHAR-READ-CHAR-ECHO:FIRST-READ-CHAR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21099" name="d0e21099" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss269.html"
target="_top">PLIST-DUPLICATES:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21106" name="d0e21106" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss270.html"
target="_top">PRETTY-PRINT-INTERFACE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21113" name="d0e21113" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss271.html"
target="_top">PRINC-READABLY:X3J13-DEC-91</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21120" name="d0e21120" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss272.html"
target="_top">PRINT-CASE-BEHAVIOR:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21127" name="d0e21127" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss273.html"
target="_top">PRINT-CASE-PRINT-ESCAPE-INTERACTION:VERTICAL-BAR-RULE-NO-UPCASE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21134" name="d0e21134" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss274.html"
target="_top">PRINT-CIRCLE-SHARED:RESPECT-PRINT-CIRCLE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21141" name="d0e21141" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss275.html"
target="_top">PRINT-CIRCLE-STRUCTURE:USER-FUNCTIONS-WORK</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21148" name="d0e21148" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss276.html"
target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21155" name="d0e21155" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss277.html"
target="_top">PRINTER-WHITESPACE:JUST-ONE-SPACE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21162" name="d0e21162" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss278.html"
target="_top">PROCLAIM-ETC-IN-COMPILE-FILE:NEW-MACRO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21169" name="d0e21169" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss279.html"
target="_top">PUSH-EVALUATION-ORDER:FIRST-ITEM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21176" name="d0e21176" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss280.html"
target="_top">PUSH-EVALUATION-ORDER:ITEM-FIRST</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21183" name="d0e21183" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss281.html"
target="_top">PUSHNEW-STORE-REQUIRED:UNSPECIFIED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21190" name="d0e21190" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss282.html"
target="_top">QUOTE-SEMANTICS:NO-COPYING</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21197" name="d0e21197" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss283.html"
target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a></span></dt>

<dd>yes, when <a
href="#count-ansi"><tt>CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>; otherwise negative <tt>:COUNT</tt> values
are not allowed.</dd>

<dt><a id="d0e21215" name="d0e21215" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss284.html"
target="_top">RANGE-OF-START-AND-END-PARAMETERS:INTEGER-AND-INTEGER-NIL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21222" name="d0e21222" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss285.html"
target="_top">READ-AND-WRITE-BYTES:NEW-FUNCTIONS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21229" name="d0e21229" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss286.html"
target="_top">READ-CASE-SENSITIVITY:READTABLE-KEYWORDS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21236" name="d0e21236" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss287.html"
target="_top">READ-MODIFY-WRITE-EVALUATION-ORDER:DELAYED-ACCESS-STORES</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21243" name="d0e21243" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss288.html"
target="_top">READ-SUPPRESS-CONFUSING:GENERALIZE</a></span></dt>

<dd>yes, except that <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-delimited-list.html"
target="_top"><tt>READ-DELIMITED-LIST</tt></a> still constructs a
list</dd>

<dt><a id="d0e21254" name="d0e21254" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss289.html"
target="_top">READER-ERROR:NEW-TYPE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21261" name="d0e21261" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss290.html"
target="_top">REAL-NUMBER-TYPE:X3J13-MAR-89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21268" name="d0e21268" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss291.html"
target="_top">RECURSIVE-DEFTYPE:EXPLICITLY-VAGUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21275" name="d0e21275" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss292.html"
target="_top">REDUCE-ARGUMENT-EXTRACTION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21282" name="d0e21282" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss293.html"
target="_top">REMF-DESTRUCTION-UNSPECIFIED:X3J13-MAR-89</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21289" name="d0e21289" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss294.html"
target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21296" name="d0e21296" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss295.html"
target="_top">REQUIRE-PATHNAME-DEFAULTS-YET-AGAIN:RESTORE-ARGUMENT</a></span></dt>

<dd>yes, except that <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a> wants a pathname, not a list of
pathnames</dd>

<dt><a id="d0e21307" name="d0e21307" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss296.html"
target="_top">REQUIRE-PATHNAME-DEFAULTS:ELIMINATE</a></span></dt>

<dd>superseded by <a
href="http://www.lisp.org/HyperSpec/Issues/iss294.html"
target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dd>

<dt><a id="d0e21316" name="d0e21316" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss297.html"
target="_top">REST-LIST-ALLOCATION:MAY-SHARE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21323" name="d0e21323" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss298.html"
target="_top">RESULT-LISTS-SHARED:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21330" name="d0e21330" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss299.html"
target="_top">RETURN-VALUES-UNSPECIFIED:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21337" name="d0e21337" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss300.html"
target="_top">ROOM-DEFAULT-ARGUMENT:NEW-VALUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21344" name="d0e21344" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss301.html"
target="_top">SELF-MODIFYING-CODE:FORBID</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21351" name="d0e21351" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss302.html"
target="_top">SEQUENCE-TYPE-LENGTH:MUST-MATCH</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21358" name="d0e21358" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss303.html"
target="_top">SETF-APPLY-EXPANSION:IGNORE-EXPANDER</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21365" name="d0e21365" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss304.html"
target="_top">SETF-FIND-CLASS:ALLOW-NIL</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21372" name="d0e21372" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss305.html"
target="_top">SETF-FUNCTIONS-AGAIN:MINIMAL-CHANGES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21379" name="d0e21379" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss306.html"
target="_top">SETF-GET-DEFAULT:EVALUATED-BUT-IGNORED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21386" name="d0e21386" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss307.html"
target="_top">SETF-MACRO-EXPANSION:LAST</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21393" name="d0e21393" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss308.html"
target="_top">SETF-METHOD-VS-SETF-METHOD:RENAME-OLD-TERMS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21400" name="d0e21400" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss309.html"
target="_top">SETF-MULTIPLE-STORE-VARIABLES:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21407" name="d0e21407" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss310.html"
target="_top">SETF-OF-APPLY:ONLY-AREF-AND-FRIENDS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21414" name="d0e21414" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss311.html"
target="_top">SETF-OF-VALUES:ADD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21421" name="d0e21421" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss312.html"
target="_top">SETF-SUB-METHODS:DELAYED-ACCESS-STORES</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21428" name="d0e21428" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss313.html"
target="_top">SHADOW-ALREADY-PRESENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21435" name="d0e21435" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss314.html"
target="_top">SHADOW-ALREADY-PRESENT:WORKS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21442" name="d0e21442" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss315.html"
target="_top">SHARP-COMMA-CONFUSION:REMOVE</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21449" name="d0e21449" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss316.html"
target="_top">SHARP-O-FOOBAR:CONSEQUENCES-UNDEFINED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21456" name="d0e21456" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss317.html"
target="_top">SHARP-STAR-DELIMITER:NORMAL-DELIMITER</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21463" name="d0e21463" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss318.html"
target="_top">SHARPSIGN-PLUS-MINUS-PACKAGE:KEYWORD</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21470" name="d0e21470" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss319.html"
target="_top">SLOT-MISSING-VALUES:SPECIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21477" name="d0e21477" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss320.html"
target="_top">SLOT-VALUE-METACLASSES:LESS-MINIMAL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21484" name="d0e21484" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss321.html"
target="_top">SPECIAL-FORM-P-MISNOMER:RENAME</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21491" name="d0e21491" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss322.html"
target="_top">SPECIAL-TYPE-SHADOWING:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21498" name="d0e21498" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss323.html"
target="_top">STANDARD-INPUT-INITIAL-BINDING:DEFINED-CONTRACTS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21505" name="d0e21505" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss324.html"
target="_top">STANDARD-REPERTOIRE-GRATUITOUS:RENAME</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21512" name="d0e21512" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss325.html"
target="_top">STEP-ENVIRONMENT:CURRENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21519" name="d0e21519" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss326.html"
target="_top">STEP-MINIMAL:PERMIT-PROGN</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21526" name="d0e21526" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss327.html"
target="_top">STREAM-ACCESS:ADD-TYPES-ACCESSORS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21533" name="d0e21533" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss328.html"
target="_top">STREAM-CAPABILITIES:INTERACTIVE-STREAM-P</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21540" name="d0e21540" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss329.html"
target="_top">STRING-COERCION:MAKE-CONSISTENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21547" name="d0e21547" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss330.html"
target="_top">STRING-OUTPUT-STREAM-BASHING:UNDEFINED</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21554" name="d0e21554" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss331.html"
target="_top">STRUCTURE-READ-PRINT-SYNTAX:KEYWORDS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21561" name="d0e21561" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss332.html"
target="_top">SUBSEQ-OUT-OF-BOUNDS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21568" name="d0e21568" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss333.html"
target="_top">SUBSEQ-OUT-OF-BOUNDS:IS-AN-ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21575" name="d0e21575" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss334.html"
target="_top">SUBSETTING-POSITION:NONE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21582" name="d0e21582" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss335.html"
target="_top">SUBTYPEP-ENVIRONMENT:ADD-ARG</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21589" name="d0e21589" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss336.html"
target="_top">SUBTYPEP-TOO-VAGUE:CLARIFY-MORE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21596" name="d0e21596" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss337.html"
target="_top">SXHASH-DEFINITION:SIMILAR-FOR-SXHASH</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21603" name="d0e21603" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss338.html"
target="_top">SYMBOL-MACROLET-DECLARE:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21610" name="d0e21610" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss339.html"
target="_top">SYMBOL-MACROLET-SEMANTICS:SPECIAL-FORM</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21617" name="d0e21617" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss340.html"
target="_top">SYMBOL-MACROLET-TYPE-DECLARATION:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21624" name="d0e21624" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss341.html"
target="_top">SYMBOL-MACROS-AND-PROCLAIMED-SPECIALS:SIGNALS-AN-ERROR</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21631" name="d0e21631" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss342.html"
target="_top">SYMBOL-PRINT-ESCAPE-BEHAVIOR:CLARIFY</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21638" name="d0e21638" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss343.html"
target="_top">SYNTACTIC-ENVIRONMENT-ACCESS:RETRACTED-MAR91</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21645" name="d0e21645" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss344.html"
target="_top">TAGBODY-TAG-EXPANSION:NO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21652" name="d0e21652" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss345.html"
target="_top">TAILP-NIL:T</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21659" name="d0e21659" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss346.html"
target="_top">TEST-NOT-IF-NOT:FLUSH-ALL</a></span></dt>

<dd>yes, but no warning</dd>

<dt><a id="d0e21666" name="d0e21666" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss347.html"
target="_top">THE-AMBIGUITY:FOR-DECLARATION</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21673" name="d0e21673" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss348.html"
target="_top">THE-VALUES:RETURN-NUMBER-RECEIVED</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21680" name="d0e21680" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss349.html"
target="_top">TIME-ZONE-NON-INTEGER:ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21687" name="d0e21687" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss350.html"
target="_top">TYPE-DECLARATION-ABBREVIATION:ALLOW-ALL</a></span></dt>

<dd>no</dd>

<dt><a id="d0e21694" name="d0e21694" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss351.html"
target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:TYPE-OF-HANDLES-FLOATS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21701" name="d0e21701" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss352.html"
target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a></span></dt>

<dd>yes, except for class <a
href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
target="_top"><tt>METHOD-COMBINATION</tt></a></dd>

<dt><a id="d0e21712" name="d0e21712" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss353.html"
target="_top">TYPE-OF-UNDERCONSTRAINED:ADD-CONSTRAINTS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21719" name="d0e21719" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss354.html"
target="_top">TYPE-SPECIFIER-ABBREVIATION:X3J13-JUN90-GUESS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21726" name="d0e21726" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss355.html"
target="_top">UNDEFINED-VARIABLES-AND-FUNCTIONS:COMPROMISE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21733" name="d0e21733" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss356.html"
target="_top">UNINITIALIZED-ELEMENTS:CONSEQUENCES-UNDEFINED</a></span></dt>

<dd>yes, could add error checking</dd>

<dt><a id="d0e21740" name="d0e21740" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss357.html"
target="_top">UNREAD-CHAR-AFTER-PEEK-CHAR:DONT-ALLOW</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21747" name="d0e21747" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss358.html"
target="_top">UNSOLICITED-MESSAGES:NOT-TO-SYSTEM-USER-STREAMS</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21754" name="d0e21754" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss359.html"
target="_top">VARIABLE-LIST-ASYMMETRY:SYMMETRIZE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21761" name="d0e21761" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss360.html"
target="_top">WITH-ADDED-METHODS:DELETE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21768" name="d0e21768" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss361.html"
target="_top">WITH-COMPILATION-UNIT:NEW-MACRO</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21775" name="d0e21775" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss362.html"
target="_top">WITH-OPEN-FILE-DOES-NOT-EXIST:STREAM-IS-NIL</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21782" name="d0e21782" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss363.html"
target="_top">WITH-OPEN-FILE-SETQ:EXPLICITLY-VAGUE</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21789" name="d0e21789" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss364.html"
target="_top">WITH-OPEN-FILE-STREAM-EXTENT:DYNAMIC-EXTENT</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21796" name="d0e21796" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss365.html"
target="_top">WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND</a></span></dt>

<dd>yes</dd>

<dt><a id="d0e21803" name="d0e21803" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Issues/iss366.html"
target="_top">WITH-STANDARD-IO-SYNTAX-READTABLE:X3J13-MAR-91</a></span></dt>

<dd>yes</dd>
</dl>
</div>
</div>
</div>

<div class="part" id="internals">
<div class="titlepage">
<div>
<h1 class="title"><a id="internals" name="internals" />Internals of the <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
Implementation</h1>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt>29. <a href="#gc">Overview of <b>CLISP</b>'s Garbage
Collection</a></dt>

<dd>
<dl>
<dt><a href="#internals-intro">Introduction</a></dt>

<dt><a href="#lisp-obj-in-c">Lisp objects in <b>CLISP</b></a></dt>

<dt><a href="#memory-models">Memory Models</a></dt>

<dt><a href="#gc-safety">The burden of garbage-collection upon the rest of
<b>CLISP</b>:</a></dt>

<dt><a href="#foreign-pointers">Foreign Pointers</a></dt>
</dl>
</dd>

<dt>30. <a href="#bytecode">The <b>CLISP</b> bytecode
specification</a></dt>

<dd>
<dl>
<dt><a href="#byte-intro">Introduction</a></dt>

<dt><a href="#vm">The virtual machine</a></dt>

<dt><a href="#comp-fun">The structure of compiled functions</a></dt>

<dt><a href="#intr-struct">The general structure of the
instructions</a></dt>

<dt><a href="#intr-set">The instruction set</a></dt>

<dd>
<dl>
<dt><a href="#instr-const">Instructions for constants</a></dt>

<dt><a href="#instr-lex-var">Instructions for lexical variables</a></dt>

<dt><a href="#instr-dyn-var">Instructions for dynamic variables</a></dt>

<dt><a href="#instr-stack">Instructions for stack operations</a></dt>

<dt><a href="#instr-jump">Instructions for control flow, jumps</a></dt>

<dt><a href="#instr-env">Instructions for lexical environment, creation of
closures</a></dt>

<dt><a href="#instr-funcall">Instructions for function calls</a></dt>

<dt><a href="#instr-optkey">Instructions for optional and keyword
parameters</a></dt>

<dt><a href="#instr-mulval">Instructions for multiple values</a></dt>

<dt><a href="#instr-block">Instructions for <tt>BLOCK</tt> and
<tt>RETURN-FROM</tt></a></dt>

<dt><a href="#instr-tagbody">Instructions for <tt>TAGBODY</tt> and
<tt>GO</tt></a></dt>

<dt><a href="#instr-catch">Instructions for <tt>CATCH</tt> and
<tt>THROW</tt></a></dt>

<dt><a href="#instr-unwind">Instructions for
<tt>UNWIND-PROTECT</tt></a></dt>

<dt><a href="#instr-handler">Instructions for
<tt>HANDLER-BIND</tt></a></dt>

<dt><a href="#instr-inline">Instructions for some inlined
functions</a></dt>

<dt><a href="#instr-combo">Combined instructions</a></dt>

<dt><a href="#instr-shortcut">Shortcut instructions</a></dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="gc" name="gc" />Chapter 29. Overview of
<b>CLISP</b>'s Garbage Collection</h2>
</div>

<div>
<h3 class="subtitle"><i>These are internals, which are of interest only to
the <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
developers. If you are not subscribed to <tt>&lt;<a
href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</tt>,
this chapter is not for you.</i></h3>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#internals-intro">Introduction</a></dt>

<dt><a href="#lisp-obj-in-c">Lisp objects in <b>CLISP</b></a></dt>

<dt><a href="#memory-models">Memory Models</a></dt>

<dt><a href="#gc-safety">The burden of garbage-collection upon the rest of
<b>CLISP</b>:</a></dt>

<dt><a href="#foreign-pointers">Foreign Pointers</a></dt>
</dl>
</div>

<div class="section"><a id="internals-intro" name="internals-intro" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="internals-intro"
name="internals-intro" />Introduction</h2>
</div>
</div>

<p>Knowing that most <tt>malloc()</tt> implementations are buggy and/or
slow, and because <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> needs to perform garbage collection, <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> has its own
memory management subsystem in files <tt>spvw*.d</tt>.</p>
</div>

<div class="section"><a id="lisp-obj-in-c" name="lisp-obj-in-c" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="lisp-obj-in-c"
name="lisp-obj-in-c" />Lisp objects in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a></h2>
</div>
</div>

<div class="itemizedlist">
<p><b>Three kinds of storage are distinguished:</b></p>

<ul>
<li><a id="d0e21861" name="d0e21861" /><a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> data (the "heap"), i.e. storage which
contains Lisp objects and is managed by the garbage collector.</li>

<li><a id="d0e21867" name="d0e21867" /><a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> stack (called <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>), contains <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects</li>

<li><a id="d0e21881" name="d0e21881" /><a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> data (including program text, data,
<tt>malloc()</tt>ed memory)</li>
</ul>
</div>

<p>A <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> object
is one word, containing a tag (partial type information) and either
immediate data (e.g. fixnums or short floats) or a pointer to storage.
Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> data have tag = machine_type = 0, pointers to
<a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> stack have
tag = system_type, most other pointers point to <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> data.</p>

<p>Let us turn to these <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects that consume regular <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> memory. Every
<a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> object has
a size which is determined when the object is allocated (using one of the
<tt>allocate_*()</tt> routines). The size can be computed from the type
tag and - if necessary - the length field of the object's header. The
length field always contains the number of elements of the object. The
number of bytes is given by the function <tt>objsize()</tt>.</p>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects
which contain exactly 2 <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects (i.e. <a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a>es, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
target="_top"><tt>COMPLEX</tt></a> numbers, <a
href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
target="_top"><tt>RATIO</tt></a>s) are stored in a separate area and
occupy 2 words each. All other <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects have "varying length" (more
precisely, not a fixed length) and include a word for garbage collection
purposes at their beginning.</p>

<p>The garbage collector is invoked when an <tt>allocate_*()</tt> request
cannot be fulfilled. It marks all objects which are "live" (may be reached
from the "roots"), compacts these objects and unmarks them. Non-live
objects are lost; their storage is reclaimed.</p>

<p>2-pointer objects are compacted by a simple hole-filling algorithm:
fill the most-left object into the most-right hole, and so on, until the
objects are contiguous at the right and the hole is contiguous at the
left.</p>

<p>Variable-length objects are compacted by sliding them down (their
address decreases).</p>
</div>

<div class="section"><a id="memory-models" name="memory-models" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="memory-models"
name="memory-models" />Memory Models</h2>
</div>
</div>

<p>There are 6 memory models. Which one is used, depends on the operating
system and is determined at build time.</p>

<div class="variablelist">
<p><b>Memory Models</b></p>

<dl>
<dt><a id="d0e21970" name="d0e21970" /><span
class="term">SPVW_MIXED_BLOCKS_OPPOSITE</span></dt>

<dd>
<p><a id="d0e21973" name="d0e21973" />The heap consists of one block of
fixed length (allocated at startup). The variable-length objects are
allocated from the left, the 2-pointer objects are allocated from the
right. There is a hole between them. When the hole shrinks to 0, <a
href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>
is invoked. <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>
slides the variable-length objects to the left and concentrates the
2-pointer objects at the right end of the block again. When no more room
is available, some reserve area beyond the right end of the block is
halved, and the 2-pointer objects are moved to the right accordingly.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e21985" name="d0e21985" /><span class="term">(+)</span></dt>

<dd>Simple management.</dd>

<dt><a id="d0e21991" name="d0e21991" /><span class="term">(+)</span></dt>

<dd>No fragmentation at all.</dd>

<dt><a id="d0e21997" name="d0e21997" /><span class="term">(-)</span></dt>

<dd>The total heap size is limited.</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e22004" name="d0e22004" /><span
class="term">SPVW_MIXED_BLOCKS_OPPOSITE &amp;
TRIVIALMAP_MEMORY</span></dt>

<dd>
<p><a id="d0e22007" name="d0e22007" />The heap consists of two big blocks,
one for variable-length objects and one for 2-pointer objects. The former
one has a hole to the right and is extensible to the right, the latter one
has a hole to the left and is extensible to the left. Similar to the
previous model, except that the hole is unmapped.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e22013" name="d0e22013" /><span class="term">(+)</span></dt>

<dd>Total heap size grows depending on the application's needs.</dd>

<dt><a id="d0e22019" name="d0e22019" /><span class="term">(+)</span></dt>

<dd>No fragmentation at all.</dd>

<dt><a id="d0e22025" name="d0e22025" /><span class="term">(*)</span></dt>

<dd>Works only when SINGLEMAP_MEMORY is possible as well.</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e22032" name="d0e22032" /><span
class="term">SPVW_MIXED_BLOCKS_STAGGERED &amp;
TRIVIALMAP_MEMORY</span></dt>

<dd>
<p><a id="d0e22035" name="d0e22035" />The heap consists of two big blocks,
one for variable-length objects and one for 2-pointer objects. Both have a
hole to the right, but are extensible to the right.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e22041" name="d0e22041" /><span class="term">(+)</span></dt>

<dd>Total heap size grows depending on the application's needs.</dd>

<dt><a id="d0e22047" name="d0e22047" /><span class="term">(+)</span></dt>

<dd>No fragmentation at all.</dd>

<dt><a id="d0e22053" name="d0e22053" /><span class="term">(*)</span></dt>

<dd>Works only when SINGLEMAP_MEMORY is possible as well.</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e22060" name="d0e22060" /><span
class="term">SPVW_MIXED_PAGES</span></dt>

<dd>
<p><a id="d0e22063" name="d0e22063" />The heap consists of many small
pages (usually around 8 KB). There are two kinds of pages: one for
2-pointer objects, one for variable-length objects. The set of all pages
of a fixed kind is called a "Heap". Each page has its hole (free space) at
its end. For every heap, the pages are kept sorted according to the size
of their hole, using AVL trees. Garbage collection is invoked when the
used space has grown by 25% since the last GC; until that point new pages
are allocated from the operating system. The GC compacts the data in each
page separately: data is moved to the left. Emptied pages are given back
to the OS. If the holes then make up more than 25% of the occupied
storage, a second GC turn moves objects across pages, from nearly empty
ones to nearly full ones, with the aim to free as many pages as
possible.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e22069" name="d0e22069" /><span class="term">(-)</span></dt>

<dd>every allocation requires AVL tree operations, thus slower</dd>

<dt><a id="d0e22075" name="d0e22075" /><span class="term">(+)</span></dt>

<dd>Total heap size grows depending on the application's needs.</dd>

<dt><a id="d0e22081" name="d0e22081" /><span class="term">(+)</span></dt>

<dd>Works on operating systems which do not provide large contiguous
areas.</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e22088" name="d0e22088" /><span
class="term">SPVW_PURE_PAGES</span></dt>

<dd>
<p><a id="d0e22091" name="d0e22091" />Just like SPVW_MIXED_PAGES, except
that every page contains data of only a single type tag, i.e. there is a
Heap for every type tag.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e22097" name="d0e22097" /><span class="term">(-)</span></dt>

<dd>every allocation requires AVL tree operations, thus slower</dd>

<dt><a id="d0e22103" name="d0e22103" /><span class="term">(+)</span></dt>

<dd>Total heap size grows depending on the application's needs.</dd>

<dt><a id="d0e22109" name="d0e22109" /><span class="term">(+)</span></dt>

<dd>Works on operating systems which do not provide large contiguous
areas.</dd>

<dt><a id="d0e22115" name="d0e22115" /><span class="term">(-)</span></dt>

<dd>More fragmentation because objects of different type never fit into
the same page.</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e22121" name="d0e22121" /><span
class="term">SPVW_PURE_BLOCKS</span></dt>

<dd>
<p><a id="d0e22124" name="d0e22124" />There is a big block of storage for
each type tag. Each of these blocks has its data to the left and the hole
to the right, but these blocks are extensible to the right (because there
is enough room between them). A garbage collection is triggered when the
allocation amount since the last GC reaches 50% of the amount of used
space at the last GC, but at least 512 KB. The garbage collection cleans
up each block separately: data is moved left.</p>

<div class="variablelist">
<p><b>overview</b></p>

<dl>
<dt><a id="d0e22130" name="d0e22130" /><span class="term">(+)</span></dt>

<dd>Total heap size grows depending on the application's needs.</dd>

<dt><a id="d0e22136" name="d0e22136" /><span class="term">(+)</span></dt>

<dd>No 16 MB total size limit.</dd>

<dt><a id="d0e22142" name="d0e22142" /><span class="term">(*)</span></dt>

<dd>Works only in combination with SINGLEMAP_MEMORY.</dd>
</dl>
</div>


<br />
<br />
</dd>
</dl>
</div>

<p>In page based memory models, an object larger than a page is the only
object carried by its pages. There are no small objects in pages belonging
to a big object.</p>

<p>The following combinations of memory model and mmap tricks are
possible:</p>

<div class="table">
<p><a id="d0e22153" name="d0e22153" /><b>Table 29.1. With TYPECODES (the
number indicates the order in which the respective models have been
developed:</b></p>

<table summary="With TYPECODES (the number indicates the order
 in which the respective models have been developed:" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>&nbsp;</th>
<th>no MAP_MEMORY</th>
<th>TRIVIALMAP_MEMORY</th>
<th>SINGLEMAP_MEMORY</th>
<th>MULTIMAP_MEMORY</th>
<th>GENERATIONAL_GC</th>
</tr>
</thead>

<tbody>
<tr>
<td>SPVW_MIXED_BLOCKS_OPPOSITE</td>
<td>1</td>
<td>10</td>
<td>&nbsp;</td>
<td>2</td>
<td>9</td>
</tr>

<tr>
<td>SPVW_MIXED_BLOCKS_STAGGERED</td>
<td>&nbsp;</td>
<td>7</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>8</td>
</tr>

<tr>
<td>SPVW_PURE_BLOCKS</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>5</td>
<td>&nbsp;</td>
<td>6</td>
</tr>

<tr>
<td>SPVW_MIXED_PAGES</td>
<td>3</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>SPVW_PURE_PAGES</td>
<td>4</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

<div class="table">
<p><a id="d0e22221" name="d0e22221" /><b>Table 29.2. With no
TYPECODES</b></p>

<table summary="With no TYPECODES" border="1">
<colgroup>
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>&nbsp;</th>
<th>no MAP_MEMORY</th>
<th>TRIVIALMAP_MEMORY</th>
<th>GENERATIONAL_GC</th>
</tr>
</thead>

<tbody>
<tr>
<td>SPVW_MIXED_BLOCKS_OPPOSITE</td>
<td>*</td>
<td>*</td>
<td>*</td>
</tr>

<tr>
<td>SPVW_MIXED_BLOCKS_STAGGERED</td>
<td>&nbsp;</td>
<td>*</td>
<td>*</td>
</tr>

<tr>
<td>SPVW_MIXED_PAGES</td>
<td>*</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="gc-safety" name="gc-safety" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="gc-safety"
name="gc-safety" />The burden of <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ion
upon the rest of <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>:</h2>
</div>
</div>

<p>Every subroutine marked with <span class="emphasis"><i>can trigger
GC</i></span> may invoke <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>.
<a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>
moves all the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects and updates the pointers. But the
<a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>
looks only on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> and not in the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> variables. (Anything else would not be
portable.) Therefore at every "unsafe" point, i.e. every call to such a
subroutine, all the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> variables of type object <span
class="emphasis"><i>MUST BE ASSUMED TO BECOME GARBAGE</i></span>. (Except
for objects that are known to be unmovable, e.g. immediate data or Subrs.)
Pointers inside <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> data (e.g. to the characters of a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or to the elements of a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a>) become <span
class="emphasis"><i>INVALID</i></span> as well.</p>

<p>The workaround is usually to allocate all the needed <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> data first and
do the rest of the computation with <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> variables, without calling unsafe routines, and
without worrying about <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>.</p>
</div>

<div class="section"><a id="foreign-pointers" name="foreign-pointers" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="foreign-pointers"
name="foreign-pointers" />Foreign Pointers</h2>
</div>
</div>

<p>Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> functions and to <tt>malloc()</tt>ed data can
be hidden in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects of type machine_type; <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>
will not modify its value. But one should not dare to assume that a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> stack pointer or the address of a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function in a shared library satisfies the same
requirements.</p>

<p>If another pointer is to be viewed as a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> object, it is best to box it, e.g. in a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html"
target="_top"><tt>SIMPLE-BIT-VECTOR</tt></a> or in an Fpointer (using
<tt>allocate_fpointer()</tt>.)</p>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="bytecode" name="bytecode" />Chapter 30. The
<b>CLISP</b> bytecode specification</h2>
</div>

<div>
<h3 class="subtitle"><i>Last modified: 19 September 1998.</i></h3>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#byte-intro">Introduction</a></dt>

<dt><a href="#vm">The virtual machine</a></dt>

<dt><a href="#comp-fun">The structure of compiled functions</a></dt>

<dt><a href="#intr-struct">The general structure of the
instructions</a></dt>

<dt><a href="#intr-set">The instruction set</a></dt>

<dd>
<dl>
<dt><a href="#instr-const">Instructions for constants</a></dt>

<dt><a href="#instr-lex-var">Instructions for lexical variables</a></dt>

<dt><a href="#instr-dyn-var">Instructions for dynamic variables</a></dt>

<dt><a href="#instr-stack">Instructions for stack operations</a></dt>

<dt><a href="#instr-jump">Instructions for control flow, jumps</a></dt>

<dt><a href="#instr-env">Instructions for lexical environment, creation of
closures</a></dt>

<dt><a href="#instr-funcall">Instructions for function calls</a></dt>

<dt><a href="#instr-optkey">Instructions for optional and keyword
parameters</a></dt>

<dt><a href="#instr-mulval">Instructions for multiple values</a></dt>

<dt><a href="#instr-block">Instructions for <tt>BLOCK</tt> and
<tt>RETURN-FROM</tt></a></dt>

<dt><a href="#instr-tagbody">Instructions for <tt>TAGBODY</tt> and
<tt>GO</tt></a></dt>

<dt><a href="#instr-catch">Instructions for <tt>CATCH</tt> and
<tt>THROW</tt></a></dt>

<dt><a href="#instr-unwind">Instructions for
<tt>UNWIND-PROTECT</tt></a></dt>

<dt><a href="#instr-handler">Instructions for
<tt>HANDLER-BIND</tt></a></dt>

<dt><a href="#instr-inline">Instructions for some inlined
functions</a></dt>

<dt><a href="#instr-combo">Combined instructions</a></dt>

<dt><a href="#instr-shortcut">Shortcut instructions</a></dt>
</dl>
</dd>
</dl>
</div>

<div class="section"><a id="byte-intro" name="byte-intro" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="byte-intro"
name="byte-intro" />Introduction</h2>
</div>
</div>

<p>The <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
compiler compiles <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> programs into instruction codes for a virtual processor. This
bytecode is optimized for saving space in the most common cases of <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> programs.
The main advantages/drawbacks of this approach, compared to native code
compilation, are:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e22409" name="d0e22409" />Bytecode compiled programs are a
lot smaller than when compiled to native code. This results in better use
of CPU caches, and in less virtual memory paging. Users perceive this as
good responsiveness.</li>

<li><a id="d0e22412" name="d0e22412" />Maximum execution speed (throughput
in tight loops) is limited.</li>

<li><a id="d0e22415" name="d0e22415" />Since no bytecode instructions are
provided for "unsafe" operations (like unchecked array accesses, or "fast"
<a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a>/<a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>), programs run with all safety checks
enabled even when compiled.</li>

<li><a id="d0e22426" name="d0e22426" />Execution speed of a program can
easily be understood by looking at the output of the <a
href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
target="_top"><tt>DISASSEMBLE</tt></a> function. A rule of thumb is that
every elementary instruction costs 1 time unit, whereas a function call
costs 3 to 4 time units.</li>

<li><a id="d0e22433" name="d0e22433" />Needing to do no type inference,
the compiler is pretty straightforward and fast. As a consequence, the
definition of <b>CLOS</b> generic functions, which needs to compile small
pieces of generated code, is not perceived to be slow.</li>

<li><a id="d0e22439" name="d0e22439" />The compiler is independent from
the hardware CPU. Different backends, one for each hardware CPU, are not
needed. As a consequence, the compiler is fairly small (and would have
been easily maintainable if it were written in a less kludgey way...), and
it is impossible for the compiler writer to introduce CPU dependent
bugs.</li>
</ul>
</div>


<br />
<br />
</div>

<div class="section"><a id="vm" name="vm" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="vm" name="vm" />The virtual
machine</h2>
</div>
</div>

<p>The bytecode can be thought of as being interpreted by a virtual
processor. The engine which actually interprets the bytecode (the
"implementation of the virtual machine") is actually a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function, but it could as well be a
just-in-time compiler which translates a function's bytecode into hardware
CPU instructions the first time said function is called.</p>

<p>The virtual machine is a stack machine with two stacks:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e22455" name="d0e22455" /><span class="term"><a href="#vm"
title="The virtual machine"><tt>STACK</tt></a></span></dt>

<dd>a stack for <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects and frames.</dd>

<dt><a id="d0e22467" name="d0e22467" /><span class="term"><a href="#vm"
title="The virtual machine"><tt>SP</tt></a></span></dt>

<dd>a stack for other data and pointers.</dd>
</dl>
</div>


<br />
<br />
<p>This two-stack architecture permits to save an unlimited number of <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects on the
<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> (needed for
handling of <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> multiple values), without consing. Also, in a world with a
compacting no-ambiguous-roots garbage collector, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> must only hold <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects, and
<a href="#vm" title="The virtual machine"><tt>SP</tt></a> can hold all the
other data belonging to a frame, which would not fit into <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> without tagging/untagging
overhead.</p>

<p>The scope of <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> and <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> is only valid for a given
function invocation. Whereas the amount of <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> space needed for executing
a function (excluding other function calls) is unlimited, the amount of <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> space needed is
known a priori, at compile time. When a function is called, no relation is
specified between the caller's <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> and the callee's <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>, and between the
caller's <a href="#vm" title="The virtual machine"><tt>SP</tt></a> and the
callee's <a href="#vm" title="The virtual machine"><tt>SP</tt></a>. The
bytecode is designed so that outgoing arguments on the caller's <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> can be shared by
the caller's incoming arguments area (on the callee's <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>), but a virtual machine
implementation may also copy outgoing arguments to incoming arguments
instead of sharing them.</p>

<p>The virtual machine has a special data structure, <tt>values</tt>,
containing the "top of stack", specially adapted to <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> multiple
values:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e22557" name="d0e22557" /><span class="term"><a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a></span></dt>

<dd>an unsigned integer.</dd>

<dt><a id="d0e22565" name="d0e22565" /><span class="term"><a href="#vm"
title="The virtual machine"><tt>value1</tt></a></span></dt>

<dd>the first value, a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> object. If <tt><a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a></tt> = 0, this is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="d0e22586" name="d0e22586" /><span class="term"><a href="#vm"
title="The virtual machine"><tt>mv_space</tt></a></span></dt>

<dd>all values except the first one, an array of <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects.</dd>
</dl>
</div>


<br />
<br />
<p>The contents of <tt>values</tt> is short-lived. It does not survive a
function call, not even a garbage collection.</p>

<p>The interpretation of some bytecode instructions depends on a constant,
<a href="#vm" title="The virtual machine"><tt>jmpbufsize</tt></a>. This is
a CPU-dependent number, the value of <tt>system::*jmpbuf-size*</tt>. In <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, it is defined as
<tt>ceiling(sizeof(jmp_buf),sizeof(void*))</tt>.</p>
</div>

<div class="section"><a id="comp-fun" name="comp-fun" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="comp-fun"
name="comp-fun" />The structure of compiled functions</h2>
</div>
</div>

<p>A compiled function consists of two objects: The function itself,
containing the references to all <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> objects needed for the bytecode, and a byte
vector containing only immediate data, including the bytecode proper.</p>

<p>Typically, the byte vector is about twice as large as the function
vector. The separation thus helps the garbage collector (since the byte
vector does not need to be scanned for pointers).</p>

<p>A function looks like this (cf. the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type <tt>Cclosure</tt>):</p>

<div class="variablelist">
<dl>
<dt><a id="d0e22640" name="d0e22640" /><span class="term">name</span></dt>

<dd>This is the name of the function, normally a symbol or a list of the
form <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <i><tt>symbol</tt></i>)</tt>. It is used
for printing the function and for error messages. This field is
immutable.</dd>

<dt><a id="d0e22656" name="d0e22656" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>codevec</tt></a></span></dt>

<dd>This is the byte vector. It is a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html"
target="_top"><tt>SIMPLE-BIT-VECTOR</tt></a> (because that's the simplest
type in <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
which contains immediate data -- note that <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt> is more complex than
this). This field is immutable.</dd>

<dt><a id="d0e22683" name="d0e22683" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[]</span></dt>

<dd>The remaining fields in the function object are references to other <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> objects. These
references are immutable, which is why they are called "constants". (The
referenced <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
objects can be mutable objects, such as conses or vectors, however.)</dd>
</dl>
</div>


<br />
<br />
<p>There is actually one exception to the immutability rule: When a
generic function's dispatch code is installed, the <a href="#comp-fun"
title="The structure of compiled functions"><tt>codevec</tt></a> and <a
href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a> fields are
destructively modified.</p>

<p>Some of the <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a> can play
special roles. A function looks like this, in more detail:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e22717" name="d0e22717" /><span class="term">name</span></dt>

<dd>see above</dd>

<dt><a id="d0e22723" name="d0e22723" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>codevec</tt></a></span></dt>

<dd>see above</dd>

<dt><a id="d0e22731" name="d0e22731" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>*</span></dt>

<dd>At most one object, representing the closed-up variables, representing
the variables of the lexical environment in which this function was
defined. It is a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a>, which looks like this:
<tt>#(<i><tt>next</tt></i> <i><tt>value<sub>1</sub></tt></i> ...
<i><tt>value<sub>n</sub></tt></i>)</tt> where
<i><tt>value<sub>1</sub></tt></i>, ..., <i><tt>value<sub>n</sub></tt></i>
are the values of the closed-up variables, and <i><tt>next</tt></i> is
either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> or a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a> having the same structure.</dd>

<dt><a id="d0e22781" name="d0e22781" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>block-const</tt></a>*</span></dt>

<dd>Objects representing closed-up <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> tags, representing the <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> tags of the lexical environment in which
this function was defined. Each is a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a> containing in the <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a> part: either a frame pointer to the block
frame, or <tt>#&lt;DISABLED&gt;</tt>. The <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a> is the block's name, only for error message
purposes.</dd>

<dt><a id="d0e22813" name="d0e22813" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>tagbody-const</tt></a>*</span></dt>

<dd>Objects representing closed-up <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> tags, representing the <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> tags of the lexical environment in
which this function was defined. Each is a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
target="_top"><tt>CONS</tt></a> containing in the <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a> part: either a frame pointer to the <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> frame, or <tt>#&lt;DISABLED&gt;</tt> if
the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> has already been left. The <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a> is a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a> containing the names of the <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> tags, only for the error message
purposes.</dd>

<dt><a id="d0e22861" name="d0e22861" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>keyword-const</tt></a>*</span></dt>

<dd>If the function was defined with a <a href="#lalist"
title="Lambda Lists
 [CLHS-3.4]">lambda list</a> containing <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a>, here come the symbols ("keywords"),
in their correct order. They are used by the interpreter during function
call.</dd>

<dt><a id="d0e22877" name="d0e22877" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>other-const</tt></a>*</span></dt>

<dd>Other objects needed by the function's bytecode.</dd>
</dl>
</div>


<br />
<br />
<p>If <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>, <a
href="#comp-fun"
title="The structure of compiled functions"><tt>block-const</tt></a>, <a
href="#comp-fun"
title="The structure of compiled functions"><tt>tagbody-const</tt></a> are
all absent, the function is called <span
class="emphasis"><i>autonomous</i></span>. This is the case if the
function does not refer to lexical variables, blocks or tags defined in
compile code outside of the function. In particular, it is the case if the
function is defined in a null lexical environment.</p>

<p>If some <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>, <a
href="#comp-fun"
title="The structure of compiled functions"><tt>block-const</tt></a>, or
<a href="#comp-fun"
title="The structure of compiled functions"><tt>tagbody-const</tt></a> are
present, the function (a "closure") is created at runtime. The compiler
only generates a prototype, containing <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> values instead of each <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>, <a
href="#comp-fun"
title="The structure of compiled functions"><tt>block-const</tt></a>, <a
href="#comp-fun"
title="The structure of compiled functions"><tt>tagbody-const</tt></a>. At
runtime, a function is created by copying this prototype and replacing the
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> values by the definitive ones.</p>

<p>The list <tt>(<a href="#comp-fun"
title="The structure of compiled functions"><tt>keyword-const</tt></a>* <a
href="#comp-fun"
title="The structure of compiled functions"><tt>other-const</tt></a>*)</tt>
normally does not contain duplicates, because the compiler removes
duplicates when possible. (Duplicates can occur nevertheless, through the
use of <a
href="http://www.lisp.org/HyperSpec/Body/speope_load-time-value.html"
target="_top"><tt>LOAD-TIME-VALUE</tt></a>.)</p>

<p>The <a href="#comp-fun"
title="The structure of compiled functions"><tt>codevec</tt></a> looks
like this (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type <tt>Codevec</tt>):</p>

<div class="variablelist">
<dl>
<dt><a id="d0e22969" name="d0e22969" /><span
class="term"><tt>spdepth_1</tt> (2 bytes)</span></dt>

<dd>The 1st part of the maximal <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> depth.</dd>

<dt><a id="d0e22981" name="d0e22981" /><span
class="term"><tt>spdepth_jmpbufsize</tt> (2 bytes)</span></dt>

<dd>The <a href="#vm" title="The virtual machine"><tt>jmpbufsize</tt></a>
part of the maximal <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> depth. The maximal <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> depth (precomputed
by the compiler) is given by <tt>spdepth_1 + spdepth_jmpbufsize * <a
href="#vm" title="The virtual machine"><tt>jmpbufsize</tt></a></tt>.</dd>

<dt><a id="d0e23007" name="d0e23007" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a> (2
bytes)</span></dt>

<dd>Number of required parameters.</dd>

<dt><a id="d0e23016" name="d0e23016" /><span class="term"><tt>numopt</tt>
(2 bytes)</span></dt>

<dd>Number of optional parameters.</dd>

<dt><a id="d0e23024" name="d0e23024" /><span class="term"><a
href="#comp-fun"
title="The structure of compiled functions"><tt>flags</tt></a> (1
byte)</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e23032" name="d0e23032" /><span class="term">bit
0</span></dt>

<dd>set if the function has an <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a> parameter</dd>

<dt><a id="d0e23042" name="d0e23042" /><span class="term">bit
7</span></dt>

<dd>set if the function has <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> parameters</dd>

<dt><a id="d0e23052" name="d0e23052" /><span class="term">bit
6</span></dt>

<dd>set if the function has <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;ALLOW-OTHER-KEYS</tt></a></dd>

<dt><a id="d0e23062" name="d0e23062" /><span class="term">bit
4</span></dt>

<dd>set if the function is a generic function</dd>

<dt><a id="d0e23068" name="d0e23068" /><span class="term">bit
3</span></dt>

<dd>set if the function is a generic function and its effective method
shall be returned (instead of being executed)</dd>
</dl>
</div>
</dd>

<dt><a id="d0e23074" name="d0e23074" /><span
class="term"><tt>signature</tt> (1 byte)</span></dt>

<dd>An abbreviation code depending on <a href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a>,
<tt>numopt</tt>, <a href="#comp-fun"
title="The structure of compiled functions"><tt>flags</tt></a>. It is used
for speeding up the function call.</dd>

<dt><a id="d0e23093" name="d0e23093" /><span class="term"><tt>numkey</tt>
(2 bytes, only if the function has <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a>)</span></dt>

<dd>The number of <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> parameters.</dd>

<dt><a id="d0e23109" name="d0e23109" /><span
class="term"><tt>keyconsts</tt> (2 bytes, only if the function has <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a>)</span></dt>

<dd>The offset of the <a href="#comp-fun"
title="The structure of compiled functions"><tt>keyword-const</tt></a> in
the function.</dd>

<dt><a id="d0e23125" name="d0e23125" /><span class="term"><tt>byte</tt>*
(any number of bytes)</span></dt>

<dd>The bytecode instructions.</dd>
</dl>
</div>


<br />
<br />
</div>

<div class="section"><a id="intr-struct" name="intr-struct" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="intr-struct"
name="intr-struct" />The general structure of the instructions</h2>
</div>
</div>

<p>All instructions consist of one byte, denoting the opcode, and some
number of operands.</p>

<p>The conversion from a byte (in the range 0..255) to the opcode is
performed by lookup in the table contained in the file
<tt>bytecode.d</tt>.</p>

<p>There are the following types of operands, denoted by different
letters:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e23146" name="d0e23146" /><span
class="term"><i><tt>k</tt></i>, <i><tt>n</tt></i>, <i><tt>m</tt></i>,
<i><tt>l</tt></i></span></dt>

<dd>A (nonnegative) numeric operand. The next byte is read. If its bit 7
is zero, then the bits 6..0 give the value (7 bits). If its bit 7 is one,
then the bits 6..0 and the subsequent byte together form the value (15
bits).</dd>

<dt><a id="d0e23162" name="d0e23162" /><span
class="term"><i><tt>b</tt></i></span></dt>

<dd>A (nonnegative) 1-byte operand. The next byte is read and is the
value.</dd>

<dt><a id="d0e23169" name="d0e23169" /><span
class="term"><i><tt>label</tt></i></span></dt>

<dd>A label operand. A signed numeric operand is read: The next byte is
read. If its bit 7 is zero, then the bits 6..0 give the value (7 bits,
sign-extended). If its bit 7 is one, then the bits 6..0 and the subsequent
byte together form the value (15 bits, sign-extended). If the latter
15-bit result is zero, then four more bytes are read and put together (32
bits, sign-extended). Finally, the bytecode pointer for the target is
computed as the current bytecode pointer (pointing after the operand just
read), plus the signed numeric operand.</dd>
</dl>
</div>


<br />
<br />
</div>

<div class="section"><a id="intr-set" name="intr-set" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="intr-set"
name="intr-set" />The instruction set</h2>
</div>
</div>

<div class="section"><a id="instr-const" name="instr-const" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-const" name="instr-const" />Instructions
for constants</h3>
</div>
</div>

<div class="table">
<p><a id="d0e23182" name="d0e23182" /><b>Table 30.1. Instructions for
constants</b></p>

<table summary="Instructions for constants" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>)</tt></td>
<td>Load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(PUSH-NIL <i><tt>n</tt></i>)</tt></td>
<td>Push <i><tt>n</tt></i><a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>s into the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td><i><tt>n</tt></i> times do: *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, values undefined</td>
</tr>

<tr>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>)</tt></td>
<td>Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(CONST <i><tt>n</tt></i>)</tt></td>
<td>Load the function's <i><tt>n</tt></i>th constant into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>],
<a href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-lex-var" name="instr-lex-var" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-lex-var"
name="instr-lex-var" />Instructions for lexical variables</h3>
</div>
</div>

<div class="table">
<p><a id="d0e23311" name="d0e23311" /><b>Table 30.2. Instructions for
lexical variables</b></p>

<table summary="Instructions for lexical variables" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(LOAD <i><tt>n</tt></i>)</tt></td>
<td>Load a directly accessible local variable into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := *(<a
href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>), <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(LOADI <i><tt>k<sub>1</sub></tt></i> <i><tt>k<sub>2</sub></tt></i>
<i><tt>n</tt></i>)</tt></td>
<td>Load an indirectly accessible local variable into values.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := *(*(<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+
<i><tt>n</tt></i>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(LOADC <i><tt>n</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Load a closed-up variable, defined in the same function and directly
accessible, into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>),1+<i><tt>
m</tt></i>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(LOADV <i><tt>k</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Load a closed-up variable, defined in an outer function, into
values.</td>
<td><i><tt>v</tt></i> := <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>,
<i><tt>m</tt></i> times do: <i><tt>v</tt></i> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>v</tt></i>,0), <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>v</tt></i>,<i><tt>m</tt></i>), <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(LOADIC <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i> <i><tt>n</tt></i>
<i><tt>m</tt></i>)</tt></td>
<td>Load a closed-up variable, defined in the same function and indirectly
accessible, into values.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(*(*(<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+<i><tt>n</tt></i>),1+<i>
<tt>m</tt></i>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(STORE <i><tt>n</tt></i>)</tt></td>
<td>Store values into a directly accessible local variable.</td>
<td>*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) := <a
href="#vm" title="The virtual machine"><tt>value1</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(STOREI <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i> <i><tt>n</tt></i>)</tt></td>
<td>Store values into an indirectly accessible local variable.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, *(*(<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+
<i><tt>n</tt></i>) := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(STOREC <i><tt>n</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Store values into a closed-up variable, defined in the same function
and directly accessible.</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>),1+m) :=
<a href="#vm" title="The virtual machine"><tt>value1</tt></a>, <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(STOREV <i><tt>k</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Store values into a closed-up variable, defined in an outer
function.</td>
<td><i><tt>v</tt></i> := <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a>,
<i><tt>m</tt></i> times do: <i><tt>v</tt></i> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>v</tt></i>,0), <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>v</tt></i>,<i><tt>m</tt></i>) :=
<a href="#vm" title="The virtual machine"><tt>value1</tt></a>, <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(STOREIC <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i> <i><tt>n</tt></i>
<i><tt>m</tt></i>)</tt></td>
<td>Store values into a closed-up variable, defined in the same function
and indirectly accessible.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(*(*(<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+<i><tt>n</tt></i>),1+<i>
<tt>m</tt></i>) := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-dyn-var" name="instr-dyn-var" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-dyn-var"
name="instr-dyn-var" />Instructions for dynamic variables</h3>
</div>
</div>

<div class="table">
<p><a id="d0e23787" name="d0e23787" /><b>Table 30.3. Instructions for
dynamic variables</b></p>

<table summary="Instructions for dynamic variables" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(GETVALUE <i><tt>n</tt></i>)</tt></td>
<td>Load a symbol's value into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> :=
symbol-value(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]),
<a href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(SETVALUE <i><tt>n</tt></i>)</tt></td>
<td>Store values into a symbol's value.</td>
<td>symbol-value(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>])
:= <a href="#vm" title="The virtual machine"><tt>value1</tt></a>, <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(BIND <i><tt>n</tt></i>)</tt></td>
<td>Bind a symbol dynamically.</td>
<td>Bind the value of the symbol <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
to <a href="#vm" title="The virtual machine"><tt>value1</tt></a>,
implicitly <a href="#vm" title="The virtual machine"><tt>STACK</tt></a> -=
3, values undefined</td>
</tr>

<tr>
<td><tt>(UNBIND1)</tt></td>
<td>Dissolve one binding frame.</td>
<td>Unbind the binding frame <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> is pointing to, implicitly
<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> += 3</td>
</tr>

<tr>
<td><tt>(UNBIND <i><tt>n</tt></i>)</tt></td>
<td>Dissolve <i><tt>n</tt></i> binding frames.</td>
<td><i><tt>n</tt></i> times do: Unbind the binding frame <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> is pointing to, thereby
incrementing <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>
Thus, <a href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
1+2*<i><tt>n</tt></i></td>
</tr>

<tr>
<td><tt>(PROGV)</tt></td>
<td>Bind a set of symbols dynamically to a set of values.</td>
<td><i><tt>symbols</tt></i> := *<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++, *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, build a single binding
frame binding the symbols in <i><tt>symbols</tt></i> to the values in <a
href="#vm" title="The virtual machine"><tt>value1</tt></a>, values
undefined</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-stack" name="instr-stack" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-stack" name="instr-stack" />Instructions
for stack operations</h3>
</div>
</div>

<div class="table">
<p><a id="d0e23955" name="d0e23955" /><b>Table 30.4. Instructions for
stack operations</b></p>

<table summary="Instructions for stack operations" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(PUSH)</tt></td>
<td>Push one object onto the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td>*--<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> := <a
href="#vm" title="The virtual machine"><tt>value1</tt></a>, values
undefined</td>
</tr>

<tr>
<td><tt>(POP)</tt></td>
<td>Pop one object from the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := *<a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>++, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>

<tr>
<td><tt>(SKIP <i><tt>n</tt></i>)</tt></td>
<td>Restore a previous <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> pointer. Remove
<i><tt>n</tt></i> objects from the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>STACK</tt></a> := <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> +
<i><tt>n</tt></i></td>
</tr>

<tr>
<td><tt>(SKIPI <i><tt>k<sub>1</sub></tt></i> <i><tt>k<sub>2</sub></tt></i>
<i><tt>n</tt></i>)</tt></td>
<td>Restore a previous <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> pointer. Remove an unknown
number of objects from the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := *(<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>), <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> := <a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>+1</td>
</tr>

<tr>
<td><tt>(SKIPSP <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i>)</tt></td>
<td>Restore a previous <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> pointer.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := <a href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-jump" name="instr-jump" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-jump" name="instr-jump" />Instructions for
control flow, jumps</h3>
</div>
</div>

<div class="table">
<p><a id="d0e24160" name="d0e24160" /><b>Table 30.5. Instructions for
control flow, jumps</b></p>

<table summary="Instructions for control flow, jumps" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(SKIP&amp;RET <i><tt>n</tt></i>)</tt></td>
<td>Clean up the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, and return from the
function.</td>
<td><a href="#vm" title="The virtual machine"><tt>STACK</tt></a> := <a
href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>, return
from the function, returning values.</td>
</tr>

<tr>
<td><tt>(SKIP&amp;RETGF <i><tt>n</tt></i>)</tt></td>
<td>Clean up the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, and return from the
generic function.</td>
<td>If bit 3 is set in the function's <a href="#comp-fun"
title="The structure of compiled functions"><tt>flags</tt></a>, then <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>, <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1, and
return from the function. Otherwise: if the current function has no <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a> argument, then <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-<a
href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a>, apply <a
href="#vm" title="The virtual machine"><tt>value1</tt></a> to the <a
href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a> arguments
still on the <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>,
and return from the function. Else <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-<a
href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a>-1, apply
<a href="#vm" title="The virtual machine"><tt>value1</tt></a> to the <a
href="#comp-fun"
title="The structure of compiled functions"><tt>numreq</tt></a> arguments
and the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a> argument, all still on the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>, and return from
the function.</td>
</tr>

<tr>
<td><tt>(JMP <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>.</td>
<td>PC := <i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(JMPIF <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is true.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is
not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, PC := <i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(JMPIFNOT <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is false.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, PC := <i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(JMPIF1 <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i> and forget secondary values, if <a
href="#vm" title="The virtual machine"><tt>value1</tt></a> is true.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is
not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1, PC :=
<i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(JMPIFNOT1 <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i> and forget secondary values, if <a
href="#vm" title="The virtual machine"><tt>value1</tt></a> is false.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1, PC :=
<i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(JMPIFATOM <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is not a cons.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is
not a cons, PC := <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFCONSP <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is a cons.</td>
<td>If <a href="#vm" title="The virtual machine"><tt>value1</tt></a> is a
cons, PC := <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFEQ <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to the top-of-stack.</td>
<td>If eq(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>,*<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++), PC :=
<i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFNOTEQ <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> is not <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to the top-of-stack.</td>
<td>If not eq(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>,*<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++), PC :=
<i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFEQTO <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if the top-of-stack is <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to a constant.</td>
<td>If eq(*<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++,<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]),
PC := <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFNOTEQTO <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if the top-of-stack is not <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> to a constant.</td>
<td>If not eq(*<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++,<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]),
PC := <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPHASH <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Table-driven jump, depending on <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>.</td>
<td>Lookup <a href="#vm" title="The virtual machine"><tt>value1</tt></a>
in the hash table <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>].
(The hash table's test is either <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a>.) If found, the hash table value is a
signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>, jump to it: PC := PC + value. Else jump
to <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPHASHV <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Table-driven jump, depending on <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>, inside a generic
function.</td>
<td>Lookup <a href="#vm" title="The virtual machine"><tt>value1</tt></a>
in the hash table <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[0],<i><tt>n</tt></i>).
(The hash table's test is either <a
href="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
target="_top"><tt>EQ</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a>.) If found, the hash table value is a
signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>, jump to it: PC := PC + value. Else jump
to <i><tt>label</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(JSR <i><tt>label</tt></i>)</tt></td>
<td>Subroutine call.</td>
<td>*--<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> :=
function. Then start interpreting the bytecode at <i><tt>label</tt></i>,
with values undefined. When a <tt>(RET)</tt> is encountered, program
execution is resumed at the instruction after <tt>(JSR
<i><tt>label</tt></i>)</tt>.</td>
</tr>

<tr>
<td><tt>(JMPTAIL <i><tt>m</tt></i> <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td>Tail subroutine call.</td>
<td><i><tt>n</tt></i> &gt;= <i><tt>m</tt></i>. The <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> frame of size
<i><tt>n</tt></i> is reduced to size <i><tt>m</tt></i>: {*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-<i><tt>m</tt></i>),
..., *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1)} :=
{*<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>, ..., *(<a
href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>m</tt></i>-1)}. <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> += n-m. *--<a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> := function.
Then jump to <i><tt>label</tt></i>, with values undefined.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-env" name="instr-env" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-env" name="instr-env" />Instructions for
lexical environment, creation of closures</h3>
</div>
</div>

<div class="table">
<p><a id="d0e24814" name="d0e24814" /><b>Table 30.6. Instructions for
lexical environment, creation of closures</b></p>

<table summary="Instructions for lexical environment,
 creation of closures" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(VENV)</tt></td>
<td>Load the <a href="#comp-fun"
title="The structure of compiled functions"><tt>venv-const</tt></a> into
values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[0], <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(MAKE-VECTOR1&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td>Create a simple-vector used for closed-up variables.</td>
<td><i><tt>v</tt></i> := new simple-vector of size <i><tt>n</tt></i>+1. <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>v</tt></i>,0) := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>. *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <i><tt>v</tt></i>.
values undefined</td>
</tr>

<tr>
<td><tt>(COPY-CLOSURE <i><tt>m</tt></i> <i><tt>n</tt></i>)</tt></td>
<td>Create a closure by copying the prototype and filling in the lexical
environment.</td>
<td><i><tt>f</tt></i> := copy-function(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>m</tt></i>]).
For <i><tt>i</tt></i>=0,..,<i><tt>n</tt></i>-1: <i><tt>f</tt></i>_<a
href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[i] := *(<a
href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1-<i><tt>i</tt></i>).
<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
<i><tt>n</tt></i>. <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <i><tt>f</tt></i>, <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-funcall" name="instr-funcall" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-funcall"
name="instr-funcall" />Instructions for function calls</h3>
</div>
</div>

<div class="table">
<p><a id="d0e24951" name="d0e24951" /><b>Table 30.7. Instructions for
function calls</b></p>

<table summary="Instructions for function calls" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(CALL <i><tt>k</tt></i> <i><tt>n</tt></i>)</tt></td>
<td>Calls a constant function with <i><tt>k</tt></i> arguments.</td>
<td>The function <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
is called with the arguments *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>k</tt></i>-1), ...,
*(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0). <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
<i><tt>k</tt></i>. The returned values go into values.</td>
</tr>

<tr>
<td><tt>(CALL0 <i><tt>n</tt></i>)</tt></td>
<td>Calls a constant function with 0 arguments.</td>
<td>The function <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
is called with 0 arguments. The returned values go into values.</td>
</tr>

<tr>
<td><tt>(CALL1 <i><tt>n</tt></i>)</tt></td>
<td>Calls a constant function with 1 argument.</td>
<td>The function <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
is called with one argument *<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 1. The returned values
go into values.</td>
</tr>

<tr>
<td><tt>(CALL2 <i><tt>n</tt></i>)</tt></td>
<td>Calls a constant function with 2 arguments.</td>
<td>The function <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
is called with two arguments *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+1) and *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+0). <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 2. The returned values
go into values.</td>
</tr>

<tr>
<td><tt>(CALLS1 <i><tt>b</tt></i>)</tt></td>
<td>Calls a system function with no <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a>.</td>
<td>Calls the system function FUNTAB[<i><tt>b</tt></i>]. The right number
of arguments is already on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> (including
<tt>#&lt;UNBOUND&gt;</tt>s in place of absent <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> parameters). The arguments are removed
from the <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>. The
returned values go into values.</td>
</tr>

<tr>
<td><tt>(CALLS2 <i><tt>b</tt></i>)</tt></td>
<td>Calls a system function with no <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a>.</td>
<td>Calls the system function FUNTAB[256+<i><tt>b</tt></i>]. The right
number of arguments is already on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> (including
<tt>#&lt;UNBOUND&gt;</tt>s in place of absent <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> parameters). The arguments are removed
from the <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>. The
returned values go into values.</td>
</tr>

<tr>
<td><tt>(CALLSR <i><tt>m</tt></i> <i><tt>b</tt></i>)</tt></td>
<td>Calls a system function with <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a>.</td>
<td>Calls the system function FUNTABR[<i><tt>b</tt></i>]. The minimum
number of arguments is already on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, and <i><tt>m</tt></i>
additional arguments as well. The arguments are removed from the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>. The returned
values go into values.</td>
</tr>

<tr>
<td><tt>(CALLC)</tt></td>
<td>Calls a computed compiled function with no <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a>.</td>
<td>Calls the compiled function <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>. The right number of
arguments is already on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> (including
<tt>#&lt;UNBOUND&gt;</tt>s in place of absent <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> parameters). The arguments are
removed from the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. The returned values go
into values.</td>
</tr>

<tr>
<td><tt>(CALLCKEY)</tt></td>
<td>Calls a computed compiled function with <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a>.</td>
<td>Calls the compiled function <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>. The right number of
arguments is already on the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> (including
<tt>#&lt;UNBOUND&gt;</tt>s in place of absent <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> parameters). The arguments are removed
from the <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>. The
returned values go into values.</td>
</tr>

<tr>
<td><tt>(FUNCALL <i><tt>n</tt></i>)</tt></td>
<td>Calls a computed function.</td>
<td>Calls the function *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) with the
arguments *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1), ...,
*(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0). <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
<i><tt>n</tt></i>+1. The returned values go into values.</td>
</tr>

<tr>
<td><tt>(APPLY <i><tt>n</tt></i>)</tt></td>
<td>Calls a computed function with an unknown number of arguments.</td>
<td>Calls the function *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) with the
arguments *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1), ...,
*(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0) and a
list of additional arguments <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += <i><tt>n</tt></i>+1. The
returned values go into values.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-optkey" name="instr-optkey" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-optkey" name="instr-optkey" />Instructions
for optional and keyword parameters</h3>
</div>
</div>

<div class="table">
<p><a id="d0e25331" name="d0e25331" /><b>Table 30.8. Instructions for
optional and keyword parameters</b></p>

<table summary="Instructions for optional
 and keyword parameters" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(PUSH-UNBOUND <i><tt>n</tt></i>)</tt></td>
<td>Push <i><tt>n</tt></i><tt>#&lt;UNBOUND&gt;</tt>s into the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>.</td>
<td><i><tt>n</tt></i> times do: *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> :=
<tt>#&lt;UNBOUND&gt;</tt>. values undefined</td>
</tr>

<tr>
<td><tt>(UNLIST <i><tt>n</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Destructure a proper list.</td>
<td>0 &le; <i><tt>m</tt></i> &le; <i><tt>n</tt></i>. <i><tt>n</tt></i>
times do: *--<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>
:= <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>). During the last
<i><tt>m</tt></i> iterations, the list <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> may already have reached
its end; in this case, *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> :=
<tt>#&lt;UNBOUND&gt;</tt>. At the end, <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> must be <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>. values undefined</td>
</tr>

<tr>
<td><tt>(UNLIST* <i><tt>n</tt></i> <i><tt>m</tt></i>)</tt></td>
<td>Destructure a proper or dotted list.</td>
<td>0 &le; <i><tt>m</tt></i> &le; <i><tt>n</tt></i>, <i><tt>n</tt></i>
&gt; 0. <i><tt>n</tt></i> times do: *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>). During the last
<i><tt>m</tt></i> iterations, the list <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> may already have reached
its end; in this case, *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> :=
<tt>#&lt;UNBOUND&gt;</tt>. At the end, after <i><tt>n</tt></i><a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>s, *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>. values undefined</td>
</tr>

<tr>
<td><tt>(JMPIFBOUNDP <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Jump to <i><tt>label</tt></i>, if a local variable is not
unbound.</td>
<td>If *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) is not
<tt>#&lt;UNBOUND&gt;</tt>, <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>), <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1, PC :=
<i><tt>label</tt></i>. Else: values undefined.</td>
</tr>

<tr>
<td><tt>(BOUNDP <i><tt>n</tt></i>)</tt></td>
<td>Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> into values, depending on whether a local
variable is bound.</td>
<td>If *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) is not
<tt>#&lt;UNBOUND&gt;</tt>, <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1. Else: <a
href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(UNBOUND-&gt;NIL <i><tt>n</tt></i>)</tt></td>
<td>If a local variable is unbound, assign a default value <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> to it.</td>
<td>If *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) is
<tt>#&lt;UNBOUND&gt;</tt>, *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>) := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-mulval" name="instr-mulval" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-mulval" name="instr-mulval" />Instructions
for multiple values</h3>
</div>
</div>

<div class="table">
<p><a id="d0e25657" name="d0e25657" /><b>Table 30.9. Instructions for
multiple values</b></p>

<table summary="Instructions for multiple values" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(VALUES0)</tt></td>
<td>Load no values into values.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 0</td>
</tr>

<tr>
<td><tt>(VALUES1)</tt></td>
<td>Forget secondary values.</td>
<td><a href="#vm" title="The virtual machine"><tt>mv_count</tt></a> :=
1</td>
</tr>

<tr>
<td><tt>(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>-TO-MV
<i><tt>n</tt></i>)</tt></td>
<td>Pop the first <i><tt>n</tt></i> objects from <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> into values.</td>
<td>Load values(*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1),...,*(<a
 href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0)) into
values. <a href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
<i><tt>n</tt></i>.</td>
</tr>

<tr>
<td><tt>(MV-TO-<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>)</tt></td>
<td>Save values on <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td>Push the <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> values onto the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> (in order: <a
href="#vm" title="The virtual machine"><tt>value1</tt></a> comes first).
<a href="#vm" title="The virtual machine"><tt>STACK</tt></a> -= <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a>. values
undefined</td>
</tr>

<tr>
<td><tt>(NV-TO-<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>
<i><tt>n</tt></i>)</tt></td>
<td>Save <i><tt>n</tt></i> values on <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>.</td>
<td>Push the first <i><tt>n</tt></i> values onto the <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> (in order: <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> comes first). <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> -=
<i><tt>n</tt></i>. values undefined</td>
</tr>

<tr>
<td><tt>(MV-TO-LIST)</tt></td>
<td>Convert multiple values into a list.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := list
of values, <a href="#vm" title="The virtual machine"><tt>mv_count</tt></a>
:= 1</td>
</tr>

<tr>
<td><tt>(LIST-TO-MV)</tt></td>
<td>Convert a list into multiple values.</td>
<td>Call the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
target="_top"><tt>VALUES-LIST</tt></a> with <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> as argument. The returned
values go into values.</td>
</tr>

<tr>
<td><tt>(MVCALLP)</tt></td>
<td>Start a <a
href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html"
target="_top"><tt>MULTIPLE-VALUE-CALL</tt></a> invocation.</td>
<td>*--<a href="#vm" title="The virtual machine"><tt>SP</tt></a> := <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>. *--<a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>.</td>
</tr>

<tr>
<td><tt>(MVCALL)</tt></td>
<td>Finish a <a
href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html"
target="_top"><tt>MULTIPLE-VALUE-CALL</tt></a> invocation.</td>
<td>newSTACK := *<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>++. Call the function
*(newSTACK-1), passing it *(newSTACK-2), ..., *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+0) as arguments. <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> := newSTACK. The
returned values go into values.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-block" name="instr-block" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-block" name="instr-block" />Instructions
for <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html"
target="_top"><tt>RETURN-FROM</tt></a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e25909" name="d0e25909" /><b>Table 30.10. Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html"
target="_top"><tt>RETURN-FROM</tt></a></b></p>

<table summary="Instructions for BLOCK and RETURN-FROM" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(BLOCK-OPEN <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Create a <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> frame.</td>
<td>Create a <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> frame, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= 3, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> -= 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. The topmost (third)
object in the block frame is <a
href="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
target="_top"><tt>CONS</tt></a>(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>],frame-pointer)
(its <i><tt>block-cons</tt></i>). Upon a <a
href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html"
target="_top"><tt>RETURN-FROM</tt></a> to this frame, execution will
continue at <i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(BLOCK-CLOSE)</tt></td>
<td>Dissolve a <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> frame.</td>
<td>Dissolve the <a
href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 3, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> += 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. Mark the
<i><tt>block-cons</tt></i> as invalid.</td>
</tr>

<tr>
<td><tt>(RETURN-FROM <i><tt>n</tt></i>)</tt></td>
<td>Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> whose <i><tt>block-cons</tt></i> is
given.</td>
<td><i><tt>block-cons</tt></i> := <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>].
If <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>block-cons</tt></i>) =
<tt>#&lt;DISABLED&gt;</tt>, signal an error. Else <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>block-cons</tt></i>) is a
frame-pointer. Unwind the stack up to this frame, pass it values.</td>
</tr>

<tr>
<td><tt>(RETURN-FROM-I <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i> <i><tt>n</tt></i>)</tt></td>
<td>Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html"
target="_top"><tt>BLOCK</tt></a> whose <i><tt>block-cons</tt></i> is
indirectly accessible.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <i><tt>block-cons</tt></i> := *(*(<a
href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+<i><tt>n</tt></i>).
If <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>block-cons</tt></i>) =
<tt>#&lt;DISABLED&gt;</tt>, signal an error. Else <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>block-cons</tt></i>) is a
frame-pointer. Unwind the stack up to this frame, pass it values.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-tagbody" name="instr-tagbody" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-tagbody"
name="instr-tagbody" />Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_go.html"
target="_top"><tt>GO</tt></a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e26147" name="d0e26147" /><b>Table 30.11. Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_go.html"
target="_top"><tt>GO</tt></a></b></p>

<table summary="Instructions for TAGBODY and GO" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(TAGBODY-OPEN <i><tt>n</tt></i> <i><tt>label<sub>1</sub></tt></i>
... <i><tt>label<sub>n</sub></tt></i>)</tt></td>
<td>Create a tagbody frame.</td>
<td>Fetch <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>],
this is a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a> with <i><tt>m</tt></i> elements,
then decode <i><tt>m</tt></i> label operands. Create a <a
href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
target="_top"><tt>TAGBODY</tt></a> frame, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= 3+<i><tt>m</tt></i>, <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> -= 1+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. The third object in
the tagbody frame is <a
href="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
target="_top"><tt>CONS</tt></a>(<a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>],frame-pointer)
(the <i><tt>tagbody-cons</tt></i>) Upon a <a
href="http://www.lisp.org/HyperSpec/Body/speope_go.html"
target="_top"><tt>GO</tt></a> to tag <i><tt>label</tt></i> of this frame,
execution will continue at <i><tt>label<sub>l</sub></tt></i>. values
undefined</td>
</tr>

<tr>
<td><tt>(TAGBODY-CLOSE-NIL)</tt></td>
<td>Dissolve a tagbody frame, and load <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> into values.</td>
<td>Dissolve the tagbody frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 3+<i><tt>m</tt></i>, <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> += 1+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. Mark the
<i><tt>tagbody-cons</tt></i> as invalid. <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(TAGBODY-CLOSE)</tt></td>
<td>Dissolve a tagbody frame.</td>
<td>Dissolve the tagbody frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 3+<i><tt>m</tt></i>, <a
href="#vm" title="The virtual machine"><tt>SP</tt></a> += 1+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. Mark the
<i><tt>tagbody-cons</tt></i> as invalid.</td>
</tr>

<tr>
<td><tt>(GO <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Jump into a tagbody whose <i><tt>tagbody-cons</tt></i> is given.</td>
<td><i><tt>tagbody-cons</tt></i> := <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>].
If <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>tagbody-cons</tt></i>) =
<tt>#&lt;DISABLED&gt;</tt>, signal an error. Else <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>tagbody-cons</tt></i>) is a
frame-pointer. Unwind the stack up to this frame, pass it the number
<i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(GO-I <i><tt>k<sub>1</sub></tt></i> <i><tt>k<sub>2</sub></tt></i>
<i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td>Jump into a tagbody whose <i><tt>tagbody-cons</tt></i> is indirectly
accessible.</td>
<td><i><tt>k</tt></i> := <i><tt>k<sub>1</sub></tt></i> + <a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a> *
<i><tt>k<sub>2</sub></tt></i>, <i><tt>tagbody-cons</tt></i> := *(*(<a
href="#vm"
title="The virtual machine"><tt>SP</tt></a>+<i><tt>k</tt></i>)+<i><tt>n</tt></i>).
If <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>tagbody-cons</tt></i>) =
<tt>#&lt;DISABLED&gt;</tt>, signal an error. Else <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<i><tt>tagbody-cons</tt></i>) is a
frame-pointer. Unwind the stack up to this frame, pass it the number
<i><tt>label</tt></i>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-catch" name="instr-catch" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-catch" name="instr-catch" />Instructions
for <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_throw.html"
target="_top"><tt>THROW</tt></a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e26458" name="d0e26458" /><b>Table 30.12. Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_throw.html"
target="_top"><tt>THROW</tt></a></b></p>

<table summary="Instructions for CATCH and THROW" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(CATCH-OPEN <i><tt>label</tt></i>)</tt></td>
<td>Create a <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame.</td>
<td>Create a <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame, with <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> as tag. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= 3, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> -= 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. Upon a <a
href="http://www.lisp.org/HyperSpec/Body/speope_throw.html"
target="_top"><tt>THROW</tt></a> to this tag execution continues at
<i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(CATCH-CLOSE)</tt></td>
<td>Dissolve a <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame.</td>
<td>Dissolve the <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 3, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> += 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>.</td>
</tr>

<tr>
<td><tt>(THROW)</tt></td>
<td>Non-local exit to a <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame.</td>
<td><i><tt>tag</tt></i> := *<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++. Search the innermost <a
href="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
target="_top"><tt>CATCH</tt></a> frame with tag <i><tt>tag</tt></i> on the
<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>, unwind the
stack up to it, pass it values.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-unwind" name="instr-unwind" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-unwind" name="instr-unwind" />Instructions
for <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e26587" name="d0e26587" /><b>Table 30.13. Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a></b></p>

<table summary="Instructions for UNWIND-PROTECT" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(UNWIND-PROTECT-OPEN <i><tt>label</tt></i>)</tt></td>
<td>Create an <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame.</td>
<td>Create an <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= 2, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> -= 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. When the stack will
be unwound by a non-local exit, values will be saved on <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, and execution will be
transferred to <i><tt>label</tt></i>.</td>
</tr>

<tr>
<td><tt>(UNWIND-PROTECT-NORMAL-EXIT)</tt></td>
<td>Dissolve an <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame, and start the cleanup
code.</td>
<td>Dissolve the <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 2, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> += 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := 0, *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := 0, *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. Save the values on the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a>.</td>
</tr>

<tr>
<td><tt>(UNWIND-PROTECT-CLOSE)</tt></td>
<td>Terminate the cleanup code.</td>
<td>newSTACK := *<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>++. Load values(*(newSTACK-1),
..., *(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0))
into values. <a href="#vm" title="The virtual machine"><tt>STACK</tt></a>
:= newSTACK. SPword1 := *<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>++, SPword2 := *<a href="#vm"
title="The virtual machine"><tt>SP</tt></a>++. Continue depending on
SPword1 and SPword2. If both are 0, simply continue execution. If SPword2
is 0 but SPword1 is nonzero, interpret it as a label and jump to it.</td>
</tr>

<tr>
<td><tt>(UNWIND-PROTECT-CLEANUP)</tt></td>
<td>Dissolve an <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame, and execute the cleanup
code like a subroutine call.</td>
<td>Dissolve the <a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> frame at <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>, get <i><tt>label</tt></i>
out of the frame. <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += 2, <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> += 2+<a href="#vm"
title="The virtual machine"><tt>jmpbufsize</tt></a>. *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := 0, *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := PC, *--<a href="#vm"
title="The virtual machine"><tt>SP</tt></a> := <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>. Save the values on the <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a>, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> -= <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a>. PC :=
<i><tt>label</tt></i>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-handler" name="instr-handler" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-handler"
name="instr-handler" />Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html"
target="_top"><tt>HANDLER-BIND</tt></a></h3>
</div>
</div>

<div class="table">
<p><a id="d0e26801" name="d0e26801" /><b>Table 30.14. Instructions for <a
href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html"
target="_top"><tt>HANDLER-BIND</tt></a></b></p>

<table summary="Instructions for HANDLER-BIND" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(HANDLER-OPEN <i><tt>n</tt></i>)</tt></td>
<td>Create a handler frame.</td>
<td>Create a handler frame, using <a href="#comp-fun"
title="The structure of compiled functions"><tt>consts</tt></a>[<i><tt>n</tt></i>]
which contains the condition types, the corresponding labels and the
current <a href="#vm" title="The virtual machine"><tt>SP</tt></a> depth (=
function entry <a href="#vm" title="The virtual machine"><tt>SP</tt></a> -
current <a href="#vm" title="The virtual machine"><tt>SP</tt></a>).</td>
</tr>

<tr>
<td><tt>(HANDLER-BEGIN&amp;PUSH)</tt></td>
<td>Start a handler.</td>
<td>Restore the same <a href="#vm"
title="The virtual machine"><tt>SP</tt></a> state as after the
HANDLER-OPEN. <a href="#vm"
title="The virtual machine"><tt>value1</tt></a> := the condition that was
passed to the handler, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1. *--<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> := <a href="#vm"
title="The virtual machine"><tt>value1</tt></a>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-inline" name="instr-inline" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-inline" name="instr-inline" />Instructions
for some inlined functions</h3>
</div>
</div>

<div class="table">
<p><a id="d0e26878" name="d0e26878" /><b>Table 30.15. Instructions for
some inlined functions</b></p>

<table summary="Instructions for some inlined functions" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>description</th>
<th>semantics</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(NOT)</tt></td>
<td>Inlined call to NOT.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> :=
not(<a href="#vm" title="The virtual machine"><tt>value1</tt></a>), <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(EQ)</tt></td>
<td>Inlined call to EQ.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> :=
eq(*<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>++,<a
href="#vm" title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(CAR)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CAR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(CDR)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
target="_top"><tt>CDR</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(CONS)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
target="_top"><tt>CONS</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> :=
cons(*<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>++,<a
href="#vm" title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(SYMBOL-FUNCTION)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
target="_top"><tt>SYMBOL-FUNCTION</tt></a>(<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(SVREF)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(*<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>++,<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(SVSET)</tt></td>
<td>Inlined call to SYSTEM::SVSTORE.</td>
<td><i><tt>arg1</tt></i> := *(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+1), <i><tt>arg2</tt></i> :=
*(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0), <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> += 2. <a
href="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
target="_top"><tt>SVREF</tt></a>(<i><tt>arg2</tt></i>,<a href="#vm"
title="The virtual machine"><tt>value1</tt></a>) := <i><tt>arg1</tt></i>.
<a href="#vm" title="The virtual machine"><tt>value1</tt></a> :=
<i><tt>arg1</tt></i>, <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1.</td>
</tr>

<tr>
<td><tt>(LIST <i><tt>n</tt></i>)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst_list.html"
target="_top"><tt>LIST</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst_list.html"
target="_top"><tt>LIST</tt></a>(*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1),...,*(<a
 href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0)), <a
href="#vm" title="The virtual machine"><tt>mv_count</tt></a> := 1, <a
href="#vm" title="The virtual machine"><tt>STACK</tt></a> +=
<i><tt>n</tt></i>.</td>
</tr>

<tr>
<td><tt>(LIST* <i><tt>n</tt></i>)</tt></td>
<td>Inlined call to <a
href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
target="_top"><tt>LIST*</tt></a>.</td>
<td><a href="#vm" title="The virtual machine"><tt>value1</tt></a> := <a
href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
target="_top"><tt>LIST*</tt></a>(*(<a href="#vm"
title="The virtual machine"><tt>STACK</tt></a>+<i><tt>n</tt></i>-1),...,
*(<a href="#vm" title="The virtual machine"><tt>STACK</tt></a>+0),<a
href="#vm" title="The virtual machine"><tt>value1</tt></a>), <a href="#vm"
title="The virtual machine"><tt>mv_count</tt></a> := 1, <a href="#vm"
title="The virtual machine"><tt>STACK</tt></a> += <i><tt>n</tt></i>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-combo" name="instr-combo" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-combo" name="instr-combo" />Combined
instructions</h3>
</div>
</div>

<p>The most frequent short sequences of instructions have an equivalent
combined instruction. They are only present for space and speed
optimization. The only exception is <tt>FUNCALL&amp;SKIP&amp;RETGF</tt>,
which is needed for generic functions.</p>

<div class="table">
<p><a id="d0e27222" name="d0e27222" /><b>Table 30.16. Combined
instructions</b></p>

<table summary="Combined instructions" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>equivalent</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(NIL&amp;PUSH)</tt></td>
<td><tt>(NIL) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(T&amp;PUSH)</tt></td>
<td><tt>(T) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CONST&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(CONST <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOADI&amp;PUSH <i><tt>k<sub>1</sub></tt></i>
<i><tt>k<sub>2</sub></tt></i> <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOADI <i><tt>k<sub>1</sub></tt></i> <i><tt>k<sub>2</sub></tt></i>
<i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOADC&amp;PUSH <i><tt>n</tt></i> <i><tt>m</tt></i>)</tt></td>
<td><tt>(LOADC <i><tt>n</tt></i> <i><tt>m</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOADV&amp;PUSH <i><tt>k</tt></i> <i><tt>m</tt></i>)</tt></td>
<td><tt>(LOADV <i><tt>k</tt></i> <i><tt>m</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(POP&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(POP) (STORE <i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(GETVALUE&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(GETVALUE <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(JSR&amp;PUSH <i><tt>label</tt></i>)</tt></td>
<td><tt>(JSR <i><tt>label</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(COPY-CLOSURE&amp;PUSH <i><tt>m</tt></i>
<i><tt>n</tt></i>)</tt></td>
<td><tt>(COPY-CLOSURE <i><tt>m</tt></i> <i><tt>n</tt></i>)
(PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALL&amp;PUSH <i><tt>k</tt></i> <i><tt>n</tt></i>)</tt></td>
<td><tt>(CALL <i><tt>k</tt></i> <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALL1&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(CALL1 <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALL2&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(CALL2 <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALLS1&amp;PUSH <i><tt>b</tt></i>)</tt></td>
<td><tt>(CALLS1 <i><tt>b</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALLS2&amp;PUSH <i><tt>b</tt></i>)</tt></td>
<td><tt>(CALLS2 <i><tt>b</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALLSR&amp;PUSH <i><tt>m</tt></i> <i><tt>n</tt></i>)</tt></td>
<td><tt>(CALLSR <i><tt>m</tt></i> <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALLC&amp;PUSH)</tt></td>
<td><tt>(CALLC) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CALLCKEY&amp;PUSH)</tt></td>
<td><tt>(CALLCKEY) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(FUNCALL&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(FUNCALL <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(APPLY&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(APPLY <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CAR&amp;PUSH)</tt></td>
<td><tt>(CAR) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CDR&amp;PUSH)</tt></td>
<td><tt>(CDR) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CONS&amp;PUSH)</tt></td>
<td><tt>(CONS) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LIST&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LIST <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LIST*&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LIST* <i><tt>n</tt></i>) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(NIL&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(NIL) (STORE <i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(T&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(T) (STORE <i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;STOREC <i><tt>k</tt></i> <i><tt>n</tt></i>
<i><tt>m</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>k</tt></i>) (STOREC <i><tt>n</tt></i>
<i><tt>m</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS1&amp;STORE <i><tt>b</tt></i> <i><tt>k</tt></i>)</tt></td>
<td><tt>(CALLS1 <i><tt>b</tt></i>) (STORE <i><tt>k</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS2&amp;STORE <i><tt>b</tt></i> <i><tt>k</tt></i>)</tt></td>
<td><tt>(CALLS2 <i><tt>b</tt></i>) (STORE <i><tt>k</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLSR&amp;STORE <i><tt>m</tt></i> <i><tt>n</tt></i>
<i><tt>k</tt></i>)</tt></td>
<td><tt>(CALLSR <i><tt>m</tt></i> <i><tt>n</tt></i>) (STORE
<i><tt>k</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;CDR&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CDR) (STORE <i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;CONS&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>+1) (CONS) (STORE
<i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;INC&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CALL1 #'1+) (STORE
<i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;DEC&amp;STORE <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CALL1 #'1-) (STORE
<i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;CAR&amp;STORE <i><tt>m</tt></i>
<i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>m</tt></i>) (CAR) (STORE <i><tt>n</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALL1&amp;JMPIF <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALL1 <i><tt>n</tt></i>) (JMPIF <i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALL1&amp;JMPIFNOT <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALL1 <i><tt>n</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALL2&amp;JMPIF <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALL2 <i><tt>n</tt></i>) (JMPIF <i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALL2&amp;JMPIFNOT <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALL2 <i><tt>n</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS1&amp;JMPIF <i><tt>b</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLS1 <i><tt>b</tt></i>) (JMPIF <i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS1&amp;JMPIFNOT <i><tt>b</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLS1 <i><tt>b</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS2&amp;JMPIF <i><tt>b</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLS2 <i><tt>b</tt></i>) (JMPIF <i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLS2&amp;JMPIFNOT <i><tt>b</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLS2 <i><tt>b</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLSR&amp;JMPIF <i><tt>m</tt></i> <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLSR <i><tt>m</tt></i> <i><tt>n</tt></i>) (JMPIF
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(CALLSR&amp;JMPIFNOT <i><tt>m</tt></i> <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(CALLSR <i><tt>m</tt></i> <i><tt>n</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;JMPIF <i><tt>n</tt></i> <i><tt>label</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (JMPIF <i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;JMPIFNOT <i><tt>n</tt></i>
<i><tt>label</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (JMPIFNOT
<i><tt>label</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;CAR&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CAR) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;CDR&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CDR) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;INC&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CALL1 #'1+) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(LOAD&amp;DEC&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(LOAD <i><tt>n</tt></i>) (CALL1 #'1-) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CONST&amp;SYMBOL-FUNCTION <i><tt>n</tt></i>)</tt></td>
<td><tt>(CONST <i><tt>n</tt></i>) (SYMBOL-FUNCTION)</tt></td>
</tr>

<tr>
<td><tt>(CONST&amp;SYMBOL-FUNCTION&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td><tt>(CONST <i><tt>n</tt></i>) (SYMBOL-FUNCTION) (PUSH)</tt></td>
</tr>

<tr>
<td><tt>(CONST&amp;SYMBOL-FUNCTION&amp;STORE <i><tt>n</tt></i>
<i><tt>k</tt></i>)</tt></td>
<td><tt>(CONST <i><tt>n</tt></i>) (SYMBOL-FUNCTION) (STORE
<i><tt>k</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(APPLY&amp;SKIP&amp;RET <i><tt>n</tt></i>
<i><tt>k</tt></i>)</tt></td>
<td><tt>(APPLY <i><tt>n</tt></i>) (SKIP&amp;RET
<i><tt>k</tt></i>)</tt></td>
</tr>

<tr>
<td><tt>(FUNCALL&amp;SKIP&amp;RETGF <i><tt>n</tt></i>
<i><tt>k</tt></i>)</tt></td>
<td><tt>(FUNCALL <i><tt>n</tt></i>) (SKIP&amp;RETGF
<i><tt>k</tt></i>)</tt></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section"><a id="instr-shortcut" name="instr-shortcut" />
<div class="titlepage">
<div>
<h3 class="title"><a id="instr-shortcut" name="instr-shortcut" />Shortcut
instructions</h3>
</div>
</div>

<p>There are special one-byte instructions (without explicit operands) for
the following frequent instructions:</p>

<div class="table">
<p><a id="d0e28156" name="d0e28156" /><b>Table 30.17. Shortcut
instructions</b></p>

<table summary="Shortcut instructions" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>mnemonic</th>
<th>operand range</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>(LOAD <i><tt>n</tt></i>)</tt></td>
<td>0 &le; <i><tt>n</tt></i> &lt; 15</td>
</tr>

<tr>
<td><tt>(LOAD&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td>0 &le; <i><tt>n</tt></i> &lt; 25</td>
</tr>

<tr>
<td><tt>(CONST <i><tt>n</tt></i>)</tt></td>
<td>0 &le; <i><tt>n</tt></i> &lt; 21</td>
</tr>

<tr>
<td><tt>(CONST&amp;PUSH <i><tt>n</tt></i>)</tt></td>
<td>0 &le; <i><tt>n</tt></i> &lt; 30</td>
</tr>

<tr>
<td><tt>(STORE <i><tt>n</tt></i>)</tt></td>
<td>0 &le; <i><tt>n</tt></i> &lt; 8</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>

<div class="part" id="extensions">
<div class="titlepage">
<div>
<h1 class="title"><a id="extensions" name="extensions" />Extensions</h1>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt>31. <a href="#p-indep">Extensions-1: Platform independent
Extensions</a></dt>

<dd>
<dl>
<dt><a href="#image">Extensions-1.1. Saving an Image</a></dt>

<dt><a href="#quit">Extensions-1.2. Quitting <b>CLISP</b></a></dt>

<dt><a href="#i18n">Extensions-1.3. Internationalization</a></dt>

<dd>
<dl>
<dt><a href="#ggettext">The GNU gettext</a></dt>

<dt><a href="#language">The Language</a></dt>
</dl>
</dd>

<dt><a href="#encoding">Extensions-1.4. Encodings</a></dt>

<dd>
<dl>
<dt><a href="#encodings-intro">Introduction</a></dt>

<dt><a href="#charset">Character Sets</a></dt>

<dt><a href="#newline">Line Terminators</a></dt>

<dt><a href="#make-encoding">Function <tt>EXT:MAKE-ENCODING</tt></a></dt>

<dt><a href="#string-byte">Converting between strings and byte
vectors</a></dt>
</dl>
</dd>

<dt><a href="#clos-stream">Extensions-1.5. Defining new kinds of
Streams</a></dt>

<dd>
<dl>
<dt><a href="#gray">Gray streams</a></dt>

<dt><a href="#gstream">Generic streams</a></dt>
</dl>
</dd>

<dt><a href="#weak">Extensions-1.6. Weak Pointers</a></dt>

<dt><a href="#final">Extensions-1.7. Finalization</a></dt>

<dt><a href="#prompt">Extensions-1.8. The Prompt</a></dt>

<dt><a href="#ansi">Extensions-1.9. Maximum ANSI CL compliance</a></dt>

<dt><a href="#macros3">Extensions-1.10. Additional Fancy Macros</a></dt>

<dt><a href="#customize">Extensions-1.11. Customizing <b>CLISP</b>
behavior.</a></dt>
</dl>
</dd>

<dt>32. <a href="#platform">Extensions-2: Platform specific
Extensions</a></dt>

<dd>
<dl>
<dt><a href="#screen">Extensions-2.1. Random Screen Access</a></dt>

<dt><a href="#modules">Extensions-2.2. External Modules</a></dt>

<dd>
<dl>
<dt><a href="#mod-set-example">Example</a></dt>

<dt><a href="#included-modules">Modules included in the
distribution.</a></dt>
</dl>
</dd>

<dt><a href="#dffi">Extensions-2.3. The Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#dffi-overview">Overview</a></dt>

<dt><a href="#dffi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#c-flavor">The choice of the <b>C</b> flavor.</a></dt>

<dt><a href="#dffi-variables">Foreign variables</a></dt>

<dt><a href="#dffi-places">Operations on foreign places</a></dt>

<dt><a href="#dffi-functions">Foreign functions</a></dt>

<dt><a href="#allocation">Argument and result passing conventions</a></dt>

<dt><a href="#dffi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#affi">Extensions-2.4. The Amiga Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#affi-design">Design issues</a></dt>

<dt><a href="#affi-overview">Overview</a></dt>

<dt><a href="#affi-libs">Foreign Libraries</a></dt>

<dt><a href="#affi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#affi-functions">Foreign functions</a></dt>

<dt><a href="#affi-memory-access">Memory access</a></dt>

<dt><a href="#affi-func-def">Function Definition Files</a></dt>

<dt><a href="#affi-hints">Hints</a></dt>

<dt><a href="#affi-caveats">Caveats</a></dt>

<dt><a href="#affi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#rexx">Extensions-2.5. ARexx</a></dt>

<dt><a href="#socket">Extensions-2.6. Socket Streams</a></dt>

<dt><a href="#syscalls">Extensions-2.7. System Calls</a></dt>

<dt><a href="#quickstart">Extensions-2.8. Quickstarting delivery with
<b>CLISP</b></a></dt>

<dt><a href="#app-dev">Extensions-2.9. Application delivery with
<b>CLISP</b></a></dt>

<dt><a href="#shell">Extensions-2.10. Shell, Pipes and Printing</a></dt>

<dd>
<dl>
<dt><a href="#exec">Shell</a></dt>

<dt><a href="#pipe">Pipes</a></dt>

<dt><a href="#hardcopy">Printing</a></dt>
</dl>
</dd>

<dt><a href="#dir-key">Extensions-2.11. Directory Access</a></dt>

<dt><a href="#other">Extensions-2.12. Other</a></dt>
</dl>
</dd>
</dl>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="p-indep" name="p-indep" />Chapter 31.
Extensions-1: Platform independent Extensions</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#image">Extensions-1.1. Saving an Image</a></dt>

<dt><a href="#quit">Extensions-1.2. Quitting <b>CLISP</b></a></dt>

<dt><a href="#i18n">Extensions-1.3. Internationalization</a></dt>

<dd>
<dl>
<dt><a href="#ggettext">The GNU gettext</a></dt>

<dt><a href="#language">The Language</a></dt>
</dl>
</dd>

<dt><a href="#encoding">Extensions-1.4. Encodings</a></dt>

<dd>
<dl>
<dt><a href="#encodings-intro">Introduction</a></dt>

<dt><a href="#charset">Character Sets</a></dt>

<dt><a href="#newline">Line Terminators</a></dt>

<dt><a href="#make-encoding">Function <tt>EXT:MAKE-ENCODING</tt></a></dt>

<dt><a href="#string-byte">Converting between strings and byte
vectors</a></dt>
</dl>
</dd>

<dt><a href="#clos-stream">Extensions-1.5. Defining new kinds of
Streams</a></dt>

<dd>
<dl>
<dt><a href="#gray">Gray streams</a></dt>

<dt><a href="#gstream">Generic streams</a></dt>
</dl>
</dd>

<dt><a href="#weak">Extensions-1.6. Weak Pointers</a></dt>

<dt><a href="#final">Extensions-1.7. Finalization</a></dt>

<dt><a href="#prompt">Extensions-1.8. The Prompt</a></dt>

<dt><a href="#ansi">Extensions-1.9. Maximum ANSI CL compliance</a></dt>

<dt><a href="#macros3">Extensions-1.10. Additional Fancy Macros</a></dt>

<dt><a href="#customize">Extensions-1.11. Customizing <b>CLISP</b>
behavior.</a></dt>
</dl>
</div>

<div class="section"><a id="image" name="image" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="image"
name="image" />Extensions-1.1. Saving an Image</h2>
</div>
</div>

<p>The function <tt>(</tt>ext:saveinitmem <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> (<i><tt>filename</tt></i>
"lispinit.mem") <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :quiet :init-function) saves the
running <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>'s
memory to the file <i><tt>filename</tt></i>; extension <tt>mem</tt> is
recommended. If the <tt>:quiet</tt> argument is not <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the startup banner and the good-bye
message will be suppressed. The <tt>:init-function</tt> argument specifies
a function that will be executed at startup of the saved image. When
<i><tt>filename</tt></i> does not have an extension, <tt>mem</tt>
extension is automatically used. The starting package of the new image is
the one in which you were when you invoked <tt>ext:saveinitmem</tt>.</p>
</div>

<div class="section"><a id="quit" name="quit" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="quit"
name="quit" />Extensions-1.2. Quitting <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a></h2>
</div>
</div>

<p>The functions <tt>(</tt>ext:exit [<i><tt>errorp</tt></i>]),
<tt>(</tt>ext:quit [<i><tt>errorp</tt></i>]) and <tt>(</tt>ext:bye
[<i><tt>errorp</tt></i>]) - all synonymous - terminate <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>. If
<i><tt>errorp</tt></i> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> aborts with error status, i.e., the
environment is informed that the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> session did not succeed.</p>
</div>

<div class="section"><a id="i18n" name="i18n" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="i18n"
name="i18n" />Extensions-1.3. Internationalization</h2>
</div>
</div>

<p>Internationalization means to prepare a program so that it can use
multiple national languages and national cultural conventions without
requiring further source code changes. Localization means providing the
data - mostly textual translations - necessary for an internationalized
program to work in a particular language and with particular cultural
conventions.</p>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is
internationalized, and is localized for the languages English, German,
French, Spanish and Dutch. <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> also supports internationalized Lisp
programs, through <a href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a>.</p>

<div class="section"><a id="ggettext" name="ggettext" />
<div class="titlepage">
<div>
<h3 class="title"><a id="ggettext" name="ggettext" />The <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a></h3>
</div>
</div>

<p><a href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a> is a set of functions, included in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> or the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> library, which permit looking up translations
of strings through message catalogs. It is also a set of tools which makes
the translation maintenance easy for the translator and the program
maintainer.</p>

<p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a> functions are available in <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> in the <a
href="#i18n"
title="Extensions-1.3. Internationalization">&ldquo;I18N&rdquo;</a>
package, which is <a href="#re-export"
title="Function EXT:RE-EXPORT"><tt>EXT:RE-EXPORT</tt></a>ed from the <a
href="#ext-pac">&ldquo;EXT&rdquo;</a> package.</p>

<div class="variablelist">
<dl>
<dt><a id="gettext" name="gettext" /><span class="term"><tt>(<a
href="#gettext"><tt>I18N:GETTEXT</tt></a> <i><tt>MSGID</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a> <a href="#category"
title="Category"><i><tt>CATEGORY</tt></i></a>)</tt></span></dt>

<dd>returns the translation of the message <i><tt>MSGID</tt></i>, in the
given <a href="#domain" title="Domain"><i><tt>DOMAIN</tt></i></a>,
depending on the given <a href="#category"
title="Category"><i><tt>CATEGORY</tt></i></a>. <i><tt>MSGID</tt></i>
should be an ASCII string, and is normally the English message.</dd>

<dt><a id="ngettext" name="ngettext" /><span class="term"><tt>(<a
href="#ngettext"><tt>I18N:NGETTEXT</tt></a> <i><tt>MSGID</tt></i>
<i><tt>msgid_plural</tt></i> <i><tt>n</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a> <a href="#category"
title="Category"><i><tt>CATEGORY</tt></i></a>)</tt></span></dt>

<dd>returns the plural form of the translation for of
<i><tt>MSGID</tt></i> and <i><tt>n</tt></i> in the given <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a>, depending on the given <a
href="#category" title="Category"><i><tt>CATEGORY</tt></i></a>.
<i><tt>MSGID</tt></i> and <i><tt>msgid_plural</tt></i> should be ASCII
strings, and are normally the English singular and English plural variant
of the message, respectively.</dd>
</dl>
</div>

<div class="section"><a id="domain" name="domain" />
<div class="titlepage">
<div>
<h4 class="title"><a id="domain" name="domain" />Domain</h4>
</div>
</div>

<p>The <a href="#domain" title="Domain"><i><tt>DOMAIN</tt></i></a> is a
string identifier denoting the program that is requesting the translation.
The pathname of the message catalog depends on the <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a>: usually it is located at
<tt>TEXTDOMAINDIR/l/LC_MESSAGES/domain.mo</tt>, where <i><tt>l</tt></i> is
the ISO 639 code of the language. The notion of <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a> allows several Lisp programs
running in the same image to request translations independently of each
other.</p>

<p><a id="textdomain" name="textdomain" /><tt>(<a
href="#textdomain"><tt>I18N:TEXTDOMAIN</tt></a>)</tt> is a place that
returns the default <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a>, used when no <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a> argument is passed to the <a
href="#gettext"><tt>I18N:GETTEXT</tt></a> and <a
href="#ngettext"><tt>I18N:NGETTEXT</tt></a> functions. It is <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>able. <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="#textdomain"><tt>I18N:TEXTDOMAIN</tt></a>)</tt> is usually used
during the startup phase of a program. Note that the default <a
href="#domain" title="Domain"><i><tt>DOMAIN</tt></i></a> is not saved in a
<a href="#image" title="Extensions-1.1. Saving an Image">memory image</a>.
The use of <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="#textdomain"><tt>I18N:TEXTDOMAIN</tt></a>)</tt> is recommended only
for programs that are so simple that they will never need more than one <a
href="#domain" title="Domain"><i><tt>DOMAIN</tt></i></a>.</p>

<p><a id="textdomaindir" name="textdomaindir" /><tt>(<a
href="#textdomaindir"><tt>I18N:TEXTDOMAINDIR</tt></a> <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a>)</tt> is a place that returns
the base directory, called <tt>TEXTDOMAINDIR</tt> above, where the message
catalogs for the given <a href="#domain"
title="Domain"><i><tt>DOMAIN</tt></i></a> are assumed to be installed. It
is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>able. <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="#textdomaindir"><tt>I18N:TEXTDOMAINDIR</tt></a>)</tt> is usually
used during the startup phase of a program, and should be used because
only the program knows where its message catalogs are installed. Note that
the <tt>TEXTDOMAINDIR</tt>s are not saved in a <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>.</p>
</div>

<div class="section"><a id="category" name="category" />
<div class="titlepage">
<div>
<h4 class="title"><a id="category" name="category" />Category</h4>
</div>
</div>

<p>The <a href="#category" title="Category"><i><tt>CATEGORY</tt></i></a>
argument of the <a href="#gettext"><tt>I18N:GETTEXT</tt></a> and <a
href="#ngettext"><tt>I18N:NGETTEXT</tt></a> functions denotes which locale
facet the result should depend on. The default value is
<tt>:LC_MESSAGES</tt>. Other possible values are <tt>:LC_CTYPE</tt>,
<tt>:LC_TIME</tt>, <tt>:LC_COLLATE</tt>, <tt>:LC_MONETARY</tt>. The use of
these values is useful for users who have a character/time/collation/money
handling set differently from the usual message handling. Note that when a
<a href="#category" title="Category"><i><tt>CATEGORY</tt></i></a> argument
is used, the message catalog location depends on the <a href="#category"
title="Category"><i><tt>CATEGORY</tt></i></a>: it will be expected at
<tt>TEXTDOMAINDIR/ll/category/domain.mo</tt>.</p>
</div>

<div class="section"><a id="i18n-example" name="i18n-example" />
<div class="titlepage">
<div>
<h4 class="title"><a id="i18n-example" name="i18n-example" />Example</h4>
</div>
</div>

<p>A non-internationalized program simulating a restaurant dialogue might
look as follows.</p>

<div class="example">
<p><a id="d0e28670" name="d0e28670" /><b>Example 31.1. prog.lisp</b></p>

<pre class="programlisting">
(setq n (parse-integer (first *args*)))

(format t "~A~%" "'Your command, please?', asked the waiter.")

(format t "~@?~%"
          (if (= n 1) "a piece of cake" "~D pieces of cake")
          n)
</pre>
</div>

<p>After being internationalized, all strings are wrapped in <a
href="#gettext"><tt>I18N:GETTEXT</tt></a> calls, and <a
href="#ngettext"><tt>I18N:NGETTEXT</tt></a> is used for plurals. Also, <a
href="#textdomaindir"><tt>I18N:TEXTDOMAINDIR</tt></a> is assigned a value;
in our case, for simplicity, the current directory.</p>

<div class="example">
<p><a id="d0e28689" name="d0e28689" /><b>Example 31.2. prog.lisp</b></p>

<pre class="programlisting">
(setf (textdomain) "prog")
(setf (textdomaindir "prog") "./")

(setq n (parse-integer (first *args*)))

(format t "~A~%"
          (gettext "'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n)
          n)
</pre>
</div>

<p>For ease of reading, it is customary to define an abbreviation for the
<a href="#gettext"><tt>I18N:GETTEXT</tt></a> function. An underscore is
customary.</p>

<div class="example">
<p><a id="d0e28700" name="d0e28700" /><b>Example 31.3. prog.lisp</b></p>

<pre class="programlisting">
(setf (textdomaindir "prog") "./")
(defun _ (msgid) (gettext msgid "prog"))

(setq n (parse-integer (first *args*)))

(format t "~A~%"
          (_"'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n "prog")
          n)
</pre>
</div>

<p>Now the program's maintainer creates a message catalog template through
the command</p>

<pre class="screen">
bash$ xgettext -o prog.pot prog.lisp
</pre>

Note: xgettext version 0.11 or higher is required here.
<br />
<br />
<p>The message catalog template looks roughly like this.</p>

<div class="example">
<p><a id="d0e28712" name="d0e28712" /><b>Example 31.4. prog.pot</b></p>

<pre class="programlisting">
msgid "'Your command, please?', asked the waiter."
msgstr ""

msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] ""
msgstr[1] ""
</pre>
</div>

<p>Then a French translator creates a French message catalog</p>

<div class="example">
<p><a id="d0e28719" name="d0e28719" /><b>Example 31.5. prog.fr.po</b></p>

<pre class="programlisting">
msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO-8859-1\n"
"Plural-Forms: nplurals=2; plural=(n &gt; 1);\n"

msgid "'Your command, please?', asked the waiter."
msgstr "&laquo;Votre commande, s'il vous plait&raquo;, dit le gar&ccedil;on."

# Les gateaux allemands sont les meilleurs du monde.
msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] "un morceau de gateau"
msgstr[1] "%d morceaux de gateau"
</pre>
</div>

<p>and sends it to the program's maintainer.</p>

<p>The program's maintainer compiles the catalog as follows:</p>

<pre class="screen">
bash$ mkdir -p ./fr/LC_MESSAGES
bash$ msgfmt -o ./fr/LC_MESSAGES/prog.mo prog.fr.po
</pre>


<br />
<br />
<p>When a user in a french locale then runs the program</p>

<pre class="screen">
bash$ clisp prog.lisp 2
</pre>

she will get the output 

<pre class="screen">
    &laquo;Votre commande, s'il vous plait&raquo;, dit le gar&ccedil;on.
    2 morceaux de gateau
</pre>


<br />
<br />
</div>
</div>

<div class="section"><a id="language" name="language" />
<div class="titlepage">
<div>
<h3 class="title"><a id="language" name="language" />The Language</h3>
</div>
</div>

<p>Warning: The facilities described in this section will work only for
the languages for which <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> itself is already localized.</p>

<p>The language <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> uses to communicate with the user can be
either <tt>ENGLISH</tt> or <tt>DEUTSCH</tt> (i.e., German) or
<tt>FRANCAIS</tt> (i.e., French) or <tt>ESPA&Ntilde;OL</tt> (i.e.,
Spanish) or <tt>NEDERLANDS</tt> (i.e. Dutch). More languages can be
defined through the macro <span
class="strong"><i><tt>i18n:deflanguage</tt></i></span>:
<tt>(</tt>i18n:deflanguage <i><tt>lang</tt></i>). For such an additional
language to take effect, you must install the corresponding message
catalog, or translate the messages yourself, using <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/software/gettext/gettext.html"
target="_top">gettext</a> and <a
href="http://www.gnu.org/software/emacs/emacs.html"
target="_top">Emacs</a> (or <a href="http://www.xemacs.org"
target="_top">XEmacs</a>) po-mode.</p>

<p>The macros <tt>ENGLISH</tt>, <tt>DEUTSCH</tt>, <tt>FRANCAIS</tt>
produce strings that depends on the language: <tt>(ENGLISH
<i><tt>english-string</tt></i> DEUTSCH <i><tt>deutsch-string</tt></i>
FRANCAIS <i><tt>francais-string</tt></i>)</tt> - and all permutations of
this - evaluates all of <i><tt>english-string</tt></i>,
<i><tt>deutsch-string</tt></i>, <i><tt>francais-string</tt></i> in no
particular order and returns the evaluation result corresponding to the
user language, be it among these three or not.</p>

<p>This works only for strings. For arbitrary language-dependent Lisp
objects, you define one through the macro <span
class="strong"><i><tt>i18n:definternational</tt></i></span>:
<tt>(</tt>i18n:definternational <i><tt>symbol</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> (<i><tt>default-language</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>)) and add language-dependent values through
the macro <span class="strong"><i><tt>i18n:deflocalized</tt></i></span>:
<tt>(</tt>i18n:deflocalized <i><tt>symbol</tt></i>
<i><tt>language</tt></i> <i><tt>value-form</tt></i>)</p>

<p>(One such form for each language. Languages without an assigned value
will be treated like the default-language.) You can then access the
localized value by calling <span
class="strong"><i><tt>i18n:localized</tt></i></span>:
<tt>(</tt>i18n:localized <i><tt>symbol</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>language</tt></i>)</p>
</div>
</div>

<div class="section"><a id="encoding" name="encoding" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="encoding"
name="encoding" />Extensions-1.4. Encodings</h2>
</div>
</div>

<div class="section"><a id="encodings-intro" name="encodings-intro" />
<div class="titlepage">
<div>
<h3 class="title"><a id="encodings-intro"
name="encodings-intro" />Introduction</h3>
</div>
</div>

<p>An <span class="emphasis"><i>encoding</i></span> describes the
correspondence between <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>s and raw bytes during input/output
via <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>s with <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</p>

<p>An <a href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a> is an object
composed of the following facets:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e28924" name="d0e28924" /><span class="term"><a
href="#charset" title="Character Sets">character set</a></span></dt>

<dd>This denotes both the set of characters that can be represented and
passed through the I/O channel, and the way these characters translate
into raw bytes. In this context, for example, "UTF-8" and "UCS-4" are
considered different, although they can represent the same set of
characters.</dd>

<dt><a id="d0e28931" name="d0e28931" /><span class="term"><a
href="#newline" title="Line Terminators">line terminator</a>
mode</span></dt>

<dd>This denotes the way newline characters are represented.</dd>
</dl>
</div>


<br />
<br />
</div>

<div class="section"><a id="charset" name="charset" />
<div class="titlepage">
<div>
<h3 class="title"><a id="charset" name="charset" />Character Sets</h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e28944" name="d0e28944" /><span class="term">Platform
dependent: Only in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> built <span
class="strong"><i>without</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>Only one character set is understood: the platform's native (8-bit)
character set. See <a href="#characters" title="Chapter 13. Characters
 [CLHS-13]">Chapter 13</a>.</dd>

<dt><a id="charset-symbols" name="charset-symbols" /><span
class="term">Platform dependent: Only in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> built <span
class="strong"><i>with</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>
<p><a id="d0e28979" name="d0e28979" />The following character sets are
supported, as values of the corresponding (constant) symbol in the <a
href="#encoding"
title="Extensions-1.4. Encodings">&ldquo;CHARSET&rdquo;</a> package:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e28987" name="d0e28987" /><tt>UCS-2</tt> =
<tt>UNICODE-16</tt> = <tt>UNICODE-16-BIG-ENDIAN</tt>, the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. Every character is
represented as two bytes.</li>

<li><a id="d0e29002"
name="d0e29002" /><tt>UNICODE-16-LITTLE-ENDIAN</tt></li>

<li><a id="d0e29007" name="d0e29007" /><tt>UCS-4</tt> =
<tt>UNICODE-32</tt> = <tt>UNICODE-32-BIG-ENDIAN</tt>, the 32-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. Every character is
represented as four bytes. Note that <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> understands only those characters which are
already contained in the 16-bit <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> character
set.</li>

<li><a id="d0e29030"
name="d0e29030" /><tt>UNICODE-32-LITTLE-ENDIAN</tt></li>

<li><a id="d0e29035" name="d0e29035" /><tt>UTF-8</tt>, the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. Every character is
represented as one to three bytes. ASCII characters represent themselves
and need one byte per character. Most Latin/Greek/Cyrillic/Hebrew
characters need two bytes per character, and the remaining characters need
three bytes per character. This is therefore, in general, the most
space-efficient encoding of all of Unicode-16.</li>

<li><a id="d0e29045" name="d0e29045" /><tt>UTF-16</tt>, the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. Every character is
represented as two bytes.</li>

<li><a id="d0e29054" name="d0e29054" /><tt>UTF-7</tt>, the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. This is a stateful
7-bit encoding. Not all ASCII characters represent themselves.</li>

<li><a id="d0e29064" name="d0e29064" /><tt>JAVA</tt>, the 16-bit <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character set. ASCII characters
represent themselves and need one byte per character. All other characters
are represented by <tt>\u<i><tt>nnnn</tt></i></tt> sequences
(<i><tt>nnnn</tt></i> a hexadecimal number) and need 6 bytes per
character. While this encoding is very comfortable for editing Unicode
files using only ASCII aware tools and editors, it cannot faithfully
represent all <a href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> text. Only text which does not
contain <tt>\u</tt> (backslash followed by lowercase Latin u) can be
faithfully represented by this encoding.</li>

<li><a id="d0e29088" name="d0e29088" /><tt>ASCII</tt>, the well-known
US-centric 7-bit character set (American Standard Code for Information
Interchange).</li>

<li><a id="d0e29093" name="d0e29093" /><tt>ISO-8859-1</tt>, an extension
of the ASCII character set, suitable for the Afrikaans, Albanian, Basque,
Breton, Catalan, Cornish, Danish, Dutch, English, Faeroese, Finnish,
French, Frisian, Galician, German, Greenlandic, Icelandic, Irish, Italian,
Latin, Luxemburgish, Norwegian, Portuguese, Raeto-Romanic, Scottish,
Spanish, and Swedish languages.</li>

<li><a id="d0e29098" name="d0e29098" /><tt>ISO-8859-2</tt>, an extension
of the ASCII character set, suitable for the Croatian, Czech, German,
Hungarian, Polish, Slovak, Slovenian, and Sorbian languages.</li>

<li><a id="d0e29103" name="d0e29103" /><tt>ISO-8859-3</tt>, an extension
of the ASCII character set, suitable for the Esperanto and Maltese
languages.</li>

<li><a id="d0e29108" name="d0e29108" /><tt>ISO-8859-4</tt>, an extension
of the ASCII character set, suitable for the Estonian, Latvian, Lithuanian
and Sami (Lappish) languages.</li>

<li><a id="d0e29113" name="d0e29113" /><tt>ISO-8859-5</tt>, an extension
of the ASCII character set, suitable for the Bulgarian, Byelorussian,
Macedonian, Russian, Serbian, and Ukrainian languages.</li>

<li><a id="d0e29118" name="d0e29118" /><tt>ISO-8859-6</tt>, suitable for
the Arabic language.</li>

<li><a id="d0e29123" name="d0e29123" /><tt>ISO-8859-7</tt>, an extension
of the ASCII character set, suitable for the Greek language.</li>

<li><a id="d0e29128" name="d0e29128" /><tt>ISO-8859-8</tt>, an extension
of the ASCII character set, suitable for the Hebrew language (without
punctuation).</li>

<li><a id="d0e29133" name="d0e29133" /><tt>ISO-8859-9</tt>, an extension
of the ASCII character set, suitable for the Turkish language.</li>

<li><a id="d0e29138" name="d0e29138" /><tt>ISO-8859-10</tt>, an extension
of the ASCII character set, suitable for the Estonian, Icelandic, Inuit
(Greenlandic), Latvian, Lithuanian, and Sami (Lappish) languages.</li>

<li><a id="d0e29143" name="d0e29143" /><tt>ISO-8859-13</tt>, an extension
of the ASCII character set, suitable for the Estonian, Latvian,
Lithuanian, Polish and Sami (Lappish) languages.</li>

<li><a id="d0e29148" name="d0e29148" /><tt>ISO-8859-14</tt>, an extension
of the ASCII character set, suitable for Irish Gaelic, Manx Gaelic,
Scottish Gaelic, and Welsh languages.</li>

<li><a id="d0e29153" name="d0e29153" /><tt>ISO-8859-15</tt>, an extension
of the ASCII character set, suitable for the ISO-8859-1 languages, with
improvements for French, Finnish and the Euro.</li>

<li><a id="d0e29158" name="d0e29158" /><tt>ISO-8859-16</tt> an extension
of the ASCII character set, suitable for the Rumanian language.</li>

<li><a id="d0e29163" name="d0e29163" /><tt>KOI8-R</tt>, an extension of
the ASCII character set, a popular character set for the Russian
language.</li>

<li><a id="d0e29168" name="d0e29168" /><tt>KOI8-U</tt>, an extension of
the ASCII character set, a popular character set for the Ukrainian
language.</li>

<li><a id="d0e29174" name="d0e29174" /><tt>KOI8-RU</tt>, an extension of
the ASCII character set, suitable for Russian (this is the standard
Russian encoding on the Internet)</li>

<li><a id="d0e29180" name="d0e29180" /><tt>JIS_X0201</tt>, a character set
for the Japanese language.</li>

<li><a id="d0e29185" name="d0e29185" /><tt>MAC-ARABIC</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29190" name="d0e29190" /><tt>MAC-CENTRAL-EUROPE</tt>, a
platform specific extension of the ASCII character set.</li>

<li><a id="d0e29195" name="d0e29195" /><tt>MAC-CROATIAN</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29200" name="d0e29200" /><tt>MAC-CYRILLIC</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29205" name="d0e29205" /><tt>MAC-DINGBAT</tt>, a platform
specific character set.</li>

<li><a id="d0e29210" name="d0e29210" /><tt>MAC-GREEK</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29215" name="d0e29215" /><tt>MAC-HEBREW</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29220" name="d0e29220" /><tt>MAC-ICELAND</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29225" name="d0e29225" /><tt>MAC-ROMAN</tt> =
<tt>MACINTOSH</tt>, a platform specific extension of the ASCII character
set.</li>

<li><a id="d0e29233" name="d0e29233" /><tt>MAC-ROMANIA</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29238" name="d0e29238" /><tt>MAC-SYMBOL</tt>, a platform
specific character set.</li>

<li><a id="d0e29243" name="d0e29243" /><tt>MAC-THAI</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29248" name="d0e29248" /><tt>MAC-TURKISH</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29253" name="d0e29253" /><tt>MAC-UKRAINE</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29258" name="d0e29258" /><tt>CP437</tt>, a DOS oldie, a
platform specific extension of the ASCII character set.</li>

<li><a id="d0e29263" name="d0e29263" /><tt>CP437-IBM</tt>, an IBM variant
of <tt>CP437</tt>.</li>

<li><a id="d0e29271" name="d0e29271" /><tt>CP737</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Greek language.</li>

<li><a id="d0e29276" name="d0e29276" /><tt>CP775</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for some Baltic languages.</li>

<li><a id="d0e29281" name="d0e29281" /><tt>CP850</tt>, a DOS oldie, a
platform specific extension of the ASCII character set.</li>

<li><a id="d0e29286" name="d0e29286" /><tt>CP852</tt>, a DOS oldie, a
platform specific extension of the ASCII character set.</li>

<li><a id="d0e29291" name="d0e29291" /><tt>CP852-IBM</tt>, an IBM variant
of <tt>CP852</tt>.</li>

<li><a id="d0e29299" name="d0e29299" /><tt>CP855</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Russian language.</li>

<li><a id="d0e29304" name="d0e29304" /><tt>CP857</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Turkish language.</li>

<li><a id="d0e29309" name="d0e29309" /><tt>CP860</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Portuguese language.</li>

<li><a id="d0e29314" name="d0e29314" /><tt>CP860-IBM</tt>, an IBM variant
of <tt>CP860</tt>.</li>

<li><a id="d0e29322" name="d0e29322" /><tt>CP861</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Icelandic language.</li>

<li><a id="d0e29327" name="d0e29327" /><tt>CP861-IBM</tt>, an IBM variant
of <tt>CP861</tt>.</li>

<li><a id="d0e29335" name="d0e29335" /><tt>CP862</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Hebrew language.</li>

<li><a id="d0e29340" name="d0e29340" /><tt>CP862-IBM</tt>, an IBM variant
of <tt>CP862</tt>.</li>

<li><a id="d0e29348" name="d0e29348" /><tt>CP863</tt>, a DOS oldie, a
platform specific extension of the ASCII character set.</li>

<li><a id="d0e29353" name="d0e29353" /><tt>CP863-IBM</tt>, an IBM variant
of <tt>CP863</tt>.</li>

<li><a id="d0e29361" name="d0e29361" /><tt>CP864</tt>, a DOS oldie, meant
to be suitable for the Arabic language.</li>

<li><a id="d0e29366" name="d0e29366" /><tt>CP864-IBM</tt>, an IBM variant
of <tt>CP864</tt>.</li>

<li><a id="d0e29374" name="d0e29374" /><tt>CP865</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for some Nordic languages.</li>

<li><a id="d0e29379" name="d0e29379" /><tt>CP865-IBM</tt>, an IBM variant
of <tt>CP865</tt>.</li>

<li><a id="d0e29387" name="d0e29387" /><tt>CP866</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Russian language.</li>

<li><a id="d0e29392" name="d0e29392" /><tt>CP869</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Greek language.</li>

<li><a id="d0e29397" name="d0e29397" /><tt>CP869-IBM</tt>, an IBM variant
of <tt>CP869</tt>.</li>

<li><a id="d0e29405" name="d0e29405" /><tt>CP874</tt>, a DOS oldie, a
platform specific extension of the ASCII character set, meant to be
suitable for the Thai language.</li>

<li><a id="d0e29410" name="d0e29410" /><tt>CP874-IBM</tt>, an IBM variant
of <tt>CP874</tt>.</li>

<li><a id="d0e29418" name="d0e29418" /><tt>WINDOWS-1250</tt> =
<tt>CP1250</tt>, a platform specific extension of the ASCII character set,
heavily incompatible with ISO-8859-2.</li>

<li><a id="d0e29426" name="d0e29426" /><tt>WINDOWS-1251</tt> =
<tt>CP1251</tt>, a platform specific extension of the ASCII character set,
heavily incompatible with ISO-8859-5, meant to be suitable for the Russian
language.</li>

<li><a id="d0e29434" name="d0e29434" /><tt>WINDOWS-1252</tt> =
<tt>CP1252</tt>, a platform specific extension of the ISO-8859-1 character
set.</li>

<li><a id="d0e29442" name="d0e29442" /><tt>WINDOWS-1253</tt> =
<tt>CP1253</tt>, a platform specific extension of the ASCII character set,
gratuitously incompatible with ISO-8859-7, meant to be suitable for the
Greek language.</li>

<li><a id="d0e29450" name="d0e29450" /><tt>WINDOWS-1254</tt> =
<tt>CP1254</tt>, a platform specific extension of the ISO-8859-9 character
set.</li>

<li><a id="d0e29458" name="d0e29458" /><tt>WINDOWS-1255</tt> =
<tt>CP1255</tt>, a platform specific extension of the ASCII character set,
gratuitously incompatible with ISO-8859-8, suitable for the Hebrew
language.</li>

<li><a id="d0e29466" name="d0e29466" /><tt>WINDOWS-1256</tt> =
<tt>CP1256</tt>, a platform specific extension of the ASCII character set,
meant to be suitable for the Arabic language.</li>

<li><a id="d0e29474" name="d0e29474" /><tt>WINDOWS-1257</tt> =
<tt>CP1257</tt>, a platform specific extension of the ASCII character
set.</li>

<li><a id="d0e29482" name="d0e29482" /><tt>WINDOWS-1258</tt> =
<tt>CP1258</tt>, a platform specific extension of the ASCII character
set.</li>

<li><a id="d0e29490" name="d0e29490" /><tt>HP-ROMAN8</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29495" name="d0e29495" /><tt>NEXTSTEP</tt>, a platform
specific extension of the ASCII character set.</li>

<li><a id="d0e29501" name="d0e29501" /><tt>EUC-JP</tt>, a multibyte
character set for the Japanese language.</li>

<li><a id="d0e29506" name="d0e29506" /><tt>SHIFT-JIS</tt>, a multibyte
character set for the Japanese language.</li>

<li><a id="d0e29511" name="d0e29511" /><tt>CP932</tt>, a Microsoft variant
of <tt>SHIFT-JIS</tt>.</li>

<li><a id="d0e29519" name="d0e29519" /><tt>ISO-2022-JP</tt>, a stateful
7-bit multibyte character set for the Japanese language.</li>

<li><a id="d0e29524" name="d0e29524" /><tt>ISO-2022-JP-2</tt>, a stateful
7-bit multibyte character set for the Japanese language.</li>

<li><a id="d0e29529" name="d0e29529" /><tt>ISO-2022-JP-1</tt>, a stateful
7-bit multibyte character set for the Japanese language.</li>

<li><a id="d0e29534" name="d0e29534" /><tt>EUC-CN</tt>, a multibyte
character set for simplified Chinese.</li>

<li><a id="d0e29539" name="d0e29539" /><tt>HZ</tt>, a stateful 7-bit
multibyte character set for simplified Chinese.</li>

<li><a id="d0e29544" name="d0e29544" /><tt>GBK</tt>, a multibyte character
set for Chinese,</li>

<li><a id="d0e29549" name="d0e29549" /><tt>CP936</tt>, a Microsoft variant
of <tt>GBK</tt>.</li>

<li><a id="d0e29557" name="d0e29557" /><tt>GB18030</tt>, a multibyte
character set for Chinese,</li>

<li><a id="d0e29562" name="d0e29562" /><tt>EUC-TW</tt>, a multibyte
character set for traditional Chinese.</li>

<li><a id="d0e29567" name="d0e29567" /><tt>BIG5</tt>, a multibyte
character set for traditional Chinese.</li>

<li><a id="d0e29572" name="d0e29572" /><tt>CP950</tt>, a Microsoft variant
of <tt>BIG5</tt>.</li>

<li><a id="d0e29580" name="d0e29580" /><tt>BIG5HKSCS</tt>, a multibyte
character set for traditional Chinese.</li>

<li><a id="d0e29585" name="d0e29585" /><tt>ISO-2022-CN</tt>, a stateful
7-bit multibyte character set for Chinese.</li>

<li><a id="d0e29590" name="d0e29590" /><tt>ISO-2022-CN-EXT</tt>, a
stateful 7-bit multibyte character set for Chinese.</li>

<li><a id="d0e29595" name="d0e29595" /><tt>EUC-KR</tt>, a multibyte
character set for Korean.</li>

<li><a id="d0e29600" name="d0e29600" /><tt>CP949</tt>, a Microsoft variant
of <tt>EUC-KR</tt>.</li>

<li><a id="d0e29608" name="d0e29608" /><tt>ISO-2022-KR</tt>, a stateful
7-bit multibyte character set for Korean.</li>

<li><a id="d0e29613" name="d0e29613" /><tt>ARMSCII-8</tt>, an extension of
the ASCII character set, suitable for Armenian.</li>

<li><a id="d0e29618" name="d0e29618" /><tt>GEORGIAN-ACADEMY</tt>, an
extension of the ASCII character set, suitable for Georgian.</li>

<li><a id="d0e29623" name="d0e29623" /><tt>GEORGIAN-PS</tt>, an extension
of the ASCII character set, suitable for Georgian.</li>

<li><a id="d0e29628" name="d0e29628" /><tt>TIS-620</tt>, an extension of
the ASCII character set, suitable for Thai.</li>

<li><a id="d0e29633" name="d0e29633" /><tt>MULELAO-1</tt>, an extension of
the ASCII character set, suitable for Laotian.</li>

<li><a id="d0e29638" name="d0e29638" /><tt>CP1133</tt>, an extension of
the ASCII character set, suitable for Laotian.</li>

<li><a id="d0e29643" name="d0e29643" /><tt>VISCII</tt>, an extension of
the ASCII character set, suitable for Vietnamese.</li>

<li><a id="d0e29648" name="d0e29648" /><tt>TCVN</tt>, an extension of the
ASCII character set, suitable for Vietnamese.</li>
</ul>
</div>

<div class="variablelist">
<dl>
<dt><a id="iconv" name="iconv" /><span class="term">[<a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> comes with it
own implementation of <a href="#iconv"><tt>iconv()</tt></a>, so the
following is more or less obsolete now.] (Platform dependent: Only on <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a> systems having the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> library function <a
href="#iconv"><tt>iconv()</tt></a>).</span></dt>

<dd>
<p>The character sets provided by the library function <a
href="#iconv"><tt>iconv()</tt></a> can also be used as encodings. To
create such an encoding, call <a href="#make-encoding"
title="Function EXT:MAKE-ENCODING"><tt>EXT:MAKE-ENCODING</tt></a> with the
character set name (a string) as <tt>:charset</tt> argument.</p>

<p>These encodings are not assigned to global variables, since there is no
portable way to get the list of all character sets supported by <a
href="#iconv"><tt>iconv()</tt></a>.</p>

<p>On Linux and <a href="http://www.gnu.org" target="_top">GNU</a>
systems, you get this list by calling the <span
class="emphasis"><i>program</i></span> iconv: <b>iconv --list</b>. <a
href="http://www.gnu.org" target="_top">GNU</a> glibc-2.1 supports in
particular, among others:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e29716" name="d0e29716" /><tt>EUC-JP</tt> and
<tt>SHIFT-JIS</tt>, for the Japanese language,</li>

<li><a id="d0e29724" name="d0e29724" /><tt>EUC-CN</tt>, <tt>EUC-TW</tt>,
<tt>BIG5</tt> and <tt>GB</tt>, for the Chinese language,</li>

<li><a id="d0e29738" name="d0e29738" /><tt>EUC-KR</tt> and
<tt>ISO-2022-KR</tt>, for the Korean language.</li>
</ul>
</div>

<p>HP-UX systems support in particular, among others:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e29749" name="d0e29749" /><tt>eucJP</tt> and <tt>sjis</tt>,
for the Japanese language,</li>

<li><a id="d0e29757" name="d0e29757" /><tt>eucTW</tt>, <tt>big5</tt> and
<tt>chinese-gb</tt>, for the Chinese language,</li>

<li><a id="d0e29768" name="d0e29768" /><tt>eucKR</tt>, for the Korean
language.</li>
</ul>
</div>

<p>AIX 4.2 systems support in particular, among others:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e29776" name="d0e29776" /><tt>IBM-eucJP</tt>, for the
Japanese language,</li>

<li><a id="d0e29781" name="d0e29781" /><tt>IBM-eucTW</tt>, for the Chinese
language,</li>

<li><a id="d0e29786" name="d0e29786" /><tt>IBM-eucKR</tt>, for the Korean
language.</li>
</ul>
</div>

<p>On Solaris systems, you can forget about <a
href="#iconv"><tt>iconv()</tt></a>-based encodings, because all the
possible encodings are already <a href="#charset-symbols">built-in</a>.
(Solaris knows about Japanese, Chinese and Korean encodings, but can
convert them only to/from UTF-8, not to/from UCS-2, which is <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>'s internal
encoding.)</p>

<p>On IRIX systems, you can forget about <a
href="#iconv"><tt>iconv()</tt></a>-based encodings as well, because all
the interesting possible encodings are already <a
href="#charset-symbols">built-in</a>.</p>

<p>On OSF/1 systems, <a href="#iconv"><tt>iconv()</tt></a>-based encodings
are not usable at all.</p>

<p>When an encoding is available as a <a
href="#charset-symbols">built-in</a> and through <a
href="#iconv"><tt>iconv()</tt></a>, the <a
href="#charset-symbols">built-in</a> is preferred, because it is more
efficient and available across platforms.</p>
</dd>
</dl>
</div>


<br />
<br />
</dd>
</dl>
</div>
</div>

<div class="section"><a id="newline" name="newline" />
<div class="titlepage">
<div>
<h3 class="title"><a id="newline" name="newline" />Line Terminators</h3>
</div>
</div>

<div class="table">
<p><a id="d0e29838" name="d0e29838" /><b>Table 31.1. The line terminator
mode can be one of the following three keywords</b></p>

<table summary="The line terminator mode can be one of the
 following three keywords" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th>keyword</th>
<th>newline representation</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>:UNIX</tt></td>
<td>Newline is represented by the ASCII LF character (U000A).</td>
</tr>

<tr>
<td><tt>:MAC</tt></td>
<td>Newline is represented by the ASCII CR character (U000D).</td>
</tr>

<tr>
<td><tt>:DOS</tt></td>
<td>Newline is represented by the ASCII CR followed by the ASCII LF.</td>
</tr>
</tbody>
</table>
</div>

<p>Windows programs typically use the <tt>:DOS</tt> line terminator,
sometimes they also accept <tt>:UNIX</tt> line terminators or produce
<tt>:MAC</tt> line terminators.</p>

<p>The line terminator mode is relevant only for output (writing to a <a
href="#open" title="Function OPEN">file</a>/<a href="#pipe"
title="Pipes">pipe</a>/<a href="#socket"
title="Extensions-2.6. Socket Streams">socket</a>). During input, all
three kinds of line terminators are recognized. If you do not want this,
i.e., if you really want to distinguish LF, CR and CR/LF, you have to
resort to binary input (function <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
target="_top"><tt>READ-BYTE</tt></a>).</p>

<p>See also <a href="#clhs-newline"
title="Treatment of Newline during Input and Output
 [CLHS-13.1.8]">13.1.8 Treatment of Newline during Input and
Output</a>.</p>
</div>

<div class="section"><a id="make-encoding" name="make-encoding" />
<div class="titlepage">
<div>
<h3 class="title"><a id="make-encoding" name="make-encoding" />Function <a
href="#make-encoding"
title="Function EXT:MAKE-ENCODING"><tt>EXT:MAKE-ENCODING</tt></a></h3>
</div>
</div>

<p>The function <tt>(<a href="#make-encoding"
title="Function EXT:MAKE-ENCODING"><tt>EXT:MAKE-ENCODING</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :charset :line-terminator
:input-error-action :output-error-action)</tt> returns an <a
href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>. The
<tt>:charset</tt> argument may be an encoding, a string, or
<tt>:DEFAULT</tt>. The possible values for the <a href="#newline"
title="Line Terminators">line terminator</a> argument are the keywords
<tt>:UNIX</tt>, <tt>:MAC</tt>, <tt>:DOS</tt>.</p>

<p>The <tt>:input-error-action</tt> specifies what happens when an invalid
byte sequence is encountered while converting bytes to characters. Its
value can be <tt>:ERROR</tt>, <tt>:IGNORE</tt> or a character to be used
instead. The <a href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a> character #\uFFFD is typically
used to indicate an error in the input sequence.</p>

<p>The <tt>:output-error-action</tt> specifies what happens when an
invalid character is encountered while converting characters to bytes. Its
value can be <tt>:ERROR</tt>, <tt>:IGNORE</tt>, a byte to be used instead,
or a character to be used instead. The <a href="http://www.unicode.org/"
target="_top"><span class="strong"><i>UNICODE</i></span></a> character
#\uFFFD can be used here only if it is encodable in the character set.</p>

<p>Encodings are types. As such, they represent the set of characters
encodable in the character set. In this context, the way characters are
translated into raw bytes is ignored, and the line terminator mode is
ignored as well. <a
href="http://www.lisp.org/HyperSpec/Body/fun_typep.html"
target="_top"><tt>TYPEP</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html"
target="_top"><tt>SUBTYPEP</tt></a> can be used on encodings.</p>

<p>Besides every <a href="#open" title="Function OPEN">file</a>/<a
href="#pipe" title="Pipes">pipe</a>/<a href="#socket"
title="Extensions-2.6. Socket Streams">socket</a> stream containing an
encoding, the following <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> places contain global <a
href="#encoding"
title="Extensions-1.4. Encodings"><tt>EXT:ENCODING</tt></a>s:</p>

<p><a id="def-file-enc" name="def-file-enc" /><b><a
href="#def-file-enc"><tt>CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a>.&nbsp;</b>
The <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> place <a
href="#def-file-enc"><tt>CUSTOM:*DEFAULT-FILE-ENCODING*</tt></a> is the
encoding used for new <a href="#open" title="Function OPEN">file</a>/<a
href="#pipe" title="Pipes">pipe</a>/<a href="#socket"
title="Extensions-2.6. Socket Streams">socket</a> streams, when no <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> argument was specified.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e30064" name="d0e30064" /><span class="term">Platform
dependent: Only in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> built <span
class="strong"><i>with</i></span> compile-time flag <a
href="http://www.unicode.org/" target="_top"><span
class="strong"><i>UNICODE</i></span></a>.</span></dt>

<dd>
<p>The following are <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> places.</p>

<div class="variablelist">
<dl>
<dt><a id="path-enc" name="path-enc" /><span class="term"><a
href="#path-enc"><tt>CUSTOM:*PATHNAME-ENCODING*</tt></a></span></dt>

<dd>is the encoding used for pathnames in the file system. Normally, this
is a 1:1 encoding. Its <a href="#newline" title="Line Terminators">line
terminator</a> mode is ignored.</dd>

<dt><a id="term-enc" name="term-enc" /><span class="term"><a
href="#term-enc"><tt>CUSTOM:*TERMINAL-ENCODING*</tt></a></span></dt>

<dd>is the encoding used for communication with the terminal, in
particular by <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a>.</dd>

<dt><a id="misc-enc" name="misc-enc" /><span class="term"><a
href="#misc-enc"><tt>CUSTOM:*MISC-ENCODING*</tt></a></span></dt>

<dd>is the encoding used for access to environment variables, command line
options, and the like. Its <a href="#newline"
title="Line Terminators">line terminator</a> mode is ignored.</dd>

<dt><a id="foreign-enc" name="foreign-enc" /><span class="term"><a
href="#foreign-enc"><tt>CUSTOM:*FOREIGN-ENCODING*</tt></a></span></dt>

<dd>is the encoding for characters and strings passed through the <a
href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
(some plaforms only). Its value must be a 1:1 encoding, i.e., an encoding
in which every character is represented by one byte.</dd>
</dl>
</div>
</dd>
</dl>
</div>

<p>The default encoding objects are initialized as described in the <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> <a
href="clisp.html#opt-enc" target="_top">manual page</a></p>
</div>

<div class="section"><a id="string-byte" name="string-byte" />
<div class="titlepage">
<div>
<h3 class="title"><a id="string-byte" name="string-byte" />Converting
between strings and byte vectors</h3>
</div>
</div>

<p>Encodings can also be used to convert directly between strings and
their corresponding byte vector representation according to that
encoding.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e30149" name="d0e30149" /><span
class="term"><tt>(</tt>EXT:CONVERT-STRING-FROM-BYTES</span>
<i><tt>byte-vector</tt></i> <i><tt>encoding</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</dt>

<dd>converts the subsequence of <i><tt>byte-vector</tt></i> from
<i><tt>start</tt></i> to <i><tt>end</tt></i> to a string, according to the
given <i><tt>encoding</tt></i>, and returns the resulting string.</dd>

<dt><a id="d0e30187" name="d0e30187" /><span
class="term"><tt>(</tt>EXT:CONVERT-STRING-TO-BYTES</span>
<i><tt>string</tt></i> <i><tt>encoding</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:START</tt> <tt>:END</tt>)</dt>

<dd>converts the subsequence of <i><tt>string</tt></i> from
<i><tt>start</tt></i> to <i><tt>end</tt></i> to a <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt>, according to the given
<i><tt>encoding</tt></i>, and returns the resulting byte vector.</dd>
</dl>
</div>
</div>
</div>

<div class="section"><a id="clos-stream" name="clos-stream" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="clos-stream"
name="clos-stream" />Extensions-1.5. Defining new kinds of Streams</h2>
</div>
</div>

<p>Two mechanisms are supported for creating new streams with user-defined
behavior:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e30242" name="d0e30242" />You can create a new subclass of <a
href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a> and define methods for
the elementary stream operations on it. These generic functions all have a
name starting with the prefix "stream-".</li>

<li><a id="d0e30249" name="d0e30249" />You can create a new subclass of
<tt>gstream:generic-stream-controller</tt> and define methods for the
elementary stream operations on it. These generic functions all have a
name starting with the prefix "generic-stream-". The stream itself is a
different object, created using the function
<tt>gstream:make-generic-stream</tt>.</li>
</ul>
</div>


<br />
<br />
<p>The <tt>fundamental-stream</tt> API is based on the <a
href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail"
 target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> proposal by
David N. Gray and is supported by most <a href="http://www.lisp.org"
target="_top"><b>Common Lisp</b></a> implementations currently in use. The
<tt>gstream:generic-stream-controller</tt> API is <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> specific and
is now obsolete.</p>

<div class="section"><a id="gray" name="gray" />
<div class="titlepage">
<div>
<h3 class="title"><a id="gray" name="gray" />Gray streams</h3>
</div>
</div>

<p>This interface permits the definition of new classes of streams, and
programming their behavior by defining methods for the elementary stream
operations. It is based on the proposal <a
href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail"
 target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> of David N.
Gray to X3J13.</p>

<p>All symbols defined by this interface, starting with the prefix
"fundamental-" or "stream-", are exported from the package <a href="#gray"
title="Gray streams">&ldquo;GRAY&rdquo;</a> and re-exported from <a
href="#ext-pac">&ldquo;EXT&rdquo;</a>.</p>

<div class="variablelist">
<p><b>Defined classes</b></p>

<dl>
<dt><a id="fu-st" name="fu-st" /><span class="term"><a
href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a></span></dt>

<dd>This is a superclass of all user-defined streams. It is a subclass of
<a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a> and of <a
href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
target="_top"><tt>STANDARD-OBJECT</tt></a>. Its metaclass is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
target="_top"><tt>STANDARD-CLASS</tt></a>.</dd>

<dt><a id="fu-st-in" name="fu-st-in" /><span class="term"><a
href="#fu-st-in"><tt>GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a></span></dt>

<dd>This is a superclass of all user-defined input streams. It is a
subclass of <a href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a>. The
built-in function <a
href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
target="_top"><tt>INPUT-STREAM-P</tt></a> returns true on instances of
this class. This means that when you define a new stream class capable of
doing input, you have to make it a subclass of <a
href="#fu-st-in"><tt>GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd>

<dt><a id="fu-st-out" name="fu-st-out" /><span class="term"><a
href="#fu-st-out"><tt>GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a></span></dt>

<dd>This is a superclass of all user-defined output streams. It is a
subclass of <a href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a>. The
built-in function <a
href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
target="_top"><tt>OUTPUT-STREAM-P</tt></a> returns true on instances of
this class. This means that when you define a new stream class capable of
doing output, you have to make it a subclass of <a
href="#fu-st-out"><tt>GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd>

<dt><a id="fu-st-char" name="fu-st-char" /><span class="term"><a
href="#fu-st-char"><tt>GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a></span></dt>

<dd>This is a superclass of all user-defined streams whose <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>. It is a subclass of <a
href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a>. It defines a method on
<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> that returns <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</dd>

<dt><a id="fu-st-bin" name="fu-st-bin" /><span class="term"><a
href="#fu-st-bin"><tt>GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a></span></dt>

<dd>This is a superclass of all user-defined streams whose <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is a subtype of <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>. It is a subclass of <a
href="#fu-st"><tt>GRAY:FUNDAMENTAL-STREAM</tt></a>. When you define a
subclass of <a
href="#fu-st-bin"><tt>GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a>, you have to
provide a method on <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>.</dd>

<dt><a id="d0e30414" name="d0e30414" /><span
class="term"><tt>GRAY:FUNDAMENTAL-CHARACTER-INPUT-STREAM</tt></span></dt>

<dd>This is a convenience class inheriting from both <a
href="#fu-st-char"><tt>GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a
href="#fu-st-in"><tt>GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd>

<dt><a id="d0e30429" name="d0e30429" /><span
class="term"><tt>GRAY:FUNDAMENTAL-CHARACTER-OUTPUT-STREAM</tt></span></dt>

<dd>This is a convenience class inheriting from both <a
href="#fu-st-char"><tt>GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> and <a
href="#fu-st-out"><tt>GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd>

<dt><a id="d0e30444" name="d0e30444" /><span
class="term"><tt>GRAY:FUNDAMENTAL-BINARY-INPUT-STREAM</tt></span></dt>

<dd>This is a convenience class inheriting from both <a
href="#fu-st-bin"><tt>GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a
href="#fu-st-in"><tt>GRAY:FUNDAMENTAL-INPUT-STREAM</tt></a>.</dd>

<dt><a id="d0e30459" name="d0e30459" /><span
class="term"><tt>GRAY:FUNDAMENTAL-BINARY-OUTPUT-STREAM</tt></span></dt>

<dd>This is a convenience class inheriting from both <a
href="#fu-st-bin"><tt>GRAY:FUNDAMENTAL-BINARY-STREAM</tt></a> and <a
href="#fu-st-out"><tt>GRAY:FUNDAMENTAL-OUTPUT-STREAM</tt></a>.</dd>
</dl>
</div>

<div class="variablelist">
<p><b>general generic functions defined on streams</b></p>

<dl>
<dt><a id="d0e30477" name="d0e30477" /><span class="term"><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Returns the stream's element type, normally a subtype of <a
href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>.</p>

<p>The method for <a
href="#fu-st-char"><tt>GRAY:FUNDAMENTAL-CHARACTER-STREAM</tt></a> returns
<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a>.</p>
</dd>

<dt><a id="d0e30509" name="d0e30509" /><span class="term"><tt>((<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a>)
<i><tt>new-element-type</tt></i> <i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Changes the stream's element type.</p>

<p>The default method signals an error.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a href="#stream-eltype"
title="Function STREAM-ELEMENT-TYPE">setting <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a></a>)</p>
</dd>

<dt><a id="d0e30544" name="d0e30544" /><span class="term"><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_close.html"
target="_top"><tt>CLOSE</tt></a> <i><tt>stream</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:ABORT</tt>)</tt></span></dt>

<dd>
<p>Closes the stream and flushes any associated buffers.</p>

<p>When you define a primary method on this function, do not forget to <a
href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
target="_top"><tt>CALL-NEXT-METHOD</tt></a>.</p>
</dd>

<dt><a id="d0e30571" name="d0e30571" /><span class="term"><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
target="_top"><tt>OPEN-STREAM-P</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Returns true before the stream has been closed, and <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> after the stream has been closed.</p>

<p>You do not need to add methods to this function.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<p><b>generic functions for character input</b></p>

<dl>
<dt><a id="st-rc" name="st-rc" /><span class="term"><tt>(<a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>If a character was pushed back using <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>, returns and consumes
it. Otherwise returns and consumes the next character from the stream.
Returns <tt>:EOF</tt> if the <tt>end-of-stream</tt> is reached.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="st-uc" name="st-uc" /><span class="term"><tt>(<a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a> <i><tt>stream</tt></i>
<i><tt>char</tt></i>)</tt></span></dt>

<dd>
<p>Pushes <i><tt>char</tt></i>, which must be the last character read from
the <i><tt>stream</tt></i>, back onto the front of the
<i><tt>stream</tt></i>.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="st-rcnh" name="st-rcnh" /><span class="term"><tt>(<a
href="#st-rcnh"><tt>GRAY:STREAM-READ-CHAR-NO-HANG</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Returns a character or <tt>:EOF</tt>, like <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>, if that would return
immediately. If <a href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>'s
value is not available immediately, returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> instead of waiting.</p>

<p>The default method simply calls <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>; this is sufficient for
streams whose <a href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> method
never blocks.</p>
</dd>

<dt><a id="d0e30687" name="d0e30687" /><span
class="term"><tt>(</tt>GRAY:STREAM-PEEK-CHAR</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>If a character was pushed back using <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>, returns it. Otherwise
returns the next character from the stream, avoiding any side effects <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> would do. Returns
<tt>:EOF</tt> if the <tt>end-of-stream</tt> is reached.</p>

<p>The default method calls <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> and <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>; this is sufficient for
streams whose <a href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> method
has no side-effects.</p>
</dd>

<dt><a id="d0e30728" name="d0e30728" /><span
class="term"><tt>(</tt>GRAY:STREAM-LISTEN</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>If a character was pushed back using <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>, returns it. Otherwise
returns the next character from the stream, if already available. If no
character is available immediately, or if <tt>end-of-stream</tt> is
reached, returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>

<p>The default method calls <a
href="#st-rcnh"><tt>GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>; this is sufficient for
streams whose <a href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> method
has no side-effects.</p>
</dd>

<dt><a id="d0e30766" name="d0e30766" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-CHAR-WILL-HANG-P</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> will return immediately.
Otherwise it returns true.</p>

<p>The default method calls <a
href="#st-rcnh"><tt>GRAY:STREAM-READ-CHAR-NO-HANG</tt></a> and <a
href="#st-uc"><tt>GRAY:STREAM-UNREAD-CHAR</tt></a>; this is sufficient for
streams whose <a href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a> method
has no side-effects.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#rcwhp"><tt>EXT:READ-CHAR-WILL-HANG-P</tt></a>).</p>
</dd>

<dt><a id="d0e30811" name="d0e30811" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-CHAR-SEQUENCE</span>
<i><tt>stream</tt></i> <i><tt>sequence</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>start</tt></i>
[<i><tt>end</tt></i>]])</dt>

<dd>
<p>Fills the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> with characters consecutively read from
<i><tt>stream</tt></i>. Returns the index of the first element of
<i><tt>sequence</tt></i> that was not updated (= <i><tt>end</tt></i> or
&lt; <i><tt>end</tt></i> if the stream reached its end).</p>

<p><i><tt>sequence</tt></i> is an array of characters, i.e. a string.
<i><tt>start</tt></i> is a nonnegative integer and default to 0.
<i><tt>end</tt></i> is a nonnegative integer or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and defaults to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, which stands for <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>sequence</tt></i>)</tt>.</p>

<p>The default method repeatedly calls <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>; this is always
sufficient if speed does not matter.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#rd-ch-seq"><tt>EXT:READ-CHAR-SEQUENCE</tt></a>)</p>
</dd>

<dt><a id="d0e30902" name="d0e30902" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-LINE</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Reads a line of characters, and return two values: the line (a string,
without the terminating #\Newline character), and a boolean value which is
true if the line was terminated by <tt>end-of-stream</tt> instead of
#\Newline.</p>

<p>The default method repeatedly calls <a
href="#st-rc"><tt>GRAY:STREAM-READ-CHAR</tt></a>; this is always
sufficient.</p>
</dd>

<dt><a id="d0e30930" name="d0e30930" /><span
class="term"><tt>(</tt>gray:stream-clear-input</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Clears all pending interactive input from the stream, and returns true
if some pending input was removed.</p>

<p>The default method does nothing and returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>; this is sufficient for non-interactive
streams.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<p><b>generic functions for character output</b></p>

<dl>
<dt><a id="st-wc" name="st-wc" /><span class="term"><tt>(<a
href="#st-wc"><tt>GRAY:STREAM-WRITE-CHAR</tt></a> <i><tt>stream</tt></i>
<i><tt>char</tt></i>)</tt></span></dt>

<dd>
<p>Writes <i><tt>char</tt></i>.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="st-lc" name="st-lc" /><span class="term"><tt>(<a
href="#st-lc"><tt>GRAY:STREAM-LINE-COLUMN</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Returns the column number where the next character would be written (0
stands for the first column), or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if that is not meaningful for this
stream.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="d0e30994" name="d0e30994" /><span
class="term"><tt>(</tt>GRAY:STREAM-START-LINE-P</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Returns true if the next character would be written at the start of a
new line.</p>

<p>The default method calls <a
href="#st-lc"><tt>GRAY:STREAM-LINE-COLUMN</tt></a> and compares its result
with 0; this is sufficient for streams whose <a
href="#st-lc"><tt>GRAY:STREAM-LINE-COLUMN</tt></a> never returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</p>
</dd>

<dt><a id="d0e31021" name="d0e31021" /><span
class="term"><tt>(</tt>GRAY:STREAM-WRITE-CHAR-SEQUENCE</span>
<i><tt>stream</tt></i> <i><tt>sequence</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>start</tt></i>
[<i><tt>end</tt></i>]])</dt>

<dd>
<p>Outputs the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> to <i><tt>stream</tt></i>.</p>

<p><i><tt>sequence</tt></i> is an array of characters, i.e. a string.
<i><tt>start</tt></i> is a nonnegative integer and default to 0.
<i><tt>end</tt></i> is a nonnegative integer or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and defaults to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, which stands for <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>sequence</tt></i>)</tt>.</p>

<p>The default method repeatedly calls <a
href="#st-wc"><tt>GRAY:STREAM-WRITE-CHAR</tt></a>; this is always
sufficient if speed does not matter.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#wr-ch-seq"><tt>EXT:WRITE-CHAR-SEQUENCE</tt></a>)</p>
</dd>

<dt><a id="d0e31103" name="d0e31103" /><span
class="term"><tt>(</tt>GRAY:STREAM-WRITE-STRING</span>
<i><tt>stream</tt></i> <i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>start</tt></i>
[<i><tt>end</tt></i>]])</dt>

<dd>
<p>Outputs the subsequence of <i><tt>string</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> to <i><tt>stream</tt></i>. Returns
<i><tt>string</tt></i>.</p>

<p><i><tt>string</tt></i> is a string. <i><tt>start</tt></i> is a
nonnegative integer and default to 0. <i><tt>end</tt></i> is a nonnegative
integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and defaults to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, which stands for <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>string</tt></i>)</tt>.</p>

<p>The default method calls <tt>GRAY:STREAM-WRITE-CHAR-SEQUENCE</tt>; this
is always sufficient.</p>
</dd>

<dt><a id="d0e31177" name="d0e31177" /><span
class="term"><tt>(</tt>GRAY:STREAM-TERPRI</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Outputs a #\Newline character.</p>

<p>The default method calls <a
href="#st-wc"><tt>GRAY:STREAM-WRITE-CHAR</tt></a>; this is always
sufficient.</p>
</dd>

<dt><a id="d0e31199" name="d0e31199" /><span
class="term"><tt>(</tt>GRAY:STREAM-FRESH-LINE</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Possibly outputs a #\Newline character, so as to ensure that the next
character would be written at the start of a new line. Returns true if it
did output a #\Newline character.</p>

<p>The default method calls <tt>GRAY:STREAM-START-LINE-P</tt> and then
<tt>GRAY:STREAM-TERPRI</tt> if necessary; this is always sufficient.</p>
</dd>

<dt><a id="d0e31226" name="d0e31226" /><span
class="term"><tt>(</tt>GRAY:STREAM-FINISH-OUTPUT</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Ensures that any buffered output has reached its destination, and then
returns.</p>

<p>The default method does nothing.</p>
</dd>

<dt><a id="d0e31241" name="d0e31241" /><span
class="term"><tt>(</tt>GRAY:STREAM-FORCE-OUTPUT</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Brings any buffered output on its way towards its destination, and
returns without waiting until it has reached its destination.</p>

<p>The default method does nothing.</p>
</dd>

<dt><a id="d0e31256" name="d0e31256" /><span
class="term"><tt>(</tt>GRAY:STREAM-CLEAR-OUTPUT</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>Attempts to discard any buffered output which has not yet reached its
destination.</p>

<p>The default method does nothing.</p>
</dd>

<dt><a id="d0e31271" name="d0e31271" /><span
class="term"><tt>(</tt>GRAY:STREAM-ADVANCE-TO-COLUMN</span>
<i><tt>stream</tt></i> <i><tt>column</tt></i>)</dt>

<dd>
<p>Ensures that the next character will be written at
<i><tt>column</tt></i> at least.</p>

<p>The default method outputs an appropriate amount of space characters;
this is sufficient for non-proportional output.</p>
</dd>
</dl>
</div>

<div class="variablelist">
<p><b>generic functions for binary input</b></p>

<dl>
<dt><a id="st-rb" name="st-rb" /><span class="term"><tt>(<a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>Returns and consumes the next integer from the stream. Returns
<tt>:EOF</tt> if the <tt>end-of-stream</tt> is reached.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="st-rbla" name="st-rbla" /><span class="term"><tt>(<a
href="#st-rbla"><tt>GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a>
<i><tt>stream</tt></i>)</tt></span></dt>

<dd>
<p>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a> would return immediately
with an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> result. Returns <tt>:EOF</tt> if the
<tt>end-of-stream</tt> is already known to be reached. If <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a>'s value is not available
immediately, returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> instead of waiting.</p>

<p>You must define a method for this function.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#rbla"><tt>EXT:READ-BYTE-LOOKAHEAD</tt></a>).</p>
</dd>

<dt><a id="d0e31390" name="d0e31390" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-BYTE-WILL-HANG-P</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a> will return immediately.
Otherwise it returns true.</p>

<p>The default method calls <a
href="#st-rbla"><tt>GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a>; this is
always sufficient.</p>
</dd>

<dt><a id="d0e31438" name="d0e31438" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-BYTE-NO-HANG</span>
<i><tt>stream</tt></i>)</dt>

<dd>
<p>To be called only if <i><tt>stream</tt></i>'s <a
href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
target="_top"><tt>STREAM-ELEMENT-TYPE</tt></a> is <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt>. Returns an <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> or <tt>:EOF</tt>, like <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a>, if that would return
immediately. If <a href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a>'s
value is not available immediately, returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> instead of waiting.</p>

<p>The default method calls <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a> if <a
href="#st-rbla"><tt>GRAY:STREAM-READ-BYTE-LOOKAHEAD</tt></a> returns true;
this is always sufficient.</p>
</dd>

<dt><a id="d0e31501" name="d0e31501" /><span
class="term"><tt>(</tt>GRAY:STREAM-READ-BYTE-SEQUENCE</span>
<i><tt>stream</tt></i> <i><tt>sequence</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>start</tt></i>
[<i><tt>end</tt></i>]])</dt>

<dd>
<p>Fills the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> with integers consecutively read from
<i><tt>stream</tt></i>. Returns the index of the first element of
<i><tt>sequence</tt></i> that was not updated (= <i><tt>end</tt></i> or
&lt; <i><tt>end</tt></i> if the stream reached its end).</p>

<p><i><tt>sequence</tt></i> is an array of integers. <i><tt>start</tt></i>
is a nonnegative integer and default to 0. <i><tt>end</tt></i> is a
nonnegative integer or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and defaults to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, which stands for <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>sequence</tt></i>)</tt>.</p>

<p>The default method repeatedly calls <a
href="#st-rb"><tt>GRAY:STREAM-READ-BYTE</tt></a>; this is always
sufficient if speed does not matter.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#rd-by-seq"><tt>EXT:READ-BYTE-SEQUENCE</tt></a>).</p>
</dd>
</dl>
</div>

<div class="variablelist">
<p><b>generic functions for binary output</b></p>

<dl>
<dt><a id="d0e31595" name="d0e31595" /><span
class="term"><tt>(</tt>GRAY:STREAM-WRITE-BYTE</span>
<i><tt>stream</tt></i> <i><tt>integer</tt></i>)</dt>

<dd>
<p>Writes <i><tt>integer</tt></i>.</p>

<p>You must define a method for this function.</p>
</dd>

<dt><a id="d0e31616" name="d0e31616" /><span
class="term"><tt>(</tt>GRAY:STREAM-WRITE-BYTE-SEQUENCE</span>
<i><tt>stream</tt></i> <i><tt>sequence</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>start</tt></i>
[<i><tt>end</tt></i>]])</dt>

<dd>
<p>Outputs the subsequence of <i><tt>sequence</tt></i> specified by
<tt>:START</tt> and <tt>:END</tt> to <i><tt>stream</tt></i></p>

<p><i><tt>sequence</tt></i> is an array of integers. <i><tt>start</tt></i>
is a nonnegative integer and default to 0. <i><tt>end</tt></i> is a
nonnegative integer or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and defaults to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, which stands for <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>sequence</tt></i>)</tt>.</p>

<p>The default method repeatedly calls <tt>GRAY:STREAM-WRITE-BYTE</tt>;
this is always sufficient if speed does not matter.</p>

<p>This function is a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> extension (see <a
href="#wr-by-seq"><tt>EXT:WRITE-BYTE-SEQUENCE</tt></a>).</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="gstream" name="gstream" />
<div class="titlepage">
<div>
<h3 class="title"><a id="gstream" name="gstream" />Generic streams</h3>
</div>
</div>

<p>This interface is <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> specific and now obsolete. Please use the
<a href="#gray" title="Gray streams">Gray streams</a> interface
instead.</p>

<p>Generic streams are user programmable streams. The programmer
interface:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e31712" name="d0e31712" /><span
class="term"><tt>(</tt>gstream:make-generic-stream</span>
<i><tt>controller</tt></i>)</dt>

<dd>returns a generic stream.</dd>

<dt><a id="d0e31725" name="d0e31725" /><span
class="term"><tt>(</tt>gstream:generic-stream-controller</span>
<i><tt>stream</tt></i>)</dt>

<dd>returns a private object to which generic stream methods dispatch. The
typical usage is to retrieve the object originally provided by the user in
<tt>gstream:make-generic-stream</tt>.</dd>

<dt><a id="d0e31741" name="d0e31741" /><span
class="term"><tt>(</tt>gstream:generic-stream-p</span>
<i><tt>stream</tt></i>)</dt>

<dd>determines whether a stream is a generic stream, returning <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if it is, <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> otherwise.</dd>
</dl>
</div>

<p>In order to specify the behavior of a generic stream, the user must
define <b>CLOS</b> methods on the following <b>CLOS</b> generic functions.
The function <tt>gstream:generic-stream-<i><tt>xyz</tt></i></tt>
corresponds to the <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> function <tt><i><tt>xyz</tt></i></tt>. They all take a
controller and some number of arguments.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e31784" name="d0e31784" /><span
class="term"><tt>(</tt>gstream:generic-stream-read-char</span>
<i><tt>controller</tt></i>)</dt>

<dd>Returns and consumes the next character, <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> at end of file. Takes one argument, the
controller object.</dd>

<dt><a id="d0e31801" name="d0e31801" /><span
class="term"><tt>(</tt>gstream:generic-stream-peek-char</span>
<i><tt>controller</tt></i>)</dt>

<dd>Returns the next character, <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> at end of file. A second value indicates
whether the side effects associated with consuming the character were
executed: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> means that a full <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a> was done, <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> means that no side effects were done. Takes
one argument, the controller object.</dd>

<dt><a id="d0e31830" name="d0e31830" /><span
class="term"><tt>(</tt>gstream:generic-stream-read-byte</span>
<i><tt>controller</tt></i>)</dt>

<dd>Returns and consumes the next integer, <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> at end of file. Takes one argument, the
controller object.</dd>

<dt><a id="d0e31847" name="d0e31847" /><span
class="term"><tt>(</tt>gstream:generic-stream-read-char-will-hang-p</span>
<i><tt>controller</tt></i>)</dt>

<dd>This generic function is used to query the stream's input status. It
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if
<tt>gstream:generic-stream-read-char</tt> and
<tt>gstream:generic-stream-peek-char</tt> will certainly return
immediately. Otherwise it returns true.</dd>

<dt><a id="d0e31870" name="d0e31870" /><span
class="term"><tt>(</tt>gstream:generic-stream-write-char</span>
<i><tt>controller</tt></i> <i><tt>char</tt></i>)</dt>

<dd>The first argument is the controller object. The second argument is
the character to be written.</dd>

<dt><a id="d0e31886" name="d0e31886" /><span
class="term"><tt>(</tt>gstream:generic-stream-write-byte</span>
<i><tt>controller</tt></i> <i><tt>by</tt></i>)</dt>

<dd>The first argument is the controller object. The second argument is
the integer to be written.</dd>

<dt><a id="d0e31902" name="d0e31902" /><span
class="term"><tt>(</tt>gstream:generic-stream-write-string</span>
<i><tt>controller</tt></i> <i><tt>string</tt></i> <i><tt>start</tt></i>
<i><tt>length</tt></i>)</dt>

<dd>Writes the subsequence of <i><tt>string</tt></i> starting from
<i><tt>start</tt></i> of length <i><tt>length</tt></i>. The first argument
is the controller object.</dd>

<dt><a id="d0e31933" name="d0e31933" /><span
class="term"><tt>(</tt>gstream:generic-stream-clear-input</span>
<i><tt>controller</tt></i>) <tt>(</tt>gstream:generic-stream-clear-output
<i><tt>controller</tt></i>) <tt>(</tt>gstream:generic-stream-finish-output
<i><tt>controller</tt></i>) <tt>(</tt>gstream:generic-stream-force-output
<i><tt>controller</tt></i>) <tt>(</tt>gstream:generic-stream-close
<i><tt>controller</tt></i>)</dt>

<dd>Take one argument, the controller object.</dd>
</dl>
</div>
</div>
</div>

<div class="section"><a id="weak" name="weak" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="weak"
name="weak" />Extensions-1.6. Weak Pointers</h2>
</div>
</div>

<p>A weak pointer is an object holding a reference to a given object,
without keeping the latter from being <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e31992" name="d0e31992" /><span
class="term"><tt>(</tt>EXT:MAKE-WEAK-POINTER</span>
<i><tt>value</tt></i>)</dt>

<dd>returns a fresh weak pointer referring to <i><tt>value</tt></i>.</dd>

<dt><a id="d0e32008" name="d0e32008" /><span
class="term"><tt>(</tt>EXT:WEAK-POINTER-P</span>
<i><tt>object</tt></i>)</dt>

<dd>returns true if the <i><tt>object</tt></i> is of type <a href="#weak"
title="Extensions-1.6. Weak Pointers"><tt>EXT:WEAK-POINTER</tt></a>.</dd>

<dt><a id="d0e32028" name="d0e32028" /><span
class="term"><tt>(</tt>EXT:WEAK-POINTER-VALUE</span>
<i><tt>weak-pointer</tt></i>)</dt>

<dd>returns two values: The original value and <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, if the value has not yet been <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>
</dl>
</div>
</div>

<div class="section"><a id="final" name="final" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="final"
name="final" />Extensions-1.7. Finalization</h2>
</div>
</div>

<p>Calling <tt>(<a href="#final"
title="Extensions-1.7. Finalization"><tt>EXT:FINALIZE</tt></a>
<i><tt>object</tt></i> <i><tt>function</tt></i>)</tt> has the effect that
when the specified object is being <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a> <i><tt>function</tt></i>
<i><tt>object</tt></i>)</tt> will be executed.</p>

<p>Calling <tt>(<a href="#final"
title="Extensions-1.7. Finalization"><tt>EXT:FINALIZE</tt></a>
<i><tt>object</tt></i> <i><tt>function</tt></i>
<i><tt>guardian</tt></i>)</tt> has a similar effect, but only as long as
the "guardian" has not been <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed:
When <i><tt>object</tt></i> is being <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
target="_top"><tt>FUNCALL</tt></a> <i><tt>function</tt></i>
<i><tt>object</tt></i> <i><tt>guardian</tt></i>)</tt> will be executed. If
the guardian is <a href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed
before <i><tt>object</tt></i> is, nothing happens.</p>

<p>Note: The time when &ldquo;the <i><tt>object</tt></i> is being <a
href="#gc"
title="Chapter 29. Overview of CLISP's Garbage Collection">garbage-collect</a>ed&rdquo;
is not defined deterministically. (Actually, it might possibly never
occur.) It denotes a moment at which no references to
<i><tt>object</tt></i> exist from other Lisp objects. When the
<i><tt>function</tt></i> is called, <i><tt>object</tt></i> (and possibly
<i><tt>guardian</tt></i>) enter the "arena of live Lisp objects"
again.</p>

<p>No finalization request will be executed more than once.</p>
</div>

<div class="section"><a id="prompt" name="prompt" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="prompt"
name="prompt" />Extensions-1.8. The Prompt</h2>
</div>
</div>

<p>The variable <span
class="strong"><i><tt>custom:*prompt*</tt></i></span> controls the
appearance of the prompt. When its value is a function, it is called and
its value is printed with <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINC</tt></a>. Otherwise, the value itself is printed
with <a
href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
target="_top"><tt>PRINC</tt></a>. The default value of
<tt>custom:*prompt*</tt> prints <tt>"package[nn]&gt;&nbsp;"</tt> where
<i><tt>package</tt></i> is the shortest (nick)name of the current package
<a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
target="_top"><tt>*PACKAGE*</tt></a> if it is the same as it was in the
beginning or if it does not contain symbol <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> (it is assumed that in the latter case you
would want to keep in mind that your current package is something weird);
and <i><tt>nn</tt></i> is the ordinal number of the current prompt
(hopefully, it will remain finite). To help you in constructing your own
fancy prompts, two functions are provided: <span
class="strong"><i><tt>ext:prompt-new-package</tt></i></span>, returning <a
href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
target="_top"><tt>*PACKAGE*</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if the current package is the same as it
was initially; and <span
class="strong"><i><tt>ext:package-short-name</tt></i></span> taking one
argument, a package, and returning its shortest name or nickname. Also, a
variable <span class="strong"><i><tt>ext:*command-index*</tt></i></span>
contains the current prompt number, it is your responsibility to increment
it (this variable is bound to 0 before saving the <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>).</p>
</div>

<div class="section"><a id="ansi" name="ansi" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="ansi"
name="ansi" />Extensions-1.9. Maximum ANSI CL compliance</h2>
</div>
</div>

<p>Some [<a href="#ansi-cl">ANSI CL standard</a>] features are turned off
by default for backwards compatibility. They can be switched on, all at
once by setting the <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> <a href="#ansi"
title="Extensions-1.9. Maximum ANSI CL compliance"><tt>CUSTOM:*ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, or they can be switched on individually.
Setting <a href="#ansi"
title="Extensions-1.9. Maximum ANSI CL compliance"><tt>CUSTOM:*ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> implies the following:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e32254" name="d0e32254" />Setting <a href="#pathprint"
title="pathnames"><tt>CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>

<li><a id="d0e32265" name="d0e32265" />Setting <a href="#fixnum-char-ansi"
title="Function COERCE"><tt>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>

<li><a id="d0e32276" name="d0e32276" />Setting <a
href="#count-ansi"><tt>CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>

<li><a id="d0e32287" name="d0e32287" />Setting <a href="#pathmerge"
title="Function MERGE-PATHNAMES"><tt>CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>

<li><a id="d0e32298" name="d0e32298" />Setting <a href="#parsename"
title="Function PARSE-NAMESTRING"><tt>CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>

<li><a id="d0e32309" name="d0e32309" />Setting <a href="#flocont"
title="Rule of Float Precision Contagion
 [CLHS-12.1.4.4]"><tt>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>.</li>
</ul>
</div>

<p>Please note that if you run <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> with the <a href="clisp.html#opt-ansi"
target="_top"><tt>-ansi</tt></a> switch or set the <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> <a href="#ansi"
title="Extensions-1.9. Maximum ANSI CL compliance"><tt>CUSTOM:*ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> and save <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>, then all
subsequent invocations of <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> with this image will be as if with <a
href="clisp.html#opt-ansi" target="_top"><tt>-ansi</tt></a> (regardless
whether you actually supply the <a href="clisp.html#opt-ansi"
target="_top"><tt>-ansi</tt></a> switch). You can always set the <a
href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
target="_top"><tt>SYMBOL-MACRO</tt></a> <a href="#ansi"
title="Extensions-1.9. Maximum ANSI CL compliance"><tt>CUSTOM:*ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, or invoke <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> with the <a
href="clisp.html#opt-traditional" target="_top"><tt>-traditional</tt></a>
switch, reversing the above settings, i.e.,</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e32378" name="d0e32378" />Setting <a href="#pathprint"
title="pathnames"><tt>CUSTOM:*PRINT-PATHNAMES-ANSI*</tt></a> to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>

<li><a id="d0e32389" name="d0e32389" />Setting <a href="#fixnum-char-ansi"
title="Function COERCE"><tt>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</tt></a> to
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>

<li><a id="d0e32400" name="d0e32400" />Setting <a
href="#count-ansi"><tt>CUSTOM:*SEQUENCE-COUNT-ANSI*</tt></a> to <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>

<li><a id="d0e32411" name="d0e32411" />Setting <a href="#pathmerge"
title="Function MERGE-PATHNAMES"><tt>CUSTOM:*MERGE-PATHNAMES-ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>

<li><a id="d0e32422" name="d0e32422" />Setting <a href="#parsename"
title="Function PARSE-NAMESTRING"><tt>CUSTOM:*PARSE-NAMESTRING-ANSI*</tt></a>
to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>

<li><a id="d0e32433" name="d0e32433" />Setting <a href="#flocont"
title="Rule of Float Precision Contagion
 [CLHS-12.1.4.4]"><tt>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</tt></a> to
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</li>
</ul>
</div>
</div>

<div class="section"><a id="macros3" name="macros3" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="macros3"
name="macros3" />Extensions-1.10. Additional Fancy Macros</h2>
</div>
</div>

<p>If you uncomment the <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> "macros3")</tt> line in the file
<tt>init.lisp</tt> before doing <b>make</b>, or load the file
<tt>macros3.lisp</tt> into a running <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>, you can use the following macros:</p>

<p><a id="ethe" name="ethe" /><b><a
href="#ethe"><tt>EXT:ETHE</tt></a>.&nbsp;</b> <tt>(<a
href="#ethe"><tt>EXT:ETHE</tt></a> <i><tt>value-type</tt></i>
<i><tt>form</tt></i>)</tt> enforces a type check in both interpreted and
compiled code.</p>

<p><a id="letf" name="letf" /><b>Macros <a
href="#letf"><tt>EXT:LETF</tt></a> &amp; <a
href="#letf"><tt>EXT:LETF*</tt></a>.&nbsp;</b> These macros are similar to
<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET*</tt></a>, respectively, except that they can bind
places, even places with multiple values. Example:</p>

<pre class="programlisting">
 (letf (((values a b) form)) ...)
</pre>

is equivalent to 

<pre class="programlisting">
 (multiple-value-bind (a b) form ...)
</pre>

while 

<pre class="programlisting">
(letf (((first l) 7)) ...)
</pre>

is approximately equivalent to 

<pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
target="_top"><tt>LET*</tt></a> ((#:g1 l) (#:g2 (first #:g1)))
   (<a
href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
target="_top"><tt>PROGN</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (first #:g1) 7) ...)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a> (first #:g1) #:g2)))
</pre>


<br />
<br />
<p><a id="with-collect"
name="with-collect" /><b><tt>ext:with-collect</tt>.&nbsp;</b> Similar to
the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html"
target="_top"><tt>LOOP</tt></a>'s <tt>collect</tt> instruction, except
that it is more "Lispy" in appearance and can appear arbitrarily deep. It
defines local macros (with <a
href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
target="_top"><tt>MACROLET</tt></a>) which collect objects given to it in
lists, which are then returned as multiple values. E.g.,</p>

<pre class="programlisting">
 (ext:with-collect (c0 c1)
   (dotimes (i 10) (if (oddp i) (c0 i) (c1 i))))
</pre>

returns two lists <tt>(1 3 5 7 9)</tt> and <tt>(0 2 4 6 8)</tt> as
multiple values. 
<br />
<br />
<p>You might want to add a <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a> "macros3")</tt> statement to your <a
href="clisp.html#opt-norc" target="_top"><tt>.clisprc</tt></a> file if you
do not want to dump your own <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>.</p>
</div>

<div class="section"><a id="customize" name="customize" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="customize"
name="customize" />Extensions-1.11. Customizing <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> behavior.</h2>
</div>
</div>

<p>The user-customizable variables are located in the package <a
href="#customize"
title="Extensions-1.11. Customizing CLISP behavior.">&ldquo;CUSTOM&rdquo;</a>
and thus can be listed using <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
target="_top"><tt>APROPOS</tt></a> "" "CUSTOM")</tt></p>
</div>
</div>

<div class="chapter">
<div class="titlepage">
<div>
<h2 class="title"><a id="platform" name="platform" />Chapter 32.
Extensions-2: Platform specific Extensions</h2>
</div>
</div>

<div class="toc">
<p><b>Table of Contents</b></p>

<dl>
<dt><a href="#screen">Extensions-2.1. Random Screen Access</a></dt>

<dt><a href="#modules">Extensions-2.2. External Modules</a></dt>

<dd>
<dl>
<dt><a href="#mod-set-example">Example</a></dt>

<dt><a href="#included-modules">Modules included in the
distribution.</a></dt>
</dl>
</dd>

<dt><a href="#dffi">Extensions-2.3. The Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#dffi-overview">Overview</a></dt>

<dt><a href="#dffi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#c-flavor">The choice of the <b>C</b> flavor.</a></dt>

<dt><a href="#dffi-variables">Foreign variables</a></dt>

<dt><a href="#dffi-places">Operations on foreign places</a></dt>

<dt><a href="#dffi-functions">Foreign functions</a></dt>

<dt><a href="#allocation">Argument and result passing conventions</a></dt>

<dt><a href="#dffi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#affi">Extensions-2.4. The Amiga Foreign Function Call
Facility</a></dt>

<dd>
<dl>
<dt><a href="#affi-design">Design issues</a></dt>

<dt><a href="#affi-overview">Overview</a></dt>

<dt><a href="#affi-libs">Foreign Libraries</a></dt>

<dt><a href="#affi-types">(Foreign) <b>C</b> types</a></dt>

<dt><a href="#affi-functions">Foreign functions</a></dt>

<dt><a href="#affi-memory-access">Memory access</a></dt>

<dt><a href="#affi-func-def">Function Definition Files</a></dt>

<dt><a href="#affi-hints">Hints</a></dt>

<dt><a href="#affi-caveats">Caveats</a></dt>

<dt><a href="#affi-examples">Examples</a></dt>
</dl>
</dd>

<dt><a href="#rexx">Extensions-2.5. ARexx</a></dt>

<dt><a href="#socket">Extensions-2.6. Socket Streams</a></dt>

<dt><a href="#syscalls">Extensions-2.7. System Calls</a></dt>

<dt><a href="#quickstart">Extensions-2.8. Quickstarting delivery with
<b>CLISP</b></a></dt>

<dt><a href="#app-dev">Extensions-2.9. Application delivery with
<b>CLISP</b></a></dt>

<dt><a href="#shell">Extensions-2.10. Shell, Pipes and Printing</a></dt>

<dd>
<dl>
<dt><a href="#exec">Shell</a></dt>

<dt><a href="#pipe">Pipes</a></dt>

<dt><a href="#hardcopy">Printing</a></dt>
</dl>
</dd>

<dt><a href="#dir-key">Extensions-2.11. Directory Access</a></dt>

<dt><a href="#other">Extensions-2.12. Other</a></dt>
</dl>
</div>

<div class="section"><a id="screen" name="screen" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="screen"
name="screen" />Extensions-2.1. Random Screen Access</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</h2>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e32633" name="d0e32633" /><span
class="term"><tt>(</tt>screen:make-window</span>)</dt>

<dd>returns a "window stream". As long as this stream is open, the
terminal is in cbreak/noecho mode. <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> should not be used for input or
output during this time. (Use <a href="#terminal"
title="Terminal interaction."><tt>EXT:WITH-KEYBOARD</tt></a> and <a
href="#terminal"
title="Terminal interaction."><tt>EXT:*KEYBOARD-INPUT*</tt></a>
instead.)</dd>

<dt><a id="d0e32655" name="d0e32655" /><span
class="term"><tt>(</tt>screen:with-window</span> .
<i><tt>body</tt></i>)</dt>

<dd>binds <span class="strong"><i><tt>screen:*window*</tt></i></span> to a
window stream and executes <i><tt>body</tt></i>. The stream is guaranteed
to be closed when the body is left. During its execution, <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> should not be used, as
above.</dd>

<dt><a id="d0e32679" name="d0e32679" /><span
class="term"><tt>(</tt>screen:window-size</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>returns the window's size, as two values: height (= y<sub>max</sub>+1)
and width (= x<sub>max</sub>+1).</dd>

<dt><a id="d0e32698" name="d0e32698" /><span
class="term"><tt>(</tt>screen:window-cursor-position</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>returns the position of the cursor in the window, as two values: line
(&ge;0, &le;y<sub>max</sub>, 0 means top), column (&ge;0,
&le;x<sub>max</sub>, 0 means left margin).</dd>

<dt><a id="d0e32717" name="d0e32717" /><span
class="term"><tt>(</tt>screen:set-window-cursor-position</span>
<i><tt>window-stream</tt></i> <i><tt>line</tt></i>
<i><tt>column</tt></i>)</dt>

<dd>sets the position of the cursor in the window.</dd>

<dt><a id="d0e32736" name="d0e32736" /><span
class="term"><tt>(</tt>screen:clear-window</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>clears the window's contents and puts the cursor in the upper left
corner.</dd>

<dt><a id="d0e32749" name="d0e32749" /><span
class="term"><tt>(</tt>screen:clear-window-to-eot</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>clears the window's contents from the cursor position to the end of
window.</dd>

<dt><a id="d0e32762" name="d0e32762" /><span
class="term"><tt>(</tt>screen:clear-window-to-eol</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>clears the window's contents from the cursor position to the end of
line.</dd>

<dt><a id="d0e32775" name="d0e32775" /><span
class="term"><tt>(</tt>screen:delete-window-line</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>removes the cursor's line, moves the lines below it up by one line and
clears the window's last line.</dd>

<dt><a id="d0e32788" name="d0e32788" /><span
class="term"><tt>(</tt>screen:insert-window-line</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>inserts a line at the cursor's line, moving the lines below it down by
one line.</dd>

<dt><a id="d0e32801" name="d0e32801" /><span
class="term"><tt>(</tt>screen:highlight-on</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>switches highlighted output on.</dd>

<dt><a id="d0e32814" name="d0e32814" /><span
class="term"><tt>(</tt>screen:highlight-off</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>switches highlighted output off.</dd>

<dt><a id="d0e32827" name="d0e32827" /><span
class="term"><tt>(</tt>screen:window-cursor-on</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>makes the cursor visible, a cursor block in most implementations.</dd>

<dt><a id="d0e32840" name="d0e32840" /><span
class="term"><tt>(</tt>screen:window-cursor-off</span>
<i><tt>window-stream</tt></i>)</dt>

<dd>makes the cursor invisible, in implementations where this is
possible.</dd>
</dl>
</div>
</div>

<div class="section"><a id="modules" name="modules" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="modules"
name="modules" />Extensions-2.2. External Modules</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a> platforms only.</h2>
</div>
</div>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> has a
facility for adding external modules (written in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, for example). It is invoked through
<b>clisp-link</b>.</p>

<p>A module is a piece of external code which defines extra Lisp objects,
symbols and functions. A module name must consist of the characters
<tt>A</tt>-<tt>Z</tt>, <tt>a</tt>-<tt>z</tt>, <tt>_</tt>,
<tt>0</tt>-<tt>9</tt>. The module name &ldquo;clisp&rdquo; is reserved.
Normally a module name is derived from the corresponding file name.</p>

<p><b>clisp-link</b> needs a directory containing:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e32907" name="d0e32907" /><tt>modules.d</tt></li>

<li><a id="d0e32911" name="d0e32911" /><tt>modules.c</tt></li>

<li><a id="d0e32915" name="d0e32915" /><tt>clisp.h</tt></li>
</ul>
</div>

<b>clisp-link</b> expects to find these files in a subdirectory
<tt>linkkit/</tt> of the current directory. This can be overridden by the
environment variable <tt>CLISP_LINKKIT</tt>.
<br />
<br />
<p><b>clisp-link</b> operates on <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> linking sets and on module sets.</p>

<p>A <span class="strong"><i>linking set</i></span> is a directory
containing:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e32943" name="d0e32943" /><span
class="term"><tt>makevars</tt></span></dt>

<dd>
<p><a id="d0e32947" name="d0e32947" />some <b>/bin/sh</b> commands,
setting the variables</p>

<div class="variablelist">
<dl>
<dt><a id="d0e32954" name="d0e32954" /><span
class="term"><tt>CC</tt></span></dt>

<dd>the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler</dd>

<dt><a id="d0e32965" name="d0e32965" /><span
class="term"><tt>CFLAGS</tt></span></dt>

<dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler, when compiling</dd>

<dt><a id="d0e32976" name="d0e32976" /><span
class="term"><tt>CLFLAGS</tt></span></dt>

<dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler, when linking</dd>

<dt><a id="d0e32987" name="d0e32987" /><span
class="term"><tt>LIBS</tt></span></dt>

<dd>libraries to use when linking</dd>

<dt><a id="d0e32994" name="d0e32994" /><span
class="term"><tt>X_LIBS</tt></span></dt>

<dd>additional X window system libraries to use</dd>

<dt><a id="d0e33001" name="d0e33001" /><span
class="term"><tt>RANLIB</tt></span></dt>

<dd>the ranlib command</dd>

<dt><a id="d0e33008" name="d0e33008" /><span
class="term"><tt>FILES</tt></span></dt>

<dd>the list of files needed when linking</dd>
</dl>
</div>


<br />
<br />
</dd>

<dt><a id="d0e33015" name="d0e33015" /><span
class="term"><tt>modules.h</tt></span></dt>

<dd>the list of modules contained in this linking set</dd>

<dt><a id="d0e33022" name="d0e33022" /><span
class="term"><tt>modules.o</tt></span></dt>

<dd>the compiled list of modules contained in this linking set</dd>

<dt><a id="d0e33029" name="d0e33029" /><span class="term">all the
<tt>FILES</tt></span></dt>

<dd>listed in <tt>makevars</tt></dd>

<dt><a id="d0e33040" name="d0e33040" /><span
class="term"><tt>lisp.run</tt></span></dt>

<dd>the executable</dd>

<dt><a id="d0e33047" name="d0e33047" /><span
class="term"><tt>lispinit.mem</tt></span></dt>

<dd>the <a href="#image" title="Extensions-1.1. Saving an Image">memory
image</a></dd>
</dl>
</div>

<p>To run a <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
contained in some linking set <tt>dir</tt>, call
<b><i><tt>dir</tt></i>/lisp.run -M
<i><tt>dir</tt></i>/lispinit.mem</b></p>

<p>A <span class="strong"><i>module set</i></span> is a directory
containing:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e33078" name="d0e33078" /><span
class="term"><b>link.sh</b></span></dt>

<dd>some <b>/bin/sh</b> commands, which prepare the directory before
linking, and set the variables <tt>NEW_FILES</tt>, <tt>NEW_LIBS</tt>,
<tt>NEW_MODULES</tt>, <tt>TO_LOAD</tt> and optionally
<tt>TO_PRELOAD</tt></dd>

<dt><a id="d0e33102" name="d0e33102" /><span class="term">and any other
files</span></dt>

<dd>needed by <b>link.sh</b></dd>
</dl>
</div>

<p>Note that in <b>link.sh</b> the module set directory is referred to as
<tt>$modulename/</tt>.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e33120" name="d0e33120" /><span
class="term"><tt>NEW_FILES</tt></span></dt>

<dd>the space-separated list of files that belong to the module set and
will belong to every new linking set.</dd>

<dt><a id="d0e33127" name="d0e33127" /><span
class="term"><tt>NEW_LIBS</tt></span></dt>

<dd>the space-separated list of files or <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler switches that need to be passed to the
<a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler when linking the lisp.run belonging to
a new linking set.</dd>

<dt><a id="d0e33142" name="d0e33142" /><span
class="term"><tt>NEW_MODULES</tt></span></dt>

<dd>the space-separated list of the module names belonging to the module
set. Normally, every <tt>c</tt> file in the module set defines a module of
its own. The module name is derived from the file name.</dd>

<dt><a id="d0e33152" name="d0e33152" /><span
class="term"><tt>TO_LOAD</tt></span></dt>

<dd>the space-separated list of Lisp files to load before building the
<tt>lispinit.mem</tt> belonging to a new linking set.</dd>

<dt><a id="d0e33162" name="d0e33162" /><span
class="term"><tt>TO_PRELOAD</tt> (optional)</span></dt>

<dd>the space-separated list of Lisp files to load into an intermediate
<tt>lispinit.mem</tt> file, before building the <tt>lispinit.mem</tt>
belonging to a new linking set. This variable is usually used for defining
Lisp packages which must be present when the new <tt>c</tt> files are
initialized.</dd>
</dl>
</div>

<p>The command <b>clisp-link create-module-set <i><tt>module-dir</tt></i>
<i><tt>file1.c</tt></i> ...</b> creates a module set in
<i><tt>module-dir</tt></i> which refers (via symbolic links) to
<i><tt>file1.c</tt></i> etc. The files are expected to be modules of their
own.</p>

<p>The command <b>clisp-link add-module-set <i><tt>module-dir</tt></i>
<i><tt>source-dir</tt></i> <i><tt>destination-dir</tt></i></b> combines a
linking set in <i><tt>source-dir</tt></i> and a module in
<i><tt>module-dir</tt></i> to a new linking set, in a directory
<i><tt>destination-dir</tt></i> which is newly created.</p>

<p>The command <b>clisp-link run <i><tt>source-dir</tt></i>
<i><tt>module-dir</tt></i> ...</b> runs the linking set in
<i><tt>source-dir</tt></i>, with the module in <i><tt>module-dir</tt></i>
loaded. More than one module can be specified. If <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> has been built
with the configuration option <tt>--with-dynamic-modules</tt>, the loading
will be performed through dynamic loading. Otherwise - this is much slower
- a temporary linking set will be created and deleted afterwards. Note
that dynamic loading does not work on all operating systems, and that
<tt>--with-dynamic-modules</tt> precludes some efficiency optimizations
which are on by default.</p>

<div class="section"><a id="mod-set-example" name="mod-set-example" />
<div class="titlepage">
<div>
<h3 class="title"><a id="mod-set-example"
name="mod-set-example" />Example</h3>
</div>
</div>

<p>To link in the <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
bindings for the GNU/Linux operating system, the following steps are
needed. (Step 1 and step 2 need not be executed in this order.)</p>

<div class="orderedlist">
<ol type="1">
<li>
<p><a id="d0e33255" name="d0e33255" />Create a new module set:</p>

<pre class="programlisting">
$ clisp-link create-module-set linux /<i><tt>somewhere</tt></i>/bindings/linux.c
</pre>

Modify the newly created <tt>linux/link.sh</tt> to add <tt>-lm</tt>; to
the libraries: replace 

<pre class="programlisting">
NEW_LIBS="$file_list"
</pre>

with 

<pre class="programlisting">
NEW_LIBS="$file_list -lm"
</pre>

Modify the newly created <tt>linux/link.sh</tt> to load <tt>linux.fas</tt>
before saving the <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>: replace 

<pre class="programlisting">
TO_LOAD=''
</pre>

with 

<pre class="programlisting">
TO_LOAD='/<i><tt>somewhere</tt></i>/bindings/linux.fas'
</pre>


<br />
<br />
</li>

<li>
<p><a id="d0e33293" name="d0e33293" />Compile <tt>linux.lisp</tt>,
creating <tt>linux.c</tt>:</p>

<pre class="programlisting">
$ clisp -c /<i><tt>somewhere</tt></i>/bindings/linux.lisp
</pre>


<br />
<br />
</li>

<li>
<p><a id="d0e33307" name="d0e33307" />Create a new linking set:</p>

<pre class="programlisting">
$ clisp-link add-module-set linux base base+linux
</pre>


<br />
<br />
</li>

<li>
<p><a id="d0e33312" name="d0e33312" />Run and try it:</p>

<pre class="programlisting">
$ base+linux/lisp.run -M base+linux/lispinit.mem &gt; (linux::stat "/tmp")
</pre>


<br />
<br />
</li>
</ol>
</div>
</div>

<div class="section"><a id="included-modules" name="included-modules" />
<div class="titlepage">
<div>
<h3 class="title"><a id="included-modules"
name="included-modules" />Modules included in the distribution.</h3>
</div>
</div>

<p>The following modules come with the distribution of <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>:</p>

<div class="variablelist">
<dl>
<dt><a id="d0e33328" name="d0e33328" /><span
class="term">bindings</span></dt>

<dd>
<p><a id="d0e33331" name="d0e33331" />Call the operating system functions
from <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>. The
following platforms are supported:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e33339" name="d0e33339" />AmigaOS</li>

<li><a id="d0e33342" name="d0e33342" />Linux/libc5</li>

<li><a id="d0e33345" name="d0e33345" />Linux/libc6</li>
</ul>
</div>


<br />
<br />
</dd>

<dt><a id="d0e33348" name="d0e33348" /><span class="term">CLX</span></dt>

<dd>
<p><a id="d0e33351" name="d0e33351" />Call Xlib functions from <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>. Two
implementations are supplied:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e33359" name="d0e33359" />mit-clx, from MIT <a
href="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z"
target="_top">ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</a></li>

<li><a id="d0e33365" name="d0e33365" />new-clx, by <a
href="http://www.uni-karlsruhe.de/~unk6/" target="_top">Gilbert
Baumann</a> <a href="mailto:unk6@rz.uni-karlsruhe.de"
target="_top">&lt;unk6@rz.uni-karlsruhe.de&gt;</a>.</li>
</ul>
</div>


<br />
<br />
</dd>

<dt><a id="d0e33374" name="d0e33374" /><span class="term">postgresql632,
postgresql642</span></dt>

<dd>Access <a href="http://www.PostgreSQL.org/"
target="_top">PostgreSQL</a> from <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>.</dd>

<dt><a id="d0e33387" name="d0e33387" /><span
class="term">queens</span></dt>

<dd>Compute the number of solutions to the n-queens problem on a n*n
checkboard.</dd>

<dt><a id="d0e33393" name="d0e33393" /><span class="term"><a
href="#regexp"
title="CLISP &ldquo;REGEXP&rdquo; module">regexp</a></span></dt>

<dd>The <a href="regexp.html" target="_top">POSIX Regular Expressions</a>
matching, compiling, executing.</dd>

<dt><a id="d0e33403" name="d0e33403" /><span class="term"><a
href="wildcard.html" target="_top">wildcard</a></span></dt>

<dd>Shell globbing</dd>
</dl>
</div>

<div class="section"><a id="regexp" name="regexp" />
<div class="titlepage">
<div>
<h4 class="title"><a id="regexp" name="regexp" /><a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> <a
href="#regexp"
title="CLISP &ldquo;REGEXP&rdquo; module">&ldquo;REGEXP&rdquo;</a>
module</h4>
</div>
</div>

<p>The <a href="#regexp"
title="CLISP &ldquo;REGEXP&rdquo; module">&ldquo;REGEXP&rdquo;</a> module
implements the <a href="regexp.html" target="_top">POSIX regular
expressions</a> via an <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
call to the standard <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> system facilities. The syntax of these regular
expressions is described in many places, such as your local
<tt>regexp(5)</tt> manual and <a
href="http://www.gnu.org/software/emacs/emacs.html"
target="_top">Emacs</a> info pages.</p>

<p>The <a href="#regexp"
title="CLISP &ldquo;REGEXP&rdquo; module">&ldquo;REGEXP&rdquo;</a> package
exports the following 9 symbols:</p>

<table class="simplelist" border="0" summary="Simple list">
<tr>
<td><a href="#re-match"><tt>REGEXP:MATCH</tt></a></td>
<td><a href="#re-match-start"><tt>REGEXP:MATCH-START</tt></a></td>
<td><a href="#re-match-end"><tt>REGEXP:MATCH-END</tt></a></td>
</tr>

<tr>
<td><a href="#re-match-string"><tt>REGEXP:MATCH-STRING</tt></a></td>
<td><a href="#re-regexp-quote"><tt>REGEXP:REGEXP-QUOTE</tt></a></td>
<td><a href="#re-regexp-compile"><tt>REGEXP:REGEXP-COMPILE</tt></a></td>
</tr>

<tr>
<td><a href="#re-regexp-exec"><tt>REGEXP:REGEXP-EXEC</tt></a></td>
<td><a href="#re-regexp-split"><tt>REGEXP:REGEXP-SPLIT</tt></a></td>
<td><a href="#re-with-loop-split"><tt>REGEXP:WITH-LOOP-SPLIT</tt></a></td>
</tr>
</table>

<div class="variablelist">
<p><b>API</b></p>

<dl>
<dt><a id="re-match" name="re-match" /><span class="term"><tt>(<a
href="#re-match"><tt>REGEXP:MATCH</tt></a> <i><tt>pattern</tt></i>
<i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> (<tt>:START</tt> 0) <tt>:END</tt>
(<tt>:CASE-SENSITIVE</tt> t))</tt></span></dt>

<dd>
<p><a id="d0e33516" name="d0e33516" />This macro returns as first value a
<tt>REGEXP::REGMATCH_T</tt> structure containing the indices of the start
and end of the first match for the regular expression
<i><tt>pattern</tt></i> in <i><tt>string</tt></i>; or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if there is no match. Additionally, a
<tt>REGEXP::REGMATCH_T</tt> structure is returned for every matched
<tt>"\(...\)"</tt> group in <i><tt>pattern</tt></i>, in the order that the
open parentheses appear in <i><tt>pattern</tt></i>. If
<i><tt>start</tt></i> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the search starts at that index in
<i><tt>string</tt></i>. If <i><tt>end</tt></i> is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, only <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html"
target="_top"><tt>SUBSEQ</tt></a> <i><tt>string</tt></i>
<i><tt>start</tt></i> <i><tt>end</tt></i>)</tt> is considered.</p>

<div class="example">
<p><a id="d0e33577" name="d0e33577" /><b>Example 32.1. <a
href="#re-match"><tt>REGEXP:MATCH</tt></a></b></p>

<pre class="programlisting">
    (<a
href="#re-match"><tt>REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly.")
     <tt>#S(</tt>REGEXP::REGMATCH_T :RM_SO 4 :RM_EO 9)
    (<a
href="#re-match"><tt>REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8)
     <tt>#S(</tt>REGEXP::REGMATCH_T :RM_SO 27 :RM_EO 32)
    (<a
href="#re-match"><tt>REGEXP:MATCH</tt></a> "quick" "The quick brown fox jumped quickly." :start 8 :end 30)
     <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>
    (<a
href="#re-match"><tt>REGEXP:MATCH</tt></a> "\\([a-z]*\\)[0-9]*\\(bar\\)" "foo12bar")
     <tt>#S(</tt>REGEXP::REGMATCH_T :RM_SO 0 :RM_EO 8) ;
     <tt>#S(</tt>REGEXP::REGMATCH_T :RM_SO 0 :RM_EO 3) ;
     <tt>#S(</tt>REGEXP::REGMATCH_T :RM_SO 5 :RM_EO 8)
  
</pre>
</div>


<br />
<br />
</dd>

<dt><a id="re-match-start" name="re-match-start" /><span
class="term"><tt>(<a
href="#re-match-start"><tt>REGEXP:MATCH-START</tt></a>
<i><tt>match</tt></i>)</tt></span></dt>

<dd>Extracts the start index of <i><tt>match</tt></i>.</dd>

<dt><a id="re-match-end" name="re-match-end" /><span class="term"><tt>(<a
href="#re-match-end"><tt>REGEXP:MATCH-END</tt></a>
<i><tt>match</tt></i>)</tt></span></dt>

<dd>Extracts the end index of <i><tt>match</tt></i>.</dd>

<dt><a id="re-match-string" name="re-match-string" /><span
class="term"><tt>(<a
href="#re-match-string"><tt>REGEXP:MATCH-STRING</tt></a>
<i><tt>string</tt></i> <i><tt>match</tt></i>)</tt></span></dt>

<dd>Extracts the substring of <i><tt>string</tt></i> corresponding to the
given pair of start and end indices of <i><tt>match</tt></i>. The result
is shared with <i><tt>string</tt></i>. If you want a freshly consed <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a>, use <a
href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html"
target="_top"><tt>COPY-SEQ</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
target="_top"><tt>COERCE</tt></a> (<a
href="#re-match-string"><tt>REGEXP:MATCH-STRING</tt></a> ...) '<a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
target="_top"><tt>SIMPLE-STRING</tt></a>)</tt>.</dd>

<dt><a id="re-regexp-quote" name="re-regexp-quote" /><span
class="term"><tt>(<a
href="#re-regexp-quote"><tt>REGEXP:REGEXP-QUOTE</tt></a>
<i><tt>string</tt></i>)</tt></span></dt>

<dd>
<p><a id="d0e33729" name="d0e33729" />This function returns a regular
expression string that matches exactly <i><tt>string</tt></i> and nothing
else. This allows you to request an exact string match when calling a
function that wants a regular expression.</p>

<div class="example">
<p><a id="d0e33735" name="d0e33735" /><b>Example 32.2. <a
href="#re-regexp-quote"><tt>REGEXP:REGEXP-QUOTE</tt></a></b></p>

<pre class="programlisting">
    (regexp-quote "^The cat$")
     "\\^The cat\\$"
  
</pre>
</div>

One use of <a href="#re-regexp-quote"><tt>REGEXP:REGEXP-QUOTE</tt></a> is
to combine an exact string match with context described as a regular
expression.
<br />
<br />
</dd>

<dt><a id="re-regexp-compile" name="re-regexp-compile" /><span
class="term"><tt>(<a
href="#re-regexp-compile"><tt>REGEXP:REGEXP-COMPILE</tt></a>
<i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> (<i><tt>case-sensitive</tt></i>
t))</tt></span></dt>

<dd>Compile the regular expression <i><tt>string</tt></i> into an object
suitable for <a
href="#re-regexp-exec"><tt>REGEXP:REGEXP-EXEC</tt></a>.</dd>

<dt><a id="re-regexp-exec" name="re-regexp-exec" /><span
class="term"><tt>(<a
href="#re-regexp-exec"><tt>REGEXP:REGEXP-EXEC</tt></a>
<i><tt>pattern</tt></i> <i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> (<tt>:START</tt> 0)
<tt>:END</tt>)</tt></span></dt>

<dd>
<p>Execute the <i><tt>pattern</tt></i>, which must be a compiled regular
expression returned by <a
href="#re-regexp-compile"><tt>REGEXP:REGEXP-COMPILE</tt></a>, against the
appropriate portion of the <i><tt>string</tt></i>.</p>

<p>Negative <i><tt>end</tt></i> means <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_pl.html"
target="_top"><tt>+</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> <i><tt>string</tt></i>)
<i><tt>end</tt></i>)</tt></p>
</dd>

<dt><a id="re-regexp-split" name="re-regexp-split" /><span
class="term"><tt>(<a
href="#re-regexp-split"><tt>REGEXP:REGEXP-SPLIT</tt></a>
<i><tt>pattern</tt></i> <i><tt>string</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> (<tt>:START</tt> 0) <tt>:END</tt>
(<tt>:CASE-SENSITIVE</tt> t))</tt></span></dt>

<dd>Return a list of substrings of <i><tt>string</tt></i> (all sharing the
structure with <i><tt>string</tt></i>) separated by
<i><tt>pattern</tt></i> (a regular expression string or a return value of
<a href="#re-regexp-compile"><tt>REGEXP:REGEXP-COMPILE</tt></a>)</dd>

<dt><a id="re-with-loop-split" name="re-with-loop-split" /><span
class="term"><tt>(<a
href="#re-with-loop-split"><tt>REGEXP:WITH-LOOP-SPLIT</tt></a>
(<i><tt>variable</tt></i> <i><tt>stream</tt></i> <i><tt>pattern</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> (<tt>:START</tt> 0) <tt>:END</tt>
(<tt>:CASE-SENSITIVE</tt> t)) <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;BODY</tt></a>
<i><tt>body</tt></i>)</tt></span></dt>

<dd>Read lines from <i><tt>stream</tt></i>, split them with <a
href="#re-regexp-split"><tt>REGEXP:REGEXP-SPLIT</tt></a> on
<i><tt>pattern</tt></i>, and bind the resulting list to
<i><tt>variable</tt></i>.</dd>
</dl>
</div>

<p>The following code computes the number of people who use a particular
shell:</p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "REGEXP-TEST" (:use "LISP" "REGEXP"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "REGEXP-TEST")
(let ((h (make-hash-table :test #'equal :size 10)) (n 0))
  (with-open-file (f "/etc/passwd")
    (with-loop-split (s f ":")
      (let ((sh (seventh s)))
        (if (gethash sh h)
            (incf (gethash sh h))
            (setf (gethash sh h) 1)))))
  (with-hash-table-iterator (i h)
    (loop (multiple-value-bind (r k v) (i)
            (unless r (return))
            (format t "[~d] ~s~30t== ~5:d~%" (incf n) k v)))))
</pre>


<br />
<br />
<p>The same is done by the following <a href="http://www.perl.com"
target="_top"><b>Perl</b></a>:</p>

<pre class="programlisting">
#!/usr/local/bin/perl -w

use diagnostics;
use strict;

my $IN = $ARGV[0];
open(INF,"&lt; $IN") || die "$0: cannot read file [$IN]: $!\n;";
my %hash;
while (&lt;INF&gt;) {
  chop;
  my @all = split($ARGV[1]);
  my $shell = ($#all &gt;= 6 ? $all[6] : "");
  if ($hash{$shell}) { $hash{$shell} ++; }
  else { $hash{$shell} = 1; }
}
my $ii = 0;
for my $kk (keys(%hash)) {
  print "[",++$ii,"] \"",$kk,"\"  --  ",$hash{$kk},"\n";
}
</pre>


<br />
<br />
</div>
</div>
</div>

<div class="section"><a id="dffi" name="dffi" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="dffi"
name="dffi" />Extensions-2.3. The Foreign Function Call Facility</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: many <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.</h2>
</div>
</div>

<p>A foreign function description is written as a Lisp file, and when
compiled it produces a <tt>c</tt> file which is then compiled by the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler and may be linked together with
<tt>lisp.a</tt>.</p>

<p>All symbols relating to the foreign function interface are exported
from the package <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>.
To use them, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
target="_top"><tt>USE-PACKAGE</tt></a> "FFI")</tt>.</p>

<p>Special <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
forms may appear anywhere in the Lisp file.</p>

<div class="section"><a id="dffi-overview" name="dffi-overview" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-overview"
name="dffi-overview" />Overview</h3>
</div>
</div>

<p>These are the special <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
forms. We have taken a pragmatic approach: the only foreign languages we
support for now are <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> and ANSI <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>.</p>

<div class="variablelist">
<p><b>special <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>
forms; <i><tt>name</tt></i> is any Lisp symbol; <i><tt>c-name</tt></i> is
a string.</b></p>

<dl>
<dt><a id="def-c-type" name="def-c-type" /><span
class="term"><tt>(</tt>def-c-type</span> <i><tt>name</tt></i>
<i><tt>c-type</tt></i>)</dt>

<dd>This form makes <i><tt>name</tt></i> a shortcut for
<i><tt>c-type</tt></i>. Note that <i><tt>c-type</tt></i> may already refer
to name. Forward declarations of types are not possible, however.</dd>

<dt><a id="def-c-var" name="def-c-var" /><span
class="term"><tt>(</tt>def-c-var</span> <i><tt>name</tt></i>
{<i><tt>option</tt></i>}*)</dt>

<dd>
<div class="table">
<p><a id="d0e34066" name="d0e34066" /><b>Table 32.1.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th><i><tt>option</tt></i> ::==</th>
<th>&nbsp;</th>
<th>&nbsp;</th>
</tr>
</thead>

<tbody>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt>(:name <i><tt>c-name</tt></i>)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:type <i><tt>c-type</tt></i>)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:read-only <i><tt>boolean</tt></i>)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:alloc <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>)</tt></td>
</tr>
</tbody>
</table>
</div>

<p>This form defines a foreign variable. <i><tt>name</tt></i> is the Lisp
name, a regular Lisp symbol.</p>

<p>The <tt>:name</tt> option specifies the name, as seen from <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, as a string. If not specified, it is derived
from the print name of the Lisp name.</p>

<p>The <tt>:type</tt> option specifies the variable's foreign type.</p>

<p>If the <tt>:read-only</tt> option is specified and non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, it will be impossible to change the
variable's value from within Lisp (using <a
href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a> or similar).</p>

<p>The <tt>:alloc</tt> option can be either <tt>:NONE</tt> or
<tt>:MALLOC-FREE</tt> and defaults to <tt>:NONE</tt>. If it is
<tt>:MALLOC-FREE</tt>, any values of type <a
href="#c-string">FFI:C-STRING</a>, <a href="#c-ptr">FFI:C-PTR</a>, <a
href="#c-ptr-null">FFI:C-PTR-NULL</a>, <a
href="#c-array-ptr">FFI:C-ARRAY-PTR</a> within the foreign value are
assumed to be pointers to <tt>malloc()</tt>-allocated storage, and when <a
href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a> replaces an old value by a new one, the
old storage is freed using <tt>free()</tt> and the new storage allocated
using <tt>malloc()</tt>. If it is <tt>:NONE</tt>, <a
href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a> assumes that the pointers point to good
storage (not <tt>NULL</tt>!) and overwrites the old values by the new
ones. This is dangerous (just think of overwriting a string with a longer
one or storing some data in a <tt>NULL</tt> pointer...) and
deprecated.</p>
</dd>

<dt><a id="def-call-out" name="def-call-out" /><span class="term"><tt>(<a
href="#def-call-out"><tt>FFI:DEF-CALL-OUT</tt></a> <i><tt>name</tt></i>
{<i><tt>option</tt></i>}*)</tt></span></dt>

<dd>
<div class="table">
<p><a id="d0e34224" name="d0e34224" /><b>Table 32.2.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th><i><tt>option</tt></i> ::==</th>
<th>&nbsp;</th>
<th>&nbsp;</th>
</tr>
</thead>

<tbody>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt>(:name <i><tt>c-name</tt></i>)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:arguments {(<i><tt>arg-name</tt></i> <i><tt>c-type</tt></i> [<a
href="#param-mode"><i><tt>PARAM-MODE</tt></i></a> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>]])}*)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:return-type <i><tt>c-type</tt></i> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>])</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(<a href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a>
<i><tt>language</tt></i>)</tt></td>
</tr>
</tbody>
</table>
</div>

<p>This form defines a named call-out function (a foreign function called
from Lisp: control flow temporarily leaves Lisp). Any Lisp function call
to <tt>#'<i><tt>name</tt></i></tt> is redirected to call the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function <i><tt>c-name</tt></i>.</p>
</dd>

<dt><a id="def-call-in" name="def-call-in" /><span class="term"><tt>(<a
href="#def-call-in"><tt>FFI:DEF-CALL-IN</tt></a> <i><tt>name</tt></i>
{<i><tt>option</tt></i>}*)</tt></span></dt>

<dd>
<div class="table">
<p><a id="d0e34323" name="d0e34323" /><b>Table 32.3.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th><i><tt>option</tt></i> ::==</th>
<th>&nbsp;</th>
<th>&nbsp;</th>
</tr>
</thead>

<tbody>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt>(:name <i><tt>c-name</tt></i>)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:arguments {(<i><tt>arg-name</tt></i> <i><tt>c-type</tt></i> [<a
href="#param-mode"><i><tt>PARAM-MODE</tt></i></a> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>]])}*)</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(:return-type <i><tt>c-type</tt></i> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>])</tt></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>|</td>
<td><tt>(<a href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a>
<i><tt>language</tt></i>)</tt></td>
</tr>
</tbody>
</table>
</div>

<p>This form defines a named call-in function (i.e., a Lisp function
called from the foreign language: control flow temporary enters Lisp). Any
<a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function call to the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function <i><tt>c-name</tt></i> is redirected
to call the <a href="http://www.lisp.org" target="_top"><b>Common
Lisp</b></a> function <tt>#'<i><tt>name</tt></i></tt>.</p>
</dd>

<dt><a id="def-c-call-out" name="def-c-call-out" /><span
class="term"><tt>(<a
href="#def-c-call-out"><tt>FFI:DEF-C-CALL-OUT</tt></a>
<i><tt>name</tt></i> {<i><tt>option</tt></i>}*)</tt></span></dt>

<dd>This is equivalent to <a
href="#def-call-out"><tt>FFI:DEF-CALL-OUT</tt></a> with <a
href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a>
<tt>:STDC</tt>.</dd>

<dt><a id="def-c-call-in" name="def-c-call-in" /><span
class="term"><tt>(<a href="#def-c-call-in"><tt>FFI:DEF-C-CALL-IN</tt></a>
<i><tt>name</tt></i> {<i><tt>option</tt></i>}*)</tt></span></dt>

<dd>This is equivalent to <a
href="#def-call-in"><tt>FFI:DEF-CALL-IN</tt></a> with <a href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a>
<tt>:STDC</tt>.</dd>

<dt><a id="def-c-struct" name="def-c-struct" /><span class="term"><tt>(<a
href="#def-c-struct"><tt>FFI:DEF-C-STRUCT</tt></a> <i><tt>name</tt></i>
(<i><tt>ident</tt></i> <i><tt>c-type</tt></i>)*)</tt></span></dt>

<dd>This form defines <i><tt>name</tt></i> to be both a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
target="_top"><tt>STRUCTURE-CLASS</tt></a> and a foreign <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type with the given slots.</dd>

<dt><a id="def-c-enum" name="def-c-enum" /><span class="term"><tt>(<a
href="#def-c-enum"><tt>FFI:DEF-C-ENUM</tt></a> <i><tt>name</tt></i>
{<i><tt>ident</tt></i> | (<i><tt>ident</tt></i>
[<i><tt>value</tt></i>])}*)</tt></span></dt>

<dd>This form defines <i><tt>ident</tt></i>s as constants, similarly to
the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> declaration enum { <i><tt>ident</tt></i> [=
<i><tt>value</tt></i>], ... };</dd>

<dt><a id="c-lines" name="c-lines" /><span class="term"><tt>(<a
href="#c-lines"><tt>FFI:C-LINES</tt></a> <i><tt>format-string</tt></i>
{<i><tt>argument</tt></i>}*)</tt></span></dt>

<dd>This form outputs the string <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_format.html"
target="_top"><tt>FORMAT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> <i><tt>format-string</tt></i>
{<i><tt>argument</tt></i>}*)</tt> to the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> output file. This is a rarely needed low-level
facility.</dd>

<dt><a id="element" name="element" /><span class="term"><tt>(<a
href="#element"><tt>FFI:ELEMENT</tt></a> <i><tt>c-place</tt></i>
<i><tt>index<sub>1</sub></tt></i> ...
<i><tt>index<sub>n</sub></tt></i>)</tt></span></dt>

<dd>Array element: If <i><tt>c-place</tt></i> is of foreign type
<tt>(c-array <i><tt>c-type</tt></i> <i><tt>dim<sub>1</sub></tt></i> ...
<i><tt>dim<sub>n</sub></tt></i>)</tt> and 0 &le;
<i><tt>index<sub>1</sub></tt></i> &lt; <i><tt>dim<sub>1</sub></tt></i>,
..., 0 &le; <i><tt>index<sub>n</sub></tt></i> &lt;
<i><tt>dim<sub>n</sub></tt></i>, this will be the place corresponding to
<tt>(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html"
target="_top"><tt>AREF</tt></a> <i><tt>c-place</tt></i>
<i><tt>index<sub>1</sub></tt></i> ...
<i><tt>index<sub>n</sub></tt></i>)</tt> or
<tt><i><tt>c-place</tt></i>[<i><tt>index<sub>1</sub></tt></i>]...[<i><tt>index<sub>
n</sub></tt></i>]</tt>. It is a place of type <i><tt>c-type</tt></i>. If
<i><tt>c-place</tt></i> is of foreign type <tt>(<a
href="#c-array-max">FFI:C-ARRAY-MAX</a> <i><tt>c-type</tt></i>
<i><tt>dim</tt></i>)</tt> and 0 &le; <i><tt>index</tt></i> &lt;
<i><tt>dim</tt></i>, this will be the place corresponding to <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/acc_aref.html"
target="_top"><tt>AREF</tt></a> <i><tt>c-place</tt></i>
<i><tt>index</tt></i>)</tt> or
<tt><i><tt>c-place</tt></i>[<i><tt>index</tt></i>]</tt>. It is a place of
type <i><tt>c-type</tt></i>.</dd>

<dt><a id="deref" name="deref" /><span class="term"><tt>(<a
href="#deref"><tt>FFI:DEREF</tt></a>
<i><tt>c-place</tt></i>)</tt></span></dt>

<dd>Dereference pointer: If <i><tt>c-place</tt></i> is of foreign type
<tt>(<a href="#c-ptr">FFI:C-PTR</a> <i><tt>c-type</tt></i>)</tt> or
<tt>(<a href="#c-ptr-null">FFI:C-PTR-NULL</a>
<i><tt>c-type</tt></i>)</tt>, this will be the place the pointer points
to. It is a place of type <i><tt>c-type</tt></i>. For <tt>(<a
href="#c-ptr-null">FFI:C-PTR-NULL</a> <i><tt>c-type</tt></i>)</tt>, the
<i><tt>c-place</tt></i> may not be <tt>NULL</tt>.</dd>

<dt><a id="slot" name="slot" /><span class="term"><tt>(<a
href="#slot"><tt>FFI:SLOT</tt></a> <i><tt>c-place</tt></i>
<i><tt>slot-name</tt></i>)</tt></span></dt>

<dd>Struct or union component: If <i><tt>c-place</tt></i> is of foreign
type <tt>(<a href="#c-struct">FFI:C-STRUCT</a> <i><tt>class</tt></i> ...
(<i><tt>slot-name</tt></i> <i><tt>c-type</tt></i>) ...)</tt> or of type
<tt>(<a href="#c-union">FFI:C-UNION</a> ... (<i><tt>slot-name</tt></i>
<i><tt>c-type</tt></i>) ...)</tt>, this will be of type
<i><tt>c-type</tt></i>.</dd>

<dt><a id="cast" name="cast" /><span class="term"><tt>(<a
href="#cast"><tt>FFI:CAST</tt></a> <i><tt>c-place</tt></i>
<i><tt>c-type</tt></i>)</tt></span></dt>

<dd>Type change: A place denoting the same memory locations as the
original <i><tt>c-place</tt></i>, but of type <i><tt>c-type</tt></i>.</dd>

<dt><a id="typeof" name="typeof" /><span class="term"><tt>(<a
href="#typeof"><tt>FFI:TYPEOF</tt></a>
<i><tt>c-place</tt></i>)</tt></span></dt>

<dd>returns the <i><tt>c-type</tt></i> corresponding to the
<i><tt>c-place</tt></i>.</dd>

<dt><a id="sizeof" name="sizeof" /><span class="term"><tt>(<a
href="#sizeof"><tt>FFI:SIZEOF</tt></a> <i><tt>c-type</tt></i>)</tt>,
<tt>(<a href="#sizeof"><tt>FFI:SIZEOF</tt></a>
<i><tt>c-place</tt></i>)</tt></span></dt>

<dd>
<p>The first form returns the size and alignment of a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type <i><tt>c-type</tt></i>, measured in
bytes.</p>

<p>The second form returns the size and alignment of the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type of <i><tt>c-place</tt></i>, measured in
bytes.</p>
</dd>

<dt><a id="bitsizeof" name="bitsizeof" /><span class="term"><tt>(<a
href="#bitsizeof"><tt>FFI:BITSIZEOF</tt></a> <i><tt>c-type</tt></i>)</tt>,
<tt>(<a href="#bitsizeof"><tt>FFI:BITSIZEOF</tt></a>
<i><tt>c-place</tt></i>)</tt></span></dt>

<dd>
<p>The first form returns the size and alignment of the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type <i><tt>c-type</tt></i>, measured in
bits.</p>

<p>The second form returns the size and alignment of the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type of <i><tt>c-place</tt></i>, measured in
bits.</p>
</dd>

<dt><a id="validp" name="validp" /><span class="term"><tt>(<a
href="#validp"><tt>FFI:VALIDP</tt></a>
<i><tt>foreign-entity</tt></i>)</tt></span></dt>

<dd>This predicate returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> if the <i><tt>foreign-entity</tt></i> (e.g.
the Lisp equivalent of a <tt>c-pointer</tt>) refers to a pointer which is
invalid because it comes from a previous Lisp session. It returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if <i><tt>foreign-entity</tt></i> can be used
within the current Lisp process.</dd>
</dl>
</div>
</div>

<div class="section"><a id="dffi-types" name="dffi-types" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-types" name="dffi-types" />(Foreign) <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types</h3>
</div>
</div>

<p>Foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types are used in the <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>.
They are <span class="emphasis"><i>not</i></span> regular <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> types or
<b>CLOS</b> classes.</p>

<p>A <i><tt>c-type</tt></i> is either a predefined <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> type or the name of a type defined by <a
href="#def-c-type"><tt>FFI:DEF-C-TYPE</tt></a>.</p>

<div class="variablelist">
<p><b>the predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types (<i><tt>c-type</tt></i>)</b></p>

<dl>
<dt><a id="simple-c-type" name="simple-c-type" /><span
class="term"><i><tt>simple-c-type</tt></i></span></dt>

<dd>
<div class="table">
<p><a id="d0e35042" name="d0e35042" /><b>Table 32.4. the simple <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types</b></p>

<table summary="the simple C types" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th>Lisp name</th>
<th>Lisp equivalent</th>
<th><a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> equivalent</th>
<th>ILU equivalent</th>
<th>Comment</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td>void</td>
<td>&nbsp;</td>
<td>as a result type only</td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
target="_top"><tt>BOOLEAN</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
target="_top"><tt>BOOLEAN</tt></a></td>
<td>int</td>
<td>BOOLEAN</td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
target="_top"><tt>CHARACTER</tt></a></td>
<td>char</td>
<td>SHORT CHARACTER</td>
</tr>

<tr>
<td>char</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>signed char</td>
</tr>

<tr>
<td>uchar</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>unsigned char</td>
</tr>

<tr>
<td>short</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>short</td>
</tr>

<tr>
<td>ushort</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>unsigned short</td>
</tr>

<tr>
<td>int</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>int</td>
</tr>

<tr>
<td>uint</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>unsigned int</td>
</tr>

<tr>
<td>long</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>long</td>
</tr>

<tr>
<td>ulong</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a></td>
<td>unsigned long</td>
</tr>

<tr>
<td>uint8</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt></td>
<td>uint8</td>
<td>BYTE</td>
</tr>

<tr>
<td>sint8</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt></td>
<td>sint8</td>
</tr>

<tr>
<td>uint16</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 16)</tt></td>
<td>uint16</td>
<td>SHORT CARDINAL</td>
</tr>

<tr>
<td>sint16</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 16)</tt></td>
<td>sint16</td>
<td>SHORT INTEGER</td>
</tr>

<tr>
<td>uint32</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 32)</tt></td>
<td>uint32</td>
<td>CARDINAL</td>
</tr>

<tr>
<td>sint32</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 32)</tt></td>
<td>sint32</td>
<td>INTEGER</td>
</tr>

<tr>
<td>uint64</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 64)</tt></td>
<td>uint64</td>
<td>LONG CARDINAL</td>
<td>does not work on all platforms</td>
</tr>

<tr>
<td>sint64</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 64)</tt></td>
<td>sint64</td>
<td>LONG INTEGER</td>
<td>does not work on all platforms</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>SINGLE-FLOAT</tt></a></td>
<td>float</td>
</tr>

<tr>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a></td>
<td><a
href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
target="_top"><tt>DOUBLE-FLOAT</tt></a></td>
<td>double</td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="c-pointer" name="c-pointer" /><span class="term"><a
href="#c-pointer">FFI:C-POINTER</a></span></dt>

<dd>This type corresponds to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls void*, an opaque pointer.</dd>

<dt><a id="c-string" name="c-string" /><span class="term"><a
href="#c-string">FFI:C-STRING</a></span></dt>

<dd>This type corresponds to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls char*, a zero-terminated string. Its Lisp
equivalent is a string, without the trailing zero character.</dd>

<dt><a id="c-struct" name="c-struct" /><span class="term"><tt>(<a
href="#c-struct">FFI:C-STRUCT</a> <i><tt>class</tt></i>
(<i><tt>ident<sub>1</sub></tt></i> <i><tt>c-type<sub>1</sub></tt></i>) ...
(<i><tt>ident<sub>n</sub></tt></i>
<i><tt>c-type<sub>n</sub></tt></i>))</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls struct {
<i><tt>c-type<sub>1</sub></tt></i> <i><tt>ident<sub>1</sub></tt></i>; ...;
<i><tt>c-type<sub>n</sub></tt></i> <i><tt>ident<sub>n</sub></tt></i>; }.
Its Lisp equivalent is: if <i><tt>class</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a>, a <a
href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
target="_top"><tt>SIMPLE-VECTOR</tt></a>; if <i><tt>class</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
target="_top"><tt>LIST</tt></a>, a list; if <i><tt>class</tt></i> is a
symbol naming a structure or <b>CLOS</b> class, an instance of this class,
with slots of names <i><tt>ident<sub>1</sub></tt></i>, ...
,<i><tt>ident<sub>n</sub></tt></i>.</dd>

<dt><a id="c-union" name="c-union" /><span class="term"><tt>(<a
href="#c-union">FFI:C-UNION</a> (<i><tt>ident<sub>1</sub></tt></i>
<i><tt>c-type<sub>1</sub></tt></i>) ... (<i><tt>ident<sub>n</sub></tt></i>
<i><tt>c-type<sub>n</sub></tt></i>))</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls union {
<i><tt>c-type<sub>1</sub></tt></i> <i><tt>ident<sub>1</sub></tt></i>; ...;
<i><tt>c-type<sub>n</sub></tt></i> <i><tt>ident<sub>n</sub></tt></i>; }.
Conversion to and from Lisp assumes that a value is to be viewed as being
of <i><tt>c-type<sub>1</sub></tt></i>.</dd>

<dt><a id="c-array" name="c-array" /><span class="term"><tt>(<a
href="#c-array">FFI:C-ARRAY</a> <i><tt>c-type</tt></i>
<i><tt>dim<sub>1</sub></tt></i> ...
<i><tt>dim<sub>n</sub></tt></i>)</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls <i><tt>c-type</tt></i>
[<i><tt>dim<sub>1</sub></tt></i>] ... [<i><tt>dim<sub>n</sub></tt></i>].
Note that when an array is passed as an argument to a function in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>, it is actually passed as a pointer; you
therefore have to write <tt>(<a href="#c-ptr">FFI:C-PTR</a> (<a
href="#c-array">FFI:C-ARRAY</a> ...))</tt> for this argument's type.</dd>

<dt><a id="c-array-max" name="c-array-max" /><span class="term"><tt>(<a
href="#c-array-max">FFI:C-ARRAY-MAX</a> <i><tt>c-type</tt></i>
<i><tt>maxdimension</tt></i>)</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls <i><tt>c-type</tt></i>
[<i><tt>maxdimension</tt></i>], an array containing up to
<i><tt>maxdimension</tt></i> elements. The array is zero-terminated if it
contains less than <i><tt>maxdimension</tt></i> elements. Conversion from
Lisp of an array with more than <i><tt>maxdimension</tt></i> elements
silently ignores the superfluous elements.</dd>

<dt><a id="c-function" name="c-function" /><span class="term"><tt>(<a
href="#c-function">FFI:C-FUNCTION</a> (</tt>:arguments</span>
{(<i><tt>arg-name</tt></i> <i><tt>a-c-type</tt></i> [<a
href="#param-mode"><i><tt>PARAM-MODE</tt></i></a> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>]])}*)
(<tt>:return-type</tt> <i><tt>r-c-type</tt></i> [<a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>])
(<a href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a>
<i><tt>language</tt></i>))</dt>

<dd>This type designates a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function that can be called according to the
given prototype <tt>(<i><tt>r-c-type</tt></i> (*)
(<i><tt>a-c-type<sub>1</sub></tt></i>, ...))</tt>. Conversion between <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> functions and Lisp functions is
transparent.</dd>

<dt><a id="c-ptr" name="c-ptr" /><span class="term"><tt>(<a
href="#c-ptr">FFI:C-PTR</a> <i><tt>c-type</tt></i>)</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls <i><tt>c-type</tt></i> *: a pointer to a
single item of the given <i><tt>c-type</tt></i>.</dd>

<dt><a id="c-ptr-null" name="c-ptr-null" /><span class="term"><tt>(<a
href="#c-ptr-null">FFI:C-PTR-NULL</a>
<i><tt>c-type</tt></i>)</tt></span></dt>

<dd>This type is also equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls <i><tt>c-type</tt></i> *: a pointer to a
single item of the given <i><tt>c-type</tt></i>, with the exception that
<a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> <tt>NULL</tt> corresponds to Lisp <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="c-array-ptr" name="c-array-ptr" /><span class="term"><tt>(<a
href="#c-array-ptr">FFI:C-ARRAY-PTR</a>
<i><tt>c-type</tt></i>)</tt></span></dt>

<dd>This type is equivalent to what <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> calls <i><tt>c-type</tt></i> (*)[]: a pointer
to a zero-terminated array of items of the given
<i><tt>c-type</tt></i>.</dd>
</dl>
</div>
</div>

<div class="section"><a id="c-flavor" name="c-flavor" />
<div class="titlepage">
<div>
<h3 class="title"><a id="c-flavor" name="c-flavor" />The choice of the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> flavor.</h3>
</div>
</div>

<p><a href="#c-function">FFI:C-FUNCTION</a>, <a
href="#def-call-in"><tt>FFI:DEF-CALL-IN</tt></a>, <a
href="#def-call-out"><tt>FFI:DEF-CALL-OUT</tt></a> take <a
href="#c-flavor"
title="The choice of the C flavor."><tt>:LANGUAGE</tt></a> argument. The
<i><tt>language</tt></i> is either <tt>:C</tt> (denotes K&amp;R <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>) or <tt>:STDC</tt> (denotes ANSI <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>) or <tt>:STDC-STDCALL</tt> (denotes ANSI <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> with <span
class="emphasis"><i>stdcall</i></span> calling convention). It specifies
whether the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function (caller or callee) has been compiled
by a K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler or by an ANSI <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler, and possibly the calling
convention.</p>
</div>

<div class="section"><a id="dffi-variables" name="dffi-variables" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-variables" name="dffi-variables" />Foreign
variables</h3>
</div>
</div>

<p>Foreign variables are variables whose storage is allocated in the
foreign language module. They can nevertheless be evaluated and modified
through <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a>, just as normal variables can, except that
the range of allowed values is limited according to the variable's foreign
type. Note that for a foreign variable <i><tt>x</tt></i> the form <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
target="_top"><tt>EQL</tt></a> <i><tt>x</tt></i> <i><tt>x</tt></i>)</tt>
is not necessarily true, since every time <i><tt>x</tt></i> is evaluated
its foreign value is converted to a freshly created Lisp value. Foreign
variables are defined using <a
href="#def-c-var"><tt>FFI:DEF-C-VAR</tt></a>.</p>
</div>

<div class="section"><a id="dffi-places" name="dffi-places" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-places" name="dffi-places" />Operations on
foreign places</h3>
</div>
</div>

<p>A foreign variable <i><tt>name</tt></i> defined by <a
href="#def-c-var"><tt>FFI:DEF-C-VAR</tt></a> defines a "place", i.e., a
form which can also be used as argument to <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>. (An "lvalue" in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> terminology.) The following operations are
available on foreign places: <a href="#element"><tt>FFI:ELEMENT</tt></a>,
<a href="#deref"><tt>FFI:DEREF</tt></a>, <a
href="#slot"><tt>FFI:SLOT</tt></a>, <a href="#cast"><tt>FFI:CAST</tt></a>,
<a href="#typeof"><tt>FFI:TYPEOF</tt></a>, <a
href="#sizeof"><tt>FFI:SIZEOF</tt></a>, <a
href="#bitsizeof"><tt>FFI:BITSIZEOF</tt></a>.</p>
</div>

<div class="section"><a id="dffi-functions" name="dffi-functions" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-functions" name="dffi-functions" />Foreign
functions</h3>
</div>
</div>

<p>Foreign functions are functions which are defined in the foreign
language. There are <span class="emphasis"><i>named foreign
functions</i></span> (imported via <a
href="#def-call-out"><tt>FFI:DEF-CALL-OUT</tt></a> or created via <a
href="#def-call-in"><tt>FFI:DEF-CALL-IN</tt></a>) and <span
class="emphasis"><i>anonymous foreign functions</i></span>; they arise
through conversion of function pointers.</p>

<p>A <span class="emphasis"><i>"call-out"</i></span> function is a foreign
function called from Lisp: control flow temporarily leaves Lisp. A <span
class="emphasis"><i>"call-in"</i></span> function is a Lisp function
called from the foreign language: control flow temporary enters Lisp.</p>

<p>The following forms define foreign functions: <a
href="#def-call-in"><tt>FFI:DEF-CALL-IN</tt></a>, <a
href="#def-call-out"><tt>FFI:DEF-CALL-OUT</tt></a>, <a
href="#def-c-call-in"><tt>FFI:DEF-C-CALL-IN</tt></a>, <a
href="#def-c-call-out"><tt>FFI:DEF-C-CALL-OUT</tt></a>.</p>
</div>

<div class="section"><a id="allocation" name="allocation" />
<div class="titlepage">
<div>
<h3 class="title"><a id="allocation" name="allocation" />Argument and
result passing conventions</h3>
</div>
</div>

<p>When passed to and from functions, allocation of arguments and results
is handled as follows:</p>

<p>Values of <a href="#simple-c-type"><i><tt>SIMPLE-C-TYPE</tt></i></a>,
<a href="#c-pointer">FFI:C-POINTER</a> are passed on the stack, with
dynamic extent. The <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is effectively ignored.</p>

<p>Values of type <a href="#c-string">FFI:C-STRING</a>, <a
href="#c-ptr">FFI:C-PTR</a>, <a href="#c-ptr-null">FFI:C-PTR-NULL</a>, <a
href="#c-array-ptr">FFI:C-ARRAY-PTR</a> need storage. The <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
specifies the allocation policy:</p>

<div class="table">
<p><a id="d0e36026" name="d0e36026" /><b>Table 32.5. allocation
policy</b></p>

<table summary="allocation policy" border="1">
<colgroup>
<col />
<col /></colgroup>

<thead>
<tr>
<th><a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a></th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt>:NONE</tt></td>
<td>no storage is allocated.</td>
</tr>

<tr>
<td><tt>:ALLOCA</tt></td>
<td>allocation of storage on the stack, which has dynamic extent.</td>
</tr>

<tr>
<td><tt>:MALLOC-FREE</tt></td>
<td>storage will be allocated via <tt>malloc()</tt> and freed via
<tt>free()</tt>.</td>
</tr>
</tbody>
</table>
</div>

<p>If no <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is specified, the default <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:NONE</tt> for most types, but <tt>:ALLOCA</tt> for <a
href="#c-string">FFI:C-STRING</a> and <a href="#c-ptr">FFI:C-PTR</a> and
<a href="#c-ptr-null">FFI:C-PTR-NULL</a> and <a
href="#c-array-ptr">FFI:C-ARRAY-PTR</a> and for <tt>:OUT</tt> arguments.
[Subject to change!] The <tt>:MALLOC-FREE</tt> policy provides the ability
to pass arbitrarily nested structs containing pointers pointing to structs
... within a single conversion.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e36102" name="d0e36102" /><span class="term">For call-out
functions:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36107" name="d0e36107" /><span class="term">For arguments
passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36116" name="d0e36116" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:MALLOC-FREE</tt>:</span></dt>

<dd>Lisp allocates the storage using <tt>malloc()</tt> and never
deallocates it. The <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function is supposed to call <tt>free()</tt>
when done with it.</dd>

<dt><a id="d0e36139" name="d0e36139" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:ALLOCA</tt>:</span></dt>

<dd>Lisp allocates the storage on the stack, with dynamic extent. It is
freed when the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function returns.</dd>

<dt><a id="d0e36156" name="d0e36156" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:NONE</tt>:</span></dt>

<dd>Lisp assumes that the pointer already points to a valid area of the
proper size and puts the result value there. This is dangerous! and
deprecated.</dd>
</dl>
</div>
</dd>

<dt><a id="d0e36169" name="d0e36169" /><span class="term">For results
passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> to Lisp:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36178" name="d0e36178" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:MALLOC-FREE</tt>:</span></dt>

<dd>Lisp calls <tt>free()</tt> on it when done.</dd>

<dt><a id="d0e36194" name="d0e36194" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:NONE</tt>:</span></dt>

<dd>Lisp does nothing.</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>

<dt><a id="d0e36207" name="d0e36207" /><span class="term">For call-in
functions:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36212" name="d0e36212" /><span class="term">For arguments
passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> to Lisp:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36221" name="d0e36221" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:MALLOC-FREE</tt>:</span></dt>

<dd>Lisp calls <tt>free()</tt> on it when done.</dd>

<dt><a id="d0e36237" name="d0e36237" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:ALLOCA</tt> or <tt>:NONE</tt>:</span></dt>

<dd>Lisp does nothing.</dd>
</dl>
</div>
</dd>

<dt><a id="d0e36253" name="d0e36253" /><span class="term">For results
passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>:</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e36262" name="d0e36262" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:MALLOC-FREE</tt>:</span></dt>

<dd>Lisp allocates the storage using <tt>malloc()</tt> and never
deallocates it. The <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> function is supposed to call <tt>free()</tt>
when done with it.</dd>

<dt><a id="d0e36285" name="d0e36285" /><span class="term">If <a
href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
is <tt>:NONE</tt>:</span></dt>

<dd>Lisp assumes that the pointer already points to a valid area of the
proper size and puts the result value there. This is dangerous! and
deprecated.</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>

<p><a id="param-mode" name="param-mode" />A function parameter's <a
href="#param-mode"><i><tt>PARAM-MODE</tt></i></a> may be</p>

<div class="variablelist">
<dl>
<dt><a id="d0e36305" name="d0e36305" /><span class="term"><tt>:IN</tt>
(means: read-only):</span></dt>

<dd>The caller passes information to the callee.</dd>

<dt><a id="d0e36313" name="d0e36313" /><span class="term"><tt>:OUT</tt>
(means: write-only):</span></dt>

<dd>The callee passes information back to the caller on return. When
viewed as a Lisp function, there is no Lisp argument corresponding to
this, instead it means an additional return value.</dd>

<dt><a id="d0e36321" name="d0e36321" /><span class="term"><tt>:IN-OUT</tt>
(means: read-write):</span></dt>

<dd>Information is passed from the caller to the callee and then back to
the caller. When viewed as a Lisp function, the <tt>:OUT</tt> value is
returned as an additional multiple value.</dd>
</dl>
</div>

<p>The default is <tt>:IN</tt>.</p>

<p>[Currently, only <tt>:IN</tt> is fully implemented. <tt>:OUT</tt> works
only with <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
= <tt>:ALLOCA</tt>.]</p>

<div class="variablelist">
<dl>
<dt><a id="d0e36353" name="d0e36353" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>
<p><a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
may not be <tt>:MALLOC-FREE</tt> because there is no commonly used
<tt>malloc()</tt>/<tt>free()</tt> library function.</p>

<p>The <a href="#allocation"
title="Argument and result passing conventions"><i><tt>ALLOCATION</tt></i></a>
may be followed by a register specification, any of the symbols
<tt>:d0</tt>, <tt>:d1</tt>, <tt>:d2</tt>, <tt>:d3</tt>, <tt>:d4</tt>,
<tt>:d5</tt>, <tt>:d6</tt>, <tt>:d7</tt>, <tt>:a0</tt>, <tt>:a1</tt>,
<tt>:a2</tt>, <tt>:a3</tt>, <tt>:a4</tt>, <tt>:a5</tt>, <tt>:a6</tt>, each
representing one 680x0 register. This works only for integral types:
integers, pointers, <a href="#c-string">FFI:C-STRING</a>, <a
href="#c-function">FFI:C-FUNCTION</a>.</p>
</dd>
</dl>
</div>

<p>Passing <a href="#c-struct">FFI:C-STRUCT</a>, <a
href="#c-union">FFI:C-UNION</a>, <a href="#c-array">FFI:C-ARRAY</a>, <a
href="#c-array-max">FFI:C-ARRAY-MAX</a> values as arguments (not via
pointers) is only possible to the extent the <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler supports it. Most <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compilers do it right, but some <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compilers (such as gcc on hppa) have problems
with this.</p>

<p>See also <a
href="#foreign-enc"><tt>CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p>
</div>

<div class="section"><a id="dffi-examples" name="dffi-examples" />
<div class="titlepage">
<div>
<h3 class="title"><a id="dffi-examples"
name="dffi-examples" />Examples</h3>
</div>
</div>

<div class="example">
<p><a id="d0e36475" name="d0e36475" /><b>Example 32.3. Simple declarations
and access</b></p>

<p>The <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> declaration</p>

<pre class="programlisting">
struct foo {
    int a;
    struct foo * b[100];
};
</pre>

corresponds to 

<pre class="programlisting">
(def-c-struct foo
  (a int)
  (b (c-array (c-ptr foo) 100)))
</pre>


<br />
<br />
<p>The element access</p>

<pre class="programlisting">
struct foo f;
f.b[7].a
</pre>

corresponds to 

<pre class="programlisting">
(declare (type foo f))
(foo-a (aref (foo-b f) 7)) or (slot-value (aref (slot-value f 'b) 7) 'a)
</pre>


<br />
<br />
</div>

<div class="example">
<p><a id="d0e36496" name="d0e36496" /><b>Example 32.4. external <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> variable and some accesses</b></p>

<pre class="programlisting">
struct bar {
    short x, y;
    char a, b;
    int z;
    struct bar * n;
};

extern struct bar * my_struct;

my_struct-&gt;x++;
my_struct-&gt;a = 5;
my_struct = my_struct-&gt;n;
</pre>

corresponds to 

<pre class="programlisting">
(def-c-struct bar
  (x short)
  (y short)
  (a char)
  (b char) ; or (b character) if it represents a character, not a number
  (z int)
  (n (c-ptr bar)))

(def-c-var my_struct (:type (c-ptr bar)))

(setq my_struct (let ((s my_struct)) (incf (slot-value s 'x)) s))
or (incf (slot my_struct 'x))
(setq my_struct (let ((s my_struct)) (setf (slot-value s 'a) 5) s))
or (setf (slot my_struct 'a) 5)
(setq my_struct (slot-value my_struct 'n))
or (setq my_struct (deref (slot my_struct 'n)))
</pre>


<br />
<br />
</div>

<div class="example">
<p><a id="d0e36509" name="d0e36509" /><b>Example 32.5. Calling an external
function</b></p>

<p>On ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> systems, <tt>stdlib.h</tt> contains the
declarations:</p>

<pre class="programlisting">
typedef struct {
  int quot;   /* Quotient */
  int rem;    /* Remainder */
} div_t;
extern div_t div (int numer, int denom);
</pre>

This translates to 

<pre class="programlisting">
(def-c-struct div_t
  (quot int)
  (rem int))
(def-c-call-out div (:arguments (numer int) (denom int))
                    (:return-type div_t))
</pre>

Sample call from within Lisp: 

<pre class="programlisting">
&gt; (div 20 3)
#S(DIV :QUOT 6 :REM 2)
</pre>


<br />
<br />
</div>

<div class="example">
<p><a id="d0e36529" name="d0e36529" /><b>Example 32.6. Another example for
calling an external function</b></p>

<p>Suppose the following is defined in a file <tt>cfun.c</tt>:</p>

<pre class="programlisting">
struct cfunr { int x; char *s; };
struct cfunr * cfun (int i,char *s,struct cfunr * r,int a[10]) {
  int j;
  struct cfunr * r2;
  printf("i = %d\n", i);
  printf("s = %s\n", s);
  printf("r-&gt;x = %d\n", r-&gt;x);
  printf("r-&gt;s = %s\n", r-&gt;s);
  for (j = 0; j &lt; 10; j++) printf("a[%d] = %d.\n", j, a[j]);
  r2 = (struct cfunr *) malloc (sizeof (struct cfunr));
  r2-&gt;x = i+5;
  r2-&gt;s = "A C string";
  return r2;
}
</pre>

It is possible to call this function from Lisp using the file
<tt>callcfun.lisp</tt> (do not call it <tt>cfun.lisp</tt> - <a
href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
target="_top"><tt>COMPILE-FILE</tt></a> would overwrite <tt>cfun.c</tt>)
whose contents is: 

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "TEST-C-CALL" (:use "LISP" "FFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "TEST-C-CALL")
(def-c-struct cfunr (x int) (s c-string))
(def-c-call-out cfun (:arguments (i int)
                                 (s c-string)
                                 (r (c-ptr cfunr) :in :alloca)
                                 (a (c-ptr (c-array int 10)) :in :alloca))
                     (:return-type (c-ptr cfunr)))
(defun call-cfun ()
  (cfun 5 "A Lisp string" (make-cfunr :x 10 :s "Another Lisp string")
        '#(0 1 2 3 4 5 6 7 8 9)))
</pre>

Use the module facility: 

<pre class="programlisting">
$ clisp-link create-module-set cfun callcfun.c
$ cc -O -c cfun.c
$ cd cfun
$ ln -s ../cfun.o cfun.o
Add cfun.o to NEW_LIBS and NEW_FILES in link.sh.
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c callcfun.lisp
$ clisp-link add-module-set cfun base base+cfun
$ base+cfun/lisp.run -M base+cfun/lispinit.mem -i callcfun
&gt; (test-c-call::call-cfun)
i = 5
s = A Lisp string
r-&gt;x = 10
r-&gt;s = Another Lisp string
a[0] = 0.
a[1] = 1.
a[2] = 2.
a[3] = 3.
a[4] = 4.
a[5] = 5.
a[6] = 6.
a[7] = 7.
a[8] = 8.
a[9] = 9.
#S(TEST-C-CALL::CFUNR :X 10 :S "A C string")
&gt;
$ rm -r base+cfun
</pre>


<br />
<br />
<p>Note that there is a memory leak here: The return value <tt>r2</tt> of
<tt>cfun()</tt> is <tt>malloc()</tt>ed but never <tt>free()</tt>d.
Specifying</p>

<pre class="programlisting">
(:return-type (c-ptr cfunr) :malloc-free)
</pre>

is not an alternative because this would also <tt>free(r2-&gt;x)</tt> but
<tt>r2-&gt;x</tt> is a pointer to static data.
<br />
<br />
</div>

<div class="example">
<p><a id="d0e36589" name="d0e36589" /><b>Example 32.7. call-in</b></p>

<p>To sort an array of double-floats using the Lisp function <tt>sort</tt>
instead of the <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> library function <tt>qsort()</tt>, one can use
the following interface code <tt>sort1.c</tt>. The main problem is to pass
a variable-sized array.</p>

<pre class="programlisting">
extern void lispsort_begin (int);
void* lispsort_function;
void lispsort_double (int n, double * array) {
    double * sorted_array;
    int i;
    lispsort_begin(n); /* store #'sort2 in lispsort_function */
    sorted_array = ((double * (*) (double *)) lispsort_function) (array);
    for (i = 0; i &lt; n; i++) array[i] = sorted_array[i];
    free(sorted_array);
}
</pre>

This is accompanied by <tt>sort2.lisp</tt>: 

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "FFI-TEST" (:use "LISP" "FFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "FFI-TEST")
(def-call-in lispsort_begin (:arguments (n int))
                            (:return-type nil)
                            (:language :stdc))
(def-c-var lispsort_function (:type c-pointer))
(defun lispsort_begin (n)
  (setf (cast lispsort_function
              `(c-function
                 (:arguments (v (c-ptr (c-array double-float ,n))))
                 (:return-type (c-ptr (c-array double-float ,n))
                               :malloc-free)))
        #'sort2))
(defun sort2 (v)
  (declare (type vector v))
  (sort v #'&lt;))
</pre>

To test this, use the following test file <tt>sorttest.lisp</tt>: 

<pre class="programlisting">
(def-call-out sort10
              (:name "lispsort_double")
              (:language :stdc)
              (:arguments (n int)
                          (array (c-ptr (c-array double-float 10))
                                 :in-out)))
</pre>

Now try 

<pre class="programlisting">
$ clisp-link create-module-set sort sort2.c sorttest.c
$ cc -O -c sort1.c
$ cd sort
$ ln -s ../sort1.o sort1.o
Add sort1.o to NEW_LIBS and NEW_FILES in link.sh.
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c sort2.lisp sorttest.lisp
$ clisp-link add-module-set sort base base+sort
$ base+sort/lisp.run -M base+sort/lispinit.mem -i sort2 sorttest
&gt; (sort10 10 '#(0.501d0 0.528d0 0.615d0 0.550d0 0.711d0
                0.523d0 0.585d0 0.670d0 0.271d0 0.063d0))
#(0.063d0 0.271d0 0.501d0 0.523d0 0.528d0 0.55d0 0.585d0 0.615d0 0.67d0 0.711d0)
$ rm -r base+sort
</pre>


<br />
<br />
</div>
</div>
</div>

<div class="section"><a id="affi" name="affi" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="affi"
name="affi" />Extensions-2.4. The Amiga Foreign Function Call
Facility</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a> platforms
only.</h2>
</div>
</div>

<p><b>Another Foreign Function Interface.&nbsp;</b> All symbols relating
to the simple foreign function interface are exported from the package <a
href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>.
To use them, <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
target="_top"><tt>USE-PACKAGE</tt></a> "AFFI")</tt>.</p>

<div class="section"><a id="affi-design" name="affi-design" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-design" name="affi-design" />Design
issues</h3>
</div>
</div>

<p><a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
was designed to be small in size but powerful enough to use most library
functions. Lisp files may be compiled to <tt>fas</tt> files without the
need to load function definition files at run-time and without external <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> or linker support. <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>s can be created,
provided that the function libraries are opened at run-time.</p>

<p>Therefore, <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
supports only primitive <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types (integers 8, 16 and 32 bits wide, signed
or unsigned, pointers) and defines no new types or classes. Foreign
functions are not first-class objects (you can define a lambda yourself),
name spaces are separate.</p>

<p>The <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
does no tracking of resources. Use <a href="#final"
title="Extensions-1.7. Finalization"><tt>EXT:FINALIZE</tt></a>.</p>
</div>

<div class="section"><a id="affi-overview" name="affi-overview" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-overview"
name="affi-overview" />Overview</h3>
</div>
</div>

<p>These are the <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
forms:</p>

<p><tt>(declare-library-base <i><tt>keyword-base</tt></i>
<i><tt>library-name</tt></i>)</tt></p>

<p><tt>(require-library-functions <i><tt>library-name</tt></i> [(:import
{<i><tt>string-name</tt></i>}*)])</tt></p>

<p><tt>(open-library <i><tt>base-symbol</tt></i>)</tt></p>

<p><tt>(clos-library <i><tt>base-symbol</tt></i>)</tt></p>

<p><tt>(with-open-library (<i><tt>base-symbol</tt></i> |
<i><tt>library-name</tt></i>) {<i><tt>form</tt></i>}*)</tt></p>

<p><tt>(defflibfun <i><tt>function-name</tt></i>
<i><tt>base-symbol</tt></i> <i><tt>offset</tt></i> <i><tt>mask</tt></i>
<i><tt>result-type</tt></i> {<i><tt>argument-type</tt></i>}*)</tt></p>

<p><tt>(declare-library-function <i><tt>function-name</tt></i>
<i><tt>library-name</tt></i> {<i><tt>option</tt></i>}*)</tt></p>

<p><tt>(flibcall <i><tt>function-name</tt></i>
{<i><tt>argument</tt></i>}*)</tt></p>

<p><tt>(mlibcall <i><tt>function-name</tt></i>
{<i><tt>argument</tt></i>}*)</tt></p>

<p><tt>(mem-read <i><tt>address</tt></i> <i><tt>result-type</tt></i>
[<i><tt>offset</tt></i>])</tt></p>

<p><tt>(mem-write <i><tt>address</tt></i> <i><tt>type</tt></i>
<i><tt>value</tt></i> [<i><tt>offset</tt></i>])</tt></p>

<p><tt>(mem-write-vector <i><tt>address</tt></i> <i><tt>vector</tt></i>
[<i><tt>offset</tt></i>])</tt></p>

<p><tt>(nzero-pointer-p <i><tt>value</tt></i>)</tt></p>

<p>Except for <tt>with-open-library</tt>,
<tt>declare-library-function</tt> and <tt>mlibcall</tt>, all of the above
are functions.</p>

<p>A library contains a collection of functions. The library is referred
to by a symbol referred as library-base at the <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
level. This symbol is created in the package &ldquo;<a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&lsquo;AFFI&rsquo;</a>&rdquo;.
The link between this symbol and the OS-level library name is established
by <tt>declare-library-base</tt>. To avoid multiple package conflicts,
this and only this function requires the symbol-name to be in the <a
href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html"
target="_top">&ldquo;KEYWORD&rdquo;</a> package. The function returns the
library-base.</p>

<p>A library may be opened by <tt>open-library</tt> and closed by
<tt>close-library</tt>. An opened library must be closed.
<tt>with-open-library</tt> is provided to automatically close the library
for you, thus it is much safer to use.</p>

<p>A function is contained in a library. Every function is referred to by
a symbol. A function is defined through <tt>defflibfun</tt> or
<tt>declare-library-function</tt> by giving the function name, the
library-base, an offset into the library, a mask (or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>) for register-based library calls, the
result type and all parameter-types. <tt>require-library-functions</tt>
loads the complete set of functions defined in a library file. Symbols are
created in the package &ldquo;<a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&lsquo;AFFI&rsquo;</a>&rdquo;
and imported into the current package.</p>

<p><tt>flibcall</tt> and <tt>mlibcall</tt> call library functions.
<tt>mlibcall</tt> is a macro that does a few checks at macroexpansion time
and allows the compiler to inline the call, not requiring the foreign
function to be defined again at load or execution time. The use of this
macro is advertised wherever possible.</p>

<p><tt>mem-read</tt> reads an arbitrary address (with offset for structure
references) and returns the given type.</p>

<p><tt>mem-write</tt> writes an arbitrary address.
<tt>mem-write-vector</tt> copies the content of a Lisp <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt> into memory.</p>

<p><tt>nzero-pointer-p</tt> tests for non-<tt>NULL</tt> pointers in all
recognized representations (<a
href="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
target="_top"><tt>NULL</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> and
<tt>FFI:FOREIGN-POINTER</tt>).</p>
</div>

<div class="section"><a id="affi-libs" name="affi-libs" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-libs" name="affi-libs" />Foreign
Libraries</h3>
</div>
</div>

<p><tt>declare-library-base</tt> ought to be wrapped in an <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
target="_top"><tt>EVAL-WHEN</tt></a> (compile eval load) ...)</tt> form
and come before any function is referenced, because the library base
symbol must be known.</p>

<p><tt>open-library</tt> tries to open the library referenced by the base
symbol. Therefore it must have been preceded with
<tt>declare-library-base</tt>. The call returns <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> on failure. <tt>open-library</tt> calls
nest. Every successful call must be matched by <tt>close-library</tt>.
<tt>with-open-library</tt> does this for you and also allows you to
specify the library by name, provided that its base has been declared. It
is recommended to use this macro and to reference the library by name.</p>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> will not
close libraries for you at program exit. [A previous version did so but
now <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
is a module and there are no module exit functions.] Programmers, watch
<tt>AFFI::*LIBRARIES-ALIST*</tt>.</p>
</div>

<div class="section"><a id="affi-types" name="affi-types" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-types" name="affi-types" />(Foreign) <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types</h3>
</div>
</div>

<p>The following foreign <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types are used in <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>.
They are <span class="emphasis"><i>not</i></span> regular <a
href="http://www.lisp.org" target="_top"><b>Common Lisp</b></a> types or
<b>CLOS</b> classes.</p>

<div class="table">
<p><a id="d0e37031" name="d0e37031" /><b>Table 32.6. foreign <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> types used in <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a></b></p>

<table summary="foreign C types used in AFFI" border="1">
<colgroup>
<col />
<col />
<col />
<col />
<col /></colgroup>

<thead>
<tr>
<th><a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
name</th>
<th>Lisp equivalent</th>
<th><a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> equivalent</th>
<th>Comment</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></td>
<td>void</td>
<td>as a result type for functions only</td>
</tr>

<tr>
<td>4</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 32)</tt></td>
<td>unsigned long</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>2</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 16)</tt></td>
<td>unsigned short</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>1</td>
<td><tt>(<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8)</tt></td>
<td>unsigned char</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>-4</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 32)</tt></td>
<td>long</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>-2</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 16)</tt></td>
<td>short</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>-1</td>
<td><tt>(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
target="_top"><tt>SIGNED-BYTE</tt></a> 8)</tt></td>
<td>signed char</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>0</td>
<td><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
target="_top"><tt>BOOLEAN</tt></a></td>
<td>BOOL</td>
<td>as a result type for functions only</td>
</tr>

<tr>
<td>*</td>
<td>opaque</td>
<td>void*</td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:EXTERNAL</tt></td>
<td>opaque</td>
<td>void*</td>
<td>&nbsp;</td>
</tr>

<tr>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a></td>
<td>char*</td>
<td>&nbsp;</td>
</tr>

<tr>
<td><tt>:IO</tt></td>
<td><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a></td>
<td>char*</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>

<p>Objects of type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> are copied and passed
<tt>NULL</tt>-terminated on the execution stack. On return, a Lisp string
is allocated and filled from the address returned (unless <tt>NULL</tt>).
Functions with <tt>:IO</tt> parameters are passed the address of the Lisp
string or unsigned byte vector. These are not <tt>NULL</tt>-terminated!
This is useful for functions like like <tt>read()</tt> which do not need
an array at a constant address longer than the dynamic extent of the call
(it is dangerous to define callback functions with <tt>:IO</tt> (or <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a>) type parameters). Arguments of type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a> and <tt>FFI:FOREIGN-POINTER</tt> are
always acceptable where a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <tt>:IO</tt> type is specified.</p>

<p>See also <a
href="#foreign-enc"><tt>CUSTOM:*FOREIGN-ENCODING*</tt></a>.</p>

<p>To meet the design goals, predefined types and objects were used. As
such, pointers were represented as integers. Now that there is the
<tt>FFI:FOREIGN-POINTER</tt> type, both representations may be used on
input. The pointer type should be therefore considered as opaque. Use
<tt>nzero-pointer-p</tt> for <tt>NULL</tt> tests.</p>
</div>

<div class="section"><a id="affi-functions" name="affi-functions" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-functions" name="affi-functions" />Foreign
functions</h3>
</div>
</div>

<p>Foreign Functions are declared either through <tt>defflibfun</tt> or
<tt>declare-library-function</tt>. The former is closer to the low-level
implementation of the interface, the latter is closer to the other <a
href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>.</p>

<p><tt>defflibfun</tt> requires the library base symbol and register mask
to be specified, <tt>declare-library-function</tt> requires the library
name and computes the mask from the declaration of the arguments.</p>

<p>The value of mask is implementation-dependent. On the Amiga, it is an
integer whose hexadecimal value is the reverse of the function argument
register numbers, where d0 has number <tt>1</tt> and a6 number
<tt>#xF</tt>. A <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> mask is reserved for stack-based calls
(unimplemented).</p>

<p>The <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
type <tt>0</tt> is only acceptable as a function result type and yields
either <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>. The difference between <tt>*</tt> and
<tt>:EXTERNAL</tt> is the following: <tt>*</tt> uses integers,
<tt>:EXTERNAL</tt> uses <tt>FFI:FOREIGN-POINTER</tt> as function
result-type (except from <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> for a <tt>NULL</tt> pointer) and refuses
objects of type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt> as input. Thus
<tt>:EXTERNAL</tt> provides some security on the input and the ability to
use <a href="#final"
title="Extensions-1.7. Finalization"><tt>EXT:FINALIZE</tt></a> for
resource-tracking on the output side.</p>

<p><tt>(declare-library-function <i><tt>name</tt></i>
<i><tt>library-name</tt></i> {<i><tt>option</tt></i>}*)</tt></p>

<div class="variablelist">
<dl>
<dt><a id="d0e37399" name="d0e37399" /><span
class="term"><i><tt>option</tt></i> ::==</span></dt>

<dd>
<div class="table">
<p><a id="d0e37405" name="d0e37405" /><b>Table 32.7.</b></p>

<table summary="" border="1">
<colgroup>
<col />
<col />
<col /></colgroup>

<tbody>
<tr>
<td>&nbsp;</td>
<td><tt>(:offset <i><tt>library-offset</tt></i>)</tt></td>
</tr>

<tr>
<td>|</td>
<td><tt>(:arguments {(<i><tt>arg-name</tt></i> <i><tt><a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>-type</tt></i>
<i><tt>register</tt></i>)}*)</tt></td>
</tr>

<tr>
<td>|</td>
<td><tt>(:return-type <i><tt><a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>-type</tt></i>)</tt></td>
</tr>
</tbody>
</table>
</div>
</dd>

<dt><a id="d0e37447" name="d0e37447" /><span
class="term"><i><tt>register</tt></i> ::==</span></dt>

<dd><tt>:d0</tt> | <tt>:d1</tt> | ... | <tt>:d7</tt> | <tt>:a0</tt> | ...
| <tt>:a6</tt></dd>
</dl>
</div>

declares a named library function for further reference through
<tt>flibcall</tt> and <tt>mlibcall</tt>.
<br />
<br />
<p><tt>mlibcall</tt> should be the preferred way of calling foreign
functions (when they are known at compile-time) as macroexpansion-time
checks may be performed and the call can be sort of inlined.</p>
</div>

<div class="section"><a id="affi-memory-access"
name="affi-memory-access" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-memory-access"
name="affi-memory-access" />Memory access</h3>
</div>
</div>

<p><tt>(affi:mem-read <i><tt>address</tt></i> <i><tt>type</tt></i>
<i><tt>offset</tt></i>)</tt> can read 8, 16 and 32 bit signed or unsigned
integers (<a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
types -4, -2, -1, 1, 2, 4), a pointer (*), a <tt>NULL</tt>-terminated
string (string) or, if the type argument is of type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt>, it can fill this
vector. <tt>:EXTERNAL</tt> is not an acceptable type as no object can be
created by using <tt>affi:mem-read</tt>.</p>

<p><tt>(affi:mem-write <i><tt>address</tt></i> <i><tt>type</tt></i>
<i><tt>value</tt></i> [<i><tt>offset</tt></i>])</tt> writes integers (<a
href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
type -4, -2, -1, 1, 2 and 4) or pointer values (type *), but not vectors
to the specified memory address.</p>

<p><tt>(affi:mem-write-vector <i><tt>address</tt></i>
<i><tt>vector</tt></i> [<i><tt>offset</tt></i>])</tt> can write memory
from the given vector (of type <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or <tt>(<a
href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
target="_top"><tt>VECTOR</tt></a> (<a
href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
target="_top"><tt>UNSIGNED-BYTE</tt></a> 8))</tt>).</p>
</div>

<div class="section"><a id="affi-func-def" name="affi-func-def" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-func-def" name="affi-func-def" />Function
Definition Files</h3>
</div>
</div>

<p><tt>affi:require-library-functions</tt> will <a
href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
target="_top"><tt>REQUIRE</tt></a> a file of name derived from thelibrary
name and with type <tt>affi</tt>. It may be used to import all names into
the current package or only a given subset identified by string names,
using the <tt>:import</tt> keyword (recommended use). Some definition
files for standard Amiga libraries are provided. See <a
href="#affi-ex-1-predefined"
title="Example 32.8. Using a predefined library function file">example
1</a> below.</p>

<p>As <tt>affi:require-library-functions</tt> loads a global file which
you, the programmer, may have not defined, you may consider declaring
every function yourself to be certain what the return and argument types
are. See <a href="#affi-ex-4-sample"
title="Example 32.11. Some sample function definitions">example 4</a>
below.</p>

<p>The file <tt>read-fd.lisp</tt> defines the function
<tt>make-partial-fd-file</tt> with which the provided <tt>.affi</tt> files
have been prepared from the original Amiga FD files (located in the
directory <tt>FD:</tt>). They must still be edited as the function cannot
know whether a function accepts a <tt>*</tt>, <tt>:IO</tt>,
<tt>string</tt> or <tt>:EXTERNAL</tt> argument and because files in
<tt>FD:</tt> only contain a register specification, not the width of
integer arguments (<tt>-4</tt>, <tt>-2</tt>, <tt>-1</tt>, <tt>1</tt>,
<tt>2</tt>, or <tt>4</tt>).</p>
</div>

<div class="section"><a id="affi-hints" name="affi-hints" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-hints" name="affi-hints" />Hints</h3>
</div>
</div>

<p>By using appropriate <a
href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
target="_top"><tt>EVAL-WHEN</tt></a> forms for
<tt>affi:declare-library-base</tt> and
<tt>affi:require-library-functions</tt> and not using
<tt>affi:flibcall</tt>, it is possible to write code that only loads
library function definition files at compile-time. See <a
href="#affi-ex-1-predefined"
title="Example 32.8. Using a predefined library function file">example
1</a> below.</p>

<p>Do not rely on <a href="#final"
title="Extensions-1.7. Finalization"><tt>EXT:FINALIZE</tt></a> to free
resources for you, as <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> does not call finalizers when it exits, use
<a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
target="_top"><tt>UNWIND-PROTECT</tt></a>.</p>
</div>

<div class="section"><a id="affi-caveats" name="affi-caveats" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-caveats" name="affi-caveats" />Caveats</h3>
</div>
</div>

<p>You can consider the library bases being symbols in need of being
imported from the package <a href="#affi"
title="Extensions-2.4. The Amiga Foreign Function Call Facility">&ldquo;AFFI&rdquo;</a>
originating from a brain-damage, causing the usual symbol headaches when
using foreign functions calls within macros. Luckily, even if the
high-level interface (or its implementation in <tt>affi1.lisp</tt>) were
to change, the low-level part (<tt>affi.d</tt>) should remain untouched as
all it knows are <a
href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
target="_top"><tt>INTEGER</tt></a>s and <tt>FFI:FOREIGN-POINTER</tt>s, no
<a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
target="_top"><tt>SYMBOL</tt></a>s. The difficulty is just to get the
library base value at run-time. Feel free to suggest enhancements to this
facility!</p>
</div>

<div class="section"><a id="affi-examples" name="affi-examples" />
<div class="titlepage">
<div>
<h3 class="title"><a id="affi-examples"
name="affi-examples" />Examples</h3>
</div>

<div>
<h2 class="subtitle">NB: These examples are somewhat specific to the
Amiga.</h2>
</div>
</div>

<div class="example">
<p><a id="affi-ex-1-predefined" name="affi-ex-1-predefined" /><b>Example
32.8. Using a predefined library function file</b></p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "AFFI-TEST")

;; SysBase is the conventional name for exec.library
;; It is only enforced by the file loaded by REQUIRE-LIBRARY-FUNCTIONS
(eval-when (compile eval load)
  (declare-library-base :SysBase "exec.library")) ;keyword avoids name conflicts

;; using only MLIBCALL allows not to load definitions at load-time
(eval-when (compile eval)
  (require-library-functions "exec.library"
    :import '("FindTask")))

(with-open-library ("exec.library")
  (print (mlibcall FindTask 0)))
</pre>

This file can be used in interpreted and compiled mode. Compiled, it will
have inlined the library function calls. 
<br />
<br />
</div>

<div class="example">
<p><a id="affi-ex-2-flibcall" name="affi-ex-2-flibcall" /><b>Example 32.9.
Using flibcall</b></p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  ;; keyword avoids name conflicts
  (declare-library-base :SysBase "exec.library"))

;; The load situation permits the use of flibcall
(eval-when (eval compile load)
  (require-library-functions "exec.library"))

(unless (open-library 'SysBase) (error "No library for SysBase"))
(flibcall (if t 'FindTask 'Debug) 0)
(close-library 'SysBase)
</pre>
</div>

<div class="example">
<p><a id="affi-ex-3-dynamic" name="affi-ex-3-dynamic" /><b>Example 32.10.
Be fully dynamic, defining library bases ourselves</b></p>

<pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
target="_top"><tt>DEFPACKAGE</tt></a> "AFFI-TEST" (:use "LISP" "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
target="_top"><tt>IN-PACKAGE</tt></a> "AFFI-TEST")

(eval-when (compile eval load)
  (defvar mylib (declare-library-base :foobase "foo.library")))
(eval-when (eval compile load)          ;eval allows mlibcall, load flibcall
  (defflibfun 'foo1 mylib -30 '#xA '* 'string)
  (defflibfun 'foo2 mylib -36 '#x21 0 * 4))

(defun foo (name)
  (when (open-library mylib)
    (list (mlibcall foo1 name) (flibcall 'foo2 name 123213))
    (close-library mylib)))
</pre>
</div>

<div class="example">
<p><a id="affi-ex-4-sample" name="affi-ex-4-sample" /><b>Example 32.11.
Some sample function definitions</b></p>

<pre class="programlisting">
(defflibfun 'FindTask 'SysBase -294 #xA '* 'string)
(eval-library-function FindTask "exec.library"
  (:offset -294)
  (:return-type *)
  (:arguments
   (name   string   :A1)))
(declare-library-function NameFromLock "dos.library"
  (:offset -402)
  (:return-type 0)
  (:arguments
   (lock   4   :D1)
   (buffer :io :D2)
   (len    4   :D3)))

(eval-when (compile eval)
  (defconstant GVF_LOCAL_ONLY (ash 1 9))
  (defflibfun 'SetVar 'DosBase -900 #x5432 0 'string 'string -4 4))
(defun setvar (name value)
  (with-open-library (DosBase)
    ;; length of -1 means find length of <tt>NULL</tt>-terminated-string
    (mlibcall SetVar name value -1 GVF_LOCAL_ONLY)))
</pre>
</div>
</div>
</div>

<div class="section"><a id="rexx" name="rexx" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="rexx"
name="rexx" />Extensions-2.5. ARexx</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: <a href="http://www.amiga.org/"
target="_top"><span class="strong"><i>Amiga</i></span></a> platforms
only.</h2>
</div>
</div>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> comes
with a small yet extensible and powerful ARexx interface.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e37823" name="d0e37823" /><span
class="term"><tt>(rexx-do-command "return address()" :string <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> :result <a
href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>)</tt></span></dt>

<dd>tells you the name of the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> ARexx port. The default extension for <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> ARexx scripts
is <tt>cl</tt>.</dd>

<dt><a id="d0e37849" name="d0e37849" /><span
class="term"><tt>(rexx-do-command <i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :string :result :token :io
:host)</tt></span></dt>

<dd>-&gt; <tt>(RC <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>result</tt></i>)</tt>, or
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> on failure</dd>

<dt><a id="d0e37877" name="d0e37877" /><span
class="term"><tt>(rexx-run-command <i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :string :token)</tt></span></dt>

<dd>-&gt; <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a>, or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> on failure</dd>

<dt><a id="d0e37899" name="d0e37899" /><span
class="term"><tt>(rexx-send-command <i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> :string :result :token :io
:host)</tt></span></dt>

<dd>-&gt; <i><tt>arexx-msg-handle</tt></i>, or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> on failure</dd>

<dt><a id="d0e37920" name="d0e37920" /><span
class="term"><tt>(rexx-wait-sent-command
<i><tt>arexx-msg-handle</tt></i>)</tt></span></dt>

<dd>-&gt; <tt>(RC <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>result</tt></i>)</tt>, or
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> on failure</dd>

<dt><a id="d0e37944" name="d0e37944" /><span
class="term"><tt>(rexx-loop)</tt></span></dt>

<dd>-&gt; no return, use the <tt>exit-loop.cl</tt> ARexx script to abort
the loop</dd>
</dl>
</div>

<p><i><tt>command</tt></i> may be a string denoting a command with
optional arguments or a vector of strings thus denoting an ARexx function
call. The first element in the vector is the function name, the others are
the up to 15 arguments.</p>

<p>Messages may be sent to an arbitrary ARexx host, special cases are <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (meaning <tt>"REXX"</tt>, the default) and
<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> (<tt>"AREXX"</tt> for asynchronous
execution).</p>

<p>ARexx server mode: Like Ispell, Csh and SKsh, you can run it in server
mode by calling <tt>(rexx-loop)</tt>. You can then only exit with the
ARexx <tt>exit-loop.cl</tt> script.</p>

<p>Restrictions: Currently <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> is not able to wait for input from several
sources, e.g. both a console and ARexx, at the same time.</p>
</div>

<div class="section"><a id="socket" name="socket" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="socket"
name="socket" />Extensions-2.6. Socket Streams</h2>
</div>

<div>
<h2 class="subtitle">Platform dependent: <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.</h2>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="sose" name="sose" /><span class="term"><tt>(<a
href="#sose"><tt>SOCKET:SOCKET-SERVER</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a>
[<i><tt>port-or-socket</tt></i>])</tt></span></dt>

<dd>This function creates a socket, binds a port to the socket, and then
listens for connect attempts. The server exists to watch for client
connect attempts. The optional argument is either a port (positive <a
href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
target="_top"><tt>FIXNUM</tt></a>) or a <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>
(from whose peer the connections will be made).</dd>

<dt><a id="sose-close" name="sose-close" /><span class="term"><tt>(<a
href="#sose-close"><tt>SOCKET:SOCKET-SERVER-CLOSE</tt></a>
<i><tt>socket-server</tt></i>)</tt></span></dt>

<dd>Closes down the server socket.</dd>

<dt><a id="sose-port" name="sose-port" /><span class="term"><tt>(<a
href="#sose-port"><tt>SOCKET:SOCKET-SERVER-PORT</tt></a>
<i><tt>socket-server</tt></i>)</tt></span></dt>

<dd>Returns the port which was bound using <a
href="#sose"><tt>SOCKET:SOCKET-SERVER</tt></a>.</dd>

<dt><a id="so-wait" name="so-wait" /><span class="term"><tt>(<a
href="#so-wait"><tt>SOCKET:SOCKET-WAIT</tt></a>
<i><tt>socket-server</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>seconds</tt></i>
[<i><tt>microseconds</tt></i>]])</tt></span></dt>

<dd>Given time argument(s), waits for (possibly zero) fixed duration for a
connect on the <i><tt>socket-server</tt></i> (a <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-SERVER</tt></a>).
Without a timeout argument, <a
href="#so-wait"><tt>SOCKET:SOCKET-WAIT</tt></a> blocks indefinitely.</dd>

<dt><a id="so-accept" name="so-accept" /><span class="term"><tt>(<a
href="#so-accept"><tt>SOCKET:SOCKET-ACCEPT</tt></a>
<i><tt>socket-server</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a> <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> <a
href="#buffered"><tt>:BUFFERED</tt></a>)</tt></span></dt>

<dd>Creates the server-side two-way stream for the connection.</dd>

<dt><a id="so-connect" name="so-connect" /><span class="term"><tt>(<a
href="#so-connect"><tt>SOCKET:SOCKET-CONNECT</tt></a> <i><tt>port</tt></i>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>host</tt></i>] <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a> <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> <a
href="#buffered"><tt>:BUFFERED</tt></a>)</tt></span></dt>

<dd>Attempts to create a client-side two-way <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>.
Blocks until the server accepts the connections.</dd>

<dt><a id="so-status" name="so-status" /><span class="term"><tt>(<a
href="#so-status"><tt>SOCKET:SOCKET-STATUS</tt></a>
<i><tt>socket-stream-or-list</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> [<i><tt>seconds</tt></i>
[<i><tt>microseconds</tt></i>]])</tt></span></dt>

<dd>
<p>Checks whether it is possible to read from or write to a <a
href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>
or whether a connection is available on a <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-SERVER</tt></a>
without blocking. This is similar to <a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a>, which checks only one stream and only
for input, and <a href="#so-wait"><tt>SOCKET:SOCKET-WAIT</tt></a>, which
works only with <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-SERVER</tt></a>s.</p>

<div class="variablelist">
<p><b>Possible values of <i><tt>socket-stream-or-list</tt></i></b></p>

<dl>
<dt><a id="d0e38217" name="d0e38217" /><span class="term"><a
href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>
or <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-SERVER</tt></a></span></dt>

<dd>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html"
target="_top"><tt>T</tt></a> if a connection on the <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-SERVER</tt></a>
is available; or <tt>:INPUT</tt>, <tt>:OUTPUT</tt> or <tt>:IO</tt> is some
input/output is possible on the <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a></dd>

<dt><a id="d0e38250" name="d0e38250" /><span class="term"><tt>(<a
href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a> .
<i><tt>direction</tt></i>)</tt></span></dt>

<dd>Return the appropriate keyword (<tt>:INPUT</tt>, <tt>:OUTPUT</tt> or
<tt>:IO</tt>) if some input/output is possible on the <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>
in the specified <i><tt>direction</tt></i> (which should be one of
<tt>:INPUT</tt>, <tt>:OUTPUT</tt> or <tt>:IO</tt>).</dd>

<dt><a id="d0e38289" name="d0e38289" /><span class="term">a list of the
above</span></dt>

<dd>Return a list of values, one for each element of the argument list (a
la <a
href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
target="_top"><tt>MAPCAR</tt></a>)</dd>
</dl>
</div>

<p>The optional arguments specify the timeout. <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> means wait forever, <tt>0</tt> means poll.
Note that this function never waits for input or output to arrive, only
for information on input or output presense (so that <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a> or <a
href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
target="_top"><tt>WRITE-CHAR</tt></a> will not block) to become available
(or a connection to become possible).</p>

<p>For each <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>
this function returns</p>

<div class="variablelist">
<p><b>Return values of <a
href="#so-status"><tt>SOCKET:SOCKET-STATUS</tt></a></b></p>

<dl>
<dt><a id="d0e38328" name="d0e38328" /><span class="term"><a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a></span></dt>

<dd>when no information is available or no operation is possible</dd>

<dt><a id="d0e38336" name="d0e38336" /><span
class="term"><tt>:ERROR</tt></span></dt>

<dd>when an i/o operation will cause an error</dd>

<dt><a id="d0e38343" name="d0e38343" /><span
class="term"><tt>:INPUT</tt></span></dt>

<dd>when you can only read from the stream</dd>

<dt><a id="d0e38350" name="d0e38350" /><span
class="term"><tt>:OUTPUT</tt></span></dt>

<dd>when you can only write to the stream</dd>

<dt><a id="d0e38357" name="d0e38357" /><span
class="term"><tt>:IO</tt></span></dt>

<dd>when you can both read from and write to the stream</dd>
</dl>
</div>
</dd>

<dt><a id="sost-hopo" name="sost-hopo" /><span class="term"><tt>(<a
href="#sost-hopo"><tt>SOCKET:SOCKET-STREAM-HOST</tt></a>
<i><tt>socket-stream</tt></i>)</tt>, <tt>(<a
href="#sost-hopo"><tt>SOCKET:SOCKET-STREAM-PORT</tt></a>
<i><tt>socket-stream</tt></i>)</tt></span></dt>

<dd>These two functions return information about the <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>.
For a server, <a href="#sost-hopo"><tt>SOCKET:SOCKET-STREAM-HOST</tt></a>
returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="service-port" name="service-port" /><span class="term"><tt>(<a
href="#service-port"><tt>SOCKET:SOCKET-SERVICE-PORT</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>service-name</tt></i>
(<i><tt>protocol</tt></i> "tcp"))</tt></span></dt>

<dd>A convenience function for looking up a port given the service name.
It returns the servent struct as multiple values (name, list of aliases,
port, protocol) for the given <i><tt>service-name</tt></i> and
<i><tt>protocol</tt></i>, or all services as the list of vectors of <a
href="http://www.lisp.org/HyperSpec/Body/fun_length.html"
target="_top"><tt>LENGTH</tt></a> 4, if <i><tt>service-name</tt></i> is
not given or is <tt>:DEFAULT</tt> or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>.</dd>

<dt><a id="sost-peer" name="sost-peer" /><span class="term"><tt>(<a
href="#sost-peer"><tt>SOCKET:SOCKET-STREAM-PEER</tt></a>
<i><tt>socket-stream</tt></i>
[<i><tt>do-not-resolve-p</tt></i>])</tt></span></dt>

<dd>
<p>Given a stream, this function returns the name of the host on the
opposite side of the connection and its port number; the server-side can
use this to see who connected.</p>

<p>When the optional second argument is non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, the hostname resolution is disabled and
just the IP address is returned, without the FQDN (Fully Qualified Domain
Name).</p>
</dd>

<dt><a id="sost-local" name="sost-local" /><span class="term"><tt>(<a
href="#sost-local"><tt>SOCKET:SOCKET-STREAM-LOCAL</tt></a>
<i><tt>socket-stream</tt></i>
[<i><tt>do-not-resolve-p</tt></i>])</tt></span></dt>

<dd>The dual to <a
href="#sost-peer"><tt>SOCKET:SOCKET-STREAM-PEER</tt></a> - same
information, host name and port number, but for the local host. The
difference from <a
href="#sost-hopo"><tt>SOCKET:SOCKET-STREAM-HOST</tt></a> and <a
href="#sost-hopo"><tt>SOCKET:SOCKET-STREAM-PORT</tt></a> is that this
function asks the OS (and thus returns the correct trusted values) while
the other two are just accessors to the internal data structure, and
basically return the arguments given to the function which created the <a
href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>.</dd>
</dl>
</div>
</div>

<div class="section"><a id="syscalls" name="syscalls" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="syscalls"
name="syscalls" />Extensions-2.7. System Calls</h2>
</div>
</div>

<p>When <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is
configured with an option <tt>--with-export-syscalls</tt>, some system
calls are available from lisp, in package <a href="#syscalls"
title="Extensions-2.7. System Calls">&ldquo;POSIX&rdquo;</a>.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e38518" name="d0e38518" /><span
class="term"><tt>(</tt>posix:resolve-host-ipaddr</span> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>host</tt></i>)</dt>

<dd>Returns the hostent struct (name, list of aliases, list of IP
addresses as dotted quads (for IPv4) or coloned octets (for IPv6), address
type - IPv4 or IPv6). When <i><tt>host</tt></i> is omitted or
<tt>:DEFAULT</tt>, return the data for the current host. When
<i><tt>host</tt></i> is given and is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, all the host database is returned as a
list (this would be the contents of the <tt>/etc/hosts</tt> file on a UNIX
system or <tt>${windir}/system32/etc/hosts</tt> on a Win32 system).</dd>

<dt><a id="d0e38557" name="d0e38557" /><span
class="term"><tt>(</tt>posix:file-stat</span> <i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>link-p</tt></i>)</dt>

<dd>
<p>Return the stat struct. <i><tt>pathname</tt></i> can be a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
target="_top"><tt>STREAM</tt></a>, a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
target="_top"><tt>PATHNAME</tt></a>, a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
target="_top"><tt>STRING</tt></a> or a <a
href="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
target="_top"><tt>NUMBER</tt></a> (on a <a
href="http://www.UNIX-systems.org/online.html" target="_top"><span
class="strong"><i>UNIX</i></span></a> system, meaning file descriptor).
The first slot of the struct returned is the string or the number on which
<tt>stat(2)</tt>/<tt>fstat(2)</tt>/<tt>lstat(2)</tt> was called. The other
13 slots are numbers, members of the stat struct: device, inode,
protection, number of hard links, owner's UID, owner's GID, device type,
total size (bytes), blocksize for filesystem I/O, number of blocks
allocated, atime, mtime, ctime (as the number of seconds since
1900-01-01). If the system does not support a particular field (e.g.,
Win32 does not have hard links), <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (or the default, like 1 for the number of
hard links for Win32 or DOS) is returned.</p>

<p>[UNIX systems only at this time, patches are welcome.]</p>
</dd>

<dt><a id="d0e38615" name="d0e38615" /><span
class="term"><tt>(</tt>posix:user-data</span> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>user</tt></i>)</dt>

<dd>
<p>Return the passwd struct (name, encoded password, UID, GID, full name,
home directory, shell). When <i><tt>user</tt></i> is <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, return all users. When
<i><tt>user</tt></i> is <tt>:DEFAULT</tt> or not supplied, return the
information about the current user. If the system does not support a
particular field (e.g., Win32 does not have a concept of a shell), <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (or the default, like
<tt>c:\command.com</tt> for DOS) is returned.</p>

<p>[UNIX systems only at this time, patches are welcome.]</p>
</dd>

<dt><a id="d0e38654" name="d0e38654" /><span
class="term"><tt>(</tt>posix:sysinfo</span>)</dt>

<dd>Return a struct describing the OS, derived from <tt>uname(2)</tt> and
<tt>sysconf(3)</tt>.</dd>

<dt><a id="d0e38670" name="d0e38670" /><span
class="term"><tt>(</tt>posix:resource-usage-limits</span>)</dt>

<dd>Return 3 structs describing the resources usage and limits, derived
from <tt>getrlimit(2)</tt> and <tt>getrusage(3)</tt>.</dd>

<dt><a id="d0e38687" name="d0e38687" /> <span
class="term"><tt>(</tt>posix:erf</span> <i><tt>real</tt></i>)
<tt>(</tt>posix:erfc <i><tt>real</tt></i>) <tt>(</tt>posix:j0
<i><tt>real</tt></i>) <tt>(</tt>posix:j1 <i><tt>real</tt></i>)
<tt>(</tt>posix:jn <i><tt>integer</tt></i> <i><tt>real</tt></i>)
<tt>(</tt>posix:y0 <i><tt>real</tt></i>) <tt>(</tt>posix:y1
<i><tt>real</tt></i>) <tt>(</tt>posix:yn <i><tt>integer</tt></i>
<i><tt>real</tt></i>) <tt>(</tt>posix:gamma <i><tt>real</tt></i>)
<tt>(</tt>posix:lgamma <i><tt>real</tt></i>)</dt>

<dd>
<p>Compute the error functions, Bessel functions and Gamma. These
functions are required by the POSIX standard and should be available in
libm.so. Please note that these functions do not provide lisp-style error
handling and precision, and do all the computations at the double float
level.</p>

<p>[UNIX systems only at this time, patches are welcome.]</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="quickstart" name="quickstart" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="quickstart"
name="quickstart" />Extensions-2.8. Quickstarting delivery with <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a></h2>
</div>
</div>

<p>This section describes four ways to turn <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> programs into
executable programs, which can be started as quickly as executables
written in other languages.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e38803" name="d0e38803" /><span class="term">UNIX</span></dt>

<dd><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> can act
as a script interpreter.</dd>

<dt><a id="d0e38812" name="d0e38812" /><span class="term">Desktop
environments such as <a href="http://www.kde.org" target="_top">KDE</a>,
<a href="http://www.gnome.org" target="_top">GNOME</a>, or
Windows.</span></dt>

<dd>Files created with <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> can be associated with the <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> executables so
that clicking on them would make <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> execute the appropriate code.</dd>

<dt><a id="d0e38836" name="d0e38836" /><span class="term">Linux kernel
with <tt>CONFIG_BINFMT_MISC=y</tt></span></dt>

<dd>Associate the extensions <tt>fas</tt> and <tt>lisp</tt> with <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>; then you can
make the files executable and run them from the command line.</dd>

<dt><a id="d0e38854" name="d0e38854" /><span class="term"><a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a></span></dt>

<dd>Files created with <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> can be associated with a Workbench project
icon so that clicking on them would make <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> execute the appropriate code. Note that
several <tt>fas</tt> files can be concatenated (using <tt>Join</tt>) into
one file.</dd>
</dl>
</div>

<p>These four techniques apply to a single <tt>lisp</tt> or <tt>fas</tt>
file. If your application is made up of several <tt>lisp</tt> or
<tt>fas</tt> files, you can simply concatenate them (using <b>cat</b>(1))
into one file; the techniques then apply to that concatenated file.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e38895" name="d0e38895" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd>
<p><a id="d0e38902" name="d0e38902" />On Unix, a text file (<tt>fas</tt>
or <tt>lisp</tt>) can be made executable by adding a first line of the
form</p>

<pre class="programlisting">
#!<i><tt>interpreter</tt></i> [<i><tt>interpreter-arguments</tt></i>]
</pre>

and using <b>chmod</b>(1) to make the script executable. <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> can be used as
a script interpreter under the following circumstances:
<br />
<br />
<div class="itemizedlist">
<ul>
<li><a id="d0e38928" name="d0e38928" />The <i><tt>interpreter</tt></i>
must be the full pathname of <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>. The recommended path is
<tt>/usr/local/bin/clisp</tt>, and if <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> is actually installed elsewhere, making
<tt>/usr/local/bin/clisp</tt> be a symbolic link to the real <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>.</li>

<li><a id="d0e38952" name="d0e38952" />The <i><tt>interpreter</tt></i>
must be a real executable, not a script. Unfortunately, in the binary
distributions of <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> on Solaris, <b>clisp</b> is a shell script
because a <a href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler cannot be assumed to be installed on
this platform. If you do have a <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a> compiler installed, build <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> from the
source yourself; <b>make install</b> will install <b>clisp</b> as a real
executable.</li>

<li>
<p><a id="d0e38983" name="d0e38983" />On some platforms, the first line
which specifies the interpreter is limited in length:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e38987" name="d0e38987" />max. 32 characters on SunOS 4,</li>

<li><a id="d0e38990" name="d0e38990" />max. 80 characters on HP-UX,</li>

<li><a id="d0e38993" name="d0e38993" />max. 127 characters on Linux.</li>
</ul>
</div>

Characters exceeding this limit are simply cut off by the system. At least
128 characters are accepted on Solaris, IRIX, AIX, OSF/1. There is no
workaround: You have to keep the interpreter pathname and arguments short.
<br />
<br />
</li>

<li><a id="d0e38997" name="d0e38997" />On Solaris and HP-UX, only the
first <i><tt>interpreter-arg</tt></i> is passed to the
<i><tt>interpreter</tt></i>. In order to pass more than one option (for
example, <tt>-Msomewhere.mem</tt> and <tt>-C</tt>) to <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>, separate them
by hard spaces (ISO Latin-1 character 160) instead of normal spaces. (But
the separator between <i><tt>interpreter</tt></i> and
<i><tt>interpreter-arguments</tt></i> must still be a normal space!) <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> will split the
<i><tt>interpreter-arguments</tt></i> at hard spaces and at normal
spaces.</li>
</ul>
</div>

<p>The script should contain Lisp forms, except in the <tt>#!</tt> line.
The file is loaded normally, through the function <a
href="http://www.lisp.org/HyperSpec/Body/fun_load.html"
target="_top"><tt>LOAD</tt></a>. Before it is loaded, the variable <span
class="strong"><i><tt>ext:*args*</tt></i></span> is bound to a list of
strings, representing the arguments given to the Lisp script. <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*STANDARD-INPUT*</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*STANDARD-OUTPUT*</tt></a> are bound, as usual, to the
Unix standard input and output. <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*ERROR-OUTPUT*</tt></a> is bound to the Unix error
output. Continuable errors will be turned to warnings. Non-continuable
errors and Control-C interrupts will terminate the execution of the Lisp
script with an error status. If you wish the script's contents to be
compiled during loading, add <a href="clisp.html#opt-load-comp"
target="_top"><tt>-C</tt></a> to the
<i><tt>interpreter-arguments</tt></i>.</p>

<p>Another, quite inferior, alternative is to put the following into a
file:</p>

<pre class="programlisting">
#!/bin/sh
exec clisp &lt;&lt;EOF
(lisp-form)
(another-lisp-form)
(yet-another-lisp-form)
EOF
</pre>

<p>The problem with this approach is that the return values of each form
will be printed to the standard output. Another problem is that no user
input will be available.</p>
</dd>

<dt><a id="d0e39075" name="d0e39075" /><span class="term">Platform
dependent: <a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd>
<p>There are two different ways to make <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> "executables" for Windows platforms.</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e39090" name="d0e39090" />Associate the <tt>mem</tt>
extension with <b>c:\clisp\lisp.exe -B c:\clisp -M %s</b>.</li>

<li><a id="d0e39099" name="d0e39099" />Associate the <tt>fas</tt>
extension with <b>c:\clisp\lisp.exe -B c:\clisp -M c:\clisp\lispinit.mem
-i %s</b>. Alternatively, you may want to have a function <tt>main</tt> in
your <tt>fas</tt> files and associate the <tt>fas</tt> extension with
<b>c:\clisp\lisp.exe -B c:\clisp -M c:\clisp\lispinit.mem -i %s -x
(main)</b>.</li>
</ul>
</div>

<p>Then clicking on the compiled lisp file (with <tt>fas</tt> extension)
will load the file (thus executing all the code in the file), while the
clicking on a <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a> (with
<tt>mem</tt> extension) will start clisp with the given <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>.</p>

<p>Note that <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> is distributed with a file
<tt>install.bat</tt>, which creates a file <tt>clisp.bat</tt> on your
desktop and also associates <tt>fas</tt>, <tt>lisp</tt>, and <tt>mem</tt>
files with <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>.</p>
</dd>

<dt><a id="d0e39164" name="d0e39164" /><span class="term">Platform
dependent: <a href="http://www.linux.org/" target="_top"><span
class="strong"><i>Linux</i></span></a> platforms only.</span></dt>

<dd>
<p><a id="d0e39171" name="d0e39171" />You have to build your kernel with
<tt>CONFIG_BINFMT_MISC=y</tt> and <tt>CONFIG_PROC_FS=y</tt>. Then you will
have a <tt>/proc/sys/fs/binfmt_misc/</tt> directory and you will be able
to do (as <tt>root</tt>; you might want to put these lines into
<tt>/etc/rc.d/rc.local</tt>):</p>

<pre class="screen">
bash# echo ":CLISP:E::fas::/usr/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
bash# echo ":CLISP:E::lisp::/usr/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
</pre>


<br />
<br />
<p>Then you can do the following:</p>

<pre class="screen">
bash$ cat &lt;&lt; EOF &gt; hello.lisp
(print "hello, world!")
EOF
bash$ clisp -c hello.lisp

Compiling file hello.lisp ...

Compilation of file hello.lisp is finished.
0 errors, 0 warnings
bash$ chmod +x hello.fas
bash$ hello.fas

"hello, world!"
bash$
</pre>


<br />
<br />
<p>Please read <tt>/usr/src/linux/Documentation/binfmt_misc.txt</tt> for
details.</p>
</dd>

<dt><a id="d0e39201" name="d0e39201" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>
<p><a id="d0e39208" name="d0e39208" />Using a Workbench project file, the
<a href="#image" title="Extensions-1.1. Saving an Image">memory
image</a>s, source and binary files can be made "executable".</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e39215" name="d0e39215" />Using IconEdit, create a project
icon.</li>

<li><a id="d0e39218" name="d0e39218" />Set the tool to
<tt>lisp:lisp.run</tt> (or wherever the binary is located).</li>

<li><a id="d0e39224" name="d0e39224" />Define a tooltype named
<i><tt>ARGS</tt></i> set to <tt>-M *</tt> for a <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a> project icon or
to <tt>-M lisp:lispinit.mem -i *</tt> for a source or compiled lisp file.
The startup code will replace an isolated * token with the file name.</li>

<li><a id="d0e39242" name="d0e39242" />Alternatively, you may want to have
a function <tt>main</tt> in your files and set the <i><tt>ARGS</tt></i>
tooltype to <tt>-M lisp:lispinit.mem -i * -x (main)</tt>.</li>

<li><a id="d0e39254" name="d0e39254" />You might want to add more <a
href="clisp.html" target="_top">command line options</a> to the
<i><tt>ARGS</tt></i> tooltype.</li>
</ul>
</div>

Clicking on the compiled lisp file (with <tt>fas</tt> suffix) will load
the image and the file (thus executing all the code in the file), while
clicking on the <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>'s <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a> (with
<tt>mem</tt> suffix) with start <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> with the given <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>.
<br />
<br />
<p>You might want to add a tooltype named <i><tt>WINDOW</tt></i> which
names the console window that <a
href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
target="_top"><tt>*TERMINAL-IO*</tt></a> will be bound to, for example
<tt>CON:0/0/500/300/CLISP-Listener/AUTO/CLOSE</tt>, or
<tt>TCP:20002</tt>.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="app-dev" name="app-dev" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="app-dev"
name="app-dev" />Extensions-2.9. Application delivery with <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a></h2>
</div>
</div>

<p>Some ways of packaging <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> programs are discussed in the section <a
href="#quickstart"
title="Extensions-2.8. Quickstarting delivery with CLISP">Quickstarting
delivery with <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a></a>.</p>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is Free
Software, covered by the <a href="http://www.gnu.org"
target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html"
target="_top">GPL</a>, with special terms governing the distribution of
applications that run in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>. The precise terms can be found in the
<tt>COPYRIGHT</tt> file contained in the source and binary distributions
of <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>. Here is
an informal clarification what these terms mean in practice. Please refer
to the said <tt>COPYRIGHT</tt> file when in doubt.</p>

<p>In many cases, <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> does not force an application to be covered
by the <a href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
Nevertheless, we encourage you to release your software under an open
source copyright. The benefits of such a copyright for your users are
numerous, in particular they are free to modify the application when their
needs/requirements change, and they are free to recompile the application
when they upgrade their machine or operating system.</p>

<p><a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
extensions, i.e. programs which need to access non-portable <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> internal
symbols (in the packages &ldquo;SYSTEM&rdquo;, &ldquo;COMPILER&rdquo;,
&ldquo;CLOS&rdquo;, <a href="#dffi"
title="Extensions-2.3. The Foreign Function Call Facility">&ldquo;FFI&rdquo;</a>,
...), must be covered by <a href="http://www.gnu.org"
target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html"
target="_top">GPL</a> as well.</p>

<p>Other programs running in <a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a> have to or need not to be placed under <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>,
depending on their distribution form:</p>

<div class="itemizedlist">
<ul>
<li><a id="d0e39396" name="d0e39396" />Programs distributed as Lisp source
of <tt>fas</tt> files can be distributed without restrictions coming from
<a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>.</li>

<li><a id="d0e39406" name="d0e39406" />Programs distributed as <a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> <a
href="#image" title="Extensions-1.1. Saving an Image">memory image</a>s
can be distributed only if accompanied with the non-<a
href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> <tt>fas</tt>
files which make up the <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>, and a
<tt>Makefile</tt> for rebuilding the <a href="#image"
title="Extensions-1.1. Saving an Image">memory image</a>.</li>

<li><a id="d0e39432" name="d0e39432" />If you need to distribute a
modified <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a>
executable (for example, incorporating additional modules written in <a
href="http://www.eskimo.com/~scs/C-faq/top.html"
target="_top"><b>C</b></a>), you must distribute its full source under <a
href="http://www.gnu.org" target="_top">GNU</a> <a
href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. If you
are not satisfied with this, you can instead put the additional modules
into a separate (non-<a href="http://clisp.cons.org"
target="_top"><b>CLISP</b></a>) program, with which your Lisp program will
communicate via <a href="#socket"
title="Extensions-2.6. Socket Streams"><tt>SOCKET:SOCKET-STREAM</tt></a>s.</li>
</ul>
</div>


<br />
<br />
</div>

<div class="section"><a id="shell" name="shell" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="shell"
name="shell" />Extensions-2.10. Shell, Pipes and Printing</h2>
</div>
</div>

<div class="section"><a id="exec" name="exec" />
<div class="titlepage">
<div>
<h3 class="title"><a id="exec" name="exec" />Shell</h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e39465" name="d0e39465" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.acorn.com/" target="_top"><span
class="strong"><i>Acorn</i></span></a>, <a href="http://www.freedos.org/"
target="_top"><span class="strong"><i>DOS</i></span></a>, <a
href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a>, platforms only.</span></dt>

<dd><tt>(<a href="#exec" title="Shell"><tt>EXT:EXECUTE</tt></a>
<i><tt>programfile</tt></i> <i><tt>arg<sub>1</sub></tt></i>
<i><tt>arg<sub>2</sub></tt></i> ...)</tt> executes an external program.
Its name is <i><tt>programfile</tt></i>. It is given the strings
<i><tt>arg<sub>1</sub></tt></i>, <i><tt>arg<sub>2</sub></tt></i>, ... as
arguments.</dd>

<dt><a id="d0e39521" name="d0e39521" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd><tt>(<a href="#exec" title="Shell"><tt>EXT:EXECUTE</tt></a>
<i><tt>command</tt></i>)</tt> executes a given <i><tt>command</tt></i>
using the operating system's shell.</dd>

<dt><a id="d0e39545" name="d0e39545" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a>, <a href="http://www.acorn.com/"
target="_top"><span class="strong"><i>Acorn</i></span></a>, <a
href="http://www.freedos.org/" target="_top"><span
class="strong"><i>DOS</i></span></a>, <a href="http://www.os2.org/"
target="_top"><span class="strong"><i>OS/2</i></span></a>, <a
href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> platforms only.</span></dt>

<dd><tt>(<a href="#exec" title="Shell"><tt>EXT:SHELL</tt></a>
[<i><tt>command</tt></i>])</tt> calls the operating system's shell.
<tt>(<a href="#exec" title="Shell"><tt>EXT:SHELL</tt></a>)</tt> calls the
shell for interactive use. <tt>(<a href="#exec"
title="Shell"><tt>EXT:SHELL</tt></a> <i><tt>command</tt></i>)</tt> calls
the shell only for execution of the one given
<i><tt>command</tt></i>.</dd>

<dt><a id="d0e39606" name="d0e39606" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.</span></dt>

<dd>
<p>The functions <tt>EXT:RUN-SHELL-COMMAND</tt> and
<tt>EXT:RUN-PROGRAM</tt> are the general interface to <a href="#exec"
title="Shell"><tt>EXT:SHELL</tt></a> and the above:</p>

<p><tt>(</tt>EXT:RUN-SHELL-COMMAND <i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:INPUT</tt> <tt>:OUTPUT</tt>
<tt>:IF-OUTPUT-EXISTS</tt>) runs a shell command.</p>

<p><tt>(</tt>EXT:RUN-PROGRAM <i><tt>program</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:arguments</tt> <tt>:INPUT</tt>
<tt>:OUTPUT</tt> <tt>:IF-OUTPUT-EXISTS</tt>) runs an external program.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e39684" name="d0e39684" /><span
class="term"><i><tt>command</tt></i></span></dt>

<dd>
<p>the shell command.</p>

<div class="variablelist">
<dl>
<dt><a id="d0e39693" name="d0e39693" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a> platforms
only.</span></dt>

<dd>The shell the command is passed to is the value of the environment
variable <tt>SHELL</tt>, which normally is <tt>/bin/sh</tt>. The command
should be a ``simple command''; a ``command list'' should be enclosed in
"{ ... ; }" (for <tt>/bin/sh</tt>) or "( ... )" (for
<tt>/bin/csh</tt>).</dd>
</dl>
</div>
</dd>

<dt><a id="d0e39716" name="d0e39716" /><span
class="term"><i><tt>program</tt></i></span></dt>

<dd>the program. The directories listed in the <tt>PATH</tt> environment
variable will be searched for it.</dd>

<dt><a id="d0e39726" name="d0e39726" /><span
class="term"><tt>:arguments</tt></span></dt>

<dd>a list of arguments (strings) that are given to the program.</dd>

<dt><a id="d0e39733" name="d0e39733" /><span
class="term"><tt>:INPUT</tt></span></dt>

<dd>where the program's input is to come from: either <tt>:terminal</tt>
(the standard input) or <tt>:STREAM</tt> (a Lisp stream to be created) or
a pathname (an input file) or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (no input at all).</dd>

<dt><a id="d0e39750" name="d0e39750" /><span
class="term"><tt>:OUTPUT</tt></span></dt>

<dd>where the program's output is to be sent to: either <tt>:terminal</tt>
(the standard output) or <tt>:STREAM</tt> (a Lisp stream to be created) or
a pathname (an output file) or <a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> (ignore the output).</dd>

<dt><a id="d0e39767" name="d0e39767" /><span
class="term"><tt>:IF-OUTPUT-EXISTS</tt></span></dt>

<dd>what to do if the <tt>:OUTPUT</tt> file already exists. The possible
values are <tt>:OVERWRITE</tt>, <tt>:APPEND</tt>, <tt>:ERROR</tt>, with
the same meaning as for <a
href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a>.</dd>
</dl>
</div>

<p>If <tt>:STREAM</tt> was specified for <tt>:INPUT</tt> or
<tt>:OUTPUT</tt>, a Lisp stream is returned. If <tt>:STREAM</tt> was
specified for <tt>:INPUT</tt> and <tt>:OUTPUT</tt>, three Lisp streams are
returned, as for the function <a href="#pipe"
title="Pipes"><tt>EXT:MAKE-PIPE-IO-STREAM</tt></a>. This use of
<tt>ext:run-program</tt> can cause deadlocks, see <a href="#pipe"
title="Pipes"><tt>EXT:MAKE-PIPE-IO-STREAM</tt></a>.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="pipe" name="pipe" />
<div class="titlepage">
<div>
<h3 class="title"><a id="pipe" name="pipe" />Pipes</h3>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e39827" name="d0e39827" /><span class="term">Platform
dependent: <a href="http://www.UNIX-systems.org/online.html"
target="_top"><span class="strong"><i>UNIX</i></span></a>, <a
href="http://www.os2.org/" target="_top"><span
class="strong"><i>OS/2</i></span></a>, <a href="http://www.willows.com/"
target="_top"><span class="strong"><i>Win32</i></span></a> platforms
only.</span></dt>

<dd>
<div class="variablelist">
<dl>
<dt><a id="d0e39844" name="d0e39844" /><span class="term"><tt>(<a
href="#pipe" title="Pipes"><tt>EXT:MAKE-PIPE-INPUT-STREAM</tt></a>
<i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a> <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> <a
href="#buffered"><tt>:BUFFERED</tt></a>)</tt></span></dt>

<dd>returns an input stream that will supply the output from the execution
of the given operating system command.</dd>

<dt><a id="d0e39874" name="d0e39874" /><span class="term"><tt>(<a
href="#pipe" title="Pipes"><tt>EXT:MAKE-PIPE-OUTPUT-STREAM</tt></a>
<i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a> <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> <a
href="#buffered"><tt>:BUFFERED</tt></a>)</tt></span></dt>

<dd>returns an output stream that will pass its output as input to the
execution of the given operating system command.</dd>

<dt><a id="d0e39905" name="d0e39905" /><span class="term"><tt>(<a
href="#pipe" title="Pipes"><tt>EXT:MAKE-PIPE-IO-STREAM</tt></a>
<i><tt>command</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <a
href="#eltype"><tt>:ELEMENT-TYPE</tt></a> <a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a> <a
href="#buffered"><tt>:BUFFERED</tt></a>)</tt></span></dt>

<dd>
<p>returns three values. The first value is a bidirectional stream that
will simultaneously pass its output as input to the execution of the given
operating system command and supply the output from this command as input.
The second and third value will be the input stream and the output stream
that make up the I/O stream, respectively. Note that they must be closed
individually.</p>

<p>Warning: Improper use of this function can lead to deadlocks. Use it at
your own risk!</p>

<p>A deadlock occurs if the command and your program either both try to
read from each other at the same time or both try to write to each other
at the same time. To avoid deadlocks, it is recommended that you fix a
protocol between the command and your program and avoid any hidden
buffering: use <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
target="_top"><tt>READ-CHAR</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
target="_top"><tt>READ-CHAR-NO-HANG</tt></a>, <a
href="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
target="_top"><tt>LISTEN</tt></a> instead of <a
href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html"
target="_top"><tt>READ-LINE</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
target="_top"><tt>READ</tt></a> on the input side, and complete every
output operation by a <a
href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
target="_top"><tt>FINISH-OUTPUT</tt></a>. The same cautions must apply to
the called command as well.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="hardcopy" name="hardcopy" />
<div class="titlepage">
<div>
<h3 class="title"><a id="hardcopy" name="hardcopy" />Printing</h3>
</div>
</div>

<p>The macro <span
class="strong"><i><tt>EXT:WITH-OUTPUT-TO-PRINTER</tt></i></span>:</p>

<pre class="programlisting">
(ext:with-output-to-printer (<i><tt>variable</tt></i> [<a
href="#extfmt"><tt>:EXTERNAL-FORMAT</tt></a>])
  {<i><tt>declaration</tt></i>}*
  {<i><tt>form</tt></i>}*)
</pre>

binds the variable <i><tt>variable</tt></i> to an output stream that sends
its output to the printer.
<br />
<br />
</div>
</div>

<div class="section"><a id="dir-key" name="dir-key" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="dir-key"
name="dir-key" />Extensions-2.11. Directory Access</h2>
</div>
</div>

<p>When <a href="http://clisp.cons.org" target="_top"><b>CLISP</b></a> is
configured with an option <tt>--with-dir-key</tt>, some directory access
is available from lisp, in package <a href="#dir-key"
title="Extensions-2.11. Directory Access">&ldquo;LDAP&rdquo;</a>. 3 types
of directory keys may exist, depending on the compilation environment.</p>

<div class="variablelist"><a id="dir-key-type" name="dir-key-type" />
<p><b>valid directory key types</b></p>

<dl>
<dt><a id="d0e40013" name="d0e40013" /><span
class="term">:win32</span></dt>

<dd><a href="http://www.willows.com/" target="_top"><span
class="strong"><i>Win32</i></span></a> registry access</dd>

<dt><a id="d0e40022" name="d0e40022" /><span
class="term">:gnome</span></dt>

<dd><a
href="http://developer.gnome.org/doc/API/libgnome/gnome-gnome-config.html"
target="_top">gnome-config</a> access</dd>

<dt><a id="d0e40030" name="d0e40030" /><span
class="term">:ldap</span></dt>

<dd>LDAP interface via <a href="http://www.openldap.org"
target="_top">OpenLDAP</a> or compatible</dd>
</dl>
</div>

<p>The following functions and macros are exported (please note that these
features are experimental and the API may be modified in the future).</p>

<div class="variablelist">
<dl>
<dt><a id="dir-key-open" name="dir-key-open" /><span class="term"><tt>(<a
href="#dir-key-open"><tt>LDAP:DIR-KEY-OPEN</tt></a> <i><tt>dkey</tt></i>
<i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> (<tt>:DIRECTION</tt> <tt>:INPUT</tt>)
<tt>:IF-DOES-NOT-EXIST</tt></tt></span></dt>

<dd>Open the directory key under <i><tt>dkey</tt></i>, which should be
either an open directory key or a valid <a href="#dir-key-type">directory
key type</a>. The meaning of the <tt>:DIRECTION</tt> and
<tt>:IF-DOES-NOT-EXIST</tt> keyword arguments is the same as for <a
href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a>.</dd>

<dt><a id="dir-key-close" name="dir-key-close" /><span
class="term"><tt>(<a href="#dir-key-close"><tt>LDAP:DIR-KEY-CLOSE</tt></a>
<i><tt>dkey</tt></i>)</tt></span></dt>

<dd>Close the directory key. The preferred way is to use the <a
href="#with-dir-key-open"><tt>LDAP:WITH-DIR-KEY-OPEN</tt></a> macro.</dd>

<dt><a id="with-dir-key-open" name="with-dir-key-open" /><span
class="term"><tt>(<a
href="#with-dir-key-open"><tt>LDAP:WITH-DIR-KEY-OPEN</tt></a>
(<i><tt>variable</tt></i> <i><tt>dkey</tt></i> <i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;REST</tt></a> <i><tt>options</tt></i>) <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;BODY</tt></a>
<i><tt>body</tt></i>)</tt></span></dt>

<dd>Open the directory key (by calling <a
href="#dir-key-open"><tt>LDAP:DIR-KEY-OPEN</tt></a> on
<i><tt>dkey</tt></i>, <i><tt>pathname</tt></i> and
<i><tt>options</tt></i>), bind it to <i><tt>variable</tt></i>, execute
<i><tt>body</tt></i>, then close it with <a
href="#dir-key-close"><tt>LDAP:DIR-KEY-CLOSE</tt></a>.</dd>

<dt><a id="d0e40162" name="d0e40162" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-TYPE</span> <i><tt>dkey</tt></i>)</dt>

<dd>Return the <a href="#dir-key-type">directory key type</a> of the
directory key</dd>

<dt><a id="d0e40178" name="d0e40178" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-PATH</span> <i><tt>dkey</tt></i>)</dt>

<dd>Return the path of this directory key, which is the
<i><tt>pathname</tt></i> argument of <a
href="#dir-key-open"><tt>LDAP:DIR-KEY-OPEN</tt></a> if
<i><tt>dkey</tt></i> was a <a href="#dir-key-type">directory key type</a>
or the concatenation of the <i><tt>pathname</tt></i> argument and the
<tt>ldap:dir-key-path</tt> of <i><tt>dkey</tt></i>.</dd>

<dt><a id="d0e40213" name="d0e40213" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-DIRECTION</span>
<i><tt>dkey</tt></i>)</dt>

<dd>One of <tt>:INPUT</tt>, <tt>:OUTPUT</tt> and <tt>:IO</tt>, indicating
the permitted operation on this key and its derivatives.</dd>

<dt><a id="d0e40235" name="d0e40235" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-CLOSED-P</span>
<i><tt>dkey</tt></i>)</dt>

<dd>Check whether the key has been closed. It is not an error to close a
closed key.</dd>

<dt><a id="d0e40248" name="d0e40248" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-SUBKEY-DELETE</span>
<i><tt>dkey</tt></i> <i><tt>subkey</tt></i>)
<tt>(</tt>LDAP:DIR-KEY-VALUE-DELETE <i><tt>dkey</tt></i>
<i><tt>attribute</tt></i>)</dt>

<dd>Delete the specified subkey or attribute.</dd>

<dt><a id="d0e40276" name="d0e40276" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-SUBKEY</span> <i><tt>dkey</tt></i>)
<tt>(</tt>LDAP:DIR-KEY-ATTRIBUTES <i><tt>dkey</tt></i>)</dt>

<dd>Return the list of the subkeys or attributes.</dd>

<dt><a id="d0e40298" name="d0e40298" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-VALUE</span> <i><tt>dkey</tt></i>
<i><tt>attribute</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;OPTIONAL</tt></a> <i><tt>default</tt></i>)</dt>

<dd>Return the value of the specified attribute, similar to <a
href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html"
target="_top"><tt>GETHASH</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
target="_top"><tt>SETF</tt></a>able just like <a
href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html"
target="_top"><tt>GETHASH</tt></a>.</dd>

<dt><a id="d0e40333" name="d0e40333" /><span
class="term"><tt>(</tt>LDAP:DIR-KEY-INFO</span> <i><tt>dkey</tt></i>)</dt>

<dd>Return some information about the directory key. This is highly
platform-dependent and will probably be removed or replaced or modified in
the future.</dd>

<dt><a id="with-dir-key-search" name="with-dir-key-search" /><span
class="term"><tt>(<a
href="#with-dir-key-search"><tt>LDAP:WITH-DIR-KEY-SEARCH</tt></a>
(<i><tt>key-iter</tt></i> <i><tt>atribute-iter</tt></i>
<i><tt>dkey</tt></i> <i><tt>pathname</tt></i> <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
target="_top"><tt>&amp;KEY</tt></a> <tt>:scope</tt>) <a
href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
target="_top"><tt>&amp;BODY</tt></a>
<i><tt>body</tt></i>)</tt></span></dt>

<dd>
<p>This is the main way to iterate over the subtree under the key
<i><tt>dkey</tt></i>+<i><tt>pathname</tt></i>.</p>

<p><i><tt>key-iter</tt></i> is a non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a> symbol and is bound via <a
href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
target="_top"><tt>MACROLET</tt></a> to a macro, each call of which returns
the next subkey.</p>

<p><i><tt>atribute-iter</tt></i> is a symbol and is bound, when non-<a
href="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
target="_top"><tt>NIL</tt></a>, to a macro, each call of which returns two
values - the next attribute and its value.</p>

<p>The <tt>:scope</tt> keyword argument specifies the scope of the search
and can be</p>

<div class="variablelist">
<dl>
<dt><a id="d0e40415" name="d0e40415" /><span
class="term"><tt>:self</tt></span></dt>

<dd>iterate over the key itself</dd>

<dt><a id="d0e40422" name="d0e40422" /><span
class="term"><tt>:level</tt></span></dt>

<dd>iterate over the children of the key</dd>

<dt><a id="d0e40429" name="d0e40429" /><span
class="term"><tt>:tree</tt></span></dt>

<dd>iterate over the subtree</dd>
</dl>
</div>


<br />
<br />
<p><a href="#with-dir-key-search"><tt>LDAP:WITH-DIR-KEY-SEARCH</tt></a> is
used to implement <tt>LDAP:DIR-KEY-VALUES</tt>,
<tt>LDAP:DIR-KEY-CHILDREN</tt> and <tt>LDAP:DIR-KEY-DUMP-TREE</tt> in
<tt>dirkey.lisp</tt>.</p>
</dd>
</dl>
</div>
</div>

<div class="section"><a id="other" name="other" />
<div class="titlepage">
<div>
<h2 class="title" style="clear: both"><a id="other"
name="other" />Extensions-2.12. Other</h2>
</div>
</div>

<div class="variablelist">
<dl>
<dt><a id="d0e40459" name="d0e40459" /><span class="term">Platform
dependent: <a href="http://www.amiga.org/" target="_top"><span
class="strong"><i>Amiga</i></span></a> platforms only.</span></dt>

<dd>
<p><a id="d0e40466" name="d0e40466" />To have <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*DEBUG-IO*</tt></a> and <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*ERROR-OUTPUT*</tt></a> point to separate console
windows (thus keeping your standard console window clean from error
messages) you can use</p>

<pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*ERROR-OUTPUT*</tt></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
target="_top"><tt>SETQ</tt></a> <a
href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
target="_top"><tt>*DEBUG-IO*</tt></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/fun_open.html"
target="_top"><tt>OPEN</tt></a> "CON:0/0/500/300/CLISP-Debugger/AUTO/CLOSE"
              <tt>:DIRECTION</tt> <tt>:IO</tt>)))
</pre>

at startup. 
<br />
<br />
</dd>
</dl>
</div>
</div>
</div>
</div>

<div id="references" class="bibliography">
<div class="titlepage">
<div>
<h2 class="title"><a id="references" name="references" />References</h2>
</div>
</div>

<div class="bibliodiv">
<h3 class="title"><a id="d0e40511" name="d0e40511">Books</a></h3>

<div id="CLtL1" class="biblioentry"><a id="CLtL1" name="CLtL1" />
<p><span class="abbrev">[CLtL1]</span> <span class="authorgroup">Guy L.
Steele, Jr..</span> <span class="pubdate">1984.</span> <span
class="pagenums">465.</span> <span class="isbn">0-201-10088-6.</span>
<span class="publisher"><span class="publishername">Digital
Press.</span></span> <span class="citetitle"><i>Common Lisp: the Language
(1st Edition)</i>.</span></p>
</div>

<div id="CLtL2" class="biblioentry"><a id="CLtL2" name="CLtL2" />
<p><span class="abbrev">[CLtL2]</span> <span class="authorgroup">Guy L.
Steele, Jr..</span> <span class="pubdate">1990.</span> <span
class="pagenums">1032.</span> <span class="isbn">0-201-10088-6.</span>
<span class="publisher"><span class="publishername">Digital
Press.</span></span> <span class="citetitle"><i><a
href="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/cltl2.html"
 target="_top">Common Lisp: the Language (2nd Edition)</a></i>.</span></p>
</div>
</div>

<div class="bibliodiv">
<h3 class="title"><a id="d0e40559" name="d0e40559">ANSI standard
documents</a></h3>

<div id="ansi-cl" class="biblioentry"><a id="ansi-cl" name="ansi-cl" />
<p><span class="abbrev">[ANSI CL]</span> <span
class="pubdate">1994.</span> <span class="citetitle"><i>ANSI Common Lisp
standard X3.226-1994 - <a href="http://www.x3.org/tc_home/j13sd4.htm"
target="_top">Information Technology - Programming Language - Common
Lisp</a></i>.</span></p>
</div>

<div id="CLHS" class="biblioentry"><a id="CLHS" name="CLHS" />
<p><span class="abbrev">[CLHS]</span> <span class="citetitle"><i><a
href="http://www.lisp.org/HyperSpec/FrontMatter/" target="_top">Common
Lisp HyperSpec</a></i>.</span></p>
</div>
</div>
</div>
</div>
</body>
</html>

